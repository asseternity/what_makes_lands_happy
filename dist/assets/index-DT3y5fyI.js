function d4(e,r){for(var a=0;a<r.length;a++){const i=r[a];if(typeof i!="string"&&!Array.isArray(i)){for(const p in i)if(p!=="default"&&!(p in e)){const y=Object.getOwnPropertyDescriptor(i,p);y&&Object.defineProperty(e,p,y.get?y:{enumerable:!0,get:()=>i[p]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))i(p);new MutationObserver(p=>{for(const y of p)if(y.type==="childList")for(const g of y.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&i(g)}).observe(document,{childList:!0,subtree:!0});function a(p){const y={};return p.integrity&&(y.integrity=p.integrity),p.referrerPolicy&&(y.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?y.credentials="include":p.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function i(p){if(p.ep)return;p.ep=!0;const y=a(p);fetch(p.href,y)}})();function iu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var w1={exports:{}},gy={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oS;function p4(){if(oS)return gy;oS=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(i,p,y){var g=null;if(y!==void 0&&(g=""+y),p.key!==void 0&&(g=""+p.key),"key"in p){y={};for(var c in p)c!=="key"&&(y[c]=p[c])}else y=p;return p=y.ref,{$$typeof:e,type:i,key:g,ref:p!==void 0?p:null,props:y}}return gy.Fragment=r,gy.jsx=a,gy.jsxs=a,gy}var sS;function m4(){return sS||(sS=1,w1.exports=p4()),w1.exports}var de=m4(),P1={exports:{}},Tr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lS;function y4(){if(lS)return Tr;lS=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),y=Symbol.for("react.consumer"),g=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),M=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),U=Symbol.iterator;function z(Me){return Me===null||typeof Me!="object"?null:(Me=U&&Me[U]||Me["@@iterator"],typeof Me=="function"?Me:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,$={};function G(Me,et,st){this.props=Me,this.context=et,this.refs=$,this.updater=st||F}G.prototype.isReactComponent={},G.prototype.setState=function(Me,et){if(typeof Me!="object"&&typeof Me!="function"&&Me!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Me,et,"setState")},G.prototype.forceUpdate=function(Me){this.updater.enqueueForceUpdate(this,Me,"forceUpdate")};function Q(){}Q.prototype=G.prototype;function ee(Me,et,st){this.props=Me,this.context=et,this.refs=$,this.updater=st||F}var ae=ee.prototype=new Q;ae.constructor=ee,V(ae,G.prototype),ae.isPureReactComponent=!0;var _e=Array.isArray,ve={H:null,A:null,T:null,S:null,V:null},Ae=Object.prototype.hasOwnProperty;function Ee(Me,et,st,gt,Et,Zt){return st=Zt.ref,{$$typeof:e,type:Me,key:et,ref:st!==void 0?st:null,props:Zt}}function Fe(Me,et){return Ee(Me.type,et,void 0,void 0,void 0,Me.props)}function ht(Me){return typeof Me=="object"&&Me!==null&&Me.$$typeof===e}function At(Me){var et={"=":"=0",":":"=2"};return"$"+Me.replace(/[=:]/g,function(st){return et[st]})}var ot=/\/+/g;function ft(Me,et){return typeof Me=="object"&&Me!==null&&Me.key!=null?At(""+Me.key):et.toString(36)}function rt(){}function It(Me){switch(Me.status){case"fulfilled":return Me.value;case"rejected":throw Me.reason;default:switch(typeof Me.status=="string"?Me.then(rt,rt):(Me.status="pending",Me.then(function(et){Me.status==="pending"&&(Me.status="fulfilled",Me.value=et)},function(et){Me.status==="pending"&&(Me.status="rejected",Me.reason=et)})),Me.status){case"fulfilled":return Me.value;case"rejected":throw Me.reason}}throw Me}function Ut(Me,et,st,gt,Et){var Zt=typeof Me;(Zt==="undefined"||Zt==="boolean")&&(Me=null);var jt=!1;if(Me===null)jt=!0;else switch(Zt){case"bigint":case"string":case"number":jt=!0;break;case"object":switch(Me.$$typeof){case e:case r:jt=!0;break;case T:return jt=Me._init,Ut(jt(Me._payload),et,st,gt,Et)}}if(jt)return Et=Et(Me),jt=gt===""?"."+ft(Me,0):gt,_e(Et)?(st="",jt!=null&&(st=jt.replace(ot,"$&/")+"/"),Ut(Et,et,st,"",function(wt){return wt})):Et!=null&&(ht(Et)&&(Et=Fe(Et,st+(Et.key==null||Me&&Me.key===Et.key?"":(""+Et.key).replace(ot,"$&/")+"/")+jt)),et.push(Et)),1;jt=0;var ar=gt===""?".":gt+":";if(_e(Me))for(var Jt=0;Jt<Me.length;Jt++)gt=Me[Jt],Zt=ar+ft(gt,Jt),jt+=Ut(gt,et,st,Zt,Et);else if(Jt=z(Me),typeof Jt=="function")for(Me=Jt.call(Me),Jt=0;!(gt=Me.next()).done;)gt=gt.value,Zt=ar+ft(gt,Jt++),jt+=Ut(gt,et,st,Zt,Et);else if(Zt==="object"){if(typeof Me.then=="function")return Ut(It(Me),et,st,gt,Et);throw et=String(Me),Error("Objects are not valid as a React child (found: "+(et==="[object Object]"?"object with keys {"+Object.keys(Me).join(", ")+"}":et)+"). If you meant to render a collection of children, use an array instead.")}return jt}function Be(Me,et,st){if(Me==null)return Me;var gt=[],Et=0;return Ut(Me,gt,"","",function(Zt){return et.call(st,Zt,Et++)}),gt}function ct(Me){if(Me._status===-1){var et=Me._result;et=et(),et.then(function(st){(Me._status===0||Me._status===-1)&&(Me._status=1,Me._result=st)},function(st){(Me._status===0||Me._status===-1)&&(Me._status=2,Me._result=st)}),Me._status===-1&&(Me._status=0,Me._result=et)}if(Me._status===1)return Me._result.default;throw Me._result}var nt=typeof reportError=="function"?reportError:function(Me){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var et=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Me=="object"&&Me!==null&&typeof Me.message=="string"?String(Me.message):String(Me),error:Me});if(!window.dispatchEvent(et))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Me);return}console.error(Me)};function Ct(){}return Tr.Children={map:Be,forEach:function(Me,et,st){Be(Me,function(){et.apply(this,arguments)},st)},count:function(Me){var et=0;return Be(Me,function(){et++}),et},toArray:function(Me){return Be(Me,function(et){return et})||[]},only:function(Me){if(!ht(Me))throw Error("React.Children.only expected to receive a single React element child.");return Me}},Tr.Component=G,Tr.Fragment=a,Tr.Profiler=p,Tr.PureComponent=ee,Tr.StrictMode=i,Tr.Suspense=C,Tr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ve,Tr.__COMPILER_RUNTIME={__proto__:null,c:function(Me){return ve.H.useMemoCache(Me)}},Tr.cache=function(Me){return function(){return Me.apply(null,arguments)}},Tr.cloneElement=function(Me,et,st){if(Me==null)throw Error("The argument must be a React element, but you passed "+Me+".");var gt=V({},Me.props),Et=Me.key,Zt=void 0;if(et!=null)for(jt in et.ref!==void 0&&(Zt=void 0),et.key!==void 0&&(Et=""+et.key),et)!Ae.call(et,jt)||jt==="key"||jt==="__self"||jt==="__source"||jt==="ref"&&et.ref===void 0||(gt[jt]=et[jt]);var jt=arguments.length-2;if(jt===1)gt.children=st;else if(1<jt){for(var ar=Array(jt),Jt=0;Jt<jt;Jt++)ar[Jt]=arguments[Jt+2];gt.children=ar}return Ee(Me.type,Et,void 0,void 0,Zt,gt)},Tr.createContext=function(Me){return Me={$$typeof:g,_currentValue:Me,_currentValue2:Me,_threadCount:0,Provider:null,Consumer:null},Me.Provider=Me,Me.Consumer={$$typeof:y,_context:Me},Me},Tr.createElement=function(Me,et,st){var gt,Et={},Zt=null;if(et!=null)for(gt in et.key!==void 0&&(Zt=""+et.key),et)Ae.call(et,gt)&&gt!=="key"&&gt!=="__self"&&gt!=="__source"&&(Et[gt]=et[gt]);var jt=arguments.length-2;if(jt===1)Et.children=st;else if(1<jt){for(var ar=Array(jt),Jt=0;Jt<jt;Jt++)ar[Jt]=arguments[Jt+2];Et.children=ar}if(Me&&Me.defaultProps)for(gt in jt=Me.defaultProps,jt)Et[gt]===void 0&&(Et[gt]=jt[gt]);return Ee(Me,Zt,void 0,void 0,null,Et)},Tr.createRef=function(){return{current:null}},Tr.forwardRef=function(Me){return{$$typeof:c,render:Me}},Tr.isValidElement=ht,Tr.lazy=function(Me){return{$$typeof:T,_payload:{_status:-1,_result:Me},_init:ct}},Tr.memo=function(Me,et){return{$$typeof:M,type:Me,compare:et===void 0?null:et}},Tr.startTransition=function(Me){var et=ve.T,st={};ve.T=st;try{var gt=Me(),Et=ve.S;Et!==null&&Et(st,gt),typeof gt=="object"&&gt!==null&&typeof gt.then=="function"&&gt.then(Ct,nt)}catch(Zt){nt(Zt)}finally{ve.T=et}},Tr.unstable_useCacheRefresh=function(){return ve.H.useCacheRefresh()},Tr.use=function(Me){return ve.H.use(Me)},Tr.useActionState=function(Me,et,st){return ve.H.useActionState(Me,et,st)},Tr.useCallback=function(Me,et){return ve.H.useCallback(Me,et)},Tr.useContext=function(Me){return ve.H.useContext(Me)},Tr.useDebugValue=function(){},Tr.useDeferredValue=function(Me,et){return ve.H.useDeferredValue(Me,et)},Tr.useEffect=function(Me,et,st){var gt=ve.H;if(typeof st=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return gt.useEffect(Me,et)},Tr.useId=function(){return ve.H.useId()},Tr.useImperativeHandle=function(Me,et,st){return ve.H.useImperativeHandle(Me,et,st)},Tr.useInsertionEffect=function(Me,et){return ve.H.useInsertionEffect(Me,et)},Tr.useLayoutEffect=function(Me,et){return ve.H.useLayoutEffect(Me,et)},Tr.useMemo=function(Me,et){return ve.H.useMemo(Me,et)},Tr.useOptimistic=function(Me,et){return ve.H.useOptimistic(Me,et)},Tr.useReducer=function(Me,et,st){return ve.H.useReducer(Me,et,st)},Tr.useRef=function(Me){return ve.H.useRef(Me)},Tr.useState=function(Me){return ve.H.useState(Me)},Tr.useSyncExternalStore=function(Me,et,st){return ve.H.useSyncExternalStore(Me,et,st)},Tr.useTransition=function(){return ve.H.useTransition()},Tr.version="19.1.1",Tr}var uS;function Kp(){return uS||(uS=1,P1.exports=y4()),P1.exports}var Y=Kp();const Ra=iu(Y),dx=d4({__proto__:null,default:Ra},[Y]);var A1={exports:{}},vy={},C1={exports:{}},D1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cS;function g4(){return cS||(cS=1,(function(e){function r(Be,ct){var nt=Be.length;Be.push(ct);e:for(;0<nt;){var Ct=nt-1>>>1,Me=Be[Ct];if(0<p(Me,ct))Be[Ct]=ct,Be[nt]=Me,nt=Ct;else break e}}function a(Be){return Be.length===0?null:Be[0]}function i(Be){if(Be.length===0)return null;var ct=Be[0],nt=Be.pop();if(nt!==ct){Be[0]=nt;e:for(var Ct=0,Me=Be.length,et=Me>>>1;Ct<et;){var st=2*(Ct+1)-1,gt=Be[st],Et=st+1,Zt=Be[Et];if(0>p(gt,nt))Et<Me&&0>p(Zt,gt)?(Be[Ct]=Zt,Be[Et]=nt,Ct=Et):(Be[Ct]=gt,Be[st]=nt,Ct=st);else if(Et<Me&&0>p(Zt,nt))Be[Ct]=Zt,Be[Et]=nt,Ct=Et;else break e}}return ct}function p(Be,ct){var nt=Be.sortIndex-ct.sortIndex;return nt!==0?nt:Be.id-ct.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var y=performance;e.unstable_now=function(){return y.now()}}else{var g=Date,c=g.now();e.unstable_now=function(){return g.now()-c}}var C=[],M=[],T=1,U=null,z=3,F=!1,V=!1,$=!1,G=!1,Q=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;function _e(Be){for(var ct=a(M);ct!==null;){if(ct.callback===null)i(M);else if(ct.startTime<=Be)i(M),ct.sortIndex=ct.expirationTime,r(C,ct);else break;ct=a(M)}}function ve(Be){if($=!1,_e(Be),!V)if(a(C)!==null)V=!0,Ae||(Ae=!0,ft());else{var ct=a(M);ct!==null&&Ut(ve,ct.startTime-Be)}}var Ae=!1,Ee=-1,Fe=5,ht=-1;function At(){return G?!0:!(e.unstable_now()-ht<Fe)}function ot(){if(G=!1,Ae){var Be=e.unstable_now();ht=Be;var ct=!0;try{e:{V=!1,$&&($=!1,ee(Ee),Ee=-1),F=!0;var nt=z;try{t:{for(_e(Be),U=a(C);U!==null&&!(U.expirationTime>Be&&At());){var Ct=U.callback;if(typeof Ct=="function"){U.callback=null,z=U.priorityLevel;var Me=Ct(U.expirationTime<=Be);if(Be=e.unstable_now(),typeof Me=="function"){U.callback=Me,_e(Be),ct=!0;break t}U===a(C)&&i(C),_e(Be)}else i(C);U=a(C)}if(U!==null)ct=!0;else{var et=a(M);et!==null&&Ut(ve,et.startTime-Be),ct=!1}}break e}finally{U=null,z=nt,F=!1}ct=void 0}}finally{ct?ft():Ae=!1}}}var ft;if(typeof ae=="function")ft=function(){ae(ot)};else if(typeof MessageChannel<"u"){var rt=new MessageChannel,It=rt.port2;rt.port1.onmessage=ot,ft=function(){It.postMessage(null)}}else ft=function(){Q(ot,0)};function Ut(Be,ct){Ee=Q(function(){Be(e.unstable_now())},ct)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Be){Be.callback=null},e.unstable_forceFrameRate=function(Be){0>Be||125<Be?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Fe=0<Be?Math.floor(1e3/Be):5},e.unstable_getCurrentPriorityLevel=function(){return z},e.unstable_next=function(Be){switch(z){case 1:case 2:case 3:var ct=3;break;default:ct=z}var nt=z;z=ct;try{return Be()}finally{z=nt}},e.unstable_requestPaint=function(){G=!0},e.unstable_runWithPriority=function(Be,ct){switch(Be){case 1:case 2:case 3:case 4:case 5:break;default:Be=3}var nt=z;z=Be;try{return ct()}finally{z=nt}},e.unstable_scheduleCallback=function(Be,ct,nt){var Ct=e.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?Ct+nt:Ct):nt=Ct,Be){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=nt+Me,Be={id:T++,callback:ct,priorityLevel:Be,startTime:nt,expirationTime:Me,sortIndex:-1},nt>Ct?(Be.sortIndex=nt,r(M,Be),a(C)===null&&Be===a(M)&&($?(ee(Ee),Ee=-1):$=!0,Ut(ve,nt-Ct))):(Be.sortIndex=Me,r(C,Be),V||F||(V=!0,Ae||(Ae=!0,ft()))),Be},e.unstable_shouldYield=At,e.unstable_wrapCallback=function(Be){var ct=z;return function(){var nt=z;z=ct;try{return Be.apply(this,arguments)}finally{z=nt}}}})(D1)),D1}var hS;function v4(){return hS||(hS=1,C1.exports=g4()),C1.exports}var M1={exports:{}},eo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fS;function _4(){if(fS)return eo;fS=1;var e=Kp();function r(C){var M="https://react.dev/errors/"+C;if(1<arguments.length){M+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)M+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+C+"; visit "+M+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var i={d:{f:a,r:function(){throw Error(r(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},p=Symbol.for("react.portal");function y(C,M,T){var U=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:U==null?null:""+U,children:C,containerInfo:M,implementation:T}}var g=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(C,M){if(C==="font")return"";if(typeof M=="string")return M==="use-credentials"?M:""}return eo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,eo.createPortal=function(C,M){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!M||M.nodeType!==1&&M.nodeType!==9&&M.nodeType!==11)throw Error(r(299));return y(C,M,null,T)},eo.flushSync=function(C){var M=g.T,T=i.p;try{if(g.T=null,i.p=2,C)return C()}finally{g.T=M,i.p=T,i.d.f()}},eo.preconnect=function(C,M){typeof C=="string"&&(M?(M=M.crossOrigin,M=typeof M=="string"?M==="use-credentials"?M:"":void 0):M=null,i.d.C(C,M))},eo.prefetchDNS=function(C){typeof C=="string"&&i.d.D(C)},eo.preinit=function(C,M){if(typeof C=="string"&&M&&typeof M.as=="string"){var T=M.as,U=c(T,M.crossOrigin),z=typeof M.integrity=="string"?M.integrity:void 0,F=typeof M.fetchPriority=="string"?M.fetchPriority:void 0;T==="style"?i.d.S(C,typeof M.precedence=="string"?M.precedence:void 0,{crossOrigin:U,integrity:z,fetchPriority:F}):T==="script"&&i.d.X(C,{crossOrigin:U,integrity:z,fetchPriority:F,nonce:typeof M.nonce=="string"?M.nonce:void 0})}},eo.preinitModule=function(C,M){if(typeof C=="string")if(typeof M=="object"&&M!==null){if(M.as==null||M.as==="script"){var T=c(M.as,M.crossOrigin);i.d.M(C,{crossOrigin:T,integrity:typeof M.integrity=="string"?M.integrity:void 0,nonce:typeof M.nonce=="string"?M.nonce:void 0})}}else M==null&&i.d.M(C)},eo.preload=function(C,M){if(typeof C=="string"&&typeof M=="object"&&M!==null&&typeof M.as=="string"){var T=M.as,U=c(T,M.crossOrigin);i.d.L(C,T,{crossOrigin:U,integrity:typeof M.integrity=="string"?M.integrity:void 0,nonce:typeof M.nonce=="string"?M.nonce:void 0,type:typeof M.type=="string"?M.type:void 0,fetchPriority:typeof M.fetchPriority=="string"?M.fetchPriority:void 0,referrerPolicy:typeof M.referrerPolicy=="string"?M.referrerPolicy:void 0,imageSrcSet:typeof M.imageSrcSet=="string"?M.imageSrcSet:void 0,imageSizes:typeof M.imageSizes=="string"?M.imageSizes:void 0,media:typeof M.media=="string"?M.media:void 0})}},eo.preloadModule=function(C,M){if(typeof C=="string")if(M){var T=c(M.as,M.crossOrigin);i.d.m(C,{as:typeof M.as=="string"&&M.as!=="script"?M.as:void 0,crossOrigin:T,integrity:typeof M.integrity=="string"?M.integrity:void 0})}else i.d.m(C)},eo.requestFormReset=function(C){i.d.r(C)},eo.unstable_batchedUpdates=function(C,M){return C(M)},eo.useFormState=function(C,M,T){return g.H.useFormState(C,M,T)},eo.useFormStatus=function(){return g.H.useHostTransitionStatus()},eo.version="19.1.1",eo}var dS;function TC(){if(dS)return M1.exports;dS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),M1.exports=_4(),M1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pS;function b4(){if(pS)return vy;pS=1;var e=v4(),r=Kp(),a=TC();function i(o){var h="https://react.dev/errors/"+o;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+o+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function p(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function y(o){var h=o,m=o;if(o.alternate)for(;h.return;)h=h.return;else{o=h;do h=o,(h.flags&4098)!==0&&(m=h.return),o=h.return;while(o)}return h.tag===3?m:null}function g(o){if(o.tag===13){var h=o.memoizedState;if(h===null&&(o=o.alternate,o!==null&&(h=o.memoizedState)),h!==null)return h.dehydrated}return null}function c(o){if(y(o)!==o)throw Error(i(188))}function C(o){var h=o.alternate;if(!h){if(h=y(o),h===null)throw Error(i(188));return h!==o?null:o}for(var m=o,x=h;;){var E=m.return;if(E===null)break;var L=E.alternate;if(L===null){if(x=E.return,x!==null){m=x;continue}break}if(E.child===L.child){for(L=E.child;L;){if(L===m)return c(E),o;if(L===x)return c(E),h;L=L.sibling}throw Error(i(188))}if(m.return!==x.return)m=E,x=L;else{for(var X=!1,se=E.child;se;){if(se===m){X=!0,m=E,x=L;break}if(se===x){X=!0,x=E,m=L;break}se=se.sibling}if(!X){for(se=L.child;se;){if(se===m){X=!0,m=L,x=E;break}if(se===x){X=!0,x=L,m=E;break}se=se.sibling}if(!X)throw Error(i(189))}}if(m.alternate!==x)throw Error(i(190))}if(m.tag!==3)throw Error(i(188));return m.stateNode.current===m?o:h}function M(o){var h=o.tag;if(h===5||h===26||h===27||h===6)return o;for(o=o.child;o!==null;){if(h=M(o),h!==null)return h;o=o.sibling}return null}var T=Object.assign,U=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),ee=Symbol.for("react.consumer"),ae=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),ve=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),Ee=Symbol.for("react.memo"),Fe=Symbol.for("react.lazy"),ht=Symbol.for("react.activity"),At=Symbol.for("react.memo_cache_sentinel"),ot=Symbol.iterator;function ft(o){return o===null||typeof o!="object"?null:(o=ot&&o[ot]||o["@@iterator"],typeof o=="function"?o:null)}var rt=Symbol.for("react.client.reference");function It(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===rt?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case V:return"Fragment";case G:return"Profiler";case $:return"StrictMode";case ve:return"Suspense";case Ae:return"SuspenseList";case ht:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case F:return"Portal";case ae:return(o.displayName||"Context")+".Provider";case ee:return(o._context.displayName||"Context")+".Consumer";case _e:var h=o.render;return o=o.displayName,o||(o=h.displayName||h.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Ee:return h=o.displayName||null,h!==null?h:It(o.type)||"Memo";case Fe:h=o._payload,o=o._init;try{return It(o(h))}catch{}}return null}var Ut=Array.isArray,Be=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt={pending:!1,data:null,method:null,action:null},Ct=[],Me=-1;function et(o){return{current:o}}function st(o){0>Me||(o.current=Ct[Me],Ct[Me]=null,Me--)}function gt(o,h){Me++,Ct[Me]=o.current,o.current=h}var Et=et(null),Zt=et(null),jt=et(null),ar=et(null);function Jt(o,h){switch(gt(jt,h),gt(Zt,o),gt(Et,null),h.nodeType){case 9:case 11:o=(o=h.documentElement)&&(o=o.namespaceURI)?Zc(o):0;break;default:if(o=h.tagName,h=h.namespaceURI)h=Zc(h),o=Jh(h,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}st(Et),gt(Et,o)}function wt(){st(Et),st(Zt),st(jt)}function Gt(o){o.memoizedState!==null&&gt(ar,o);var h=Et.current,m=Jh(h,o.type);h!==m&&(gt(Zt,o),gt(Et,m))}function zt(o){Zt.current===o&&(st(Et),st(Zt)),ar.current===o&&(st(ar),q._currentValue=nt)}var $e=Object.prototype.hasOwnProperty,$t=e.unstable_scheduleCallback,Ot=e.unstable_cancelCallback,Sr=e.unstable_shouldYield,Rr=e.unstable_requestPaint,Lr=e.unstable_now,Nn=e.unstable_getCurrentPriorityLevel,Qn=e.unstable_ImmediatePriority,Va=e.unstable_UserBlockingPriority,ba=e.unstable_NormalPriority,Gi=e.unstable_LowPriority,Mi=e.unstable_IdlePriority,Do=e.log,no=e.unstable_setDisableYieldValue,fi=null,An=null;function Ga(o){if(typeof Do=="function"&&no(o),An&&typeof An.setStrictMode=="function")try{An.setStrictMode(fi,o)}catch{}}var Re=Math.clz32?Math.clz32:le,re=Math.log,ne=Math.LN2;function le(o){return o>>>=0,o===0?32:31-(re(o)/ne|0)|0}var be=256,Pe=4194304;function Ie(o){var h=o&42;if(h!==0)return h;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Ve(o,h,m){var x=o.pendingLanes;if(x===0)return 0;var E=0,L=o.suspendedLanes,X=o.pingedLanes;o=o.warmLanes;var se=x&134217727;return se!==0?(x=se&~L,x!==0?E=Ie(x):(X&=se,X!==0?E=Ie(X):m||(m=se&~o,m!==0&&(E=Ie(m))))):(se=x&~L,se!==0?E=Ie(se):X!==0?E=Ie(X):m||(m=x&~o,m!==0&&(E=Ie(m)))),E===0?0:h!==0&&h!==E&&(h&L)===0&&(L=E&-E,m=h&-h,L>=m||L===32&&(m&4194048)!==0)?h:E}function Ue(o,h){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&h)===0}function Je(o,h){switch(o){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yt(){var o=be;return be<<=1,(be&4194048)===0&&(be=256),o}function it(){var o=Pe;return Pe<<=1,(Pe&62914560)===0&&(Pe=4194304),o}function kt(o){for(var h=[],m=0;31>m;m++)h.push(o);return h}function Oe(o,h){o.pendingLanes|=h,h!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function ir(o,h,m,x,E,L){var X=o.pendingLanes;o.pendingLanes=m,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=m,o.entangledLanes&=m,o.errorRecoveryDisabledLanes&=m,o.shellSuspendCounter=0;var se=o.entanglements,Ce=o.expirationTimes,We=o.hiddenUpdates;for(m=X&~m;0<m;){var ut=31-Re(m),mt=1<<ut;se[ut]=0,Ce[ut]=-1;var Qe=We[ut];if(Qe!==null)for(We[ut]=null,ut=0;ut<Qe.length;ut++){var Ke=Qe[ut];Ke!==null&&(Ke.lane&=-536870913)}m&=~mt}x!==0&&br(o,x,0),L!==0&&E===0&&o.tag!==0&&(o.suspendedLanes|=L&~(X&~h))}function br(o,h,m){o.pendingLanes|=h,o.suspendedLanes&=~h;var x=31-Re(h);o.entangledLanes|=h,o.entanglements[x]=o.entanglements[x]|1073741824|m&4194090}function qt(o,h){var m=o.entangledLanes|=h;for(o=o.entanglements;m;){var x=31-Re(m),E=1<<x;E&h|o[x]&h&&(o[x]|=h),m&=~E}}function or(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Br(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Xn(){var o=ct.p;return o!==0?o:(o=window.event,o===void 0?32:Mt(o.type))}function ra(o,h){var m=ct.p;try{return ct.p=o,h()}finally{ct.p=m}}var Qr=Math.random().toString(36).slice(2),tr="__reactFiber$"+Qr,sr="__reactProps$"+Qr,pn="__reactContainer$"+Qr,vt="__reactEvents$"+Qr,Ia="__reactListeners$"+Qr,Cn="__reactHandles$"+Qr,Xo="__reactResources$"+Qr,Mo="__reactMarker$"+Qr;function Tt(o){delete o[tr],delete o[sr],delete o[vt],delete o[Ia],delete o[Cn]}function mr(o){var h=o[tr];if(h)return h;for(var m=o.parentNode;m;){if(h=m[pn]||m[tr]){if(m=h.alternate,h.child!==null||m!==null&&m.child!==null)for(o=dy(o);o!==null;){if(m=o[tr])return m;o=dy(o)}return h}o=m,m=o.parentNode}return null}function cr(o){if(o=o[tr]||o[pn]){var h=o.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return o}return null}function jn(o){var h=o.tag;if(h===5||h===26||h===27||h===6)return o.stateNode;throw Error(i(33))}function Wi(o){var h=o[Xo];return h||(h=o[Xo]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function mn(o){o[Mo]=!0}var yr=new Set,oc={};function di(o,h){Ko(o,h),Ko(o+"Capture",h)}function Ko(o,h){for(oc[o]=h,o=0;o<h.length;o++)yr.add(h[o])}var To=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cl={},Dn={};function ph(o){return $e.call(Dn,o)?!0:$e.call(cl,o)?!1:To.test(o)?Dn[o]=!0:(cl[o]=!0,!1)}function xa(o,h,m){if(ph(h))if(m===null)o.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":o.removeAttribute(h);return;case"boolean":var x=h.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){o.removeAttribute(h);return}}o.setAttribute(h,""+m)}}function qr(o,h,m){if(m===null)o.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttribute(h,""+m)}}function Eo(o,h,m,x){if(x===null)o.removeAttribute(m);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(m);return}o.setAttributeNS(h,m,""+x)}}var hl,mh;function Ti(o){if(hl===void 0)try{throw Error()}catch(m){var h=m.stack.trim().match(/\n( *(at )?)/);hl=h&&h[1]||"",mh=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hl+o+mh}var Ro=!1;function sc(o,h){if(!o||Ro)return"";Ro=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(h){var mt=function(){throw Error()};if(Object.defineProperty(mt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(mt,[])}catch(Ke){var Qe=Ke}Reflect.construct(o,[],mt)}else{try{mt.call()}catch(Ke){Qe=Ke}o.call(mt.prototype)}}else{try{throw Error()}catch(Ke){Qe=Ke}(mt=o())&&typeof mt.catch=="function"&&mt.catch(function(){})}}catch(Ke){if(Ke&&Qe&&typeof Ke.stack=="string")return[Ke.stack,Qe.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var L=x.DetermineComponentFrameRoot(),X=L[0],se=L[1];if(X&&se){var Ce=X.split(`
`),We=se.split(`
`);for(E=x=0;x<Ce.length&&!Ce[x].includes("DetermineComponentFrameRoot");)x++;for(;E<We.length&&!We[E].includes("DetermineComponentFrameRoot");)E++;if(x===Ce.length||E===We.length)for(x=Ce.length-1,E=We.length-1;1<=x&&0<=E&&Ce[x]!==We[E];)E--;for(;1<=x&&0<=E;x--,E--)if(Ce[x]!==We[E]){if(x!==1||E!==1)do if(x--,E--,0>E||Ce[x]!==We[E]){var ut=`
`+Ce[x].replace(" at new "," at ");return o.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",o.displayName)),ut}while(1<=x&&0<=E);break}}}finally{Ro=!1,Error.prepareStackTrace=m}return(m=o?o.displayName||o.name:"")?Ti(m):""}function Hd(o){switch(o.tag){case 26:case 27:case 5:return Ti(o.type);case 16:return Ti("Lazy");case 13:return Ti("Suspense");case 19:return Ti("SuspenseList");case 0:case 15:return sc(o.type,!1);case 11:return sc(o.type.render,!1);case 1:return sc(o.type,!0);case 31:return Ti("Activity");default:return""}}function gf(o){try{var h="";do h+=Hd(o),o=o.return;while(o);return h}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function Sa(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function vf(o){var h=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function cm(o){var h=vf(o)?"checked":"value",m=Object.getOwnPropertyDescriptor(o.constructor.prototype,h),x=""+o[h];if(!o.hasOwnProperty(h)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var E=m.get,L=m.set;return Object.defineProperty(o,h,{configurable:!0,get:function(){return E.call(this)},set:function(X){x=""+X,L.call(this,X)}}),Object.defineProperty(o,h,{enumerable:m.enumerable}),{getValue:function(){return x},setValue:function(X){x=""+X},stopTracking:function(){o._valueTracker=null,delete o[h]}}}}function yh(o){o._valueTracker||(o._valueTracker=cm(o))}function $d(o){if(!o)return!1;var h=o._valueTracker;if(!h)return!0;var m=h.getValue(),x="";return o&&(x=vf(o)?o.checked?"true":"false":o.value),o=x,o!==m?(h.setValue(o),!0):!1}function hu(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var fu=/[\n"\\]/g;function pi(o){return o.replace(fu,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function lc(o,h,m,x,E,L,X,se){o.name="",X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?o.type=X:o.removeAttribute("type"),h!=null?X==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+Sa(h)):o.value!==""+Sa(h)&&(o.value=""+Sa(h)):X!=="submit"&&X!=="reset"||o.removeAttribute("value"),h!=null?uc(o,X,Sa(h)):m!=null?uc(o,X,Sa(m)):x!=null&&o.removeAttribute("value"),E==null&&L!=null&&(o.defaultChecked=!!L),E!=null&&(o.checked=E&&typeof E!="function"&&typeof E!="symbol"),se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"?o.name=""+Sa(se):o.removeAttribute("name")}function fl(o,h,m,x,E,L,X,se){if(L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(o.type=L),h!=null||m!=null){if(!(L!=="submit"&&L!=="reset"||h!=null))return;m=m!=null?""+Sa(m):"",h=h!=null?""+Sa(h):m,se||h===o.value||(o.value=h),o.defaultValue=h}x=x??E,x=typeof x!="function"&&typeof x!="symbol"&&!!x,o.checked=se?o.checked:!!x,o.defaultChecked=!!x,X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"&&(o.name=X)}function uc(o,h,m){h==="number"&&hu(o.ownerDocument)===o||o.defaultValue===""+m||(o.defaultValue=""+m)}function Is(o,h,m,x){if(o=o.options,h){h={};for(var E=0;E<m.length;E++)h["$"+m[E]]=!0;for(m=0;m<o.length;m++)E=h.hasOwnProperty("$"+o[m].value),o[m].selected!==E&&(o[m].selected=E),E&&x&&(o[m].defaultSelected=!0)}else{for(m=""+Sa(m),h=null,E=0;E<o.length;E++){if(o[E].value===m){o[E].selected=!0,x&&(o[E].defaultSelected=!0);return}h!==null||o[E].disabled||(h=o[E])}h!==null&&(h.selected=!0)}}function Vd(o,h,m){if(h!=null&&(h=""+Sa(h),h!==o.value&&(o.value=h),m==null)){o.defaultValue!==h&&(o.defaultValue=h);return}o.defaultValue=m!=null?""+Sa(m):""}function dl(o,h,m,x){if(h==null){if(x!=null){if(m!=null)throw Error(i(92));if(Ut(x)){if(1<x.length)throw Error(i(93));x=x[0]}m=x}m==null&&(m=""),h=m}m=Sa(h),o.defaultValue=m,x=o.textContent,x===m&&x!==""&&x!==null&&(o.value=x)}function Io(o,h){if(h){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=h;return}}o.textContent=h}var ao=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xr(o,h,m){var x=h.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?x?o.setProperty(h,""):h==="float"?o.cssFloat="":o[h]="":x?o.setProperty(h,m):typeof m!="number"||m===0||ao.has(h)?h==="float"?o.cssFloat=m:o[h]=(""+m).trim():o[h]=m+"px"}function ks(o,h,m){if(h!=null&&typeof h!="object")throw Error(i(62));if(o=o.style,m!=null){for(var x in m)!m.hasOwnProperty(x)||h!=null&&h.hasOwnProperty(x)||(x.indexOf("--")===0?o.setProperty(x,""):x==="float"?o.cssFloat="":o[x]="");for(var E in h)x=h[E],h.hasOwnProperty(E)&&m[E]!==x&&xr(o,E,x)}else for(var L in h)h.hasOwnProperty(L)&&xr(o,L,h[L])}function ko(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _r(o){return pl.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var es=null;function du(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var ts=null,Kn=null;function na(o){var h=cr(o);if(h&&(o=h.stateNode)){var m=o[sr]||null;e:switch(o=h.stateNode,h.type){case"input":if(lc(o,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),h=m.name,m.type==="radio"&&h!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+pi(""+h)+'"][type="radio"]'),h=0;h<m.length;h++){var x=m[h];if(x!==o&&x.form===o.form){var E=x[sr]||null;if(!E)throw Error(i(90));lc(x,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(h=0;h<m.length;h++)x=m[h],x.form===o.form&&$d(x)}break e;case"textarea":Vd(o,m.value,m.defaultValue);break e;case"select":h=m.value,h!=null&&Is(o,!!m.multiple,h,!1)}}}var wa=!1;function Bn(o,h,m){if(wa)return o(h,m);wa=!0;try{var x=o(h);return x}finally{if(wa=!1,(ts!==null||Kn!==null)&&(od(),ts&&(h=ts,o=Kn,Kn=ts=null,na(h),o)))for(h=0;h<o.length;h++)na(o[h])}}function Nr(o,h){var m=o.stateNode;if(m===null)return null;var x=m[sr]||null;if(x===null)return null;m=x[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(o=o.type,x=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!x;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(i(231,h,typeof m));return m}var Uo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pa=!1;if(Uo)try{var Aa={};Object.defineProperty(Aa,"passive",{get:function(){Pa=!0}}),window.addEventListener("test",Aa,Aa),window.removeEventListener("test",Aa,Aa)}catch{Pa=!1}var Mn=null,Xr=null,Oo=null;function er(){if(Oo)return Oo;var o,h=Xr,m=h.length,x,E="value"in Mn?Mn.value:Mn.textContent,L=E.length;for(o=0;o<m&&h[o]===E[o];o++);var X=m-o;for(x=1;x<=X&&h[m-x]===E[L-x];x++);return Oo=E.slice(o,1<x?1-x:void 0)}function lr(o){var h=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&h===13&&(o=13)):o=h,o===10&&(o=13),32<=o||o===13?o:0}function Zi(){return!0}function Dr(){return!1}function un(o){function h(m,x,E,L,X){this._reactName=m,this._targetInst=E,this.type=x,this.nativeEvent=L,this.target=X,this.currentTarget=null;for(var se in o)o.hasOwnProperty(se)&&(m=o[se],this[se]=m?m(L):L[se]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?Zi:Dr,this.isPropagationStopped=Dr,this}return T(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Zi)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Zi)},persist:function(){},isPersistent:Zi}),h}var ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ei=un(ka),Us=T({},ka,{view:0,detail:0}),_f=un(Us),Os,ml,Ls,yl=T({},Us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_l,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ls&&(Ls&&o.type==="mousemove"?(Os=o.screenX-Ls.screenX,ml=o.screenY-Ls.screenY):ml=Os=0,Ls=o),Os)},movementY:function(o){return"movementY"in o?o.movementY:ml}}),cc=un(yl),io=T({},yl,{dataTransfer:0}),fa=un(io),pu=T({},Us,{relatedTarget:0}),gl=un(pu),vl=T({},ka,{animationName:0,elapsedTime:0,pseudoElement:0}),kn=un(vl),Gd=T({},ka,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),hc=un(Gd),bf=T({},ka,{data:0}),Wd=un(bf),mu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ca={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lo(o){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(o):(o=fc[o])?!!h[o]:!1}function _l(){return Lo}var dc=T({},Us,{key:function(o){if(o.key){var h=mu[o.key]||o.key;if(h!=="Unidentified")return h}return o.type==="keypress"?(o=lr(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Ca[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_l,charCode:function(o){return o.type==="keypress"?lr(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?lr(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),pc=un(dc),Ua=T({},yl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xf=un(Ua),gh=T({},Us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_l}),hm=un(gh),Sf=T({},ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),fm=un(Sf),dm=T({},yl,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),vh=un(dm),wf=T({},ka,{newState:0,oldState:0}),bl=un(wf),Pf=[9,13,27,32],yu=Uo&&"CompositionEvent"in window,Wa=null;Uo&&"documentMode"in document&&(Wa=document.documentMode);var pm=Uo&&"TextEvent"in window&&!Wa,mc=Uo&&(!yu||Wa&&8<Wa&&11>=Wa),gu=" ",vu=!1;function Zd(o,h){switch(o){case"keyup":return Pf.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yc(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var _u=!1;function xl(o,h){switch(o){case"compositionend":return yc(h);case"keypress":return h.which!==32?null:(vu=!0,gu);case"textInput":return o=h.data,o===gu&&vu?null:o;default:return null}}function Yd(o,h){if(_u)return o==="compositionend"||!yu&&Zd(o,h)?(o=er(),Oo=Xr=Mn=null,_u=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return mc&&h.locale!=="ko"?null:h.data;default:return null}}var Af={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qd(o){var h=o&&o.nodeName&&o.nodeName.toLowerCase();return h==="input"?!!Af[o.type]:h==="textarea"}function Cf(o,h,m,x){ts?Kn?Kn.push(x):Kn=[x]:ts=x,h=xp(h,"onChange"),0<h.length&&(m=new Ei("onChange","change",null,m,x),o.push({event:m,listeners:h}))}var Sl=null,bu=null;function _h(o){ay(o,0)}function gc(o){var h=jn(o);if($d(h))return o}function Df(o,h){if(o==="change")return h}var zs=!1;if(Uo){var vc;if(Uo){var _c="oninput"in document;if(!_c){var xu=document.createElement("div");xu.setAttribute("oninput","return;"),_c=typeof xu.oninput=="function"}vc=_c}else vc=!1;zs=vc&&(!document.documentMode||9<document.documentMode)}function Xd(){Sl&&(Sl.detachEvent("onpropertychange",Su),bu=Sl=null)}function Su(o){if(o.propertyName==="value"&&gc(bu)){var h=[];Cf(h,bu,o,du(o)),Bn(_h,h)}}function Kd(o,h,m){o==="focusin"?(Xd(),Sl=h,bu=m,Sl.attachEvent("onpropertychange",Su)):o==="focusout"&&Xd()}function mm(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return gc(bu)}function Jd(o,h){if(o==="click")return gc(h)}function ep(o,h){if(o==="input"||o==="change")return gc(h)}function Mf(o,h){return o===h&&(o!==0||1/o===1/h)||o!==o&&h!==h}var Za=typeof Object.is=="function"?Object.is:Mf;function wu(o,h){if(Za(o,h))return!0;if(typeof o!="object"||o===null||typeof h!="object"||h===null)return!1;var m=Object.keys(o),x=Object.keys(h);if(m.length!==x.length)return!1;for(x=0;x<m.length;x++){var E=m[x];if(!$e.call(h,E)||!Za(o[E],h[E]))return!1}return!0}function bc(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function zo(o,h){var m=bc(o);o=0;for(var x;m;){if(m.nodeType===3){if(x=o+m.textContent.length,o<=h&&x>=h)return{node:m,offset:h-o};o=x}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=bc(m)}}function Ir(o,h){return o&&h?o===h?!0:o&&o.nodeType===3?!1:h&&h.nodeType===3?Ir(o,h.parentNode):"contains"in o?o.contains(h):o.compareDocumentPosition?!!(o.compareDocumentPosition(h)&16):!1:!1}function bh(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var h=hu(o.document);h instanceof o.HTMLIFrameElement;){try{var m=typeof h.contentWindow.location.href=="string"}catch{m=!1}if(m)o=h.contentWindow;else break;h=hu(o.document)}return h}function xc(o){var h=o&&o.nodeName&&o.nodeName.toLowerCase();return h&&(h==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||h==="textarea"||o.contentEditable==="true")}var tp=Uo&&"documentMode"in document&&11>=document.documentMode,Fs=null,rs=null,wl=null,Tf=!1;function rp(o,h,m){var x=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Tf||Fs==null||Fs!==hu(x)||(x=Fs,"selectionStart"in x&&xc(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),wl&&wu(wl,x)||(wl=x,x=xp(rs,"onSelect"),0<x.length&&(h=new Ei("onSelect","select",null,h,m),o.push({event:h,listeners:x}),h.target=Fs)))}function Pl(o,h){var m={};return m[o.toLowerCase()]=h.toLowerCase(),m["Webkit"+o]="webkit"+h,m["Moz"+o]="moz"+h,m}var Pu={animationend:Pl("Animation","AnimationEnd"),animationiteration:Pl("Animation","AnimationIteration"),animationstart:Pl("Animation","AnimationStart"),transitionrun:Pl("Transition","TransitionRun"),transitionstart:Pl("Transition","TransitionStart"),transitioncancel:Pl("Transition","TransitionCancel"),transitionend:Pl("Transition","TransitionEnd")},xh={},np={};Uo&&(np=document.createElement("div").style,"AnimationEvent"in window||(delete Pu.animationend.animation,delete Pu.animationiteration.animation,delete Pu.animationstart.animation),"TransitionEvent"in window||delete Pu.transitionend.transition);function Ns(o){if(xh[o])return xh[o];if(!Pu[o])return o;var h=Pu[o],m;for(m in h)if(h.hasOwnProperty(m)&&m in np)return xh[o]=h[m];return o}var Sc=Ns("animationend"),wc=Ns("animationiteration"),Pc=Ns("animationstart"),Ef=Ns("transitionrun"),Al=Ns("transitionstart"),Ac=Ns("transitioncancel"),Cl=Ns("transitionend"),Ri=new Map,Sh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sh.push("scrollEnd");function Yi(o,h){Ri.set(o,h),di(h,[o])}var wh=new WeakMap;function da(o,h){if(typeof o=="object"&&o!==null){var m=wh.get(o);return m!==void 0?m:(h={value:o,source:h,stack:gf(h)},wh.set(o,h),h)}return{value:o,source:h,stack:gf(h)}}var Ya=[],ns=0,Dl=0;function Ml(){for(var o=ns,h=Dl=ns=0;h<o;){var m=Ya[h];Ya[h++]=null;var x=Ya[h];Ya[h++]=null;var E=Ya[h];Ya[h++]=null;var L=Ya[h];if(Ya[h++]=null,x!==null&&E!==null){var X=x.pending;X===null?E.next=E:(E.next=X.next,X.next=E),x.pending=E}L!==0&&Rf(m,E,L)}}function Cc(o,h,m,x){Ya[ns++]=o,Ya[ns++]=h,Ya[ns++]=m,Ya[ns++]=x,Dl|=x,o.lanes|=x,o=o.alternate,o!==null&&(o.lanes|=x)}function js(o,h,m,x){return Cc(o,h,m,x),Au(o)}function Ii(o,h){return Cc(o,null,null,h),Au(o)}function Rf(o,h,m){o.lanes|=m;var x=o.alternate;x!==null&&(x.lanes|=m);for(var E=!1,L=o.return;L!==null;)L.childLanes|=m,x=L.alternate,x!==null&&(x.childLanes|=m),L.tag===22&&(o=L.stateNode,o===null||o._visibility&1||(E=!0)),o=L,L=L.return;return o.tag===3?(L=o.stateNode,E&&h!==null&&(E=31-Re(m),o=L.hiddenUpdates,x=o[E],x===null?o[E]=[h]:x.push(h),h.lane=m|536870912),L):null}function Au(o){if(50<id)throw id=0,jm=null,Error(i(185));for(var h=o.return;h!==null;)o=h,h=o.return;return o.tag===3?o.stateNode:null}var gr={};function Dc(o,h,m,x){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ki(o,h,m,x){return new Dc(o,h,m,x)}function Ph(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Oa(o,h){var m=o.alternate;return m===null?(m=ki(o.tag,h,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=h,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&65011712,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,h=o.dependencies,m.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m.refCleanup=o.refCleanup,m}function If(o,h){o.flags&=65011714;var m=o.alternate;return m===null?(o.childLanes=0,o.lanes=h,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=m.childLanes,o.lanes=m.lanes,o.child=m.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=m.memoizedProps,o.memoizedState=m.memoizedState,o.updateQueue=m.updateQueue,o.type=m.type,h=m.dependencies,o.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),o}function Ah(o,h,m,x,E,L){var X=0;if(x=o,typeof o=="function")Ph(o)&&(X=1);else if(typeof o=="string")X=n(o,m,Et.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case ht:return o=ki(31,m,h,E),o.elementType=ht,o.lanes=L,o;case V:return Bs(m.children,E,L,h);case $:X=8,E|=24;break;case G:return o=ki(12,m,h,E|2),o.elementType=G,o.lanes=L,o;case ve:return o=ki(13,m,h,E),o.elementType=ve,o.lanes=L,o;case Ae:return o=ki(19,m,h,E),o.elementType=Ae,o.lanes=L,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Q:case ae:X=10;break e;case ee:X=9;break e;case _e:X=11;break e;case Ee:X=14;break e;case Fe:X=16,x=null;break e}X=29,m=Error(i(130,o===null?"null":typeof o,"")),x=null}return h=ki(X,m,h,E),h.elementType=o,h.type=x,h.lanes=L,h}function Bs(o,h,m,x){return o=ki(7,o,x,h),o.lanes=m,o}function kf(o,h,m){return o=ki(6,o,null,h),o.lanes=m,o}function Mc(o,h,m){return h=ki(4,o.children!==null?o.children:[],o.key,h),h.lanes=m,h.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},h}var as=[],Fo=0,qs=null,Cu=0,Ui=[],La=0,oo=null,Oi=1,Qa="";function so(o,h){as[Fo++]=Cu,as[Fo++]=qs,qs=o,Cu=h}function Ch(o,h,m){Ui[La++]=Oi,Ui[La++]=Qa,Ui[La++]=oo,oo=o;var x=Oi;o=Qa;var E=32-Re(x)-1;x&=~(1<<E),m+=1;var L=32-Re(h)+E;if(30<L){var X=E-E%5;L=(x&(1<<X)-1).toString(32),x>>=X,E-=X,Oi=1<<32-Re(h)+E|m<<E|x,Qa=L+o}else Oi=1<<L|m<<E|x,Qa=o}function is(o){o.return!==null&&(so(o,1),Ch(o,1,0))}function Tc(o){for(;o===qs;)qs=as[--Fo],as[Fo]=null,Cu=as[--Fo],as[Fo]=null;for(;o===oo;)oo=Ui[--La],Ui[La]=null,Qa=Ui[--La],Ui[La]=null,Oi=Ui[--La],Ui[La]=null}var aa=null,yn=null,Fr=!1,Hs=null,lo=!1,Du=Error(i(519));function os(o){var h=Error(i(418,""));throw $s(da(h,o)),Du}function Uf(o){var h=o.stateNode,m=o.type,x=o.memoizedProps;switch(h[tr]=o,h[sr]=x,m){case"dialog":Ur("cancel",h),Ur("close",h);break;case"iframe":case"object":case"embed":Ur("load",h);break;case"video":case"audio":for(m=0;m<Kh.length;m++)Ur(Kh[m],h);break;case"source":Ur("error",h);break;case"img":case"image":case"link":Ur("error",h),Ur("load",h);break;case"details":Ur("toggle",h);break;case"input":Ur("invalid",h),fl(h,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0),yh(h);break;case"select":Ur("invalid",h);break;case"textarea":Ur("invalid",h),dl(h,x.value,x.defaultValue,x.children),yh(h)}m=x.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||h.textContent===""+m||x.suppressHydrationWarning===!0||uy(h.textContent,m)?(x.popover!=null&&(Ur("beforetoggle",h),Ur("toggle",h)),x.onScroll!=null&&Ur("scroll",h),x.onScrollEnd!=null&&Ur("scrollend",h),x.onClick!=null&&(h.onclick=dd),h=!0):h=!1,h||os(o)}function Dh(o){for(aa=o.return;aa;)switch(aa.tag){case 5:case 13:lo=!1;return;case 27:case 3:lo=!0;return;default:aa=aa.return}}function Gr(o){if(o!==aa)return!1;if(!Fr)return Dh(o),Fr=!0,!1;var h=o.tag,m;if((m=h!==3&&h!==27)&&((m=h===5)&&(m=o.type,m=!(m!=="form"&&m!=="button")||Yl(o.type,o.memoizedProps)),m=!m),m&&yn&&os(o),Dh(o),h===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));e:{for(o=o.nextSibling,h=0;o;){if(o.nodeType===8)if(m=o.data,m==="/$"){if(h===0){yn=Wo(o.nextSibling);break e}h--}else m!=="$"&&m!=="$!"&&m!=="$?"||h++;o=o.nextSibling}yn=null}}else h===27?(h=yn,Ql(o.type)?(o=ef,ef=null,yn=o):yn=h):yn=aa?Wo(o.stateNode.nextSibling):null;return!0}function uo(){yn=aa=null,Fr=!1}function mi(){var o=Hs;return o!==null&&(zi===null?zi=o:zi.push.apply(zi,o),Hs=null),o}function $s(o){Hs===null?Hs=[o]:Hs.push(o)}var Mu=et(null),ss=null,Xa=null;function yi(o,h,m){gt(Mu,h._currentValue),h._currentValue=m}function Li(o){o._currentValue=Mu.current,st(Mu)}function Ec(o,h,m){for(;o!==null;){var x=o.alternate;if((o.childLanes&h)!==h?(o.childLanes|=h,x!==null&&(x.childLanes|=h)):x!==null&&(x.childLanes&h)!==h&&(x.childLanes|=h),o===m)break;o=o.return}}function Mh(o,h,m,x){var E=o.child;for(E!==null&&(E.return=o);E!==null;){var L=E.dependencies;if(L!==null){var X=E.child;L=L.firstContext;e:for(;L!==null;){var se=L;L=E;for(var Ce=0;Ce<h.length;Ce++)if(se.context===h[Ce]){L.lanes|=m,se=L.alternate,se!==null&&(se.lanes|=m),Ec(L.return,m,o),x||(X=null);break e}L=se.next}}else if(E.tag===18){if(X=E.return,X===null)throw Error(i(341));X.lanes|=m,L=X.alternate,L!==null&&(L.lanes|=m),Ec(X,m,o),X=null}else X=E.child;if(X!==null)X.return=E;else for(X=E;X!==null;){if(X===o){X=null;break}if(E=X.sibling,E!==null){E.return=X.return,X=E;break}X=X.return}E=X}}function Tu(o,h,m,x){o=null;for(var E=h,L=!1;E!==null;){if(!L){if((E.flags&524288)!==0)L=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var X=E.alternate;if(X===null)throw Error(i(387));if(X=X.memoizedProps,X!==null){var se=E.type;Za(E.pendingProps.value,X.value)||(o!==null?o.push(se):o=[se])}}else if(E===ar.current){if(X=E.alternate,X===null)throw Error(i(387));X.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(o!==null?o.push(q):o=[q])}E=E.return}o!==null&&Mh(h,o,m,x),h.flags|=262144}function Rc(o){for(o=o.firstContext;o!==null;){if(!Za(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Vs(o){ss=o,Xa=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function qn(o){return Ka(ss,o)}function gi(o,h){return ss===null&&Vs(o),Ka(o,h)}function Ka(o,h){var m=h._currentValue;if(h={context:h,memoizedValue:m,next:null},Xa===null){if(o===null)throw Error(i(308));Xa=h,o.dependencies={lanes:0,firstContext:h},o.flags|=524288}else Xa=Xa.next=h;return m}var Eu=typeof AbortController<"u"?AbortController:function(){var o=[],h=this.signal={aborted:!1,addEventListener:function(m,x){o.push(x)}};this.abort=function(){h.aborted=!0,o.forEach(function(m){return m()})}},Of=e.unstable_scheduleCallback,ap=e.unstable_NormalPriority,Jn={$$typeof:ae,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gs(){return{controller:new Eu,data:new Map,refCount:0}}function Tl(o){o.refCount--,o.refCount===0&&Of(ap,function(){o.controller.abort()})}var Ws=null,Ru=0,ls=0,Da=null;function Ja(o,h){if(Ws===null){var m=Ws=[];Ru=0,ls=cd(),Da={status:"pending",value:void 0,then:function(x){m.push(x)}}}return Ru++,h.then(Lf,Lf),h}function Lf(){if(--Ru===0&&Ws!==null){Da!==null&&(Da.status="fulfilled");var o=Ws;Ws=null,ls=0,Da=null;for(var h=0;h<o.length;h++)(0,o[h])()}}function co(o,h){var m=[],x={status:"pending",value:null,reason:null,then:function(E){m.push(E)}};return o.then(function(){x.status="fulfilled",x.value=h;for(var E=0;E<m.length;E++)(0,m[E])(h)},function(E){for(x.status="rejected",x.reason=E,E=0;E<m.length;E++)(0,m[E])(void 0)}),x}var El=Be.S;Be.S=function(o,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&Ja(o,h),El!==null&&El(o,h)};var ho=et(null);function zf(){var o=ho.current;return o!==null?o:fn.pooledCache}function Th(o,h){h===null?gt(ho,ho.current):gt(ho,h.pool)}function Ic(){var o=zf();return o===null?null:{parent:Jn._currentValue,pool:o}}var Iu=Error(i(460)),Zs=Error(i(474)),ei=Error(i(542)),Rt={then:function(){}};function Eh(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Rl(){}function Rh(o,h,m){switch(m=o[m],m===void 0?o.push(h):m!==h&&(h.then(Rl,Rl),h=m),h.status){case"fulfilled":return h.value;case"rejected":throw o=h.reason,Ih(o),o;default:if(typeof h.status=="string")h.then(Rl,Rl);else{if(o=fn,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=h,o.status="pending",o.then(function(x){if(h.status==="pending"){var E=h;E.status="fulfilled",E.value=x}},function(x){if(h.status==="pending"){var E=h;E.status="rejected",E.reason=x}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw o=h.reason,Ih(o),o}throw fo=h,Iu}}var fo=null;function Il(){if(fo===null)throw Error(i(459));var o=fo;return fo=null,o}function Ih(o){if(o===Iu||o===ei)throw Error(i(483))}var fr=!1;function kc(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kh(o,h){o=o.updateQueue,h.updateQueue===o&&(h.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function No(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function us(o,h,m){var x=o.updateQueue;if(x===null)return null;if(x=x.shared,(nn&2)!==0){var E=x.pending;return E===null?h.next=h:(h.next=E.next,E.next=h),x.pending=h,h=Au(o),Rf(o,null,m),h}return Cc(o,x,h,m),Au(o)}function ku(o,h,m){if(h=h.updateQueue,h!==null&&(h=h.shared,(m&4194048)!==0)){var x=h.lanes;x&=o.pendingLanes,m|=x,h.lanes=m,qt(o,m)}}function Uh(o,h){var m=o.updateQueue,x=o.alternate;if(x!==null&&(x=x.updateQueue,m===x)){var E=null,L=null;if(m=m.firstBaseUpdate,m!==null){do{var X={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};L===null?E=L=X:L=L.next=X,m=m.next}while(m!==null);L===null?E=L=h:L=L.next=h}else E=L=h;m={baseState:x.baseState,firstBaseUpdate:E,lastBaseUpdate:L,shared:x.shared,callbacks:x.callbacks},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=h:o.next=h,m.lastBaseUpdate=h}var Uc=!1;function kl(){if(Uc){var o=Da;if(o!==null)throw o}}function Uu(o,h,m,x){Uc=!1;var E=o.updateQueue;fr=!1;var L=E.firstBaseUpdate,X=E.lastBaseUpdate,se=E.shared.pending;if(se!==null){E.shared.pending=null;var Ce=se,We=Ce.next;Ce.next=null,X===null?L=We:X.next=We,X=Ce;var ut=o.alternate;ut!==null&&(ut=ut.updateQueue,se=ut.lastBaseUpdate,se!==X&&(se===null?ut.firstBaseUpdate=We:se.next=We,ut.lastBaseUpdate=Ce))}if(L!==null){var mt=E.baseState;X=0,ut=We=Ce=null,se=L;do{var Qe=se.lane&-536870913,Ke=Qe!==se.lane;if(Ke?(zr&Qe)===Qe:(x&Qe)===Qe){Qe!==0&&Qe===ls&&(Uc=!0),ut!==null&&(ut=ut.next={lane:0,tag:se.tag,payload:se.payload,callback:null,next:null});e:{var dr=o,ur=se;Qe=h;var ln=m;switch(ur.tag){case 1:if(dr=ur.payload,typeof dr=="function"){mt=dr.call(ln,mt,Qe);break e}mt=dr;break e;case 3:dr.flags=dr.flags&-65537|128;case 0:if(dr=ur.payload,Qe=typeof dr=="function"?dr.call(ln,mt,Qe):dr,Qe==null)break e;mt=T({},mt,Qe);break e;case 2:fr=!0}}Qe=se.callback,Qe!==null&&(o.flags|=64,Ke&&(o.flags|=8192),Ke=E.callbacks,Ke===null?E.callbacks=[Qe]:Ke.push(Qe))}else Ke={lane:Qe,tag:se.tag,payload:se.payload,callback:se.callback,next:null},ut===null?(We=ut=Ke,Ce=mt):ut=ut.next=Ke,X|=Qe;if(se=se.next,se===null){if(se=E.shared.pending,se===null)break;Ke=se,se=Ke.next,Ke.next=null,E.lastBaseUpdate=Ke,E.shared.pending=null}}while(!0);ut===null&&(Ce=mt),E.baseState=Ce,E.firstBaseUpdate=We,E.lastBaseUpdate=ut,L===null&&(E.shared.lanes=0),$l|=X,o.lanes=X,o.memoizedState=mt}}function Oh(o,h){if(typeof o!="function")throw Error(i(191,o));o.call(h)}function Ff(o,h){var m=o.callbacks;if(m!==null)for(o.callbacks=null,o=0;o<m.length;o++)Oh(m[o],h)}var cs=et(null),po=et(0);function Hr(o,h){o=Hl,gt(po,o),gt(cs,h),Hl=o|h.baseLanes}function Nf(){gt(po,Hl),gt(cs,cs.current)}function Ou(){Hl=po.current,st(cs),st(po)}var mo=0,wr=null,$r=null,Hn=null,Lh=!1,ti=!1,jo=!1,Lt=0,Vt=0,hs=null,jf=0;function xn(){throw Error(i(321))}function pa(o,h){if(h===null)return!1;for(var m=0;m<h.length&&m<o.length;m++)if(!Za(o[m],h[m]))return!1;return!0}function zh(o,h,m,x,E,L){return mo=L,wr=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Be.H=o===null||o.memoizedState===null?Bo:qo,jo=!1,L=m(x,E),jo=!1,ti&&(L=Ys(h,m,x,E)),Qi(o),L}function Qi(o){Be.H=ya;var h=$r!==null&&$r.next!==null;if(mo=0,Hn=$r=wr=null,Lh=!1,Vt=0,hs=null,h)throw Error(i(300));o===null||Vn||(o=o.dependencies,o!==null&&Rc(o)&&(Vn=!0))}function Ys(o,h,m,x){wr=o;var E=0;do{if(ti&&(hs=null),Vt=0,ti=!1,25<=E)throw Error(i(301));if(E+=1,Hn=$r=null,o.updateQueue!=null){var L=o.updateQueue;L.lastEffect=null,L.events=null,L.stores=null,L.memoCache!=null&&(L.memoCache.index=0)}Be.H=Ks,L=h(m,x)}while(ti);return L}function Lu(){var o=Be.H,h=o.useState()[0];return h=typeof h.then=="function"?Ul(h):h,o=o.useState()[0],($r!==null?$r.memoizedState:null)!==o&&(wr.flags|=1024),h}function tn(){var o=Lt!==0;return Lt=0,o}function Sn(o,h,m){h.updateQueue=o.updateQueue,h.flags&=-2053,o.lanes&=~m}function zu(o){if(Lh){for(o=o.memoizedState;o!==null;){var h=o.queue;h!==null&&(h.pending=null),o=o.next}Lh=!1}mo=0,Hn=$r=wr=null,ti=!1,Vt=Lt=0,hs=null}function ma(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?wr.memoizedState=Hn=o:Hn=Hn.next=o,Hn}function cn(){if($r===null){var o=wr.alternate;o=o!==null?o.memoizedState:null}else o=$r.next;var h=Hn===null?wr.memoizedState:Hn.next;if(h!==null)Hn=h,$r=o;else{if(o===null)throw wr.alternate===null?Error(i(467)):Error(i(310));$r=o,o={memoizedState:$r.memoizedState,baseState:$r.baseState,baseQueue:$r.baseQueue,queue:$r.queue,next:null},Hn===null?wr.memoizedState=Hn=o:Hn=Hn.next=o}return Hn}function fs(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(o){var h=Vt;return Vt+=1,hs===null&&(hs=[]),o=Rh(hs,o,h),h=wr,(Hn===null?h.memoizedState:Hn.next)===null&&(h=h.alternate,Be.H=h===null||h.memoizedState===null?Bo:qo),o}function Ol(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Ul(o);if(o.$$typeof===ae)return qn(o)}throw Error(i(438,String(o)))}function yo(o){var h=null,m=wr.updateQueue;if(m!==null&&(h=m.memoCache),h==null){var x=wr.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(h={data:x.data.map(function(E){return E.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),m===null&&(m=fs(),wr.updateQueue=m),m.memoCache=h,m=h.data[h.index],m===void 0)for(m=h.data[h.index]=Array(o),x=0;x<o;x++)m[x]=At;return h.index++,m}function go(o,h){return typeof h=="function"?h(o):h}function Fu(o){var h=cn();return Nu(h,$r,o)}function Nu(o,h,m){var x=o.queue;if(x===null)throw Error(i(311));x.lastRenderedReducer=m;var E=o.baseQueue,L=x.pending;if(L!==null){if(E!==null){var X=E.next;E.next=L.next,L.next=X}h.baseQueue=E=L,x.pending=null}if(L=o.baseState,E===null)o.memoizedState=L;else{h=E.next;var se=X=null,Ce=null,We=h,ut=!1;do{var mt=We.lane&-536870913;if(mt!==We.lane?(zr&mt)===mt:(mo&mt)===mt){var Qe=We.revertLane;if(Qe===0)Ce!==null&&(Ce=Ce.next={lane:0,revertLane:0,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null}),mt===ls&&(ut=!0);else if((mo&Qe)===Qe){We=We.next,Qe===ls&&(ut=!0);continue}else mt={lane:0,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},Ce===null?(se=Ce=mt,X=L):Ce=Ce.next=mt,wr.lanes|=Qe,$l|=Qe;mt=We.action,jo&&m(L,mt),L=We.hasEagerState?We.eagerState:m(L,mt)}else Qe={lane:mt,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},Ce===null?(se=Ce=Qe,X=L):Ce=Ce.next=Qe,wr.lanes|=mt,$l|=mt;We=We.next}while(We!==null&&We!==h);if(Ce===null?X=L:Ce.next=se,!Za(L,o.memoizedState)&&(Vn=!0,ut&&(m=Da,m!==null)))throw m;o.memoizedState=L,o.baseState=X,o.baseQueue=Ce,x.lastRenderedState=L}return E===null&&(x.lanes=0),[o.memoizedState,x.dispatch]}function Oc(o){var h=cn(),m=h.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=o;var x=m.dispatch,E=m.pending,L=h.memoizedState;if(E!==null){m.pending=null;var X=E=E.next;do L=o(L,X.action),X=X.next;while(X!==E);Za(L,h.memoizedState)||(Vn=!0),h.memoizedState=L,h.baseQueue===null&&(h.baseState=L),m.lastRenderedState=L}return[L,x]}function b(o,h,m){var x=wr,E=cn(),L=Fr;if(L){if(m===void 0)throw Error(i(407));m=m()}else m=h();var X=!Za(($r||E).memoizedState,m);X&&(E.memoizedState=m,Vn=!0),E=E.queue;var se=d.bind(null,x,E,o);if(ke(2048,8,se,[o]),E.getSnapshot!==h||X||Hn!==null&&Hn.memoizedState.tag&1){if(x.flags|=2048,ye(9,we(),u.bind(null,x,E,m,h),null),fn===null)throw Error(i(349));L||(mo&124)!==0||t(x,h,m)}return m}function t(o,h,m){o.flags|=16384,o={getSnapshot:h,value:m},h=wr.updateQueue,h===null?(h=fs(),wr.updateQueue=h,h.stores=[o]):(m=h.stores,m===null?h.stores=[o]:m.push(o))}function u(o,h,m,x){h.value=m,h.getSnapshot=x,_(h)&&w(o)}function d(o,h,m){return m(function(){_(h)&&w(o)})}function _(o){var h=o.getSnapshot;o=o.value;try{var m=h();return!Za(o,m)}catch{return!0}}function w(o){var h=Ii(o,2);h!==null&&Fi(h,o,2)}function A(o){var h=ma();if(typeof o=="function"){var m=o;if(o=m(),jo){Ga(!0);try{m()}finally{Ga(!1)}}}return h.memoizedState=h.baseState=o,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:o},h}function I(o,h,m,x){return o.baseState=m,Nu(o,$r,typeof x=="function"?x:go)}function k(o,h,m,x,E){if(Xs(o))throw Error(i(485));if(o=h.action,o!==null){var L={payload:E,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(X){L.listeners.push(X)}};Be.T!==null?m(!0):L.isTransition=!1,x(L),m=h.pending,m===null?(L.next=h.pending=L,N(h,L)):(L.next=m.next,h.pending=m.next=L)}}function N(o,h){var m=h.action,x=h.payload,E=o.state;if(h.isTransition){var L=Be.T,X={};Be.T=X;try{var se=m(E,x),Ce=Be.S;Ce!==null&&Ce(X,se),B(o,h,se)}catch(We){H(o,h,We)}finally{Be.T=L}}else try{L=m(E,x),B(o,h,L)}catch(We){H(o,h,We)}}function B(o,h,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(x){W(o,h,x)},function(x){return H(o,h,x)}):W(o,h,m)}function W(o,h,m){h.status="fulfilled",h.value=m,K(h),o.state=m,h=o.pending,h!==null&&(m=h.next,m===h?o.pending=null:(m=m.next,h.next=m,N(o,m)))}function H(o,h,m){var x=o.pending;if(o.pending=null,x!==null){x=x.next;do h.status="rejected",h.reason=m,K(h),h=h.next;while(h!==x)}o.action=null}function K(o){o=o.listeners;for(var h=0;h<o.length;h++)(0,o[h])()}function ie(o,h){return h}function ce(o,h){if(Fr){var m=fn.formState;if(m!==null){e:{var x=wr;if(Fr){if(yn){t:{for(var E=yn,L=lo;E.nodeType!==8;){if(!L){E=null;break t}if(E=Wo(E.nextSibling),E===null){E=null;break t}}L=E.data,E=L==="F!"||L==="F"?E:null}if(E){yn=Wo(E.nextSibling),x=E.data==="F!";break e}}os(x)}x=!1}x&&(h=m[0])}}return m=ma(),m.memoizedState=m.baseState=h,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ie,lastRenderedState:h},m.queue=x,m=ds.bind(null,wr,x),x.dispatch=m,x=A(!1),L=ps.bind(null,wr,!1,x.queue),x=ma(),E={state:h,dispatch:null,action:o,pending:null},x.queue=E,m=k.bind(null,wr,E,L,m),E.dispatch=m,x.memoizedState=o,[h,m,!1]}function he(o){var h=cn();return fe(h,$r,o)}function fe(o,h,m){if(h=Nu(o,h,ie)[0],o=Fu(go)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var x=Ul(h)}catch(X){throw X===Iu?ei:X}else x=h;h=cn();var E=h.queue,L=E.dispatch;return m!==h.memoizedState&&(wr.flags|=2048,ye(9,we(),me.bind(null,E,m),null)),[x,L,o]}function me(o,h){o.action=h}function xe(o){var h=cn(),m=$r;if(m!==null)return fe(h,m,o);cn(),h=h.memoizedState,m=cn();var x=m.queue.dispatch;return m.memoizedState=o,[h,x,!1]}function ye(o,h,m,x){return o={tag:o,create:m,deps:x,inst:h,next:null},h=wr.updateQueue,h===null&&(h=fs(),wr.updateQueue=h),m=h.lastEffect,m===null?h.lastEffect=o.next=o:(x=m.next,m.next=o,o.next=x,h.lastEffect=o),o}function we(){return{destroy:void 0,resource:void 0}}function Te(){return cn().memoizedState}function ge(o,h,m,x){var E=ma();x=x===void 0?null:x,wr.flags|=o,E.memoizedState=ye(1|h,we(),m,x)}function ke(o,h,m,x){var E=cn();x=x===void 0?null:x;var L=E.memoizedState.inst;$r!==null&&x!==null&&pa(x,$r.memoizedState.deps)?E.memoizedState=ye(h,L,m,x):(wr.flags|=o,E.memoizedState=ye(1|h,L,m,x))}function Ze(o,h){ge(8390656,8,o,h)}function je(o,h){ke(2048,8,o,h)}function He(o,h){return ke(4,2,o,h)}function Ye(o,h){return ke(4,4,o,h)}function Pt(o,h){if(typeof h=="function"){o=o();var m=h(o);return function(){typeof m=="function"?m():h(null)}}if(h!=null)return o=o(),h.current=o,function(){h.current=null}}function xt(o,h,m){m=m!=null?m.concat([o]):null,ke(4,4,Pt.bind(null,h,o),m)}function lt(){}function Ft(o,h){var m=cn();h=h===void 0?null:h;var x=m.memoizedState;return h!==null&&pa(h,x[1])?x[0]:(m.memoizedState=[o,h],o)}function vr(o,h){var m=cn();h=h===void 0?null:h;var x=m.memoizedState;if(h!==null&&pa(h,x[1]))return x[0];if(x=o(),jo){Ga(!0);try{o()}finally{Ga(!1)}}return m.memoizedState=[x,h],x}function kr(o,h,m){return m===void 0||(mo&1073741824)!==0?o.memoizedState=h:(o.memoizedState=m,o=oa(),wr.lanes|=o,$l|=o,m)}function hn(o,h,m,x){return Za(m,h)?m:cs.current!==null?(o=kr(o,m,x),Za(o,h)||(Vn=!0),o):(mo&42)===0?(Vn=!0,o.memoizedState=m):(o=oa(),wr.lanes|=o,$l|=o,h)}function Wr(o,h,m,x,E){var L=ct.p;ct.p=L!==0&&8>L?L:8;var X=Be.T,se={};Be.T=se,ps(o,!1,h,m);try{var Ce=E(),We=Be.S;if(We!==null&&We(se,Ce),Ce!==null&&typeof Ce=="object"&&typeof Ce.then=="function"){var ut=co(Ce,x);ni(o,h,ut,si(o))}else ni(o,h,x,si(o))}catch(mt){ni(o,h,{then:function(){},status:"rejected",reason:mt},si())}finally{ct.p=L,Be.T=X}}function Zr(){}function rn(o,h,m,x){if(o.tag!==5)throw Error(i(476));var E=Kr(o).queue;Wr(o,E,h,nt,m===null?Zr:function(){return Yr(o),m(x)})}function Kr(o){var h=o.memoizedState;if(h!==null)return h;h={memoizedState:nt,baseState:nt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:nt},next:null};var m={};return h.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:m},next:null},o.memoizedState=h,o=o.alternate,o!==null&&(o.memoizedState=h),h}function Yr(o){var h=Kr(o).next.queue;ni(o,h,{},si())}function Mr(){return qn(q)}function ea(){return cn().memoizedState}function $n(){return cn().memoizedState}function ri(o){for(var h=o.return;h!==null;){switch(h.tag){case 24:case 3:var m=si();o=No(m);var x=us(h,o,m);x!==null&&(Fi(x,h,m),ku(x,h,m)),h={cache:Gs()},o.payload=h;return}h=h.return}}function Qs(o,h,m){var x=si();m={lane:x,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Xs(o)?Lc(h,m):(m=js(o,h,m,x),m!==null&&(Fi(m,o,x),ms(m,h,x)))}function ds(o,h,m){var x=si();ni(o,h,m,x)}function ni(o,h,m,x){var E={lane:x,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Xs(o))Lc(h,E);else{var L=o.alternate;if(o.lanes===0&&(L===null||L.lanes===0)&&(L=h.lastRenderedReducer,L!==null))try{var X=h.lastRenderedState,se=L(X,m);if(E.hasEagerState=!0,E.eagerState=se,Za(se,X))return Cc(o,h,E,0),fn===null&&Ml(),!1}catch{}finally{}if(m=js(o,h,E,x),m!==null)return Fi(m,o,x),ms(m,h,x),!0}return!1}function ps(o,h,m,x){if(x={lane:2,revertLane:cd(),action:x,hasEagerState:!1,eagerState:null,next:null},Xs(o)){if(h)throw Error(i(479))}else h=js(o,m,x,2),h!==null&&Fi(h,o,2)}function Xs(o){var h=o.alternate;return o===wr||h!==null&&h===wr}function Lc(o,h){ti=Lh=!0;var m=o.pending;m===null?h.next=h:(h.next=m.next,m.next=h),o.pending=h}function ms(o,h,m){if((m&4194048)!==0){var x=h.lanes;x&=o.pendingLanes,m|=x,h.lanes=m,qt(o,m)}}var ya={readContext:qn,use:Ol,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useLayoutEffect:xn,useInsertionEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useSyncExternalStore:xn,useId:xn,useHostTransitionStatus:xn,useFormState:xn,useActionState:xn,useOptimistic:xn,useMemoCache:xn,useCacheRefresh:xn},Bo={readContext:qn,use:Ol,useCallback:function(o,h){return ma().memoizedState=[o,h===void 0?null:h],o},useContext:qn,useEffect:Ze,useImperativeHandle:function(o,h,m){m=m!=null?m.concat([o]):null,ge(4194308,4,Pt.bind(null,h,o),m)},useLayoutEffect:function(o,h){return ge(4194308,4,o,h)},useInsertionEffect:function(o,h){ge(4,2,o,h)},useMemo:function(o,h){var m=ma();h=h===void 0?null:h;var x=o();if(jo){Ga(!0);try{o()}finally{Ga(!1)}}return m.memoizedState=[x,h],x},useReducer:function(o,h,m){var x=ma();if(m!==void 0){var E=m(h);if(jo){Ga(!0);try{m(h)}finally{Ga(!1)}}}else E=h;return x.memoizedState=x.baseState=E,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:E},x.queue=o,o=o.dispatch=Qs.bind(null,wr,o),[x.memoizedState,o]},useRef:function(o){var h=ma();return o={current:o},h.memoizedState=o},useState:function(o){o=A(o);var h=o.queue,m=ds.bind(null,wr,h);return h.dispatch=m,[o.memoizedState,m]},useDebugValue:lt,useDeferredValue:function(o,h){var m=ma();return kr(m,o,h)},useTransition:function(){var o=A(!1);return o=Wr.bind(null,wr,o.queue,!0,!1),ma().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,h,m){var x=wr,E=ma();if(Fr){if(m===void 0)throw Error(i(407));m=m()}else{if(m=h(),fn===null)throw Error(i(349));(zr&124)!==0||t(x,h,m)}E.memoizedState=m;var L={value:m,getSnapshot:h};return E.queue=L,Ze(d.bind(null,x,L,o),[o]),x.flags|=2048,ye(9,we(),u.bind(null,x,L,m,h),null),m},useId:function(){var o=ma(),h=fn.identifierPrefix;if(Fr){var m=Qa,x=Oi;m=(x&~(1<<32-Re(x)-1)).toString(32)+m,h=""+h+"R"+m,m=Lt++,0<m&&(h+="H"+m.toString(32)),h+=""}else m=jf++,h=""+h+"r"+m.toString(32)+"";return o.memoizedState=h},useHostTransitionStatus:Mr,useFormState:ce,useActionState:ce,useOptimistic:function(o){var h=ma();h.memoizedState=h.baseState=o;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=m,h=ps.bind(null,wr,!0,m),m.dispatch=h,[o,h]},useMemoCache:yo,useCacheRefresh:function(){return ma().memoizedState=ri.bind(null,wr)}},qo={readContext:qn,use:Ol,useCallback:Ft,useContext:qn,useEffect:je,useImperativeHandle:xt,useInsertionEffect:He,useLayoutEffect:Ye,useMemo:vr,useReducer:Fu,useRef:Te,useState:function(){return Fu(go)},useDebugValue:lt,useDeferredValue:function(o,h){var m=cn();return hn(m,$r.memoizedState,o,h)},useTransition:function(){var o=Fu(go)[0],h=cn().memoizedState;return[typeof o=="boolean"?o:Ul(o),h]},useSyncExternalStore:b,useId:ea,useHostTransitionStatus:Mr,useFormState:he,useActionState:he,useOptimistic:function(o,h){var m=cn();return I(m,$r,o,h)},useMemoCache:yo,useCacheRefresh:$n},Ks={readContext:qn,use:Ol,useCallback:Ft,useContext:qn,useEffect:je,useImperativeHandle:xt,useInsertionEffect:He,useLayoutEffect:Ye,useMemo:vr,useReducer:Oc,useRef:Te,useState:function(){return Oc(go)},useDebugValue:lt,useDeferredValue:function(o,h){var m=cn();return $r===null?kr(m,o,h):hn(m,$r.memoizedState,o,h)},useTransition:function(){var o=Oc(go)[0],h=cn().memoizedState;return[typeof o=="boolean"?o:Ul(o),h]},useSyncExternalStore:b,useId:ea,useHostTransitionStatus:Mr,useFormState:xe,useActionState:xe,useOptimistic:function(o,h){var m=cn();return $r!==null?I(m,$r,o,h):(m.baseState=o,[o,m.queue.dispatch])},useMemoCache:yo,useCacheRefresh:$n},jr=null,gn=0;function za(o){var h=gn;return gn+=1,jr===null&&(jr=[]),Rh(jr,o,h)}function Tn(o,h){h=h.props.ref,o.ref=h!==void 0?h:null}function Fh(o,h){throw h.$$typeof===U?Error(i(525)):(o=Object.prototype.toString.call(h),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":o)))}function Nh(o){var h=o._init;return h(o._payload)}function ju(o){function h(Ne,ze){if(o){var qe=Ne.deletions;qe===null?(Ne.deletions=[ze],Ne.flags|=16):qe.push(ze)}}function m(Ne,ze){if(!o)return null;for(;ze!==null;)h(Ne,ze),ze=ze.sibling;return null}function x(Ne){for(var ze=new Map;Ne!==null;)Ne.key!==null?ze.set(Ne.key,Ne):ze.set(Ne.index,Ne),Ne=Ne.sibling;return ze}function E(Ne,ze){return Ne=Oa(Ne,ze),Ne.index=0,Ne.sibling=null,Ne}function L(Ne,ze,qe){return Ne.index=qe,o?(qe=Ne.alternate,qe!==null?(qe=qe.index,qe<ze?(Ne.flags|=67108866,ze):qe):(Ne.flags|=67108866,ze)):(Ne.flags|=1048576,ze)}function X(Ne){return o&&Ne.alternate===null&&(Ne.flags|=67108866),Ne}function se(Ne,ze,qe,pt){return ze===null||ze.tag!==6?(ze=kf(qe,Ne.mode,pt),ze.return=Ne,ze):(ze=E(ze,qe),ze.return=Ne,ze)}function Ce(Ne,ze,qe,pt){var Wt=qe.type;return Wt===V?ut(Ne,ze,qe.props.children,pt,qe.key):ze!==null&&(ze.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===Fe&&Nh(Wt)===ze.type)?(ze=E(ze,qe.props),Tn(ze,qe),ze.return=Ne,ze):(ze=Ah(qe.type,qe.key,qe.props,null,Ne.mode,pt),Tn(ze,qe),ze.return=Ne,ze)}function We(Ne,ze,qe,pt){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==qe.containerInfo||ze.stateNode.implementation!==qe.implementation?(ze=Mc(qe,Ne.mode,pt),ze.return=Ne,ze):(ze=E(ze,qe.children||[]),ze.return=Ne,ze)}function ut(Ne,ze,qe,pt,Wt){return ze===null||ze.tag!==7?(ze=Bs(qe,Ne.mode,pt,Wt),ze.return=Ne,ze):(ze=E(ze,qe),ze.return=Ne,ze)}function mt(Ne,ze,qe){if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return ze=kf(""+ze,Ne.mode,qe),ze.return=Ne,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case z:return qe=Ah(ze.type,ze.key,ze.props,null,Ne.mode,qe),Tn(qe,ze),qe.return=Ne,qe;case F:return ze=Mc(ze,Ne.mode,qe),ze.return=Ne,ze;case Fe:var pt=ze._init;return ze=pt(ze._payload),mt(Ne,ze,qe)}if(Ut(ze)||ft(ze))return ze=Bs(ze,Ne.mode,qe,null),ze.return=Ne,ze;if(typeof ze.then=="function")return mt(Ne,za(ze),qe);if(ze.$$typeof===ae)return mt(Ne,gi(Ne,ze),qe);Fh(Ne,ze)}return null}function Qe(Ne,ze,qe,pt){var Wt=ze!==null?ze.key:null;if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return Wt!==null?null:se(Ne,ze,""+qe,pt);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case z:return qe.key===Wt?Ce(Ne,ze,qe,pt):null;case F:return qe.key===Wt?We(Ne,ze,qe,pt):null;case Fe:return Wt=qe._init,qe=Wt(qe._payload),Qe(Ne,ze,qe,pt)}if(Ut(qe)||ft(qe))return Wt!==null?null:ut(Ne,ze,qe,pt,null);if(typeof qe.then=="function")return Qe(Ne,ze,za(qe),pt);if(qe.$$typeof===ae)return Qe(Ne,ze,gi(Ne,qe),pt);Fh(Ne,qe)}return null}function Ke(Ne,ze,qe,pt,Wt){if(typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint")return Ne=Ne.get(qe)||null,se(ze,Ne,""+pt,Wt);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case z:return Ne=Ne.get(pt.key===null?qe:pt.key)||null,Ce(ze,Ne,pt,Wt);case F:return Ne=Ne.get(pt.key===null?qe:pt.key)||null,We(ze,Ne,pt,Wt);case Fe:var Er=pt._init;return pt=Er(pt._payload),Ke(Ne,ze,qe,pt,Wt)}if(Ut(pt)||ft(pt))return Ne=Ne.get(qe)||null,ut(ze,Ne,pt,Wt,null);if(typeof pt.then=="function")return Ke(Ne,ze,qe,za(pt),Wt);if(pt.$$typeof===ae)return Ke(Ne,ze,qe,gi(ze,pt),Wt);Fh(ze,pt)}return null}function dr(Ne,ze,qe,pt){for(var Wt=null,Er=null,nr=ze,hr=ze=0,qa=null;nr!==null&&hr<qe.length;hr++){nr.index>hr?(qa=nr,nr=null):qa=nr.sibling;var Vr=Qe(Ne,nr,qe[hr],pt);if(Vr===null){nr===null&&(nr=qa);break}o&&nr&&Vr.alternate===null&&h(Ne,nr),ze=L(Vr,ze,hr),Er===null?Wt=Vr:Er.sibling=Vr,Er=Vr,nr=qa}if(hr===qe.length)return m(Ne,nr),Fr&&so(Ne,hr),Wt;if(nr===null){for(;hr<qe.length;hr++)nr=mt(Ne,qe[hr],pt),nr!==null&&(ze=L(nr,ze,hr),Er===null?Wt=nr:Er.sibling=nr,Er=nr);return Fr&&so(Ne,hr),Wt}for(nr=x(nr);hr<qe.length;hr++)qa=Ke(nr,Ne,hr,qe[hr],pt),qa!==null&&(o&&qa.alternate!==null&&nr.delete(qa.key===null?hr:qa.key),ze=L(qa,ze,hr),Er===null?Wt=qa:Er.sibling=qa,Er=qa);return o&&nr.forEach(function(Xu){return h(Ne,Xu)}),Fr&&so(Ne,hr),Wt}function ur(Ne,ze,qe,pt){if(qe==null)throw Error(i(151));for(var Wt=null,Er=null,nr=ze,hr=ze=0,qa=null,Vr=qe.next();nr!==null&&!Vr.done;hr++,Vr=qe.next()){nr.index>hr?(qa=nr,nr=null):qa=nr.sibling;var Xu=Qe(Ne,nr,Vr.value,pt);if(Xu===null){nr===null&&(nr=qa);break}o&&nr&&Xu.alternate===null&&h(Ne,nr),ze=L(Xu,ze,hr),Er===null?Wt=Xu:Er.sibling=Xu,Er=Xu,nr=qa}if(Vr.done)return m(Ne,nr),Fr&&so(Ne,hr),Wt;if(nr===null){for(;!Vr.done;hr++,Vr=qe.next())Vr=mt(Ne,Vr.value,pt),Vr!==null&&(ze=L(Vr,ze,hr),Er===null?Wt=Vr:Er.sibling=Vr,Er=Vr);return Fr&&so(Ne,hr),Wt}for(nr=x(nr);!Vr.done;hr++,Vr=qe.next())Vr=Ke(nr,Ne,hr,Vr.value,pt),Vr!==null&&(o&&Vr.alternate!==null&&nr.delete(Vr.key===null?hr:Vr.key),ze=L(Vr,ze,hr),Er===null?Wt=Vr:Er.sibling=Vr,Er=Vr);return o&&nr.forEach(function(S1){return h(Ne,S1)}),Fr&&so(Ne,hr),Wt}function ln(Ne,ze,qe,pt){if(typeof qe=="object"&&qe!==null&&qe.type===V&&qe.key===null&&(qe=qe.props.children),typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case z:e:{for(var Wt=qe.key;ze!==null;){if(ze.key===Wt){if(Wt=qe.type,Wt===V){if(ze.tag===7){m(Ne,ze.sibling),pt=E(ze,qe.props.children),pt.return=Ne,Ne=pt;break e}}else if(ze.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===Fe&&Nh(Wt)===ze.type){m(Ne,ze.sibling),pt=E(ze,qe.props),Tn(pt,qe),pt.return=Ne,Ne=pt;break e}m(Ne,ze);break}else h(Ne,ze);ze=ze.sibling}qe.type===V?(pt=Bs(qe.props.children,Ne.mode,pt,qe.key),pt.return=Ne,Ne=pt):(pt=Ah(qe.type,qe.key,qe.props,null,Ne.mode,pt),Tn(pt,qe),pt.return=Ne,Ne=pt)}return X(Ne);case F:e:{for(Wt=qe.key;ze!==null;){if(ze.key===Wt)if(ze.tag===4&&ze.stateNode.containerInfo===qe.containerInfo&&ze.stateNode.implementation===qe.implementation){m(Ne,ze.sibling),pt=E(ze,qe.children||[]),pt.return=Ne,Ne=pt;break e}else{m(Ne,ze);break}else h(Ne,ze);ze=ze.sibling}pt=Mc(qe,Ne.mode,pt),pt.return=Ne,Ne=pt}return X(Ne);case Fe:return Wt=qe._init,qe=Wt(qe._payload),ln(Ne,ze,qe,pt)}if(Ut(qe))return dr(Ne,ze,qe,pt);if(ft(qe)){if(Wt=ft(qe),typeof Wt!="function")throw Error(i(150));return qe=Wt.call(qe),ur(Ne,ze,qe,pt)}if(typeof qe.then=="function")return ln(Ne,ze,za(qe),pt);if(qe.$$typeof===ae)return ln(Ne,ze,gi(Ne,qe),pt);Fh(Ne,qe)}return typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint"?(qe=""+qe,ze!==null&&ze.tag===6?(m(Ne,ze.sibling),pt=E(ze,qe),pt.return=Ne,Ne=pt):(m(Ne,ze),pt=kf(qe,Ne.mode,pt),pt.return=Ne,Ne=pt),X(Ne)):m(Ne,ze)}return function(Ne,ze,qe,pt){try{gn=0;var Wt=ln(Ne,ze,qe,pt);return jr=null,Wt}catch(nr){if(nr===Iu||nr===ei)throw nr;var Er=ki(29,nr,null,Ne.mode);return Er.lanes=pt,Er.return=Ne,Er}finally{}}}var vo=ju(!0),Ho=ju(!1),Un=et(null),En=null;function $o(o){var h=o.alternate;gt(On,On.current&1),gt(Un,o),En===null&&(h===null||cs.current!==null||h.memoizedState!==null)&&(En=o)}function ys(o){if(o.tag===22){if(gt(On,On.current),gt(Un,o),En===null){var h=o.alternate;h!==null&&h.memoizedState!==null&&(En=o)}}else gs()}function gs(){gt(On,On.current),gt(Un,Un.current)}function Xi(o){st(Un),En===o&&(En=null),st(On)}var On=et(0);function Ll(o){for(var h=o;h!==null;){if(h.tag===13){var m=h.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||fy(m)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function zl(o,h,m,x){h=o.memoizedState,m=m(x,h),m=m==null?h:T({},h,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var Fl={enqueueSetState:function(o,h,m){o=o._reactInternals;var x=si(),E=No(x);E.payload=h,m!=null&&(E.callback=m),h=us(o,E,x),h!==null&&(Fi(h,o,x),ku(h,o,x))},enqueueReplaceState:function(o,h,m){o=o._reactInternals;var x=si(),E=No(x);E.tag=1,E.payload=h,m!=null&&(E.callback=m),h=us(o,E,x),h!==null&&(Fi(h,o,x),ku(h,o,x))},enqueueForceUpdate:function(o,h){o=o._reactInternals;var m=si(),x=No(m);x.tag=2,h!=null&&(x.callback=h),h=us(o,x,m),h!==null&&(Fi(h,o,m),ku(h,o,m))}};function ym(o,h,m,x,E,L,X){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(x,L,X):h.prototype&&h.prototype.isPureReactComponent?!wu(m,x)||!wu(E,L):!0}function mg(o,h,m,x){o=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,x),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,x),h.state!==o&&Fl.enqueueReplaceState(h,h.state,null)}function Nl(o,h){var m=h;if("ref"in h){m={};for(var x in h)x!=="ref"&&(m[x]=h[x])}if(o=o.defaultProps){m===h&&(m=T({},m));for(var E in o)m[E]===void 0&&(m[E]=o[E])}return m}var Bf=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function qf(o){Bf(o)}function gm(o){console.error(o)}function yg(o){Bf(o)}function jh(o,h){try{var m=o.onUncaughtError;m(h.value,{componentStack:h.stack})}catch(x){setTimeout(function(){throw x})}}function gg(o,h,m){try{var x=o.onCaughtError;x(m.value,{componentStack:m.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Hf(o,h,m){return m=No(m),m.tag=3,m.payload={element:null},m.callback=function(){jh(o,h)},m}function vm(o){return o=No(o),o.tag=3,o}function _m(o,h,m,x){var E=m.type.getDerivedStateFromError;if(typeof E=="function"){var L=x.value;o.payload=function(){return E(L)},o.callback=function(){gg(h,m,x)}}var X=m.stateNode;X!==null&&typeof X.componentDidCatch=="function"&&(o.callback=function(){gg(h,m,x),typeof E!="function"&&(qu===null?qu=new Set([this]):qu.add(this));var se=x.stack;this.componentDidCatch(x.value,{componentStack:se!==null?se:""})})}function Bh(o,h,m,x,E){if(m.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(h=m.alternate,h!==null&&Tu(h,m,E,!0),m=Un.current,m!==null){switch(m.tag){case 13:return En===null?Vm():m.alternate===null&&wn===0&&(wn=3),m.flags&=-257,m.flags|=65536,m.lanes=E,x===Rt?m.flags|=16384:(h=m.updateQueue,h===null?m.updateQueue=new Set([x]):h.add(x),Ym(o,x,E)),!1;case 22:return m.flags|=65536,x===Rt?m.flags|=16384:(h=m.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([x])},m.updateQueue=h):(m=h.retryQueue,m===null?h.retryQueue=new Set([x]):m.add(x)),Ym(o,x,E)),!1}throw Error(i(435,m.tag))}return Ym(o,x,E),Vm(),!1}if(Fr)return h=Un.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=E,x!==Du&&(o=Error(i(422),{cause:x}),$s(da(o,m)))):(x!==Du&&(h=Error(i(423),{cause:x}),$s(da(h,m))),o=o.current.alternate,o.flags|=65536,E&=-E,o.lanes|=E,x=da(x,m),E=Hf(o.stateNode,x,E),Uh(o,E),wn!==4&&(wn=2)),!1;var L=Error(i(520),{cause:x});if(L=da(L,m),td===null?td=[L]:td.push(L),wn!==4&&(wn=2),h===null)return!0;x=da(x,m),m=h;do{switch(m.tag){case 3:return m.flags|=65536,o=E&-E,m.lanes|=o,o=Hf(m.stateNode,x,o),Uh(m,o),!1;case 1:if(h=m.type,L=m.stateNode,(m.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(qu===null||!qu.has(L))))return m.flags|=65536,E&=-E,m.lanes|=E,E=vm(E),_m(E,o,m,x),Uh(m,E),!1}m=m.return}while(m!==null);return!1}var vg=Error(i(461)),Vn=!1;function ga(o,h,m,x){h.child=o===null?Ho(h,null,m,x):vo(h,o.child,m,x)}function $f(o,h,m,x,E){m=m.render;var L=h.ref;if("ref"in x){var X={};for(var se in x)se!=="ref"&&(X[se]=x[se])}else X=x;return Vs(h),x=zh(o,h,m,X,L,E),se=tn(),o!==null&&!Vn?(Sn(o,h,E),vs(o,h,E)):(Fr&&se&&is(h),h.flags|=1,ga(o,h,x,E),h.child)}function _g(o,h,m,x,E){if(o===null){var L=m.type;return typeof L=="function"&&!Ph(L)&&L.defaultProps===void 0&&m.compare===null?(h.tag=15,h.type=L,bg(o,h,L,x,E)):(o=Ah(m.type,null,x,h,h.mode,E),o.ref=h.ref,o.return=h,h.child=o)}if(L=o.child,!Pm(o,E)){var X=L.memoizedProps;if(m=m.compare,m=m!==null?m:wu,m(X,x)&&o.ref===h.ref)return vs(o,h,E)}return h.flags|=1,o=Oa(L,x),o.ref=h.ref,o.return=h,h.child=o}function bg(o,h,m,x,E){if(o!==null){var L=o.memoizedProps;if(wu(L,x)&&o.ref===h.ref)if(Vn=!1,h.pendingProps=x=L,Pm(o,E))(o.flags&131072)!==0&&(Vn=!0);else return h.lanes=o.lanes,vs(o,h,E)}return Gf(o,h,m,x,E)}function xg(o,h,m){var x=h.pendingProps,E=x.children,L=o!==null?o.memoizedState:null;if(x.mode==="hidden"){if((h.flags&128)!==0){if(x=L!==null?L.baseLanes|m:m,o!==null){for(E=h.child=o.child,L=0;E!==null;)L=L|E.lanes|E.childLanes,E=E.sibling;h.childLanes=L&~x}else h.childLanes=0,h.child=null;return Sg(o,h,x,m)}if((m&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},o!==null&&Th(h,L!==null?L.cachePool:null),L!==null?Hr(h,L):Nf(),ys(h);else return h.lanes=h.childLanes=536870912,Sg(o,h,L!==null?L.baseLanes|m:m,m)}else L!==null?(Th(h,L.cachePool),Hr(h,L),gs(),h.memoizedState=null):(o!==null&&Th(h,null),Nf(),gs());return ga(o,h,E,m),h.child}function Sg(o,h,m,x){var E=zf();return E=E===null?null:{parent:Jn._currentValue,pool:E},h.memoizedState={baseLanes:m,cachePool:E},o!==null&&Th(h,null),Nf(),ys(h),o!==null&&Tu(o,h,x,!0),null}function Vf(o,h){var m=h.ref;if(m===null)o!==null&&o.ref!==null&&(h.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(i(284));(o===null||o.ref!==m)&&(h.flags|=4194816)}}function Gf(o,h,m,x,E){return Vs(h),m=zh(o,h,m,x,void 0,E),x=tn(),o!==null&&!Vn?(Sn(o,h,E),vs(o,h,E)):(Fr&&x&&is(h),h.flags|=1,ga(o,h,m,E),h.child)}function bm(o,h,m,x,E,L){return Vs(h),h.updateQueue=null,m=Ys(h,x,m,E),Qi(o),x=tn(),o!==null&&!Vn?(Sn(o,h,L),vs(o,h,L)):(Fr&&x&&is(h),h.flags|=1,ga(o,h,m,L),h.child)}function xm(o,h,m,x,E){if(Vs(h),h.stateNode===null){var L=gr,X=m.contextType;typeof X=="object"&&X!==null&&(L=qn(X)),L=new m(x,L),h.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,L.updater=Fl,h.stateNode=L,L._reactInternals=h,L=h.stateNode,L.props=x,L.state=h.memoizedState,L.refs={},kc(h),X=m.contextType,L.context=typeof X=="object"&&X!==null?qn(X):gr,L.state=h.memoizedState,X=m.getDerivedStateFromProps,typeof X=="function"&&(zl(h,m,X,x),L.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(X=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),X!==L.state&&Fl.enqueueReplaceState(L,L.state,null),Uu(h,x,L,E),kl(),L.state=h.memoizedState),typeof L.componentDidMount=="function"&&(h.flags|=4194308),x=!0}else if(o===null){L=h.stateNode;var se=h.memoizedProps,Ce=Nl(m,se);L.props=Ce;var We=L.context,ut=m.contextType;X=gr,typeof ut=="object"&&ut!==null&&(X=qn(ut));var mt=m.getDerivedStateFromProps;ut=typeof mt=="function"||typeof L.getSnapshotBeforeUpdate=="function",se=h.pendingProps!==se,ut||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(se||We!==X)&&mg(h,L,x,X),fr=!1;var Qe=h.memoizedState;L.state=Qe,Uu(h,x,L,E),kl(),We=h.memoizedState,se||Qe!==We||fr?(typeof mt=="function"&&(zl(h,m,mt,x),We=h.memoizedState),(Ce=fr||ym(h,m,Ce,x,Qe,We,X))?(ut||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(h.flags|=4194308)):(typeof L.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=x,h.memoizedState=We),L.props=x,L.state=We,L.context=X,x=Ce):(typeof L.componentDidMount=="function"&&(h.flags|=4194308),x=!1)}else{L=h.stateNode,kh(o,h),X=h.memoizedProps,ut=Nl(m,X),L.props=ut,mt=h.pendingProps,Qe=L.context,We=m.contextType,Ce=gr,typeof We=="object"&&We!==null&&(Ce=qn(We)),se=m.getDerivedStateFromProps,(We=typeof se=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(X!==mt||Qe!==Ce)&&mg(h,L,x,Ce),fr=!1,Qe=h.memoizedState,L.state=Qe,Uu(h,x,L,E),kl();var Ke=h.memoizedState;X!==mt||Qe!==Ke||fr||o!==null&&o.dependencies!==null&&Rc(o.dependencies)?(typeof se=="function"&&(zl(h,m,se,x),Ke=h.memoizedState),(ut=fr||ym(h,m,ut,x,Qe,Ke,Ce)||o!==null&&o.dependencies!==null&&Rc(o.dependencies))?(We||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(x,Ke,Ce),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(x,Ke,Ce)),typeof L.componentDidUpdate=="function"&&(h.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof L.componentDidUpdate!="function"||X===o.memoizedProps&&Qe===o.memoizedState||(h.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||X===o.memoizedProps&&Qe===o.memoizedState||(h.flags|=1024),h.memoizedProps=x,h.memoizedState=Ke),L.props=x,L.state=Ke,L.context=Ce,x=ut):(typeof L.componentDidUpdate!="function"||X===o.memoizedProps&&Qe===o.memoizedState||(h.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||X===o.memoizedProps&&Qe===o.memoizedState||(h.flags|=1024),x=!1)}return L=x,Vf(o,h),x=(h.flags&128)!==0,L||x?(L=h.stateNode,m=x&&typeof m.getDerivedStateFromError!="function"?null:L.render(),h.flags|=1,o!==null&&x?(h.child=vo(h,o.child,null,E),h.child=vo(h,null,m,E)):ga(o,h,m,E),h.memoizedState=L.state,o=h.child):o=vs(o,h,E),o}function wg(o,h,m,x){return uo(),h.flags|=256,ga(o,h,m,x),h.child}var Sm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ip(o){return{baseLanes:o,cachePool:Ic()}}function op(o,h,m){return o=o!==null?o.childLanes&~m:0,h&&(o|=Go),o}function Pg(o,h,m){var x=h.pendingProps,E=!1,L=(h.flags&128)!==0,X;if((X=L)||(X=o!==null&&o.memoizedState===null?!1:(On.current&2)!==0),X&&(E=!0,h.flags&=-129),X=(h.flags&32)!==0,h.flags&=-33,o===null){if(Fr){if(E?$o(h):gs(),Fr){var se=yn,Ce;if(Ce=se){e:{for(Ce=se,se=lo;Ce.nodeType!==8;){if(!se){se=null;break e}if(Ce=Wo(Ce.nextSibling),Ce===null){se=null;break e}}se=Ce}se!==null?(h.memoizedState={dehydrated:se,treeContext:oo!==null?{id:Oi,overflow:Qa}:null,retryLane:536870912,hydrationErrors:null},Ce=ki(18,null,null,0),Ce.stateNode=se,Ce.return=h,h.child=Ce,aa=h,yn=null,Ce=!0):Ce=!1}Ce||os(h)}if(se=h.memoizedState,se!==null&&(se=se.dehydrated,se!==null))return fy(se)?h.lanes=32:h.lanes=536870912,null;Xi(h)}return se=x.children,x=x.fallback,E?(gs(),E=h.mode,se=Zf({mode:"hidden",children:se},E),x=Bs(x,E,m,null),se.return=h,x.return=h,se.sibling=x,h.child=se,E=h.child,E.memoizedState=ip(m),E.childLanes=op(o,X,m),h.memoizedState=Sm,x):($o(h),Wf(h,se))}if(Ce=o.memoizedState,Ce!==null&&(se=Ce.dehydrated,se!==null)){if(L)h.flags&256?($o(h),h.flags&=-257,h=Yf(o,h,m)):h.memoizedState!==null?(gs(),h.child=o.child,h.flags|=128,h=null):(gs(),E=x.fallback,se=h.mode,x=Zf({mode:"visible",children:x.children},se),E=Bs(E,se,m,null),E.flags|=2,x.return=h,E.return=h,x.sibling=E,h.child=x,vo(h,o.child,null,m),x=h.child,x.memoizedState=ip(m),x.childLanes=op(o,X,m),h.memoizedState=Sm,h=E);else if($o(h),fy(se)){if(X=se.nextSibling&&se.nextSibling.dataset,X)var We=X.dgst;X=We,x=Error(i(419)),x.stack="",x.digest=X,$s({value:x,source:null,stack:null}),h=Yf(o,h,m)}else if(Vn||Tu(o,h,m,!1),X=(m&o.childLanes)!==0,Vn||X){if(X=fn,X!==null&&(x=m&-m,x=(x&42)!==0?1:or(x),x=(x&(X.suspendedLanes|m))!==0?0:x,x!==0&&x!==Ce.retryLane))throw Ce.retryLane=x,Ii(o,x),Fi(X,o,x),vg;se.data==="$?"||Vm(),h=Yf(o,h,m)}else se.data==="$?"?(h.flags|=192,h.child=o.child,h=null):(o=Ce.treeContext,yn=Wo(se.nextSibling),aa=h,Fr=!0,Hs=null,lo=!1,o!==null&&(Ui[La++]=Oi,Ui[La++]=Qa,Ui[La++]=oo,Oi=o.id,Qa=o.overflow,oo=h),h=Wf(h,x.children),h.flags|=4096);return h}return E?(gs(),E=x.fallback,se=h.mode,Ce=o.child,We=Ce.sibling,x=Oa(Ce,{mode:"hidden",children:x.children}),x.subtreeFlags=Ce.subtreeFlags&65011712,We!==null?E=Oa(We,E):(E=Bs(E,se,m,null),E.flags|=2),E.return=h,x.return=h,x.sibling=E,h.child=x,x=E,E=h.child,se=o.child.memoizedState,se===null?se=ip(m):(Ce=se.cachePool,Ce!==null?(We=Jn._currentValue,Ce=Ce.parent!==We?{parent:We,pool:We}:Ce):Ce=Ic(),se={baseLanes:se.baseLanes|m,cachePool:Ce}),E.memoizedState=se,E.childLanes=op(o,X,m),h.memoizedState=Sm,x):($o(h),m=o.child,o=m.sibling,m=Oa(m,{mode:"visible",children:x.children}),m.return=h,m.sibling=null,o!==null&&(X=h.deletions,X===null?(h.deletions=[o],h.flags|=16):X.push(o)),h.child=m,h.memoizedState=null,m)}function Wf(o,h){return h=Zf({mode:"visible",children:h},o.mode),h.return=o,o.child=h}function Zf(o,h){return o=ki(22,o,null,h),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Yf(o,h,m){return vo(h,o.child,null,m),o=Wf(h,h.pendingProps.children),o.flags|=2,h.memoizedState=null,o}function qh(o,h,m){o.lanes|=h;var x=o.alternate;x!==null&&(x.lanes|=h),Ec(o.return,h,m)}function ai(o,h,m,x,E){var L=o.memoizedState;L===null?o.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:x,tail:m,tailMode:E}:(L.isBackwards=h,L.rendering=null,L.renderingStartTime=0,L.last=x,L.tail=m,L.tailMode=E)}function wm(o,h,m){var x=h.pendingProps,E=x.revealOrder,L=x.tail;if(ga(o,h,x.children,m),x=On.current,(x&2)!==0)x=x&1|2,h.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=h.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&qh(o,m,h);else if(o.tag===19)qh(o,m,h);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===h)break e;for(;o.sibling===null;){if(o.return===null||o.return===h)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}x&=1}switch(gt(On,x),E){case"forwards":for(m=h.child,E=null;m!==null;)o=m.alternate,o!==null&&Ll(o)===null&&(E=m),m=m.sibling;m=E,m===null?(E=h.child,h.child=null):(E=m.sibling,m.sibling=null),ai(h,!1,E,m,L);break;case"backwards":for(m=null,E=h.child,h.child=null;E!==null;){if(o=E.alternate,o!==null&&Ll(o)===null){h.child=E;break}o=E.sibling,E.sibling=m,m=E,E=o}ai(h,!0,m,null,L);break;case"together":ai(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function vs(o,h,m){if(o!==null&&(h.dependencies=o.dependencies),$l|=h.lanes,(m&h.childLanes)===0)if(o!==null){if(Tu(o,h,m,!1),(m&h.childLanes)===0)return null}else return null;if(o!==null&&h.child!==o.child)throw Error(i(153));if(h.child!==null){for(o=h.child,m=Oa(o,o.pendingProps),h.child=m,m.return=h;o.sibling!==null;)o=o.sibling,m=m.sibling=Oa(o,o.pendingProps),m.return=h;m.sibling=null}return h.child}function Pm(o,h){return(o.lanes&h)!==0?!0:(o=o.dependencies,!!(o!==null&&Rc(o)))}function Ag(o,h,m){switch(h.tag){case 3:Jt(h,h.stateNode.containerInfo),yi(h,Jn,o.memoizedState.cache),uo();break;case 27:case 5:Gt(h);break;case 4:Jt(h,h.stateNode.containerInfo);break;case 10:yi(h,h.type,h.memoizedProps.value);break;case 13:var x=h.memoizedState;if(x!==null)return x.dehydrated!==null?($o(h),h.flags|=128,null):(m&h.child.childLanes)!==0?Pg(o,h,m):($o(h),o=vs(o,h,m),o!==null?o.sibling:null);$o(h);break;case 19:var E=(o.flags&128)!==0;if(x=(m&h.childLanes)!==0,x||(Tu(o,h,m,!1),x=(m&h.childLanes)!==0),E){if(x)return wm(o,h,m);h.flags|=128}if(E=h.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),gt(On,On.current),x)break;return null;case 22:case 23:return h.lanes=0,xg(o,h,m);case 24:yi(h,Jn,o.memoizedState.cache)}return vs(o,h,m)}function Cg(o,h,m){if(o!==null)if(o.memoizedProps!==h.pendingProps)Vn=!0;else{if(!Pm(o,m)&&(h.flags&128)===0)return Vn=!1,Ag(o,h,m);Vn=(o.flags&131072)!==0}else Vn=!1,Fr&&(h.flags&1048576)!==0&&Ch(h,Cu,h.index);switch(h.lanes=0,h.tag){case 16:e:{o=h.pendingProps;var x=h.elementType,E=x._init;if(x=E(x._payload),h.type=x,typeof x=="function")Ph(x)?(o=Nl(x,o),h.tag=1,h=xm(null,h,x,o,m)):(h.tag=0,h=Gf(null,h,x,o,m));else{if(x!=null){if(E=x.$$typeof,E===_e){h.tag=11,h=$f(null,h,x,o,m);break e}else if(E===Ee){h.tag=14,h=_g(null,h,x,o,m);break e}}throw h=It(x)||x,Error(i(306,h,""))}}return h;case 0:return Gf(o,h,h.type,h.pendingProps,m);case 1:return x=h.type,E=Nl(x,h.pendingProps),xm(o,h,x,E,m);case 3:e:{if(Jt(h,h.stateNode.containerInfo),o===null)throw Error(i(387));x=h.pendingProps;var L=h.memoizedState;E=L.element,kh(o,h),Uu(h,x,null,m);var X=h.memoizedState;if(x=X.cache,yi(h,Jn,x),x!==L.cache&&Mh(h,[Jn],m,!0),kl(),x=X.element,L.isDehydrated)if(L={element:x,isDehydrated:!1,cache:X.cache},h.updateQueue.baseState=L,h.memoizedState=L,h.flags&256){h=wg(o,h,x,m);break e}else if(x!==E){E=da(Error(i(424)),h),$s(E),h=wg(o,h,x,m);break e}else{switch(o=h.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(yn=Wo(o.firstChild),aa=h,Fr=!0,Hs=null,lo=!0,m=Ho(h,null,x,m),h.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(uo(),x===E){h=vs(o,h,m);break e}ga(o,h,x,m)}h=h.child}return h;case 26:return Vf(o,h),o===null?(m=Dp(h.type,null,h.pendingProps,null))?h.memoizedState=m:Fr||(m=h.type,o=h.pendingProps,x=vi(jt.current).createElement(m),x[tr]=h,x[sr]=o,sa(x,m,o),mn(x),h.stateNode=x):h.memoizedState=Dp(h.type,o.memoizedProps,h.pendingProps,o.memoizedState),null;case 27:return Gt(h),o===null&&Fr&&(x=h.stateNode=md(h.type,h.pendingProps,jt.current),aa=h,lo=!0,E=yn,Ql(h.type)?(ef=E,yn=Wo(x.firstChild)):yn=E),ga(o,h,h.pendingProps.children,m),Vf(o,h),o===null&&(h.flags|=4194304),h.child;case 5:return o===null&&Fr&&((E=x=yn)&&(x=t0(x,h.type,h.pendingProps,lo),x!==null?(h.stateNode=x,aa=h,yn=Wo(x.firstChild),lo=!1,E=!0):E=!1),E||os(h)),Gt(h),E=h.type,L=h.pendingProps,X=o!==null?o.memoizedProps:null,x=L.children,Yl(E,L)?x=null:X!==null&&Yl(E,X)&&(h.flags|=32),h.memoizedState!==null&&(E=zh(o,h,Lu,null,null,m),q._currentValue=E),Vf(o,h),ga(o,h,x,m),h.child;case 6:return o===null&&Fr&&((o=m=yn)&&(m=_1(m,h.pendingProps,lo),m!==null?(h.stateNode=m,aa=h,yn=null,o=!0):o=!1),o||os(h)),null;case 13:return Pg(o,h,m);case 4:return Jt(h,h.stateNode.containerInfo),x=h.pendingProps,o===null?h.child=vo(h,null,x,m):ga(o,h,x,m),h.child;case 11:return $f(o,h,h.type,h.pendingProps,m);case 7:return ga(o,h,h.pendingProps,m),h.child;case 8:return ga(o,h,h.pendingProps.children,m),h.child;case 12:return ga(o,h,h.pendingProps.children,m),h.child;case 10:return x=h.pendingProps,yi(h,h.type,x.value),ga(o,h,x.children,m),h.child;case 9:return E=h.type._context,x=h.pendingProps.children,Vs(h),E=qn(E),x=x(E),h.flags|=1,ga(o,h,x,m),h.child;case 14:return _g(o,h,h.type,h.pendingProps,m);case 15:return bg(o,h,h.type,h.pendingProps,m);case 19:return wm(o,h,m);case 31:return x=h.pendingProps,m=h.mode,x={mode:x.mode,children:x.children},o===null?(m=Zf(x,m),m.ref=h.ref,h.child=m,m.return=h,h=m):(m=Oa(o.child,x),m.ref=h.ref,h.child=m,m.return=h,h=m),h;case 22:return xg(o,h,m);case 24:return Vs(h),x=qn(Jn),o===null?(E=zf(),E===null&&(E=fn,L=Gs(),E.pooledCache=L,L.refCount++,L!==null&&(E.pooledCacheLanes|=m),E=L),h.memoizedState={parent:x,cache:E},kc(h),yi(h,Jn,E)):((o.lanes&m)!==0&&(kh(o,h),Uu(h,null,null,m),kl()),E=o.memoizedState,L=h.memoizedState,E.parent!==x?(E={parent:x,cache:x},h.memoizedState=E,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=E),yi(h,Jn,x)):(x=L.cache,yi(h,Jn,x),x!==E.cache&&Mh(h,[Jn],m,!0))),ga(o,h,h.pendingProps.children,m),h.child;case 29:throw h.pendingProps}throw Error(i(156,h.tag))}function jl(o){o.flags|=4}function Am(o,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!s(h)){if(h=Un.current,h!==null&&((zr&4194048)===zr?En!==null:(zr&62914560)!==zr&&(zr&536870912)===0||h!==En))throw fo=Rt,Zs;o.flags|=8192}}function sp(o,h){h!==null&&(o.flags|=4),o.flags&16384&&(h=o.tag!==22?it():536870912,o.lanes|=h,Vh|=h)}function zc(o,h){if(!Fr)switch(o.tailMode){case"hidden":h=o.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?h||o.tail===null?o.tail=null:o.tail.sibling=null:x.sibling=null}}function Ln(o){var h=o.alternate!==null&&o.alternate.child===o.child,m=0,x=0;if(h)for(var E=o.child;E!==null;)m|=E.lanes|E.childLanes,x|=E.subtreeFlags&65011712,x|=E.flags&65011712,E.return=o,E=E.sibling;else for(E=o.child;E!==null;)m|=E.lanes|E.childLanes,x|=E.subtreeFlags,x|=E.flags,E.return=o,E=E.sibling;return o.subtreeFlags|=x,o.childLanes=m,h}function Dg(o,h,m){var x=h.pendingProps;switch(Tc(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(h),null;case 1:return Ln(h),null;case 3:return m=h.stateNode,x=null,o!==null&&(x=o.memoizedState.cache),h.memoizedState.cache!==x&&(h.flags|=2048),Li(Jn),wt(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(Gr(h)?jl(h):o===null||o.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,mi())),Ln(h),null;case 26:return m=h.memoizedState,o===null?(jl(h),m!==null?(Ln(h),Am(h,m)):(Ln(h),h.flags&=-16777217)):m?m!==o.memoizedState?(jl(h),Ln(h),Am(h,m)):(Ln(h),h.flags&=-16777217):(o.memoizedProps!==x&&jl(h),Ln(h),h.flags&=-16777217),null;case 27:zt(h),m=jt.current;var E=h.type;if(o!==null&&h.stateNode!=null)o.memoizedProps!==x&&jl(h);else{if(!x){if(h.stateNode===null)throw Error(i(166));return Ln(h),null}o=Et.current,Gr(h)?Uf(h):(o=md(E,x,m),h.stateNode=o,jl(h))}return Ln(h),null;case 5:if(zt(h),m=h.type,o!==null&&h.stateNode!=null)o.memoizedProps!==x&&jl(h);else{if(!x){if(h.stateNode===null)throw Error(i(166));return Ln(h),null}if(o=Et.current,Gr(h))Uf(h);else{switch(E=vi(jt.current),o){case 1:o=E.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:o=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":o=E.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":o=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":o=E.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof x.is=="string"?E.createElement("select",{is:x.is}):E.createElement("select"),x.multiple?o.multiple=!0:x.size&&(o.size=x.size);break;default:o=typeof x.is=="string"?E.createElement(m,{is:x.is}):E.createElement(m)}}o[tr]=h,o[sr]=x;e:for(E=h.child;E!==null;){if(E.tag===5||E.tag===6)o.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===h)break e;for(;E.sibling===null;){if(E.return===null||E.return===h)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}h.stateNode=o;e:switch(sa(o,m,x),m){case"button":case"input":case"select":case"textarea":o=!!x.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&jl(h)}}return Ln(h),h.flags&=-16777217,null;case 6:if(o&&h.stateNode!=null)o.memoizedProps!==x&&jl(h);else{if(typeof x!="string"&&h.stateNode===null)throw Error(i(166));if(o=jt.current,Gr(h)){if(o=h.stateNode,m=h.memoizedProps,x=null,E=aa,E!==null)switch(E.tag){case 27:case 5:x=E.memoizedProps}o[tr]=h,o=!!(o.nodeValue===m||x!==null&&x.suppressHydrationWarning===!0||uy(o.nodeValue,m)),o||os(h)}else o=vi(o).createTextNode(x),o[tr]=h,h.stateNode=o}return Ln(h),null;case 13:if(x=h.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(E=Gr(h),x!==null&&x.dehydrated!==null){if(o===null){if(!E)throw Error(i(318));if(E=h.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(i(317));E[tr]=h}else uo(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Ln(h),E=!1}else E=mi(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=E),E=!0;if(!E)return h.flags&256?(Xi(h),h):(Xi(h),null)}if(Xi(h),(h.flags&128)!==0)return h.lanes=m,h;if(m=x!==null,o=o!==null&&o.memoizedState!==null,m){x=h.child,E=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(E=x.alternate.memoizedState.cachePool.pool);var L=null;x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(L=x.memoizedState.cachePool.pool),L!==E&&(x.flags|=2048)}return m!==o&&m&&(h.child.flags|=8192),sp(h,h.updateQueue),Ln(h),null;case 4:return wt(),o===null&&oy(h.stateNode.containerInfo),Ln(h),null;case 10:return Li(h.type),Ln(h),null;case 19:if(st(On),E=h.memoizedState,E===null)return Ln(h),null;if(x=(h.flags&128)!==0,L=E.rendering,L===null)if(x)zc(E,!1);else{if(wn!==0||o!==null&&(o.flags&128)!==0)for(o=h.child;o!==null;){if(L=Ll(o),L!==null){for(h.flags|=128,zc(E,!1),o=L.updateQueue,h.updateQueue=o,sp(h,o),h.subtreeFlags=0,o=m,m=h.child;m!==null;)If(m,o),m=m.sibling;return gt(On,On.current&1|2),h.child}o=o.sibling}E.tail!==null&&Lr()>nd&&(h.flags|=128,x=!0,zc(E,!1),h.lanes=4194304)}else{if(!x)if(o=Ll(L),o!==null){if(h.flags|=128,x=!0,o=o.updateQueue,h.updateQueue=o,sp(h,o),zc(E,!0),E.tail===null&&E.tailMode==="hidden"&&!L.alternate&&!Fr)return Ln(h),null}else 2*Lr()-E.renderingStartTime>nd&&m!==536870912&&(h.flags|=128,x=!0,zc(E,!1),h.lanes=4194304);E.isBackwards?(L.sibling=h.child,h.child=L):(o=E.last,o!==null?o.sibling=L:h.child=L,E.last=L)}return E.tail!==null?(h=E.tail,E.rendering=h,E.tail=h.sibling,E.renderingStartTime=Lr(),h.sibling=null,o=On.current,gt(On,x?o&1|2:o&1),h):(Ln(h),null);case 22:case 23:return Xi(h),Ou(),x=h.memoizedState!==null,o!==null?o.memoizedState!==null!==x&&(h.flags|=8192):x&&(h.flags|=8192),x?(m&536870912)!==0&&(h.flags&128)===0&&(Ln(h),h.subtreeFlags&6&&(h.flags|=8192)):Ln(h),m=h.updateQueue,m!==null&&sp(h,m.retryQueue),m=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),x=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(x=h.memoizedState.cachePool.pool),x!==m&&(h.flags|=2048),o!==null&&st(ho),null;case 24:return m=null,o!==null&&(m=o.memoizedState.cache),h.memoizedState.cache!==m&&(h.flags|=2048),Li(Jn),Ln(h),null;case 25:return null;case 30:return null}throw Error(i(156,h.tag))}function d1(o,h){switch(Tc(h),h.tag){case 1:return o=h.flags,o&65536?(h.flags=o&-65537|128,h):null;case 3:return Li(Jn),wt(),o=h.flags,(o&65536)!==0&&(o&128)===0?(h.flags=o&-65537|128,h):null;case 26:case 27:case 5:return zt(h),null;case 13:if(Xi(h),o=h.memoizedState,o!==null&&o.dehydrated!==null){if(h.alternate===null)throw Error(i(340));uo()}return o=h.flags,o&65536?(h.flags=o&-65537|128,h):null;case 19:return st(On),null;case 4:return wt(),null;case 10:return Li(h.type),null;case 22:case 23:return Xi(h),Ou(),o!==null&&st(ho),o=h.flags,o&65536?(h.flags=o&-65537|128,h):null;case 24:return Li(Jn),null;case 25:return null;default:return null}}function Mg(o,h){switch(Tc(h),h.tag){case 3:Li(Jn),wt();break;case 26:case 27:case 5:zt(h);break;case 4:wt();break;case 13:Xi(h);break;case 19:st(On);break;case 10:Li(h.type);break;case 22:case 23:Xi(h),Ou(),o!==null&&st(ho);break;case 24:Li(Jn)}}function Qf(o,h){try{var m=h.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var E=x.next;m=E;do{if((m.tag&o)===o){x=void 0;var L=m.create,X=m.inst;x=L(),X.destroy=x}m=m.next}while(m!==E)}}catch(se){dn(h,h.return,se)}}function Js(o,h,m){try{var x=h.updateQueue,E=x!==null?x.lastEffect:null;if(E!==null){var L=E.next;x=L;do{if((x.tag&o)===o){var X=x.inst,se=X.destroy;if(se!==void 0){X.destroy=void 0,E=h;var Ce=m,We=se;try{We()}catch(ut){dn(E,Ce,ut)}}}x=x.next}while(x!==L)}}catch(ut){dn(h,h.return,ut)}}function lp(o){var h=o.updateQueue;if(h!==null){var m=o.stateNode;try{Ff(h,m)}catch(x){dn(o,o.return,x)}}}function Cm(o,h,m){m.props=Nl(o.type,o.memoizedProps),m.state=o.memoizedState;try{m.componentWillUnmount()}catch(x){dn(o,h,x)}}function _s(o,h){try{var m=o.ref;if(m!==null){switch(o.tag){case 26:case 27:case 5:var x=o.stateNode;break;case 30:x=o.stateNode;break;default:x=o.stateNode}typeof m=="function"?o.refCleanup=m(x):m.current=x}}catch(E){dn(o,h,E)}}function Ki(o,h){var m=o.ref,x=o.refCleanup;if(m!==null)if(typeof x=="function")try{x()}catch(E){dn(o,h,E)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(E){dn(o,h,E)}else m.current=null}function Tg(o){var h=o.type,m=o.memoizedProps,x=o.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":m.autoFocus&&x.focus();break e;case"img":m.src?x.src=m.src:m.srcSet&&(x.srcset=m.srcSet)}}catch(E){dn(o,o.return,E)}}function Dm(o,h,m){try{var x=o.stateNode;Qg(x,o.type,m,h),x[sr]=h}catch(E){dn(o,o.return,E)}}function Eg(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Ql(o.type)||o.tag===4}function Mm(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Eg(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Ql(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Tm(o,h,m){var x=o.tag;if(x===5||x===6)o=o.stateNode,h?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(o,h):(h=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,h.appendChild(o),m=m._reactRootContainer,m!=null||h.onclick!==null||(h.onclick=dd));else if(x!==4&&(x===27&&Ql(o.type)&&(m=o.stateNode,h=null),o=o.child,o!==null))for(Tm(o,h,m),o=o.sibling;o!==null;)Tm(o,h,m),o=o.sibling}function up(o,h,m){var x=o.tag;if(x===5||x===6)o=o.stateNode,h?m.insertBefore(o,h):m.appendChild(o);else if(x!==4&&(x===27&&Ql(o.type)&&(m=o.stateNode),o=o.child,o!==null))for(up(o,h,m),o=o.sibling;o!==null;)up(o,h,m),o=o.sibling}function Rg(o){var h=o.stateNode,m=o.memoizedProps;try{for(var x=o.type,E=h.attributes;E.length;)h.removeAttributeNode(E[0]);sa(h,x,m),h[tr]=o,h[sr]=m}catch(L){dn(o,o.return,L)}}var bs=!1,ia=!1,cp=!1,Hh=typeof WeakSet=="function"?WeakSet:Set,Fa=null;function Gn(o,h){if(o=o.containerInfo,pd=Se,o=bh(o),xc(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var x=m.getSelection&&m.getSelection();if(x&&x.rangeCount!==0){m=x.anchorNode;var E=x.anchorOffset,L=x.focusNode;x=x.focusOffset;try{m.nodeType,L.nodeType}catch{m=null;break e}var X=0,se=-1,Ce=-1,We=0,ut=0,mt=o,Qe=null;t:for(;;){for(var Ke;mt!==m||E!==0&&mt.nodeType!==3||(se=X+E),mt!==L||x!==0&&mt.nodeType!==3||(Ce=X+x),mt.nodeType===3&&(X+=mt.nodeValue.length),(Ke=mt.firstChild)!==null;)Qe=mt,mt=Ke;for(;;){if(mt===o)break t;if(Qe===m&&++We===E&&(se=X),Qe===L&&++ut===x&&(Ce=X),(Ke=mt.nextSibling)!==null)break;mt=Qe,Qe=mt.parentNode}mt=Ke}m=se===-1||Ce===-1?null:{start:se,end:Ce}}else m=null}m=m||{start:0,end:0}}else m=null;for(wp={focusedElem:o,selectionRange:m},Se=!1,Fa=h;Fa!==null;)if(h=Fa,o=h.child,(h.subtreeFlags&1024)!==0&&o!==null)o.return=h,Fa=o;else for(;Fa!==null;){switch(h=Fa,L=h.alternate,o=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&L!==null){o=void 0,m=h,E=L.memoizedProps,L=L.memoizedState,x=m.stateNode;try{var dr=Nl(m.type,E,m.elementType===m.type);o=x.getSnapshotBeforeUpdate(dr,L),x.__reactInternalSnapshotBeforeUpdate=o}catch(ur){dn(m,m.return,ur)}}break;case 3:if((o&1024)!==0){if(o=h.stateNode.containerInfo,m=o.nodeType,m===9)Ap(o);else if(m===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Ap(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=h.sibling,o!==null){o.return=h.return,Fa=o;break}Fa=h.return}}function Fc(o,h,m){var x=m.flags;switch(m.tag){case 0:case 11:case 15:Bl(o,m),x&4&&Qf(5,m);break;case 1:if(Bl(o,m),x&4)if(o=m.stateNode,h===null)try{o.componentDidMount()}catch(X){dn(m,m.return,X)}else{var E=Nl(m.type,h.memoizedProps);h=h.memoizedState;try{o.componentDidUpdate(E,h,o.__reactInternalSnapshotBeforeUpdate)}catch(X){dn(m,m.return,X)}}x&64&&lp(m),x&512&&_s(m,m.return);break;case 3:if(Bl(o,m),x&64&&(o=m.updateQueue,o!==null)){if(h=null,m.child!==null)switch(m.child.tag){case 27:case 5:h=m.child.stateNode;break;case 1:h=m.child.stateNode}try{Ff(o,h)}catch(X){dn(m,m.return,X)}}break;case 27:h===null&&x&4&&Rg(m);case 26:case 5:Bl(o,m),h===null&&x&4&&Tg(m),x&512&&_s(m,m.return);break;case 12:Bl(o,m);break;case 13:Bl(o,m),x&4&&Im(o,m),x&64&&(o=m.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(m=Xm.bind(null,m),r0(o,m))));break;case 22:if(x=m.memoizedState!==null||bs,!x){h=h!==null&&h.memoizedState!==null||ia,E=bs;var L=ia;bs=x,(ia=h)&&!L?Bu(o,m,(m.subtreeFlags&8772)!==0):Bl(o,m),bs=E,ia=L}break;case 30:break;default:Bl(o,m)}}function Em(o){var h=o.alternate;h!==null&&(o.alternate=null,Em(h)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(h=o.stateNode,h!==null&&Tt(h)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var vn=null,ii=!1;function _o(o,h,m){for(m=m.child;m!==null;)Rm(o,h,m),m=m.sibling}function Rm(o,h,m){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(fi,m)}catch{}switch(m.tag){case 26:ia||Ki(m,h),_o(o,h,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:ia||Ki(m,h);var x=vn,E=ii;Ql(m.type)&&(vn=m.stateNode,ii=!1),_o(o,h,m),Wu(m.stateNode),vn=x,ii=E;break;case 5:ia||Ki(m,h);case 6:if(x=vn,E=ii,vn=null,_o(o,h,m),vn=x,ii=E,vn!==null)if(ii)try{(vn.nodeType===9?vn.body:vn.nodeName==="HTML"?vn.ownerDocument.body:vn).removeChild(m.stateNode)}catch(L){dn(m,h,L)}else try{vn.removeChild(m.stateNode)}catch(L){dn(m,h,L)}break;case 18:vn!==null&&(ii?(o=vn,hy(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,m.stateNode),Zn(o)):hy(vn,m.stateNode));break;case 4:x=vn,E=ii,vn=m.stateNode.containerInfo,ii=!0,_o(o,h,m),vn=x,ii=E;break;case 0:case 11:case 14:case 15:ia||Js(2,m,h),ia||Js(4,m,h),_o(o,h,m);break;case 1:ia||(Ki(m,h),x=m.stateNode,typeof x.componentWillUnmount=="function"&&Cm(m,h,x)),_o(o,h,m);break;case 21:_o(o,h,m);break;case 22:ia=(x=ia)||m.memoizedState!==null,_o(o,h,m),ia=x;break;default:_o(o,h,m)}}function Im(o,h){if(h.memoizedState===null&&(o=h.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Zn(o)}catch(m){dn(h,h.return,m)}}function Xf(o){switch(o.tag){case 13:case 19:var h=o.stateNode;return h===null&&(h=o.stateNode=new Hh),h;case 22:return o=o.stateNode,h=o._retryCache,h===null&&(h=o._retryCache=new Hh),h;default:throw Error(i(435,o.tag))}}function Kf(o,h){var m=Xf(o);h.forEach(function(x){var E=Km.bind(null,o,x);m.has(x)||(m.add(x),x.then(E,E))})}function Na(o,h){var m=h.deletions;if(m!==null)for(var x=0;x<m.length;x++){var E=m[x],L=o,X=h,se=X;e:for(;se!==null;){switch(se.tag){case 27:if(Ql(se.type)){vn=se.stateNode,ii=!1;break e}break;case 5:vn=se.stateNode,ii=!1;break e;case 3:case 4:vn=se.stateNode.containerInfo,ii=!0;break e}se=se.return}if(vn===null)throw Error(i(160));Rm(L,X,E),vn=null,ii=!1,L=E.alternate,L!==null&&(L.return=null),E.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)Nc(h,o),h=h.sibling}var Ji=null;function Nc(o,h){var m=o.alternate,x=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Na(h,o),oi(o),x&4&&(Js(3,o,o.return),Qf(3,o),Js(5,o,o.return));break;case 1:Na(h,o),oi(o),x&512&&(ia||m===null||Ki(m,m.return)),x&64&&bs&&(o=o.updateQueue,o!==null&&(x=o.callbacks,x!==null&&(m=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=m===null?x:m.concat(x))));break;case 26:var E=Ji;if(Na(h,o),oi(o),x&512&&(ia||m===null||Ki(m,m.return)),x&4){var L=m!==null?m.memoizedState:null;if(x=o.memoizedState,m===null)if(x===null)if(o.stateNode===null){e:{x=o.type,m=o.memoizedProps,E=E.ownerDocument||E;t:switch(x){case"title":L=E.getElementsByTagName("title")[0],(!L||L[Mo]||L[tr]||L.namespaceURI==="http://www.w3.org/2000/svg"||L.hasAttribute("itemprop"))&&(L=E.createElement(x),E.head.insertBefore(L,E.querySelector("head > title"))),sa(L,x,m),L[tr]=o,mn(L),x=L;break e;case"link":var X=l0("link","href",E).get(x+(m.href||""));if(X){for(var se=0;se<X.length;se++)if(L=X[se],L.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&L.getAttribute("rel")===(m.rel==null?null:m.rel)&&L.getAttribute("title")===(m.title==null?null:m.title)&&L.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){X.splice(se,1);break t}}L=E.createElement(x),sa(L,x,m),E.head.appendChild(L);break;case"meta":if(X=l0("meta","content",E).get(x+(m.content||""))){for(se=0;se<X.length;se++)if(L=X[se],L.getAttribute("content")===(m.content==null?null:""+m.content)&&L.getAttribute("name")===(m.name==null?null:m.name)&&L.getAttribute("property")===(m.property==null?null:m.property)&&L.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&L.getAttribute("charset")===(m.charSet==null?null:m.charSet)){X.splice(se,1);break t}}L=E.createElement(x),sa(L,x,m),E.head.appendChild(L);break;default:throw Error(i(468,x))}L[tr]=o,mn(L),x=L}o.stateNode=x}else l(E,o.type,o.stateNode);else o.stateNode=yd(E,x,o.memoizedProps);else L!==x?(L===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):L.count--,x===null?l(E,o.type,o.stateNode):yd(E,x,o.memoizedProps)):x===null&&o.stateNode!==null&&Dm(o,o.memoizedProps,m.memoizedProps)}break;case 27:Na(h,o),oi(o),x&512&&(ia||m===null||Ki(m,m.return)),m!==null&&x&4&&Dm(o,o.memoizedProps,m.memoizedProps);break;case 5:if(Na(h,o),oi(o),x&512&&(ia||m===null||Ki(m,m.return)),o.flags&32){E=o.stateNode;try{Io(E,"")}catch(Ke){dn(o,o.return,Ke)}}x&4&&o.stateNode!=null&&(E=o.memoizedProps,Dm(o,E,m!==null?m.memoizedProps:E)),x&1024&&(cp=!0);break;case 6:if(Na(h,o),oi(o),x&4){if(o.stateNode===null)throw Error(i(162));x=o.memoizedProps,m=o.stateNode;try{m.nodeValue=x}catch(Ke){dn(o,o.return,Ke)}}break;case 3:if(af=null,E=Ji,Ji=Cp(h.containerInfo),Na(h,o),Ji=E,oi(o),x&4&&m!==null&&m.memoizedState.isDehydrated)try{Zn(h.containerInfo)}catch(Ke){dn(o,o.return,Ke)}cp&&(cp=!1,Ig(o));break;case 4:x=Ji,Ji=Cp(o.stateNode.containerInfo),Na(h,o),oi(o),Ji=x;break;case 12:Na(h,o),oi(o);break;case 13:Na(h,o),oi(o),o.child.flags&8192&&o.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(dp=Lr()),x&4&&(x=o.updateQueue,x!==null&&(o.updateQueue=null,Kf(o,x)));break;case 22:E=o.memoizedState!==null;var Ce=m!==null&&m.memoizedState!==null,We=bs,ut=ia;if(bs=We||E,ia=ut||Ce,Na(h,o),ia=ut,bs=We,oi(o),x&8192)e:for(h=o.stateNode,h._visibility=E?h._visibility&-2:h._visibility|1,E&&(m===null||Ce||bs||ia||bo(o)),m=null,h=o;;){if(h.tag===5||h.tag===26){if(m===null){Ce=m=h;try{if(L=Ce.stateNode,E)X=L.style,typeof X.setProperty=="function"?X.setProperty("display","none","important"):X.display="none";else{se=Ce.stateNode;var mt=Ce.memoizedProps.style,Qe=mt!=null&&mt.hasOwnProperty("display")?mt.display:null;se.style.display=Qe==null||typeof Qe=="boolean"?"":(""+Qe).trim()}}catch(Ke){dn(Ce,Ce.return,Ke)}}}else if(h.tag===6){if(m===null){Ce=h;try{Ce.stateNode.nodeValue=E?"":Ce.memoizedProps}catch(Ke){dn(Ce,Ce.return,Ke)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===o)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break e;for(;h.sibling===null;){if(h.return===null||h.return===o)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}x&4&&(x=o.updateQueue,x!==null&&(m=x.retryQueue,m!==null&&(x.retryQueue=null,Kf(o,m))));break;case 19:Na(h,o),oi(o),x&4&&(x=o.updateQueue,x!==null&&(o.updateQueue=null,Kf(o,x)));break;case 30:break;case 21:break;default:Na(h,o),oi(o)}}function oi(o){var h=o.flags;if(h&2){try{for(var m,x=o.return;x!==null;){if(Eg(x)){m=x;break}x=x.return}if(m==null)throw Error(i(160));switch(m.tag){case 27:var E=m.stateNode,L=Mm(o);up(o,L,E);break;case 5:var X=m.stateNode;m.flags&32&&(Io(X,""),m.flags&=-33);var se=Mm(o);up(o,se,X);break;case 3:case 4:var Ce=m.stateNode.containerInfo,We=Mm(o);Tm(o,We,Ce);break;default:throw Error(i(161))}}catch(ut){dn(o,o.return,ut)}o.flags&=-3}h&4096&&(o.flags&=-4097)}function Ig(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var h=o;Ig(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),o=o.sibling}}function Bl(o,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)Fc(o,h.alternate,h),h=h.sibling}function bo(o){for(o=o.child;o!==null;){var h=o;switch(h.tag){case 0:case 11:case 14:case 15:Js(4,h,h.return),bo(h);break;case 1:Ki(h,h.return);var m=h.stateNode;typeof m.componentWillUnmount=="function"&&Cm(h,h.return,m),bo(h);break;case 27:Wu(h.stateNode);case 26:case 5:Ki(h,h.return),bo(h);break;case 22:h.memoizedState===null&&bo(h);break;case 30:bo(h);break;default:bo(h)}o=o.sibling}}function Bu(o,h,m){for(m=m&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var x=h.alternate,E=o,L=h,X=L.flags;switch(L.tag){case 0:case 11:case 15:Bu(E,L,m),Qf(4,L);break;case 1:if(Bu(E,L,m),x=L,E=x.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(We){dn(x,x.return,We)}if(x=L,E=x.updateQueue,E!==null){var se=x.stateNode;try{var Ce=E.shared.hiddenCallbacks;if(Ce!==null)for(E.shared.hiddenCallbacks=null,E=0;E<Ce.length;E++)Oh(Ce[E],se)}catch(We){dn(x,x.return,We)}}m&&X&64&&lp(L),_s(L,L.return);break;case 27:Rg(L);case 26:case 5:Bu(E,L,m),m&&x===null&&X&4&&Tg(L),_s(L,L.return);break;case 12:Bu(E,L,m);break;case 13:Bu(E,L,m),m&&X&4&&Im(E,L);break;case 22:L.memoizedState===null&&Bu(E,L,m),_s(L,L.return);break;case 30:break;default:Bu(E,L,m)}h=h.sibling}}function hp(o,h){var m=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),o=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(o=h.memoizedState.cachePool.pool),o!==m&&(o!=null&&o.refCount++,m!=null&&Tl(m))}function jc(o,h){o=null,h.alternate!==null&&(o=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==o&&(h.refCount++,o!=null&&Tl(o))}function Vo(o,h,m,x){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)km(o,h,m,x),h=h.sibling}function km(o,h,m,x){var E=h.flags;switch(h.tag){case 0:case 11:case 15:Vo(o,h,m,x),E&2048&&Qf(9,h);break;case 1:Vo(o,h,m,x);break;case 3:Vo(o,h,m,x),E&2048&&(o=null,h.alternate!==null&&(o=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==o&&(h.refCount++,o!=null&&Tl(o)));break;case 12:if(E&2048){Vo(o,h,m,x),o=h.stateNode;try{var L=h.memoizedProps,X=L.id,se=L.onPostCommit;typeof se=="function"&&se(X,h.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Ce){dn(h,h.return,Ce)}}else Vo(o,h,m,x);break;case 13:Vo(o,h,m,x);break;case 23:break;case 22:L=h.stateNode,X=h.alternate,h.memoizedState!==null?L._visibility&2?Vo(o,h,m,x):Jf(o,h):L._visibility&2?Vo(o,h,m,x):(L._visibility|=2,Bc(o,h,m,x,(h.subtreeFlags&10256)!==0)),E&2048&&hp(X,h);break;case 24:Vo(o,h,m,x),E&2048&&jc(h.alternate,h);break;default:Vo(o,h,m,x)}}function Bc(o,h,m,x,E){for(E=E&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var L=o,X=h,se=m,Ce=x,We=X.flags;switch(X.tag){case 0:case 11:case 15:Bc(L,X,se,Ce,E),Qf(8,X);break;case 23:break;case 22:var ut=X.stateNode;X.memoizedState!==null?ut._visibility&2?Bc(L,X,se,Ce,E):Jf(L,X):(ut._visibility|=2,Bc(L,X,se,Ce,E)),E&&We&2048&&hp(X.alternate,X);break;case 24:Bc(L,X,se,Ce,E),E&&We&2048&&jc(X.alternate,X);break;default:Bc(L,X,se,Ce,E)}h=h.sibling}}function Jf(o,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var m=o,x=h,E=x.flags;switch(x.tag){case 22:Jf(m,x),E&2048&&hp(x.alternate,x);break;case 24:Jf(m,x),E&2048&&jc(x.alternate,x);break;default:Jf(m,x)}h=h.sibling}}var ed=8192;function $h(o){if(o.subtreeFlags&ed)for(o=o.child;o!==null;)kg(o),o=o.sibling}function kg(o){switch(o.tag){case 26:$h(o),o.flags&ed&&o.memoizedState!==null&&S(Ji,o.memoizedState,o.memoizedProps);break;case 5:$h(o);break;case 3:case 4:var h=Ji;Ji=Cp(o.stateNode.containerInfo),$h(o),Ji=h;break;case 22:o.memoizedState===null&&(h=o.alternate,h!==null&&h.memoizedState!==null?(h=ed,ed=16777216,$h(o),ed=h):$h(o));break;default:$h(o)}}function Ug(o){var h=o.alternate;if(h!==null&&(o=h.child,o!==null)){h.child=null;do h=o.sibling,o.sibling=null,o=h;while(o!==null)}}function el(o){var h=o.deletions;if((o.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var x=h[m];Fa=x,Um(x,o)}Ug(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Og(o),o=o.sibling}function Og(o){switch(o.tag){case 0:case 11:case 15:el(o),o.flags&2048&&Js(9,o,o.return);break;case 3:el(o);break;case 12:el(o);break;case 22:var h=o.stateNode;o.memoizedState!==null&&h._visibility&2&&(o.return===null||o.return.tag!==13)?(h._visibility&=-3,fp(o)):el(o);break;default:el(o)}}function fp(o){var h=o.deletions;if((o.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var x=h[m];Fa=x,Um(x,o)}Ug(o)}for(o=o.child;o!==null;){switch(h=o,h.tag){case 0:case 11:case 15:Js(8,h,h.return),fp(h);break;case 22:m=h.stateNode,m._visibility&2&&(m._visibility&=-3,fp(h));break;default:fp(h)}o=o.sibling}}function Um(o,h){for(;Fa!==null;){var m=Fa;switch(m.tag){case 0:case 11:case 15:Js(8,m,h);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var x=m.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:Tl(m.memoizedState.cache)}if(x=m.child,x!==null)x.return=m,Fa=x;else e:for(m=o;Fa!==null;){x=Fa;var E=x.sibling,L=x.return;if(Em(x),x===m){Fa=null;break e}if(E!==null){E.return=L,Fa=E;break e}Fa=L}}}var p1={getCacheForType:function(o){var h=qn(Jn),m=h.data.get(o);return m===void 0&&(m=o(),h.data.set(o,m)),m}},Lg=typeof WeakMap=="function"?WeakMap:Map,nn=0,fn=null,Cr=null,zr=0,an=0,xo=null,ql=!1,qc=!1,Om=!1,Hl=0,wn=0,$l=0,Hc=0,Lm=0,Go=0,Vh=0,td=null,zi=null,rd=!1,dp=0,nd=1/0,ad=null,qu=null,va=0,Hu=null,$c=null,Gh=0,zm=0,Fm=null,Nm=null,id=0,jm=null;function si(){if((nn&2)!==0&&zr!==0)return zr&-zr;if(Be.T!==null){var o=ls;return o!==0?o:cd()}return Xn()}function oa(){Go===0&&(Go=(zr&536870912)===0||Fr?yt():536870912);var o=Un.current;return o!==null&&(o.flags|=32),Go}function Fi(o,h,m){(o===fn&&(an===2||an===9)||o.cancelPendingCommit!==null)&&(Wh(o,0),So(o,zr,Go,!1)),Oe(o,m),((nn&2)===0||o!==fn)&&(o===fn&&((nn&2)===0&&(Hc|=m),wn===4&&So(o,zr,Go,!1)),xs(o))}function Bm(o,h,m){if((nn&6)!==0)throw Error(i(327));var x=!m&&(h&124)===0&&(h&o.expiredLanes)===0||Ue(o,h),E=x?y1(o,h):Gm(o,h,!0),L=x;do{if(E===0){qc&&!x&&So(o,h,0,!1);break}else{if(m=o.current.alternate,L&&!Hm(m)){E=Gm(o,h,!1),L=!1;continue}if(E===2){if(L=h,o.errorRecoveryDisabledLanes&L)var X=0;else X=o.pendingLanes&-536870913,X=X!==0?X:X&536870912?536870912:0;if(X!==0){h=X;e:{var se=o;E=td;var Ce=se.current.memoizedState.isDehydrated;if(Ce&&(Wh(se,X).flags|=256),X=Gm(se,X,!1),X!==2){if(Om&&!Ce){se.errorRecoveryDisabledLanes|=L,Hc|=L,E=4;break e}L=zi,zi=E,L!==null&&(zi===null?zi=L:zi.push.apply(zi,L))}E=X}if(L=!1,E!==2)continue}}if(E===1){Wh(o,0),So(o,h,0,!0);break}e:{switch(x=o,L=E,L){case 0:case 1:throw Error(i(345));case 4:if((h&4194048)!==h)break;case 6:So(x,h,Go,!ql);break e;case 2:zi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((h&62914560)===h&&(E=dp+300-Lr(),10<E)){if(So(x,h,Go,!ql),Ve(x,0,!0)!==0)break e;x.timeoutHandle=cy(qm.bind(null,x,m,zi,ad,rd,h,Go,Hc,Vh,ql,L,2,-0,0),E);break e}qm(x,m,zi,ad,rd,h,Go,Hc,Vh,ql,L,0,-0,0)}}break}while(!0);xs(o)}function qm(o,h,m,x,E,L,X,se,Ce,We,ut,mt,Qe,Ke){if(o.timeoutHandle=-1,mt=h.subtreeFlags,(mt&8192||(mt&16785408)===16785408)&&(f={stylesheets:null,count:0,unsuspend:v},kg(h),mt=P(),mt!==null)){o.cancelPendingCommit=mt(Vl.bind(null,o,h,L,m,x,E,X,se,Ce,ut,1,Qe,Ke)),So(o,L,X,!We);return}Vl(o,h,L,m,x,E,X,se,Ce)}function Hm(o){for(var h=o;;){var m=h.tag;if((m===0||m===11||m===15)&&h.flags&16384&&(m=h.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var x=0;x<m.length;x++){var E=m[x],L=E.getSnapshot;E=E.value;try{if(!Za(L(),E))return!1}catch{return!1}}if(m=h.child,h.subtreeFlags&16384&&m!==null)m.return=h,h=m;else{if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function So(o,h,m,x){h&=~Lm,h&=~Hc,o.suspendedLanes|=h,o.pingedLanes&=~h,x&&(o.warmLanes|=h),x=o.expirationTimes;for(var E=h;0<E;){var L=31-Re(E),X=1<<L;x[L]=-1,E&=~X}m!==0&&br(o,m,h)}function od(){return(nn&6)===0?(Xh(0),!1):!0}function $m(){if(Cr!==null){if(an===0)var o=Cr.return;else o=Cr,Xa=ss=null,zu(o),jr=null,gn=0,o=Cr;for(;o!==null;)Mg(o.alternate,o),o=o.return;Cr=null}}function Wh(o,h){var m=o.timeoutHandle;m!==-1&&(o.timeoutHandle=-1,Kg(m)),m=o.cancelPendingCommit,m!==null&&(o.cancelPendingCommit=null,m()),$m(),fn=o,Cr=m=Oa(o.current,null),zr=h,an=0,xo=null,ql=!1,qc=Ue(o,h),Om=!1,Vh=Go=Lm=Hc=$l=wn=0,zi=td=null,rd=!1,(h&8)!==0&&(h|=h&32);var x=o.entangledLanes;if(x!==0)for(o=o.entanglements,x&=h;0<x;){var E=31-Re(x),L=1<<E;h|=o[E],x&=~L}return Hl=h,Ml(),m}function zg(o,h){wr=null,Be.H=ya,h===Iu||h===ei?(h=Il(),an=3):h===Zs?(h=Il(),an=4):an=h===vg?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,xo=h,Cr===null&&(wn=1,jh(o,da(h,o.current)))}function Fg(){var o=Be.H;return Be.H=ya,o===null?ya:o}function Ng(){var o=Be.A;return Be.A=p1,o}function Vm(){wn=4,ql||(zr&4194048)!==zr&&Un.current!==null||(qc=!0),($l&134217727)===0&&(Hc&134217727)===0||fn===null||So(fn,zr,Go,!1)}function Gm(o,h,m){var x=nn;nn|=2;var E=Fg(),L=Ng();(fn!==o||zr!==h)&&(ad=null,Wh(o,h)),h=!1;var X=wn;e:do try{if(an!==0&&Cr!==null){var se=Cr,Ce=xo;switch(an){case 8:$m(),X=6;break e;case 3:case 2:case 9:case 6:Un.current===null&&(h=!0);var We=an;if(an=0,xo=null,Vc(o,se,Ce,We),m&&qc){X=0;break e}break;default:We=an,an=0,xo=null,Vc(o,se,Ce,We)}}m1(),X=wn;break}catch(ut){zg(o,ut)}while(!0);return h&&o.shellSuspendCounter++,Xa=ss=null,nn=x,Be.H=E,Be.A=L,Cr===null&&(fn=null,zr=0,Ml()),X}function m1(){for(;Cr!==null;)jg(Cr)}function y1(o,h){var m=nn;nn|=2;var x=Fg(),E=Ng();fn!==o||zr!==h?(ad=null,nd=Lr()+500,Wh(o,h)):qc=Ue(o,h);e:do try{if(an!==0&&Cr!==null){h=Cr;var L=xo;t:switch(an){case 1:an=0,xo=null,Vc(o,h,L,1);break;case 2:case 9:if(Eh(L)){an=0,xo=null,Bg(h);break}h=function(){an!==2&&an!==9||fn!==o||(an=7),xs(o)},L.then(h,h);break e;case 3:an=7;break e;case 4:an=5;break e;case 7:Eh(L)?(an=0,xo=null,Bg(h)):(an=0,xo=null,Vc(o,h,L,7));break;case 5:var X=null;switch(Cr.tag){case 26:X=Cr.memoizedState;case 5:case 27:var se=Cr;if(!X||s(X)){an=0,xo=null;var Ce=se.sibling;if(Ce!==null)Cr=Ce;else{var We=se.return;We!==null?(Cr=We,Zh(We)):Cr=null}break t}}an=0,xo=null,Vc(o,h,L,5);break;case 6:an=0,xo=null,Vc(o,h,L,6);break;case 8:$m(),wn=6;break e;default:throw Error(i(462))}}g1();break}catch(ut){zg(o,ut)}while(!0);return Xa=ss=null,Be.H=x,Be.A=E,nn=m,Cr!==null?0:(fn=null,zr=0,Ml(),wn)}function g1(){for(;Cr!==null&&!Sr();)jg(Cr)}function jg(o){var h=Cg(o.alternate,o,Hl);o.memoizedProps=o.pendingProps,h===null?Zh(o):Cr=h}function Bg(o){var h=o,m=h.alternate;switch(h.tag){case 15:case 0:h=bm(m,h,h.pendingProps,h.type,void 0,zr);break;case 11:h=bm(m,h,h.pendingProps,h.type.render,h.ref,zr);break;case 5:zu(h);default:Mg(m,h),h=Cr=If(h,Hl),h=Cg(m,h,Hl)}o.memoizedProps=o.pendingProps,h===null?Zh(o):Cr=h}function Vc(o,h,m,x){Xa=ss=null,zu(h),jr=null,gn=0;var E=h.return;try{if(Bh(o,E,h,m,zr)){wn=1,jh(o,da(m,o.current)),Cr=null;return}}catch(L){if(E!==null)throw Cr=E,L;wn=1,jh(o,da(m,o.current)),Cr=null;return}h.flags&32768?(Fr||x===1?o=!0:qc||(zr&536870912)!==0?o=!1:(ql=o=!0,(x===2||x===9||x===3||x===6)&&(x=Un.current,x!==null&&x.tag===13&&(x.flags|=16384))),Wm(h,o)):Zh(h)}function Zh(o){var h=o;do{if((h.flags&32768)!==0){Wm(h,ql);return}o=h.return;var m=Dg(h.alternate,h,Hl);if(m!==null){Cr=m;return}if(h=h.sibling,h!==null){Cr=h;return}Cr=h=o}while(h!==null);wn===0&&(wn=5)}function Wm(o,h){do{var m=d1(o.alternate,o);if(m!==null){m.flags&=32767,Cr=m;return}if(m=o.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!h&&(o=o.sibling,o!==null)){Cr=o;return}Cr=o=m}while(o!==null);wn=6,Cr=null}function Vl(o,h,m,x,E,L,X,se,Ce){o.cancelPendingCommit=null;do pp();while(va!==0);if((nn&6)!==0)throw Error(i(327));if(h!==null){if(h===o.current)throw Error(i(177));if(L=h.lanes|h.childLanes,L|=Dl,ir(o,m,L,X,se,Ce),o===fn&&(Cr=fn=null,zr=0),$c=h,Hu=o,Gh=m,zm=L,Fm=E,Nm=x,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,v1(ba,function(){return qg(),null})):(o.callbackNode=null,o.callbackPriority=0),x=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||x){x=Be.T,Be.T=null,E=ct.p,ct.p=2,X=nn,nn|=4;try{Gn(o,h,m)}finally{nn=X,ct.p=E,Be.T=x}}va=1,Yh(),Gc(),sd()}}function Yh(){if(va===1){va=0;var o=Hu,h=$c,m=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||m){m=Be.T,Be.T=null;var x=ct.p;ct.p=2;var E=nn;nn|=4;try{Nc(h,o);var L=wp,X=bh(o.containerInfo),se=L.focusedElem,Ce=L.selectionRange;if(X!==se&&se&&se.ownerDocument&&Ir(se.ownerDocument.documentElement,se)){if(Ce!==null&&xc(se)){var We=Ce.start,ut=Ce.end;if(ut===void 0&&(ut=We),"selectionStart"in se)se.selectionStart=We,se.selectionEnd=Math.min(ut,se.value.length);else{var mt=se.ownerDocument||document,Qe=mt&&mt.defaultView||window;if(Qe.getSelection){var Ke=Qe.getSelection(),dr=se.textContent.length,ur=Math.min(Ce.start,dr),ln=Ce.end===void 0?ur:Math.min(Ce.end,dr);!Ke.extend&&ur>ln&&(X=ln,ln=ur,ur=X);var Ne=zo(se,ur),ze=zo(se,ln);if(Ne&&ze&&(Ke.rangeCount!==1||Ke.anchorNode!==Ne.node||Ke.anchorOffset!==Ne.offset||Ke.focusNode!==ze.node||Ke.focusOffset!==ze.offset)){var qe=mt.createRange();qe.setStart(Ne.node,Ne.offset),Ke.removeAllRanges(),ur>ln?(Ke.addRange(qe),Ke.extend(ze.node,ze.offset)):(qe.setEnd(ze.node,ze.offset),Ke.addRange(qe))}}}}for(mt=[],Ke=se;Ke=Ke.parentNode;)Ke.nodeType===1&&mt.push({element:Ke,left:Ke.scrollLeft,top:Ke.scrollTop});for(typeof se.focus=="function"&&se.focus(),se=0;se<mt.length;se++){var pt=mt[se];pt.element.scrollLeft=pt.left,pt.element.scrollTop=pt.top}}Se=!!pd,wp=pd=null}finally{nn=E,ct.p=x,Be.T=m}}o.current=h,va=2}}function Gc(){if(va===2){va=0;var o=Hu,h=$c,m=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||m){m=Be.T,Be.T=null;var x=ct.p;ct.p=2;var E=nn;nn|=4;try{Fc(o,h.alternate,h)}finally{nn=E,ct.p=x,Be.T=m}}va=3}}function sd(){if(va===4||va===3){va=0,Rr();var o=Hu,h=$c,m=Gh,x=Nm;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?va=5:(va=0,$c=Hu=null,ld(o,o.pendingLanes));var E=o.pendingLanes;if(E===0&&(qu=null),Br(m),h=h.stateNode,An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(fi,h,void 0,(h.current.flags&128)===128)}catch{}if(x!==null){h=Be.T,E=ct.p,ct.p=2,Be.T=null;try{for(var L=o.onRecoverableError,X=0;X<x.length;X++){var se=x[X];L(se.value,{componentStack:se.stack})}}finally{Be.T=h,ct.p=E}}(Gh&3)!==0&&pp(),xs(o),E=o.pendingLanes,(m&4194090)!==0&&(E&42)!==0?o===jm?id++:(id=0,jm=o):id=0,Xh(0)}}function ld(o,h){(o.pooledCacheLanes&=h)===0&&(h=o.pooledCache,h!=null&&(o.pooledCache=null,Tl(h)))}function pp(o){return Yh(),Gc(),sd(),qg()}function qg(){if(va!==5)return!1;var o=Hu,h=zm;zm=0;var m=Br(Gh),x=Be.T,E=ct.p;try{ct.p=32>m?32:m,Be.T=null,m=Fm,Fm=null;var L=Hu,X=Gh;if(va=0,$c=Hu=null,Gh=0,(nn&6)!==0)throw Error(i(331));var se=nn;if(nn|=4,Og(L.current),km(L,L.current,X,m),nn=se,Xh(0,!1),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(fi,L)}catch{}return!0}finally{ct.p=E,Be.T=x,ld(o,h)}}function Zm(o,h,m){h=da(m,h),h=Hf(o.stateNode,h,2),o=us(o,h,2),o!==null&&(Oe(o,2),xs(o))}function dn(o,h,m){if(o.tag===3)Zm(o,o,m);else for(;h!==null;){if(h.tag===3){Zm(h,o,m);break}else if(h.tag===1){var x=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(qu===null||!qu.has(x))){o=da(m,o),m=vm(2),x=us(h,m,2),x!==null&&(_m(m,x,h,o),Oe(x,2),xs(x));break}}h=h.return}}function Ym(o,h,m){var x=o.pingCache;if(x===null){x=o.pingCache=new Lg;var E=new Set;x.set(h,E)}else E=x.get(h),E===void 0&&(E=new Set,x.set(h,E));E.has(m)||(Om=!0,E.add(m),o=Hg.bind(null,o,h,m),h.then(o,o))}function Hg(o,h,m){var x=o.pingCache;x!==null&&x.delete(h),o.pingedLanes|=o.suspendedLanes&m,o.warmLanes&=~m,fn===o&&(zr&m)===m&&(wn===4||wn===3&&(zr&62914560)===zr&&300>Lr()-dp?(nn&2)===0&&Wh(o,0):Lm|=m,Vh===zr&&(Vh=0)),xs(o)}function Qm(o,h){h===0&&(h=it()),o=Ii(o,h),o!==null&&(Oe(o,h),xs(o))}function Xm(o){var h=o.memoizedState,m=0;h!==null&&(m=h.retryLane),Qm(o,m)}function Km(o,h){var m=0;switch(o.tag){case 13:var x=o.stateNode,E=o.memoizedState;E!==null&&(m=E.retryLane);break;case 19:x=o.stateNode;break;case 22:x=o.stateNode._retryCache;break;default:throw Error(i(314))}x!==null&&x.delete(h),Qm(o,m)}function v1(o,h){return $t(o,h)}var ud=null,Qh=null,Jm=!1,mp=!1,ey=!1,Wc=0;function xs(o){o!==Qh&&o.next===null&&(Qh===null?ud=Qh=o:Qh=Qh.next=o),mp=!0,Jm||(Jm=!0,gp())}function Xh(o,h){if(!ey&&mp){ey=!0;do for(var m=!1,x=ud;x!==null;){if(o!==0){var E=x.pendingLanes;if(E===0)var L=0;else{var X=x.suspendedLanes,se=x.pingedLanes;L=(1<<31-Re(42|o)+1)-1,L&=E&~(X&~se),L=L&201326741?L&201326741|1:L?L|2:0}L!==0&&(m=!0,$g(x,L))}else L=zr,L=Ve(x,x===fn?L:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(L&3)===0||Ue(x,L)||(m=!0,$g(x,L));x=x.next}while(m);ey=!1}}function Gl(){Wl()}function Wl(){mp=Jm=!1;var o=0;Wc!==0&&(Xg()&&(o=Wc),Wc=0);for(var h=Lr(),m=null,x=ud;x!==null;){var E=x.next,L=ty(x,h);L===0?(x.next=null,m===null?ud=E:m.next=E,E===null&&(Qh=m)):(m=x,(o!==0||(L&3)!==0)&&(mp=!0)),x=E}Xh(o)}function ty(o,h){for(var m=o.suspendedLanes,x=o.pingedLanes,E=o.expirationTimes,L=o.pendingLanes&-62914561;0<L;){var X=31-Re(L),se=1<<X,Ce=E[X];Ce===-1?((se&m)===0||(se&x)!==0)&&(E[X]=Je(se,h)):Ce<=h&&(o.expiredLanes|=se),L&=~se}if(h=fn,m=zr,m=Ve(o,o===h?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),x=o.callbackNode,m===0||o===h&&(an===2||an===9)||o.cancelPendingCommit!==null)return x!==null&&x!==null&&Ot(x),o.callbackNode=null,o.callbackPriority=0;if((m&3)===0||Ue(o,m)){if(h=m&-m,h===o.callbackPriority)return h;switch(x!==null&&Ot(x),Br(m)){case 2:case 8:m=Va;break;case 32:m=ba;break;case 268435456:m=Mi;break;default:m=ba}return x=yp.bind(null,o),m=$t(m,x),o.callbackPriority=h,o.callbackNode=m,h}return x!==null&&x!==null&&Ot(x),o.callbackPriority=2,o.callbackNode=null,2}function yp(o,h){if(va!==0&&va!==5)return o.callbackNode=null,o.callbackPriority=0,null;var m=o.callbackNode;if(pp()&&o.callbackNode!==m)return null;var x=zr;return x=Ve(o,o===fn?x:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),x===0?null:(Bm(o,x,h),ty(o,Lr()),o.callbackNode!=null&&o.callbackNode===m?yp.bind(null,o):null)}function $g(o,h){if(pp())return null;Bm(o,h,!0)}function gp(){e0(function(){(nn&6)!==0?$t(Qn,Gl):Wl()})}function cd(){return Wc===0&&(Wc=yt()),Wc}function Vg(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:_r(""+o)}function vp(o,h){var m=h.ownerDocument.createElement("input");return m.name=h.name,m.value=h.value,o.id&&m.setAttribute("form",o.id),h.parentNode.insertBefore(m,h),o=new FormData(o),m.parentNode.removeChild(m),o}function ry(o,h,m,x,E){if(h==="submit"&&m&&m.stateNode===E){var L=Vg((E[sr]||null).action),X=x.submitter;X&&(h=(h=X[sr]||null)?Vg(h.formAction):X.getAttribute("formAction"),h!==null&&(L=h,X=null));var se=new Ei("action","action",null,x,E);o.push({event:se,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(Wc!==0){var Ce=X?vp(E,X):new FormData(E);rn(m,{pending:!0,data:Ce,method:E.method,action:L},null,Ce)}}else typeof L=="function"&&(se.preventDefault(),Ce=X?vp(E,X):new FormData(E),rn(m,{pending:!0,data:Ce,method:E.method,action:L},L,Ce))},currentTarget:E}]})}}for(var $u=0;$u<Sh.length;$u++){var _p=Sh[$u],Gg=_p.toLowerCase(),ny=_p[0].toUpperCase()+_p.slice(1);Yi(Gg,"on"+ny)}Yi(Sc,"onAnimationEnd"),Yi(wc,"onAnimationIteration"),Yi(Pc,"onAnimationStart"),Yi("dblclick","onDoubleClick"),Yi("focusin","onFocus"),Yi("focusout","onBlur"),Yi(Ef,"onTransitionRun"),Yi(Al,"onTransitionStart"),Yi(Ac,"onTransitionCancel"),Yi(Cl,"onTransitionEnd"),Ko("onMouseEnter",["mouseout","mouseover"]),Ko("onMouseLeave",["mouseout","mouseover"]),Ko("onPointerEnter",["pointerout","pointerover"]),Ko("onPointerLeave",["pointerout","pointerover"]),di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),di("onBeforeInput",["compositionend","keypress","textInput","paste"]),di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kh));function ay(o,h){h=(h&4)!==0;for(var m=0;m<o.length;m++){var x=o[m],E=x.event;x=x.listeners;e:{var L=void 0;if(h)for(var X=x.length-1;0<=X;X--){var se=x[X],Ce=se.instance,We=se.currentTarget;if(se=se.listener,Ce!==L&&E.isPropagationStopped())break e;L=se,E.currentTarget=We;try{L(E)}catch(ut){Bf(ut)}E.currentTarget=null,L=Ce}else for(X=0;X<x.length;X++){if(se=x[X],Ce=se.instance,We=se.currentTarget,se=se.listener,Ce!==L&&E.isPropagationStopped())break e;L=se,E.currentTarget=We;try{L(E)}catch(ut){Bf(ut)}E.currentTarget=null,L=Ce}}}}function Ur(o,h){var m=h[vt];m===void 0&&(m=h[vt]=new Set);var x=o+"__bubble";m.has(x)||(Wg(h,o,2,!1),m.add(x))}function iy(o,h,m){var x=0;h&&(x|=4),Wg(m,o,x,h)}var hd="_reactListening"+Math.random().toString(36).slice(2);function oy(o){if(!o[hd]){o[hd]=!0,yr.forEach(function(m){m!=="selectionchange"&&(bp.has(m)||iy(m,!1,o),iy(m,!0,o))});var h=o.nodeType===9?o:o.ownerDocument;h===null||h[hd]||(h[hd]=!0,iy("selectionchange",!1,h))}}function Wg(o,h,m,x){switch(Mt(h)){case 2:var E=De;break;case 8:E=Ge;break;default:E=Xe}m=E.bind(null,h,m,o),E=void 0,!Pa||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(E=!0),x?E!==void 0?o.addEventListener(h,m,{capture:!0,passive:E}):o.addEventListener(h,m,!0):E!==void 0?o.addEventListener(h,m,{passive:E}):o.addEventListener(h,m,!1)}function sy(o,h,m,x,E){var L=x;if((h&1)===0&&(h&2)===0&&x!==null)e:for(;;){if(x===null)return;var X=x.tag;if(X===3||X===4){var se=x.stateNode.containerInfo;if(se===E)break;if(X===4)for(X=x.return;X!==null;){var Ce=X.tag;if((Ce===3||Ce===4)&&X.stateNode.containerInfo===E)return;X=X.return}for(;se!==null;){if(X=mr(se),X===null)return;if(Ce=X.tag,Ce===5||Ce===6||Ce===26||Ce===27){x=L=X;continue e}se=se.parentNode}}x=x.return}Bn(function(){var We=L,ut=du(m),mt=[];e:{var Qe=Ri.get(o);if(Qe!==void 0){var Ke=Ei,dr=o;switch(o){case"keypress":if(lr(m)===0)break e;case"keydown":case"keyup":Ke=pc;break;case"focusin":dr="focus",Ke=gl;break;case"focusout":dr="blur",Ke=gl;break;case"beforeblur":case"afterblur":Ke=gl;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ke=cc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ke=fa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ke=hm;break;case Sc:case wc:case Pc:Ke=kn;break;case Cl:Ke=fm;break;case"scroll":case"scrollend":Ke=_f;break;case"wheel":Ke=vh;break;case"copy":case"cut":case"paste":Ke=hc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ke=xf;break;case"toggle":case"beforetoggle":Ke=bl}var ur=(h&4)!==0,ln=!ur&&(o==="scroll"||o==="scrollend"),Ne=ur?Qe!==null?Qe+"Capture":null:Qe;ur=[];for(var ze=We,qe;ze!==null;){var pt=ze;if(qe=pt.stateNode,pt=pt.tag,pt!==5&&pt!==26&&pt!==27||qe===null||Ne===null||(pt=Nr(ze,Ne),pt!=null&&ur.push(fd(ze,pt,qe))),ln)break;ze=ze.return}0<ur.length&&(Qe=new Ke(Qe,dr,null,m,ut),mt.push({event:Qe,listeners:ur}))}}if((h&7)===0){e:{if(Qe=o==="mouseover"||o==="pointerover",Ke=o==="mouseout"||o==="pointerout",Qe&&m!==es&&(dr=m.relatedTarget||m.fromElement)&&(mr(dr)||dr[pn]))break e;if((Ke||Qe)&&(Qe=ut.window===ut?ut:(Qe=ut.ownerDocument)?Qe.defaultView||Qe.parentWindow:window,Ke?(dr=m.relatedTarget||m.toElement,Ke=We,dr=dr?mr(dr):null,dr!==null&&(ln=y(dr),ur=dr.tag,dr!==ln||ur!==5&&ur!==27&&ur!==6)&&(dr=null)):(Ke=null,dr=We),Ke!==dr)){if(ur=cc,pt="onMouseLeave",Ne="onMouseEnter",ze="mouse",(o==="pointerout"||o==="pointerover")&&(ur=xf,pt="onPointerLeave",Ne="onPointerEnter",ze="pointer"),ln=Ke==null?Qe:jn(Ke),qe=dr==null?Qe:jn(dr),Qe=new ur(pt,ze+"leave",Ke,m,ut),Qe.target=ln,Qe.relatedTarget=qe,pt=null,mr(ut)===We&&(ur=new ur(Ne,ze+"enter",dr,m,ut),ur.target=qe,ur.relatedTarget=ln,pt=ur),ln=pt,Ke&&dr)t:{for(ur=Ke,Ne=dr,ze=0,qe=ur;qe;qe=Vu(qe))ze++;for(qe=0,pt=Ne;pt;pt=Vu(pt))qe++;for(;0<ze-qe;)ur=Vu(ur),ze--;for(;0<qe-ze;)Ne=Vu(Ne),qe--;for(;ze--;){if(ur===Ne||Ne!==null&&ur===Ne.alternate)break t;ur=Vu(ur),Ne=Vu(Ne)}ur=null}else ur=null;Ke!==null&&Zl(mt,Qe,Ke,ur,!1),dr!==null&&ln!==null&&Zl(mt,ln,dr,ur,!0)}}e:{if(Qe=We?jn(We):window,Ke=Qe.nodeName&&Qe.nodeName.toLowerCase(),Ke==="select"||Ke==="input"&&Qe.type==="file")var Wt=Df;else if(Qd(Qe))if(zs)Wt=ep;else{Wt=mm;var Er=Kd}else Ke=Qe.nodeName,!Ke||Ke.toLowerCase()!=="input"||Qe.type!=="checkbox"&&Qe.type!=="radio"?We&&ko(We.elementType)&&(Wt=Df):Wt=Jd;if(Wt&&(Wt=Wt(o,We))){Cf(mt,Wt,m,ut);break e}Er&&Er(o,Qe,We),o==="focusout"&&We&&Qe.type==="number"&&We.memoizedProps.value!=null&&uc(Qe,"number",Qe.value)}switch(Er=We?jn(We):window,o){case"focusin":(Qd(Er)||Er.contentEditable==="true")&&(Fs=Er,rs=We,wl=null);break;case"focusout":wl=rs=Fs=null;break;case"mousedown":Tf=!0;break;case"contextmenu":case"mouseup":case"dragend":Tf=!1,rp(mt,m,ut);break;case"selectionchange":if(tp)break;case"keydown":case"keyup":rp(mt,m,ut)}var nr;if(yu)e:{switch(o){case"compositionstart":var hr="onCompositionStart";break e;case"compositionend":hr="onCompositionEnd";break e;case"compositionupdate":hr="onCompositionUpdate";break e}hr=void 0}else _u?Zd(o,m)&&(hr="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(hr="onCompositionStart");hr&&(mc&&m.locale!=="ko"&&(_u||hr!=="onCompositionStart"?hr==="onCompositionEnd"&&_u&&(nr=er()):(Mn=ut,Xr="value"in Mn?Mn.value:Mn.textContent,_u=!0)),Er=xp(We,hr),0<Er.length&&(hr=new Wd(hr,o,null,m,ut),mt.push({event:hr,listeners:Er}),nr?hr.data=nr:(nr=yc(m),nr!==null&&(hr.data=nr)))),(nr=pm?xl(o,m):Yd(o,m))&&(hr=xp(We,"onBeforeInput"),0<hr.length&&(Er=new Wd("onBeforeInput","beforeinput",null,m,ut),mt.push({event:Er,listeners:hr}),Er.data=nr)),ry(mt,o,We,m,ut)}ay(mt,h)})}function fd(o,h,m){return{instance:o,listener:h,currentTarget:m}}function xp(o,h){for(var m=h+"Capture",x=[];o!==null;){var E=o,L=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||L===null||(E=Nr(o,m),E!=null&&x.unshift(fd(o,E,L)),E=Nr(o,h),E!=null&&x.push(fd(o,E,L))),o.tag===3)return x;o=o.return}return[]}function Vu(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function Zl(o,h,m,x,E){for(var L=h._reactName,X=[];m!==null&&m!==x;){var se=m,Ce=se.alternate,We=se.stateNode;if(se=se.tag,Ce!==null&&Ce===x)break;se!==5&&se!==26&&se!==27||We===null||(Ce=We,E?(We=Nr(m,L),We!=null&&X.unshift(fd(m,We,Ce))):E||(We=Nr(m,L),We!=null&&X.push(fd(m,We,Ce)))),m=m.return}X.length!==0&&o.push({event:h,listeners:X})}var Zg=/\r\n?/g,Yg=/\u0000|\uFFFD/g;function ly(o){return(typeof o=="string"?o:""+o).replace(Zg,`
`).replace(Yg,"")}function uy(o,h){return h=ly(h),ly(o)===h}function dd(){}function Jr(o,h,m,x,E,L){switch(m){case"children":typeof x=="string"?h==="body"||h==="textarea"&&x===""||Io(o,x):(typeof x=="number"||typeof x=="bigint")&&h!=="body"&&Io(o,""+x);break;case"className":qr(o,"class",x);break;case"tabIndex":qr(o,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":qr(o,m,x);break;case"style":ks(o,x,L);break;case"data":if(h!=="object"){qr(o,"data",x);break}case"src":case"href":if(x===""&&(h!=="a"||m!=="href")){o.removeAttribute(m);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){o.removeAttribute(m);break}x=_r(""+x),o.setAttribute(m,x);break;case"action":case"formAction":if(typeof x=="function"){o.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof L=="function"&&(m==="formAction"?(h!=="input"&&Jr(o,h,"name",E.name,E,null),Jr(o,h,"formEncType",E.formEncType,E,null),Jr(o,h,"formMethod",E.formMethod,E,null),Jr(o,h,"formTarget",E.formTarget,E,null)):(Jr(o,h,"encType",E.encType,E,null),Jr(o,h,"method",E.method,E,null),Jr(o,h,"target",E.target,E,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){o.removeAttribute(m);break}x=_r(""+x),o.setAttribute(m,x);break;case"onClick":x!=null&&(o.onclick=dd);break;case"onScroll":x!=null&&Ur("scroll",o);break;case"onScrollEnd":x!=null&&Ur("scrollend",o);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(i(61));if(m=x.__html,m!=null){if(E.children!=null)throw Error(i(60));o.innerHTML=m}}break;case"multiple":o.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":o.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){o.removeAttribute("xlink:href");break}m=_r(""+x),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?o.setAttribute(m,""+x):o.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?o.setAttribute(m,""):o.removeAttribute(m);break;case"capture":case"download":x===!0?o.setAttribute(m,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?o.setAttribute(m,x):o.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?o.setAttribute(m,x):o.removeAttribute(m);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?o.removeAttribute(m):o.setAttribute(m,x);break;case"popover":Ur("beforetoggle",o),Ur("toggle",o),xa(o,"popover",x);break;case"xlinkActuate":Eo(o,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":Eo(o,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":Eo(o,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":Eo(o,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":Eo(o,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":Eo(o,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":Eo(o,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":Eo(o,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":Eo(o,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":xa(o,"is",x);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Jo.get(m)||m,xa(o,m,x))}}function Sp(o,h,m,x,E,L){switch(m){case"style":ks(o,x,L);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(i(61));if(m=x.__html,m!=null){if(E.children!=null)throw Error(i(60));o.innerHTML=m}}break;case"children":typeof x=="string"?Io(o,x):(typeof x=="number"||typeof x=="bigint")&&Io(o,""+x);break;case"onScroll":x!=null&&Ur("scroll",o);break;case"onScrollEnd":x!=null&&Ur("scrollend",o);break;case"onClick":x!=null&&(o.onclick=dd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oc.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(E=m.endsWith("Capture"),h=m.slice(2,E?m.length-7:void 0),L=o[sr]||null,L=L!=null?L[m]:null,typeof L=="function"&&o.removeEventListener(h,L,E),typeof x=="function")){typeof L!="function"&&L!==null&&(m in o?o[m]=null:o.hasAttribute(m)&&o.removeAttribute(m)),o.addEventListener(h,x,E);break e}m in o?o[m]=x:x===!0?o.setAttribute(m,""):xa(o,m,x)}}}function sa(o,h,m){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ur("error",o),Ur("load",o);var x=!1,E=!1,L;for(L in m)if(m.hasOwnProperty(L)){var X=m[L];if(X!=null)switch(L){case"src":x=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,h));default:Jr(o,h,L,X,m,null)}}E&&Jr(o,h,"srcSet",m.srcSet,m,null),x&&Jr(o,h,"src",m.src,m,null);return;case"input":Ur("invalid",o);var se=L=X=E=null,Ce=null,We=null;for(x in m)if(m.hasOwnProperty(x)){var ut=m[x];if(ut!=null)switch(x){case"name":E=ut;break;case"type":X=ut;break;case"checked":Ce=ut;break;case"defaultChecked":We=ut;break;case"value":L=ut;break;case"defaultValue":se=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(i(137,h));break;default:Jr(o,h,x,ut,m,null)}}fl(o,L,se,Ce,We,X,E,!1),yh(o);return;case"select":Ur("invalid",o),x=X=L=null;for(E in m)if(m.hasOwnProperty(E)&&(se=m[E],se!=null))switch(E){case"value":L=se;break;case"defaultValue":X=se;break;case"multiple":x=se;default:Jr(o,h,E,se,m,null)}h=L,m=X,o.multiple=!!x,h!=null?Is(o,!!x,h,!1):m!=null&&Is(o,!!x,m,!0);return;case"textarea":Ur("invalid",o),L=E=x=null;for(X in m)if(m.hasOwnProperty(X)&&(se=m[X],se!=null))switch(X){case"value":x=se;break;case"defaultValue":E=se;break;case"children":L=se;break;case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(91));break;default:Jr(o,h,X,se,m,null)}dl(o,x,E,L),yh(o);return;case"option":for(Ce in m)if(m.hasOwnProperty(Ce)&&(x=m[Ce],x!=null))switch(Ce){case"selected":o.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:Jr(o,h,Ce,x,m,null)}return;case"dialog":Ur("beforetoggle",o),Ur("toggle",o),Ur("cancel",o),Ur("close",o);break;case"iframe":case"object":Ur("load",o);break;case"video":case"audio":for(x=0;x<Kh.length;x++)Ur(Kh[x],o);break;case"image":Ur("error",o),Ur("load",o);break;case"details":Ur("toggle",o);break;case"embed":case"source":case"link":Ur("error",o),Ur("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(We in m)if(m.hasOwnProperty(We)&&(x=m[We],x!=null))switch(We){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,h));default:Jr(o,h,We,x,m,null)}return;default:if(ko(h)){for(ut in m)m.hasOwnProperty(ut)&&(x=m[ut],x!==void 0&&Sp(o,h,ut,x,m,void 0));return}}for(se in m)m.hasOwnProperty(se)&&(x=m[se],x!=null&&Jr(o,h,se,x,m,null))}function Qg(o,h,m,x){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,L=null,X=null,se=null,Ce=null,We=null,ut=null;for(Ke in m){var mt=m[Ke];if(m.hasOwnProperty(Ke)&&mt!=null)switch(Ke){case"checked":break;case"value":break;case"defaultValue":Ce=mt;default:x.hasOwnProperty(Ke)||Jr(o,h,Ke,null,x,mt)}}for(var Qe in x){var Ke=x[Qe];if(mt=m[Qe],x.hasOwnProperty(Qe)&&(Ke!=null||mt!=null))switch(Qe){case"type":L=Ke;break;case"name":E=Ke;break;case"checked":We=Ke;break;case"defaultChecked":ut=Ke;break;case"value":X=Ke;break;case"defaultValue":se=Ke;break;case"children":case"dangerouslySetInnerHTML":if(Ke!=null)throw Error(i(137,h));break;default:Ke!==mt&&Jr(o,h,Qe,Ke,x,mt)}}lc(o,X,se,Ce,We,ut,L,E);return;case"select":Ke=X=se=Qe=null;for(L in m)if(Ce=m[L],m.hasOwnProperty(L)&&Ce!=null)switch(L){case"value":break;case"multiple":Ke=Ce;default:x.hasOwnProperty(L)||Jr(o,h,L,null,x,Ce)}for(E in x)if(L=x[E],Ce=m[E],x.hasOwnProperty(E)&&(L!=null||Ce!=null))switch(E){case"value":Qe=L;break;case"defaultValue":se=L;break;case"multiple":X=L;default:L!==Ce&&Jr(o,h,E,L,x,Ce)}h=se,m=X,x=Ke,Qe!=null?Is(o,!!m,Qe,!1):!!x!=!!m&&(h!=null?Is(o,!!m,h,!0):Is(o,!!m,m?[]:"",!1));return;case"textarea":Ke=Qe=null;for(se in m)if(E=m[se],m.hasOwnProperty(se)&&E!=null&&!x.hasOwnProperty(se))switch(se){case"value":break;case"children":break;default:Jr(o,h,se,null,x,E)}for(X in x)if(E=x[X],L=m[X],x.hasOwnProperty(X)&&(E!=null||L!=null))switch(X){case"value":Qe=E;break;case"defaultValue":Ke=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:E!==L&&Jr(o,h,X,E,x,L)}Vd(o,Qe,Ke);return;case"option":for(var dr in m)if(Qe=m[dr],m.hasOwnProperty(dr)&&Qe!=null&&!x.hasOwnProperty(dr))switch(dr){case"selected":o.selected=!1;break;default:Jr(o,h,dr,null,x,Qe)}for(Ce in x)if(Qe=x[Ce],Ke=m[Ce],x.hasOwnProperty(Ce)&&Qe!==Ke&&(Qe!=null||Ke!=null))switch(Ce){case"selected":o.selected=Qe&&typeof Qe!="function"&&typeof Qe!="symbol";break;default:Jr(o,h,Ce,Qe,x,Ke)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ur in m)Qe=m[ur],m.hasOwnProperty(ur)&&Qe!=null&&!x.hasOwnProperty(ur)&&Jr(o,h,ur,null,x,Qe);for(We in x)if(Qe=x[We],Ke=m[We],x.hasOwnProperty(We)&&Qe!==Ke&&(Qe!=null||Ke!=null))switch(We){case"children":case"dangerouslySetInnerHTML":if(Qe!=null)throw Error(i(137,h));break;default:Jr(o,h,We,Qe,x,Ke)}return;default:if(ko(h)){for(var ln in m)Qe=m[ln],m.hasOwnProperty(ln)&&Qe!==void 0&&!x.hasOwnProperty(ln)&&Sp(o,h,ln,void 0,x,Qe);for(ut in x)Qe=x[ut],Ke=m[ut],!x.hasOwnProperty(ut)||Qe===Ke||Qe===void 0&&Ke===void 0||Sp(o,h,ut,Qe,x,Ke);return}}for(var Ne in m)Qe=m[Ne],m.hasOwnProperty(Ne)&&Qe!=null&&!x.hasOwnProperty(Ne)&&Jr(o,h,Ne,null,x,Qe);for(mt in x)Qe=x[mt],Ke=m[mt],!x.hasOwnProperty(mt)||Qe===Ke||Qe==null&&Ke==null||Jr(o,h,mt,Qe,x,Ke)}var pd=null,wp=null;function vi(o){return o.nodeType===9?o:o.ownerDocument}function Zc(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jh(o,h){if(o===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&h==="foreignObject"?0:o}function Yl(o,h){return o==="textarea"||o==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Pp=null;function Xg(){var o=window.event;return o&&o.type==="popstate"?o===Pp?!1:(Pp=o,!0):(Pp=null,!1)}var cy=typeof setTimeout=="function"?setTimeout:void 0,Kg=typeof clearTimeout=="function"?clearTimeout:void 0,Jg=typeof Promise=="function"?Promise:void 0,e0=typeof queueMicrotask=="function"?queueMicrotask:typeof Jg<"u"?function(o){return Jg.resolve(null).then(o).catch(Gu)}:cy;function Gu(o){setTimeout(function(){throw o})}function Ql(o){return o==="head"}function hy(o,h){var m=h,x=0,E=0;do{var L=m.nextSibling;if(o.removeChild(m),L&&L.nodeType===8)if(m=L.data,m==="/$"){if(0<x&&8>x){m=x;var X=o.ownerDocument;if(m&1&&Wu(X.documentElement),m&2&&Wu(X.body),m&4)for(m=X.head,Wu(m),X=m.firstChild;X;){var se=X.nextSibling,Ce=X.nodeName;X[Mo]||Ce==="SCRIPT"||Ce==="STYLE"||Ce==="LINK"&&X.rel.toLowerCase()==="stylesheet"||m.removeChild(X),X=se}}if(E===0){o.removeChild(L),Zn(h);return}E--}else m==="$"||m==="$?"||m==="$!"?E++:x=m.charCodeAt(0)-48;else x=0;m=L}while(m);Zn(h)}function Ap(o){var h=o.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var m=h;switch(h=h.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Ap(m),Tt(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}o.removeChild(m)}}function t0(o,h,m,x){for(;o.nodeType===1;){var E=m;if(o.nodeName.toLowerCase()!==h.toLowerCase()){if(!x&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(x){if(!o[Mo])switch(h){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(L=o.getAttribute("rel"),L==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(L!==E.rel||o.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||o.getAttribute("title")!==(E.title==null?null:E.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(L=o.getAttribute("src"),(L!==(E.src==null?null:E.src)||o.getAttribute("type")!==(E.type==null?null:E.type)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&L&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(h==="input"&&o.type==="hidden"){var L=E.name==null?null:""+E.name;if(E.type==="hidden"&&o.getAttribute("name")===L)return o}else return o;if(o=Wo(o.nextSibling),o===null)break}return null}function _1(o,h,m){if(h==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!m||(o=Wo(o.nextSibling),o===null))return null;return o}function fy(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function r0(o,h){var m=o.ownerDocument;if(o.data!=="$?"||m.readyState==="complete")h();else{var x=function(){h(),m.removeEventListener("DOMContentLoaded",x)};m.addEventListener("DOMContentLoaded",x),o._reactRetry=x}}function Wo(o){for(;o!=null;o=o.nextSibling){var h=o.nodeType;if(h===1||h===3)break;if(h===8){if(h=o.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return o}var ef=null;function dy(o){o=o.previousSibling;for(var h=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"){if(h===0)return o;h--}else m==="/$"&&h++}o=o.previousSibling}return null}function md(o,h,m){switch(h=vi(m),o){case"html":if(o=h.documentElement,!o)throw Error(i(452));return o;case"head":if(o=h.head,!o)throw Error(i(453));return o;case"body":if(o=h.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function Wu(o){for(var h=o.attributes;h.length;)o.removeAttributeNode(h[0]);Tt(o)}var Ni=new Map,n0=new Set;function Cp(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Xl=ct.d;ct.d={f:tf,r:ja,D:a0,C:my,L:b1,m:i0,X:x1,S:o0,M:s0};function tf(){var o=Xl.f(),h=od();return o||h}function ja(o){var h=cr(o);h!==null&&h.tag===5&&h.type==="form"?Yr(h):Xl.r(o)}var Zu=typeof document>"u"?null:document;function py(o,h,m){var x=Zu;if(x&&typeof h=="string"&&h){var E=pi(h);E='link[rel="'+o+'"][href="'+E+'"]',typeof m=="string"&&(E+='[crossorigin="'+m+'"]'),n0.has(E)||(n0.add(E),o={rel:o,crossOrigin:m,href:h},x.querySelector(E)===null&&(h=x.createElement("link"),sa(h,"link",o),mn(h),x.head.appendChild(h)))}}function a0(o){Xl.D(o),py("dns-prefetch",o,null)}function my(o,h){Xl.C(o,h),py("preconnect",o,h)}function b1(o,h,m){Xl.L(o,h,m);var x=Zu;if(x&&o&&h){var E='link[rel="preload"][as="'+pi(h)+'"]';h==="image"&&m&&m.imageSrcSet?(E+='[imagesrcset="'+pi(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(E+='[imagesizes="'+pi(m.imageSizes)+'"]')):E+='[href="'+pi(o)+'"]';var L=E;switch(h){case"style":L=Yu(o);break;case"script":L=Yc(o)}Ni.has(L)||(o=T({rel:"preload",href:h==="image"&&m&&m.imageSrcSet?void 0:o,as:h},m),Ni.set(L,o),x.querySelector(E)!==null||h==="style"&&x.querySelector(rf(L))||h==="script"&&x.querySelector(Qc(L))||(h=x.createElement("link"),sa(h,"link",o),mn(h),x.head.appendChild(h)))}}function i0(o,h){Xl.m(o,h);var m=Zu;if(m&&o){var x=h&&typeof h.as=="string"?h.as:"script",E='link[rel="modulepreload"][as="'+pi(x)+'"][href="'+pi(o)+'"]',L=E;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":L=Yc(o)}if(!Ni.has(L)&&(o=T({rel:"modulepreload",href:o},h),Ni.set(L,o),m.querySelector(E)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Qc(L)))return}x=m.createElement("link"),sa(x,"link",o),mn(x),m.head.appendChild(x)}}}function o0(o,h,m){Xl.S(o,h,m);var x=Zu;if(x&&o){var E=Wi(x).hoistableStyles,L=Yu(o);h=h||"default";var X=E.get(L);if(!X){var se={loading:0,preload:null};if(X=x.querySelector(rf(L)))se.loading=5;else{o=T({rel:"stylesheet",href:o,"data-precedence":h},m),(m=Ni.get(L))&&gd(o,m);var Ce=X=x.createElement("link");mn(Ce),sa(Ce,"link",o),Ce._p=new Promise(function(We,ut){Ce.onload=We,Ce.onerror=ut}),Ce.addEventListener("load",function(){se.loading|=1}),Ce.addEventListener("error",function(){se.loading|=2}),se.loading|=4,Qu(X,h,x)}X={type:"stylesheet",instance:X,count:1,state:se},E.set(L,X)}}}function x1(o,h){Xl.X(o,h);var m=Zu;if(m&&o){var x=Wi(m).hoistableScripts,E=Yc(o),L=x.get(E);L||(L=m.querySelector(Qc(E)),L||(o=T({src:o,async:!0},h),(h=Ni.get(E))&&vd(o,h),L=m.createElement("script"),mn(L),sa(L,"link",o),m.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},x.set(E,L))}}function s0(o,h){Xl.M(o,h);var m=Zu;if(m&&o){var x=Wi(m).hoistableScripts,E=Yc(o),L=x.get(E);L||(L=m.querySelector(Qc(E)),L||(o=T({src:o,async:!0,type:"module"},h),(h=Ni.get(E))&&vd(o,h),L=m.createElement("script"),mn(L),sa(L,"link",o),m.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},x.set(E,L))}}function Dp(o,h,m,x){var E=(E=jt.current)?Cp(E):null;if(!E)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(h=Yu(m.href),m=Wi(E).hoistableStyles,x=m.get(h),x||(x={type:"style",instance:null,count:0,state:null},m.set(h,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){o=Yu(m.href);var L=Wi(E).hoistableStyles,X=L.get(o);if(X||(E=E.ownerDocument||E,X={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},L.set(o,X),(L=E.querySelector(rf(o)))&&!L._p&&(X.instance=L,X.state.loading=5),Ni.has(o)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Ni.set(o,m),L||yy(E,o,m,X.state))),h&&x===null)throw Error(i(528,""));return X}if(h&&x!==null)throw Error(i(529,""));return null;case"script":return h=m.async,m=m.src,typeof m=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Yc(m),m=Wi(E).hoistableScripts,x=m.get(h),x||(x={type:"script",instance:null,count:0,state:null},m.set(h,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function Yu(o){return'href="'+pi(o)+'"'}function rf(o){return'link[rel="stylesheet"]['+o+"]"}function nf(o){return T({},o,{"data-precedence":o.precedence,precedence:null})}function yy(o,h,m,x){o.querySelector('link[rel="preload"][as="style"]['+h+"]")?x.loading=1:(h=o.createElement("link"),x.preload=h,h.addEventListener("load",function(){return x.loading|=1}),h.addEventListener("error",function(){return x.loading|=2}),sa(h,"link",m),mn(h),o.head.appendChild(h))}function Yc(o){return'[src="'+pi(o)+'"]'}function Qc(o){return"script[async]"+o}function yd(o,h,m){if(h.count++,h.instance===null)switch(h.type){case"style":var x=o.querySelector('style[data-href~="'+pi(m.href)+'"]');if(x)return h.instance=x,mn(x),x;var E=T({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return x=(o.ownerDocument||o).createElement("style"),mn(x),sa(x,"style",E),Qu(x,m.precedence,o),h.instance=x;case"stylesheet":E=Yu(m.href);var L=o.querySelector(rf(E));if(L)return h.state.loading|=4,h.instance=L,mn(L),L;x=nf(m),(E=Ni.get(E))&&gd(x,E),L=(o.ownerDocument||o).createElement("link"),mn(L);var X=L;return X._p=new Promise(function(se,Ce){X.onload=se,X.onerror=Ce}),sa(L,"link",x),h.state.loading|=4,Qu(L,m.precedence,o),h.instance=L;case"script":return L=Yc(m.src),(E=o.querySelector(Qc(L)))?(h.instance=E,mn(E),E):(x=m,(E=Ni.get(L))&&(x=T({},m),vd(x,E)),o=o.ownerDocument||o,E=o.createElement("script"),mn(E),sa(E,"link",x),o.head.appendChild(E),h.instance=E);case"void":return null;default:throw Error(i(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(x=h.instance,h.state.loading|=4,Qu(x,m.precedence,o));return h.instance}function Qu(o,h,m){for(var x=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=x.length?x[x.length-1]:null,L=E,X=0;X<x.length;X++){var se=x[X];if(se.dataset.precedence===h)L=se;else if(L!==E)break}L?L.parentNode.insertBefore(o,L.nextSibling):(h=m.nodeType===9?m.head:m,h.insertBefore(o,h.firstChild))}function gd(o,h){o.crossOrigin==null&&(o.crossOrigin=h.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=h.referrerPolicy),o.title==null&&(o.title=h.title)}function vd(o,h){o.crossOrigin==null&&(o.crossOrigin=h.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=h.referrerPolicy),o.integrity==null&&(o.integrity=h.integrity)}var af=null;function l0(o,h,m){if(af===null){var x=new Map,E=af=new Map;E.set(m,x)}else E=af,x=E.get(m),x||(x=new Map,E.set(m,x));if(x.has(o))return x;for(x.set(o,null),m=m.getElementsByTagName(o),E=0;E<m.length;E++){var L=m[E];if(!(L[Mo]||L[tr]||o==="link"&&L.getAttribute("rel")==="stylesheet")&&L.namespaceURI!=="http://www.w3.org/2000/svg"){var X=L.getAttribute(h)||"";X=o+X;var se=x.get(X);se?se.push(L):x.set(X,[L])}}return x}function l(o,h,m){o=o.ownerDocument||o,o.head.insertBefore(m,h==="title"?o.querySelector("head > title"):null)}function n(o,h,m){if(m===1||h.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return o=h.disabled,typeof h.precedence=="string"&&o==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function s(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var f=null;function v(){}function S(o,h,m){if(f===null)throw Error(i(475));var x=f;if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var E=Yu(m.href),L=o.querySelector(rf(E));if(L){o=L._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(x.count++,x=D.bind(x),o.then(x,x)),h.state.loading|=4,h.instance=L,mn(L);return}L=o.ownerDocument||o,m=nf(m),(E=Ni.get(E))&&gd(m,E),L=L.createElement("link"),mn(L);var X=L;X._p=new Promise(function(se,Ce){X.onload=se,X.onerror=Ce}),sa(L,"link",m),h.instance=L}x.stylesheets===null&&(x.stylesheets=new Map),x.stylesheets.set(h,o),(o=h.state.preload)&&(h.state.loading&3)===0&&(x.count++,h=D.bind(x),o.addEventListener("load",h),o.addEventListener("error",h))}}function P(){if(f===null)throw Error(i(475));var o=f;return o.stylesheets&&o.count===0&&O(o,o.stylesheets),0<o.count?function(h){var m=setTimeout(function(){if(o.stylesheets&&O(o,o.stylesheets),o.unsuspend){var x=o.unsuspend;o.unsuspend=null,x()}},6e4);return o.unsuspend=h,function(){o.unsuspend=null,clearTimeout(m)}}:null}function D(){if(this.count--,this.count===0){if(this.stylesheets)O(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var R=null;function O(o,h){o.stylesheets=null,o.unsuspend!==null&&(o.count++,R=new Map,h.forEach(j,o),R=null,D.call(o))}function j(o,h){if(!(h.state.loading&4)){var m=R.get(o);if(m)var x=m.get(null);else{m=new Map,R.set(o,m);for(var E=o.querySelectorAll("link[data-precedence],style[data-precedence]"),L=0;L<E.length;L++){var X=E[L];(X.nodeName==="LINK"||X.getAttribute("media")!=="not all")&&(m.set(X.dataset.precedence,X),x=X)}x&&m.set(null,x)}E=h.instance,X=E.getAttribute("data-precedence"),L=m.get(X)||x,L===x&&m.set(null,E),m.set(X,E),this.count++,x=D.bind(this),E.addEventListener("load",x),E.addEventListener("error",x),L?L.parentNode.insertBefore(E,L.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(E,o.firstChild)),h.state.loading|=4}}var q={$$typeof:ae,Provider:null,Consumer:null,_currentValue:nt,_currentValue2:nt,_threadCount:0};function Z(o,h,m,x,E,L,X,se){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=kt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kt(0),this.hiddenUpdates=kt(null),this.identifierPrefix=x,this.onUncaughtError=E,this.onCaughtError=L,this.onRecoverableError=X,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=se,this.incompleteTransitions=new Map}function J(o,h,m,x,E,L,X,se,Ce,We,ut,mt){return o=new Z(o,h,m,X,se,Ce,We,mt),h=1,L===!0&&(h|=24),L=ki(3,null,null,h),o.current=L,L.stateNode=o,h=Gs(),h.refCount++,o.pooledCache=h,h.refCount++,L.memoizedState={element:x,isDehydrated:m,cache:h},kc(L),o}function te(o){return o?(o=gr,o):gr}function oe(o,h,m,x,E,L){E=te(E),x.context===null?x.context=E:x.pendingContext=E,x=No(h),x.payload={element:m},L=L===void 0?null:L,L!==null&&(x.callback=L),m=us(o,x,h),m!==null&&(Fi(m,o,h),ku(m,o,h))}function ue(o,h){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<h?m:h}}function pe(o,h){ue(o,h),(o=o.alternate)&&ue(o,h)}function Le(o){if(o.tag===13){var h=Ii(o,67108864);h!==null&&Fi(h,o,67108864),pe(o,67108864)}}var Se=!0;function De(o,h,m,x){var E=Be.T;Be.T=null;var L=ct.p;try{ct.p=2,Xe(o,h,m,x)}finally{ct.p=L,Be.T=E}}function Ge(o,h,m,x){var E=Be.T;Be.T=null;var L=ct.p;try{ct.p=8,Xe(o,h,m,x)}finally{ct.p=L,Be.T=E}}function Xe(o,h,m,x){if(Se){var E=dt(x);if(E===null)sy(o,h,x,Dt,m),Ar(o,x);else if(la(E,o,h,m,x))x.stopPropagation();else if(Ar(o,x),h&4&&-1<Nt.indexOf(o)){for(;E!==null;){var L=cr(E);if(L!==null)switch(L.tag){case 3:if(L=L.stateNode,L.current.memoizedState.isDehydrated){var X=Ie(L.pendingLanes);if(X!==0){var se=L;for(se.pendingLanes|=2,se.entangledLanes|=2;X;){var Ce=1<<31-Re(X);se.entanglements[1]|=Ce,X&=~Ce}xs(L),(nn&6)===0&&(nd=Lr()+500,Xh(0))}}break;case 13:se=Ii(L,2),se!==null&&Fi(se,L,2),od(),pe(L,2)}if(L=dt(x),L===null&&sy(o,h,x,Dt,m),L===E)break;E=L}E!==null&&x.stopPropagation()}else sy(o,h,x,null,m)}}function dt(o){return o=du(o),_t(o)}var Dt=null;function _t(o){if(Dt=null,o=mr(o),o!==null){var h=y(o);if(h===null)o=null;else{var m=h.tag;if(m===13){if(o=g(h),o!==null)return o;o=null}else if(m===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;o=null}else h!==o&&(o=null)}}return Dt=o,null}function Mt(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nn()){case Qn:return 2;case Va:return 8;case ba:case Gi:return 32;case Mi:return 268435456;default:return 32}default:return 32}}var Ht=!1,bt=null,St=null,tt=null,Kt=new Map,rr=new Map,Bt=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ar(o,h){switch(o){case"focusin":case"focusout":bt=null;break;case"dragenter":case"dragleave":St=null;break;case"mouseover":case"mouseout":tt=null;break;case"pointerover":case"pointerout":Kt.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":rr.delete(h.pointerId)}}function on(o,h,m,x,E,L){return o===null||o.nativeEvent!==L?(o={blockedOn:h,domEventName:m,eventSystemFlags:x,nativeEvent:L,targetContainers:[E]},h!==null&&(h=cr(h),h!==null&&Le(h)),o):(o.eventSystemFlags|=x,h=o.targetContainers,E!==null&&h.indexOf(E)===-1&&h.push(E),o)}function la(o,h,m,x,E){switch(h){case"focusin":return bt=on(bt,o,h,m,x,E),!0;case"dragenter":return St=on(St,o,h,m,x,E),!0;case"mouseover":return tt=on(tt,o,h,m,x,E),!0;case"pointerover":var L=E.pointerId;return Kt.set(L,on(Kt.get(L)||null,o,h,m,x,E)),!0;case"gotpointercapture":return L=E.pointerId,rr.set(L,on(rr.get(L)||null,o,h,m,x,E)),!0}return!1}function Ma(o){var h=mr(o.target);if(h!==null){var m=y(h);if(m!==null){if(h=m.tag,h===13){if(h=g(m),h!==null){o.blockedOn=h,ra(o.priority,function(){if(m.tag===13){var x=si();x=or(x);var E=Ii(m,x);E!==null&&Fi(E,m,x),pe(m,x)}});return}}else if(h===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function _i(o){if(o.blockedOn!==null)return!1;for(var h=o.targetContainers;0<h.length;){var m=dt(o.nativeEvent);if(m===null){m=o.nativeEvent;var x=new m.constructor(m.type,m);es=x,m.target.dispatchEvent(x),es=null}else return h=cr(m),h!==null&&Le(h),o.blockedOn=m,!1;h.shift()}return!0}function bi(o,h,m){_i(o)&&m.delete(h)}function Ta(){Ht=!1,bt!==null&&_i(bt)&&(bt=null),St!==null&&_i(St)&&(St=null),tt!==null&&_i(tt)&&(tt=null),Kt.forEach(bi),rr.forEach(bi)}function sn(o,h){o.blockedOn===h&&(o.blockedOn=null,Ht||(Ht=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ta)))}var Wn=null;function _a(o){Wn!==o&&(Wn=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Wn===o&&(Wn=null);for(var h=0;h<o.length;h+=3){var m=o[h],x=o[h+1],E=o[h+2];if(typeof x!="function"){if(_t(x||m)===null)continue;break}var L=cr(m);L!==null&&(o.splice(h,3),h-=3,rn(L,{pending:!0,data:E,method:m.method,action:x},x,E))}}))}function Zn(o){function h(Ce){return sn(Ce,o)}bt!==null&&sn(bt,o),St!==null&&sn(St,o),tt!==null&&sn(tt,o),Kt.forEach(h),rr.forEach(h);for(var m=0;m<Bt.length;m++){var x=Bt[m];x.blockedOn===o&&(x.blockedOn=null)}for(;0<Bt.length&&(m=Bt[0],m.blockedOn===null);)Ma(m),m.blockedOn===null&&Bt.shift();if(m=(o.ownerDocument||o).$$reactFormReplay,m!=null)for(x=0;x<m.length;x+=3){var E=m[x],L=m[x+1],X=E[sr]||null;if(typeof L=="function")X||_a(m);else if(X){var se=null;if(L&&L.hasAttribute("formAction")){if(E=L,X=L[sr]||null)se=X.formAction;else if(_t(E)!==null)continue}else se=X.action;typeof se=="function"?m[x+1]=se:(m.splice(x,3),x-=3),_a(m)}}}function Ba(o){this._internalRoot=o}xi.prototype.render=Ba.prototype.render=function(o){var h=this._internalRoot;if(h===null)throw Error(i(409));var m=h.current,x=si();oe(m,x,o,h,null,null)},xi.prototype.unmount=Ba.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var h=o.containerInfo;oe(o.current,2,null,o,null,null),od(),h[pn]=null}};function xi(o){this._internalRoot=o}xi.prototype.unstable_scheduleHydration=function(o){if(o){var h=Xn();o={blockedOn:null,target:o,priority:h};for(var m=0;m<Bt.length&&h!==0&&h<Bt[m].priority;m++);Bt.splice(m,0,o),m===0&&Ma(o)}};var ua=r.version;if(ua!=="19.1.1")throw Error(i(527,ua,"19.1.1"));ct.findDOMNode=function(o){var h=o._reactInternals;if(h===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=C(h),o=o!==null?M(o):null,o=o===null?null:o.stateNode,o};var ji={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Be,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zn.isDisabled&&zn.supportsFiber)try{fi=zn.inject(ji),An=zn}catch{}}return vy.createRoot=function(o,h){if(!p(o))throw Error(i(299));var m=!1,x="",E=qf,L=gm,X=yg,se=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(E=h.onUncaughtError),h.onCaughtError!==void 0&&(L=h.onCaughtError),h.onRecoverableError!==void 0&&(X=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(se=h.unstable_transitionCallbacks)),h=J(o,1,!1,null,null,m,x,E,L,X,se,null),o[pn]=h.current,oy(o),new Ba(h)},vy.hydrateRoot=function(o,h,m){if(!p(o))throw Error(i(299));var x=!1,E="",L=qf,X=gm,se=yg,Ce=null,We=null;return m!=null&&(m.unstable_strictMode===!0&&(x=!0),m.identifierPrefix!==void 0&&(E=m.identifierPrefix),m.onUncaughtError!==void 0&&(L=m.onUncaughtError),m.onCaughtError!==void 0&&(X=m.onCaughtError),m.onRecoverableError!==void 0&&(se=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(Ce=m.unstable_transitionCallbacks),m.formState!==void 0&&(We=m.formState)),h=J(o,1,!0,h,m??null,x,E,L,X,se,Ce,We),h.context=te(null),m=h.current,x=si(),x=or(x),E=No(x),E.callback=null,us(m,E,x),m=x,h.current.lanes=m,Oe(h,m),xs(h),o[pn]=h.current,oy(o),new xi(h)},vy.version="19.1.1",vy}var mS;function x4(){if(mS)return A1.exports;mS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),A1.exports=b4(),A1.exports}var S4=x4();const w4="/what_makes_lands_happy/world-map-svgrepo-com.svg",Ju=JSON.parse('[{"Country":"Finland","Country_clean":"finland","Region":"Western Europe","Happiness (score 0-10)":7.741,"Median Salary (USD/year)":4238.9,"Average Salary (USD/year)":4978.86,"Lowest Salary (USD/year)":1257.93,"Highest Salary (USD/year)":22093.02,"IQAir_AQI (AQI index)":5.25,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":8.8,"Life Expectancy (years)":81.1,"Netflix":13.54,"Women Safety Index (score 0-1)":0.924,"Average Winter Temperature (C)":-12.356432,"Average Summer Temperature (C)":-4.902662,"Population (people)":5540745,"Energy Per Capita (kWh per capita)":58966.16,"% of Power from Fossil Fuels (%)":10.769,"% of Power from Nuclear (%)":34.333,"% of Power from Renewables (%)":54.898,"% of Agricultural Land (%)":7.4618100417,"% of Forest Land (%)":73.7264996577,"Territory (sq km)":303947.7,"Average Rainfall (mm/year)":536,"Corruption (std score)":0.1622093022,"Wheat Production (tonnes)":2640555,"Rye Production (tonnes)":1200,"Potatoes Production (tonnes)":38388000,"Meat, Chicken Production (tonnes)":54950,"Avocados Production (tonnes)":2243396.8,"Petrol Price (USD/liter)":2.64,"Daily Oil Consumption (barrels/day)":210030,"CO2 Emissions (tonnes per capita)":7.372854761,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":8746.09,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":38.9,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":22.85,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.71,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":84.3,"GDP Per Capita (USD/year)":48416.93603,"Military Expenditure (USD/year)":3849013845,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.6,"Average Age (years)":43.043,"Inflation Rate (year, %)":7.1},{"Country":"Denmark","Country_clean":"denmark","Region":"Western Europe","Happiness (score 0-10)":7.583,"Median Salary (USD/year)":5084.99,"Average Salary (USD/year)":5779.04,"Lowest Salary (USD/year)":1458.92,"Highest Salary (USD/year)":25637.39,"IQAir_AQI (AQI index)":9.7,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":9.64,"Life Expectancy (years)":86,"Netflix":15.04,"Women Safety Index (score 0-1)":0.932,"Average Winter Temperature (C)":1.278225,"Average Summer Temperature (C)":5.266599,"Population (people)":5882261,"Energy Per Capita (kWh per capita)":32197.939,"% of Power from Fossil Fuels (%)":16.037,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":83.963,"% of Agricultural Land (%)":65.45,"% of Forest Land (%)":15.7345,"Territory (sq km)":40000,"Average Rainfall (mm/year)":703,"Corruption (std score)":0.1622093022,"Wheat Production (tonnes)":37885740,"Rye Production (tonnes)":2000,"Potatoes Production (tonnes)":28781776,"Meat, Chicken Production (tonnes)":94712,"Avocados Production (tonnes)":2300,"Petrol Price (USD/liter)":2.65,"Daily Oil Consumption (barrels/day)":158194,"CO2 Emissions (tonnes per capita)":5.107988509,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":7808.48,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":40.68,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":37.29,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":3.25,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":113.4,"GDP Per Capita (USD/year)":55671.16527,"Military Expenditure (USD/year)":4228194254,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1,"Average Age (years)":42.743,"Inflation Rate (year, %)":7.7},{"Country":"Iceland","Country_clean":"iceland","Region":"Western Europe","Happiness (score 0-10)":7.525,"Median Salary (USD/year)":4661.2,"Average Salary (USD/year)":5049.03,"Lowest Salary (USD/year)":1273.23,"Highest Salary (USD/year)":22464.51,"IQAir_AQI (AQI index)":4.9,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":7.45,"Life Expectancy (years)":82.7,"Netflix":14.67,"Women Safety Index (score 0-1)":0.924,"Average Winter Temperature (C)":-4.115238,"Average Summer Temperature (C)":-3.5402563,"Population (people)":372899,"Energy Per Capita (kWh per capita)":165870.875,"% of Power from Fossil Fuels (%)":0,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":99.986,"% of Agricultural Land (%)":18.5659030051,"% of Forest Land (%)":0.5157522563,"Territory (sq km)":100830,"Average Rainfall (mm/year)":1940,"Corruption (std score)":0.2001170814,"Wheat Production (tonnes)":1290.74,"Rye Production (tonnes)":46331.4,"Potatoes Production (tonnes)":294,"Meat, Chicken Production (tonnes)":2790,"Avocados Production (tonnes)":84114,"Petrol Price (USD/liter)":2.6,"Daily Oil Consumption (barrels/day)":19090,"CO2 Emissions (tonnes per capita)":4.548442258,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":6309.67,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":64.15,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":65.69,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.44,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":106.31,"GDP Per Capita (USD/year)":57303.06078,"Military Expenditure (USD/year)":0,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.5,"Average Age (years)":38.008,"Inflation Rate (year, %)":8.3},{"Country":"Sweden","Country_clean":"sweden","Region":"Western Europe","Happiness (score 0-10)":7.344,"Median Salary (USD/year)":3568.16,"Average Salary (USD/year)":4144.56,"Lowest Salary (USD/year)":1043,"Highest Salary (USD/year)":18389.75,"IQAir_AQI (AQI index)":6.1,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":7.3,"Life Expectancy (years)":82.4,"Netflix":14.2,"Women Safety Index (score 0-1)":0.926,"Average Winter Temperature (C)":-8.132298,"Average Summer Temperature (C)":-2.8563125,"Population (people)":10549347,"Energy Per Capita (kWh per capita)":59926.805,"% of Power from Fossil Fuels (%)":1.782,"% of Power from Nuclear (%)":29.835,"% of Power from Renewables (%)":68.383,"% of Agricultural Land (%)":7.3730207707,"% of Forest Land (%)":68.6990689582,"Territory (sq km)":407283.54,"Average Rainfall (mm/year)":624,"Corruption (std score)":0.1622093022,"Wheat Production (tonnes)":5007.8,"Rye Production (tonnes)":34011.166,"Potatoes Production (tonnes)":3368,"Meat, Chicken Production (tonnes)":279,"Avocados Production (tonnes)":38349.266,"Petrol Price (USD/liter)":2.3,"Daily Oil Consumption (barrels/day)":322109,"CO2 Emissions (tonnes per capita)":3.405037919,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":11124.31,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":43.09,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":34.07,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.29,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":77.47,"GDP Per Capita (USD/year)":53208.88436,"Military Expenditure (USD/year)":5755367603,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.2,"Average Age (years)":41.961,"Inflation Rate (year, %)":8.4},{"Country":"Israel","Country_clean":"israel","Region":"Middle East and North Africa","Happiness (score 0-10)":7.341,"Median Salary (USD/year)":null,"Average Salary (USD/year)":null,"Lowest Salary (USD/year)":null,"Highest Salary (USD/year)":null,"IQAir_AQI (AQI index)":18.25,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":2.62,"Life Expectancy (years)":82.5,"Netflix":15.05,"Women Safety Index (score 0-1)":0.703,"Average Winter Temperature (C)":13.687662,"Average Summer Temperature (C)":13.979397,"Population (people)":9038309,"Energy Per Capita (kWh per capita)":33643.016,"% of Power from Fossil Fuels (%)":93.227,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":9.508,"% of Agricultural Land (%)":29.7365988909,"% of Forest Land (%)":6.4695009242,"Territory (sq km)":21640,"Average Rainfall (mm/year)":435,"Corruption (std score)":0.2001170814,"Wheat Production (tonnes)":85400,"Rye Production (tonnes)":6347351.2,"Potatoes Production (tonnes)":1379223,"Meat, Chicken Production (tonnes)":7098960,"Avocados Production (tonnes)":41217,"Petrol Price (USD/liter)":2.1,"Daily Oil Consumption (barrels/day)":236249,"CO2 Emissions (tonnes per capita)":6.919593718,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":11468.34,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":71.34,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":27.66,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.4,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":88.08,"GDP Per Capita (USD/year)":39919.16965,"Military Expenditure (USD/year)":15946788601,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.5,"Average Age (years)":31.671,"Inflation Rate (year, %)":4.4},{"Country":"Netherlands","Country_clean":"netherlands","Region":"Western Europe","Happiness (score 0-10)":7.319,"Median Salary (USD/year)":4756.87,"Average Salary (USD/year)":5179.7,"Lowest Salary (USD/year)":1427.06,"Highest Salary (USD/year)":22515.86,"IQAir_AQI (AQI index)":10.65,"Infant Survival Rate (per 1000 births)":999,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":81.9,"Netflix":13.54,"Women Safety Index (score 0-1)":0.908,"Average Winter Temperature (C)":3.8456993,"Average Summer Temperature (C)":6.0171475,"Population (people)":17564014,"Energy Per Capita (kWh per capita)":56000.762,"% of Power from Fossil Fuels (%)":56.704,"% of Power from Nuclear (%)":3.425,"% of Power from Renewables (%)":39.871,"% of Agricultural Land (%)":53.8164538165,"% of Forest Land (%)":11.001980992,"Territory (sq km)":33670,"Average Rainfall (mm/year)":778,"Corruption (std score)":0.1622093022,"Wheat Production (tonnes)":86110,"Rye Production (tonnes)":1142391.36,"Potatoes Production (tonnes)":14154907,"Meat, Chicken Production (tonnes)":3756,"Avocados Production (tonnes)":5300,"Petrol Price (USD/liter)":2.47,"Daily Oil Consumption (barrels/day)":937098,"CO2 Emissions (tonnes per capita)":8.437074627,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":9815.34,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":42.77,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":49.7,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.72,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":84.3,"GDP Per Capita (USD/year)":56328.94114,"Military Expenditure (USD/year)":11242755804,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.6,"Average Age (years)":43.184,"Inflation Rate (year, %)":10},{"Country":"Norway","Country_clean":"norway","Region":"Western Europe","Happiness (score 0-10)":7.302,"Median Salary (USD/year)":4420.02,"Average Salary (USD/year)":4786.34,"Lowest Salary (USD/year)":1208.23,"Highest Salary (USD/year)":21281.57,"IQAir_AQI (AQI index)":7.45,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":5.97,"Life Expectancy (years)":81.8,"Netflix":12.17,"Women Safety Index (score 0-1)":0.92,"Average Winter Temperature (C)":-8.88361,"Average Summer Temperature (C)":-4.446233,"Population (people)":5434319,"Energy Per Capita (kWh per capita)":96926.234,"% of Power from Fossil Fuels (%)":1.028,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":98.972,"% of Agricultural Land (%)":2.7040382134,"% of Forest Land (%)":33.4581491751,"Territory (sq km)":364270,"Average Rainfall (mm/year)":1414,"Corruption (std score)":0.1814468056,"Wheat Production (tonnes)":null,"Rye Production (tonnes)":null,"Potatoes Production (tonnes)":null,"Meat, Chicken Production (tonnes)":null,"Avocados Production (tonnes)":null,"Petrol Price (USD/liter)":2.7,"Daily Oil Consumption (barrels/day)":204090,"CO2 Emissions (tonnes per capita)":6.722269985,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":9925.38,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":46.68,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":50.07,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":3.23,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":112,"GDP Per Capita (USD/year)":65510.58527,"Military Expenditure (USD/year)":7067073381,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.6,"Average Age (years)":40.592,"Inflation Rate (year, %)":5.8},{"Country":"Luxembourg","Country_clean":"luxembourg","Region":"Western Europe","Happiness (score 0-10)":7.122,"Median Salary (USD/year)":4767.44,"Average Salary (USD/year)":5211.42,"Lowest Salary (USD/year)":1310.78,"Highest Salary (USD/year)":23150.11,"IQAir_AQI (AQI index)":8.7,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":11.12,"Life Expectancy (years)":82,"Netflix":null,"Women Safety Index (score 0-1)":0.924,"Average Winter Temperature (C)":1.5896153,"Average Summer Temperature (C)":2.84097,"Population (people)":647599,"Energy Per Capita (kWh per capita)":60334.328,"% of Power from Fossil Fuels (%)":14.159,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":85.841,"% of Agricultural Land (%)":51.5879058133,"% of Forest Land (%)":34.4538272104,"Territory (sq km)":2574.46,"Average Rainfall (mm/year)":934,"Corruption (std score)":0.1622093022,"Wheat Production (tonnes)":22278900,"Rye Production (tonnes)":2792668.5,"Potatoes Production (tonnes)":2749.14,"Meat, Chicken Production (tonnes)":187,"Avocados Production (tonnes)":23943,"Petrol Price (USD/liter)":2.09,"Daily Oil Consumption (barrels/day)":56194,"CO2 Emissions (tonnes per capita)":15.30642656,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":13245.18,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":49.66,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":56.49,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":3.14,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":89.57,"GDP Per Capita (USD/year)":113337.4205,"Military Expenditure (USD/year)":419372654.8,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.2,"Average Age (years)":40.291,"Inflation Rate (year, %)":6.3},{"Country":"Switzerland","Country_clean":"switzerland","Region":"Western Europe","Happiness (score 0-10)":7.06,"Median Salary (USD/year)":9836.07,"Average Salary (USD/year)":11292.9,"Lowest Salary (USD/year)":2850.27,"Highest Salary (USD/year)":50363.93,"IQAir_AQI (AQI index)":9.55,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":9.61,"Life Expectancy (years)":83.4,"Netflix":20.46,"Women Safety Index (score 0-1)":0.928,"Average Winter Temperature (C)":-2.5467072,"Average Summer Temperature (C)":-1.4338865,"Population (people)":8740472,"Energy Per Capita (kWh per capita)":33350.754,"% of Power from Fossil Fuels (%)":3.631,"% of Power from Nuclear (%)":36.964,"% of Power from Renewables (%)":59.406,"% of Agricultural Land (%)":37.9496922649,"% of Forest Land (%)":32.2086033203,"Territory (sq km)":39509.63,"Average Rainfall (mm/year)":1537,"Corruption (std score)":0.2001170814,"Wheat Production (tonnes)":702495.4,"Rye Production (tonnes)":118594,"Potatoes Production (tonnes)":6485000,"Meat, Chicken Production (tonnes)":100.8,"Avocados Production (tonnes)":226048.64,"Petrol Price (USD/liter)":2.19,"Daily Oil Consumption (barrels/day)":228194,"CO2 Emissions (tonnes per capita)":4.359041462,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":12643.33,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":64.35,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":54.39,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":4.15,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":106.85,"GDP Per Capita (USD/year)":68060.94105,"Military Expenditure (USD/year)":4795847181,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.5,"Average Age (years)":43.919,"Inflation Rate (year, %)":2.8},{"Country":"Australia","Country_clean":"australia","Region":"North America and ANZ","Happiness (score 0-10)":7.057,"Median Salary (USD/year)":4306.45,"Average Salary (USD/year)":4903.23,"Lowest Salary (USD/year)":1236.13,"Highest Salary (USD/year)":21774.19,"IQAir_AQI (AQI index)":5.4,"Infant Survival Rate (per 1000 births)":999,"Alcohol Consumption Rate (liters per capita per year)":9.71,"Life Expectancy (years)":82.8,"Netflix":12.12,"Women Safety Index (score 0-1)":0.902,"Average Winter Temperature (C)":28.664902,"Average Summer Temperature (C)":29.092043,"Population (people)":26177413,"Energy Per Capita (kWh per capita)":63458.84,"% of Power from Fossil Fuels (%)":67.697,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":32.303,"% of Agricultural Land (%)":47.2592374955,"% of Forest Land (%)":17.4213145572,"Territory (sq km)":7692020,"Average Rainfall (mm/year)":534,"Corruption (std score)":0.1621359587,"Wheat Production (tonnes)":1970363.6,"Rye Production (tonnes)":269,"Potatoes Production (tonnes)":767261.1,"Meat, Chicken Production (tonnes)":1191322,"Avocados Production (tonnes)":202541,"Petrol Price (USD/liter)":1.38,"Daily Oil Consumption (barrels/day)":1114645,"CO2 Emissions (tonnes per capita)":15.23826715,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":11820.92,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":57.5,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":50.66,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.23,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":81.55,"GDP Per Capita (USD/year)":51663.36509,"Military Expenditure (USD/year)":26711834225,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.9,"Average Age (years)":39.6,"Inflation Rate (year, %)":6.6},{"Country":"New Zealand","Country_clean":"new zealand","Region":"North America and ANZ","Happiness (score 0-10)":7.029,"Median Salary (USD/year)":4196.41,"Average Salary (USD/year)":4870.06,"Lowest Salary (USD/year)":1227.54,"Highest Salary (USD/year)":21656.29,"IQAir_AQI (AQI index)":8.6,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":8.7,"Life Expectancy (years)":81.6,"Netflix":12.53,"Women Safety Index (score 0-1)":0.904,"Average Winter Temperature (C)":15.329823,"Average Summer Temperature (C)":16.2116,"Population (people)":5185288,"Energy Per Capita (kWh per capita)":44939.27,"% of Power from Fossil Fuels (%)":14.444,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":85.556,"% of Agricultural Land (%)":38.6426645399,"% of Forest Land (%)":37.6306509438,"Territory (sq km)":263310,"Average Rainfall (mm/year)":1732,"Corruption (std score)":0.1743465513,"Wheat Production (tonnes)":93719040,"Rye Production (tonnes)":1116969.72,"Potatoes Production (tonnes)":919200,"Meat, Chicken Production (tonnes)":4000,"Avocados Production (tonnes)":271591.974,"Petrol Price (USD/liter)":2.07,"Daily Oil Consumption (barrels/day)":166913,"CO2 Emissions (tonnes per capita)":6.830414187,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":8666.88,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":47.4,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":54.87,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.46,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":76.97,"GDP Per Capita (USD/year)":41005.42087,"Military Expenditure (USD/year)":2262928312,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":2.6,"Average Age (years)":38.172,"Inflation Rate (year, %)":7.2},{"Country":"Costa Rica","Country_clean":"costa rica","Region":"Latin America and Caribbean","Happiness (score 0-10)":6.955,"Median Salary (USD/year)":4016.06,"Average Salary (USD/year)":4427.01,"Lowest Salary (USD/year)":1115.16,"Highest Salary (USD/year)":19613.34,"IQAir_AQI (AQI index)":7.8,"Infant Survival Rate (per 1000 births)":999,"Alcohol Consumption Rate (liters per capita per year)":3.45,"Life Expectancy (years)":79.6,"Netflix":12.99,"Women Safety Index (score 0-1)":0.743,"Average Winter Temperature (C)":22.746216,"Average Summer Temperature (C)":23.510368,"Population (people)":5180829,"Energy Per Capita (kWh per capita)":11957.598,"% of Power from Fossil Fuels (%)":1.979,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":98.021,"% of Agricultural Land (%)":35.4680767724,"% of Forest Land (%)":59.7579318449,"Territory (sq km)":51060,"Average Rainfall (mm/year)":2926,"Corruption (std score)":0.1670125574,"Wheat Production (tonnes)":195069710,"Rye Production (tonnes)":124200,"Potatoes Production (tonnes)":695604,"Meat, Chicken Production (tonnes)":569.91,"Avocados Production (tonnes)":380,"Petrol Price (USD/liter)":1.55,"Daily Oil Consumption (barrels/day)":55000,"CO2 Emissions (tonnes per capita)":1.632471558,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1219.89,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":37.24,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":46.23,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.27,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":33.42,"GDP Per Capita (USD/year)":17671.09535,"Military Expenditure (USD/year)":0,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":11.2,"Average Age (years)":32.406,"Inflation Rate (year, %)":8.3},{"Country":"Kuwait","Country_clean":"kuwait","Region":"Middle East and North Africa","Happiness (score 0-10)":6.951,"Median Salary (USD/year)":null,"Average Salary (USD/year)":null,"Lowest Salary (USD/year)":null,"Highest Salary (USD/year)":null,"IQAir_AQI (AQI index)":29.55,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":74.7,"Netflix":null,"Women Safety Index (score 0-1)":0.742,"Average Winter Temperature (C)":14.190281,"Average Summer Temperature (C)":16.082039,"Population (people)":4268873,"Energy Per Capita (kWh per capita)":103882.75,"% of Power from Fossil Fuels (%)":99.93,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":0.258,"% of Agricultural Land (%)":8.4175084175,"% of Forest Land (%)":0.3507295174,"Territory (sq km)":17820,"Average Rainfall (mm/year)":121,"Corruption (std score)":0.1987654865,"Wheat Production (tonnes)":413533,"Rye Production (tonnes)":433732.2,"Potatoes Production (tonnes)":190000,"Meat, Chicken Production (tonnes)":371700,"Avocados Production (tonnes)":264535,"Petrol Price (USD/liter)":0.34,"Daily Oil Consumption (barrels/day)":359000,"CO2 Emissions (tonnes per capita)":22.0224164,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":7057.23,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":124.6,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":29.68,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.47,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":52.13,"GDP Per Capita (USD/year)":72897.56235,"Military Expenditure (USD/year)":7296266526,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.8,"Average Age (years)":34.008,"Inflation Rate (year, %)":null},{"Country":"Austria","Country_clean":"austria","Region":"Western Europe","Happiness (score 0-10)":6.905,"Median Salary (USD/year)":3572.94,"Average Salary (USD/year)":4016.91,"Lowest Salary (USD/year)":1014.8,"Highest Salary (USD/year)":17864.69,"IQAir_AQI (AQI index)":10.9,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":12.32,"Life Expectancy (years)":81.5,"Netflix":14.67,"Women Safety Index (score 0-1)":0.911,"Average Winter Temperature (C)":-1.6856745,"Average Summer Temperature (C)":-0.967524,"Population (people)":8939617,"Energy Per Capita (kWh per capita)":42685.379,"% of Power from Fossil Fuels (%)":23.713,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":76.287,"% of Agricultural Land (%)":31.4767256423,"% of Forest Land (%)":47.2944740669,"Territory (sq km)":82520,"Average Rainfall (mm/year)":1110,"Corruption (std score)":0.1622093022,"Wheat Production (tonnes)":1041825,"Rye Production (tonnes)":4076,"Potatoes Production (tonnes)":0,"Meat, Chicken Production (tonnes)":125900,"Avocados Production (tonnes)":260,"Petrol Price (USD/liter)":2.13,"Daily Oil Consumption (barrels/day)":262352,"CO2 Emissions (tonnes per capita)":7.293984252,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":9318.15,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":29.72,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":34.15,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":3.03,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":63.22,"GDP Per Capita (USD/year)":55454.68929,"Military Expenditure (USD/year)":3367460383,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.7,"Average Age (years)":44.785,"Inflation Rate (year, %)":8.5},{"Country":"Canada","Country_clean":"canada","Region":"North America and ANZ","Happiness (score 0-10)":6.9,"Median Salary (USD/year)":6311.03,"Average Salary (USD/year)":7352.94,"Lowest Salary (USD/year)":1850,"Highest Salary (USD/year)":32720.59,"IQAir_AQI (AQI index)":7.3,"Infant Survival Rate (per 1000 births)":998,"Alcohol Consumption Rate (liters per capita per year)":8.1,"Life Expectancy (years)":82.2,"Netflix":11.87,"Women Safety Index (score 0-1)":0.885,"Average Winter Temperature (C)":-19.196556,"Average Summer Temperature (C)":-14.700624,"Population (people)":38454327,"Energy Per Capita (kWh per capita)":102160.289,"% of Power from Fossil Fuels (%)":17.368,"% of Power from Nuclear (%)":12.888,"% of Power from Renewables (%)":69.744,"% of Agricultural Land (%)":6.4845767861,"% of Forest Land (%)":39.4701279256,"Territory (sq km)":8788700,"Average Rainfall (mm/year)":537,"Corruption (std score)":0.1705811173,"Wheat Production (tonnes)":96520,"Rye Production (tonnes)":10210326,"Potatoes Production (tonnes)":13000,"Meat, Chicken Production (tonnes)":17203.52,"Avocados Production (tonnes)":31000,"Petrol Price (USD/liter)":1.79,"Daily Oil Consumption (barrels/day)":2486301,"CO2 Emissions (tonnes per capita)":15.43061283,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":9834.67,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":46.66,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":54.91,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.95,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":85.23,"GDP Per Capita (USD/year)":48130.25597,"Military Expenditure (USD/year)":21620598712,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":2,"Average Age (years)":41.923,"Inflation Rate (year, %)":6.8},{"Country":"Belgium","Country_clean":"belgium","Region":"Western Europe","Happiness (score 0-10)":6.894,"Median Salary (USD/year)":5729.39,"Average Salary (USD/year)":6522.2,"Lowest Salary (USD/year)":1997.89,"Highest Salary (USD/year)":27378.44,"IQAir_AQI (AQI index)":11.9,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":12.6,"Life Expectancy (years)":81.1,"Netflix":15.24,"Women Safety Index (score 0-1)":0.902,"Average Winter Temperature (C)":2.9873695,"Average Summer Temperature (C)":4.751282,"Population (people)":11655930,"Energy Per Capita (kWh per capita)":58395.824,"% of Power from Fossil Fuels (%)":27.892,"% of Power from Nuclear (%)":46.659,"% of Power from Renewables (%)":25.449,"% of Agricultural Land (%)":45.1013870542,"% of Forest Land (%)":22.7642007926,"Territory (sq km)":30280,"Average Rainfall (mm/year)":847,"Corruption (std score)":0.1622093022,"Wheat Production (tonnes)":240533,"Rye Production (tonnes)":219,"Potatoes Production (tonnes)":171,"Meat, Chicken Production (tonnes)":14934,"Avocados Production (tonnes)":51351,"Petrol Price (USD/liter)":2.21,"Daily Oil Consumption (barrels/day)":631522,"CO2 Emissions (tonnes per capita)":8.095583954,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":4091.43,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":32.5,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":51.82,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.53,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":73.76,"GDP Per Capita (USD/year)":51407.99834,"Military Expenditure (USD/year)":4959692173,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.7,"Average Age (years)":43.175,"Inflation Rate (year, %)":9.6},{"Country":"Ireland","Country_clean":"ireland","Region":"Western Europe","Happiness (score 0-10)":6.838,"Median Salary (USD/year)":3021.14,"Average Salary (USD/year)":3399.58,"Lowest Salary (USD/year)":856.24,"Highest Salary (USD/year)":15151.16,"IQAir_AQI (AQI index)":7.9,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":10.75,"Life Expectancy (years)":81.4,"Netflix":14.67,"Women Safety Index (score 0-1)":0.892,"Average Winter Temperature (C)":5.0232058,"Average Summer Temperature (C)":7.5741353,"Population (people)":5023109,"Energy Per Capita (kWh per capita)":37761.402,"% of Power from Fossil Fuels (%)":61.381,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":38.619,"% of Agricultural Land (%)":62.9554362026,"% of Forest Land (%)":11.4097837132,"Territory (sq km)":68890,"Average Rainfall (mm/year)":1118,"Corruption (std score)":0.1622093022,"Wheat Production (tonnes)":1290.74,"Rye Production (tonnes)":46331.4,"Potatoes Production (tonnes)":294,"Meat, Chicken Production (tonnes)":2790,"Avocados Production (tonnes)":84114,"Petrol Price (USD/liter)":2.07,"Daily Oil Consumption (barrels/day)":152404,"CO2 Emissions (tonnes per capita)":7.245143221,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":7746.63,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":48.43,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":59.14,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.35,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":84.3,"GDP Per Capita (USD/year)":83203.39468,"Military Expenditure (USD/year)":1207582357,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.7,"Average Age (years)":38.077,"Inflation Rate (year, %)":7.8},{"Country":"Czechia","Country_clean":"czech republic","Region":"Central and Eastern Europe","Happiness (score 0-10)":6.822,"Median Salary (USD/year)":2310.03,"Average Salary (USD/year)":2653.06,"Lowest Salary (USD/year)":668.69,"Highest Salary (USD/year)":11810.68,"IQAir_AQI (AQI index)":14.7,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":12.68,"Life Expectancy (years)":78.8,"Netflix":11.49,"Women Safety Index (score 0-1)":0.884,"Average Winter Temperature (C)":-0.254366,"Average Summer Temperature (C)":1.0374577,"Population (people)":10493986,"Energy Per Capita (kWh per capita)":44242.148,"% of Power from Fossil Fuels (%)":51.251,"% of Power from Nuclear (%)":36.412,"% of Power from Renewables (%)":12.337,"% of Agricultural Land (%)":45.7305605114,"% of Forest Land (%)":34.7066980209,"Territory (sq km)":77186.83,"Average Rainfall (mm/year)":677,"Corruption (std score)":0.1467373222,"Wheat Production (tonnes)":122501976,"Rye Production (tonnes)":5116,"Potatoes Production (tonnes)":631,"Meat, Chicken Production (tonnes)":123700,"Avocados Production (tonnes)":4200,"Petrol Price (USD/liter)":2,"Daily Oil Consumption (barrels/day)":179956,"CO2 Emissions (tonnes per capita)":9.022786158,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":7798.05,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":47.45,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":22.72,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.66,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":43.26,"GDP Per Capita (USD/year)":39743.59709,"Military Expenditure (USD/year)":2710017583,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.7,"Average Age (years)":42.906,"Inflation Rate (year, %)":15.1},{"Country":"Lithuania","Country_clean":"lithuania","Region":"Central and Eastern Europe","Happiness (score 0-10)":6.818,"Median Salary (USD/year)":903.87466,"Average Salary (USD/year)":997.90189,"Lowest Salary (USD/year)":251.75032,"Highest Salary (USD/year)":4428.3792,"IQAir_AQI (AQI index)":10.5,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":15.19,"Life Expectancy (years)":73.6,"Netflix":11.29,"Women Safety Index (score 0-1)":0.886,"Average Winter Temperature (C)":-4.2955937,"Average Summer Temperature (C)":1.70184,"Population (people)":2750055,"Energy Per Capita (kWh per capita)":23151.053,"% of Power from Fossil Fuels (%)":25.18,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":74.82,"% of Agricultural Land (%)":46.9222168983,"% of Forest Land (%)":35.1807490816,"Territory (sq km)":62610,"Average Rainfall (mm/year)":656,"Corruption (std score)":0.1467373222,"Wheat Production (tonnes)":15983841,"Rye Production (tonnes)":21420,"Potatoes Production (tonnes)":26995,"Meat, Chicken Production (tonnes)":1391220,"Avocados Production (tonnes)":17200,"Petrol Price (USD/liter)":2.14,"Daily Oil Consumption (barrels/day)":61612,"CO2 Emissions (tonnes per capita)":4.198076022,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":4120.85,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":32.99,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":14.55,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.9,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":52.69,"GDP Per Capita (USD/year)":35461.3591,"Military Expenditure (USD/year)":1030416770,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":3.7,"Average Age (years)":42.157,"Inflation Rate (year, %)":19.7},{"Country":"United Kingdom","Country_clean":"united kingdom","Region":"Western Europe","Happiness (score 0-10)":6.749,"Median Salary (USD/year)":6300,"Average Salary (USD/year)":7235.37,"Lowest Salary (USD/year)":1829.27,"Highest Salary (USD/year)":32214.63,"IQAir_AQI (AQI index)":8.2,"Infant Survival Rate (per 1000 births)":997,"Alcohol Consumption Rate (liters per capita per year)":10.66,"Life Expectancy (years)":81.2,"Netflix":13.2,"Women Safety Index (score 0-1)":0.86,"Average Winter Temperature (C)":4.4938073,"Average Summer Temperature (C)":6.856918,"Population (people)":67508936,"Energy Per Capita (kWh per capita)":30097.885,"% of Power from Fossil Fuels (%)":43.729,"% of Power from Nuclear (%)":14.823,"% of Power from Renewables (%)":41.448,"% of Agricultural Land (%)":71.1575290373,"% of Forest Land (%)":13.2214553797,"Territory (sq km)":241930,"Average Rainfall (mm/year)":1220,"Corruption (std score)":0.1743465513,"Wheat Production (tonnes)":14336835.8,"Rye Production (tonnes)":56256.17,"Potatoes Production (tonnes)":157125,"Meat, Chicken Production (tonnes)":70221,"Avocados Production (tonnes)":238651.706,"Petrol Price (USD/liter)":2.22,"Daily Oil Consumption (barrels/day)":1583896,"CO2 Emissions (tonnes per capita)":5.220514488,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":14704.63,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":52.08,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":35.92,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.12,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":79.95,"GDP Per Capita (USD/year)":45973.5735,"Military Expenditure (USD/year)":49997192521,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.1,"Average Age (years)":40.45,"Inflation Rate (year, %)":7.9},{"Country":"Slovenia","Country_clean":"slovenia","Region":"Central and Eastern Europe","Happiness (score 0-10)":6.743,"Median Salary (USD/year)":1934.46,"Average Salary (USD/year)":2093.02,"Lowest Salary (USD/year)":528.54,"Highest Salary (USD/year)":9302.33,"IQAir_AQI (AQI index)":13.3,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":10.46,"Life Expectancy (years)":88,"Netflix":null,"Women Safety Index (score 0-1)":0.824,"Average Winter Temperature (C)":0.9988481,"Average Summer Temperature (C)":1.4752173,"Population (people)":2119844,"Energy Per Capita (kWh per capita)":34391.094,"% of Power from Fossil Fuels (%)":28.259,"% of Power from Nuclear (%)":42.125,"% of Power from Renewables (%)":29.616,"% of Agricultural Land (%)":30.3410738762,"% of Forest Land (%)":61.3711140025,"Territory (sq km)":20136.4,"Average Rainfall (mm/year)":1162,"Corruption (std score)":0.1467373222,"Wheat Production (tonnes)":645031.8,"Rye Production (tonnes)":168.6,"Potatoes Production (tonnes)":7326446,"Meat, Chicken Production (tonnes)":4000,"Avocados Production (tonnes)":163.4,"Petrol Price (USD/liter)":1.62,"Daily Oil Consumption (barrels/day)":52298,"CO2 Emissions (tonnes per capita)":6.512209378,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":4634.13,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":44.77,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":34.72,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.36,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":44.26,"GDP Per Capita (USD/year)":38048.78466,"Military Expenditure (USD/year)":529496122.7,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.5,"Average Age (years)":44.555,"Inflation Rate (year, %)":8.8},{"Country":"United Arab Emirates","Country_clean":"united arab emirates","Region":"Middle East and North Africa","Happiness (score 0-10)":6.733,"Median Salary (USD/year)":3324.25,"Average Salary (USD/year)":3896.46,"Lowest Salary (USD/year)":708.45,"Highest Salary (USD/year)":18637.6,"IQAir_AQI (AQI index)":35.35,"Infant Survival Rate (per 1000 births)":999,"Alcohol Consumption Rate (liters per capita per year)":1.91,"Life Expectancy (years)":77.1,"Netflix":13.99,"Women Safety Index (score 0-1)":0.868,"Average Winter Temperature (C)":20.363506,"Average Summer Temperature (C)":20.625269,"Population (people)":9441129,"Energy Per Capita (kWh per capita)":148576.547,"% of Power from Fossil Fuels (%)":82.508,"% of Power from Nuclear (%)":12.992,"% of Power from Renewables (%)":4.5,"% of Agricultural Land (%)":5.5133976345,"% of Forest Land (%)":4.4677555618,"Territory (sq km)":71020,"Average Rainfall (mm/year)":78,"Corruption (std score)":0.1655614674,"Wheat Production (tonnes)":46614014.4,"Rye Production (tonnes)":72513,"Potatoes Production (tonnes)":136000,"Meat, Chicken Production (tonnes)":60000,"Avocados Production (tonnes)":43039.038,"Petrol Price (USD/liter)":1.1,"Daily Oil Consumption (barrels/day)":896000,"CO2 Emissions (tonnes per capita)":19.32956328,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":3752.32,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":74.01,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":97.02,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.24,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":81.68,"GDP Per Capita (USD/year)":75075.25741,"Military Expenditure (USD/year)":null,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.7,"Average Age (years)":34.381,"Inflation Rate (year, %)":8},{"Country":"United States","Country_clean":"united states","Region":"North America and ANZ","Happiness (score 0-10)":6.725,"Median Salary (USD/year)":6966,"Average Salary (USD/year)":7925,"Lowest Salary (USD/year)":2000,"Highest Salary (USD/year)":35250,"IQAir_AQI (AQI index)":9.7,"Infant Survival Rate (per 1000 births)":977,"Alcohol Consumption Rate (liters per capita per year)":8.82,"Life Expectancy (years)":79.3,"Netflix":13.99,"Women Safety Index (score 0-1)":0.823,"Average Winter Temperature (C)":-2.7272227,"Average Summer Temperature (C)":0.94223034,"Population (people)":338289857,"Energy Per Capita (kWh per capita)":78754.273,"% of Power from Fossil Fuels (%)":59.523,"% of Power from Nuclear (%)":17.956,"% of Power from Renewables (%)":22.521,"% of Agricultural Land (%)":44.3633673539,"% of Forest Land (%)":33.866926412,"Territory (sq km)":9147420,"Average Rainfall (mm/year)":715,"Corruption (std score)":0.1590943187,"Wheat Production (tonnes)":110,"Rye Production (tonnes)":12326464,"Potatoes Production (tonnes)":2525383,"Meat, Chicken Production (tonnes)":361499,"Avocados Production (tonnes)":1219.74,"Petrol Price (USD/liter)":1.37,"Daily Oil Consumption (barrels/day)":19687287,"CO2 Emissions (tonnes per capita)":14.67341061,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":14784.44,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":104.82,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":69.77,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.72,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":100,"GDP Per Capita (USD/year)":62794.58565,"Military Expenditure (USD/year)":649000000000,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":6.5,"Average Age (years)":37.868,"Inflation Rate (year, %)":8},{"Country":"Germany","Country_clean":"germany","Region":"Western Europe","Happiness (score 0-10)":6.719,"Median Salary (USD/year)":3731.5,"Average Salary (USD/year)":4048.63,"Lowest Salary (USD/year)":1014.8,"Highest Salary (USD/year)":17970.4,"IQAir_AQI (AQI index)":9.85,"Infant Survival Rate (per 1000 births)":998,"Alcohol Consumption Rate (liters per capita per year)":11.03,"Life Expectancy (years)":81,"Netflix":14.67,"Women Safety Index (score 0-1)":0.871,"Average Winter Temperature (C)":1.539955,"Average Summer Temperature (C)":3.0275564,"Population (people)":83369843,"Energy Per Capita (kWh per capita)":40977.492,"% of Power from Fossil Fuels (%)":50.783,"% of Power from Nuclear (%)":6.27,"% of Power from Renewables (%)":42.947,"% of Agricultural Land (%)":47.485617791,"% of Forest Land (%)":32.6826755202,"Territory (sq km)":349390,"Average Rainfall (mm/year)":700,"Corruption (std score)":0.1622093022,"Wheat Production (tonnes)":156400,"Rye Production (tonnes)":601991,"Potatoes Production (tonnes)":138832220,"Meat, Chicken Production (tonnes)":14429,"Avocados Production (tonnes)":2073,"Petrol Price (USD/liter)":2.02,"Daily Oil Consumption (barrels/day)":2383393,"CO2 Emissions (tonnes per capita)":7.911621016,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":8604.37,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":40.57,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":40.24,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.52,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":63.22,"GDP Per Capita (USD/year)":53074.54012,"Military Expenditure (USD/year)":49470627811,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.8,"Average Age (years)":47.918,"Inflation Rate (year, %)":6.9},{"Country":"Mexico","Country_clean":"mexico","Region":"Latin America and Caribbean","Happiness (score 0-10)":6.678,"Median Salary (USD/year)":1681.97,"Average Salary (USD/year)":1917.34,"Lowest Salary (USD/year)":482.78,"Highest Salary (USD/year)":8495.98,"IQAir_AQI (AQI index)":16.3,"Infant Survival Rate (per 1000 births)":970,"Alcohol Consumption Rate (liters per capita per year)":5.26,"Life Expectancy (years)":76.7,"Netflix":10.43,"Women Safety Index (score 0-1)":0.551,"Average Winter Temperature (C)":15.8056965,"Average Summer Temperature (C)":17.122166,"Population (people)":127504125,"Energy Per Capita (kWh per capita)":19009.186,"% of Power from Fossil Fuels (%)":74.097,"% of Power from Nuclear (%)":2.964,"% of Power from Renewables (%)":22.938,"% of Agricultural Land (%)":49.9632192186,"% of Forest Land (%)":33.7273678335,"Territory (sq km)":1943950,"Average Rainfall (mm/year)":758,"Corruption (std score)":0.1599350423,"Wheat Production (tonnes)":1744,"Rye Production (tonnes)":260323.2,"Potatoes Production (tonnes)":10968420,"Meat, Chicken Production (tonnes)":53300,"Avocados Production (tonnes)":2376648.5,"Petrol Price (USD/liter)":1.15,"Daily Oil Consumption (barrels/day)":2052607,"CO2 Emissions (tonnes per capita)":3.521600048,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":2769.15,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":45.15,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":26.67,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.07,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":39.97,"GDP Per Capita (USD/year)":19844.64567,"Military Expenditure (USD/year)":6567509336,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":28.4,"Average Age (years)":31.893,"Inflation Rate (year, %)":7.9},{"Country":"Uruguay","Country_clean":"uruguay","Region":"Latin America and Caribbean","Happiness (score 0-10)":6.611,"Median Salary (USD/year)":773.64,"Average Salary (USD/year)":862.2,"Lowest Salary (USD/year)":217.24,"Highest Salary (USD/year)":3829.12,"IQAir_AQI (AQI index)":14.2,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":6.03,"Life Expectancy (years)":77,"Netflix":12.99,"Women Safety Index (score 0-1)":0.748,"Average Winter Temperature (C)":20.111822,"Average Summer Temperature (C)":23.139511,"Population (people)":3422794,"Energy Per Capita (kWh per capita)":18316.926,"% of Power from Fossil Fuels (%)":15.557,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":84.443,"% of Agricultural Land (%)":80.3885555936,"% of Forest Land (%)":11.7243743572,"Territory (sq km)":175020,"Average Rainfall (mm/year)":1300,"Corruption (std score)":0.1677868664,"Wheat Production (tonnes)":223447.024,"Rye Production (tonnes)":7181.2,"Potatoes Production (tonnes)":12261,"Meat, Chicken Production (tonnes)":3200,"Avocados Production (tonnes)":36219.6,"Petrol Price (USD/liter)":2.02,"Daily Oil Consumption (barrels/day)":53000,"CO2 Emissions (tonnes per capita)":1.874784543,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":2776.42,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":46.74,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":40.14,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.8,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":52.45,"GDP Per Capita (USD/year)":23572.17746,"Military Expenditure (USD/year)":1168130814,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":9.7,"Average Age (years)":35.641,"Inflation Rate (year, %)":9.1},{"Country":"France","Country_clean":"france","Region":"Western Europe","Happiness (score 0-10)":6.609,"Median Salary (USD/year)":3769.56,"Average Salary (USD/year)":4377.38,"Lowest Salary (USD/year)":1100.42,"Highest Salary (USD/year)":19467.23,"IQAir_AQI (AQI index)":9.4,"Infant Survival Rate (per 1000 births)":998,"Alcohol Consumption Rate (liters per capita per year)":11.5,"Life Expectancy (years)":82.4,"Netflix":15.24,"Women Safety Index (score 0-1)":0.864,"Average Winter Temperature (C)":7.6805277,"Average Summer Temperature (C)":7.854504,"Population (people)":64626628,"Energy Per Capita (kWh per capita)":36051.793,"% of Power from Fossil Fuels (%)":12.154,"% of Power from Nuclear (%)":63.304,"% of Power from Renewables (%)":24.542,"% of Agricultural Land (%)":52.1475462829,"% of Forest Land (%)":31.6613612829,"Territory (sq km)":547557,"Average Rainfall (mm/year)":867,"Corruption (std score)":0.1622093022,"Wheat Production (tonnes)":332400,"Rye Production (tonnes)":125870,"Potatoes Production (tonnes)":402966,"Meat, Chicken Production (tonnes)":10075471,"Avocados Production (tonnes)":28385.3,"Petrol Price (USD/liter)":2.19,"Daily Oil Consumption (barrels/day)":1705568,"CO2 Emissions (tonnes per capita)":4.468770089,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":13043.59,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":37.7,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":31.36,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.88,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":63.22,"GDP Per Capita (USD/year)":45342.39574,"Military Expenditure (USD/year)":63799676593,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.3,"Average Age (years)":42.142,"Inflation Rate (year, %)":5.2},{"Country":"Saudi Arabia","Country_clean":"saudi arabia","Region":"Middle East and North Africa","Happiness (score 0-10)":6.594,"Median Salary (USD/year)":3840,"Average Salary (USD/year)":4480,"Lowest Salary (USD/year)":1128,"Highest Salary (USD/year)":19893.33,"IQAir_AQI (AQI index)":32.75,"Infant Survival Rate (per 1000 births)":993,"Alcohol Consumption Rate (liters per capita per year)":0.09,"Life Expectancy (years)":74.5,"Netflix":null,"Women Safety Index (score 0-1)":0.737,"Average Winter Temperature (C)":16.798635,"Average Summer Temperature (C)":17.893715,"Population (people)":36408820,"Energy Per Capita (kWh per capita)":87707.289,"% of Power from Fossil Fuels (%)":99.792,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":0.208,"% of Agricultural Land (%)":80.7730416944,"% of Forest Land (%)":0.4544841349,"Territory (sq km)":2149690,"Average Rainfall (mm/year)":59,"Corruption (std score)":0.1871376336,"Wheat Production (tonnes)":229775,"Rye Production (tonnes)":70119.8,"Potatoes Production (tonnes)":738265,"Meat, Chicken Production (tonnes)":5332,"Avocados Production (tonnes)":8802.4,"Petrol Price (USD/liter)":0.62,"Daily Oil Consumption (barrels/day)":3302000,"CO2 Emissions (tonnes per capita)":15.28457873,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1758.36,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":96.34,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":72.34,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.78,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":53.21,"GDP Per Capita (USD/year)":55335.67959,"Military Expenditure (USD/year)":67554666667,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.8,"Average Age (years)":27.524,"Inflation Rate (year, %)":2.5},{"Country":"Kosovo","Country_clean":"kosovo","Region":"Central and Eastern Europe","Happiness (score 0-10)":6.561,"Median Salary (USD/year)":null,"Average Salary (USD/year)":null,"Lowest Salary (USD/year)":null,"Highest Salary (USD/year)":null,"IQAir_AQI (AQI index)":12.2,"Infant Survival Rate (per 1000 births)":null,"Alcohol Consumption Rate (liters per capita per year)":null,"Life Expectancy (years)":null,"Netflix":null,"Women Safety Index (score 0-1)":null,"Average Winter Temperature (C)":1.4193249,"Average Summer Temperature (C)":1.8427454,"Population (people)":null,"Energy Per Capita (kWh per capita)":16776.646,"% of Power from Fossil Fuels (%)":93.71,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":6.29,"% of Agricultural Land (%)":null,"% of Forest Land (%)":null,"Territory (sq km)":null,"Average Rainfall (mm/year)":null,"Corruption (std score)":0.170497179,"Wheat Production (tonnes)":null,"Rye Production (tonnes)":null,"Potatoes Production (tonnes)":null,"Meat, Chicken Production (tonnes)":null,"Avocados Production (tonnes)":null,"Petrol Price (USD/liter)":null,"Daily Oil Consumption (barrels/day)":null,"CO2 Emissions (tonnes per capita)":null,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1795.42,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":21.64,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":17.69,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.07,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":21.07,"GDP Per Capita (USD/year)":11348.36345,"Military Expenditure (USD/year)":63344074.22,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":2.4,"Average Age (years)":null,"Inflation Rate (year, %)":null},{"Country":"Singapore","Country_clean":"singapore","Region":"Southeast Asia","Happiness (score 0-10)":6.523,"Median Salary (USD/year)":5647.06,"Average Salary (USD/year)":6235.29,"Lowest Salary (USD/year)":1573.53,"Highest Salary (USD/year)":27720.59,"IQAir_AQI (AQI index)":13.8,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":1.79,"Life Expectancy (years)":83.1,"Netflix":12.81,"Women Safety Index (score 0-1)":0.887,"Average Winter Temperature (C)":null,"Average Summer Temperature (C)":null,"Population (people)":5975689,"Energy Per Capita (kWh per capita)":147084.844,"% of Power from Fossil Fuels (%)":97.591,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":2.409,"% of Agricultural Land (%)":0.9192200557,"% of Forest Land (%)":21.43454039,"Territory (sq km)":718,"Average Rainfall (mm/year)":2497,"Corruption (std score)":0.1537519991,"Wheat Production (tonnes)":null,"Rye Production (tonnes)":null,"Potatoes Production (tonnes)":null,"Meat, Chicken Production (tonnes)":null,"Avocados Production (tonnes)":null,"Petrol Price (USD/liter)":2.3,"Daily Oil Consumption (barrels/day)":1357000,"CO2 Emissions (tonnes per capita)":8.307079491,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":20752.74,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":107.93,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":35.02,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.49,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":66.55,"GDP Per Capita (USD/year)":101531.6302,"Military Expenditure (USD/year)":10841000269,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.2,"Average Age (years)":45.71,"Inflation Rate (year, %)":6.1},{"Country":"Taiwan Province of China","Country_clean":"taiwan province of china","Region":"East Asia","Happiness (score 0-10)":6.503,"Median Salary (USD/year)":3684.93,"Average Salary (USD/year)":4027.4,"Lowest Salary (USD/year)":1015.07,"Highest Salary (USD/year)":17945.21,"IQAir_AQI (AQI index)":28.65,"Infant Survival Rate (per 1000 births)":994,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":76,"Netflix":11.9,"Women Safety Index (score 0-1)":0.7,"Average Winter Temperature (C)":-6.3306623,"Average Summer Temperature (C)":-5.6608214,"Population (people)":1425887337,"Energy Per Capita (kWh per capita)":31051.48,"% of Power from Fossil Fuels (%)":64.602,"% of Power from Nuclear (%)":4.725,"% of Power from Renewables (%)":30.673,"% of Agricultural Land (%)":55.4626494294,"% of Forest Land (%)":23.6315282679,"Territory (sq km)":9388210,"Average Rainfall (mm/year)":645,"Corruption (std score)":0.1543876231,"Wheat Production (tonnes)":13631,"Rye Production (tonnes)":800,"Potatoes Production (tonnes)":0,"Meat, Chicken Production (tonnes)":6155.65,"Avocados Production (tonnes)":88.19,"Petrol Price (USD/liter)":1.43,"Daily Oil Consumption (barrels/day)":12791553,"CO2 Emissions (tonnes per capita)":7.605936961,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":17746.11,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":63.49,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":17.07,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.53,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":39.86,"GDP Per Capita (USD/year)":18236.61298,"Military Expenditure (USD/year)":250000000000,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.5,"Average Age (years)":37.091,"Inflation Rate (year, %)":2},{"Country":"Romania","Country_clean":"romania","Region":"Central and Eastern Europe","Happiness (score 0-10)":6.491,"Median Salary (USD/year)":1739.87,"Average Salary (USD/year)":1921.11,"Lowest Salary (USD/year)":484.01,"Highest Salary (USD/year)":8550.11,"IQAir_AQI (AQI index)":15.4,"Infant Survival Rate (per 1000 births)":998,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":75,"Netflix":11.29,"Women Safety Index (score 0-1)":0.8,"Average Winter Temperature (C)":-0.022084355,"Average Summer Temperature (C)":1.9483956,"Population (people)":19659267,"Energy Per Capita (kWh per capita)":18346.869,"% of Power from Fossil Fuels (%)":37.815,"% of Power from Nuclear (%)":20.036,"% of Power from Renewables (%)":42.149,"% of Agricultural Land (%)":56.8454450626,"% of Forest Land (%)":30.1158292768,"Territory (sq km)":230080,"Average Rainfall (mm/year)":637,"Corruption (std score)":0.1467373222,"Wheat Production (tonnes)":32129760,"Rye Production (tonnes)":137059.6,"Potatoes Production (tonnes)":119834,"Meat, Chicken Production (tonnes)":6314210,"Avocados Production (tonnes)":17978,"Petrol Price (USD/liter)":1.82,"Daily Oil Consumption (barrels/day)":200000,"CO2 Emissions (tonnes per capita)":3.817434477,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":2526.67,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":45.69,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":8.37,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.87,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":42.82,"GDP Per Capita (USD/year)":28206.35705,"Military Expenditure (USD/year)":4608673550,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.5,"Average Age (years)":42.18,"Inflation Rate (year, %)":13.8},{"Country":"El Salvador","Country_clean":"el salvador","Region":"Latin America and Caribbean","Happiness (score 0-10)":6.469,"Median Salary (USD/year)":1470,"Average Salary (USD/year)":1710,"Lowest Salary (USD/year)":430,"Highest Salary (USD/year)":7610,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":998,"Alcohol Consumption Rate (liters per capita per year)":2.52,"Life Expectancy (years)":73.5,"Netflix":null,"Women Safety Index (score 0-1)":0.566,"Average Winter Temperature (C)":25.628748,"Average Summer Temperature (C)":27.070652,"Population (people)":6336392,"Energy Per Capita (kWh per capita)":7076.433,"% of Power from Fossil Fuels (%)":26.772,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":73.228,"% of Agricultural Land (%)":57.7075289575,"% of Forest Land (%)":27.9623552124,"Territory (sq km)":20720,"Average Rainfall (mm/year)":1784,"Corruption (std score)":0.1591664106,"Wheat Production (tonnes)":439000,"Rye Production (tonnes)":9716,"Potatoes Production (tonnes)":104795630,"Meat, Chicken Production (tonnes)":1130102,"Avocados Production (tonnes)":93872.16,"Petrol Price (USD/liter)":1.14,"Daily Oil Consumption (barrels/day)":52000,"CO2 Emissions (tonnes per capita)":1.208637136,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1068,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":31.67,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":41,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.64,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":25,"GDP Per Capita (USD/year)":8331.804142,"Military Expenditure (USD/year)":266460000,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":37.2,"Average Age (years)":27.286,"Inflation Rate (year, %)":7.2},{"Country":"Estonia","Country_clean":"estonia","Region":"Central and Eastern Europe","Happiness (score 0-10)":6.448,"Median Salary (USD/year)":2579.28,"Average Salary (USD/year)":2906.98,"Lowest Salary (USD/year)":729.39,"Highest Salary (USD/year)":12896.41,"IQAir_AQI (AQI index)":5.45,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":77.6,"Netflix":11.29,"Women Safety Index (score 0-1)":0.892,"Average Winter Temperature (C)":-6.8556023,"Average Summer Temperature (C)":1.2210779,"Population (people)":1326062,"Energy Per Capita (kWh per capita)":46504.863,"% of Power from Fossil Fuels (%)":55.995,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":44.005,"% of Agricultural Land (%)":23.0877192982,"% of Forest Land (%)":57.0385964912,"Territory (sq km)":42750,"Average Rainfall (mm/year)":626,"Corruption (std score)":0.1467373222,"Wheat Production (tonnes)":583000,"Rye Production (tonnes)":20000,"Potatoes Production (tonnes)":82505816,"Meat, Chicken Production (tonnes)":2425173,"Avocados Production (tonnes)":6500,"Petrol Price (USD/liter)":2.21,"Daily Oil Consumption (barrels/day)":28855,"CO2 Emissions (tonnes per capita)":7.672277909,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":4241.03,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":54.35,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":27.23,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.1,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":63.22,"GDP Per Capita (USD/year)":35973.77646,"Military Expenditure (USD/year)":618486125.4,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":3.2,"Average Age (years)":40.713,"Inflation Rate (year, %)":19.4},{"Country":"Poland","Country_clean":"poland","Region":"Central and Eastern Europe","Happiness (score 0-10)":6.442,"Median Salary (USD/year)":1496.57,"Average Salary (USD/year)":1736.84,"Lowest Salary (USD/year)":437.07,"Highest Salary (USD/year)":7734.55,"IQAir_AQI (AQI index)":19.05,"Infant Survival Rate (per 1000 births)":998,"Alcohol Consumption Rate (liters per capita per year)":10.71,"Life Expectancy (years)":77.5,"Netflix":10.58,"Women Safety Index (score 0-1)":0.859,"Average Winter Temperature (C)":-0.49168286,"Average Summer Temperature (C)":2.4689384,"Population (people)":39857145,"Energy Per Capita (kWh per capita)":30065.42,"% of Power from Fossil Fuels (%)":78.957,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":21.043,"% of Agricultural Land (%)":47.3683763476,"% of Forest Land (%)":31.0192747468,"Territory (sq km)":306100,"Average Rainfall (mm/year)":600,"Corruption (std score)":0.1467373222,"Wheat Production (tonnes)":452089,"Rye Production (tonnes)":208680.516,"Potatoes Production (tonnes)":260,"Meat, Chicken Production (tonnes)":2000,"Avocados Production (tonnes)":153457.498,"Petrol Price (USD/liter)":1.8,"Daily Oil Consumption (barrels/day)":582161,"CO2 Emissions (tonnes per capita)":7.773641839,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":4469.94,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":30.24,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":13.45,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.36,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":45.07,"GDP Per Capita (USD/year)":31336.6035,"Military Expenditure (USD/year)":11596155291,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.7,"Average Age (years)":41.738,"Inflation Rate (year, %)":14.4},{"Country":"Spain","Country_clean":"spain","Region":"Western Europe","Happiness (score 0-10)":6.421,"Median Salary (USD/year)":2579.28,"Average Salary (USD/year)":2875.26,"Lowest Salary (USD/year)":877.38,"Highest Salary (USD/year)":12050.74,"IQAir_AQI (AQI index)":8.9,"Infant Survival Rate (per 1000 births)":999,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":82.8,"Netflix":14.67,"Women Safety Index (score 0-1)":0.859,"Average Winter Temperature (C)":7.264159,"Average Summer Temperature (C)":8.429356,"Population (people)":47558630,"Energy Per Capita (kWh per capita)":33615.332,"% of Power from Fossil Fuels (%)":37.267,"% of Power from Nuclear (%)":20.515,"% of Power from Renewables (%)":42.218,"% of Agricultural Land (%)":52.4848941208,"% of Forest Land (%)":37.1727521093,"Territory (sq km)":499733.244,"Average Rainfall (mm/year)":636,"Corruption (std score)":0.1622093022,"Wheat Production (tonnes)":68301098.8,"Rye Production (tonnes)":179520.532,"Potatoes Production (tonnes)":4600000,"Meat, Chicken Production (tonnes)":400,"Avocados Production (tonnes)":119712.856,"Petrol Price (USD/liter)":2.21,"Daily Oil Consumption (barrels/day)":1290063,"CO2 Emissions (tonnes per capita)":5.09135092,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":5612.64,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":43.57,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":38.1,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.35,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":52.69,"GDP Per Capita (USD/year)":39715.43906,"Military Expenditure (USD/year)":18248291491,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.6,"Average Age (years)":43.794,"Inflation Rate (year, %)":8.4},{"Country":"Serbia","Country_clean":"serbia","Region":"Central and Eastern Europe","Happiness (score 0-10)":6.411,"Median Salary (USD/year)":1120.04,"Average Salary (USD/year)":1273.6,"Lowest Salary (USD/year)":320.66,"Highest Salary (USD/year)":5654.41,"IQAir_AQI (AQI index)":28.2,"Infant Survival Rate (per 1000 births)":999,"Alcohol Consumption Rate (liters per capita per year)":9.09,"Life Expectancy (years)":75.6,"Netflix":null,"Women Safety Index (score 0-1)":0.835,"Average Winter Temperature (C)":1.7233353,"Average Summer Temperature (C)":2.3860748,"Population (people)":7221365,"Energy Per Capita (kWh per capita)":27640.852,"% of Power from Fossil Fuels (%)":70.509,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":29.491,"% of Agricultural Land (%)":41.4436912831,"% of Forest Land (%)":32.3812581758,"Territory (sq km)":84090,"Average Rainfall (mm/year)":null,"Corruption (std score)":0.1620248556,"Wheat Production (tonnes)":3997110.2,"Rye Production (tonnes)":0,"Potatoes Production (tonnes)":1879008,"Meat, Chicken Production (tonnes)":387376.3,"Avocados Production (tonnes)":12.308,"Petrol Price (USD/liter)":1.76,"Daily Oil Consumption (barrels/day)":74000,"CO2 Emissions (tonnes per capita)":6.616046939,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":3218.58,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":30.56,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":24.23,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.84,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":34.56,"GDP Per Capita (USD/year)":17434.91613,"Military Expenditure (USD/year)":904323391.5,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1,"Average Age (years)":39.832,"Inflation Rate (year, %)":12},{"Country":"Chile","Country_clean":"chile","Region":"Latin America and Caribbean","Happiness (score 0-10)":6.36,"Median Salary (USD/year)":1890.4,"Average Salary (USD/year)":2090.56,"Lowest Salary (USD/year)":525.98,"Highest Salary (USD/year)":9274.09,"IQAir_AQI (AQI index)":17.2,"Infant Survival Rate (per 1000 births)":998,"Alcohol Consumption Rate (liters per capita per year)":7.16,"Life Expectancy (years)":85,"Netflix":9.91,"Women Safety Index (score 0-1)":0.736,"Average Winter Temperature (C)":12.694138,"Average Summer Temperature (C)":14.701271,"Population (people)":19603733,"Energy Per Capita (kWh per capita)":25342.707,"% of Power from Fossil Fuels (%)":47.044,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":52.956,"% of Agricultural Land (%)":14.250277056,"% of Forest Land (%)":24.6574727113,"Territory (sq km)":743532,"Average Rainfall (mm/year)":1522,"Corruption (std score)":0.1599350423,"Wheat Production (tonnes)":102965304,"Rye Production (tonnes)":108500,"Potatoes Production (tonnes)":25363,"Meat, Chicken Production (tonnes)":230758.84,"Avocados Production (tonnes)":50,"Petrol Price (USD/liter)":1.39,"Daily Oil Consumption (barrels/day)":351989,"CO2 Emissions (tonnes per capita)":4.821118299,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":2279.57,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":34.63,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":23.72,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.11,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":45.27,"GDP Per Capita (USD/year)":25222.52778,"Military Expenditure (USD/year)":5570724563,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":4.8,"Average Age (years)":35.176,"Inflation Rate (year, %)":11.6},{"Country":"Panama","Country_clean":"panama","Region":"Latin America and Caribbean","Happiness (score 0-10)":6.358,"Median Salary (USD/year)":1890,"Average Salary (USD/year)":2130,"Lowest Salary (USD/year)":540,"Highest Salary (USD/year)":9460,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":999,"Alcohol Consumption Rate (liters per capita per year)":6.74,"Life Expectancy (years)":77.8,"Netflix":null,"Women Safety Index (score 0-1)":0.757,"Average Winter Temperature (C)":24.940985,"Average Summer Temperature (C)":25.922495,"Population (people)":4408581,"Energy Per Capita (kWh per capita)":27067.068,"% of Power from Fossil Fuels (%)":25.469,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":74.531,"% of Agricultural Land (%)":29.4057158264,"% of Forest Land (%)":56.6517026153,"Territory (sq km)":74180,"Average Rainfall (mm/year)":2928,"Corruption (std score)":0.1670125574,"Wheat Production (tonnes)":12000,"Rye Production (tonnes)":7.6,"Potatoes Production (tonnes)":1280086,"Meat, Chicken Production (tonnes)":3500,"Avocados Production (tonnes)":16528.4,"Petrol Price (USD/liter)":1.45,"Daily Oil Consumption (barrels/day)":155000,"CO2 Emissions (tonnes per capita)":3.141454996,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":2200,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":39.36,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":46.98,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.66,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":52.5,"GDP Per Capita (USD/year)":25553.69671,"Military Expenditure (USD/year)":0,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":11.1,"Average Age (years)":30.107,"Inflation Rate (year, %)":2.9},{"Country":"Malta","Country_clean":"malta","Region":"Western Europe","Happiness (score 0-10)":6.346,"Median Salary (USD/year)":4439.75,"Average Salary (USD/year)":4904.86,"Lowest Salary (USD/year)":1236.79,"Highest Salary (USD/year)":21775.9,"IQAir_AQI (AQI index)":12.1,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":8.49,"Life Expectancy (years)":81.7,"Netflix":null,"Women Safety Index (score 0-1)":0.846,"Average Winter Temperature (C)":null,"Average Summer Temperature (C)":null,"Population (people)":533286,"Energy Per Capita (kWh per capita)":74324.461,"% of Power from Fossil Fuels (%)":99.5,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":0.5,"% of Agricultural Land (%)":27.34375,"% of Forest Land (%)":1.4375,"Territory (sq km)":320,"Average Rainfall (mm/year)":560,"Corruption (std score)":0.1696073413,"Wheat Production (tonnes)":5165083,"Rye Production (tonnes)":4862470.8,"Potatoes Production (tonnes)":1641853,"Meat, Chicken Production (tonnes)":597949,"Avocados Production (tonnes)":4449.6,"Petrol Price (USD/liter)":1.4,"Daily Oil Consumption (barrels/day)":47000,"CO2 Emissions (tonnes per capita)":3.293245606,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":8781.21,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":75.52,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":53.86,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.14,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":84.3,"GDP Per Capita (USD/year)":42581.09786,"Military Expenditure (USD/year)":69284609.85,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.6,"Average Age (years)":42.459,"Inflation Rate (year, %)":6.2},{"Country":"Italy","Country_clean":"italy","Region":"Western Europe","Happiness (score 0-10)":6.324,"Median Salary (USD/year)":3467.23,"Average Salary (USD/year)":3868.92,"Lowest Salary (USD/year)":972.52,"Highest Salary (USD/year)":17230.44,"IQAir_AQI (AQI index)":12.85,"Infant Survival Rate (per 1000 births)":999,"Alcohol Consumption Rate (liters per capita per year)":7.56,"Life Expectancy (years)":82.7,"Netflix":14.67,"Women Safety Index (score 0-1)":0.827,"Average Winter Temperature (C)":5.8631363,"Average Summer Temperature (C)":6.1182337,"Population (people)":59037474,"Energy Per Capita (kWh per capita)":28910.201,"% of Power from Fossil Fuels (%)":63.562,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":36.438,"% of Agricultural Land (%)":41.942231593,"% of Forest Land (%)":32.5308994748,"Territory (sq km)":295717,"Average Rainfall (mm/year)":832,"Corruption (std score)":0.1622093022,"Wheat Production (tonnes)":5700,"Rye Production (tonnes)":1012,"Potatoes Production (tonnes)":20475928,"Meat, Chicken Production (tonnes)":4700,"Avocados Production (tonnes)":13817.47,"Petrol Price (USD/liter)":2.12,"Daily Oil Consumption (barrels/day)":1236628,"CO2 Emissions (tonnes per capita)":5.311315442,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":7125.32,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":52.72,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":29.26,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.09,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":73.76,"GDP Per Capita (USD/year)":41830.42633,"Military Expenditure (USD/year)":27807513898,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.5,"Average Age (years)":47.039,"Inflation Rate (year, %)":8.2},{"Country":"Guatemala","Country_clean":"guatemala","Region":"Latin America and Caribbean","Happiness (score 0-10)":6.287,"Median Salary (USD/year)":1222.65,"Average Salary (USD/year)":1335.88,"Lowest Salary (USD/year)":337.15,"Highest Salary (USD/year)":5954.2,"IQAir_AQI (AQI index)":19.2,"Infant Survival Rate (per 1000 births)":990,"Alcohol Consumption Rate (liters per capita per year)":1.88,"Life Expectancy (years)":71.9,"Netflix":10.99,"Women Safety Index (score 0-1)":0.569,"Average Winter Temperature (C)":21.24547,"Average Summer Temperature (C)":22.411528,"Population (people)":17843908,"Energy Per Capita (kWh per capita)":5712.118,"% of Power from Fossil Fuels (%)":34.488,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":65.512,"% of Agricultural Land (%)":43.0384471818,"% of Forest Land (%)":32.812616648,"Territory (sq km)":107160,"Average Rainfall (mm/year)":1996,"Corruption (std score)":0.1670125574,"Wheat Production (tonnes)":483,"Rye Production (tonnes)":511.23,"Potatoes Production (tonnes)":18843300,"Meat, Chicken Production (tonnes)":1760,"Avocados Production (tonnes)":1023.49,"Petrol Price (USD/liter)":1.36,"Daily Oil Consumption (barrels/day)":93000,"CO2 Emissions (tonnes per capita)":1.162970924,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1534.68,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":51.65,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":46.81,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.09,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":35.02,"GDP Per Capita (USD/year)":8462.374008,"Military Expenditure (USD/year)":278420891.5,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":17.5,"Average Age (years)":21.056,"Inflation Rate (year, %)":6.9},{"Country":"Nicaragua","Country_clean":"nicaragua","Region":"Latin America and Caribbean","Happiness (score 0-10)":6.284,"Median Salary (USD/year)":449.1,"Average Salary (USD/year)":517.15,"Lowest Salary (USD/year)":130.38,"Highest Salary (USD/year)":2299.95,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":998,"Alcohol Consumption Rate (liters per capita per year)":3.55,"Life Expectancy (years)":74.8,"Netflix":null,"Women Safety Index (score 0-1)":0.717,"Average Winter Temperature (C)":24.97253,"Average Summer Temperature (C)":25.584845,"Population (people)":6948392,"Energy Per Capita (kWh per capita)":4265.271,"% of Power from Fossil Fuels (%)":45.356,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":54.644,"% of Agricultural Land (%)":42.3051354496,"% of Forest Land (%)":27.4848761841,"Territory (sq km)":120340,"Average Rainfall (mm/year)":2280,"Corruption (std score)":0.1591832638,"Wheat Production (tonnes)":19615588,"Rye Production (tonnes)":1503073.6,"Potatoes Production (tonnes)":770127,"Meat, Chicken Production (tonnes)":20825,"Avocados Production (tonnes)":46826.8,"Petrol Price (USD/liter)":1.37,"Daily Oil Consumption (barrels/day)":37000,"CO2 Emissions (tonnes per capita)":0.800549594,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":905.56,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":31.03,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":58.25,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.76,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":30,"GDP Per Capita (USD/year)":5533.551064,"Military Expenditure (USD/year)":81593932.69,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":7.9,"Average Age (years)":25.686,"Inflation Rate (year, %)":10.5},{"Country":"Brazil","Country_clean":"brazil","Region":"Latin America and Caribbean","Happiness (score 0-10)":6.272,"Median Salary (USD/year)":1490.04,"Average Salary (USD/year)":1711.16,"Lowest Salary (USD/year)":432.27,"Highest Salary (USD/year)":7609.56,"IQAir_AQI (AQI index)":12.9,"Infant Survival Rate (per 1000 births)":958,"Alcohol Consumption Rate (liters per capita per year)":7.32,"Life Expectancy (years)":75,"Netflix":7.11,"Women Safety Index (score 0-1)":0.63,"Average Winter Temperature (C)":25.908457,"Average Summer Temperature (C)":26.127356,"Population (people)":215313498,"Energy Per Capita (kWh per capita)":17299.75,"% of Power from Fossil Fuels (%)":10.924,"% of Power from Nuclear (%)":2.135,"% of Power from Renewables (%)":86.94,"% of Agricultural Land (%)":28.6390944636,"% of Forest Land (%)":59.2705274977,"Territory (sq km)":8358140,"Average Rainfall (mm/year)":1761,"Corruption (std score)":0.1599350423,"Wheat Production (tonnes)":19888224,"Rye Production (tonnes)":5533432,"Potatoes Production (tonnes)":166772,"Meat, Chicken Production (tonnes)":1593.62,"Avocados Production (tonnes)":43200,"Petrol Price (USD/liter)":1.42,"Daily Oil Consumption (barrels/day)":2984000,"CO2 Emissions (tonnes per capita)":2.057810839,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":2542.37,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":25.04,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":21.55,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.12,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":38.32,"GDP Per Capita (USD/year)":16096.40096,"Military Expenditure (USD/year)":27766427104,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":22.5,"Average Age (years)":33.603,"Inflation Rate (year, %)":9.3},{"Country":"Slovakia","Country_clean":"slovakia","Region":"Central and Eastern Europe","Happiness (score 0-10)":6.257,"Median Salary (USD/year)":2114.16,"Average Salary (USD/year)":2315.01,"Lowest Salary (USD/year)":581.4,"Highest Salary (USD/year)":10295.98,"IQAir_AQI (AQI index)":16,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":10.6,"Life Expectancy (years)":76.7,"Netflix":11.29,"Women Safety Index (score 0-1)":0.856,"Average Winter Temperature (C)":-0.32777002,"Average Summer Temperature (C)":0.70984817,"Population (people)":5643453,"Energy Per Capita (kWh per capita)":33887.691,"% of Power from Fossil Fuels (%)":17.845,"% of Power from Nuclear (%)":59.484,"% of Power from Renewables (%)":22.671,"% of Agricultural Land (%)":38.6023294509,"% of Forest Land (%)":40.056156406,"Territory (sq km)":48080,"Average Rainfall (mm/year)":824,"Corruption (std score)":0.1467373222,"Wheat Production (tonnes)":46043401.6,"Rye Production (tonnes)":3904665.32,"Potatoes Production (tonnes)":13240782,"Meat, Chicken Production (tonnes)":360,"Avocados Production (tonnes)":102320.138,"Petrol Price (USD/liter)":1.98,"Daily Oil Consumption (barrels/day)":81587,"CO2 Emissions (tonnes per capita)":5.698416255,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":5005.29,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":34.77,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":20.04,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.02,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":47.42,"GDP Per Capita (USD/year)":33736.40094,"Military Expenditure (USD/year)":1280643981,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.2,"Average Age (years)":41.154,"Inflation Rate (year, %)":12.8},{"Country":"Latvia","Country_clean":"latvia","Region":"Central and Eastern Europe","Happiness (score 0-10)":6.234,"Median Salary (USD/year)":1654.0727,"Average Salary (USD/year)":1952.1038,"Lowest Salary (USD/year)":491.75135,"Highest Salary (USD/year)":8657.804,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":null,"Alcohol Consumption Rate (liters per capita per year)":null,"Life Expectancy (years)":null,"Netflix":11.29,"Women Safety Index (score 0-1)":0.872,"Average Winter Temperature (C)":-5.6515737,"Average Summer Temperature (C)":1.3988863,"Population (people)":1850651,"Energy Per Capita (kWh per capita)":21435.611,"% of Power from Fossil Fuels (%)":27.866,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":72.134,"% of Agricultural Land (%)":31.6567571911,"% of Forest Land (%)":54.871605335,"Territory (sq km)":62230,"Average Rainfall (mm/year)":667,"Corruption (std score)":0.1467373222,"Wheat Production (tonnes)":68948700,"Rye Production (tonnes)":896889.36,"Potatoes Production (tonnes)":8375542,"Meat, Chicken Production (tonnes)":122411.04,"Avocados Production (tonnes)":212977,"Petrol Price (USD/liter)":2.19,"Daily Oil Consumption (barrels/day)":37694,"CO2 Emissions (tonnes per capita)":3.955435862,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":2479.81,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":40.83,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":17.79,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.3,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":52.69,"GDP Per Capita (USD/year)":30304.8525,"Military Expenditure (USD/year)":679862611.1,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":2.6,"Average Age (years)":41.788,"Inflation Rate (year, %)":17.3},{"Country":"Uzbekistan","Country_clean":"uzbekistan","Region":"Commonwealth of Independent States","Happiness (score 0-10)":6.195,"Median Salary (USD/year)":97.25,"Average Salary (USD/year)":106.98,"Lowest Salary (USD/year)":27.07,"Highest Salary (USD/year)":477.35,"IQAir_AQI (AQI index)":42.8,"Infant Survival Rate (per 1000 births)":985,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":69.4,"Netflix":null,"Women Safety Index (score 0-1)":0.674,"Average Winter Temperature (C)":-1.1172104,"Average Summer Temperature (C)":0.41523957,"Population (people)":34627652,"Energy Per Capita (kWh per capita)":16929.814,"% of Power from Fossil Fuels (%)":91.537,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":7.744,"% of Agricultural Land (%)":58.3012029874,"% of Forest Land (%)":8.4318046172,"Territory (sq km)":440653,"Average Rainfall (mm/year)":206,"Corruption (std score)":0.1534096003,"Wheat Production (tonnes)":12797144.4,"Rye Production (tonnes)":56359,"Potatoes Production (tonnes)":4772327.2,"Meat, Chicken Production (tonnes)":3600,"Avocados Production (tonnes)":11471,"Petrol Price (USD/liter)":0.9,"Daily Oil Consumption (barrels/day)":49000,"CO2 Emissions (tonnes per capita)":3.47554445,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1206.66,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":42.32,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":18.86,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.6,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":30,"GDP Per Capita (USD/year)":8556.051512,"Military Expenditure (USD/year)":null,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.2,"Average Age (years)":28.753,"Inflation Rate (year, %)":11.4},{"Country":"Argentina","Country_clean":"argentina","Region":"Latin America and Caribbean","Happiness (score 0-10)":6.188,"Median Salary (USD/year)":110.28,"Average Salary (USD/year)":129.42,"Lowest Salary (USD/year)":32.57,"Highest Salary (USD/year)":577.13,"IQAir_AQI (AQI index)":10.3,"Infant Survival Rate (per 1000 births)":992,"Alcohol Consumption Rate (liters per capita per year)":7.93,"Life Expectancy (years)":76.3,"Netflix":6.3,"Women Safety Index (score 0-1)":0.768,"Average Winter Temperature (C)":20.045332,"Average Summer Temperature (C)":22.75778,"Population (people)":45510318,"Energy Per Capita (kWh per capita)":21994.422,"% of Power from Fossil Fuels (%)":63.374,"% of Power from Nuclear (%)":5.199,"% of Power from Renewables (%)":31.426,"% of Agricultural Land (%)":43.1023461554,"% of Forest Land (%)":10.4007639521,"Territory (sq km)":2736690,"Average Rainfall (mm/year)":591,"Corruption (std score)":0.1599350423,"Wheat Production (tonnes)":188681200,"Rye Production (tonnes)":283601,"Potatoes Production (tonnes)":52048230,"Meat, Chicken Production (tonnes)":2055000,"Avocados Production (tonnes)":2040,"Petrol Price (USD/liter)":1.05,"Daily Oil Consumption (barrels/day)":709000,"CO2 Emissions (tonnes per capita)":3.740650291,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":2518.29,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":23.63,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":21.87,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.04,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":25,"GDP Per Capita (USD/year)":20610.56855,"Military Expenditure (USD/year)":4144991771,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":5.3,"Average Age (years)":32.837,"Inflation Rate (year, %)":null},{"Country":"Kazakhstan","Country_clean":"kazakhstan","Region":"Commonwealth of Independent States","Happiness (score 0-10)":6.188,"Median Salary (USD/year)":701,"Average Salary (USD/year)":813.99,"Lowest Salary (USD/year)":204.86,"Highest Salary (USD/year)":3620.08,"IQAir_AQI (AQI index)":24.7,"Infant Survival Rate (per 1000 births)":996,"Alcohol Consumption Rate (liters per capita per year)":6.29,"Life Expectancy (years)":72,"Netflix":null,"Women Safety Index (score 0-1)":0.729,"Average Winter Temperature (C)":-9.164996,"Average Summer Temperature (C)":-7.0029874,"Population (people)":19397998,"Energy Per Capita (kWh per capita)":44701.98,"% of Power from Fossil Fuels (%)":88.659,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":11.341,"% of Agricultural Land (%)":79.1924658295,"% of Forest Land (%)":1.2904838315,"Territory (sq km)":2699700,"Average Rainfall (mm/year)":250,"Corruption (std score)":0.1555387676,"Wheat Production (tonnes)":100,"Rye Production (tonnes)":230580.8,"Potatoes Production (tonnes)":275000,"Meat, Chicken Production (tonnes)":2736,"Avocados Production (tonnes)":72.65,"Petrol Price (USD/liter)":0.48,"Daily Oil Consumption (barrels/day)":325000,"CO2 Emissions (tonnes per capita)":11.45693783,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1501.51,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":43.84,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":11.76,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.73,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":31.88,"GDP Per Capita (USD/year)":27879.75195,"Military Expenditure (USD/year)":1613589333,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":3.2,"Average Age (years)":31.887,"Inflation Rate (year, %)":null},{"Country":"Cyprus","Country_clean":"cyprus","Region":"Western Europe","Happiness (score 0-10)":6.068,"Median Salary (USD/year)":1976.74,"Average Salary (USD/year)":2293.87,"Lowest Salary (USD/year)":581.4,"Highest Salary (USD/year)":10211.42,"IQAir_AQI (AQI index)":14.3,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":85,"Netflix":null,"Women Safety Index (score 0-1)":0.739,"Average Winter Temperature (C)":13.245076,"Average Summer Temperature (C)":13.512097,"Population (people)":1251488,"Energy Per Capita (kWh per capita)":25359.791,"% of Power from Fossil Fuels (%)":83.08,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":16.92,"% of Agricultural Land (%)":13.3262878788,"% of Forest Land (%)":18.6699134199,"Territory (sq km)":9240,"Average Rainfall (mm/year)":498,"Corruption (std score)":0.1622093022,"Wheat Production (tonnes)":null,"Rye Production (tonnes)":null,"Potatoes Production (tonnes)":null,"Meat, Chicken Production (tonnes)":null,"Avocados Production (tonnes)":null,"Petrol Price (USD/liter)":1.86,"Daily Oil Consumption (barrels/day)":52000,"CO2 Emissions (tonnes per capita)":5.998795283,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":2212.86,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":59.71,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":31.45,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.38,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":52.69,"GDP Per Capita (USD/year)":38513.28457,"Military Expenditure (USD/year)":381879772.9,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.2,"Average Age (years)":38.998,"Inflation Rate (year, %)":8.4},{"Country":"Japan","Country_clean":"japan","Region":"East Asia","Happiness (score 0-10)":6.06,"Median Salary (USD/year)":3158.67,"Average Salary (USD/year)":3453.12,"Lowest Salary (USD/year)":869.97,"Highest Salary (USD/year)":15391.82,"IQAir_AQI (AQI index)":8.7,"Infant Survival Rate (per 1000 births)":998,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":83.7,"Netflix":13.13,"Women Safety Index (score 0-1)":0.866,"Average Winter Temperature (C)":2.164464,"Average Summer Temperature (C)":2.298908,"Population (people)":123951692,"Energy Per Capita (kWh per capita)":39984.914,"% of Power from Fossil Fuels (%)":71.011,"% of Power from Nuclear (%)":5.357,"% of Power from Renewables (%)":23.631,"% of Agricultural Land (%)":12.7818930041,"% of Forest Land (%)":68.4087791495,"Territory (sq km)":364500,"Average Rainfall (mm/year)":1668,"Corruption (std score)":0.1614369303,"Wheat Production (tonnes)":38159276,"Rye Production (tonnes)":460847.088,"Potatoes Production (tonnes)":3573873,"Meat, Chicken Production (tonnes)":117500,"Avocados Production (tonnes)":92936,"Petrol Price (USD/liter)":1.24,"Daily Oil Consumption (barrels/day)":4012877,"CO2 Emissions (tonnes per capita)":8.540980205,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":8043.38,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":65.2,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":32.15,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.09,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":48.39,"GDP Per Capita (USD/year)":42797.45852,"Military Expenditure (USD/year)":46617954864,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.3,"Average Age (years)":48.584,"Inflation Rate (year, %)":2.5},{"Country":"South Korea","Country_clean":"korea republic of","Region":"East Asia","Happiness (score 0-10)":6.058,"Median Salary (USD/year)":2593.42,"Average Salary (USD/year)":2889.81,"Lowest Salary (USD/year)":728.38,"Highest Salary (USD/year)":12893,"IQAir_AQI (AQI index)":17.4,"Infant Survival Rate (per 1000 births)":999,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":82.3,"Netflix":11.47,"Women Safety Index (score 0-1)":0.848,"Average Winter Temperature (C)":0.54568756,"Average Summer Temperature (C)":1.3578094,"Population (people)":51815810,"Energy Per Capita (kWh per capita)":68126.188,"% of Power from Fossil Fuels (%)":62.993,"% of Power from Nuclear (%)":27.795,"% of Power from Renewables (%)":9.212,"% of Agricultural Land (%)":16.4241803279,"% of Forest Land (%)":64.3135245902,"Territory (sq km)":97600,"Average Rainfall (mm/year)":1274,"Corruption (std score)":0.1531555355,"Wheat Production (tonnes)":2114998.2,"Rye Production (tonnes)":1300000,"Potatoes Production (tonnes)":715276,"Meat, Chicken Production (tonnes)":87928,"Avocados Production (tonnes)":8759.354,"Petrol Price (USD/liter)":1.61,"Daily Oil Consumption (barrels/day)":2605440,"CO2 Emissions (tonnes per capita)":11.79932538,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":22067.7,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":55.88,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":22.48,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.48,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":53.78,"GDP Per Capita (USD/year)":40111.77576,"Military Expenditure (USD/year)":43069973343,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.6,"Average Age (years)":43.22,"Inflation Rate (year, %)":5.1},{"Country":"Philippines","Country_clean":"philippines","Region":"Southeast Asia","Happiness (score 0-10)":6.048,"Median Salary (USD/year)":728.78,"Average Salary (USD/year)":790.54,"Lowest Salary (USD/year)":199.4,"Highest Salary (USD/year)":3511.56,"IQAir_AQI (AQI index)":15.7,"Infant Survival Rate (per 1000 births)":948,"Alcohol Consumption Rate (liters per capita per year)":4.52,"Life Expectancy (years)":68.5,"Netflix":9.14,"Women Safety Index (score 0-1)":0.612,"Average Winter Temperature (C)":25.283766,"Average Summer Temperature (C)":25.835867,"Population (people)":115559009,"Energy Per Capita (kWh per capita)":5066.786,"% of Power from Fossil Fuels (%)":77.417,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":22.583,"% of Agricultural Land (%)":42.536137103,"% of Forest Land (%)":24.2260455445,"Territory (sq km)":298170,"Average Rainfall (mm/year)":2348,"Corruption (std score)":0.1470372379,"Wheat Production (tonnes)":111872930,"Rye Production (tonnes)":14215792.8,"Potatoes Production (tonnes)":224700,"Meat, Chicken Production (tonnes)":5260,"Avocados Production (tonnes)":161127.4,"Petrol Price (USD/liter)":1.55,"Daily Oil Consumption (barrels/day)":429000,"CO2 Emissions (tonnes per capita)":1.345029057,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":3578.46,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":50.24,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":37.97,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.99,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":28.71,"GDP Per Capita (USD/year)":8951.085654,"Military Expenditure (USD/year)":3769741011,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":4.4,"Average Age (years)":26.014,"Inflation Rate (year, %)":5.8},{"Country":"Vietnam","Country_clean":"vietnam","Region":"Southeast Asia","Happiness (score 0-10)":6.043,"Median Salary (USD/year)":612.57,"Average Salary (USD/year)":711.24,"Lowest Salary (USD/year)":179.25,"Highest Salary (USD/year)":3161.52,"IQAir_AQI (AQI index)":23,"Infant Survival Rate (per 1000 births)":972,"Alcohol Consumption Rate (liters per capita per year)":4.09,"Life Expectancy (years)":76,"Netflix":null,"Women Safety Index (score 0-1)":0.707,"Average Winter Temperature (C)":20.113937,"Average Summer Temperature (C)":20.465149,"Population (people)":98186856,"Energy Per Capita (kWh per capita)":12983.017,"% of Power from Fossil Fuels (%)":48.449,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":51.551,"% of Agricultural Land (%)":39.4347683207,"% of Forest Land (%)":46.961161858,"Territory (sq km)":313429,"Average Rainfall (mm/year)":1821,"Corruption (std score)":0.1536959112,"Wheat Production (tonnes)":126369.276,"Rye Production (tonnes)":65741.052,"Potatoes Production (tonnes)":1658756.2,"Meat, Chicken Production (tonnes)":18293614,"Avocados Production (tonnes)":77631.608,"Petrol Price (USD/liter)":1.42,"Daily Oil Consumption (barrels/day)":478000,"CO2 Emissions (tonnes per capita)":3.488312636,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":4404.92,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":26.72,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":11.48,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.55,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":24.48,"GDP Per Capita (USD/year)":7447.814334,"Military Expenditure (USD/year)":5500000000,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.5,"Average Age (years)":32.298,"Inflation Rate (year, %)":3.2},{"Country":"Portugal","Country_clean":"portugal","Region":"Western Europe","Happiness (score 0-10)":6.03,"Median Salary (USD/year)":2537,"Average Salary (USD/year)":2917.55,"Lowest Salary (USD/year)":739.96,"Highest Salary (USD/year)":13002.11,"IQAir_AQI (AQI index)":6.4,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":9.88,"Life Expectancy (years)":81.1,"Netflix":13.54,"Women Safety Index (score 0-1)":0.877,"Average Winter Temperature (C)":9.626703,"Average Summer Temperature (C)":10.976666,"Population (people)":10270865,"Energy Per Capita (kWh per capita)":25094.396,"% of Power from Fossil Fuels (%)":40.183,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":59.817,"% of Agricultural Land (%)":43.2538567511,"% of Forest Land (%)":36.1549948911,"Territory (sq km)":91605.6,"Average Rainfall (mm/year)":854,"Corruption (std score)":0.1622093022,"Wheat Production (tonnes)":947400,"Rye Production (tonnes)":3710.18,"Potatoes Production (tonnes)":10200,"Meat, Chicken Production (tonnes)":3760,"Avocados Production (tonnes)":125446.8,"Petrol Price (USD/liter)":2.26,"Daily Oil Consumption (barrels/day)":236866,"CO2 Emissions (tonnes per capita)":4.339768426,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":5757.09,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":39.89,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":35.58,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.73,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":52.69,"GDP Per Capita (USD/year)":33415.4379,"Military Expenditure (USD/year)":4247842971,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.9,"Average Age (years)":44.71,"Inflation Rate (year, %)":7.8},{"Country":"Hungary","Country_clean":"hungary","Region":"Central and Eastern Europe","Happiness (score 0-10)":6.017,"Median Salary (USD/year)":1227.46,"Average Salary (USD/year)":1344.23,"Lowest Salary (USD/year)":339.45,"Highest Salary (USD/year)":5974.36,"IQAir_AQI (AQI index)":14.5,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":75.8,"Netflix":10.71,"Women Safety Index (score 0-1)":0.835,"Average Winter Temperature (C)":1.4500087,"Average Summer Temperature (C)":2.1213894,"Population (people)":9967308,"Energy Per Capita (kWh per capita)":26660.49,"% of Power from Fossil Fuels (%)":34.178,"% of Power from Nuclear (%)":44.623,"% of Power from Renewables (%)":21.199,"% of Agricultural Land (%)":55.2672430419,"% of Forest Land (%)":22.4803495507,"Territory (sq km)":91260,"Average Rainfall (mm/year)":589,"Corruption (std score)":0.1467373222,"Wheat Production (tonnes)":18287,"Rye Production (tonnes)":240000,"Potatoes Production (tonnes)":13775,"Meat, Chicken Production (tonnes)":5795,"Avocados Production (tonnes)":230332,"Petrol Price (USD/liter)":2.01,"Daily Oil Consumption (barrels/day)":155544,"CO2 Emissions (tonnes per capita)":4.74663103,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":3407.13,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":44.23,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":12.82,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.14,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":38.57,"GDP Per Capita (USD/year)":31102.50275,"Military Expenditure (USD/year)":1642338440,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.8,"Average Age (years)":42.594,"Inflation Rate (year, %)":14.6},{"Country":"Paraguay","Country_clean":"paraguay","Region":"Latin America and Caribbean","Happiness (score 0-10)":5.977,"Median Salary (USD/year)":1019.69,"Average Salary (USD/year)":1126.17,"Lowest Salary (USD/year)":283.93,"Highest Salary (USD/year)":5009.74,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":998,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":74,"Netflix":11.49,"Women Safety Index (score 0-1)":0.691,"Average Winter Temperature (C)":26.823614,"Average Summer Temperature (C)":29.723492,"Population (people)":6780744,"Energy Per Capita (kWh per capita)":15782.273,"% of Power from Fossil Fuels (%)":0.175,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":99.825,"% of Agricultural Land (%)":42.3084319154,"% of Forest Land (%)":39.8261432167,"Territory (sq km)":397300,"Average Rainfall (mm/year)":1130,"Corruption (std score)":0.1677868664,"Wheat Production (tonnes)":3974000,"Rye Production (tonnes)":597306.826,"Potatoes Production (tonnes)":5600,"Meat, Chicken Production (tonnes)":83300,"Avocados Production (tonnes)":3820.012,"Petrol Price (USD/liter)":1.4,"Daily Oil Consumption (barrels/day)":51000,"CO2 Emissions (tonnes per capita)":1.165425232,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1286.16,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":27.11,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":24.37,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.9,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":22.17,"GDP Per Capita (USD/year)":13599.92656,"Military Expenditure (USD/year)":386556389.6,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":6.7,"Average Age (years)":26.085,"Inflation Rate (year, %)":9.8},{"Country":"Thailand","Country_clean":"thailand","Region":"Southeast Asia","Happiness (score 0-10)":5.976,"Median Salary (USD/year)":2432.28,"Average Salary (USD/year)":2662.11,"Lowest Salary (USD/year)":670.31,"Highest Salary (USD/year)":11846.79,"IQAir_AQI (AQI index)":21.8,"Infant Survival Rate (per 1000 births)":992,"Alcohol Consumption Rate (liters per capita per year)":6.41,"Life Expectancy (years)":74.9,"Netflix":10.43,"Women Safety Index (score 0-1)":0.764,"Average Winter Temperature (C)":23.979416,"Average Summer Temperature (C)":24.891027,"Population (people)":71697030,"Energy Per Capita (kWh per capita)":19616.777,"% of Power from Fossil Fuels (%)":84.744,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":15.256,"% of Agricultural Land (%)":45.9981600736,"% of Forest Land (%)":38.8283192077,"Territory (sq km)":510890,"Average Rainfall (mm/year)":1622,"Corruption (std score)":0.1531555355,"Wheat Production (tonnes)":2133386,"Rye Production (tonnes)":416000,"Potatoes Production (tonnes)":190964,"Meat, Chicken Production (tonnes)":416,"Avocados Production (tonnes)":266926.338,"Petrol Price (USD/liter)":1.51,"Daily Oil Consumption (barrels/day)":1302000,"CO2 Emissions (tonnes per capita)":3.836090019,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":5534.11,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":57.33,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":15.46,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.51,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":28.8,"GDP Per Capita (USD/year)":19051.33338,"Military Expenditure (USD/year)":6829203403,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":2.6,"Average Age (years)":36.188,"Inflation Rate (year, %)":6.1},{"Country":"Malaysia","Country_clean":"malaysia","Region":"Southeast Asia","Happiness (score 0-10)":5.975,"Median Salary (USD/year)":1236.17,"Average Salary (USD/year)":1406.38,"Lowest Salary (USD/year)":355.32,"Highest Salary (USD/year)":6255.32,"IQAir_AQI (AQI index)":14.95,"Infant Survival Rate (per 1000 births)":996,"Alcohol Consumption Rate (liters per capita per year)":0.52,"Life Expectancy (years)":75,"Netflix":10.65,"Women Safety Index (score 0-1)":0.738,"Average Winter Temperature (C)":25.763824,"Average Summer Temperature (C)":25.89396,"Population (people)":33938221,"Energy Per Capita (kWh per capita)":39586.996,"% of Power from Fossil Fuels (%)":80.96,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":19.04,"% of Agricultural Land (%)":26.0873535231,"% of Forest Land (%)":58.0243189773,"Territory (sq km)":328550,"Average Rainfall (mm/year)":2875,"Corruption (std score)":0.1531555355,"Wheat Production (tonnes)":58253,"Rye Production (tonnes)":127405.114,"Potatoes Production (tonnes)":10200,"Meat, Chicken Production (tonnes)":1556741.9,"Avocados Production (tonnes)":84517.6,"Petrol Price (USD/liter)":0.46,"Daily Oil Consumption (barrels/day)":708000,"CO2 Emissions (tonnes per capita)":7.927126037,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":2272.27,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":40.72,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":25.49,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.6,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":22.79,"GDP Per Capita (USD/year)":31782.15336,"Military Expenditure (USD/year)":3469828207,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":2.1,"Average Age (years)":29.646,"Inflation Rate (year, %)":3.4},{"Country":"China","Country_clean":"china","Region":"East Asia","Happiness (score 0-10)":5.973,"Median Salary (USD/year)":3684.93,"Average Salary (USD/year)":4027.4,"Lowest Salary (USD/year)":1015.07,"Highest Salary (USD/year)":17945.21,"IQAir_AQI (AQI index)":28.65,"Infant Survival Rate (per 1000 births)":null,"Alcohol Consumption Rate (liters per capita per year)":null,"Life Expectancy (years)":null,"Netflix":null,"Women Safety Index (score 0-1)":0.7,"Average Winter Temperature (C)":-6.3306623,"Average Summer Temperature (C)":-5.6608214,"Population (people)":1425887337,"Energy Per Capita (kWh per capita)":31051.48,"% of Power from Fossil Fuels (%)":64.602,"% of Power from Nuclear (%)":4.725,"% of Power from Renewables (%)":30.673,"% of Agricultural Land (%)":55.4626494294,"% of Forest Land (%)":23.6315282679,"Territory (sq km)":9388210,"Average Rainfall (mm/year)":645,"Corruption (std score)":0.1543876231,"Wheat Production (tonnes)":13631,"Rye Production (tonnes)":800,"Potatoes Production (tonnes)":0,"Meat, Chicken Production (tonnes)":6155.65,"Avocados Production (tonnes)":88.19,"Petrol Price (USD/liter)":1.43,"Daily Oil Consumption (barrels/day)":12791553,"CO2 Emissions (tonnes per capita)":7.605936961,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":17746.11,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":63.49,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":17.07,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.53,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":39.86,"GDP Per Capita (USD/year)":18236.61298,"Military Expenditure (USD/year)":250000000000,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.5,"Average Age (years)":37.091,"Inflation Rate (year, %)":2},{"Country":"Honduras","Country_clean":"honduras","Region":"Latin America and Caribbean","Happiness (score 0-10)":5.968,"Median Salary (USD/year)":1022.22,"Average Salary (USD/year)":1139.39,"Lowest Salary (USD/year)":287.27,"Highest Salary (USD/year)":5090.91,"IQAir_AQI (AQI index)":11.8,"Infant Survival Rate (per 1000 births)":997,"Alcohol Consumption Rate (liters per capita per year)":2.87,"Life Expectancy (years)":74.6,"Netflix":10.99,"Women Safety Index (score 0-1)":0.61,"Average Winter Temperature (C)":22.25614,"Average Summer Temperature (C)":23.138378,"Population (people)":10432860,"Energy Per Capita (kWh per capita)":5086.934,"% of Power from Fossil Fuels (%)":48.037,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":51.963,"% of Agricultural Land (%)":31.9599606757,"% of Forest Land (%)":56.6476896952,"Territory (sq km)":111890,"Average Rainfall (mm/year)":1976,"Corruption (std score)":0.1517658681,"Wheat Production (tonnes)":2455774,"Rye Production (tonnes)":3800,"Potatoes Production (tonnes)":2055233,"Meat, Chicken Production (tonnes)":710,"Avocados Production (tonnes)":12.8,"Petrol Price (USD/liter)":1.45,"Daily Oil Consumption (barrels/day)":58000,"CO2 Emissions (tonnes per capita)":1.048622992,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":430.56,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":null,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":50,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.71,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":45,"GDP Per Capita (USD/year)":5138.752457,"Military Expenditure (USD/year)":410414895.1,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":36.3,"Average Age (years)":24.284,"Inflation Rate (year, %)":9.1},{"Country":"Bahrain","Country_clean":"bahrain","Region":"Middle East and North Africa","Happiness (score 0-10)":5.959,"Median Salary (USD/year)":3617.02,"Average Salary (USD/year)":3936.17,"Lowest Salary (USD/year)":984.04,"Highest Salary (USD/year)":17553.19,"IQAir_AQI (AQI index)":49.8,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":1.57,"Life Expectancy (years)":76.9,"Netflix":null,"Women Safety Index (score 0-1)":0.752,"Average Winter Temperature (C)":18.957916,"Average Summer Temperature (C)":19.866425,"Population (people)":1472233,"Energy Per Capita (kWh per capita)":161111.203,"% of Power from Fossil Fuels (%)":99.969,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":0.031,"% of Agricultural Land (%)":10.253164557,"% of Forest Land (%)":0.9113924051,"Territory (sq km)":790,"Average Rainfall (mm/year)":83,"Corruption (std score)":0.1871376336,"Wheat Production (tonnes)":null,"Rye Production (tonnes)":null,"Potatoes Production (tonnes)":null,"Meat, Chicken Production (tonnes)":null,"Avocados Production (tonnes)":null,"Petrol Price (USD/liter)":0.53,"Daily Oil Consumption (barrels/day)":62000,"CO2 Emissions (tonnes per capita)":20.26610279,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1545.05,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":86.94,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":47.66,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.73,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":53.05,"GDP Per Capita (USD/year)":47303.04851,"Military Expenditure (USD/year)":1396808511,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.1,"Average Age (years)":31.876,"Inflation Rate (year, %)":3.6},{"Country":"Croatia","Country_clean":"croatia","Region":"Central and Eastern Europe","Happiness (score 0-10)":5.942,"Median Salary (USD/year)":1935.48,"Average Salary (USD/year)":2089.76,"Lowest Salary (USD/year)":527.35,"Highest Salary (USD/year)":9298.74,"IQAir_AQI (AQI index)":9.1,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":12.14,"Life Expectancy (years)":78,"Netflix":11.29,"Women Safety Index (score 0-1)":0.862,"Average Winter Temperature (C)":3.5226943,"Average Summer Temperature (C)":3.6475925,"Population (people)":4030358,"Energy Per Capita (kWh per capita)":23468.168,"% of Power from Fossil Fuels (%)":36.686,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":63.314,"% of Agricultural Land (%)":26.3759828449,"% of Forest Land (%)":34.6963902788,"Territory (sq km)":55960,"Average Rainfall (mm/year)":1113,"Corruption (std score)":0.1467373222,"Wheat Production (tonnes)":73391864,"Rye Production (tonnes)":60000,"Potatoes Production (tonnes)":122.62,"Meat, Chicken Production (tonnes)":36,"Avocados Production (tonnes)":47000,"Petrol Price (USD/liter)":1.91,"Daily Oil Consumption (barrels/day)":69000,"CO2 Emissions (tonnes per capita)":4.063707833,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":3748.36,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":43.75,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":25.28,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.26,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":46.06,"GDP Per Capita (USD/year)":27579.78083,"Military Expenditure (USD/year)":889523365.3,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1,"Average Age (years)":43.682,"Inflation Rate (year, %)":10.8},{"Country":"Greece","Country_clean":"greece","Region":"Western Europe","Happiness (score 0-10)":5.934,"Median Salary (USD/year)":2241.01,"Average Salary (USD/year)":2579.28,"Lowest Salary (USD/year)":655.39,"Highest Salary (USD/year)":11522.2,"IQAir_AQI (AQI index)":18.1,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":7.53,"Life Expectancy (years)":81,"Netflix":12.42,"Women Safety Index (score 0-1)":0.766,"Average Winter Temperature (C)":7.6042023,"Average Summer Temperature (C)":8.659867,"Population (people)":10384971,"Energy Per Capita (kWh per capita)":30410.344,"% of Power from Fossil Fuels (%)":56.693,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":43.307,"% of Agricultural Land (%)":45.5173622964,"% of Forest Land (%)":30.2699767261,"Territory (sq km)":128900,"Average Rainfall (mm/year)":652,"Corruption (std score)":0.1622093022,"Wheat Production (tonnes)":4317391,"Rye Production (tonnes)":366200,"Potatoes Production (tonnes)":1512428,"Meat, Chicken Production (tonnes)":1049150,"Avocados Production (tonnes)":77556,"Petrol Price (USD/liter)":2.51,"Daily Oil Consumption (barrels/day)":296101,"CO2 Emissions (tonnes per capita)":5.59618907,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":2647.22,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":39.75,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":32.2,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.94,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":52.69,"GDP Per Capita (USD/year)":29592.15242,"Military Expenditure (USD/year)":5227152013,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.8,"Average Age (years)":44.978,"Inflation Rate (year, %)":9.6},{"Country":"Bosnia and Herzegovina","Country_clean":"bosnia and herzegovina","Region":"Central and Eastern Europe","Happiness (score 0-10)":5.877,"Median Salary (USD/year)":1151.35,"Average Salary (USD/year)":1248.65,"Lowest Salary (USD/year)":313.51,"Highest Salary (USD/year)":5567.57,"IQAir_AQI (AQI index)":33,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":4.03,"Life Expectancy (years)":77.4,"Netflix":null,"Women Safety Index (score 0-1)":0.754,"Average Winter Temperature (C)":2.2383707,"Average Summer Temperature (C)":2.2406917,"Population (people)":3233526,"Energy Per Capita (kWh per capita)":23013.498,"% of Power from Fossil Fuels (%)":62.131,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":37.869,"% of Agricultural Land (%)":44.19921875,"% of Forest Land (%)":42.7326171875,"Territory (sq km)":51200,"Average Rainfall (mm/year)":1028,"Corruption (std score)":0.1741266698,"Wheat Production (tonnes)":9024254,"Rye Production (tonnes)":771700,"Potatoes Production (tonnes)":81498,"Meat, Chicken Production (tonnes)":20326,"Avocados Production (tonnes)":8525.45,"Petrol Price (USD/liter)":1.73,"Daily Oil Consumption (barrels/day)":35000,"CO2 Emissions (tonnes per capita)":6.382918043,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":2080.75,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":26.6,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":24.95,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.58,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":26.88,"GDP Per Capita (USD/year)":14623.67405,"Military Expenditure (USD/year)":221131597.1,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.3,"Average Age (years)":42.767,"Inflation Rate (year, %)":5.7},{"Country":"Libya","Country_clean":"libya","Region":"Middle East and North Africa","Happiness (score 0-10)":5.866,"Median Salary (USD/year)":417.18,"Average Salary (USD/year)":470.35,"Lowest Salary (USD/year)":118.61,"Highest Salary (USD/year)":2085.89,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":999,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":72.7,"Netflix":null,"Women Safety Index (score 0-1)":0.61,"Average Winter Temperature (C)":13.038244,"Average Summer Temperature (C)":13.510715,"Population (people)":6812341,"Energy Per Capita (kWh per capita)":28270.334,"% of Power from Fossil Fuels (%)":99.969,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":0.031,"% of Agricultural Land (%)":8.7238710117,"% of Forest Land (%)":0.1233276879,"Territory (sq km)":1759540,"Average Rainfall (mm/year)":56,"Corruption (std score)":0.2036707252,"Wheat Production (tonnes)":85250690,"Rye Production (tonnes)":960041.848,"Potatoes Production (tonnes)":124532,"Meat, Chicken Production (tonnes)":125192,"Avocados Production (tonnes)":1306.12,"Petrol Price (USD/liter)":0.03,"Daily Oil Consumption (barrels/day)":223000,"CO2 Emissions (tonnes per capita)":8.380729344,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1319.36,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":28.81,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":23.1,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.54,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":35.12,"GDP Per Capita (USD/year)":20764.16414,"Military Expenditure (USD/year)":null,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":null,"Average Age (years)":29.319,"Inflation Rate (year, %)":null},{"Country":"Jamaica","Country_clean":"jamaica","Region":"Latin America and Caribbean","Happiness (score 0-10)":5.842,"Median Salary (USD/year)":565.78,"Average Salary (USD/year)":624.56,"Lowest Salary (USD/year)":157.59,"Highest Salary (USD/year)":2777.24,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":999,"Alcohol Consumption Rate (liters per capita per year)":3.83,"Life Expectancy (years)":76.2,"Netflix":null,"Women Safety Index (score 0-1)":0.71,"Average Winter Temperature (C)":25.523024,"Average Summer Temperature (C)":25.65008,"Population (people)":2827377,"Energy Per Capita (kWh per capita)":12235.784,"% of Power from Fossil Fuels (%)":83.908,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":16.092,"% of Agricultural Land (%)":38.5041551247,"% of Forest Land (%)":55.4730655586,"Territory (sq km)":10830,"Average Rainfall (mm/year)":2051,"Corruption (std score)":0.1735760421,"Wheat Production (tonnes)":1012930,"Rye Production (tonnes)":878583,"Potatoes Production (tonnes)":29460,"Meat, Chicken Production (tonnes)":26500,"Avocados Production (tonnes)":95729.19,"Petrol Price (USD/liter)":1.68,"Daily Oil Consumption (barrels/day)":54000,"CO2 Emissions (tonnes per capita)":2.845730012,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1817.15,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":52.33,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":40.65,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.02,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":45.47,"GDP Per Capita (USD/year)":9326.664059,"Military Expenditure (USD/year)":207772685.8,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":44.7,"Average Age (years)":28.73,"Inflation Rate (year, %)":10.3},{"Country":"Peru","Country_clean":"peru","Region":"Latin America and Caribbean","Happiness (score 0-10)":5.841,"Median Salary (USD/year)":1825.86,"Average Salary (USD/year)":1997.36,"Lowest Salary (USD/year)":503.96,"Highest Salary (USD/year)":8891.82,"IQAir_AQI (AQI index)":15.95,"Infant Survival Rate (per 1000 births)":992,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":75.5,"Netflix":8.56,"Women Safety Index (score 0-1)":0.717,"Average Winter Temperature (C)":20.036163,"Average Summer Temperature (C)":20.772074,"Population (people)":34049588,"Energy Per Capita (kWh per capita)":9835.475,"% of Power from Fossil Fuels (%)":44.915,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":55.085,"% of Agricultural Land (%)":19.9341320313,"% of Forest Land (%)":56.3730728906,"Territory (sq km)":1280000,"Average Rainfall (mm/year)":1738,"Corruption (std score)":0.1599350423,"Wheat Production (tonnes)":29718000,"Rye Production (tonnes)":586828.8,"Potatoes Production (tonnes)":3289722,"Meat, Chicken Production (tonnes)":130,"Avocados Production (tonnes)":83822.8,"Petrol Price (USD/liter)":1.65,"Daily Oil Consumption (barrels/day)":246000,"CO2 Emissions (tonnes per capita)":1.745591927,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1962.17,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":37.19,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":30.91,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.86,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":22.19,"GDP Per Capita (USD/year)":14418.07067,"Military Expenditure (USD/year)":2708912280,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":7.7,"Average Age (years)":28.939,"Inflation Rate (year, %)":8.3},{"Country":"Dominican Republic","Country_clean":"dominican republic","Region":"Latin America and Caribbean","Happiness (score 0-10)":5.823,"Median Salary (USD/year)":318.89,"Average Salary (USD/year)":350.6,"Lowest Salary (USD/year)":88.62,"Highest Salary (USD/year)":1562.72,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":994,"Alcohol Consumption Rate (liters per capita per year)":5.92,"Life Expectancy (years)":73.9,"Netflix":null,"Women Safety Index (score 0-1)":0.666,"Average Winter Temperature (C)":23.858599,"Average Summer Temperature (C)":23.987373,"Population (people)":11228821,"Energy Per Capita (kWh per capita)":9987.583,"% of Power from Fossil Fuels (%)":83.059,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":16.941,"% of Agricultural Land (%)":51.1034903537,"% of Forest Land (%)":45.2797121878,"Territory (sq km)":47531,"Average Rainfall (mm/year)":1410,"Corruption (std score)":0.1670125574,"Wheat Production (tonnes)":32079,"Rye Production (tonnes)":1143319,"Potatoes Production (tonnes)":422589.44,"Meat, Chicken Production (tonnes)":5300,"Avocados Production (tonnes)":70948,"Petrol Price (USD/liter)":1.41,"Daily Oil Consumption (barrels/day)":133000,"CO2 Emissions (tonnes per capita)":2.535627952,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":2186.2,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":39.97,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":46.85,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.84,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":36.56,"GDP Per Capita (USD/year)":17748.18532,"Military Expenditure (USD/year)":602522387,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":8.9,"Average Age (years)":null,"Inflation Rate (year, %)":5.6},{"Country":"Mauritius","Country_clean":"mauritius","Region":"Sub-Saharan Africa","Happiness (score 0-10)":5.816,"Median Salary (USD/year)":901.53,"Average Salary (USD/year)":1047.66,"Lowest Salary (USD/year)":263.04,"Highest Salary (USD/year)":4653.78,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":74.6,"Netflix":null,"Women Safety Index (score 0-1)":0.678,"Average Winter Temperature (C)":25.453356,"Average Summer Temperature (C)":26.709538,"Population (people)":1299469,"Energy Per Capita (kWh per capita)":19724.719,"% of Power from Fossil Fuels (%)":79.167,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":20.833,"% of Agricultural Land (%)":43.0645968953,"% of Forest Land (%)":19.4341512268,"Territory (sq km)":1997,"Average Rainfall (mm/year)":2041,"Corruption (std score)":0.1810258031,"Wheat Production (tonnes)":201,"Rye Production (tonnes)":590006.12,"Potatoes Production (tonnes)":465598.97,"Meat, Chicken Production (tonnes)":1080,"Avocados Production (tonnes)":194246.34,"Petrol Price (USD/liter)":1.68,"Daily Oil Consumption (barrels/day)":28000,"CO2 Emissions (tonnes per capita)":3.294591006,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":412.37,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":27.49,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":29.21,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.04,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":20.62,"GDP Per Capita (USD/year)":23750.98804,"Military Expenditure (USD/year)":23202895.56,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":2.8,"Average Age (years)":35.603,"Inflation Rate (year, %)":10.8},{"Country":"Moldova","Country_clean":"moldova","Region":"Commonwealth of Independent States","Happiness (score 0-10)":5.816,"Median Salary (USD/year)":1318.68,"Average Salary (USD/year)":1467.03,"Lowest Salary (USD/year)":370.33,"Highest Salary (USD/year)":6538.46,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":999,"Alcohol Consumption Rate (liters per capita per year)":9.99,"Life Expectancy (years)":72.1,"Netflix":11.29,"Women Safety Index (score 0-1)":0.758,"Average Winter Temperature (C)":-0.58977896,"Average Summer Temperature (C)":2.0659935,"Population (people)":3272996,"Energy Per Capita (kWh per capita)":16006.373,"% of Power from Fossil Fuels (%)":93.123,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":6.877,"% of Agricultural Land (%)":69.0021231423,"% of Forest Land (%)":11.7227782833,"Territory (sq km)":32970,"Average Rainfall (mm/year)":450,"Corruption (std score)":0.1620248556,"Wheat Production (tonnes)":1713061,"Rye Production (tonnes)":277982.8,"Potatoes Production (tonnes)":2263.6,"Meat, Chicken Production (tonnes)":474021.6,"Avocados Production (tonnes)":4707.65,"Petrol Price (USD/liter)":1.78,"Daily Oil Consumption (barrels/day)":18001,"CO2 Emissions (tonnes per capita)":3.324610168,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1193.72,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":24.38,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":9.02,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.7,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":25.99,"GDP Per Capita (USD/year)":7271.641919,"Military Expenditure (USD/year)":33957719.1,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":2.3,"Average Age (years)":37.64,"Inflation Rate (year, %)":28.7},{"Country":"Russia","Country_clean":"russian federation","Region":"Commonwealth of Independent States","Happiness (score 0-10)":5.785,"Median Salary (USD/year)":975.51,"Average Salary (USD/year)":1065.68,"Lowest Salary (USD/year)":268.47,"Highest Salary (USD/year)":4744.34,"IQAir_AQI (AQI index)":10.5,"Infant Survival Rate (per 1000 births)":987,"Alcohol Consumption Rate (liters per capita per year)":10.12,"Life Expectancy (years)":75,"Netflix":10.84,"Women Safety Index (score 0-1)":0.752,"Average Winter Temperature (C)":-22.901932,"Average Summer Temperature (C)":-16.512663,"Population (people)":144713314,"Energy Per Capita (kWh per capita)":55459.422,"% of Power from Fossil Fuels (%)":61.33,"% of Power from Nuclear (%)":20.309,"% of Power from Renewables (%)":18.361,"% of Agricultural Land (%)":13.158436258,"% of Forest Land (%)":49.7843360789,"Territory (sq km)":16376870,"Average Rainfall (mm/year)":460,"Corruption (std score)":0.1620248556,"Wheat Production (tonnes)":38418516,"Rye Production (tonnes)":69628.2,"Potatoes Production (tonnes)":391924.53,"Meat, Chicken Production (tonnes)":21388082,"Avocados Production (tonnes)":25469.03,"Petrol Price (USD/liter)":0.9,"Daily Oil Consumption (barrels/day)":3631287,"CO2 Emissions (tonnes per capita)":11.79720293,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":7750.96,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":52.91,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":8.3,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.28,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":64,"GDP Per Capita (USD/year)":27588.12544,"Military Expenditure (USD/year)":61387546980,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":7.3,"Average Age (years)":40.011,"Inflation Rate (year, %)":null},{"Country":"Bolivia","Country_clean":"bolivia","Region":"Latin America and Caribbean","Happiness (score 0-10)":5.784,"Median Salary (USD/year)":1131.5,"Average Salary (USD/year)":1236.99,"Lowest Salary (USD/year)":312.14,"Highest Salary (USD/year)":5505.78,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":992,"Alcohol Consumption Rate (liters per capita per year)":3.62,"Life Expectancy (years)":77,"Netflix":10.99,"Women Safety Index (score 0-1)":0.696,"Average Winter Temperature (C)":22.62405,"Average Summer Temperature (C)":23.684843,"Population (people)":12224110,"Energy Per Capita (kWh per capita)":7062.148,"% of Power from Fossil Fuels (%)":60.692,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":39.308,"% of Agricultural Land (%)":35.1881908982,"% of Forest Land (%)":46.7283054556,"Territory (sq km)":1083300,"Average Rainfall (mm/year)":1146,"Corruption (std score)":0.1598362178,"Wheat Production (tonnes)":631.08,"Rye Production (tonnes)":564675,"Potatoes Production (tonnes)":261690,"Meat, Chicken Production (tonnes)":1208,"Avocados Production (tonnes)":35000,"Petrol Price (USD/liter)":0.54,"Daily Oil Consumption (barrels/day)":90000,"CO2 Emissions (tonnes per capita)":1.940398005,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1282.05,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":42.97,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":47.42,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":20.97,"GDP Per Capita (USD/year)":7873.166243,"Military Expenditure (USD/year)":618842083.1,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":7,"Average Age (years)":24.762,"Inflation Rate (year, %)":1.7},{"Country":"Ecuador","Country_clean":"ecuador","Region":"Latin America and Caribbean","Happiness (score 0-10)":5.725,"Median Salary (USD/year)":1260,"Average Salary (USD/year)":1370,"Lowest Salary (USD/year)":340,"Highest Salary (USD/year)":6080,"IQAir_AQI (AQI index)":6.3,"Infant Survival Rate (per 1000 births)":994,"Alcohol Consumption Rate (liters per capita per year)":3.82,"Life Expectancy (years)":76.2,"Netflix":10.99,"Women Safety Index (score 0-1)":0.655,"Average Winter Temperature (C)":21.600014,"Average Summer Temperature (C)":22.433525,"Population (people)":18001000,"Energy Per Capita (kWh per capita)":12150.252,"% of Power from Fossil Fuels (%)":24.275,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":75.725,"% of Agricultural Land (%)":22.0244805927,"% of Forest Land (%)":50.0626509905,"Territory (sq km)":248360,"Average Rainfall (mm/year)":2274,"Corruption (std score)":0.1677868664,"Wheat Production (tonnes)":2754740,"Rye Production (tonnes)":4000,"Potatoes Production (tonnes)":376000,"Meat, Chicken Production (tonnes)":118350,"Avocados Production (tonnes)":163323,"Petrol Price (USD/liter)":1.17,"Daily Oil Consumption (barrels/day)":259000,"CO2 Emissions (tonnes per capita)":2.261469817,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1225,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":36.62,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":40.75,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.99,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":40,"GDP Per Capita (USD/year)":11734.38739,"Military Expenditure (USD/year)":2549400000,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":7.8,"Average Age (years)":28.712,"Inflation Rate (year, %)":3.5},{"Country":"Kyrgyzstan","Country_clean":"kyrgyzstan","Region":"Commonwealth of Independent States","Happiness (score 0-10)":5.714,"Median Salary (USD/year)":201.87,"Average Salary (USD/year)":219.92,"Lowest Salary (USD/year)":55.6,"Highest Salary (USD/year)":980.04,"IQAir_AQI (AQI index)":54.6,"Infant Survival Rate (per 1000 births)":997,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":71.1,"Netflix":null,"Women Safety Index (score 0-1)":0.673,"Average Winter Temperature (C)":-12.751518,"Average Summer Temperature (C)":-8.788135,"Population (people)":6630623,"Energy Per Capita (kWh per capita)":9274.61,"% of Power from Fossil Fuels (%)":10.097,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":89.903,"% of Agricultural Land (%)":null,"% of Forest Land (%)":null,"Territory (sq km)":null,"Average Rainfall (mm/year)":null,"Corruption (std score)":null,"Wheat Production (tonnes)":8330,"Rye Production (tonnes)":260323.2,"Potatoes Production (tonnes)":1791600,"Meat, Chicken Production (tonnes)":3175853,"Avocados Production (tonnes)":429912,"Petrol Price (USD/liter)":0.83,"Daily Oil Consumption (barrels/day)":40000,"CO2 Emissions (tonnes per capita)":null,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":915,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":38.89,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":13.46,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.55,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":23.68,"GDP Per Capita (USD/year)":null,"Military Expenditure (USD/year)":null,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.7,"Average Age (years)":28.508,"Inflation Rate (year, %)":13.9},{"Country":"Montenegro","Country_clean":"montenegro","Region":"Central and Eastern Europe","Happiness (score 0-10)":5.707,"Median Salary (USD/year)":2621.56,"Average Salary (USD/year)":2832.98,"Lowest Salary (USD/year)":718.82,"Highest Salary (USD/year)":12579.28,"IQAir_AQI (AQI index)":35.2,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":76.1,"Netflix":null,"Women Safety Index (score 0-1)":0.808,"Average Winter Temperature (C)":1.7943455,"Average Summer Temperature (C)":2.1861253,"Population (people)":627082,"Energy Per Capita (kWh per capita)":18940.291,"% of Power from Fossil Fuels (%)":47.678,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":52.322,"% of Agricultural Land (%)":19.0007434944,"% of Forest Land (%)":61.4869888476,"Territory (sq km)":13450,"Average Rainfall (mm/year)":null,"Corruption (std score)":0.1997847706,"Wheat Production (tonnes)":1275302,"Rye Production (tonnes)":3805260,"Potatoes Production (tonnes)":248321,"Meat, Chicken Production (tonnes)":789921.3,"Avocados Production (tonnes)":330240.25,"Petrol Price (USD/liter)":1.71,"Daily Oil Consumption (barrels/day)":7000,"CO2 Emissions (tonnes per capita)":4.179875994,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1732.83,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":34.54,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":26.24,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.83,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":26.34,"GDP Per Capita (USD/year)":20689.98675,"Military Expenditure (USD/year)":83806050.31,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":2.9,"Average Age (years)":38.366,"Inflation Rate (year, %)":13},{"Country":"Mongolia","Country_clean":"mongolia","Region":"East Asia","Happiness (score 0-10)":5.696,"Median Salary (USD/year)":515.76,"Average Salary (USD/year)":564.74,"Lowest Salary (USD/year)":142.34,"Highest Salary (USD/year)":2509.62,"IQAir_AQI (AQI index)":13.3,"Infant Survival Rate (per 1000 births)":999,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":68.8,"Netflix":null,"Women Safety Index (score 0-1)":0.794,"Average Winter Temperature (C)":-18.015043,"Average Summer Temperature (C)":-16.466763,"Population (people)":3398366,"Energy Per Capita (kWh per capita)":22407.674,"% of Power from Fossil Fuels (%)":91.197,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":8.803,"% of Agricultural Land (%)":72.3150521956,"% of Forest Land (%)":9.0989446596,"Territory (sq km)":1557507,"Average Rainfall (mm/year)":241,"Corruption (std score)":0.1558940709,"Wheat Production (tonnes)":null,"Rye Production (tonnes)":null,"Potatoes Production (tonnes)":null,"Meat, Chicken Production (tonnes)":null,"Avocados Production (tonnes)":null,"Petrol Price (USD/liter)":1.23,"Daily Oil Consumption (barrels/day)":21000,"CO2 Emissions (tonnes per capita)":7.153120086,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1417.26,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":57.6,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":12.53,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.74,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":29.35,"GDP Per Capita (USD/year)":13799.90485,"Military Expenditure (USD/year)":96067489.86,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":6,"Average Age (years)":31,"Inflation Rate (year, %)":15.1},{"Country":"Colombia","Country_clean":"colombia","Region":"Latin America and Caribbean","Happiness (score 0-10)":5.695,"Median Salary (USD/year)":995.6,"Average Salary (USD/year)":1157.85,"Lowest Salary (USD/year)":292.53,"Highest Salary (USD/year)":5137.79,"IQAir_AQI (AQI index)":13.25,"Infant Survival Rate (per 1000 births)":990,"Alcohol Consumption Rate (liters per capita per year)":4.38,"Life Expectancy (years)":74.8,"Netflix":6.86,"Women Safety Index (score 0-1)":0.582,"Average Winter Temperature (C)":24.625221,"Average Summer Temperature (C)":25.879896,"Population (people)":51874024,"Energy Per Capita (kWh per capita)":11746.604,"% of Power from Fossil Fuels (%)":24.503,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":75.497,"% of Agricultural Land (%)":38.5020279405,"% of Forest Land (%)":53.125395854,"Territory (sq km)":1109500,"Average Rainfall (mm/year)":3240,"Corruption (std score)":0.1599350423,"Wheat Production (tonnes)":144885,"Rye Production (tonnes)":168,"Potatoes Production (tonnes)":111760,"Meat, Chicken Production (tonnes)":13216000,"Avocados Production (tonnes)":9570,"Petrol Price (USD/liter)":0.6,"Daily Oil Consumption (barrels/day)":357000,"CO2 Emissions (tonnes per capita)":1.609870831,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1444.09,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":17.95,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":19.69,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.57,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":18.88,"GDP Per Capita (USD/year)":15012.93027,"Military Expenditure (USD/year)":10602860967,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":22.6,"Average Age (years)":29.926,"Inflation Rate (year, %)":10.2},{"Country":"Venezuela","Country_clean":"venezuela","Region":"Latin America and Caribbean","Happiness (score 0-10)":5.607,"Median Salary (USD/year)":3282.02,"Average Salary (USD/year)":3862.91,"Lowest Salary (USD/year)":972.99,"Highest Salary (USD/year)":17165.26,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":991,"Alcohol Consumption Rate (liters per capita per year)":6.47,"Life Expectancy (years)":74.1,"Netflix":10.99,"Women Safety Index (score 0-1)":0.628,"Average Winter Temperature (C)":26.43019,"Average Summer Temperature (C)":27.094582,"Population (people)":28301696,"Energy Per Capita (kWh per capita)":21683.146,"% of Power from Fossil Fuels (%)":35.508,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":80.468,"% of Agricultural Land (%)":24.3750354288,"% of Forest Land (%)":52.3477807381,"Territory (sq km)":882050,"Average Rainfall (mm/year)":2044,"Corruption (std score)":0.1630260944,"Wheat Production (tonnes)":2600996.2,"Rye Production (tonnes)":33067.614,"Potatoes Production (tonnes)":122987476,"Meat, Chicken Production (tonnes)":18293614,"Avocados Production (tonnes)":26527.058,"Petrol Price (USD/liter)":0.02,"Daily Oil Consumption (barrels/day)":598000,"CO2 Emissions (tonnes per capita)":3.939566209,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":805.57,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":45.64,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":49.38,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.12,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":50,"GDP Per Capita (USD/year)":null,"Military Expenditure (USD/year)":null,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":36.7,"Average Age (years)":29.297,"Inflation Rate (year, %)":null},{"Country":"Indonesia","Country_clean":"indonesia","Region":"Southeast Asia","Happiness (score 0-10)":5.568,"Median Salary (USD/year)":678.91,"Average Salary (USD/year)":788.83,"Lowest Salary (USD/year)":198.5,"Highest Salary (USD/year)":3504.47,"IQAir_AQI (AQI index)":19.8,"Infant Survival Rate (per 1000 births)":886,"Alcohol Consumption Rate (liters per capita per year)":0.09,"Life Expectancy (years)":69.1,"Netflix":10.66,"Women Safety Index (score 0-1)":0.7,"Average Winter Temperature (C)":25.869717,"Average Summer Temperature (C)":25.94353,"Population (people)":275501339,"Energy Per Capita (kWh per capita)":9854.455,"% of Power from Fossil Fuels (%)":80.383,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":19.617,"% of Agricultural Land (%)":34.1337419294,"% of Forest Land (%)":48.3619448681,"Territory (sq km)":1892555.47,"Average Rainfall (mm/year)":2702,"Corruption (std score)":0.1470372379,"Wheat Production (tonnes)":209830,"Rye Production (tonnes)":38193584,"Potatoes Production (tonnes)":95170,"Meat, Chicken Production (tonnes)":158.9,"Avocados Production (tonnes)":382467,"Petrol Price (USD/liter)":1.18,"Daily Oil Consumption (barrels/day)":1623000,"CO2 Emissions (tonnes per capita)":2.290397148,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":2632.8,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":30.89,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":31.57,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.61,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":22.69,"GDP Per Capita (USD/year)":13079.6193,"Military Expenditure (USD/year)":7437197348,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.4,"Average Age (years)":31.975,"Inflation Rate (year, %)":4.2},{"Country":"Bulgaria","Country_clean":"bulgaria","Region":"Central and Eastern Europe","Happiness (score 0-10)":5.463,"Median Salary (USD/year)":1605.41,"Average Salary (USD/year)":1794.59,"Lowest Salary (USD/year)":454.05,"Highest Salary (USD/year)":7945.95,"IQAir_AQI (AQI index)":16.8,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":12.03,"Life Expectancy (years)":74.5,"Netflix":11.29,"Women Safety Index (score 0-1)":0.826,"Average Winter Temperature (C)":1.7989875,"Average Summer Temperature (C)":3.720064,"Population (people)":6781953,"Energy Per Capita (kWh per capita)":34175.52,"% of Power from Fossil Fuels (%)":48.754,"% of Power from Nuclear (%)":32.543,"% of Power from Renewables (%)":18.703,"% of Agricultural Land (%)":46.4867096536,"% of Forest Land (%)":35.9801031688,"Territory (sq km)":108560,"Average Rainfall (mm/year)":608,"Corruption (std score)":0.1467373222,"Wheat Production (tonnes)":2800,"Rye Production (tonnes)":79.38,"Potatoes Production (tonnes)":4584500,"Meat, Chicken Production (tonnes)":13234959,"Avocados Production (tonnes)":193,"Petrol Price (USD/liter)":1.72,"Daily Oil Consumption (barrels/day)":97000,"CO2 Emissions (tonnes per capita)":5.61085728,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":2539.67,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":29.6,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":12.8,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.21,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":37.4,"GDP Per Capita (USD/year)":21960.36994,"Military Expenditure (USD/year)":1095591047,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1,"Average Age (years)":44.307,"Inflation Rate (year, %)":15.3},{"Country":"Armenia","Country_clean":"armenia","Region":"Commonwealth of Independent States","Happiness (score 0-10)":5.455,"Median Salary (USD/year)":1700.25,"Average Salary (USD/year)":1974.32,"Lowest Salary (USD/year)":497.39,"Highest Salary (USD/year)":8780.39,"IQAir_AQI (AQI index)":35.3,"Infant Survival Rate (per 1000 births)":999,"Alcohol Consumption Rate (liters per capita per year)":3.91,"Life Expectancy (years)":74.8,"Netflix":null,"Women Safety Index (score 0-1)":0.772,"Average Winter Temperature (C)":-2.63862,"Average Summer Temperature (C)":-2.4225743,"Population (people)":2780469,"Energy Per Capita (kWh per capita)":17684.547,"% of Power from Fossil Fuels (%)":43.443,"% of Power from Nuclear (%)":25.273,"% of Power from Renewables (%)":31.284,"% of Agricultural Land (%)":58.827537759,"% of Forest Land (%)":11.5300316122,"Territory (sq km)":28470,"Average Rainfall (mm/year)":562,"Corruption (std score)":0.1820750087,"Wheat Production (tonnes)":328610800,"Rye Production (tonnes)":188384.1,"Potatoes Production (tonnes)":174471740,"Meat, Chicken Production (tonnes)":9700,"Avocados Production (tonnes)":7610,"Petrol Price (USD/liter)":1.26,"Daily Oil Consumption (barrels/day)":6000,"CO2 Emissions (tonnes per capita)":2.086060678,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":2317.05,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":72.2,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":19.41,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.94,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":37.9,"GDP Per Capita (USD/year)":10343.17559,"Military Expenditure (USD/year)":608854649.9,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.8,"Average Age (years)":34.935,"Inflation Rate (year, %)":8.6},{"Country":"South Africa","Country_clean":"south africa","Region":"Sub-Saharan Africa","Happiness (score 0-10)":5.422,"Median Salary (USD/year)":1441.44,"Average Salary (USD/year)":1658.72,"Lowest Salary (USD/year)":417.59,"Highest Salary (USD/year)":7366.19,"IQAir_AQI (AQI index)":18.15,"Infant Survival Rate (per 1000 births)":958,"Alcohol Consumption Rate (liters per capita per year)":7.38,"Life Expectancy (years)":62.9,"Netflix":10.05,"Women Safety Index (score 0-1)":0.688,"Average Winter Temperature (C)":23.753565,"Average Summer Temperature (C)":24.343164,"Population (people)":59893885,"Energy Per Capita (kWh per capita)":22350.898,"% of Power from Fossil Fuels (%)":86.194,"% of Power from Nuclear (%)":4.714,"% of Power from Renewables (%)":9.092,"% of Agricultural Land (%)":79.4178502832,"% of Forest Land (%)":14.0250847011,"Territory (sq km)":1213090,"Average Rainfall (mm/year)":495,"Corruption (std score)":0.1603969038,"Wheat Production (tonnes)":230786548,"Rye Production (tonnes)":310517.2,"Potatoes Production (tonnes)":200506,"Meat, Chicken Production (tonnes)":1296,"Avocados Production (tonnes)":2868,"Petrol Price (USD/liter)":1.48,"Daily Oil Consumption (barrels/day)":640000,"CO2 Emissions (tonnes per capita)":7.507736092,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":735.61,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":32.4,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":49.89,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.91,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":34.22,"GDP Per Capita (USD/year)":13686.88236,"Military Expenditure (USD/year)":3639879165,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":33.5,"Average Age (years)":26.543,"Inflation Rate (year, %)":7},{"Country":"North Macedonia","Country_clean":"north macedonia","Region":"Central and Eastern Europe","Happiness (score 0-10)":5.369,"Median Salary (USD/year)":677,"Average Salary (USD/year)":794.14,"Lowest Salary (USD/year)":199.83,"Highest Salary (USD/year)":3531.44,"IQAir_AQI (AQI index)":21.85,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":1.13,"Life Expectancy (years)":75.7,"Netflix":null,"Women Safety Index (score 0-1)":0.798,"Average Winter Temperature (C)":1.727479,"Average Summer Temperature (C)":2.884718,"Population (people)":2093599,"Energy Per Capita (kWh per capita)":13874.975,"% of Power from Fossil Fuels (%)":72.818,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":27.182,"% of Agricultural Land (%)":49.9603489294,"% of Forest Land (%)":39.7101506741,"Territory (sq km)":25220,"Average Rainfall (mm/year)":619,"Corruption (std score)":0.1741266698,"Wheat Production (tonnes)":1044000,"Rye Production (tonnes)":143862.004,"Potatoes Production (tonnes)":10800,"Meat, Chicken Production (tonnes)":63139.8,"Avocados Production (tonnes)":40944.6,"Petrol Price (USD/liter)":1.88,"Daily Oil Consumption (barrels/day)":21000,"CO2 Emissions (tonnes per capita)":3.996737213,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1737.11,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":28.27,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":19.15,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.43,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":25.47,"GDP Per Capita (USD/year)":16358.66205,"Military Expenditure (USD/year)":117383985.5,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.2,"Average Age (years)":null,"Inflation Rate (year, %)":14.2},{"Country":"Algeria","Country_clean":"algeria","Region":"Middle East and North Africa","Happiness (score 0-10)":5.364,"Median Salary (USD/year)":1148.84,"Average Salary (USD/year)":1308.81,"Lowest Salary (USD/year)":330.11,"Highest Salary (USD/year)":5824.18,"IQAir_AQI (AQI index)":20,"Infant Survival Rate (per 1000 births)":979,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":75.6,"Netflix":null,"Women Safety Index (score 0-1)":0.622,"Average Winter Temperature (C)":13.421954,"Average Summer Temperature (C)":14.559108,"Population (people)":44903225,"Energy Per Capita (kWh per capita)":15252.127,"% of Power from Fossil Fuels (%)":98.826,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":0.839,"% of Agricultural Land (%)":17.3470041453,"% of Forest Land (%)":0.8222276478,"Territory (sq km)":2381741,"Average Rainfall (mm/year)":89,"Corruption (std score)":0.178580597,"Wheat Production (tonnes)":2168386,"Rye Production (tonnes)":135945,"Potatoes Production (tonnes)":4360880,"Meat, Chicken Production (tonnes)":257644.62,"Avocados Production (tonnes)":1240356.5,"Petrol Price (USD/liter)":0.31,"Daily Oil Consumption (barrels/day)":429000,"CO2 Emissions (tonnes per capita)":3.977650459,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1624.07,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":20.15,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":27.77,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.5,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":21.7,"GDP Per Capita (USD/year)":15481.78762,"Military Expenditure (USD/year)":9583724288,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.3,"Average Age (years)":30.333,"Inflation Rate (year, %)":9.3},{"Country":"Hong Kong S.A.R. of China","Country_clean":"hong kong sar of china","Region":"East Asia","Happiness (score 0-10)":5.316,"Median Salary (USD/year)":3684.93,"Average Salary (USD/year)":4027.4,"Lowest Salary (USD/year)":1015.07,"Highest Salary (USD/year)":17945.21,"IQAir_AQI (AQI index)":28.65,"Infant Survival Rate (per 1000 births)":994,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":76,"Netflix":10,"Women Safety Index (score 0-1)":0.7,"Average Winter Temperature (C)":-6.3306623,"Average Summer Temperature (C)":-5.6608214,"Population (people)":1425887337,"Energy Per Capita (kWh per capita)":31051.48,"% of Power from Fossil Fuels (%)":64.602,"% of Power from Nuclear (%)":4.725,"% of Power from Renewables (%)":30.673,"% of Agricultural Land (%)":3.8095238095,"% of Forest Land (%)":null,"Territory (sq km)":1050,"Average Rainfall (mm/year)":null,"Corruption (std score)":0.1621359587,"Wheat Production (tonnes)":13631,"Rye Production (tonnes)":800,"Potatoes Production (tonnes)":0,"Meat, Chicken Production (tonnes)":6155.65,"Avocados Production (tonnes)":88.19,"Petrol Price (USD/liter)":1.43,"Daily Oil Consumption (barrels/day)":12791553,"CO2 Emissions (tonnes per capita)":7.605936961,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":17746.11,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":63.49,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":17.07,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.53,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":39.86,"GDP Per Capita (USD/year)":64596.56385,"Military Expenditure (USD/year)":250000000000,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.5,"Average Age (years)":45.58,"Inflation Rate (year, %)":2},{"Country":"Albania","Country_clean":"albania","Region":"Central and Eastern Europe","Happiness (score 0-10)":5.304,"Median Salary (USD/year)":832.84,"Average Salary (USD/year)":956.92,"Lowest Salary (USD/year)":241.22,"Highest Salary (USD/year)":4258.49,"IQAir_AQI (AQI index)":12.5,"Infant Survival Rate (per 1000 births)":1000,"Alcohol Consumption Rate (liters per capita per year)":4.6,"Life Expectancy (years)":77.8,"Netflix":null,"Women Safety Index (score 0-1)":0.796,"Average Winter Temperature (C)":4.993411,"Average Summer Temperature (C)":5.48025,"Population (people)":2842321,"Energy Per Capita (kWh per capita)":14100.432,"% of Power from Fossil Fuels (%)":0,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":100,"% of Agricultural Land (%)":41.4718978102,"% of Forest Land (%)":28.7919708029,"Territory (sq km)":27400,"Average Rainfall (mm/year)":1485,"Corruption (std score)":0.1620248556,"Wheat Production (tonnes)":225170.9,"Rye Production (tonnes)":873343.06,"Potatoes Production (tonnes)":258862,"Meat, Chicken Production (tonnes)":13250,"Avocados Production (tonnes)":4173.95,"Petrol Price (USD/liter)":2.11,"Daily Oil Consumption (barrels/day)":27000,"CO2 Emissions (tonnes per capita)":1.69224832,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":2213.03,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":36.09,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":15.95,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.45,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":36.04,"GDP Per Capita (USD/year)":13364.1554,"Military Expenditure (USD/year)":180488725.1,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":2.1,"Average Age (years)":33.636,"Inflation Rate (year, %)":6.7},{"Country":"Tajikistan","Country_clean":"tajikistan","Region":"Commonwealth of Independent States","Happiness (score 0-10)":5.281,"Median Salary (USD/year)":959.78,"Average Salary (USD/year)":1069.47,"Lowest Salary (USD/year)":269.65,"Highest Salary (USD/year)":4753.2,"IQAir_AQI (AQI index)":59.25,"Infant Survival Rate (per 1000 births)":990,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":69.7,"Netflix":null,"Women Safety Index (score 0-1)":0.69,"Average Winter Temperature (C)":-13.769967,"Average Summer Temperature (C)":-9.324993,"Population (people)":9952787,"Energy Per Capita (kWh per capita)":7674.914,"% of Power from Fossil Fuels (%)":8.768,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":91.232,"% of Agricultural Land (%)":35.4276244686,"% of Forest Land (%)":3.0607392463,"Territory (sq km)":138790,"Average Rainfall (mm/year)":691,"Corruption (std score)":0.1768408716,"Wheat Production (tonnes)":10363525.6,"Rye Production (tonnes)":3997,"Potatoes Production (tonnes)":140721600,"Meat, Chicken Production (tonnes)":425,"Avocados Production (tonnes)":39040.4,"Petrol Price (USD/liter)":1.57,"Daily Oil Consumption (barrels/day)":21000,"CO2 Emissions (tonnes per capita)":1.010618692,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":835.59,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":34.86,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":22.17,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.41,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":11,"GDP Per Capita (USD/year)":3449.779316,"Military Expenditure (USD/year)":null,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.9,"Average Age (years)":23.847,"Inflation Rate (year, %)":null},{"Country":"Congo (Brazzaville)","Country_clean":"congo brazzaville","Region":"Sub-Saharan Africa","Happiness (score 0-10)":5.221,"Median Salary (USD/year)":1058.67,"Average Salary (USD/year)":1205.3,"Lowest Salary (USD/year)":302.94,"Highest Salary (USD/year)":5365.86,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":993,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":64.7,"Netflix":null,"Women Safety Index (score 0-1)":0.384,"Average Winter Temperature (C)":25.505972,"Average Summer Temperature (C)":26.152718,"Population (people)":99010212,"Energy Per Capita (kWh per capita)":2348.011,"% of Power from Fossil Fuels (%)":76.119,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":23.881,"% of Agricultural Land (%)":31.2679355783,"% of Forest Land (%)":64.2196193265,"Territory (sq km)":341500,"Average Rainfall (mm/year)":1646,"Corruption (std score)":0.158911109,"Wheat Production (tonnes)":916614,"Rye Production (tonnes)":15,"Potatoes Production (tonnes)":32500,"Meat, Chicken Production (tonnes)":1478922.8,"Avocados Production (tonnes)":21000,"Petrol Price (USD/liter)":1.04,"Daily Oil Consumption (barrels/day)":17000,"CO2 Emissions (tonnes per capita)":1.349316017,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":6170.63,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":97.5,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":300,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.78,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":42.63,"GDP Per Capita (USD/year)":5662.063411,"Military Expenditure (USD/year)":292260465.3,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":null,"Average Age (years)":21.846,"Inflation Rate (year, %)":3},{"Country":"Mozambique","Country_clean":"mozambique","Region":"Sub-Saharan Africa","Happiness (score 0-10)":5.216,"Median Salary (USD/year)":549.81,"Average Salary (USD/year)":631.27,"Lowest Salary (USD/year)":159.77,"Highest Salary (USD/year)":2803.88,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":940,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":57.6,"Netflix":null,"Women Safety Index (score 0-1)":0.58,"Average Winter Temperature (C)":26.116705,"Average Summer Temperature (C)":28.754948,"Population (people)":32969517,"Energy Per Capita (kWh per capita)":2241.226,"% of Power from Fossil Fuels (%)":18.593,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":81.407,"% of Agricultural Land (%)":52.6638927745,"% of Forest Land (%)":46.4121731224,"Territory (sq km)":786380,"Average Rainfall (mm/year)":1032,"Corruption (std score)":0.1515905112,"Wheat Production (tonnes)":960,"Rye Production (tonnes)":240600.52,"Potatoes Production (tonnes)":13900,"Meat, Chicken Production (tonnes)":2108.7,"Avocados Production (tonnes)":21020,"Petrol Price (USD/liter)":1.3,"Daily Oil Consumption (barrels/day)":40000,"CO2 Emissions (tonnes per capita)":0.246986412,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":3248.65,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":59.25,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":123.73,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.04,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":66.56,"GDP Per Capita (USD/year)":1459.698413,"Military Expenditure (USD/year)":145206801.9,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":3.5,"Average Age (years)":19.071,"Inflation Rate (year, %)":10.3},{"Country":"Georgia","Country_clean":"georgia","Region":"Commonwealth of Independent States","Happiness (score 0-10)":5.185,"Median Salary (USD/year)":2309.7,"Average Salary (USD/year)":2526.12,"Lowest Salary (USD/year)":638.06,"Highest Salary (USD/year)":11231.34,"IQAir_AQI (AQI index)":20.4,"Infant Survival Rate (per 1000 births)":999,"Alcohol Consumption Rate (liters per capita per year)":6.13,"Life Expectancy (years)":74.4,"Netflix":null,"Women Safety Index (score 0-1)":0.812,"Average Winter Temperature (C)":-1.3454458,"Average Summer Temperature (C)":-1.0580338,"Population (people)":3744385,"Energy Per Capita (kWh per capita)":20834.768,"% of Power from Fossil Fuels (%)":23.806,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":76.194,"% of Agricultural Land (%)":34.2480932508,"% of Forest Land (%)":40.6159159591,"Territory (sq km)":69490,"Average Rainfall (mm/year)":1026,"Corruption (std score)":0.1741266698,"Wheat Production (tonnes)":33722,"Rye Production (tonnes)":1400,"Potatoes Production (tonnes)":10000,"Meat, Chicken Production (tonnes)":7479107,"Avocados Production (tonnes)":83301.25,"Petrol Price (USD/liter)":1.33,"Daily Oil Consumption (barrels/day)":33000,"CO2 Emissions (tonnes per capita)":2.717624226,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1797.34,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":52.41,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":20.48,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.86,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":36.97,"GDP Per Capita (USD/year)":12004.57383,"Military Expenditure (USD/year)":316508368.1,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.9,"Average Age (years)":39.768,"Inflation Rate (year, %)":11.9},{"Country":"Iraq","Country_clean":"iraq","Region":"Middle East and North Africa","Happiness (score 0-10)":5.166,"Median Salary (USD/year)":1382.38,"Average Salary (USD/year)":1573.31,"Lowest Salary (USD/year)":395.62,"Highest Salary (USD/year)":6988.25,"IQAir_AQI (AQI index)":49.7,"Infant Survival Rate (per 1000 births)":968,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":68.9,"Netflix":null,"Women Safety Index (score 0-1)":0.424,"Average Winter Temperature (C)":10.920471,"Average Summer Temperature (C)":12.792713,"Population (people)":44496122,"Energy Per Capita (kWh per capita)":14392.053,"% of Power from Fossil Fuels (%)":94.571,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":3.169,"% of Agricultural Land (%)":21.7078833892,"% of Forest Land (%)":1.9003611838,"Territory (sq km)":434128,"Average Rainfall (mm/year)":216,"Corruption (std score)":0.2064384371,"Wheat Production (tonnes)":2000,"Rye Production (tonnes)":36788.4,"Potatoes Production (tonnes)":28,"Meat, Chicken Production (tonnes)":2250,"Avocados Production (tonnes)":79661,"Petrol Price (USD/liter)":0.51,"Daily Oil Consumption (barrels/day)":857000,"CO2 Emissions (tonnes per capita)":4.440624129,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":2099.93,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":34.73,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":58.46,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.46,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":22.85,"GDP Per Capita (USD/year)":17435.85393,"Military Expenditure (USD/year)":6317977150,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":10.1,"Average Age (years)":22.252,"Inflation Rate (year, %)":5},{"Country":"Nepal","Country_clean":"nepal","Region":"South Asia","Happiness (score 0-10)":5.158,"Median Salary (USD/year)":551.13,"Average Salary (USD/year)":608.2,"Lowest Salary (USD/year)":153.18,"Highest Salary (USD/year)":2703.11,"IQAir_AQI (AQI index)":35.4,"Infant Survival Rate (per 1000 births)":983,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":69.2,"Netflix":null,"Women Safety Index (score 0-1)":0.644,"Average Winter Temperature (C)":3.4482849,"Average Summer Temperature (C)":6.6038175,"Population (people)":30547580,"Energy Per Capita (kWh per capita)":1607.635,"% of Power from Fossil Fuels (%)":0,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":100,"% of Agricultural Land (%)":28.7478200209,"% of Forest Land (%)":41.5907220091,"Territory (sq km)":143350,"Average Rainfall (mm/year)":1500,"Corruption (std score)":0.1649870872,"Wheat Production (tonnes)":18053568,"Rye Production (tonnes)":1585771.6,"Potatoes Production (tonnes)":867000,"Meat, Chicken Production (tonnes)":142000,"Avocados Production (tonnes)":69582.234,"Petrol Price (USD/liter)":1.42,"Daily Oil Consumption (barrels/day)":43000,"CO2 Emissions (tonnes per capita)":0.470136453,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1847.25,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":28.16,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":12.17,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.44,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":23.07,"GDP Per Capita (USD/year)":3089.556352,"Military Expenditure (USD/year)":398521544.9,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":2.3,"Average Age (years)":24.695,"Inflation Rate (year, %)":null},{"Country":"Laos","Country_clean":"laos","Region":"Southeast Asia","Happiness (score 0-10)":5.139,"Median Salary (USD/year)":206.42,"Average Salary (USD/year)":223.54,"Lowest Salary (USD/year)":56.25,"Highest Salary (USD/year)":992.99,"IQAir_AQI (AQI index)":21.5,"Infant Survival Rate (per 1000 births)":null,"Alcohol Consumption Rate (liters per capita per year)":null,"Life Expectancy (years)":null,"Netflix":null,"Women Safety Index (score 0-1)":0.704,"Average Winter Temperature (C)":19.469608,"Average Summer Temperature (C)":20.353256,"Population (people)":7529475,"Energy Per Capita (kWh per capita)":18847.086,"% of Power from Fossil Fuels (%)":27.045,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":72.955,"% of Agricultural Land (%)":null,"% of Forest Land (%)":null,"Territory (sq km)":null,"Average Rainfall (mm/year)":null,"Corruption (std score)":null,"Wheat Production (tonnes)":96402500,"Rye Production (tonnes)":177940.2,"Potatoes Production (tonnes)":7540892.5,"Meat, Chicken Production (tonnes)":96000,"Avocados Production (tonnes)":0,"Petrol Price (USD/liter)":1.91,"Daily Oil Consumption (barrels/day)":18000,"CO2 Emissions (tonnes per capita)":null,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":2493.1,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":34.22,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":102.02,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.07,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":24.07,"GDP Per Capita (USD/year)":null,"Military Expenditure (USD/year)":null,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":null,"Average Age (years)":23.728,"Inflation Rate (year, %)":23},{"Country":"Gabon","Country_clean":"gabon","Region":"Sub-Saharan Africa","Happiness (score 0-10)":5.106,"Median Salary (USD/year)":800.85,"Average Salary (USD/year)":894.31,"Lowest Salary (USD/year)":225.59,"Highest Salary (USD/year)":3980.08,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":998,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":66,"Netflix":null,"Women Safety Index (score 0-1)":0.593,"Average Winter Temperature (C)":25.409601,"Average Summer Temperature (C)":26.325548,"Population (people)":2388992,"Energy Per Capita (kWh per capita)":8009.644,"% of Power from Fossil Fuels (%)":55.459,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":44.541,"% of Agricultural Land (%)":8.3565645981,"% of Forest Land (%)":91.2745760081,"Territory (sq km)":257670,"Average Rainfall (mm/year)":1831,"Corruption (std score)":0.1993061751,"Wheat Production (tonnes)":67690,"Rye Production (tonnes)":9447,"Potatoes Production (tonnes)":32656,"Meat, Chicken Production (tonnes)":4519606,"Avocados Production (tonnes)":9710,"Petrol Price (USD/liter)":0.97,"Daily Oil Consumption (barrels/day)":21000,"CO2 Emissions (tonnes per capita)":2.416484011,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":13654.61,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":70.68,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":66.93,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.84,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":80.32,"GDP Per Capita (USD/year)":17875.76115,"Military Expenditure (USD/year)":261217395.1,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":null,"Average Age (years)":24.392,"Inflation Rate (year, %)":4.2},{"Country":"Ivory Coast","Country_clean":"cote divoire","Region":"Sub-Saharan Africa","Happiness (score 0-10)":5.08,"Median Salary (USD/year)":497.91,"Average Salary (USD/year)":544.64,"Lowest Salary (USD/year)":137.45,"Highest Salary (USD/year)":2417.05,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":943,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":53.3,"Netflix":null,"Women Safety Index (score 0-1)":0.573,"Average Winter Temperature (C)":26.548874,"Average Summer Temperature (C)":27.247503,"Population (people)":28160542,"Energy Per Capita (kWh per capita)":2370.596,"% of Power from Fossil Fuels (%)":69.854,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":30.146,"% of Agricultural Land (%)":73.8993710692,"% of Forest Land (%)":8.5654927673,"Territory (sq km)":318000,"Average Rainfall (mm/year)":1348,"Corruption (std score)":0.1473762393,"Wheat Production (tonnes)":195046800,"Rye Production (tonnes)":71873.17,"Potatoes Production (tonnes)":420,"Meat, Chicken Production (tonnes)":6563.91,"Avocados Production (tonnes)":53000,"Petrol Price (USD/liter)":1.18,"Daily Oil Consumption (barrels/day)":51000,"CO2 Emissions (tonnes per capita)":0.421129515,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1579.65,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":57.03,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":55.88,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.76,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":32.13,"GDP Per Capita (USD/year)":4207.086934,"Military Expenditure (USD/year)":607848217.9,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":null,"Average Age (years)":21.159,"Inflation Rate (year, %)":5.3},{"Country":"Guinea","Country_clean":"guinea","Region":"Sub-Saharan Africa","Happiness (score 0-10)":5.023,"Median Salary (USD/year)":696.71,"Average Salary (USD/year)":817.87,"Lowest Salary (USD/year)":206.22,"Highest Salary (USD/year)":3634.99,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":974,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":59,"Netflix":null,"Women Safety Index (score 0-1)":0.539,"Average Winter Temperature (C)":25.573353,"Average Summer Temperature (C)":26.244331,"Population (people)":13859341,"Energy Per Capita (kWh per capita)":1281.525,"% of Power from Fossil Fuels (%)":27.338,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":72.662,"% of Agricultural Land (%)":59.5718704216,"% of Forest Land (%)":25.0244180368,"Territory (sq km)":245720,"Average Rainfall (mm/year)":1651,"Corruption (std score)":0.1515905112,"Wheat Production (tonnes)":407,"Rye Production (tonnes)":295681,"Potatoes Production (tonnes)":1109560,"Meat, Chicken Production (tonnes)":351,"Avocados Production (tonnes)":5720,"Petrol Price (USD/liter)":1.36,"Daily Oil Consumption (barrels/day)":19001,"CO2 Emissions (tonnes per capita)":0.309288541,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":363.49,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":25.34,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":100,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.37,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":30,"GDP Per Capita (USD/year)":2504.869745,"Military Expenditure (USD/year)":209150578.3,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.1,"Average Age (years)":19.584,"Inflation Rate (year, %)":10.5},{"Country":"Turkiye","Country_clean":"turkey","Region":"Middle East and North Africa","Happiness (score 0-10)":4.975,"Median Salary (USD/year)":254.1,"Average Salary (USD/year)":286.13,"Lowest Salary (USD/year)":72.08,"Highest Salary (USD/year)":1274.12,"IQAir_AQI (AQI index)":19.8,"Infant Survival Rate (per 1000 births)":985,"Alcohol Consumption Rate (liters per capita per year)":1.45,"Life Expectancy (years)":75.8,"Netflix":3,"Women Safety Index (score 0-1)":0.665,"Average Winter Temperature (C)":3.0063581,"Average Summer Temperature (C)":3.4250228,"Population (people)":85341241,"Energy Per Capita (kWh per capita)":22824.15,"% of Power from Fossil Fuels (%)":58.027,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":41.973,"% of Agricultural Land (%)":49.4900146824,"% of Forest Land (%)":29.0741785014,"Territory (sq km)":769630,"Average Rainfall (mm/year)":593,"Corruption (std score)":0.1640447378,"Wheat Production (tonnes)":635748.4,"Rye Production (tonnes)":13876344.2,"Potatoes Production (tonnes)":3826904,"Meat, Chicken Production (tonnes)":55,"Avocados Production (tonnes)":16151.2,"Petrol Price (USD/liter)":1.6,"Daily Oil Consumption (barrels/day)":941861,"CO2 Emissions (tonnes per capita)":4.75658475,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":2374.69,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":26.37,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":8.9,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.9,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":24.15,"GDP Per Capita (USD/year)":28068.85941,"Military Expenditure (USD/year)":18967113031,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":2.5,"Average Age (years)":31.914,"Inflation Rate (year, %)":72.3},{"Country":"Senegal","Country_clean":"senegal","Region":"Sub-Saharan Africa","Happiness (score 0-10)":4.969,"Median Salary (USD/year)":493.08,"Average Salary (USD/year)":565.59,"Lowest Salary (USD/year)":142.77,"Highest Salary (USD/year)":2513.74,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":981,"Alcohol Consumption Rate (liters per capita per year)":0.26,"Life Expectancy (years)":66.7,"Netflix":null,"Women Safety Index (score 0-1)":0.619,"Average Winter Temperature (C)":25.55183,"Average Summer Temperature (C)":26.647112,"Population (people)":17316449,"Energy Per Capita (kWh per capita)":2505.209,"% of Power from Fossil Fuels (%)":80.071,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":19.929,"% of Agricultural Land (%)":49.4000934919,"% of Forest Land (%)":41.6982288475,"Territory (sq km)":192530,"Average Rainfall (mm/year)":686,"Corruption (std score)":0.1473762393,"Wheat Production (tonnes)":56920,"Rye Production (tonnes)":13524458.4,"Potatoes Production (tonnes)":879000,"Meat, Chicken Production (tonnes)":117856.39,"Avocados Production (tonnes)":113807.792,"Petrol Price (USD/liter)":1.42,"Daily Oil Consumption (barrels/day)":49000,"CO2 Emissions (tonnes per capita)":0.651679184,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":9016.38,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":66.67,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":48.8,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.1,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":54.62,"GDP Per Capita (USD/year)":3782.538613,"Military Expenditure (USD/year)":346772974.6,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":0.3,"Average Age (years)":19.637,"Inflation Rate (year, %)":9.7},{"Country":"Iran","Country_clean":"iran","Region":"Middle East and North Africa","Happiness (score 0-10)":4.923,"Median Salary (USD/year)":932.63,"Average Salary (USD/year)":1070.97,"Lowest Salary (USD/year)":269.53,"Highest Salary (USD/year)":4770.47,"IQAir_AQI (AQI index)":26.1,"Infant Survival Rate (per 1000 births)":982,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":75.5,"Netflix":null,"Women Safety Index (score 0-1)":0.557,"Average Winter Temperature (C)":6.699771,"Average Summer Temperature (C)":9.465016,"Population (people)":88550570,"Energy Per Capita (kWh per capita)":38133.086,"% of Power from Fossil Fuels (%)":94.081,"% of Power from Nuclear (%)":0.955,"% of Power from Renewables (%)":4.965,"% of Agricultural Land (%)":29.0089368259,"% of Forest Land (%)":6.635211094,"Territory (sq km)":1622500,"Average Rainfall (mm/year)":228,"Corruption (std score)":0.1734505892,"Wheat Production (tonnes)":1562160,"Rye Production (tonnes)":71601,"Potatoes Production (tonnes)":195000,"Meat, Chicken Production (tonnes)":2530,"Avocados Production (tonnes)":382467,"Petrol Price (USD/liter)":0.05,"Daily Oil Consumption (barrels/day)":1803999,"CO2 Emissions (tonnes per capita)":7.598364845,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":2183.1,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":20.43,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":13.96,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.93,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":30,"GDP Per Capita (USD/year)":null,"Military Expenditure (USD/year)":13194151137,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":2.2,"Average Age (years)":32.191,"Inflation Rate (year, %)":null},{"Country":"Azerbaijan","Country_clean":"azerbaijan","Region":"Commonwealth of Independent States","Happiness (score 0-10)":4.893,"Median Salary (USD/year)":1558.82,"Average Salary (USD/year)":1741.18,"Lowest Salary (USD/year)":441.18,"Highest Salary (USD/year)":7764.71,"IQAir_AQI (AQI index)":17.6,"Infant Survival Rate (per 1000 births)":995,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":72.7,"Netflix":null,"Women Safety Index (score 0-1)":0.667,"Average Winter Temperature (C)":1.85439,"Average Summer Temperature (C)":3.2257857,"Population (people)":10358074,"Energy Per Capita (kWh per capita)":18747.918,"% of Power from Fossil Fuels (%)":94.599,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":6.343,"% of Agricultural Land (%)":57.8415003025,"% of Forest Land (%)":13.8329909256,"Territory (sq km)":82650,"Average Rainfall (mm/year)":447,"Corruption (std score)":0.1841555238,"Wheat Production (tonnes)":1348186,"Rye Production (tonnes)":7577,"Potatoes Production (tonnes)":31,"Meat, Chicken Production (tonnes)":95517,"Avocados Production (tonnes)":4200,"Petrol Price (USD/liter)":0.59,"Daily Oil Consumption (barrels/day)":96000,"CO2 Emissions (tonnes per capita)":3.542397828,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1548.48,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":32.43,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":14.73,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.54,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":29.41,"GDP Per Capita (USD/year)":18044.13678,"Military Expenditure (USD/year)":1708941176,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":2.3,"Average Age (years)":32.029,"Inflation Rate (year, %)":13.9},{"Country":"Nigeria","Country_clean":"nigeria","Region":"Sub-Saharan Africa","Happiness (score 0-10)":4.881,"Median Salary (USD/year)":389.85,"Average Salary (USD/year)":438.91,"Lowest Salary (USD/year)":110.63,"Highest Salary (USD/year)":1949.27,"IQAir_AQI (AQI index)":28.5,"Infant Survival Rate (per 1000 births)":517,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":54.5,"Netflix":null,"Women Safety Index (score 0-1)":0.465,"Average Winter Temperature (C)":25.011763,"Average Summer Temperature (C)":25.588018,"Population (people)":218541212,"Energy Per Capita (kWh per capita)":2547.954,"% of Power from Fossil Fuels (%)":72.492,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":27.508,"% of Agricultural Land (%)":75.3691931003,"% of Forest Land (%)":23.5664876972,"Territory (sq km)":910770,"Average Rainfall (mm/year)":1150,"Corruption (std score)":0.1521603316,"Wheat Production (tonnes)":199000,"Rye Production (tonnes)":10328099,"Potatoes Production (tonnes)":1850,"Meat, Chicken Production (tonnes)":1441905,"Avocados Production (tonnes)":80609.488,"Petrol Price (USD/liter)":0.42,"Daily Oil Consumption (barrels/day)":428000,"CO2 Emissions (tonnes per capita)":0.573636206,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":746.59,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":40.01,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":52.83,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.4,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":45.03,"GDP Per Capita (USD/year)":5990.850432,"Military Expenditure (USD/year)":2043051719,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":22,"Average Age (years)":20.009,"Inflation Rate (year, %)":18.8},{"Country":"State of Palestine","Country_clean":"state of palestine","Region":"Middle East and North Africa","Happiness (score 0-10)":4.879,"Median Salary (USD/year)":1510,"Average Salary (USD/year)":1710,"Lowest Salary (USD/year)":430,"Highest Salary (USD/year)":7620,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":764,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":59.8,"Netflix":null,"Women Safety Index (score 0-1)":0.483,"Average Winter Temperature (C)":13.515371,"Average Summer Temperature (C)":14.106538,"Population (people)":5250072,"Energy Per Capita (kWh per capita)":3999.195,"% of Power from Fossil Fuels (%)":76.744,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":23.256,"% of Agricultural Land (%)":68.7719298246,"% of Forest Land (%)":6.0701754386,"Territory (sq km)":570,"Average Rainfall (mm/year)":null,"Corruption (std score)":null,"Wheat Production (tonnes)":23762000,"Rye Production (tonnes)":391.1,"Potatoes Production (tonnes)":7529025,"Meat, Chicken Production (tonnes)":52000,"Avocados Production (tonnes)":145795,"Petrol Price (USD/liter)":1.75,"Daily Oil Consumption (barrels/day)":24001,"CO2 Emissions (tonnes per capita)":null,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":4700,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":null,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":null,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.68,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":20.49,"GDP Per Capita (USD/year)":null,"Military Expenditure (USD/year)":null,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1,"Average Age (years)":null,"Inflation Rate (year, %)":3},{"Country":"Cameroon","Country_clean":"cameroon","Region":"Sub-Saharan Africa","Happiness (score 0-10)":4.874,"Median Salary (USD/year)":633.27,"Average Salary (USD/year)":744.45,"Lowest Salary (USD/year)":186.92,"Highest Salary (USD/year)":3303.31,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":955,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":57.3,"Netflix":null,"Women Safety Index (score 0-1)":0.466,"Average Winter Temperature (C)":24.881084,"Average Summer Temperature (C)":24.946562,"Population (people)":27914536,"Energy Per Capita (kWh per capita)":1593.62,"% of Power from Fossil Fuels (%)":37.64,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":62.36,"% of Agricultural Land (%)":20.6257536333,"% of Forest Land (%)":42.9110448266,"Territory (sq km)":472710,"Average Rainfall (mm/year)":1604,"Corruption (std score)":0.1473762393,"Wheat Production (tonnes)":31793,"Rye Production (tonnes)":10210326,"Potatoes Production (tonnes)":2133322.8,"Meat, Chicken Production (tonnes)":6922.65,"Avocados Production (tonnes)":28994,"Petrol Price (USD/liter)":1.04,"Daily Oil Consumption (barrels/day)":40000,"CO2 Emissions (tonnes per capita)":0.364424922,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1499.33,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":30.98,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":45.18,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.72,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":32.13,"GDP Per Capita (USD/year)":3785.079978,"Military Expenditure (USD/year)":429892180.6,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.4,"Average Age (years)":20.622,"Inflation Rate (year, %)":6.2},{"Country":"Ukraine","Country_clean":"ukraine","Region":"Commonwealth of Independent States","Happiness (score 0-10)":4.873,"Median Salary (USD/year)":530.73,"Average Salary (USD/year)":622.8,"Lowest Salary (USD/year)":157.32,"Highest Salary (USD/year)":2761.98,"IQAir_AQI (AQI index)":18.8,"Infant Survival Rate (per 1000 births)":996,"Alcohol Consumption Rate (liters per capita per year)":8.06,"Life Expectancy (years)":71.3,"Netflix":8.46,"Women Safety Index (score 0-1)":0.626,"Average Winter Temperature (C)":-1.7763926,"Average Summer Temperature (C)":0.87508214,"Population (people)":39701739,"Energy Per Capita (kWh per capita)":16309.124,"% of Power from Fossil Fuels (%)":25.424,"% of Power from Nuclear (%)":58.058,"% of Power from Renewables (%)":16.518,"% of Agricultural Land (%)":71.2996202969,"% of Forest Land (%)":16.7345529858,"Territory (sq km)":579400,"Average Rainfall (mm/year)":565,"Corruption (std score)":0.1620248556,"Wheat Production (tonnes)":2727560,"Rye Production (tonnes)":10948.6,"Potatoes Production (tonnes)":330779000,"Meat, Chicken Production (tonnes)":80000,"Avocados Production (tonnes)":97652.8,"Petrol Price (USD/liter)":1.7,"Daily Oil Consumption (barrels/day)":244000,"CO2 Emissions (tonnes per capita)":3.936583531,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1967.7,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":24.02,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":5.11,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.62,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":26.6,"GDP Per Capita (USD/year)":9249.462135,"Military Expenditure (USD/year)":4750219044,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":6.2,"Average Age (years)":41.202,"Inflation Rate (year, %)":20.2},{"Country":"Namibia","Country_clean":"namibia","Region":"Sub-Saharan Africa","Happiness (score 0-10)":4.832,"Median Salary (USD/year)":821.41,"Average Salary (USD/year)":927.4,"Lowest Salary (USD/year)":233.7,"Highest Salary (USD/year)":4128.25,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":998,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":65.8,"Netflix":null,"Women Safety Index (score 0-1)":0.61,"Average Winter Temperature (C)":25.959553,"Average Summer Temperature (C)":26.584833,"Population (people)":2567012,"Energy Per Capita (kWh per capita)":8748.273,"% of Power from Fossil Fuels (%)":4.459,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":95.541,"% of Agricultural Land (%)":47.1425621591,"% of Forest Land (%)":7.9776142064,"Territory (sq km)":823290,"Average Rainfall (mm/year)":285,"Corruption (std score)":0.1675386727,"Wheat Production (tonnes)":18053568,"Rye Production (tonnes)":2762388.832,"Potatoes Production (tonnes)":24754506,"Meat, Chicken Production (tonnes)":9280,"Avocados Production (tonnes)":567.4,"Petrol Price (USD/liter)":1.27,"Daily Oil Consumption (barrels/day)":26000,"CO2 Emissions (tonnes per capita)":1.691705428,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":857.63,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":39.31,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":48.6,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.78,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":37.16,"GDP Per Capita (USD/year)":11101.82628,"Military Expenditure (USD/year)":451546508.8,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":11.9,"Average Age (years)":23.559,"Inflation Rate (year, %)":6.1},{"Country":"Morocco","Country_clean":"morocco","Region":"Middle East and North Africa","Happiness (score 0-10)":4.795,"Median Salary (USD/year)":1634.24,"Average Salary (USD/year)":1896.89,"Lowest Salary (USD/year)":477.63,"Highest Salary (USD/year)":8433.85,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":983,"Alcohol Consumption Rate (liters per capita per year)":0.43,"Life Expectancy (years)":74.3,"Netflix":null,"Women Safety Index (score 0-1)":0.637,"Average Winter Temperature (C)":11.878008,"Average Summer Temperature (C)":13.544462,"Population (people)":37457971,"Energy Per Capita (kWh per capita)":6855.11,"% of Power from Fossil Fuels (%)":80.194,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":17.382,"% of Agricultural Land (%)":67.8713869594,"% of Forest Land (%)":12.8903354246,"Territory (sq km)":446300,"Average Rainfall (mm/year)":346,"Corruption (std score)":0.1603332013,"Wheat Production (tonnes)":580,"Rye Production (tonnes)":240600.52,"Potatoes Production (tonnes)":1642,"Meat, Chicken Production (tonnes)":8401090,"Avocados Production (tonnes)":21020,"Petrol Price (USD/liter)":1.68,"Daily Oil Consumption (barrels/day)":275000,"CO2 Emissions (tonnes per capita)":1.959872285,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1863.17,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":20.64,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":36.34,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.46,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":18.89,"GDP Per Capita (USD/year)":8611.709833,"Military Expenditure (USD/year)":3696856945,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.3,"Average Age (years)":29.825,"Inflation Rate (year, %)":6.7},{"Country":"Pakistan","Country_clean":"pakistan","Region":"South Asia","Happiness (score 0-10)":4.657,"Median Salary (USD/year)":245.34,"Average Salary (USD/year)":284.9,"Lowest Salary (USD/year)":71.83,"Highest Salary (USD/year)":1266.61,"IQAir_AQI (AQI index)":81.7,"Infant Survival Rate (per 1000 births)":648,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":66.4,"Netflix":null,"Women Safety Index (score 0-1)":0.481,"Average Winter Temperature (C)":9.189832,"Average Summer Temperature (C)":9.4178095,"Population (people)":235824862,"Energy Per Capita (kWh per capita)":4242.753,"% of Power from Fossil Fuels (%)":56.575,"% of Power from Nuclear (%)":14.74,"% of Power from Renewables (%)":28.685,"% of Agricultural Land (%)":47.0929327522,"% of Forest Land (%)":4.7796803653,"Territory (sq km)":770880,"Average Rainfall (mm/year)":494,"Corruption (std score)":0.1551976055,"Wheat Production (tonnes)":2326000,"Rye Production (tonnes)":2036086.2,"Potatoes Production (tonnes)":1000,"Meat, Chicken Production (tonnes)":1.6,"Avocados Production (tonnes)":548570.264,"Petrol Price (USD/liter)":1.03,"Daily Oil Consumption (barrels/day)":556000,"CO2 Emissions (tonnes per capita)":0.879965499,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":760.64,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":16.52,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":20.72,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.29,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":11.18,"GDP Per Capita (USD/year)":5567.055608,"Military Expenditure (USD/year)":11375525626,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":3.8,"Average Age (years)":23.703,"Inflation Rate (year, %)":19.9},{"Country":"Niger","Country_clean":"niger","Region":"Sub-Saharan Africa","Happiness (score 0-10)":4.556,"Median Salary (USD/year)":480.19,"Average Salary (USD/year)":547.87,"Lowest Salary (USD/year)":137.93,"Highest Salary (USD/year)":2433.17,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":951,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":61.8,"Netflix":null,"Women Safety Index (score 0-1)":0.442,"Average Winter Temperature (C)":18.64278,"Average Summer Temperature (C)":19.539503,"Population (people)":26207977,"Energy Per Capita (kWh per capita)":409.757,"% of Power from Fossil Fuels (%)":88.889,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":11.111,"% of Agricultural Land (%)":36.7845583011,"% of Forest Land (%)":0.8425673009,"Territory (sq km)":1266700,"Average Rainfall (mm/year)":151,"Corruption (std score)":0.1515905112,"Wheat Production (tonnes)":6040500,"Rye Production (tonnes)":3735380.8,"Potatoes Production (tonnes)":770127,"Meat, Chicken Production (tonnes)":15557,"Avocados Production (tonnes)":87005.8,"Petrol Price (USD/liter)":null,"Daily Oil Consumption (barrels/day)":null,"CO2 Emissions (tonnes per capita)":0.092232251,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":240963.67,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":40.16,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":12.05,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.53,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":30.82,"GDP Per Capita (USD/year)":1063.421841,"Military Expenditure (USD/year)":229639906.1,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":4.4,"Average Age (years)":14.994,"Inflation Rate (year, %)":4.2},{"Country":"Burkina Faso","Country_clean":"burkina faso","Region":"Sub-Saharan Africa","Happiness (score 0-10)":4.548,"Median Salary (USD/year)":485.02,"Average Salary (USD/year)":534.97,"Lowest Salary (USD/year)":135.03,"Highest Salary (USD/year)":2384.83,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":962,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":59.9,"Netflix":null,"Women Safety Index (score 0-1)":0.481,"Average Winter Temperature (C)":25.427477,"Average Summer Temperature (C)":26.73383,"Population (people)":22673762,"Energy Per Capita (kWh per capita)":904.726,"% of Power from Fossil Fuels (%)":86.857,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":13.143,"% of Agricultural Land (%)":46.5643274854,"% of Forest Land (%)":22.5380116959,"Territory (sq km)":273600,"Average Rainfall (mm/year)":748,"Corruption (std score)":0.1515905112,"Wheat Production (tonnes)":1780160,"Rye Production (tonnes)":21900,"Potatoes Production (tonnes)":3760,"Meat, Chicken Production (tonnes)":24732.78,"Avocados Production (tonnes)":138000,"Petrol Price (USD/liter)":1.14,"Daily Oil Consumption (barrels/day)":23000,"CO2 Emissions (tonnes per capita)":0.246046246,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":266.02,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":28.11,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":35.82,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.6,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":24.1,"GDP Per Capita (USD/year)":1984.884306,"Military Expenditure (USD/year)":312467611,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.3,"Average Age (years)":17.317,"Inflation Rate (year, %)":14.3},{"Country":"Mauritania","Country_clean":"mauritania","Region":"Sub-Saharan Africa","Happiness (score 0-10)":4.505,"Median Salary (USD/year)":44.623043,"Average Salary (USD/year)":52.497697,"Lowest Salary (USD/year)":13.203171,"Highest Salary (USD/year)":232.82729,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":992,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":63.1,"Netflix":null,"Women Safety Index (score 0-1)":0.506,"Average Winter Temperature (C)":20.794834,"Average Summer Temperature (C)":21.64168,"Population (people)":4736139,"Energy Per Capita (kWh per capita)":3988.532,"% of Power from Fossil Fuels (%)":73.404,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":26.596,"% of Agricultural Land (%)":38.5272145144,"% of Forest Land (%)":0.2982116038,"Territory (sq km)":1030700,"Average Rainfall (mm/year)":92,"Corruption (std score)":0.163652122,"Wheat Production (tonnes)":329411,"Rye Production (tonnes)":845441.6,"Potatoes Production (tonnes)":326562,"Meat, Chicken Production (tonnes)":58000,"Avocados Production (tonnes)":91812.448,"Petrol Price (USD/liter)":null,"Daily Oil Consumption (barrels/day)":null,"CO2 Emissions (tonnes per capita)":0.872793555,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":362.93,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":43.7,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":90.4,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":3.44,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":27.01,"GDP Per Capita (USD/year)":4150.965246,"Military Expenditure (USD/year)":159013353,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":null,"Average Age (years)":21.967,"Inflation Rate (year, %)":9.5},{"Country":"Gambia","Country_clean":"gambia","Region":"Sub-Saharan Africa","Happiness (score 0-10)":4.485,"Median Salary (USD/year)":223.7,"Average Salary (USD/year)":246.84,"Lowest Salary (USD/year)":62.02,"Highest Salary (USD/year)":1095.34,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":997,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":61.1,"Netflix":null,"Women Safety Index (score 0-1)":0.575,"Average Winter Temperature (C)":25.587826,"Average Summer Temperature (C)":26.182985,"Population (people)":2705992,"Energy Per Capita (kWh per capita)":931.273,"% of Power from Fossil Fuels (%)":100,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":0,"% of Agricultural Land (%)":62.6482213439,"% of Forest Land (%)":23.4123814229,"Territory (sq km)":10120,"Average Rainfall (mm/year)":836,"Corruption (std score)":0.1527849287,"Wheat Production (tonnes)":50000,"Rye Production (tonnes)":4000,"Potatoes Production (tonnes)":40392,"Meat, Chicken Production (tonnes)":4631097,"Avocados Production (tonnes)":9710,"Petrol Price (USD/liter)":1.33,"Daily Oil Consumption (barrels/day)":3800,"CO2 Emissions (tonnes per capita)":0.247050718,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":4838.71,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":16.94,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":92.74,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.73,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":16.13,"GDP Per Capita (USD/year)":2612.000995,"Military Expenditure (USD/year)":11487224.94,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":null,"Average Age (years)":20.148,"Inflation Rate (year, %)":11.5},{"Country":"Chad","Country_clean":"chad","Region":"Sub-Saharan Africa","Happiness (score 0-10)":4.471,"Median Salary (USD/year)":707.39,"Average Salary (USD/year)":787.96,"Lowest Salary (USD/year)":198.2,"Highest Salary (USD/year)":3512.79,"IQAir_AQI (AQI index)":47.35,"Infant Survival Rate (per 1000 births)":954,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":53.1,"Netflix":null,"Women Safety Index (score 0-1)":0.462,"Average Winter Temperature (C)":21.083433,"Average Summer Temperature (C)":21.204617,"Population (people)":17723315,"Energy Per Capita (kWh per capita)":361.161,"% of Power from Fossil Fuels (%)":96.774,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":3.226,"% of Agricultural Land (%)":39.9761753494,"% of Forest Land (%)":3.3365099269,"Territory (sq km)":1259200,"Average Rainfall (mm/year)":322,"Corruption (std score)":0.1769557148,"Wheat Production (tonnes)":94838540,"Rye Production (tonnes)":10666877,"Potatoes Production (tonnes)":1300,"Meat, Chicken Production (tonnes)":703003,"Avocados Production (tonnes)":83403.5,"Petrol Price (USD/liter)":null,"Daily Oil Consumption (barrels/day)":null,"CO2 Emissions (tonnes per capita)":0.141093412,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":160.64,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":128.51,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":74.97,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.88,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":32.13,"GDP Per Capita (USD/year)":1968.258262,"Military Expenditure (USD/year)":232930989.8,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":null,"Average Age (years)":17.944,"Inflation Rate (year, %)":5.8},{"Country":"Kenya","Country_clean":"kenya","Region":"Sub-Saharan Africa","Happiness (score 0-10)":4.47,"Median Salary (USD/year)":863.29,"Average Salary (USD/year)":991.43,"Lowest Salary (USD/year)":250.22,"Highest Salary (USD/year)":4424.36,"IQAir_AQI (AQI index)":14.3,"Infant Survival Rate (per 1000 births)":946,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":63.4,"Netflix":null,"Women Safety Index (score 0-1)":0.511,"Average Winter Temperature (C)":25.798006,"Average Summer Temperature (C)":26.603018,"Population (people)":54027487,"Energy Per Capita (kWh per capita)":1952.694,"% of Power from Fossil Fuels (%)":10.219,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":89.781,"% of Agricultural Land (%)":48.6874934111,"% of Forest Land (%)":6.3448184981,"Territory (sq km)":569140,"Average Rainfall (mm/year)":630,"Corruption (std score)":0.1473762393,"Wheat Production (tonnes)":250320,"Rye Production (tonnes)":76025.194,"Potatoes Production (tonnes)":112000,"Meat, Chicken Production (tonnes)":698000,"Avocados Production (tonnes)":370,"Petrol Price (USD/liter)":1.36,"Daily Oil Consumption (barrels/day)":114000,"CO2 Emissions (tonnes per capita)":0.423783898,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1415.61,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":47.67,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":52.18,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.54,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":32.61,"GDP Per Capita (USD/year)":3467.556478,"Military Expenditure (USD/year)":1097458153,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":4,"Average Age (years)":19.313,"Inflation Rate (year, %)":7.7},{"Country":"Tunisia","Country_clean":"tunisia","Region":"Middle East and North Africa","Happiness (score 0-10)":4.422,"Median Salary (USD/year)":1088.33,"Average Salary (USD/year)":1239.75,"Lowest Salary (USD/year)":312.3,"Highest Salary (USD/year)":5520.5,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":997,"Alcohol Consumption Rate (liters per capita per year)":1.39,"Life Expectancy (years)":75.3,"Netflix":null,"Women Safety Index (score 0-1)":0.669,"Average Winter Temperature (C)":12.263956,"Average Summer Temperature (C)":12.730293,"Population (people)":12356117,"Energy Per Capita (kWh per capita)":9524.104,"% of Power from Fossil Fuels (%)":95.611,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":4.389,"% of Agricultural Land (%)":62.4388516993,"% of Forest Land (%)":4.533084449,"Territory (sq km)":155360,"Average Rainfall (mm/year)":207,"Corruption (std score)":0.1589545012,"Wheat Production (tonnes)":null,"Rye Production (tonnes)":null,"Potatoes Production (tonnes)":null,"Meat, Chicken Production (tonnes)":null,"Avocados Production (tonnes)":null,"Petrol Price (USD/liter)":0.76,"Daily Oil Consumption (barrels/day)":97000,"CO2 Emissions (tonnes per capita)":2.557564208,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":888.43,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":26.65,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":19.71,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.52,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":15.49,"GDP Per Capita (USD/year)":12502.82019,"Military Expenditure (USD/year)":844227367.1,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":4.8,"Average Age (years)":33.496,"Inflation Rate (year, %)":8.3},{"Country":"Benin","Country_clean":"benin","Region":"Sub-Saharan Africa","Happiness (score 0-10)":4.377,"Median Salary (USD/year)":488.25,"Average Salary (USD/year)":549.48,"Lowest Salary (USD/year)":138.58,"Highest Salary (USD/year)":2449.28,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":975,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":60,"Netflix":null,"Women Safety Index (score 0-1)":0.566,"Average Winter Temperature (C)":26.43899,"Average Summer Temperature (C)":27.806599,"Population (people)":13352864,"Energy Per Capita (kWh per capita)":2484.818,"% of Power from Fossil Fuels (%)":95.833,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":4.167,"% of Agricultural Land (%)":35.0301525364,"% of Forest Land (%)":27.3603228095,"Territory (sq km)":112760,"Average Rainfall (mm/year)":1039,"Corruption (std score)":0.1563068628,"Wheat Production (tonnes)":4326575,"Rye Production (tonnes)":2949,"Potatoes Production (tonnes)":12335,"Meat, Chicken Production (tonnes)":18924,"Avocados Production (tonnes)":12800,"Petrol Price (USD/liter)":0.96,"Daily Oil Consumption (barrels/day)":36000,"CO2 Emissions (tonnes per capita)":0.618583746,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":null,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":60.24,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":47.19,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.66,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":26.51,"GDP Per Capita (USD/year)":2424.755845,"Military Expenditure (USD/year)":90212425.99,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.1,"Average Age (years)":19.43,"Inflation Rate (year, %)":1.4},{"Country":"Uganda","Country_clean":"uganda","Region":"Sub-Saharan Africa","Happiness (score 0-10)":4.372,"Median Salary (USD/year)":645.21,"Average Salary (USD/year)":698.31,"Lowest Salary (USD/year)":176.04,"Highest Salary (USD/year)":3106.55,"IQAir_AQI (AQI index)":27.6,"Infant Survival Rate (per 1000 births)":934,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":62.3,"Netflix":null,"Women Safety Index (score 0-1)":0.544,"Average Winter Temperature (C)":23.9091,"Average Summer Temperature (C)":24.655352,"Population (people)":47249585,"Energy Per Capita (kWh per capita)":766.846,"% of Power from Fossil Fuels (%)":2.955,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":97.045,"% of Agricultural Land (%)":71.8880909635,"% of Forest Land (%)":11.4534375623,"Territory (sq km)":200520,"Average Rainfall (mm/year)":1180,"Corruption (std score)":0.1515905112,"Wheat Production (tonnes)":2727560,"Rye Production (tonnes)":10948.6,"Potatoes Production (tonnes)":297921600,"Meat, Chicken Production (tonnes)":25400,"Avocados Production (tonnes)":97652.8,"Petrol Price (USD/liter)":1.51,"Daily Oil Consumption (barrels/day)":32001,"CO2 Emissions (tonnes per capita)":0.132370788,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1264.36,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":59.16,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":57.43,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.48,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":26.79,"GDP Per Capita (USD/year)":2038.073892,"Military Expenditure (USD/year)":408367566.7,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":9.7,"Average Age (years)":16.567,"Inflation Rate (year, %)":7.2},{"Country":"Myanmar","Country_clean":"myanmar","Region":"Southeast Asia","Happiness (score 0-10)":4.354,"Median Salary (USD/year)":228.46,"Average Salary (USD/year)":260.35,"Lowest Salary (USD/year)":65.68,"Highest Salary (USD/year)":1156.59,"IQAir_AQI (AQI index)":25,"Infant Survival Rate (per 1000 births)":961,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":66.6,"Netflix":null,"Women Safety Index (score 0-1)":0.451,"Average Winter Temperature (C)":18.82836,"Average Summer Temperature (C)":20.528673,"Population (people)":54179306,"Energy Per Capita (kWh per capita)":3064.848,"% of Power from Fossil Fuels (%)":58.184,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":41.816,"% of Agricultural Land (%)":19.8875388788,"% of Forest Land (%)":43.2901466285,"Territory (sq km)":652670,"Average Rainfall (mm/year)":2091,"Corruption (std score)":0.1673619598,"Wheat Production (tonnes)":2105000,"Rye Production (tonnes)":160787.4,"Potatoes Production (tonnes)":73000,"Meat, Chicken Production (tonnes)":15600,"Avocados Production (tonnes)":133.254,"Petrol Price (USD/liter)":1.26,"Daily Oil Consumption (barrels/day)":123000,"CO2 Emissions (tonnes per capita)":0.679428523,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":null,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":50,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":null,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.3,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":null,"GDP Per Capita (USD/year)":6674.028647,"Military Expenditure (USD/year)":2030465547,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":28.4,"Average Age (years)":31.35,"Inflation Rate (year, %)":null},{"Country":"Cambodia","Country_clean":"cambodia","Region":"Southeast Asia","Happiness (score 0-10)":4.341,"Median Salary (USD/year)":745.19,"Average Salary (USD/year)":808.3,"Lowest Salary (USD/year)":203.41,"Highest Salary (USD/year)":3592.44,"IQAir_AQI (AQI index)":19.8,"Infant Survival Rate (per 1000 births)":990,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":68.7,"Netflix":null,"Women Safety Index (score 0-1)":0.645,"Average Winter Temperature (C)":25.820742,"Average Summer Temperature (C)":26.725933,"Population (people)":16767842,"Energy Per Capita (kWh per capita)":4035.081,"% of Power from Fossil Fuels (%)":47.066,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":52.934,"% of Agricultural Land (%)":34.5521170406,"% of Forest Land (%)":44.8259687288,"Territory (sq km)":176520,"Average Rainfall (mm/year)":1904,"Corruption (std score)":0.1557928324,"Wheat Production (tonnes)":93873230,"Rye Production (tonnes)":14953906,"Potatoes Production (tonnes)":1175.02,"Meat, Chicken Production (tonnes)":183000,"Avocados Production (tonnes)":231517.88,"Petrol Price (USD/liter)":1.53,"Daily Oil Consumption (barrels/day)":48000,"CO2 Emissions (tonnes per capita)":0.98140655,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":2339.5,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":75.81,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":35.25,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.99,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":30,"GDP Per Capita (USD/year)":4360.854404,"Military Expenditure (USD/year)":543205183.3,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.8,"Average Age (years)":26.007,"Inflation Rate (year, %)":5.3},{"Country":"Ghana","Country_clean":"ghana","Region":"Sub-Saharan Africa","Happiness (score 0-10)":4.289,"Median Salary (USD/year)":373.82,"Average Salary (USD/year)":438.42,"Lowest Salary (USD/year)":110.25,"Highest Salary (USD/year)":1946.6,"IQAir_AQI (AQI index)":26.2,"Infant Survival Rate (per 1000 births)":963,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":62.4,"Netflix":null,"Women Safety Index (score 0-1)":0.651,"Average Winter Temperature (C)":27.695566,"Average Summer Temperature (C)":28.66266,"Population (people)":33475870,"Energy Per Capita (kWh per capita)":3483.363,"% of Power from Fossil Fuels (%)":65.122,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":34.878,"% of Agricultural Land (%)":55.3930199136,"% of Forest Land (%)":35.1286771589,"Territory (sq km)":227533,"Average Rainfall (mm/year)":1187,"Corruption (std score)":0.1473762393,"Wheat Production (tonnes)":16184871,"Rye Production (tonnes)":263400,"Potatoes Production (tonnes)":6323,"Meat, Chicken Production (tonnes)":100860,"Avocados Production (tonnes)":16800,"Petrol Price (USD/liter)":1.29,"Daily Oil Consumption (barrels/day)":88000,"CO2 Emissions (tonnes per capita)":0.658823541,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1156.33,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":26.61,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":31.37,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.51,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":26.79,"GDP Per Capita (USD/year)":4746.684995,"Military Expenditure (USD/year)":218444253.6,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":2.1,"Average Age (years)":22.413,"Inflation Rate (year, %)":31.3},{"Country":"Liberia","Country_clean":"liberia","Region":"Sub-Saharan Africa","Happiness (score 0-10)":4.269,"Median Salary (USD/year)":334.39,"Average Salary (USD/year)":380.35,"Lowest Salary (USD/year)":96.14,"Highest Salary (USD/year)":1690.44,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":992,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":61.4,"Netflix":null,"Women Safety Index (score 0-1)":0.5,"Average Winter Temperature (C)":26.30846,"Average Summer Temperature (C)":26.822199,"Population (people)":5302681,"Energy Per Capita (kWh per capita)":1064.616,"% of Power from Fossil Fuels (%)":42.391,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":57.609,"% of Agricultural Land (%)":19.9651162791,"% of Forest Land (%)":78.7705564784,"Territory (sq km)":96320,"Average Rainfall (mm/year)":2391,"Corruption (std score)":0.1515905112,"Wheat Production (tonnes)":null,"Rye Production (tonnes)":null,"Potatoes Production (tonnes)":null,"Meat, Chicken Production (tonnes)":null,"Avocados Production (tonnes)":null,"Petrol Price (USD/liter)":1.3,"Daily Oil Consumption (barrels/day)":8000,"CO2 Emissions (tonnes per capita)":0.23899343,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":5000,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":66.5,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":49.87,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.5,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":45,"GDP Per Capita (USD/year)":1308.629536,"Military Expenditure (USD/year)":15786500,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":3.3,"Average Age (years)":19.978,"Inflation Rate (year, %)":null},{"Country":"Mali","Country_clean":"mali","Region":"Sub-Saharan Africa","Happiness (score 0-10)":4.232,"Median Salary (USD/year)":478.58,"Average Salary (USD/year)":533.36,"Lowest Salary (USD/year)":134.55,"Highest Salary (USD/year)":2368.71,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":948,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":58.2,"Netflix":null,"Women Safety Index (score 0-1)":0.481,"Average Winter Temperature (C)":22.10115,"Average Summer Temperature (C)":23.133558,"Population (people)":22593590,"Energy Per Capita (kWh per capita)":1168.567,"% of Power from Fossil Fuels (%)":64.012,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":35.988,"% of Agricultural Land (%)":35.3477737074,"% of Forest Land (%)":10.8966636344,"Territory (sq km)":1220190,"Average Rainfall (mm/year)":282,"Corruption (std score)":0.1473762393,"Wheat Production (tonnes)":4187394,"Rye Production (tonnes)":2372272,"Potatoes Production (tonnes)":1924871,"Meat, Chicken Production (tonnes)":494128,"Avocados Production (tonnes)":11187.4,"Petrol Price (USD/liter)":1.22,"Daily Oil Consumption (barrels/day)":21999,"CO2 Emissions (tonnes per capita)":0.29657102,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":null,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":63.28,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":29.27,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.77,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":51.68,"GDP Per Capita (USD/year)":2316.6552,"Military Expenditure (USD/year)":495165301,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":null,"Average Age (years)":18.455,"Inflation Rate (year, %)":null},{"Country":"Madagascar","Country_clean":"madagascar","Region":"Sub-Saharan Africa","Happiness (score 0-10)":4.228,"Median Salary (USD/year)":250.87,"Average Salary (USD/year)":290.48,"Lowest Salary (USD/year)":73.28,"Highest Salary (USD/year)":1291.74,"IQAir_AQI (AQI index)":18.1,"Infant Survival Rate (per 1000 births)":972,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":65.5,"Netflix":null,"Women Safety Index (score 0-1)":0.505,"Average Winter Temperature (C)":24.953327,"Average Summer Temperature (C)":25.925783,"Population (people)":29611714,"Energy Per Capita (kWh per capita)":507.644,"% of Power from Fossil Fuels (%)":65.55,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":34.45,"% of Agricultural Land (%)":70.2904778274,"% of Forest Land (%)":21.341692506,"Territory (sq km)":581800,"Average Rainfall (mm/year)":1513,"Corruption (std score)":0.1534845382,"Wheat Production (tonnes)":2286,"Rye Production (tonnes)":3011811.06,"Potatoes Production (tonnes)":1483500,"Meat, Chicken Production (tonnes)":7284,"Avocados Production (tonnes)":14839.178,"Petrol Price (USD/liter)":1.02,"Daily Oil Consumption (barrels/day)":18000,"CO2 Emissions (tonnes per capita)":0.152766255,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":916.38,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":54.41,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":58.79,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.84,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":20.62,"GDP Per Capita (USD/year)":1891.320668,"Military Expenditure (USD/year)":73258425.24,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":null,"Average Age (years)":20.475,"Inflation Rate (year, %)":8.2},{"Country":"Togo","Country_clean":"togo","Region":"Sub-Saharan Africa","Happiness (score 0-10)":4.214,"Median Salary (USD/year)":787.96,"Average Salary (USD/year)":852.41,"Lowest Salary (USD/year)":214.31,"Highest Salary (USD/year)":3786.72,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":987,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":59.9,"Netflix":null,"Women Safety Index (score 0-1)":0.595,"Average Winter Temperature (C)":27.114004,"Average Summer Temperature (C)":28.22776,"Population (people)":8848699,"Energy Per Capita (kWh per capita)":1115.704,"% of Power from Fossil Fuels (%)":73.016,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":26.984,"% of Agricultural Land (%)":70.2334988049,"% of Forest Land (%)":22.1788931789,"Territory (sq km)":54390,"Average Rainfall (mm/year)":1168,"Corruption (std score)":0.1515905112,"Wheat Production (tonnes)":1169283.4,"Rye Production (tonnes)":9853.4,"Potatoes Production (tonnes)":682800,"Meat, Chicken Production (tonnes)":328000,"Avocados Production (tonnes)":179232.066,"Petrol Price (USD/liter)":0.84,"Daily Oil Consumption (barrels/day)":15000,"CO2 Emissions (tonnes per capita)":0.293231207,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1164.66,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":31.06,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":59.33,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.41,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":20.18,"GDP Per Capita (USD/year)":1773.896632,"Military Expenditure (USD/year)":104378994.6,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":null,"Average Age (years)":21.968,"Inflation Rate (year, %)":8},{"Country":"Jordan","Country_clean":"jordan","Region":"Middle East and North Africa","Happiness (score 0-10)":4.186,"Median Salary (USD/year)":1946.4,"Average Salary (USD/year)":2284.91,"Lowest Salary (USD/year)":578.28,"Highest Salary (USD/year)":10141.04,"IQAir_AQI (AQI index)":16.5,"Infant Survival Rate (per 1000 births)":996,"Alcohol Consumption Rate (liters per capita per year)":0.41,"Life Expectancy (years)":74.1,"Netflix":null,"Women Safety Index (score 0-1)":0.679,"Average Winter Temperature (C)":10.618665,"Average Summer Temperature (C)":11.0657425,"Population (people)":11285869,"Energy Per Capita (kWh per capita)":9183.148,"% of Power from Fossil Fuels (%)":76.463,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":23.537,"% of Agricultural Land (%)":11.5210487195,"% of Forest Land (%)":1.0980471653,"Territory (sq km)":88794,"Average Rainfall (mm/year)":111,"Corruption (std score)":0.1633208543,"Wheat Production (tonnes)":1268900,"Rye Production (tonnes)":391236.668,"Potatoes Production (tonnes)":140000,"Meat, Chicken Production (tonnes)":250,"Avocados Production (tonnes)":190,"Petrol Price (USD/liter)":1.66,"Daily Oil Consumption (barrels/day)":114000,"CO2 Emissions (tonnes per capita)":2.438204112,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1311.2,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":59.1,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":36.88,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.53,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":42.3,"GDP Per Capita (USD/year)":9478.904588,"Military Expenditure (USD/year)":1957746479,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1,"Average Age (years)":25.716,"Inflation Rate (year, %)":4.2},{"Country":"India","Country_clean":"india","Region":"South Asia","Happiness (score 0-10)":4.054,"Median Salary (USD/year)":327.97,"Average Salary (USD/year)":384.43,"Lowest Salary (USD/year)":97.07,"Highest Salary (USD/year)":1717.92,"IQAir_AQI (AQI index)":48.2,"Infant Survival Rate (per 1000 births)":90,"Alcohol Consumption Rate (liters per capita per year)":3.07,"Life Expectancy (years)":68.3,"Netflix":6.61,"Women Safety Index (score 0-1)":0.595,"Average Winter Temperature (C)":16.979853,"Average Summer Temperature (C)":18.022833,"Population (people)":1417173173,"Energy Per Capita (kWh per capita)":7143.406,"% of Power from Fossil Fuels (%)":77.006,"% of Power from Nuclear (%)":2.519,"% of Power from Renewables (%)":20.476,"% of Agricultural Land (%)":60.0459264292,"% of Forest Land (%)":24.3598290052,"Territory (sq km)":2973190,"Average Rainfall (mm/year)":1083,"Corruption (std score)":0.1470372379,"Wheat Production (tonnes)":1286332,"Rye Production (tonnes)":4688054,"Potatoes Production (tonnes)":3087000,"Meat, Chicken Production (tonnes)":990,"Avocados Production (tonnes)":22132,"Petrol Price (USD/liter)":1.33,"Daily Oil Consumption (barrels/day)":4443000,"CO2 Emissions (tonnes per capita)":1.797620119,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":6092.45,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":25.37,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":9.33,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.48,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":18.42,"GDP Per Capita (USD/year)":7762.88177,"Military Expenditure (USD/year)":66510289108,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":3,"Average Age (years)":28.115,"Inflation Rate (year, %)":6.7},{"Country":"Egypt","Country_clean":"egypt","Region":"Middle East and North Africa","Happiness (score 0-10)":3.977,"Median Salary (USD/year)":254.53,"Average Salary (USD/year)":298.51,"Lowest Salary (USD/year)":75.36,"Highest Salary (USD/year)":1329.24,"IQAir_AQI (AQI index)":29.1,"Infant Survival Rate (per 1000 births)":949,"Alcohol Consumption Rate (liters per capita per year)":0.21,"Life Expectancy (years)":79,"Netflix":null,"Women Safety Index (score 0-1)":0.645,"Average Winter Temperature (C)":14.330447,"Average Summer Temperature (C)":14.60245,"Population (people)":110990103,"Energy Per Capita (kWh per capita)":9960.062,"% of Power from Fossil Fuels (%)":88.779,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":11.221,"% of Agricultural Land (%)":4.0494248832,"% of Forest Land (%)":0.0451855945,"Territory (sq km)":995450,"Average Rainfall (mm/year)":18.1,"Corruption (std score)":0.1632932276,"Wheat Production (tonnes)":1085494,"Rye Production (tonnes)":9716,"Potatoes Production (tonnes)":104900960,"Meat, Chicken Production (tonnes)":842853,"Avocados Production (tonnes)":0,"Petrol Price (USD/liter)":0.52,"Daily Oil Consumption (barrels/day)":877000,"CO2 Emissions (tonnes per capita)":2.484059911,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":549.42,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":23.44,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":16.37,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.25,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":20.35,"GDP Per Capita (USD/year)":12412.3094,"Military Expenditure (USD/year)":3109997892,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":2.6,"Average Age (years)":26.999,"Inflation Rate (year, %)":13.9},{"Country":"Sri Lanka","Country_clean":"sri lanka","Region":"South Asia","Happiness (score 0-10)":3.898,"Median Salary (USD/year)":249.68,"Average Salary (USD/year)":278.41,"Lowest Salary (USD/year)":70.14,"Highest Salary (USD/year)":1239.11,"IQAir_AQI (AQI index)":15.85,"Infant Survival Rate (per 1000 births)":997,"Alcohol Consumption Rate (liters per capita per year)":2.37,"Life Expectancy (years)":74.9,"Netflix":null,"Women Safety Index (score 0-1)":0.743,"Average Winter Temperature (C)":25.60819,"Average Summer Temperature (C)":25.9974,"Population (people)":21832143,"Energy Per Capita (kWh per capita)":4347.636,"% of Power from Fossil Fuels (%)":62.752,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":51.574,"% of Agricultural Land (%)":45.4574846427,"% of Forest Land (%)":34.1070158422,"Territory (sq km)":61860,"Average Rainfall (mm/year)":1712,"Corruption (std score)":0.1708792597,"Wheat Production (tonnes)":953620,"Rye Production (tonnes)":334353.706,"Potatoes Production (tonnes)":84310000,"Meat, Chicken Production (tonnes)":3670,"Avocados Production (tonnes)":16564.6,"Petrol Price (USD/liter)":1.26,"Daily Oil Consumption (barrels/day)":127000,"CO2 Emissions (tonnes per capita)":1.090675627,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1734.36,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":9.43,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":9.61,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.35,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":10.85,"GDP Per Capita (USD/year)":13473.66309,"Military Expenditure (USD/year)":1681433577,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":3.5,"Average Age (years)":34.35,"Inflation Rate (year, %)":49.7},{"Country":"Bangladesh","Country_clean":"bangladesh","Region":"South Asia","Happiness (score 0-10)":3.886,"Median Salary (USD/year)":218.57,"Average Salary (USD/year)":236.71,"Lowest Salary (USD/year)":59.68,"Highest Salary (USD/year)":1052.06,"IQAir_AQI (AQI index)":46,"Infant Survival Rate (per 1000 births)":908,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":71.8,"Netflix":null,"Women Safety Index (score 0-1)":0.593,"Average Winter Temperature (C)":16.99154,"Average Summer Temperature (C)":19.676044,"Population (people)":171186372,"Energy Per Capita (kWh per capita)":2912.048,"% of Power from Fossil Fuels (%)":98.052,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":1.948,"% of Agricultural Land (%)":77.3450103711,"% of Forest Land (%)":14.4687716064,"Territory (sq km)":130170,"Average Rainfall (mm/year)":2666,"Corruption (std score)":0.1545842141,"Wheat Production (tonnes)":11000,"Rye Production (tonnes)":341300,"Potatoes Production (tonnes)":3296077,"Meat, Chicken Production (tonnes)":8222.25,"Avocados Production (tonnes)":55000,"Petrol Price (USD/liter)":0.95,"Daily Oil Consumption (barrels/day)":113000,"CO2 Emissions (tonnes per capita)":0.556529455,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1119.98,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":17.24,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":21.9,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.29,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":11.71,"GDP Per Capita (USD/year)":4371.754986,"Military Expenditure (USD/year)":3894695211,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":2.4,"Average Age (years)":28.447,"Inflation Rate (year, %)":7.7},{"Country":"Ethiopia","Country_clean":"ethiopia","Region":"Sub-Saharan Africa","Happiness (score 0-10)":3.861,"Median Salary (USD/year)":143.88,"Average Salary (USD/year)":160.41,"Lowest Salary (USD/year)":40.42,"Highest Salary (USD/year)":713.13,"IQAir_AQI (AQI index)":15.6,"Infant Survival Rate (per 1000 births)":null,"Alcohol Consumption Rate (liters per capita per year)":null,"Life Expectancy (years)":null,"Netflix":null,"Women Safety Index (score 0-1)":0.521,"Average Winter Temperature (C)":22.94068,"Average Summer Temperature (C)":23.82733,"Population (people)":123379924,"Energy Per Capita (kWh per capita)":871.584,"% of Power from Fossil Fuels (%)":0.068,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":99.932,"% of Agricultural Land (%)":34.1981062224,"% of Forest Land (%)":15.0593059801,"Territory (sq km)":1128571.265,"Average Rainfall (mm/year)":848,"Corruption (std score)":0.1515905112,"Wheat Production (tonnes)":8126800,"Rye Production (tonnes)":7124000,"Potatoes Production (tonnes)":51085360,"Meat, Chicken Production (tonnes)":48000,"Avocados Production (tonnes)":762336,"Petrol Price (USD/liter)":0.71,"Daily Oil Consumption (barrels/day)":74000,"CO2 Emissions (tonnes per capita)":0.163813429,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1457.18,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":57.25,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":202.38,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.61,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":30,"GDP Per Capita (USD/year)":2022.137961,"Military Expenditure (USD/year)":496621069.7,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":8.8,"Average Age (years)":19.793,"Inflation Rate (year, %)":null},{"Country":"Tanzania","Country_clean":"tanzania","Region":"Sub-Saharan Africa","Happiness (score 0-10)":3.781,"Median Salary (USD/year)":457.77,"Average Salary (USD/year)":505.54,"Lowest Salary (USD/year)":126.98,"Highest Salary (USD/year)":2245.08,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":915,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":61.8,"Netflix":null,"Women Safety Index (score 0-1)":0.652,"Average Winter Temperature (C)":22.93629,"Average Summer Temperature (C)":23.6847,"Population (people)":65497748,"Energy Per Capita (kWh per capita)":907.404,"% of Power from Fossil Fuels (%)":55.868,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":44.132,"% of Agricultural Land (%)":44.6163919621,"% of Forest Land (%)":51.1131180853,"Territory (sq km)":885800,"Average Rainfall (mm/year)":1071,"Corruption (std score)":0.1473762393,"Wheat Production (tonnes)":23410593.11,"Rye Production (tonnes)":6242369.62,"Potatoes Production (tonnes)":102287,"Meat, Chicken Production (tonnes)":368,"Avocados Production (tonnes)":111386.946,"Petrol Price (USD/liter)":1.28,"Daily Oil Consumption (barrels/day)":71999,"CO2 Emissions (tonnes per capita)":0.21463496,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":3901.17,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":41.33,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":44.53,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.31,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":24.65,"GDP Per Capita (USD/year)":3240.262937,"Military Expenditure (USD/year)":675475234.1,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":6.5,"Average Age (years)":17.971,"Inflation Rate (year, %)":4.4},{"Country":"Comoros","Country_clean":"comoros","Region":"Sub-Saharan Africa","Happiness (score 0-10)":3.566,"Median Salary (USD/year)":567.21,"Average Salary (USD/year)":651,"Lowest Salary (USD/year)":163.93,"Highest Salary (USD/year)":2900.48,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":999,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":63.5,"Netflix":null,"Women Safety Index (score 0-1)":0.519,"Average Winter Temperature (C)":26.264544,"Average Summer Temperature (C)":26.784773,"Population (people)":836774,"Energy Per Capita (kWh per capita)":1633.784,"% of Power from Fossil Fuels (%)":100,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":0,"% of Agricultural Land (%)":71.4669532509,"% of Forest Land (%)":17.4529822676,"Territory (sq km)":1861,"Average Rainfall (mm/year)":900,"Corruption (std score)":0.2269586474,"Wheat Production (tonnes)":700,"Rye Production (tonnes)":28383.1,"Potatoes Production (tonnes)":820515,"Meat, Chicken Production (tonnes)":13808618,"Avocados Production (tonnes)":1552.63,"Petrol Price (USD/liter)":1.36,"Daily Oil Consumption (barrels/day)":1300,"CO2 Emissions (tonnes per capita)":0.376076363,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":null,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":32.37,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":null,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":null,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":null,"GDP Per Capita (USD/year)":2913.387306,"Military Expenditure (USD/year)":null,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":null,"Average Age (years)":22.7,"Inflation Rate (year, %)":null},{"Country":"Yemen","Country_clean":"yemen","Region":"Middle East and North Africa","Happiness (score 0-10)":3.561,"Median Salary (USD/year)":120.98,"Average Salary (USD/year)":133.36,"Lowest Salary (USD/year)":33.62,"Highest Salary (USD/year)":594.93,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":963,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":65.7,"Netflix":null,"Women Safety Index (score 0-1)":0.287,"Average Winter Temperature (C)":19.670574,"Average Summer Temperature (C)":21.359116,"Population (people)":33696614,"Energy Per Capita (kWh per capita)":1080.039,"% of Power from Fossil Fuels (%)":83.003,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":16.997,"% of Agricultural Land (%)":44.4191904843,"% of Forest Land (%)":1.0398318086,"Territory (sq km)":527970,"Average Rainfall (mm/year)":167,"Corruption (std score)":0.1827792972,"Wheat Production (tonnes)":202362,"Rye Production (tonnes)":16472.4,"Potatoes Production (tonnes)":58010040.4,"Meat, Chicken Production (tonnes)":2458136,"Avocados Production (tonnes)":11979.6,"Petrol Price (USD/liter)":0.52,"Daily Oil Consumption (barrels/day)":60000,"CO2 Emissions (tonnes per capita)":0.380633361,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":2786.35,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":85.55,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":36.93,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":1.05,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":17.97,"GDP Per Capita (USD/year)":2575.126385,"Military Expenditure (USD/year)":null,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":6.8,"Average Age (years)":19.776,"Inflation Rate (year, %)":null},{"Country":"Zambia","Country_clean":"zambia","Region":"Sub-Saharan Africa","Happiness (score 0-10)":3.502,"Median Salary (USD/year)":0.26133504,"Average Salary (USD/year)":0.28552394,"Lowest Salary (USD/year)":0.072092424,"Highest Salary (USD/year)":1.2711033,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":973,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":61.8,"Netflix":null,"Women Safety Index (score 0-1)":0.556,"Average Winter Temperature (C)":23.009497,"Average Summer Temperature (C)":25.123566,"Population (people)":20017675,"Energy Per Capita (kWh per capita)":3418.863,"% of Power from Fossil Fuels (%)":7.792,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":92.208,"% of Agricultural Land (%)":32.0679589448,"% of Forest Land (%)":60.0301501231,"Territory (sq km)":743390,"Average Rainfall (mm/year)":1020,"Corruption (std score)":0.1535387486,"Wheat Production (tonnes)":12373724.2,"Rye Production (tonnes)":3980041.4,"Potatoes Production (tonnes)":1539264.8,"Meat, Chicken Production (tonnes)":16400,"Avocados Production (tonnes)":17474.034,"Petrol Price (USD/liter)":1.48,"Daily Oil Consumption (barrels/day)":22000,"CO2 Emissions (tonnes per capita)":0.380717051,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":10763.91,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":23.82,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":103.74,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.88,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":18.37,"GDP Per Capita (USD/year)":4223.906936,"Military Expenditure (USD/year)":378025431,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":5.4,"Average Age (years)":17.805,"Inflation Rate (year, %)":11},{"Country":"Eswatini","Country_clean":"eswatini","Region":"Sub-Saharan Africa","Happiness (score 0-10)":3.502,"Median Salary (USD/year)":204.56,"Average Salary (USD/year)":239.53,"Lowest Salary (USD/year)":60.41,"Highest Salary (USD/year)":1065.18,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":998,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":58.9,"Netflix":null,"Women Safety Index (score 0-1)":0.415,"Average Winter Temperature (C)":23.062267,"Average Summer Temperature (C)":24.690916,"Population (people)":1201670,"Energy Per Capita (kWh per capita)":5981.112,"% of Power from Fossil Fuels (%)":5.405,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":94.595,"% of Agricultural Land (%)":69.476744186,"% of Forest Land (%)":28.998255814,"Territory (sq km)":17200,"Average Rainfall (mm/year)":788,"Corruption (std score)":0.2084804773,"Wheat Production (tonnes)":242000,"Rye Production (tonnes)":685,"Potatoes Production (tonnes)":84367810,"Meat, Chicken Production (tonnes)":148000,"Avocados Production (tonnes)":192307,"Petrol Price (USD/liter)":null,"Daily Oil Consumption (barrels/day)":null,"CO2 Emissions (tonnes per capita)":0.836140045,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":228.11,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":27.56,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":54.35,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.8,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":11.48,"GDP Per Capita (USD/year)":10637.84173,"Military Expenditure (USD/year)":87787078.57,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":11.6,"Average Age (years)":21.57,"Inflation Rate (year, %)":null},{"Country":"Malawi","Country_clean":"malawi","Region":"Sub-Saharan Africa","Happiness (score 0-10)":3.421,"Median Salary (USD/year)":132.38,"Average Salary (USD/year)":151.69,"Lowest Salary (USD/year)":38.24,"Highest Salary (USD/year)":674.79,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":974,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":58.3,"Netflix":null,"Women Safety Index (score 0-1)":0.521,"Average Winter Temperature (C)":23.77365,"Average Summer Temperature (C)":25.912868,"Population (people)":20405317,"Energy Per Capita (kWh per capita)":464.983,"% of Power from Fossil Fuels (%)":15.493,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":84.507,"% of Agricultural Land (%)":64.1705557913,"% of Forest Land (%)":23.3315655494,"Territory (sq km)":94280,"Average Rainfall (mm/year)":1181,"Corruption (std score)":0.1473762393,"Wheat Production (tonnes)":23310800,"Rye Production (tonnes)":2242357.8,"Potatoes Production (tonnes)":447532.88,"Meat, Chicken Production (tonnes)":6200,"Avocados Production (tonnes)":68493.6,"Petrol Price (USD/liter)":1.35,"Daily Oil Consumption (barrels/day)":6001,"CO2 Emissions (tonnes per capita)":0.077836684,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":null,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":9.74,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":111.98,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.68,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":29.21,"GDP Per Capita (USD/year)":1310.995555,"Military Expenditure (USD/year)":58369173.44,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.8,"Average Age (years)":18.301,"Inflation Rate (year, %)":21},{"Country":"Botswana","Country_clean":"botswana","Region":"Sub-Saharan Africa","Happiness (score 0-10)":3.383,"Median Salary (USD/year)":729.39,"Average Salary (USD/year)":860.69,"Lowest Salary (USD/year)":216.63,"Highest Salary (USD/year)":3822.03,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":998,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":65.7,"Netflix":null,"Women Safety Index (score 0-1)":0.659,"Average Winter Temperature (C)":26.46735,"Average Summer Temperature (C)":28.064913,"Population (people)":2630296,"Energy Per Capita (kWh per capita)":9385.398,"% of Power from Fossil Fuels (%)":99.543,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":0.457,"% of Agricultural Land (%)":45.6337232898,"% of Forest Land (%)":26.7083090713,"Territory (sq km)":566730,"Average Rainfall (mm/year)":416,"Corruption (std score)":0.1603969038,"Wheat Production (tonnes)":2713157,"Rye Production (tonnes)":557002.44,"Potatoes Production (tonnes)":30482,"Meat, Chicken Production (tonnes)":57420,"Avocados Production (tonnes)":830,"Petrol Price (USD/liter)":1.13,"Daily Oil Consumption (barrels/day)":21000,"CO2 Emissions (tonnes per capita)":3.147107071,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1403.74,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":36.87,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":47.19,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.86,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":34.85,"GDP Per Capita (USD/year)":18615.79334,"Military Expenditure (USD/year)":529481042,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":15.2,"Average Age (years)":25.061,"Inflation Rate (year, %)":11.7},{"Country":"Zimbabwe","Country_clean":"zimbabwe","Region":"Sub-Saharan Africa","Happiness (score 0-10)":3.341,"Median Salary (USD/year)":555.40204,"Average Salary (USD/year)":602.37635,"Lowest Salary (USD/year)":151.42305,"Highest Salary (USD/year)":2674.772,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":978,"Alcohol Consumption Rate (liters per capita per year)":6.5,"Life Expectancy (years)":67,"Netflix":null,"Women Safety Index (score 0-1)":0.604,"Average Winter Temperature (C)":23.768185,"Average Summer Temperature (C)":27.019161,"Population (people)":16320537,"Energy Per Capita (kWh per capita)":2635.154,"% of Power from Fossil Fuels (%)":44.956,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":55.044,"% of Agricultural Land (%)":41.876696394,"% of Forest Land (%)":44.9748222825,"Territory (sq km)":386850,"Average Rainfall (mm/year)":657,"Corruption (std score)":0.1515905112,"Wheat Production (tonnes)":1316724.8,"Rye Production (tonnes)":140284.8,"Potatoes Production (tonnes)":271012.612,"Meat, Chicken Production (tonnes)":8000,"Avocados Production (tonnes)":29313.66,"Petrol Price (USD/liter)":1.62,"Daily Oil Consumption (barrels/day)":24000,"CO2 Emissions (tonnes per capita)":0.80297852,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1344.1,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":35,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":118.75,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.72,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":40,"GDP Per Capita (USD/year)":3029.793005,"Military Expenditure (USD/year)":420364000,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":7.5,"Average Age (years)":22.144,"Inflation Rate (year, %)":104.7},{"Country":"Congo (Kinshasa)","Country_clean":"congo kinshasa","Region":"Sub-Saharan Africa","Happiness (score 0-10)":3.295,"Median Salary (USD/year)":1058.67,"Average Salary (USD/year)":1205.3,"Lowest Salary (USD/year)":302.94,"Highest Salary (USD/year)":5365.86,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":993,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":64.7,"Netflix":null,"Women Safety Index (score 0-1)":0.384,"Average Winter Temperature (C)":25.505972,"Average Summer Temperature (C)":26.152718,"Population (people)":99010212,"Energy Per Capita (kWh per capita)":2348.011,"% of Power from Fossil Fuels (%)":76.119,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":23.881,"% of Agricultural Land (%)":31.2679355783,"% of Forest Land (%)":64.2196193265,"Territory (sq km)":341500,"Average Rainfall (mm/year)":1646,"Corruption (std score)":0.158911109,"Wheat Production (tonnes)":916614,"Rye Production (tonnes)":15,"Potatoes Production (tonnes)":32500,"Meat, Chicken Production (tonnes)":1478922.8,"Avocados Production (tonnes)":21000,"Petrol Price (USD/liter)":1.04,"Daily Oil Consumption (barrels/day)":17000,"CO2 Emissions (tonnes per capita)":1.349316017,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":6170.63,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":97.5,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":300,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.78,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":42.63,"GDP Per Capita (USD/year)":5662.063411,"Military Expenditure (USD/year)":292260465.3,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":null,"Average Age (years)":21.846,"Inflation Rate (year, %)":null},{"Country":"Sierra Leone","Country_clean":"sierra leone","Region":"Sub-Saharan Africa","Happiness (score 0-10)":3.245,"Median Salary (USD/year)":249.1,"Average Salary (USD/year)":277.75,"Lowest Salary (USD/year)":69.92,"Highest Salary (USD/year)":1238.23,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":978,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":51,"Netflix":null,"Women Safety Index (score 0-1)":0.543,"Average Winter Temperature (C)":26.811758,"Average Summer Temperature (C)":27.633963,"Population (people)":8605718,"Energy Per Capita (kWh per capita)":492.598,"% of Power from Fossil Fuels (%)":9.524,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":90.476,"% of Agricultural Land (%)":54.710446107,"% of Forest Land (%)":34.8455250762,"Territory (sq km)":72180,"Average Rainfall (mm/year)":2526,"Corruption (std score)":0.1473762393,"Wheat Production (tonnes)":127106.8,"Rye Production (tonnes)":49816.2,"Potatoes Production (tonnes)":65460290,"Meat, Chicken Production (tonnes)":688538.1,"Avocados Production (tonnes)":17496,"Petrol Price (USD/liter)":1.37,"Daily Oil Consumption (barrels/day)":6500,"CO2 Emissions (tonnes per capita)":0.115189573,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":1076.39,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":76.27,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":100,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.86,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":30,"GDP Per Capita (USD/year)":1601.974029,"Military Expenditure (USD/year)":29622478.1,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.7,"Average Age (years)":18.752,"Inflation Rate (year, %)":27.2},{"Country":"Lesotho","Country_clean":"lesotho","Region":"Sub-Saharan Africa","Happiness (score 0-10)":3.186,"Median Salary (USD/year)":540.54,"Average Salary (USD/year)":625.33,"Lowest Salary (USD/year)":157.39,"Highest Salary (USD/year)":2776.89,"IQAir_AQI (AQI index)":null,"Infant Survival Rate (per 1000 births)":996,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":53.7,"Netflix":null,"Women Safety Index (score 0-1)":0.605,"Average Winter Temperature (C)":16.68572,"Average Summer Temperature (C)":18.73354,"Population (people)":2305825,"Energy Per Capita (kWh per capita)":2132.814,"% of Power from Fossil Fuels (%)":0,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":100,"% of Agricultural Land (%)":80.1383399209,"% of Forest Land (%)":1.1370223979,"Territory (sq km)":30360,"Average Rainfall (mm/year)":788,"Corruption (std score)":0.1740706116,"Wheat Production (tonnes)":18781986,"Rye Production (tonnes)":10563.96,"Potatoes Production (tonnes)":285000,"Meat, Chicken Production (tonnes)":1068500,"Avocados Production (tonnes)":1664340,"Petrol Price (USD/liter)":1.5,"Daily Oil Consumption (barrels/day)":5001,"CO2 Emissions (tonnes per capita)":0.362307409,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":null,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":26.61,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":44.2,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.69,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":22.95,"GDP Per Capita (USD/year)":3219.457157,"Military Expenditure (USD/year)":51064347.75,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":43.6,"Average Age (years)":21.442,"Inflation Rate (year, %)":8.3},{"Country":"Lebanon","Country_clean":"lebanon","Region":"Middle East and North Africa","Happiness (score 0-10)":2.707,"Median Salary (USD/year)":753.33,"Average Salary (USD/year)":873.33,"Lowest Salary (USD/year)":219.33,"Highest Salary (USD/year)":3873.33,"IQAir_AQI (AQI index)":25.7,"Infant Survival Rate (per 1000 births)":999,"Alcohol Consumption Rate (liters per capita per year)":1.32,"Life Expectancy (years)":74.9,"Netflix":null,"Women Safety Index (score 0-1)":0.595,"Average Winter Temperature (C)":9.020683,"Average Summer Temperature (C)":9.587217,"Population (people)":5489739,"Energy Per Capita (kWh per capita)":18831.662,"% of Power from Fossil Fuels (%)":94.509,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":5.491,"% of Agricultural Land (%)":66.4027370479,"% of Forest Land (%)":14.0694037146,"Territory (sq km)":10230,"Average Rainfall (mm/year)":661,"Corruption (std score)":0.1708792597,"Wheat Production (tonnes)":239916,"Rye Production (tonnes)":714111.8,"Potatoes Production (tonnes)":200810,"Meat, Chicken Production (tonnes)":541292,"Avocados Production (tonnes)":195067.11,"Petrol Price (USD/liter)":1.43,"Daily Oil Consumption (barrels/day)":153000,"CO2 Emissions (tonnes per capita)":4.076894274,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":3928.57,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":51.62,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":65.01,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":2.99,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":60,"GDP Per Capita (USD/year)":13081.10746,"Military Expenditure (USD/year)":2775557816,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":1.9,"Average Age (years)":32.835,"Inflation Rate (year, %)":null},{"Country":"Afghanistan","Country_clean":"afghanistan","Region":"South Asia","Happiness (score 0-10)":1.721,"Median Salary (USD/year)":853.74,"Average Salary (USD/year)":1001.15,"Lowest Salary (USD/year)":252.53,"Highest Salary (USD/year)":4460.97,"IQAir_AQI (AQI index)":37.5,"Infant Survival Rate (per 1000 births)":938,"Alcohol Consumption Rate (liters per capita per year)":0.01,"Life Expectancy (years)":65,"Netflix":null,"Women Safety Index (score 0-1)":0.286,"Average Winter Temperature (C)":0.047207996,"Average Summer Temperature (C)":3.3000636,"Population (people)":41128771,"Energy Per Capita (kWh per capita)":676.696,"% of Power from Fossil Fuels (%)":15.663,"% of Power from Nuclear (%)":0,"% of Power from Renewables (%)":84.337,"% of Agricultural Land (%)":58.7415482269,"% of Forest Land (%)":1.8527819941,"Territory (sq km)":652230,"Average Rainfall (mm/year)":327,"Corruption (std score)":0.1827608198,"Wheat Production (tonnes)":3900000,"Rye Production (tonnes)":96473.03,"Potatoes Production (tonnes)":864772,"Meat, Chicken Production (tonnes)":28029.23,"Avocados Production (tonnes)":1069854.4,"Petrol Price (USD/liter)":0.96,"Daily Oil Consumption (barrels/day)":35000,"CO2 Emissions (tonnes per capita)":0.159824372,"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)":694.92,"Fitness Club, Monthly Fee for 1 Adult (USD/month)":13.56,"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)":715.63,"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)":0.23,"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)":5.65,"GDP Per Capita (USD/year)":1955.006208,"Military Expenditure (USD/year)":198086263.3,"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)":6.7,"Average Age (years)":17.81,"Inflation Rate (year, %)":null}]');function P4(e,r){const a=Y.createContext(r),i=y=>{const{children:g,...c}=y,C=Y.useMemo(()=>c,Object.values(c));return de.jsx(a.Provider,{value:C,children:g})};i.displayName=e+"Provider";function p(y){const g=Y.useContext(a);if(g)return g;if(r!==void 0)return r;throw new Error(`\`${y}\` must be used within \`${e}\``)}return[i,p]}function Qy(e,r=[]){let a=[];function i(y,g){const c=Y.createContext(g),C=a.length;a=[...a,g];const M=U=>{const{scope:z,children:F,...V}=U,$=z?.[e]?.[C]||c,G=Y.useMemo(()=>V,Object.values(V));return de.jsx($.Provider,{value:G,children:F})};M.displayName=y+"Provider";function T(U,z){const F=z?.[e]?.[C]||c,V=Y.useContext(F);if(V)return V;if(g!==void 0)return g;throw new Error(`\`${U}\` must be used within \`${y}\``)}return[M,T]}const p=()=>{const y=a.map(g=>Y.createContext(g));return function(c){const C=c?.[e]||y;return Y.useMemo(()=>({[`__scope${e}`]:{...c,[e]:C}}),[c,C])}};return p.scopeName=e,[i,A4(p,...r)]}function A4(...e){const r=e[0];if(e.length===1)return r;const a=()=>{const i=e.map(p=>({useScope:p(),scopeName:p.scopeName}));return function(y){const g=i.reduce((c,{useScope:C,scopeName:M})=>{const U=C(y)[`__scope${M}`];return{...c,...U}},{});return Y.useMemo(()=>({[`__scope${r.scopeName}`]:g}),[g])}};return a.scopeName=r.scopeName,a}var px=TC();const C4=iu(px);function yS(e,r){if(typeof e=="function")return e(r);e!=null&&(e.current=r)}function EC(...e){return r=>{let a=!1;const i=e.map(p=>{const y=yS(p,r);return!a&&typeof y=="function"&&(a=!0),y});if(a)return()=>{for(let p=0;p<i.length;p++){const y=i[p];typeof y=="function"?y():yS(e[p],null)}}}}function nu(...e){return Y.useCallback(EC(...e),e)}function Oy(e){const r=M4(e),a=Y.forwardRef((i,p)=>{const{children:y,...g}=i,c=Y.Children.toArray(y),C=c.find(E4);if(C){const M=C.props.children,T=c.map(U=>U===C?Y.Children.count(M)>1?Y.Children.only(null):Y.isValidElement(M)?M.props.children:null:U);return de.jsx(r,{...g,ref:p,children:Y.isValidElement(M)?Y.cloneElement(M,void 0,T):null})}return de.jsx(r,{...g,ref:p,children:y})});return a.displayName=`${e}.Slot`,a}var D4=Oy("Slot");function M4(e){const r=Y.forwardRef((a,i)=>{const{children:p,...y}=a;if(Y.isValidElement(p)){const g=I4(p),c=R4(y,p.props);return p.type!==Y.Fragment&&(c.ref=i?EC(i,g):g),Y.cloneElement(p,c)}return Y.Children.count(p)>1?Y.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}var T4=Symbol("radix.slottable");function E4(e){return Y.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===T4}function R4(e,r){const a={...r};for(const i in r){const p=e[i],y=r[i];/^on[A-Z]/.test(i)?p&&y?a[i]=(...c)=>{const C=y(...c);return p(...c),C}:p&&(a[i]=p):i==="style"?a[i]={...p,...y}:i==="className"&&(a[i]=[p,y].filter(Boolean).join(" "))}return{...e,...a}}function I4(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,a=r&&"isReactWarning"in r&&r.isReactWarning;return a?e.ref:(r=Object.getOwnPropertyDescriptor(e,"ref")?.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a?e.props.ref:e.props.ref||e.ref)}var k4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ro=k4.reduce((e,r)=>{const a=Oy(`Primitive.${r}`),i=Y.forwardRef((p,y)=>{const{asChild:g,...c}=p,C=g?a:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),de.jsx(C,{...c,ref:y})});return i.displayName=`Primitive.${r}`,{...e,[r]:i}},{});function U4(e,r){e&&px.flushSync(()=>e.dispatchEvent(r))}var mx="Progress",yx=100,[O4]=Qy(mx),[L4,z4]=O4(mx),RC=Y.forwardRef((e,r)=>{const{__scopeProgress:a,value:i=null,max:p,getValueLabel:y=F4,...g}=e;(p||p===0)&&!gS(p)&&console.error(N4(`${p}`,"Progress"));const c=gS(p)?p:yx;i!==null&&!vS(i,c)&&console.error(j4(`${i}`,"Progress"));const C=vS(i,c)?i:null,M=q0(C)?y(C,c):void 0;return de.jsx(L4,{scope:a,value:C,max:c,children:de.jsx(ro.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":q0(C)?C:void 0,"aria-valuetext":M,role:"progressbar","data-state":UC(C,c),"data-value":C??void 0,"data-max":c,...g,ref:r})})});RC.displayName=mx;var IC="ProgressIndicator",kC=Y.forwardRef((e,r)=>{const{__scopeProgress:a,...i}=e,p=z4(IC,a);return de.jsx(ro.div,{"data-state":UC(p.value,p.max),"data-value":p.value??void 0,"data-max":p.max,...i,ref:r})});kC.displayName=IC;function F4(e,r){return`${Math.round(e/r*100)}%`}function UC(e,r){return e==null?"indeterminate":e===r?"complete":"loading"}function q0(e){return typeof e=="number"}function gS(e){return q0(e)&&!isNaN(e)&&e>0}function vS(e,r){return q0(e)&&!isNaN(e)&&e<=r&&e>=0}function N4(e,r){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${r}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${yx}\`.`}function j4(e,r){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${r}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${yx} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var B4=RC,q4=kC;function OC(e){var r,a,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var p=e.length;for(r=0;r<p;r++)e[r]&&(a=OC(e[r]))&&(i&&(i+=" "),i+=a)}else for(a in e)e[a]&&(i&&(i+=" "),i+=a);return i}function In(){for(var e,r,a=0,i="",p=arguments.length;a<p;a++)(e=arguments[a])&&(r=OC(e))&&(i&&(i+=" "),i+=r);return i}const gx="-",H4=e=>{const r=V4(e),{conflictingClassGroups:a,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:g=>{const c=g.split(gx);return c[0]===""&&c.length!==1&&c.shift(),LC(c,r)||$4(g)},getConflictingClassGroupIds:(g,c)=>{const C=a[g]||[];return c&&i[g]?[...C,...i[g]]:C}}},LC=(e,r)=>{if(e.length===0)return r.classGroupId;const a=e[0],i=r.nextPart.get(a),p=i?LC(e.slice(1),i):void 0;if(p)return p;if(r.validators.length===0)return;const y=e.join(gx);return r.validators.find(({validator:g})=>g(y))?.classGroupId},_S=/^\[(.+)\]$/,$4=e=>{if(_S.test(e)){const r=_S.exec(e)[1],a=r?.substring(0,r.indexOf(":"));if(a)return"arbitrary.."+a}},V4=e=>{const{theme:r,classGroups:a}=e,i={nextPart:new Map,validators:[]};for(const p in a)yb(a[p],i,p,r);return i},yb=(e,r,a,i)=>{e.forEach(p=>{if(typeof p=="string"){const y=p===""?r:bS(r,p);y.classGroupId=a;return}if(typeof p=="function"){if(G4(p)){yb(p(i),r,a,i);return}r.validators.push({validator:p,classGroupId:a});return}Object.entries(p).forEach(([y,g])=>{yb(g,bS(r,y),a,i)})})},bS=(e,r)=>{let a=e;return r.split(gx).forEach(i=>{a.nextPart.has(i)||a.nextPart.set(i,{nextPart:new Map,validators:[]}),a=a.nextPart.get(i)}),a},G4=e=>e.isThemeGetter,W4=e=>{if(e<1)return{get:()=>{},set:()=>{}};let r=0,a=new Map,i=new Map;const p=(y,g)=>{a.set(y,g),r++,r>e&&(r=0,i=a,a=new Map)};return{get(y){let g=a.get(y);if(g!==void 0)return g;if((g=i.get(y))!==void 0)return p(y,g),g},set(y,g){a.has(y)?a.set(y,g):p(y,g)}}},gb="!",vb=":",Z4=vb.length,Y4=e=>{const{prefix:r,experimentalParseClassName:a}=e;let i=p=>{const y=[];let g=0,c=0,C=0,M;for(let V=0;V<p.length;V++){let $=p[V];if(g===0&&c===0){if($===vb){y.push(p.slice(C,V)),C=V+Z4;continue}if($==="/"){M=V;continue}}$==="["?g++:$==="]"?g--:$==="("?c++:$===")"&&c--}const T=y.length===0?p:p.substring(C),U=Q4(T),z=U!==T,F=M&&M>C?M-C:void 0;return{modifiers:y,hasImportantModifier:z,baseClassName:U,maybePostfixModifierPosition:F}};if(r){const p=r+vb,y=i;i=g=>g.startsWith(p)?y(g.substring(p.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:g,maybePostfixModifierPosition:void 0}}if(a){const p=i;i=y=>a({className:y,parseClassName:p})}return i},Q4=e=>e.endsWith(gb)?e.substring(0,e.length-1):e.startsWith(gb)?e.substring(1):e,X4=e=>{const r=Object.fromEntries(e.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const p=[];let y=[];return i.forEach(g=>{g[0]==="["||r[g]?(p.push(...y.sort(),g),y=[]):y.push(g)}),p.push(...y.sort()),p}},K4=e=>({cache:W4(e.cacheSize),parseClassName:Y4(e),sortModifiers:X4(e),...H4(e)}),J4=/\s+/,e6=(e,r)=>{const{parseClassName:a,getClassGroupId:i,getConflictingClassGroupIds:p,sortModifiers:y}=r,g=[],c=e.trim().split(J4);let C="";for(let M=c.length-1;M>=0;M-=1){const T=c[M],{isExternal:U,modifiers:z,hasImportantModifier:F,baseClassName:V,maybePostfixModifierPosition:$}=a(T);if(U){C=T+(C.length>0?" "+C:C);continue}let G=!!$,Q=i(G?V.substring(0,$):V);if(!Q){if(!G){C=T+(C.length>0?" "+C:C);continue}if(Q=i(V),!Q){C=T+(C.length>0?" "+C:C);continue}G=!1}const ee=y(z).join(":"),ae=F?ee+gb:ee,_e=ae+Q;if(g.includes(_e))continue;g.push(_e);const ve=p(Q,G);for(let Ae=0;Ae<ve.length;++Ae){const Ee=ve[Ae];g.push(ae+Ee)}C=T+(C.length>0?" "+C:C)}return C};function t6(){let e=0,r,a,i="";for(;e<arguments.length;)(r=arguments[e++])&&(a=zC(r))&&(i&&(i+=" "),i+=a);return i}const zC=e=>{if(typeof e=="string")return e;let r,a="";for(let i=0;i<e.length;i++)e[i]&&(r=zC(e[i]))&&(a&&(a+=" "),a+=r);return a};function r6(e,...r){let a,i,p,y=g;function g(C){const M=r.reduce((T,U)=>U(T),e());return a=K4(M),i=a.cache.get,p=a.cache.set,y=c,c(C)}function c(C){const M=i(C);if(M)return M;const T=e6(C,a);return p(C,T),T}return function(){return y(t6.apply(null,arguments))}}const li=e=>{const r=a=>a[e]||[];return r.isThemeGetter=!0,r},FC=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,NC=/^\((?:(\w[\w-]*):)?(.+)\)$/i,n6=/^\d+\/\d+$/,a6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,i6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,o6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,s6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,l6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Mp=e=>n6.test(e),Or=e=>!!e&&!Number.isNaN(Number(e)),of=e=>!!e&&Number.isInteger(Number(e)),T1=e=>e.endsWith("%")&&Or(e.slice(0,-1)),Xc=e=>a6.test(e),u6=()=>!0,c6=e=>i6.test(e)&&!o6.test(e),jC=()=>!1,h6=e=>s6.test(e),f6=e=>l6.test(e),d6=e=>!Qt(e)&&!Xt(e),p6=e=>Jp(e,HC,jC),Qt=e=>FC.test(e),xd=e=>Jp(e,$C,c6),E1=e=>Jp(e,_6,Or),xS=e=>Jp(e,BC,jC),m6=e=>Jp(e,qC,f6),c0=e=>Jp(e,VC,h6),Xt=e=>NC.test(e),_y=e=>em(e,$C),y6=e=>em(e,b6),SS=e=>em(e,BC),g6=e=>em(e,HC),v6=e=>em(e,qC),h0=e=>em(e,VC,!0),Jp=(e,r,a)=>{const i=FC.exec(e);return i?i[1]?r(i[1]):a(i[2]):!1},em=(e,r,a=!1)=>{const i=NC.exec(e);return i?i[1]?r(i[1]):a:!1},BC=e=>e==="position"||e==="percentage",qC=e=>e==="image"||e==="url",HC=e=>e==="length"||e==="size"||e==="bg-size",$C=e=>e==="length",_6=e=>e==="number",b6=e=>e==="family-name",VC=e=>e==="shadow",x6=()=>{const e=li("color"),r=li("font"),a=li("text"),i=li("font-weight"),p=li("tracking"),y=li("leading"),g=li("breakpoint"),c=li("container"),C=li("spacing"),M=li("radius"),T=li("shadow"),U=li("inset-shadow"),z=li("text-shadow"),F=li("drop-shadow"),V=li("blur"),$=li("perspective"),G=li("aspect"),Q=li("ease"),ee=li("animate"),ae=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_e=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],ve=()=>[..._e(),Xt,Qt],Ae=()=>["auto","hidden","clip","visible","scroll"],Ee=()=>["auto","contain","none"],Fe=()=>[Xt,Qt,C],ht=()=>[Mp,"full","auto",...Fe()],At=()=>[of,"none","subgrid",Xt,Qt],ot=()=>["auto",{span:["full",of,Xt,Qt]},of,Xt,Qt],ft=()=>[of,"auto",Xt,Qt],rt=()=>["auto","min","max","fr",Xt,Qt],It=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ut=()=>["start","end","center","stretch","center-safe","end-safe"],Be=()=>["auto",...Fe()],ct=()=>[Mp,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...Fe()],nt=()=>[e,Xt,Qt],Ct=()=>[..._e(),SS,xS,{position:[Xt,Qt]}],Me=()=>["no-repeat",{repeat:["","x","y","space","round"]}],et=()=>["auto","cover","contain",g6,p6,{size:[Xt,Qt]}],st=()=>[T1,_y,xd],gt=()=>["","none","full",M,Xt,Qt],Et=()=>["",Or,_y,xd],Zt=()=>["solid","dashed","dotted","double"],jt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ar=()=>[Or,T1,SS,xS],Jt=()=>["","none",V,Xt,Qt],wt=()=>["none",Or,Xt,Qt],Gt=()=>["none",Or,Xt,Qt],zt=()=>[Or,Xt,Qt],$e=()=>[Mp,"full",...Fe()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Xc],breakpoint:[Xc],color:[u6],container:[Xc],"drop-shadow":[Xc],ease:["in","out","in-out"],font:[d6],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Xc],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Xc],shadow:[Xc],spacing:["px",Or],text:[Xc],"text-shadow":[Xc],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Mp,Qt,Xt,G]}],container:["container"],columns:[{columns:[Or,Qt,Xt,c]}],"break-after":[{"break-after":ae()}],"break-before":[{"break-before":ae()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:ve()}],overflow:[{overflow:Ae()}],"overflow-x":[{"overflow-x":Ae()}],"overflow-y":[{"overflow-y":Ae()}],overscroll:[{overscroll:Ee()}],"overscroll-x":[{"overscroll-x":Ee()}],"overscroll-y":[{"overscroll-y":Ee()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:ht()}],"inset-x":[{"inset-x":ht()}],"inset-y":[{"inset-y":ht()}],start:[{start:ht()}],end:[{end:ht()}],top:[{top:ht()}],right:[{right:ht()}],bottom:[{bottom:ht()}],left:[{left:ht()}],visibility:["visible","invisible","collapse"],z:[{z:[of,"auto",Xt,Qt]}],basis:[{basis:[Mp,"full","auto",c,...Fe()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Or,Mp,"auto","initial","none",Qt]}],grow:[{grow:["",Or,Xt,Qt]}],shrink:[{shrink:["",Or,Xt,Qt]}],order:[{order:[of,"first","last","none",Xt,Qt]}],"grid-cols":[{"grid-cols":At()}],"col-start-end":[{col:ot()}],"col-start":[{"col-start":ft()}],"col-end":[{"col-end":ft()}],"grid-rows":[{"grid-rows":At()}],"row-start-end":[{row:ot()}],"row-start":[{"row-start":ft()}],"row-end":[{"row-end":ft()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":rt()}],"auto-rows":[{"auto-rows":rt()}],gap:[{gap:Fe()}],"gap-x":[{"gap-x":Fe()}],"gap-y":[{"gap-y":Fe()}],"justify-content":[{justify:[...It(),"normal"]}],"justify-items":[{"justify-items":[...Ut(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ut()]}],"align-content":[{content:["normal",...It()]}],"align-items":[{items:[...Ut(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ut(),{baseline:["","last"]}]}],"place-content":[{"place-content":It()}],"place-items":[{"place-items":[...Ut(),"baseline"]}],"place-self":[{"place-self":["auto",...Ut()]}],p:[{p:Fe()}],px:[{px:Fe()}],py:[{py:Fe()}],ps:[{ps:Fe()}],pe:[{pe:Fe()}],pt:[{pt:Fe()}],pr:[{pr:Fe()}],pb:[{pb:Fe()}],pl:[{pl:Fe()}],m:[{m:Be()}],mx:[{mx:Be()}],my:[{my:Be()}],ms:[{ms:Be()}],me:[{me:Be()}],mt:[{mt:Be()}],mr:[{mr:Be()}],mb:[{mb:Be()}],ml:[{ml:Be()}],"space-x":[{"space-x":Fe()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":Fe()}],"space-y-reverse":["space-y-reverse"],size:[{size:ct()}],w:[{w:[c,"screen",...ct()]}],"min-w":[{"min-w":[c,"screen","none",...ct()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[g]},...ct()]}],h:[{h:["screen","lh",...ct()]}],"min-h":[{"min-h":["screen","lh","none",...ct()]}],"max-h":[{"max-h":["screen","lh",...ct()]}],"font-size":[{text:["base",a,_y,xd]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,Xt,E1]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",T1,Qt]}],"font-family":[{font:[y6,Qt,r]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[p,Xt,Qt]}],"line-clamp":[{"line-clamp":[Or,"none",Xt,E1]}],leading:[{leading:[y,...Fe()]}],"list-image":[{"list-image":["none",Xt,Qt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Xt,Qt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:nt()}],"text-color":[{text:nt()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Zt(),"wavy"]}],"text-decoration-thickness":[{decoration:[Or,"from-font","auto",Xt,xd]}],"text-decoration-color":[{decoration:nt()}],"underline-offset":[{"underline-offset":[Or,"auto",Xt,Qt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Fe()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Xt,Qt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Xt,Qt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Ct()}],"bg-repeat":[{bg:Me()}],"bg-size":[{bg:et()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},of,Xt,Qt],radial:["",Xt,Qt],conic:[of,Xt,Qt]},v6,m6]}],"bg-color":[{bg:nt()}],"gradient-from-pos":[{from:st()}],"gradient-via-pos":[{via:st()}],"gradient-to-pos":[{to:st()}],"gradient-from":[{from:nt()}],"gradient-via":[{via:nt()}],"gradient-to":[{to:nt()}],rounded:[{rounded:gt()}],"rounded-s":[{"rounded-s":gt()}],"rounded-e":[{"rounded-e":gt()}],"rounded-t":[{"rounded-t":gt()}],"rounded-r":[{"rounded-r":gt()}],"rounded-b":[{"rounded-b":gt()}],"rounded-l":[{"rounded-l":gt()}],"rounded-ss":[{"rounded-ss":gt()}],"rounded-se":[{"rounded-se":gt()}],"rounded-ee":[{"rounded-ee":gt()}],"rounded-es":[{"rounded-es":gt()}],"rounded-tl":[{"rounded-tl":gt()}],"rounded-tr":[{"rounded-tr":gt()}],"rounded-br":[{"rounded-br":gt()}],"rounded-bl":[{"rounded-bl":gt()}],"border-w":[{border:Et()}],"border-w-x":[{"border-x":Et()}],"border-w-y":[{"border-y":Et()}],"border-w-s":[{"border-s":Et()}],"border-w-e":[{"border-e":Et()}],"border-w-t":[{"border-t":Et()}],"border-w-r":[{"border-r":Et()}],"border-w-b":[{"border-b":Et()}],"border-w-l":[{"border-l":Et()}],"divide-x":[{"divide-x":Et()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Et()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Zt(),"hidden","none"]}],"divide-style":[{divide:[...Zt(),"hidden","none"]}],"border-color":[{border:nt()}],"border-color-x":[{"border-x":nt()}],"border-color-y":[{"border-y":nt()}],"border-color-s":[{"border-s":nt()}],"border-color-e":[{"border-e":nt()}],"border-color-t":[{"border-t":nt()}],"border-color-r":[{"border-r":nt()}],"border-color-b":[{"border-b":nt()}],"border-color-l":[{"border-l":nt()}],"divide-color":[{divide:nt()}],"outline-style":[{outline:[...Zt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Or,Xt,Qt]}],"outline-w":[{outline:["",Or,_y,xd]}],"outline-color":[{outline:nt()}],shadow:[{shadow:["","none",T,h0,c0]}],"shadow-color":[{shadow:nt()}],"inset-shadow":[{"inset-shadow":["none",U,h0,c0]}],"inset-shadow-color":[{"inset-shadow":nt()}],"ring-w":[{ring:Et()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:nt()}],"ring-offset-w":[{"ring-offset":[Or,xd]}],"ring-offset-color":[{"ring-offset":nt()}],"inset-ring-w":[{"inset-ring":Et()}],"inset-ring-color":[{"inset-ring":nt()}],"text-shadow":[{"text-shadow":["none",z,h0,c0]}],"text-shadow-color":[{"text-shadow":nt()}],opacity:[{opacity:[Or,Xt,Qt]}],"mix-blend":[{"mix-blend":[...jt(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":jt()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Or]}],"mask-image-linear-from-pos":[{"mask-linear-from":ar()}],"mask-image-linear-to-pos":[{"mask-linear-to":ar()}],"mask-image-linear-from-color":[{"mask-linear-from":nt()}],"mask-image-linear-to-color":[{"mask-linear-to":nt()}],"mask-image-t-from-pos":[{"mask-t-from":ar()}],"mask-image-t-to-pos":[{"mask-t-to":ar()}],"mask-image-t-from-color":[{"mask-t-from":nt()}],"mask-image-t-to-color":[{"mask-t-to":nt()}],"mask-image-r-from-pos":[{"mask-r-from":ar()}],"mask-image-r-to-pos":[{"mask-r-to":ar()}],"mask-image-r-from-color":[{"mask-r-from":nt()}],"mask-image-r-to-color":[{"mask-r-to":nt()}],"mask-image-b-from-pos":[{"mask-b-from":ar()}],"mask-image-b-to-pos":[{"mask-b-to":ar()}],"mask-image-b-from-color":[{"mask-b-from":nt()}],"mask-image-b-to-color":[{"mask-b-to":nt()}],"mask-image-l-from-pos":[{"mask-l-from":ar()}],"mask-image-l-to-pos":[{"mask-l-to":ar()}],"mask-image-l-from-color":[{"mask-l-from":nt()}],"mask-image-l-to-color":[{"mask-l-to":nt()}],"mask-image-x-from-pos":[{"mask-x-from":ar()}],"mask-image-x-to-pos":[{"mask-x-to":ar()}],"mask-image-x-from-color":[{"mask-x-from":nt()}],"mask-image-x-to-color":[{"mask-x-to":nt()}],"mask-image-y-from-pos":[{"mask-y-from":ar()}],"mask-image-y-to-pos":[{"mask-y-to":ar()}],"mask-image-y-from-color":[{"mask-y-from":nt()}],"mask-image-y-to-color":[{"mask-y-to":nt()}],"mask-image-radial":[{"mask-radial":[Xt,Qt]}],"mask-image-radial-from-pos":[{"mask-radial-from":ar()}],"mask-image-radial-to-pos":[{"mask-radial-to":ar()}],"mask-image-radial-from-color":[{"mask-radial-from":nt()}],"mask-image-radial-to-color":[{"mask-radial-to":nt()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":_e()}],"mask-image-conic-pos":[{"mask-conic":[Or]}],"mask-image-conic-from-pos":[{"mask-conic-from":ar()}],"mask-image-conic-to-pos":[{"mask-conic-to":ar()}],"mask-image-conic-from-color":[{"mask-conic-from":nt()}],"mask-image-conic-to-color":[{"mask-conic-to":nt()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Ct()}],"mask-repeat":[{mask:Me()}],"mask-size":[{mask:et()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Xt,Qt]}],filter:[{filter:["","none",Xt,Qt]}],blur:[{blur:Jt()}],brightness:[{brightness:[Or,Xt,Qt]}],contrast:[{contrast:[Or,Xt,Qt]}],"drop-shadow":[{"drop-shadow":["","none",F,h0,c0]}],"drop-shadow-color":[{"drop-shadow":nt()}],grayscale:[{grayscale:["",Or,Xt,Qt]}],"hue-rotate":[{"hue-rotate":[Or,Xt,Qt]}],invert:[{invert:["",Or,Xt,Qt]}],saturate:[{saturate:[Or,Xt,Qt]}],sepia:[{sepia:["",Or,Xt,Qt]}],"backdrop-filter":[{"backdrop-filter":["","none",Xt,Qt]}],"backdrop-blur":[{"backdrop-blur":Jt()}],"backdrop-brightness":[{"backdrop-brightness":[Or,Xt,Qt]}],"backdrop-contrast":[{"backdrop-contrast":[Or,Xt,Qt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Or,Xt,Qt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Or,Xt,Qt]}],"backdrop-invert":[{"backdrop-invert":["",Or,Xt,Qt]}],"backdrop-opacity":[{"backdrop-opacity":[Or,Xt,Qt]}],"backdrop-saturate":[{"backdrop-saturate":[Or,Xt,Qt]}],"backdrop-sepia":[{"backdrop-sepia":["",Or,Xt,Qt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":Fe()}],"border-spacing-x":[{"border-spacing-x":Fe()}],"border-spacing-y":[{"border-spacing-y":Fe()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Xt,Qt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Or,"initial",Xt,Qt]}],ease:[{ease:["linear","initial",Q,Xt,Qt]}],delay:[{delay:[Or,Xt,Qt]}],animate:[{animate:["none",ee,Xt,Qt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[$,Xt,Qt]}],"perspective-origin":[{"perspective-origin":ve()}],rotate:[{rotate:wt()}],"rotate-x":[{"rotate-x":wt()}],"rotate-y":[{"rotate-y":wt()}],"rotate-z":[{"rotate-z":wt()}],scale:[{scale:Gt()}],"scale-x":[{"scale-x":Gt()}],"scale-y":[{"scale-y":Gt()}],"scale-z":[{"scale-z":Gt()}],"scale-3d":["scale-3d"],skew:[{skew:zt()}],"skew-x":[{"skew-x":zt()}],"skew-y":[{"skew-y":zt()}],transform:[{transform:[Xt,Qt,"","none","gpu","cpu"]}],"transform-origin":[{origin:ve()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:$e()}],"translate-x":[{"translate-x":$e()}],"translate-y":[{"translate-y":$e()}],"translate-z":[{"translate-z":$e()}],"translate-none":["translate-none"],accent:[{accent:nt()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:nt()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Xt,Qt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Fe()}],"scroll-mx":[{"scroll-mx":Fe()}],"scroll-my":[{"scroll-my":Fe()}],"scroll-ms":[{"scroll-ms":Fe()}],"scroll-me":[{"scroll-me":Fe()}],"scroll-mt":[{"scroll-mt":Fe()}],"scroll-mr":[{"scroll-mr":Fe()}],"scroll-mb":[{"scroll-mb":Fe()}],"scroll-ml":[{"scroll-ml":Fe()}],"scroll-p":[{"scroll-p":Fe()}],"scroll-px":[{"scroll-px":Fe()}],"scroll-py":[{"scroll-py":Fe()}],"scroll-ps":[{"scroll-ps":Fe()}],"scroll-pe":[{"scroll-pe":Fe()}],"scroll-pt":[{"scroll-pt":Fe()}],"scroll-pr":[{"scroll-pr":Fe()}],"scroll-pb":[{"scroll-pb":Fe()}],"scroll-pl":[{"scroll-pl":Fe()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Xt,Qt]}],fill:[{fill:["none",...nt()]}],"stroke-w":[{stroke:[Or,_y,xd,E1]}],stroke:[{stroke:["none",...nt()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},S6=r6(x6);function ha(...e){return S6(In(e))}function w6({className:e,value:r,...a}){return de.jsx(B4,{"data-slot":"progress",className:ha("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...a,children:de.jsx(q4,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(r||0)}%)`}})})}const wS=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,PS=In,P6=(e,r)=>a=>{var i;if(r?.variants==null)return PS(e,a?.class,a?.className);const{variants:p,defaultVariants:y}=r,g=Object.keys(p).map(M=>{const T=a?.[M],U=y?.[M];if(T===null)return null;const z=wS(T)||wS(U);return p[M][z]}),c=a&&Object.entries(a).reduce((M,T)=>{let[U,z]=T;return z===void 0||(M[U]=z),M},{}),C=r==null||(i=r.compoundVariants)===null||i===void 0?void 0:i.reduce((M,T)=>{let{class:U,className:z,...F}=T;return Object.entries(F).every(V=>{let[$,G]=V;return Array.isArray(G)?G.includes({...y,...c}[$]):{...y,...c}[$]===G})?[...M,U,z]:M},[]);return PS(e,g,C,a?.class,a?.className)},A6=P6("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Ry({className:e,variant:r,size:a,asChild:i=!1,...p}){const y=i?D4:"button";return de.jsx(y,{"data-slot":"button",className:ha(A6({variant:r,size:a,className:e})),...p})}function C6({className:e,type:r,...a}){return de.jsx("input",{type:r,"data-slot":"input",className:ha("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...a})}var z0={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.7.3/LICENSE.txt
 */var D6=z0.exports,AS;function M6(){return AS||(AS=1,(function(e,r){(function(a,i){e.exports=i()})(D6,(function(){var a={},i={};function p(g,c,C){if(i[g]=C,g==="index"){var M="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",T={};return i.shared(T),i.index(a,T),typeof window<"u"&&a.setWorkerUrl(window.URL.createObjectURL(new Blob([M],{type:"text/javascript"}))),a}}p("shared",["exports"],(function(g){function c(l,n,s,f){return new(s||(s=Promise))((function(v,S){function P(O){try{R(f.next(O))}catch(j){S(j)}}function D(O){try{R(f.throw(O))}catch(j){S(j)}}function R(O){var j;O.done?v(O.value):(j=O.value,j instanceof s?j:new s((function(q){q(j)}))).then(P,D)}R((f=f.apply(l,n||[])).next())}))}function C(l,n){this.x=l,this.y=n}function M(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var T,U;typeof SuppressedError=="function"&&SuppressedError,C.prototype={clone(){return new C(this.x,this.y)},add(l){return this.clone()._add(l)},sub(l){return this.clone()._sub(l)},multByPoint(l){return this.clone()._multByPoint(l)},divByPoint(l){return this.clone()._divByPoint(l)},mult(l){return this.clone()._mult(l)},div(l){return this.clone()._div(l)},rotate(l){return this.clone()._rotate(l)},rotateAround(l,n){return this.clone()._rotateAround(l,n)},matMult(l){return this.clone()._matMult(l)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(l){return this.x===l.x&&this.y===l.y},dist(l){return Math.sqrt(this.distSqr(l))},distSqr(l){const n=l.x-this.x,s=l.y-this.y;return n*n+s*s},angle(){return Math.atan2(this.y,this.x)},angleTo(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith(l){return this.angleWithSep(l.x,l.y)},angleWithSep(l,n){return Math.atan2(this.x*n-this.y*l,this.x*l+this.y*n)},_matMult(l){const n=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=n,this},_add(l){return this.x+=l.x,this.y+=l.y,this},_sub(l){return this.x-=l.x,this.y-=l.y,this},_mult(l){return this.x*=l,this.y*=l,this},_div(l){return this.x/=l,this.y/=l,this},_multByPoint(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint(l){return this.x/=l.x,this.y/=l.y,this},_unit(){return this._div(this.mag()),this},_perp(){const l=this.y;return this.y=this.x,this.x=-l,this},_rotate(l){const n=Math.cos(l),s=Math.sin(l),f=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=f,this},_rotateAround(l,n){const s=Math.cos(l),f=Math.sin(l),v=n.y+f*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-f*(this.y-n.y),this.y=v,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:C},C.convert=function(l){if(l instanceof C)return l;if(Array.isArray(l))return new C(+l[0],+l[1]);if(l.x!==void 0&&l.y!==void 0)return new C(+l.x,+l.y);throw new Error("Expected [x, y] or {x, y} point format")};var z=(function(){if(U)return T;function l(n,s,f,v){this.cx=3*n,this.bx=3*(f-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(v-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=s,this.p2x=f,this.p2y=v}return U=1,T=l,l.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,s){if(s===void 0&&(s=1e-6),n<0)return 0;if(n>1)return 1;for(var f=n,v=0;v<8;v++){var S=this.sampleCurveX(f)-n;if(Math.abs(S)<s)return f;var P=this.sampleCurveDerivativeX(f);if(Math.abs(P)<1e-6)break;f-=S/P}var D=0,R=1;for(f=n,v=0;v<20&&(S=this.sampleCurveX(f),!(Math.abs(S-n)<s));v++)n>S?D=f:R=f,f=.5*(R-D)+D;return f},solve:function(n,s){return this.sampleCurveY(this.solveCurveX(n,s))}},T})(),F=M(z);let V,$;function G(){return V==null&&(V=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),V}function Q(){if($==null&&($=!1,G())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let f=0;f<25;f++){const v=4*f;n.fillStyle=`rgb(${v},${v+1},${v+2})`,n.fillRect(f%5,Math.floor(f/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let f=0;f<100;f++)if(f%4!=3&&s[f]!==f){$=!0;break}}}return $||!1}var ee=1e-6,ae=typeof Float32Array<"u"?Float32Array:Array;function _e(){var l=new ae(9);return ae!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}function ve(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function Ae(){var l=new ae(3);return ae!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l}function Ee(l){var n=l[0],s=l[1],f=l[2];return Math.sqrt(n*n+s*s+f*f)}function Fe(l,n,s){var f=new ae(3);return f[0]=l,f[1]=n,f[2]=s,f}function ht(l,n,s){return l[0]=n[0]+s[0],l[1]=n[1]+s[1],l[2]=n[2]+s[2],l}function At(l,n,s){return l[0]=n[0]*s,l[1]=n[1]*s,l[2]=n[2]*s,l}function ot(l,n,s){var f=n[0],v=n[1],S=n[2],P=s[0],D=s[1],R=s[2];return l[0]=v*R-S*D,l[1]=S*P-f*R,l[2]=f*D-v*P,l}var ft,rt=Ee;function It(l,n,s){var f=n[0],v=n[1],S=n[2],P=n[3];return l[0]=s[0]*f+s[4]*v+s[8]*S+s[12]*P,l[1]=s[1]*f+s[5]*v+s[9]*S+s[13]*P,l[2]=s[2]*f+s[6]*v+s[10]*S+s[14]*P,l[3]=s[3]*f+s[7]*v+s[11]*S+s[15]*P,l}function Ut(){var l=new ae(4);return ae!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l[3]=1,l}function Be(l,n,s,f){var v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",S=Math.PI/360;n*=S,f*=S,s*=S;var P=Math.sin(n),D=Math.cos(n),R=Math.sin(s),O=Math.cos(s),j=Math.sin(f),q=Math.cos(f);switch(v){case"xyz":l[0]=P*O*q+D*R*j,l[1]=D*R*q-P*O*j,l[2]=D*O*j+P*R*q,l[3]=D*O*q-P*R*j;break;case"xzy":l[0]=P*O*q-D*R*j,l[1]=D*R*q-P*O*j,l[2]=D*O*j+P*R*q,l[3]=D*O*q+P*R*j;break;case"yxz":l[0]=P*O*q+D*R*j,l[1]=D*R*q-P*O*j,l[2]=D*O*j-P*R*q,l[3]=D*O*q+P*R*j;break;case"yzx":l[0]=P*O*q+D*R*j,l[1]=D*R*q+P*O*j,l[2]=D*O*j-P*R*q,l[3]=D*O*q-P*R*j;break;case"zxy":l[0]=P*O*q-D*R*j,l[1]=D*R*q+P*O*j,l[2]=D*O*j+P*R*q,l[3]=D*O*q-P*R*j;break;case"zyx":l[0]=P*O*q-D*R*j,l[1]=D*R*q+P*O*j,l[2]=D*O*j-P*R*q,l[3]=D*O*q+P*R*j;break;default:throw new Error("Unknown angle order "+v)}return l}function ct(){var l=new ae(2);return ae!=Float32Array&&(l[0]=0,l[1]=0),l}function nt(l,n){var s=new ae(2);return s[0]=l,s[1]=n,s}Ae(),ft=new ae(4),ae!=Float32Array&&(ft[0]=0,ft[1]=0,ft[2]=0,ft[3]=0),Ae(),Fe(1,0,0),Fe(0,1,0),Ut(),Ut(),_e(),ct();const Ct=8192;function Me(l,n,s){return n*(Ct/(l.tileSize*Math.pow(2,s-l.tileID.overscaledZ)))}function et(l,n){return(l%n+n)%n}function st(l,n,s){return l*(1-s)+n*s}function gt(l){if(l<=0)return 0;if(l>=1)return 1;const n=l*l,s=n*l;return 4*(l<.5?s:3*(l-n)+s-.75)}function Et(l,n,s,f){const v=new F(l,n,s,f);return S=>v.solve(S)}const Zt=Et(.25,.1,.25,1);function jt(l,n,s){return Math.min(s,Math.max(n,l))}function ar(l,n,s){const f=s-n,v=((l-n)%f+f)%f+n;return v===n?s:v}function Jt(l,...n){for(const s of n)for(const f in s)l[f]=s[f];return l}let wt=1;function Gt(l,n,s){const f={};for(const v in l)f[v]=n.call(this,l[v],v,l);return f}function zt(l,n,s){const f={};for(const v in l)n.call(this,l[v],v,l)&&(f[v]=l[v]);return f}function $e(l){return Array.isArray(l)?l.map($e):typeof l=="object"&&l?Gt(l,$e):l}const $t={};function Ot(l){$t[l]||(typeof console<"u"&&console.warn(l),$t[l]=!0)}function Sr(l,n,s){return(s.y-l.y)*(n.x-l.x)>(n.y-l.y)*(s.x-l.x)}function Rr(l){return typeof WorkerGlobalScope<"u"&&l!==void 0&&l instanceof WorkerGlobalScope}let Lr=null;function Nn(l){return typeof ImageBitmap<"u"&&l instanceof ImageBitmap}const Qn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Va(l,n,s,f,v){return c(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const S=new VideoFrame(l,{timestamp:0});try{const P=S?.format;if(!P||!P.startsWith("BGR")&&!P.startsWith("RGB"))throw new Error(`Unrecognized format ${P}`);const D=P.startsWith("BGR"),R=new Uint8ClampedArray(f*v*4);if(yield S.copyTo(R,(function(O,j,q,Z,J){const te=4*Math.max(-j,0),oe=(Math.max(0,q)-q)*Z*4+te,ue=4*Z,pe=Math.max(0,j),Le=Math.max(0,q);return{rect:{x:pe,y:Le,width:Math.min(O.width,j+Z)-pe,height:Math.min(O.height,q+J)-Le},layout:[{offset:oe,stride:ue}]}})(l,n,s,f,v)),D)for(let O=0;O<R.length;O+=4){const j=R[O];R[O]=R[O+2],R[O+2]=j}return R}finally{S.close()}}))}let ba,Gi;function Mi(l,n,s,f){return l.addEventListener(n,s,f),{unsubscribe:()=>{l.removeEventListener(n,s,f)}}}function Do(l){return l*Math.PI/180}function no(l){return l/Math.PI*180}const fi={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},An={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Ga="AbortError";function Re(){return new Error(Ga)}const re={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ne(l){return re.REGISTERED_PROTOCOLS[l.substring(0,l.indexOf("://"))]}const le="global-dispatcher";class be extends Error{constructor(n,s,f,v){super(`AJAXError: ${s} (${n}): ${f}`),this.status=n,this.statusText=s,this.url=f,this.body=v}}const Pe=()=>Rr(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ie=function(l,n){if(/:\/\//.test(l.url)&&!/^https?:|^file:/.test(l.url)){const f=ne(l.url);if(f)return f(l,n);if(Rr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,targetMapId:le},n)}if(!(/^file:/.test(s=l.url)||/^file:/.test(Pe())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(f,v){return c(this,void 0,void 0,(function*(){const S=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,cache:f.cache,referrer:Pe(),signal:v.signal});let P,D;f.type!=="json"||S.headers.has("Accept")||S.headers.set("Accept","application/json");try{P=yield fetch(S)}catch(O){throw new be(0,O.message,f.url,new Blob)}if(!P.ok){const O=yield P.blob();throw new be(P.status,P.statusText,f.url,O)}D=f.type==="arrayBuffer"||f.type==="image"?P.arrayBuffer():f.type==="json"?P.json():P.text();const R=yield D;if(v.signal.aborted)throw Re();return{data:R,cacheControl:P.headers.get("Cache-Control"),expires:P.headers.get("Expires")}}))})(l,n);if(Rr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,mustQueue:!0,targetMapId:le},n)}var s;return(function(f,v){return new Promise(((S,P)=>{var D;const R=new XMLHttpRequest;R.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(R.responseType="arraybuffer");for(const O in f.headers)R.setRequestHeader(O,f.headers[O]);f.type==="json"&&(R.responseType="text",!((D=f.headers)===null||D===void 0)&&D.Accept||R.setRequestHeader("Accept","application/json")),R.withCredentials=f.credentials==="include",R.onerror=()=>{P(new Error(R.statusText))},R.onload=()=>{if(!v.signal.aborted)if((R.status>=200&&R.status<300||R.status===0)&&R.response!==null){let O=R.response;if(f.type==="json")try{O=JSON.parse(R.response)}catch(j){return void P(j)}S({data:O,cacheControl:R.getResponseHeader("Cache-Control"),expires:R.getResponseHeader("Expires")})}else{const O=new Blob([R.response],{type:R.getResponseHeader("Content-Type")});P(new be(R.status,R.statusText,f.url,O))}},v.signal.addEventListener("abort",(()=>{R.abort(),P(Re())})),R.send(f.body)}))})(l,n)};function Ve(l){if(!l||l.indexOf("://")<=0||l.indexOf("data:image/")===0||l.indexOf("blob:")===0)return!0;const n=new URL(l),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function Ue(l,n,s){s[l]&&s[l].indexOf(n)!==-1||(s[l]=s[l]||[],s[l].push(n))}function Je(l,n,s){if(s&&s[l]){const f=s[l].indexOf(n);f!==-1&&s[l].splice(f,1)}}class yt{constructor(n,s={}){Jt(this,s),this.type=n}}class it extends yt{constructor(n,s={}){super("error",Jt({error:n},s))}}class kt{on(n,s){return this._listeners=this._listeners||{},Ue(n,s,this._listeners),{unsubscribe:()=>{this.off(n,s)}}}off(n,s){return Je(n,s,this._listeners),Je(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Ue(n,s,this._oneTimeListeners),this):new Promise((f=>this.once(n,f)))}fire(n,s){typeof n=="string"&&(n=new yt(n,s||{}));const f=n.type;if(this.listens(f)){n.target=this;const v=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const D of v)D.call(this,n);const S=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const D of S)Je(f,D,this._oneTimeListeners),D.call(this,n);const P=this._eventedParent;P&&(Jt(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),P.fire(n))}else n instanceof it&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var Oe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ir=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function br(l,n){const s={};for(const f in l)f!=="ref"&&(s[f]=l[f]);return ir.forEach((f=>{f in n&&(s[f]=n[f])})),s}function qt(l,n){if(Array.isArray(l)){if(!Array.isArray(n)||l.length!==n.length)return!1;for(let s=0;s<l.length;s++)if(!qt(l[s],n[s]))return!1;return!0}if(typeof l=="object"&&l!==null&&n!==null){if(typeof n!="object"||Object.keys(l).length!==Object.keys(n).length)return!1;for(const s in l)if(!qt(l[s],n[s]))return!1;return!0}return l===n}function or(l,n){l.push(n)}function Br(l,n,s){or(s,{command:"addSource",args:[l,n[l]]})}function Xn(l,n,s){or(n,{command:"removeSource",args:[l]}),s[l]=!0}function ra(l,n,s,f){Xn(l,s,f),Br(l,n,s)}function Qr(l,n,s){let f;for(f in l[s])if(Object.prototype.hasOwnProperty.call(l[s],f)&&f!=="data"&&!qt(l[s][f],n[s][f]))return!1;for(f in n[s])if(Object.prototype.hasOwnProperty.call(n[s],f)&&f!=="data"&&!qt(l[s][f],n[s][f]))return!1;return!0}function tr(l,n,s,f,v,S){l=l||{},n=n||{};for(const P in l)Object.prototype.hasOwnProperty.call(l,P)&&(qt(l[P],n[P])||s.push({command:S,args:[f,P,n[P],v]}));for(const P in n)Object.prototype.hasOwnProperty.call(n,P)&&!Object.prototype.hasOwnProperty.call(l,P)&&(qt(l[P],n[P])||s.push({command:S,args:[f,P,n[P],v]}))}function sr(l){return l.id}function pn(l,n){return l[n.id]=n,l}class vt{constructor(n,s,f,v){this.message=(n?`${n}: `:"")+f,v&&(this.identifier=v),s!=null&&s.__line__&&(this.line=s.__line__)}}function Ia(l,...n){for(const s of n)for(const f in s)l[f]=s[f];return l}class Cn extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class Xo{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[f,v]of s)this.bindings[f]=v}concat(n){return new Xo(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const Mo={kind:"null"},Tt={kind:"number"},mr={kind:"string"},cr={kind:"boolean"},jn={kind:"color"},Wi={kind:"projectionDefinition"},mn={kind:"object"},yr={kind:"value"},oc={kind:"collator"},di={kind:"formatted"},Ko={kind:"padding"},To={kind:"colorArray"},cl={kind:"numberArray"},Dn={kind:"resolvedImage"},ph={kind:"variableAnchorOffsetCollection"};function xa(l,n){return{kind:"array",itemType:l,N:n}}function qr(l){if(l.kind==="array"){const n=qr(l.itemType);return typeof l.N=="number"?`array<${n}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${n}>`}return l.kind}const Eo=[Mo,Tt,mr,cr,jn,Wi,di,mn,xa(yr),Ko,cl,To,Dn,ph];function hl(l,n){if(n.kind==="error")return null;if(l.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!hl(l.itemType,n.itemType))&&(typeof l.N!="number"||l.N===n.N))return null}else{if(l.kind===n.kind)return null;if(l.kind==="value"){for(const s of Eo)if(!hl(s,n))return null}}return`Expected ${qr(l)} but found ${qr(n)} instead.`}function mh(l,n){return n.some((s=>s.kind===l.kind))}function Ti(l,n){return n.some((s=>s==="null"?l===null:s==="array"?Array.isArray(l):s==="object"?l&&!Array.isArray(l)&&typeof l=="object":s===typeof l))}function Ro(l,n){return l.kind==="array"&&n.kind==="array"?l.itemType.kind===n.itemType.kind&&typeof l.N=="number":l.kind===n.kind}const sc=.96422,Hd=.82521,gf=4/29,Sa=6/29,vf=3*Sa*Sa,cm=Sa*Sa*Sa,yh=Math.PI/180,$d=180/Math.PI;function hu(l){return(l%=360)<0&&(l+=360),l}function fu([l,n,s,f]){let v,S;const P=lc((.2225045*(l=pi(l))+.7168786*(n=pi(n))+.0606169*(s=pi(s)))/1);l===n&&n===s?v=S=P:(v=lc((.4360747*l+.3850649*n+.1430804*s)/sc),S=lc((.0139322*l+.0971045*n+.7141733*s)/Hd));const D=116*P-16;return[D<0?0:D,500*(v-P),200*(P-S),f]}function pi(l){return l<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function lc(l){return l>cm?Math.pow(l,1/3):l/vf+gf}function fl([l,n,s,f]){let v=(l+16)/116,S=isNaN(n)?v:v+n/500,P=isNaN(s)?v:v-s/200;return v=1*Is(v),S=sc*Is(S),P=Hd*Is(P),[uc(3.1338561*S-1.6168667*v-.4906146*P),uc(-.9787684*S+1.9161415*v+.033454*P),uc(.0719453*S-.2289914*v+1.4052427*P),f]}function uc(l){return(l=l<=.00304?12.92*l:1.055*Math.pow(l,1/2.4)-.055)<0?0:l>1?1:l}function Is(l){return l>Sa?l*l*l:vf*(l-gf)}const Vd=Object.hasOwn||function(l,n){return Object.prototype.hasOwnProperty.call(l,n)};function dl(l,n){return Vd(l,n)?l[n]:void 0}function Io(l){return parseInt(l.padEnd(2,l),16)/255}function ao(l,n){return xr(n?l/100:l,0,1)}function xr(l,n,s){return Math.min(Math.max(n,l),s)}function ks(l){return!l.some(Number.isNaN)}const ko={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Jo(l,n,s){return l+s*(n-l)}function pl(l,n,s){return l.map(((f,v)=>Jo(f,n[v],s)))}class _r{constructor(n,s,f,v=1,S=!0){this.r=n,this.g=s,this.b=f,this.a=v,S||(this.r*=v,this.g*=v,this.b*=v,v||this.overwriteGetter("rgb",[n,s,f,v]))}static parse(n){if(n instanceof _r)return n;if(typeof n!="string")return;const s=(function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const v=dl(ko,f);if(v){const[P,D,R]=v;return[P/255,D/255,R/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const P=f.length<6?1:2;let D=1;return[Io(f.slice(D,D+=P)),Io(f.slice(D,D+=P)),Io(f.slice(D,D+=P)),Io(f.slice(D,D+P)||"ff")]}if(f.startsWith("rgb")){const P=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(P){const[D,R,O,j,q,Z,J,te,oe,ue,pe,Le]=P,Se=[j||" ",J||" ",ue].join("");if(Se==="  "||Se==="  /"||Se===",,"||Se===",,,"){const De=[O,Z,oe].join(""),Ge=De==="%%%"?100:De===""?255:0;if(Ge){const Xe=[xr(+R/Ge,0,1),xr(+q/Ge,0,1),xr(+te/Ge,0,1),pe?ao(+pe,Le):1];if(ks(Xe))return Xe}}return}}const S=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){const[P,D,R,O,j,q,Z,J,te]=S,oe=[R||" ",j||" ",Z].join("");if(oe==="  "||oe==="  /"||oe===",,"||oe===",,,"){const ue=[+D,xr(+O,0,100),xr(+q,0,100),J?ao(+J,te):1];if(ks(ue))return(function([pe,Le,Se,De]){function Ge(Xe){const dt=(Xe+pe/30)%12,Dt=Le*Math.min(Se,1-Se);return Se-Dt*Math.max(-1,Math.min(dt-3,9-dt,1))}return pe=hu(pe),Le/=100,Se/=100,[Ge(0),Ge(8),Ge(4),De]})(ue)}}})(n);return s?new _r(...s,!1):void 0}get rgb(){const{r:n,g:s,b:f,a:v}=this,S=v||1/0;return this.overwriteGetter("rgb",[n/S,s/S,f/S,v])}get hcl(){return this.overwriteGetter("hcl",(function(n){const[s,f,v,S]=fu(n),P=Math.sqrt(f*f+v*v);return[Math.round(1e4*P)?hu(Math.atan2(v,f)*$d):NaN,P,s,S]})(this.rgb))}get lab(){return this.overwriteGetter("lab",fu(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,f,v]=this.rgb;return`rgba(${[n,s,f].map((S=>Math.round(255*S))).join(",")},${v})`}static interpolate(n,s,f,v="rgb"){switch(v){case"rgb":{const[S,P,D,R]=pl(n.rgb,s.rgb,f);return new _r(S,P,D,R,!1)}case"hcl":{const[S,P,D,R]=n.hcl,[O,j,q,Z]=s.hcl;let J,te;if(isNaN(S)||isNaN(O))isNaN(S)?isNaN(O)?J=NaN:(J=O,D!==1&&D!==0||(te=j)):(J=S,q!==1&&q!==0||(te=P));else{let Se=O-S;O>S&&Se>180?Se-=360:O<S&&S-O>180&&(Se+=360),J=S+f*Se}const[oe,ue,pe,Le]=(function([Se,De,Ge,Xe]){return Se=isNaN(Se)?0:Se*yh,fl([Ge,Math.cos(Se)*De,Math.sin(Se)*De,Xe])})([J,te??Jo(P,j,f),Jo(D,q,f),Jo(R,Z,f)]);return new _r(oe,ue,pe,Le,!1)}case"lab":{const[S,P,D,R]=fl(pl(n.lab,s.lab,f));return new _r(S,P,D,R,!1)}}}}_r.black=new _r(0,0,0,1),_r.white=new _r(1,1,1,1),_r.transparent=new _r(0,0,0,0),_r.red=new _r(1,0,0,1);class es{constructor(n,s,f){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const du=["bottom","center","top"];class ts{constructor(n,s,f,v,S,P){this.text=n,this.image=s,this.scale=f,this.fontStack=v,this.textColor=S,this.verticalAlign=P}}class Kn{constructor(n){this.sections=n}static fromString(n){return new Kn([new ts(n,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((n=>n.text.length!==0||n.image&&n.image.name.length!==0))}static factory(n){return n instanceof Kn?n:Kn.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map((n=>n.text)).join("")}}class na{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof na)return n;if(typeof n=="number")return new na([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new na(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,s,f){return new na(pl(n.values,s.values,f))}}class wa{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof wa)return n;if(typeof n=="number")return new wa([n]);if(Array.isArray(n)){for(const s of n)if(typeof s!="number")return;return new wa(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,s,f){return new wa(pl(n.values,s.values,f))}}class Bn{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Bn)return n;if(typeof n=="string"){const f=_r.parse(n);return f?new Bn([f]):void 0}if(!Array.isArray(n))return;const s=[];for(const f of n){if(typeof f!="string")return;const v=_r.parse(f);if(!v)return;s.push(v)}return new Bn(s)}toString(){return JSON.stringify(this.values)}static interpolate(n,s,f,v="rgb"){const S=[];if(n.values.length!=s.values.length)throw new Error(`colorArray: Arrays have mismatched length (${n.values.length} vs. ${s.values.length}), cannot interpolate.`);for(let P=0;P<n.values.length;P++)S.push(_r.interpolate(n.values[P],s.values[P],f,v));return new Bn(S)}}class Nr extends Error{constructor(n){super(n),this.name="RuntimeError"}toJSON(){return this.message}}const Uo=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Pa{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Pa)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const f=n[s],v=n[s+1];if(typeof f!="string"||!Uo.has(f)||!Array.isArray(v)||v.length!==2||typeof v[0]!="number"||typeof v[1]!="number")return}return new Pa(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,s,f){const v=n.values,S=s.values;if(v.length!==S.length)throw new Nr(`Cannot interpolate values of different length. from: ${n.toString()}, to: ${s.toString()}`);const P=[];for(let D=0;D<v.length;D+=2){if(v[D]!==S[D])throw new Nr(`Cannot interpolate values containing mismatched anchors. from[${D}]: ${v[D]}, to[${D}]: ${S[D]}`);P.push(v[D]);const[R,O]=v[D+1],[j,q]=S[D+1];P.push([Jo(R,j,f),Jo(O,q,f)])}return new Pa(P)}}class Aa{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Aa({name:n,available:!1}):null}}class Mn{constructor(n,s,f){this.from=n,this.to=s,this.transition=f}static interpolate(n,s,f){return new Mn(n,s,f)}static parse(n){return n instanceof Mn?n:Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"?new Mn(n[0],n[1],n[2]):typeof n=="object"&&typeof n.from=="string"&&typeof n.to=="string"&&typeof n.transition=="number"?new Mn(n.from,n.to,n.transition):typeof n=="string"?new Mn(n,n,1):void 0}}function Xr(l,n,s,f){return typeof l=="number"&&l>=0&&l<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[l,n,s,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[l,n,s,f]:[l,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Oo(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof Mn||l instanceof _r||l instanceof es||l instanceof Kn||l instanceof na||l instanceof wa||l instanceof Bn||l instanceof Pa||l instanceof Aa)return!0;if(Array.isArray(l)){for(const n of l)if(!Oo(n))return!1;return!0}if(typeof l=="object"){for(const n in l)if(!Oo(l[n]))return!1;return!0}return!1}function er(l){if(l===null)return Mo;if(typeof l=="string")return mr;if(typeof l=="boolean")return cr;if(typeof l=="number")return Tt;if(l instanceof _r)return jn;if(l instanceof Mn)return Wi;if(l instanceof es)return oc;if(l instanceof Kn)return di;if(l instanceof na)return Ko;if(l instanceof wa)return cl;if(l instanceof Bn)return To;if(l instanceof Pa)return ph;if(l instanceof Aa)return Dn;if(Array.isArray(l)){const n=l.length;let s;for(const f of l){const v=er(f);if(s){if(s===v)continue;s=yr;break}s=v}return xa(s||yr,n)}return mn}function lr(l){const n=typeof l;return l===null?"":n==="string"||n==="number"||n==="boolean"?String(l):l instanceof _r||l instanceof Mn||l instanceof Kn||l instanceof na||l instanceof wa||l instanceof Bn||l instanceof Pa||l instanceof Aa?l.toString():JSON.stringify(l)}class Zi{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Oo(n[1]))return s.error("invalid value");const f=n[1];let v=er(f);const S=s.expectedType;return v.kind!=="array"||v.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(v=S),new Zi(v,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Dr={string:mr,number:Tt,boolean:cr,object:mn};class un{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let f,v=1;const S=n[0];if(S==="array"){let D,R;if(n.length>2){const O=n[1];if(typeof O!="string"||!(O in Dr)||O==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);D=Dr[O],v++}else D=yr;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);R=n[2],v++}f=xa(D,R)}else{if(!Dr[S])throw new Error(`Types doesn't contain name = ${S}`);f=Dr[S]}const P=[];for(;v<n.length;v++){const D=s.parse(n[v],v,yr);if(!D)return null;P.push(D)}return new un(f,P)}evaluate(n){for(let s=0;s<this.args.length;s++){const f=this.args[s].evaluate(n);if(!hl(this.type,er(f)))return f;if(s===this.args.length-1)throw new Nr(`Expected value to be of type ${qr(this.type)}, but found ${qr(er(f))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every((n=>n.outputDefined()))}}const ka={"to-boolean":cr,"to-color":jn,"to-number":Tt,"to-string":mr};class Ei{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const f=n[0];if(!ka[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&n.length!==2)return s.error("Expected one argument.");const v=ka[f],S=[];for(let P=1;P<n.length;P++){const D=s.parse(n[P],P,yr);if(!D)return null;S.push(D)}return new Ei(v,S)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,f;for(const v of this.args){if(s=v.evaluate(n),f=null,s instanceof _r)return s;if(typeof s=="string"){const S=n.parseColor(s);if(S)return S}else if(Array.isArray(s)&&(f=s.length<3||s.length>4?`Invalid rgba value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Xr(s[0],s[1],s[2],s[3]),!f))return new _r(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new Nr(f||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const f of this.args){s=f.evaluate(n);const v=na.parse(s);if(v)return v}throw new Nr(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"numberArray":{let s;for(const f of this.args){s=f.evaluate(n);const v=wa.parse(s);if(v)return v}throw new Nr(`Could not parse numberArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"colorArray":{let s;for(const f of this.args){s=f.evaluate(n);const v=Bn.parse(s);if(v)return v}throw new Nr(`Could not parse colorArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const f of this.args){s=f.evaluate(n);const v=Pa.parse(s);if(v)return v}throw new Nr(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const f of this.args){if(s=f.evaluate(n),s===null)return 0;const v=Number(s);if(!isNaN(v))return v}throw new Nr(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return Kn.fromString(lr(this.args[0].evaluate(n)));case"resolvedImage":return Aa.fromString(lr(this.args[0].evaluate(n)));case"projectionDefinition":return this.args[0].evaluate(n);default:return lr(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every((n=>n.outputDefined()))}}const Us=["Unknown","Point","LineString","Polygon"];class _f{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Us[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache.get(n);return s||(s=_r.parse(n),this._parseColorCache.set(n,s)),s}}class Os{constructor(n,s,f=[],v,S=new Xo,P=[]){this.registry=n,this.path=f,this.key=f.map((D=>`[${D}]`)).join(""),this.scope=S,this.errors=P,this.expectedType=v,this._isConstant=s}parse(n,s,f,v,S={}){return s?this.concat(s,f,v)._parse(n,S):this._parse(n,S)}_parse(n,s){function f(v,S,P){return P==="assert"?new un(S,[v]):P==="coerce"?new Ei(S,[v]):v}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=n[0];if(typeof v!="string")return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const S=this.registry[v];if(S){let P=S.parse(n,this);if(!P)return null;if(this.expectedType){const D=this.expectedType,R=P.type;if(D.kind!=="string"&&D.kind!=="number"&&D.kind!=="boolean"&&D.kind!=="object"&&D.kind!=="array"||R.kind!=="value"){if(D.kind==="projectionDefinition"&&["string","array"].includes(R.kind)||["color","formatted","resolvedImage"].includes(D.kind)&&["value","string"].includes(R.kind)||["padding","numberArray"].includes(D.kind)&&["value","number","array"].includes(R.kind)||D.kind==="colorArray"&&["value","string","array"].includes(R.kind)||D.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(R.kind))P=f(P,D,s.typeAnnotation||"coerce");else if(this.checkSubtype(D,R))return null}else P=f(P,D,s.typeAnnotation||"assert")}if(!(P instanceof Zi)&&P.type.kind!=="resolvedImage"&&this._isConstant(P)){const D=new _f;try{P=new Zi(P.type,P.evaluate(D))}catch(R){return this.error(R.message),null}}return P}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,f){const v=typeof n=="number"?this.path.concat(n):this.path,S=f?this.scope.concat(f):this.scope;return new Os(this.registry,this._isConstant,v,s||null,S,this.errors)}error(n,...s){const f=`${this.key}${s.map((v=>`[${v}]`)).join("")}`;this.errors.push(new Cn(f,n))}checkSubtype(n,s){const f=hl(n,s);return f&&this.error(f),f}}class ml{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const f=[];for(let S=1;S<n.length-1;S+=2){const P=n[S];if(typeof P!="string")return s.error(`Expected string, but found ${typeof P} instead.`,S);if(/[^a-zA-Z0-9_]/.test(P))return s.error("Variable names must contain only alphanumeric characters or '_'.",S);const D=s.parse(n[S+1],S+1);if(!D)return null;f.push([P,D])}const v=s.parse(n[n.length-1],n.length-1,s.expectedType,f);return v?new ml(f,v):null}outputDefined(){return this.result.outputDefined()}}class Ls{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const f=n[1];return s.scope.has(f)?new Ls(f,s.scope.get(f)):s.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class yl{constructor(n,s,f){this.type=n,this.index=s,this.input=f}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=s.parse(n[1],1,Tt),v=s.parse(n[2],2,xa(s.expectedType||yr));return f&&v?new yl(v.type.itemType,f,v):null}evaluate(n){const s=this.index.evaluate(n),f=this.input.evaluate(n);if(s<0)throw new Nr(`Array index out of bounds: ${s} < 0.`);if(s>=f.length)throw new Nr(`Array index out of bounds: ${s} > ${f.length-1}.`);if(s!==Math.floor(s))throw new Nr(`Array index must be an integer, but found ${s} instead.`);return f[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class cc{constructor(n,s){this.type=cr,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=s.parse(n[1],1,yr),v=s.parse(n[2],2,yr);return f&&v?mh(f.type,[cr,mr,Tt,Mo,yr])?new cc(f,v):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${qr(f.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(!f)return!1;if(!Ti(s,["boolean","string","number","null"]))throw new Nr(`Expected first argument to be of type boolean, string, number or null, but found ${qr(er(s))} instead.`);if(!Ti(f,["string","array"]))throw new Nr(`Expected second argument to be of type array or string, but found ${qr(er(f))} instead.`);return f.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class io{constructor(n,s,f){this.type=Tt,this.needle=n,this.haystack=s,this.fromIndex=f}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 2 or 3 arguments, but found ${n.length-1} instead.`);const f=s.parse(n[1],1,yr),v=s.parse(n[2],2,yr);if(!f||!v)return null;if(!mh(f.type,[cr,mr,Tt,Mo,yr]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${qr(f.type)} instead`);if(n.length===4){const S=s.parse(n[3],3,Tt);return S?new io(f,v,S):null}return new io(f,v)}evaluate(n){const s=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(!Ti(s,["boolean","string","number","null"]))throw new Nr(`Expected first argument to be of type boolean, string, number or null, but found ${qr(er(s))} instead.`);let v;if(this.fromIndex&&(v=this.fromIndex.evaluate(n)),Ti(f,["string"])){const S=f.indexOf(s,v);return S===-1?-1:[...f.slice(0,S)].length}if(Ti(f,["array"]))return f.indexOf(s,v);throw new Nr(`Expected second argument to be of type array or string, but found ${qr(er(f))} instead.`)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class fa{constructor(n,s,f,v,S,P){this.inputType=n,this.type=s,this.input=f,this.cases=v,this.outputs=S,this.otherwise=P}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let f,v;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);const S={},P=[];for(let O=2;O<n.length-1;O+=2){let j=n[O];const q=n[O+1];Array.isArray(j)||(j=[j]);const Z=s.concat(O);if(j.length===0)return Z.error("Expected at least one branch label.");for(const te of j){if(typeof te!="number"&&typeof te!="string")return Z.error("Branch labels must be numbers or strings.");if(typeof te=="number"&&Math.abs(te)>Number.MAX_SAFE_INTEGER)return Z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof te=="number"&&Math.floor(te)!==te)return Z.error("Numeric branch labels must be integer values.");if(f){if(Z.checkSubtype(f,er(te)))return null}else f=er(te);if(S[String(te)]!==void 0)return Z.error("Branch labels must be unique.");S[String(te)]=P.length}const J=s.parse(q,O,v);if(!J)return null;v=v||J.type,P.push(J)}const D=s.parse(n[1],1,yr);if(!D)return null;const R=s.parse(n[n.length-1],n.length-1,v);return R?D.type.kind!=="value"&&s.concat(1).checkSubtype(f,D.type)?null:new fa(f,v,D,S,P,R):null}evaluate(n){const s=this.input.evaluate(n);return(er(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every((n=>n.outputDefined()))&&this.otherwise.outputDefined()}}class pu{constructor(n,s,f){this.type=n,this.branches=s,this.otherwise=f}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let f;s.expectedType&&s.expectedType.kind!=="value"&&(f=s.expectedType);const v=[];for(let P=1;P<n.length-1;P+=2){const D=s.parse(n[P],P,cr);if(!D)return null;const R=s.parse(n[P+1],P+1,f);if(!R)return null;v.push([D,R]),f=f||R.type}const S=s.parse(n[n.length-1],n.length-1,f);if(!S)return null;if(!f)throw new Error("Can't infer output type");return new pu(f,v,S)}evaluate(n){for(const[s,f]of this.branches)if(s.evaluate(n))return f.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,f]of this.branches)n(s),n(f);n(this.otherwise)}outputDefined(){return this.branches.every((([n,s])=>s.outputDefined()))&&this.otherwise.outputDefined()}}class gl{constructor(n,s,f,v){this.type=n,this.input=s,this.beginIndex=f,this.endIndex=v}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 2 or 3 arguments, but found ${n.length-1} instead.`);const f=s.parse(n[1],1,yr),v=s.parse(n[2],2,Tt);if(!f||!v)return null;if(!mh(f.type,[xa(yr),mr,yr]))return s.error(`Expected first argument to be of type array or string, but found ${qr(f.type)} instead`);if(n.length===4){const S=s.parse(n[3],3,Tt);return S?new gl(f.type,f,v,S):null}return new gl(f.type,f,v)}evaluate(n){const s=this.input.evaluate(n),f=this.beginIndex.evaluate(n);let v;if(this.endIndex&&(v=this.endIndex.evaluate(n)),Ti(s,["string"]))return[...s].slice(f,v).join("");if(Ti(s,["array"]))return s.slice(f,v);throw new Nr(`Expected first argument to be of type array or string, but found ${qr(er(s))} instead.`)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function vl(l,n){const s=l.length-1;let f,v,S=0,P=s,D=0;for(;S<=P;)if(D=Math.floor((S+P)/2),f=l[D],v=l[D+1],f<=n){if(D===s||n<v)return D;S=D+1}else{if(!(f>n))throw new Nr("Input is not a number.");P=D-1}return 0}class kn{constructor(n,s,f){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[v,S]of f)this.labels.push(v),this.outputs.push(S)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const f=s.parse(n[1],1,Tt);if(!f)return null;const v=[];let S=null;s.expectedType&&s.expectedType.kind!=="value"&&(S=s.expectedType);for(let P=1;P<n.length;P+=2){const D=P===1?-1/0:n[P],R=n[P+1],O=P,j=P+1;if(typeof D!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(v.length&&v[v.length-1][0]>=D)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',O);const q=s.parse(R,j,S);if(!q)return null;S=S||q.type,v.push([D,q])}return new kn(S,f,v)}evaluate(n){const s=this.labels,f=this.outputs;if(s.length===1)return f[0].evaluate(n);const v=this.input.evaluate(n);if(v<=s[0])return f[0].evaluate(n);const S=s.length;return v>=s[S-1]?f[S-1].evaluate(n):f[vl(s,v)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every((n=>n.outputDefined()))}}function Gd(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var hc,bf,Wd=(function(){if(bf)return hc;function l(n,s,f,v){this.cx=3*n,this.bx=3*(f-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(v-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=s,this.p2x=f,this.p2y=v}return bf=1,hc=l,l.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,s){if(s===void 0&&(s=1e-6),n<0)return 0;if(n>1)return 1;for(var f=n,v=0;v<8;v++){var S=this.sampleCurveX(f)-n;if(Math.abs(S)<s)return f;var P=this.sampleCurveDerivativeX(f);if(Math.abs(P)<1e-6)break;f-=S/P}var D=0,R=1;for(f=n,v=0;v<20&&(S=this.sampleCurveX(f),!(Math.abs(S-n)<s));v++)n>S?D=f:R=f,f=.5*(R-D)+D;return f},solve:function(n,s){return this.sampleCurveY(this.solveCurveX(n,s))}},hc})(),mu=Gd(Wd);class Ca{constructor(n,s,f,v,S){this.type=n,this.operator=s,this.interpolation=f,this.input=v,this.labels=[],this.outputs=[];for(const[P,D]of S)this.labels.push(P),this.outputs.push(D)}static interpolationFactor(n,s,f,v){let S=0;if(n.name==="exponential")S=fc(s,n.base,f,v);else if(n.name==="linear")S=fc(s,1,f,v);else if(n.name==="cubic-bezier"){const P=n.controlPoints;S=new mu(P[0],P[1],P[2],P[3]).solve(fc(s,1,f,v))}return S}static parse(n,s){let[f,v,S,...P]=n;if(!Array.isArray(v)||v.length===0)return s.error("Expected an interpolation type expression.",1);if(v[0]==="linear")v={name:"linear"};else if(v[0]==="exponential"){const O=v[1];if(typeof O!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:O}}else{if(v[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const O=v.slice(1);if(O.length!==4||O.some((j=>typeof j!="number"||j<0||j>1)))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:O}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(S=s.parse(S,2,Tt),!S)return null;const D=[];let R=null;f!=="interpolate-hcl"&&f!=="interpolate-lab"||s.expectedType==To?s.expectedType&&s.expectedType.kind!=="value"&&(R=s.expectedType):R=jn;for(let O=0;O<P.length;O+=2){const j=P[O],q=P[O+1],Z=O+3,J=O+4;if(typeof j!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(D.length&&D[D.length-1][0]>=j)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Z);const te=s.parse(q,J,R);if(!te)return null;R=R||te.type,D.push([j,te])}return Ro(R,Tt)||Ro(R,Wi)||Ro(R,jn)||Ro(R,Ko)||Ro(R,cl)||Ro(R,To)||Ro(R,ph)||Ro(R,xa(Tt))?new Ca(R,f,v,S,D):s.error(`Type ${qr(R)} is not interpolatable.`)}evaluate(n){const s=this.labels,f=this.outputs;if(s.length===1)return f[0].evaluate(n);const v=this.input.evaluate(n);if(v<=s[0])return f[0].evaluate(n);const S=s.length;if(v>=s[S-1])return f[S-1].evaluate(n);const P=vl(s,v),D=Ca.interpolationFactor(this.interpolation,v,s[P],s[P+1]),R=f[P].evaluate(n),O=f[P+1].evaluate(n);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Jo(R,O,D);case"color":return _r.interpolate(R,O,D);case"padding":return na.interpolate(R,O,D);case"colorArray":return Bn.interpolate(R,O,D);case"numberArray":return wa.interpolate(R,O,D);case"variableAnchorOffsetCollection":return Pa.interpolate(R,O,D);case"array":return pl(R,O,D);case"projectionDefinition":return Mn.interpolate(R,O,D)}case"interpolate-hcl":switch(this.type.kind){case"color":return _r.interpolate(R,O,D,"hcl");case"colorArray":return Bn.interpolate(R,O,D,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return _r.interpolate(R,O,D,"lab");case"colorArray":return Bn.interpolate(R,O,D,"lab")}}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every((n=>n.outputDefined()))}}function fc(l,n,s,f){const v=f-s,S=l-s;return v===0?0:n===1?S/v:(Math.pow(n,S)-1)/(Math.pow(n,v)-1)}const Lo={color:_r.interpolate,number:Jo,padding:na.interpolate,numberArray:wa.interpolate,colorArray:Bn.interpolate,variableAnchorOffsetCollection:Pa.interpolate,array:pl};class _l{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let f=null;const v=s.expectedType;v&&v.kind!=="value"&&(f=v);const S=[];for(const D of n.slice(1)){const R=s.parse(D,1+S.length,f,void 0,{typeAnnotation:"omit"});if(!R)return null;f=f||R.type,S.push(R)}if(!f)throw new Error("No output type");const P=v&&S.some((D=>hl(v,D.type)));return new _l(P?yr:f,S)}evaluate(n){let s,f=null,v=0;for(const S of this.args)if(v++,f=S.evaluate(n),f&&f instanceof Aa&&!f.available&&(s||(s=f.name),f=null,v===this.args.length&&(f=s)),f!==null)break;return f}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every((n=>n.outputDefined()))}}function dc(l,n){return l==="=="||l==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function pc(l,n,s,f){return f.compare(n,s)===0}function Ua(l,n,s){const f=l!=="=="&&l!=="!=";return class GC{constructor(S,P,D){this.type=cr,this.lhs=S,this.rhs=P,this.collator=D,this.hasUntypedArgument=S.type.kind==="value"||P.type.kind==="value"}static parse(S,P){if(S.length!==3&&S.length!==4)return P.error("Expected two or three arguments.");const D=S[0];let R=P.parse(S[1],1,yr);if(!R)return null;if(!dc(D,R.type))return P.concat(1).error(`"${D}" comparisons are not supported for type '${qr(R.type)}'.`);let O=P.parse(S[2],2,yr);if(!O)return null;if(!dc(D,O.type))return P.concat(2).error(`"${D}" comparisons are not supported for type '${qr(O.type)}'.`);if(R.type.kind!==O.type.kind&&R.type.kind!=="value"&&O.type.kind!=="value")return P.error(`Cannot compare types '${qr(R.type)}' and '${qr(O.type)}'.`);f&&(R.type.kind==="value"&&O.type.kind!=="value"?R=new un(O.type,[R]):R.type.kind!=="value"&&O.type.kind==="value"&&(O=new un(R.type,[O])));let j=null;if(S.length===4){if(R.type.kind!=="string"&&O.type.kind!=="string"&&R.type.kind!=="value"&&O.type.kind!=="value")return P.error("Cannot use collator to compare non-string types.");if(j=P.parse(S[3],3,oc),!j)return null}return new GC(R,O,j)}evaluate(S){const P=this.lhs.evaluate(S),D=this.rhs.evaluate(S);if(f&&this.hasUntypedArgument){const R=er(P),O=er(D);if(R.kind!==O.kind||R.kind!=="string"&&R.kind!=="number")throw new Nr(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${R.kind}, ${O.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const R=er(P),O=er(D);if(R.kind!=="string"||O.kind!=="string")return n(S,P,D)}return this.collator?s(S,P,D,this.collator.evaluate(S)):n(S,P,D)}eachChild(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)}outputDefined(){return!0}}}const xf=Ua("==",(function(l,n,s){return n===s}),pc),gh=Ua("!=",(function(l,n,s){return n!==s}),(function(l,n,s,f){return!pc(0,n,s,f)})),hm=Ua("<",(function(l,n,s){return n<s}),(function(l,n,s,f){return f.compare(n,s)<0})),Sf=Ua(">",(function(l,n,s){return n>s}),(function(l,n,s,f){return f.compare(n,s)>0})),fm=Ua("<=",(function(l,n,s){return n<=s}),(function(l,n,s,f){return f.compare(n,s)<=0})),dm=Ua(">=",(function(l,n,s){return n>=s}),(function(l,n,s,f){return f.compare(n,s)>=0}));class vh{constructor(n,s,f){this.type=oc,this.locale=f,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const f=n[1];if(typeof f!="object"||Array.isArray(f))return s.error("Collator options argument must be an object.");const v=s.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,cr);if(!v)return null;const S=s.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,cr);if(!S)return null;let P=null;return f.locale&&(P=s.parse(f.locale,1,mr),!P)?null:new vh(v,S,P)}evaluate(n){return new es(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class wf{constructor(n,s,f,v,S){this.type=mr,this.number=n,this.locale=s,this.currency=f,this.minFractionDigits=v,this.maxFractionDigits=S}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const f=s.parse(n[1],1,Tt);if(!f)return null;const v=n[2];if(typeof v!="object"||Array.isArray(v))return s.error("NumberFormat options argument must be an object.");let S=null;if(v.locale&&(S=s.parse(v.locale,1,mr),!S))return null;let P=null;if(v.currency&&(P=s.parse(v.currency,1,mr),!P))return null;let D=null;if(v["min-fraction-digits"]&&(D=s.parse(v["min-fraction-digits"],1,Tt),!D))return null;let R=null;return v["max-fraction-digits"]&&(R=s.parse(v["max-fraction-digits"],1,Tt),!R)?null:new wf(f,S,P,D,R)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class bl{constructor(n){this.type=di,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const f=n[1];if(!Array.isArray(f)&&typeof f=="object")return s.error("First argument must be an image or text section.");const v=[];let S=!1;for(let P=1;P<=n.length-1;++P){const D=n[P];if(S&&typeof D=="object"&&!Array.isArray(D)){S=!1;let R=null;if(D["font-scale"]&&(R=s.parse(D["font-scale"],1,Tt),!R))return null;let O=null;if(D["text-font"]&&(O=s.parse(D["text-font"],1,xa(mr)),!O))return null;let j=null;if(D["text-color"]&&(j=s.parse(D["text-color"],1,jn),!j))return null;let q=null;if(D["vertical-align"]){if(typeof D["vertical-align"]=="string"&&!du.includes(D["vertical-align"]))return s.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${D["vertical-align"]}' instead.`);if(q=s.parse(D["vertical-align"],1,mr),!q)return null}const Z=v[v.length-1];Z.scale=R,Z.font=O,Z.textColor=j,Z.verticalAlign=q}else{const R=s.parse(n[P],1,yr);if(!R)return null;const O=R.type.kind;if(O!=="string"&&O!=="value"&&O!=="null"&&O!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,v.push({content:R,scale:null,font:null,textColor:null,verticalAlign:null})}}return new bl(v)}evaluate(n){return new Kn(this.sections.map((s=>{const f=s.content.evaluate(n);return er(f)===Dn?new ts("",f,null,null,null,s.verticalAlign?s.verticalAlign.evaluate(n):null):new ts(lr(f),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null,s.verticalAlign?s.verticalAlign.evaluate(n):null)})))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor),s.verticalAlign&&n(s.verticalAlign)}outputDefined(){return!1}}class Pf{constructor(n){this.type=Dn,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const f=s.parse(n[1],1,mr);return f?new Pf(f):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),f=Aa.fromString(s);return f&&n.availableImages&&(f.available=n.availableImages.indexOf(s)>-1),f}eachChild(n){n(this.input)}outputDefined(){return!1}}class yu{constructor(n){this.type=Tt,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const f=s.parse(n[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${qr(f.type)} instead.`):new yu(f):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string")return[...s].length;if(Array.isArray(s))return s.length;throw new Nr(`Expected value to be of type string or array, but found ${qr(er(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Wa=8192;function pm(l,n){const s=(180+l[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,v=Math.pow(2,n.z);return[Math.round(s*v*Wa),Math.round(f*v*Wa)]}function mc(l,n){const s=Math.pow(2,n.z);return[(v=(l[0]/Wa+n.x)/s,360*v-180),(f=(l[1]/Wa+n.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90)];var f,v}function gu(l,n){l[0]=Math.min(l[0],n[0]),l[1]=Math.min(l[1],n[1]),l[2]=Math.max(l[2],n[0]),l[3]=Math.max(l[3],n[1])}function vu(l,n){return!(l[0]<=n[0]||l[2]>=n[2]||l[1]<=n[1]||l[3]>=n[3])}function Zd(l,n,s){const f=l[0]-n[0],v=l[1]-n[1],S=l[0]-s[0],P=l[1]-s[1];return f*P-S*v==0&&f*S<=0&&v*P<=0}function yc(l,n,s,f){return(v=[f[0]-s[0],f[1]-s[1]])[0]*(S=[n[0]-l[0],n[1]-l[1]])[1]-v[1]*S[0]!=0&&!(!Cf(l,n,s,f)||!Cf(s,f,l,n));var v,S}function _u(l,n,s){for(const f of s)for(let v=0;v<f.length-1;++v)if(yc(l,n,f[v],f[v+1]))return!0;return!1}function xl(l,n,s=!1){let f=!1;for(const D of n)for(let R=0;R<D.length-1;R++){if(Zd(l,D[R],D[R+1]))return s;(S=D[R])[1]>(v=l)[1]!=(P=D[R+1])[1]>v[1]&&v[0]<(P[0]-S[0])*(v[1]-S[1])/(P[1]-S[1])+S[0]&&(f=!f)}var v,S,P;return f}function Yd(l,n){for(const s of n)if(xl(l,s))return!0;return!1}function Af(l,n){for(const s of l)if(!xl(s,n))return!1;for(let s=0;s<l.length-1;++s)if(_u(l[s],l[s+1],n))return!1;return!0}function Qd(l,n){for(const s of n)if(Af(l,s))return!0;return!1}function Cf(l,n,s,f){const v=f[0]-s[0],S=f[1]-s[1],P=(l[0]-s[0])*S-v*(l[1]-s[1]),D=(n[0]-s[0])*S-v*(n[1]-s[1]);return P>0&&D<0||P<0&&D>0}function Sl(l,n,s){const f=[];for(let v=0;v<l.length;v++){const S=[];for(let P=0;P<l[v].length;P++){const D=pm(l[v][P],s);gu(n,D),S.push(D)}f.push(S)}return f}function bu(l,n,s){const f=[];for(let v=0;v<l.length;v++){const S=Sl(l[v],n,s);f.push(S)}return f}function _h(l,n,s,f){if(l[0]<s[0]||l[0]>s[2]){const v=.5*f;let S=l[0]-s[0]>v?-f:s[0]-l[0]>v?f:0;S===0&&(S=l[0]-s[2]>v?-f:s[2]-l[0]>v?f:0),l[0]+=S}gu(n,l)}function gc(l,n,s,f){const v=Math.pow(2,f.z)*Wa,S=[f.x*Wa,f.y*Wa],P=[];for(const D of l)for(const R of D){const O=[R.x+S[0],R.y+S[1]];_h(O,n,s,v),P.push(O)}return P}function Df(l,n,s,f){const v=Math.pow(2,f.z)*Wa,S=[f.x*Wa,f.y*Wa],P=[];for(const R of l){const O=[];for(const j of R){const q=[j.x+S[0],j.y+S[1]];gu(n,q),O.push(q)}P.push(O)}if(n[2]-n[0]<=v/2){(D=n)[0]=D[1]=1/0,D[2]=D[3]=-1/0;for(const R of P)for(const O of R)_h(O,n,s,v)}var D;return P}class zs{constructor(n,s){this.type=cr,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Oo(n[1])){const f=n[1];if(f.type==="FeatureCollection"){const v=[];for(const S of f.features){const{type:P,coordinates:D}=S.geometry;P==="Polygon"&&v.push(D),P==="MultiPolygon"&&v.push(...D)}if(v.length)return new zs(f,{type:"MultiPolygon",coordinates:v})}else if(f.type==="Feature"){const v=f.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new zs(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new zs(f,f)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return(function(s,f){const v=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],P=s.canonicalID();if(f.type==="Polygon"){const D=Sl(f.coordinates,S,P),R=gc(s.geometry(),v,S,P);if(!vu(v,S))return!1;for(const O of R)if(!xl(O,D))return!1}if(f.type==="MultiPolygon"){const D=bu(f.coordinates,S,P),R=gc(s.geometry(),v,S,P);if(!vu(v,S))return!1;for(const O of R)if(!Yd(O,D))return!1}return!0})(n,this.geometries);if(n.geometryType()==="LineString")return(function(s,f){const v=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],P=s.canonicalID();if(f.type==="Polygon"){const D=Sl(f.coordinates,S,P),R=Df(s.geometry(),v,S,P);if(!vu(v,S))return!1;for(const O of R)if(!Af(O,D))return!1}if(f.type==="MultiPolygon"){const D=bu(f.coordinates,S,P),R=Df(s.geometry(),v,S,P);if(!vu(v,S))return!1;for(const O of R)if(!Qd(O,D))return!1}return!0})(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let vc=class{constructor(l=[],n=(s,f)=>s<f?-1:s>f?1:0){if(this.data=l,this.length=this.data.length,this.compare=n,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;const l=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:n,compare:s}=this,f=n[l];for(;l>0;){const v=l-1>>1,S=n[v];if(s(f,S)>=0)break;n[l]=S,l=v}n[l]=f}_down(l){const{data:n,compare:s}=this,f=this.length>>1,v=n[l];for(;l<f;){let S=1+(l<<1);const P=S+1;if(P<this.length&&s(n[P],n[S])<0&&(S=P),s(n[S],v)>=0)break;n[l]=n[S],l=S}n[l]=v}};function _c(l,n,s=0,f=l.length-1,v=Xd){for(;f>s;){if(f-s>600){const R=f-s+1,O=n-s+1,j=Math.log(R),q=.5*Math.exp(2*j/3),Z=.5*Math.sqrt(j*q*(R-q)/R)*(O-R/2<0?-1:1);_c(l,n,Math.max(s,Math.floor(n-O*q/R+Z)),Math.min(f,Math.floor(n+(R-O)*q/R+Z)),v)}const S=l[n];let P=s,D=f;for(xu(l,s,n),v(l[f],S)>0&&xu(l,s,f);P<D;){for(xu(l,P,D),P++,D--;v(l[P],S)<0;)P++;for(;v(l[D],S)>0;)D--}v(l[s],S)===0?xu(l,s,D):(D++,xu(l,D,f)),D<=n&&(s=D+1),n<=D&&(f=D-1)}}function xu(l,n,s){const f=l[n];l[n]=l[s],l[s]=f}function Xd(l,n){return l<n?-1:l>n?1:0}function Su(l,n){if(l.length<=1)return[l];const s=[];let f,v;for(const S of l){const P=mm(S);P!==0&&(S.area=Math.abs(P),v===void 0&&(v=P<0),v===P<0?(f&&s.push(f),f=[S]):f.push(S))}if(f&&s.push(f),n>1)for(let S=0;S<s.length;S++)s[S].length<=n||(_c(s[S],n,1,s[S].length-1,Kd),s[S]=s[S].slice(0,n));return s}function Kd(l,n){return n.area-l.area}function mm(l){let n=0;for(let s,f,v=0,S=l.length,P=S-1;v<S;P=v++)s=l[v],f=l[P],n+=(f.x-s.x)*(s.y+f.y);return n}const Jd=1/298.257223563,ep=Jd*(2-Jd),Mf=Math.PI/180;class Za{constructor(n){const s=6378.137*Mf*1e3,f=Math.cos(n*Mf),v=1/(1-ep*(1-f*f)),S=Math.sqrt(v);this.kx=s*S*f,this.ky=s*S*v*(1-ep)}distance(n,s){const f=this.wrap(n[0]-s[0])*this.kx,v=(n[1]-s[1])*this.ky;return Math.sqrt(f*f+v*v)}pointOnLine(n,s){let f,v,S,P,D=1/0;for(let R=0;R<n.length-1;R++){let O=n[R][0],j=n[R][1],q=this.wrap(n[R+1][0]-O)*this.kx,Z=(n[R+1][1]-j)*this.ky,J=0;q===0&&Z===0||(J=(this.wrap(s[0]-O)*this.kx*q+(s[1]-j)*this.ky*Z)/(q*q+Z*Z),J>1?(O=n[R+1][0],j=n[R+1][1]):J>0&&(O+=q/this.kx*J,j+=Z/this.ky*J)),q=this.wrap(s[0]-O)*this.kx,Z=(s[1]-j)*this.ky;const te=q*q+Z*Z;te<D&&(D=te,f=O,v=j,S=R,P=J)}return{point:[f,v],index:S,t:Math.max(0,Math.min(1,P))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function wu(l,n){return n[0]-l[0]}function bc(l){return l[1]-l[0]+1}function zo(l,n){return l[1]>=l[0]&&l[1]<n}function Ir(l,n){if(l[0]>l[1])return[null,null];const s=bc(l);if(n){if(s===2)return[l,null];const v=Math.floor(s/2);return[[l[0],l[0]+v],[l[0]+v,l[1]]]}if(s===1)return[l,null];const f=Math.floor(s/2)-1;return[[l[0],l[0]+f],[l[0]+f+1,l[1]]]}function bh(l,n){if(!zo(n,l.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let f=n[0];f<=n[1];++f)gu(s,l[f]);return s}function xc(l){const n=[1/0,1/0,-1/0,-1/0];for(const s of l)for(const f of s)gu(n,f);return n}function tp(l){return l[0]!==-1/0&&l[1]!==-1/0&&l[2]!==1/0&&l[3]!==1/0}function Fs(l,n,s){if(!tp(l)||!tp(n))return NaN;let f=0,v=0;return l[2]<n[0]&&(f=n[0]-l[2]),l[0]>n[2]&&(f=l[0]-n[2]),l[1]>n[3]&&(v=l[1]-n[3]),l[3]<n[1]&&(v=n[1]-l[3]),s.distance([0,0],[f,v])}function rs(l,n,s){const f=s.pointOnLine(n,l);return s.distance(l,f.point)}function wl(l,n,s,f,v){const S=Math.min(rs(l,[s,f],v),rs(n,[s,f],v)),P=Math.min(rs(s,[l,n],v),rs(f,[l,n],v));return Math.min(S,P)}function Tf(l,n,s,f,v){if(!zo(n,l.length)||!zo(f,s.length))return 1/0;let S=1/0;for(let P=n[0];P<n[1];++P){const D=l[P],R=l[P+1];for(let O=f[0];O<f[1];++O){const j=s[O],q=s[O+1];if(yc(D,R,j,q))return 0;S=Math.min(S,wl(D,R,j,q,v))}}return S}function rp(l,n,s,f,v){if(!zo(n,l.length)||!zo(f,s.length))return NaN;let S=1/0;for(let P=n[0];P<=n[1];++P)for(let D=f[0];D<=f[1];++D)if(S=Math.min(S,v.distance(l[P],s[D])),S===0)return S;return S}function Pl(l,n,s){if(xl(l,n,!0))return 0;let f=1/0;for(const v of n){const S=v[0],P=v[v.length-1];if(S!==P&&(f=Math.min(f,rs(l,[P,S],s)),f===0))return f;const D=s.pointOnLine(v,l);if(f=Math.min(f,s.distance(l,D.point)),f===0)return f}return f}function Pu(l,n,s,f){if(!zo(n,l.length))return NaN;for(let S=n[0];S<=n[1];++S)if(xl(l[S],s,!0))return 0;let v=1/0;for(let S=n[0];S<n[1];++S){const P=l[S],D=l[S+1];for(const R of s)for(let O=0,j=R.length,q=j-1;O<j;q=O++){const Z=R[q],J=R[O];if(yc(P,D,Z,J))return 0;v=Math.min(v,wl(P,D,Z,J,f))}}return v}function xh(l,n){for(const s of l)for(const f of s)if(xl(f,n,!0))return!0;return!1}function np(l,n,s,f=1/0){const v=xc(l),S=xc(n);if(f!==1/0&&Fs(v,S,s)>=f)return f;if(vu(v,S)){if(xh(l,n))return 0}else if(xh(n,l))return 0;let P=1/0;for(const D of l)for(let R=0,O=D.length,j=O-1;R<O;j=R++){const q=D[j],Z=D[R];for(const J of n)for(let te=0,oe=J.length,ue=oe-1;te<oe;ue=te++){const pe=J[ue],Le=J[te];if(yc(q,Z,pe,Le))return 0;P=Math.min(P,wl(q,Z,pe,Le,s))}}return P}function Ns(l,n,s,f,v,S){if(!S)return;const P=Fs(bh(f,S),v,s);P<n&&l.push([P,S,[0,0]])}function Sc(l,n,s,f,v,S,P){if(!S||!P)return;const D=Fs(bh(f,S),bh(v,P),s);D<n&&l.push([D,S,P])}function wc(l,n,s,f,v=1/0){let S=Math.min(f.distance(l[0],s[0][0]),v);if(S===0)return S;const P=new vc([[0,[0,l.length-1],[0,0]]],wu),D=xc(s);for(;P.length>0;){const R=P.pop();if(R[0]>=S)continue;const O=R[1],j=n?50:100;if(bc(O)<=j){if(!zo(O,l.length))return NaN;if(n){const q=Pu(l,O,s,f);if(isNaN(q)||q===0)return q;S=Math.min(S,q)}else for(let q=O[0];q<=O[1];++q){const Z=Pl(l[q],s,f);if(S=Math.min(S,Z),S===0)return 0}}else{const q=Ir(O,n);Ns(P,S,f,l,D,q[0]),Ns(P,S,f,l,D,q[1])}}return S}function Pc(l,n,s,f,v,S=1/0){let P=Math.min(S,v.distance(l[0],s[0]));if(P===0)return P;const D=new vc([[0,[0,l.length-1],[0,s.length-1]]],wu);for(;D.length>0;){const R=D.pop();if(R[0]>=P)continue;const O=R[1],j=R[2],q=n?50:100,Z=f?50:100;if(bc(O)<=q&&bc(j)<=Z){if(!zo(O,l.length)&&zo(j,s.length))return NaN;let J;if(n&&f)J=Tf(l,O,s,j,v),P=Math.min(P,J);else if(n&&!f){const te=l.slice(O[0],O[1]+1);for(let oe=j[0];oe<=j[1];++oe)if(J=rs(s[oe],te,v),P=Math.min(P,J),P===0)return P}else if(!n&&f){const te=s.slice(j[0],j[1]+1);for(let oe=O[0];oe<=O[1];++oe)if(J=rs(l[oe],te,v),P=Math.min(P,J),P===0)return P}else J=rp(l,O,s,j,v),P=Math.min(P,J)}else{const J=Ir(O,n),te=Ir(j,f);Sc(D,P,v,l,s,J[0],te[0]),Sc(D,P,v,l,s,J[0],te[1]),Sc(D,P,v,l,s,J[1],te[0]),Sc(D,P,v,l,s,J[1],te[1])}}return P}function Ef(l){return l.type==="MultiPolygon"?l.coordinates.map((n=>({type:"Polygon",coordinates:n}))):l.type==="MultiLineString"?l.coordinates.map((n=>({type:"LineString",coordinates:n}))):l.type==="MultiPoint"?l.coordinates.map((n=>({type:"Point",coordinates:n}))):[l]}class Al{constructor(n,s){this.type=Tt,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Oo(n[1])){const f=n[1];if(f.type==="FeatureCollection")return new Al(f,f.features.map((v=>Ef(v.geometry))).flat());if(f.type==="Feature")return new Al(f,Ef(f.geometry));if("type"in f&&"coordinates"in f)return new Al(f,Ef(f))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return(function(s,f){const v=s.geometry(),S=v.flat().map((R=>mc([R.x,R.y],s.canonical)));if(v.length===0)return NaN;const P=new Za(S[0][1]);let D=1/0;for(const R of f){switch(R.type){case"Point":D=Math.min(D,Pc(S,!1,[R.coordinates],!1,P,D));break;case"LineString":D=Math.min(D,Pc(S,!1,R.coordinates,!0,P,D));break;case"Polygon":D=Math.min(D,wc(S,!1,R.coordinates,P,D))}if(D===0)return D}return D})(n,this.geometries);if(n.geometryType()==="LineString")return(function(s,f){const v=s.geometry(),S=v.flat().map((R=>mc([R.x,R.y],s.canonical)));if(v.length===0)return NaN;const P=new Za(S[0][1]);let D=1/0;for(const R of f){switch(R.type){case"Point":D=Math.min(D,Pc(S,!0,[R.coordinates],!1,P,D));break;case"LineString":D=Math.min(D,Pc(S,!0,R.coordinates,!0,P,D));break;case"Polygon":D=Math.min(D,wc(S,!0,R.coordinates,P,D))}if(D===0)return D}return D})(n,this.geometries);if(n.geometryType()==="Polygon")return(function(s,f){const v=s.geometry();if(v.length===0||v[0].length===0)return NaN;const S=Su(v,0).map((R=>R.map((O=>O.map((j=>mc([j.x,j.y],s.canonical))))))),P=new Za(S[0][0][0][1]);let D=1/0;for(const R of f)for(const O of S){switch(R.type){case"Point":D=Math.min(D,wc([R.coordinates],!1,O,P,D));break;case"LineString":D=Math.min(D,wc(R.coordinates,!0,O,P,D));break;case"Polygon":D=Math.min(D,np(O,R.coordinates,P,D))}if(D===0)return D}return D})(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Ac{constructor(n){this.type=yr,this.key=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const f=n[1];return f==null?s.error("Global state property must be defined."):typeof f!="string"?s.error(`Global state property must be string, but found ${typeof n[1]} instead.`):new Ac(f)}evaluate(n){var s;const f=(s=n.globals)===null||s===void 0?void 0:s.globalState;return f&&Object.keys(f).length!==0?dl(f,this.key):null}eachChild(){}outputDefined(){return!1}}const Cl={"==":xf,"!=":gh,">":Sf,"<":hm,">=":dm,"<=":fm,array:un,at:yl,boolean:un,case:pu,coalesce:_l,collator:vh,format:bl,image:Pf,in:cc,"index-of":io,interpolate:Ca,"interpolate-hcl":Ca,"interpolate-lab":Ca,length:yu,let:ml,literal:Zi,match:fa,number:un,"number-format":wf,object:un,slice:gl,step:kn,string:un,"to-boolean":Ei,"to-color":Ei,"to-number":Ei,"to-string":Ei,var:Ls,within:zs,distance:Al,"global-state":Ac};class Ri{constructor(n,s,f,v){this.name=n,this.type=s,this._evaluate=f,this.args=v}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const f=n[0],v=Ri.definitions[f];if(!v)return s.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const S=Array.isArray(v)?v[0]:v.type,P=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,D=P.filter((([O])=>!Array.isArray(O)||O.length===n.length-1));let R=null;for(const[O,j]of D){R=new Os(s.registry,Ya,s.path,null,s.scope);const q=[];let Z=!1;for(let J=1;J<n.length;J++){const te=n[J],oe=Array.isArray(O)?O[J-1]:O.type,ue=R.parse(te,1+q.length,oe);if(!ue){Z=!0;break}q.push(ue)}if(!Z)if(Array.isArray(O)&&O.length!==q.length)R.error(`Expected ${O.length} arguments, but found ${q.length} instead.`);else{for(let J=0;J<q.length;J++){const te=Array.isArray(O)?O[J]:O.type,oe=q[J];R.concat(J+1).checkSubtype(te,oe.type)}if(R.errors.length===0)return new Ri(f,S,j,q)}}if(D.length===1)s.errors.push(...R.errors);else{const O=(D.length?D:P).map((([q])=>{return Z=q,Array.isArray(Z)?`(${Z.map(qr).join(", ")})`:`(${qr(Z.type)}...)`;var Z})).join(" | "),j=[];for(let q=1;q<n.length;q++){const Z=s.parse(n[q],1+j.length);if(!Z)return null;j.push(qr(Z.type))}s.error(`Expected arguments of type ${O}, but found (${j.join(", ")}) instead.`)}return null}static register(n,s){Ri.definitions=s;for(const f in s)n[f]=Ri}}function Sh(l,[n,s,f,v]){n=n.evaluate(l),s=s.evaluate(l),f=f.evaluate(l);const S=v?v.evaluate(l):1,P=Xr(n,s,f,S);if(P)throw new Nr(P);return new _r(n/255,s/255,f/255,S,!1)}function Yi(l,n){return l in n}function wh(l,n){const s=n[l];return s===void 0?null:s}function da(l){return{type:l}}function Ya(l){if(l instanceof Ls)return Ya(l.boundExpression);if(l instanceof Ri&&l.name==="error"||l instanceof vh||l instanceof zs||l instanceof Al||l instanceof Ac)return!1;const n=l instanceof Ei||l instanceof un;let s=!0;return l.eachChild((f=>{s=n?s&&Ya(f):s&&f instanceof Zi})),!!s&&ns(l)&&Ml(l,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function ns(l){if(l instanceof Ri&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof zs||l instanceof Al)return!1;let n=!0;return l.eachChild((s=>{n&&!ns(s)&&(n=!1)})),n}function Dl(l){if(l instanceof Ri&&l.name==="feature-state")return!1;let n=!0;return l.eachChild((s=>{n&&!Dl(s)&&(n=!1)})),n}function Ml(l,n){if(l instanceof Ri&&n.indexOf(l.name)>=0)return!1;let s=!0;return l.eachChild((f=>{s&&!Ml(f,n)&&(s=!1)})),s}function Cc(l){return{result:"success",value:l}}function js(l){return{result:"error",value:l}}function Ii(l){return l["property-type"]==="data-driven"||l["property-type"]==="cross-faded-data-driven"}function Rf(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function Au(l){return!!l.expression&&l.expression.interpolated}function gr(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}function Dc(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)&&er(l)===mn}function ki(l){return l}function Ph(l,n){const s=l.stops&&typeof l.stops[0][0]=="object",f=s||!(s||l.property!==void 0),v=l.type||(Au(n)?"exponential":"interval"),S=(function(j){switch(j.type){case"color":return _r.parse;case"padding":return na.parse;case"numberArray":return wa.parse;case"colorArray":return Bn.parse;default:return null}})(n);if(S&&((l=Ia({},l)).stops&&(l.stops=l.stops.map((j=>[j[0],S(j[1])]))),l.default=S(l.default?l.default:n.default)),l.colorSpace&&(P=l.colorSpace)!=="rgb"&&P!=="hcl"&&P!=="lab")throw new Error(`Unknown color space: "${l.colorSpace}"`);var P;const D=(function(j){switch(j){case"exponential":return Bs;case"interval":return Ah;case"categorical":return If;case"identity":return kf;default:throw new Error(`Unknown function type "${j}"`)}})(v);let R,O;if(v==="categorical"){R=Object.create(null);for(const j of l.stops)R[j[0]]=j[1];O=typeof l.stops[0][0]}if(s){const j={},q=[];for(let te=0;te<l.stops.length;te++){const oe=l.stops[te],ue=oe[0].zoom;j[ue]===void 0&&(j[ue]={zoom:ue,type:l.type,property:l.property,default:l.default,stops:[]},q.push(ue)),j[ue].stops.push([oe[0].value,oe[1]])}const Z=[];for(const te of q)Z.push([j[te].zoom,Ph(j[te],n)]);const J={name:"linear"};return{kind:"composite",interpolationType:J,interpolationFactor:Ca.interpolationFactor.bind(void 0,J),zoomStops:Z.map((te=>te[0])),evaluate:({zoom:te},oe)=>Bs({stops:Z,base:l.base},n,te).evaluate(te,oe)}}if(f){const j=v==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:j,interpolationFactor:Ca.interpolationFactor.bind(void 0,j),zoomStops:l.stops.map((q=>q[0])),evaluate:({zoom:q})=>D(l,n,q,R,O)}}return{kind:"source",evaluate(j,q){const Z=q&&q.properties?q.properties[l.property]:void 0;return Z===void 0?Oa(l.default,n.default):D(l,n,Z,R,O)}}}function Oa(l,n,s){return l!==void 0?l:n!==void 0?n:s!==void 0?s:void 0}function If(l,n,s,f,v){return Oa(typeof s===v?f[s]:void 0,l.default,n.default)}function Ah(l,n,s){if(gr(s)!=="number")return Oa(l.default,n.default);const f=l.stops.length;if(f===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[f-1][0])return l.stops[f-1][1];const v=vl(l.stops.map((S=>S[0])),s);return l.stops[v][1]}function Bs(l,n,s){const f=l.base!==void 0?l.base:1;if(gr(s)!=="number")return Oa(l.default,n.default);const v=l.stops.length;if(v===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[v-1][0])return l.stops[v-1][1];const S=vl(l.stops.map((j=>j[0])),s),P=(function(j,q,Z,J){const te=J-Z,oe=j-Z;return te===0?0:q===1?oe/te:(Math.pow(q,oe)-1)/(Math.pow(q,te)-1)})(s,f,l.stops[S][0],l.stops[S+1][0]),D=l.stops[S][1],R=l.stops[S+1][1],O=Lo[n.type]||ki;return typeof D.evaluate=="function"?{evaluate(...j){const q=D.evaluate.apply(void 0,j),Z=R.evaluate.apply(void 0,j);if(q!==void 0&&Z!==void 0)return O(q,Z,P,l.colorSpace)}}:O(D,R,P,l.colorSpace)}function kf(l,n,s){switch(n.type){case"color":s=_r.parse(s);break;case"formatted":s=Kn.fromString(s.toString());break;case"resolvedImage":s=Aa.fromString(s.toString());break;case"padding":s=na.parse(s);break;case"colorArray":s=Bn.parse(s);break;case"numberArray":s=wa.parse(s);break;default:gr(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return Oa(s,l.default,n.default)}Ri.register(Cl,{error:[{kind:"error"},[mr],(l,[n])=>{throw new Nr(n.evaluate(l))}],typeof:[mr,[yr],(l,[n])=>qr(er(n.evaluate(l)))],"to-rgba":[xa(Tt,4),[jn],(l,[n])=>{const[s,f,v,S]=n.evaluate(l).rgb;return[255*s,255*f,255*v,S]}],rgb:[jn,[Tt,Tt,Tt],Sh],rgba:[jn,[Tt,Tt,Tt,Tt],Sh],has:{type:cr,overloads:[[[mr],(l,[n])=>Yi(n.evaluate(l),l.properties())],[[mr,mn],(l,[n,s])=>Yi(n.evaluate(l),s.evaluate(l))]]},get:{type:yr,overloads:[[[mr],(l,[n])=>wh(n.evaluate(l),l.properties())],[[mr,mn],(l,[n,s])=>wh(n.evaluate(l),s.evaluate(l))]]},"feature-state":[yr,[mr],(l,[n])=>wh(n.evaluate(l),l.featureState||{})],properties:[mn,[],l=>l.properties()],"geometry-type":[mr,[],l=>l.geometryType()],id:[yr,[],l=>l.id()],zoom:[Tt,[],l=>l.globals.zoom],"heatmap-density":[Tt,[],l=>l.globals.heatmapDensity||0],elevation:[Tt,[],l=>l.globals.elevation||0],"line-progress":[Tt,[],l=>l.globals.lineProgress||0],accumulated:[yr,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[Tt,da(Tt),(l,n)=>{let s=0;for(const f of n)s+=f.evaluate(l);return s}],"*":[Tt,da(Tt),(l,n)=>{let s=1;for(const f of n)s*=f.evaluate(l);return s}],"-":{type:Tt,overloads:[[[Tt,Tt],(l,[n,s])=>n.evaluate(l)-s.evaluate(l)],[[Tt],(l,[n])=>-n.evaluate(l)]]},"/":[Tt,[Tt,Tt],(l,[n,s])=>n.evaluate(l)/s.evaluate(l)],"%":[Tt,[Tt,Tt],(l,[n,s])=>n.evaluate(l)%s.evaluate(l)],ln2:[Tt,[],()=>Math.LN2],pi:[Tt,[],()=>Math.PI],e:[Tt,[],()=>Math.E],"^":[Tt,[Tt,Tt],(l,[n,s])=>Math.pow(n.evaluate(l),s.evaluate(l))],sqrt:[Tt,[Tt],(l,[n])=>Math.sqrt(n.evaluate(l))],log10:[Tt,[Tt],(l,[n])=>Math.log(n.evaluate(l))/Math.LN10],ln:[Tt,[Tt],(l,[n])=>Math.log(n.evaluate(l))],log2:[Tt,[Tt],(l,[n])=>Math.log(n.evaluate(l))/Math.LN2],sin:[Tt,[Tt],(l,[n])=>Math.sin(n.evaluate(l))],cos:[Tt,[Tt],(l,[n])=>Math.cos(n.evaluate(l))],tan:[Tt,[Tt],(l,[n])=>Math.tan(n.evaluate(l))],asin:[Tt,[Tt],(l,[n])=>Math.asin(n.evaluate(l))],acos:[Tt,[Tt],(l,[n])=>Math.acos(n.evaluate(l))],atan:[Tt,[Tt],(l,[n])=>Math.atan(n.evaluate(l))],min:[Tt,da(Tt),(l,n)=>Math.min(...n.map((s=>s.evaluate(l))))],max:[Tt,da(Tt),(l,n)=>Math.max(...n.map((s=>s.evaluate(l))))],abs:[Tt,[Tt],(l,[n])=>Math.abs(n.evaluate(l))],round:[Tt,[Tt],(l,[n])=>{const s=n.evaluate(l);return s<0?-Math.round(-s):Math.round(s)}],floor:[Tt,[Tt],(l,[n])=>Math.floor(n.evaluate(l))],ceil:[Tt,[Tt],(l,[n])=>Math.ceil(n.evaluate(l))],"filter-==":[cr,[mr,yr],(l,[n,s])=>l.properties()[n.value]===s.value],"filter-id-==":[cr,[yr],(l,[n])=>l.id()===n.value],"filter-type-==":[cr,[mr],(l,[n])=>l.geometryType()===n.value],"filter-<":[cr,[mr,yr],(l,[n,s])=>{const f=l.properties()[n.value],v=s.value;return typeof f==typeof v&&f<v}],"filter-id-<":[cr,[yr],(l,[n])=>{const s=l.id(),f=n.value;return typeof s==typeof f&&s<f}],"filter->":[cr,[mr,yr],(l,[n,s])=>{const f=l.properties()[n.value],v=s.value;return typeof f==typeof v&&f>v}],"filter-id->":[cr,[yr],(l,[n])=>{const s=l.id(),f=n.value;return typeof s==typeof f&&s>f}],"filter-<=":[cr,[mr,yr],(l,[n,s])=>{const f=l.properties()[n.value],v=s.value;return typeof f==typeof v&&f<=v}],"filter-id-<=":[cr,[yr],(l,[n])=>{const s=l.id(),f=n.value;return typeof s==typeof f&&s<=f}],"filter->=":[cr,[mr,yr],(l,[n,s])=>{const f=l.properties()[n.value],v=s.value;return typeof f==typeof v&&f>=v}],"filter-id->=":[cr,[yr],(l,[n])=>{const s=l.id(),f=n.value;return typeof s==typeof f&&s>=f}],"filter-has":[cr,[yr],(l,[n])=>n.value in l.properties()],"filter-has-id":[cr,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[cr,[xa(mr)],(l,[n])=>n.value.indexOf(l.geometryType())>=0],"filter-id-in":[cr,[xa(yr)],(l,[n])=>n.value.indexOf(l.id())>=0],"filter-in-small":[cr,[mr,xa(yr)],(l,[n,s])=>s.value.indexOf(l.properties()[n.value])>=0],"filter-in-large":[cr,[mr,xa(yr)],(l,[n,s])=>(function(f,v,S,P){for(;S<=P;){const D=S+P>>1;if(v[D]===f)return!0;v[D]>f?P=D-1:S=D+1}return!1})(l.properties()[n.value],s.value,0,s.value.length-1)],all:{type:cr,overloads:[[[cr,cr],(l,[n,s])=>n.evaluate(l)&&s.evaluate(l)],[da(cr),(l,n)=>{for(const s of n)if(!s.evaluate(l))return!1;return!0}]]},any:{type:cr,overloads:[[[cr,cr],(l,[n,s])=>n.evaluate(l)||s.evaluate(l)],[da(cr),(l,n)=>{for(const s of n)if(s.evaluate(l))return!0;return!1}]]},"!":[cr,[cr],(l,[n])=>!n.evaluate(l)],"is-supported-script":[cr,[mr],(l,[n])=>{const s=l.globals&&l.globals.isSupportedScript;return!s||s(n.evaluate(l))}],upcase:[mr,[mr],(l,[n])=>n.evaluate(l).toUpperCase()],downcase:[mr,[mr],(l,[n])=>n.evaluate(l).toLowerCase()],concat:[mr,da(yr),(l,n)=>n.map((s=>lr(s.evaluate(l)))).join("")],"resolved-locale":[mr,[oc],(l,[n])=>n.evaluate(l).resolvedLocale()]});class Mc{constructor(n,s,f){this.expression=n,this._warningHistory={},this._evaluator=new _f,this._defaultValue=s?(function(v){if(v.type==="color"&&Dc(v.default))return new _r(0,0,0,0);switch(v.type){case"color":return _r.parse(v.default)||null;case"padding":return na.parse(v.default)||null;case"numberArray":return wa.parse(v.default)||null;case"colorArray":return Bn.parse(v.default)||null;case"variableAnchorOffsetCollection":return Pa.parse(v.default)||null;case"projectionDefinition":return Mn.parse(v.default)||null;default:return v.default===void 0?null:v.default}})(s):null,this._enumValues=s&&s.type==="enum"?s.values:null,this._globalState=f}evaluateWithoutErrorHandling(n,s,f,v,S,P){return this._globalState&&(n=Qa(n,this._globalState)),this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=f,this._evaluator.canonical=v,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=P,this.expression.evaluate(this._evaluator)}evaluate(n,s,f,v,S,P){this._globalState&&(n=Qa(n,this._globalState)),this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=f||null,this._evaluator.canonical=v,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=P||null;try{const D=this.expression.evaluate(this._evaluator);if(D==null||typeof D=="number"&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new Nr(`Expected value to be one of ${Object.keys(this._enumValues).map((R=>JSON.stringify(R))).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console<"u"&&console.warn(D.message)),this._defaultValue}}}function as(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in Cl}function Fo(l,n,s){const f=new Os(Cl,Ya,[],n?(function(S){const P={color:jn,string:mr,number:Tt,enum:mr,boolean:cr,formatted:di,padding:Ko,numberArray:cl,colorArray:To,projectionDefinition:Wi,resolvedImage:Dn,variableAnchorOffsetCollection:ph};return S.type==="array"?xa(P[S.value]||yr,S.length):P[S.type]})(n):void 0),v=f.parse(l,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?Cc(new Mc(v,n,s)):js(f.errors)}class qs{constructor(n,s,f){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!Dl(s.expression),this.globalStateRefs=Oi(s.expression),this._globalState=f}evaluateWithoutErrorHandling(n,s,f,v,S,P){return this._globalState&&(n=Qa(n,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(n,s,f,v,S,P)}evaluate(n,s,f,v,S,P){return this._globalState&&(n=Qa(n,this._globalState)),this._styleExpression.evaluate(n,s,f,v,S,P)}}class Cu{constructor(n,s,f,v,S){this.kind=n,this.zoomStops=f,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!Dl(s.expression),this.globalStateRefs=Oi(s.expression),this.interpolationType=v,this._globalState=S}evaluateWithoutErrorHandling(n,s,f,v,S,P){return this._globalState&&(n=Qa(n,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(n,s,f,v,S,P)}evaluate(n,s,f,v,S,P){return this._globalState&&(n=Qa(n,this._globalState)),this._styleExpression.evaluate(n,s,f,v,S,P)}interpolationFactor(n,s,f){return this.interpolationType?Ca.interpolationFactor(this.interpolationType,n,s,f):0}}function Ui(l,n,s){const f=Fo(l,n,s);if(f.result==="error")return f;const v=f.value.expression,S=ns(v);if(!S&&!Ii(n))return js([new Cn("","data expressions not supported")]);const P=Ml(v,["zoom"]);if(!P&&!Rf(n))return js([new Cn("","zoom expressions not supported")]);const D=oo(v);return D||P?D instanceof Cn?js([D]):D instanceof Ca&&!Au(n)?js([new Cn("",'"interpolate" expressions cannot be used with this property')]):Cc(D?new Cu(S?"camera":"composite",f.value,D.labels,D instanceof Ca?D.interpolation:void 0,s):new qs(S?"constant":"source",f.value,s)):js([new Cn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class La{constructor(n,s){this._parameters=n,this._specification=s,Ia(this,Ph(this._parameters,this._specification))}static deserialize(n){return new La(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function oo(l){let n=null;if(l instanceof ml)n=oo(l.result);else if(l instanceof _l){for(const s of l.args)if(n=oo(s),n)break}else(l instanceof kn||l instanceof Ca)&&l.input instanceof Ri&&l.input.name==="zoom"&&(n=l);return n instanceof Cn||l.eachChild((s=>{const f=oo(s);f instanceof Cn?n=f:!n&&f?n=new Cn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&f&&n!==f&&(n=new Cn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n}function Oi(l,n=new Set){return l instanceof Ac&&n.add(l.key),l.eachChild((s=>{Oi(s,n)})),n}function Qa(l,n){const{zoom:s,heatmapDensity:f,elevation:v,lineProgress:S,isSupportedScript:P,accumulated:D}=l??{};return{zoom:s,heatmapDensity:f,elevation:v,lineProgress:S,isSupportedScript:P,accumulated:D,globalState:n}}function so(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const n of l.slice(1))if(!so(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Ch={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function is(l,n){if(l==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};so(l)||(l=yn(l));const s=Fo(l,Ch,n);if(s.result==="error")throw new Error(s.value.map((f=>`${f.key}: ${f.message}`)).join(", "));return{filter:(f,v,S)=>s.value.evaluate(f,v,{},S),needGeometry:aa(l),getGlobalStateRefs:()=>Oi(s.value.expression)}}function Tc(l,n){return l<n?-1:l>n?1:0}function aa(l){if(!Array.isArray(l))return!1;if(l[0]==="within"||l[0]==="distance")return!0;for(let n=1;n<l.length;n++)if(aa(l[n]))return!0;return!1}function yn(l){if(!l)return!0;const n=l[0];return l.length<=1?n!=="any":n==="=="?Fr(l[1],l[2],"=="):n==="!="?Du(Fr(l[1],l[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Fr(l[1],l[2],n):n==="any"?(s=l.slice(1),["any"].concat(s.map(yn))):n==="all"?["all"].concat(l.slice(1).map(yn)):n==="none"?["all"].concat(l.slice(1).map(yn).map(Du)):n==="in"?Hs(l[1],l.slice(2)):n==="!in"?Du(Hs(l[1],l.slice(2))):n==="has"?lo(l[1]):n!=="!has"||Du(lo(l[1]));var s}function Fr(l,n,s){switch(l){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,l,n]}}function Hs(l,n){if(n.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some((s=>typeof s!=typeof n[0]))?["filter-in-large",l,["literal",n.sort(Tc)]]:["filter-in-small",l,["literal",n]]}}function lo(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function Du(l){return["!",l]}function os(l){const n=typeof l;if(n==="number"||n==="boolean"||n==="string"||l==null)return JSON.stringify(l);if(Array.isArray(l)){let v="[";for(const S of l)v+=`${os(S)},`;return`${v}]`}const s=Object.keys(l).sort();let f="{";for(let v=0;v<s.length;v++)f+=`${JSON.stringify(s[v])}:${os(l[s[v]])},`;return`${f}}`}function Uf(l){let n="";for(const s of ir)n+=`/${os(l[s])}`;return n}function Dh(l){const n=l.value;return n?[new vt(l.key,n,"constants have been deprecated as of v8")]:[]}function Gr(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function uo(l){if(Array.isArray(l))return l.map(uo);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const n={};for(const s in l)n[s]=uo(l[s]);return n}return Gr(l)}function mi(l){const n=l.key,s=l.value,f=l.valueSpec||{},v=l.objectElementValidators||{},S=l.style,P=l.styleSpec,D=l.validateSpec;let R=[];const O=gr(s);if(O!=="object")return[new vt(n,s,`object expected, ${O} found`)];for(const j in s){const q=j.split(".")[0],Z=dl(f,q)||f["*"];let J;if(dl(v,q))J=v[q];else if(dl(f,q))J=D;else if(v["*"])J=v["*"];else{if(!f["*"]){R.push(new vt(n,s[j],`unknown property "${j}"`));continue}J=D}R=R.concat(J({key:(n&&`${n}.`)+j,value:s[j],valueSpec:Z,style:S,styleSpec:P,object:s,objectKey:j,validateSpec:D},s))}for(const j in f)v[j]||f[j].required&&f[j].default===void 0&&s[j]===void 0&&R.push(new vt(n,s,`missing required property "${j}"`));return R}function $s(l){const n=l.value,s=l.valueSpec,f=l.style,v=l.styleSpec,S=l.key,P=l.arrayElementValidator||l.validateSpec;if(gr(n)!=="array")return[new vt(S,n,`array expected, ${gr(n)} found`)];if(s.length&&n.length!==s.length)return[new vt(S,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new vt(S,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let D={type:s.value,values:s.values};v.$version<7&&(D.function=s.function),gr(s.value)==="object"&&(D=s.value);let R=[];for(let O=0;O<n.length;O++)R=R.concat(P({array:n,arrayIndex:O,value:n[O],valueSpec:D,validateSpec:l.validateSpec,style:f,styleSpec:v,key:`${S}[${O}]`}));return R}function Mu(l){const n=l.key,s=l.value,f=l.valueSpec;let v=gr(s);return v==="number"&&s!=s&&(v="NaN"),v!=="number"?[new vt(n,s,`number expected, ${v} found`)]:"minimum"in f&&s<f.minimum?[new vt(n,s,`${s} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&s>f.maximum?[new vt(n,s,`${s} is greater than the maximum value ${f.maximum}`)]:[]}function ss(l){const n=l.valueSpec,s=Gr(l.value.type);let f,v,S,P={};const D=s!=="categorical"&&l.value.property===void 0,R=!D,O=gr(l.value.stops)==="array"&&gr(l.value.stops[0])==="array"&&gr(l.value.stops[0][0])==="object",j=mi({key:l.key,value:l.value,valueSpec:l.styleSpec.function,validateSpec:l.validateSpec,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(J){if(s==="identity")return[new vt(J.key,J.value,'identity function may not have a "stops" property')];let te=[];const oe=J.value;return te=te.concat($s({key:J.key,value:oe,valueSpec:J.valueSpec,validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec,arrayElementValidator:q})),gr(oe)==="array"&&oe.length===0&&te.push(new vt(J.key,oe,"array must have at least one stop")),te},default:function(J){return J.validateSpec({key:J.key,value:J.value,valueSpec:n,validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec})}}});return s==="identity"&&D&&j.push(new vt(l.key,l.value,'missing required property "property"')),s==="identity"||l.value.stops||j.push(new vt(l.key,l.value,'missing required property "stops"')),s==="exponential"&&l.valueSpec.expression&&!Au(l.valueSpec)&&j.push(new vt(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(R&&!Ii(l.valueSpec)?j.push(new vt(l.key,l.value,"property functions not supported")):D&&!Rf(l.valueSpec)&&j.push(new vt(l.key,l.value,"zoom functions not supported"))),s!=="categorical"&&!O||l.value.property!==void 0||j.push(new vt(l.key,l.value,'"property" property is required')),j;function q(J){let te=[];const oe=J.value,ue=J.key;if(gr(oe)!=="array")return[new vt(ue,oe,`array expected, ${gr(oe)} found`)];if(oe.length!==2)return[new vt(ue,oe,`array length 2 expected, length ${oe.length} found`)];if(O){if(gr(oe[0])!=="object")return[new vt(ue,oe,`object expected, ${gr(oe[0])} found`)];if(oe[0].zoom===void 0)return[new vt(ue,oe,"object stop key must have zoom")];if(oe[0].value===void 0)return[new vt(ue,oe,"object stop key must have value")];if(S&&S>Gr(oe[0].zoom))return[new vt(ue,oe[0].zoom,"stop zoom values must appear in ascending order")];Gr(oe[0].zoom)!==S&&(S=Gr(oe[0].zoom),v=void 0,P={}),te=te.concat(mi({key:`${ue}[0]`,value:oe[0],valueSpec:{zoom:{}},validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec,objectElementValidators:{zoom:Mu,value:Z}}))}else te=te.concat(Z({key:`${ue}[0]`,value:oe[0],validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec},oe));return as(uo(oe[1]))?te.concat([new vt(`${ue}[1]`,oe[1],"expressions are not allowed in function stops.")]):te.concat(J.validateSpec({key:`${ue}[1]`,value:oe[1],valueSpec:n,validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec}))}function Z(J,te){const oe=gr(J.value),ue=Gr(J.value),pe=J.value!==null?J.value:te;if(f){if(oe!==f)return[new vt(J.key,pe,`${oe} stop domain type must match previous stop domain type ${f}`)]}else f=oe;if(oe!=="number"&&oe!=="string"&&oe!=="boolean")return[new vt(J.key,pe,"stop domain value must be a number, string, or boolean")];if(oe!=="number"&&s!=="categorical"){let Le=`number expected, ${oe} found`;return Ii(n)&&s===void 0&&(Le+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new vt(J.key,pe,Le)]}return s!=="categorical"||oe!=="number"||isFinite(ue)&&Math.floor(ue)===ue?s!=="categorical"&&oe==="number"&&v!==void 0&&ue<v?[new vt(J.key,pe,"stop domain values must appear in ascending order")]:(v=ue,s==="categorical"&&ue in P?[new vt(J.key,pe,"stop domain values must be unique")]:(P[ue]=!0,[])):[new vt(J.key,pe,`integer expected, found ${ue}`)]}}function Xa(l){const n=(l.expressionContext==="property"?Ui:Fo)(uo(l.value),l.valueSpec);if(n.result==="error")return n.value.map((f=>new vt(`${l.key}${f.key}`,l.value,f.message)));const s=n.value.expression||n.value._styleExpression.expression;if(l.expressionContext==="property"&&l.propertyKey==="text-font"&&!s.outputDefined())return[new vt(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if(l.expressionContext==="property"&&l.propertyType==="layout"&&!Dl(s))return[new vt(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if(l.expressionContext==="filter"&&!Dl(s))return[new vt(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&l.expressionContext.indexOf("cluster")===0){if(!Ml(s,["zoom","feature-state"]))return[new vt(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(l.expressionContext==="cluster-initial"&&!ns(s))return[new vt(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function yi(l){const n=l.key,s=l.value,f=gr(s);return f!=="string"?[new vt(n,s,`color expected, ${f} found`)]:_r.parse(String(s))?[]:[new vt(n,s,`color expected, "${s}" found`)]}function Li(l){const n=l.key,s=l.value,f=l.valueSpec,v=[];return Array.isArray(f.values)?f.values.indexOf(Gr(s))===-1&&v.push(new vt(n,s,`expected one of [${f.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(f.values).indexOf(Gr(s))===-1&&v.push(new vt(n,s,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(s)} found`)),v}function Ec(l){return so(uo(l.value))?Xa(Ia({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Mh(l)}function Mh(l){const n=l.value,s=l.key;if(gr(n)!=="array")return[new vt(s,n,`array expected, ${gr(n)} found`)];const f=l.styleSpec;let v,S=[];if(n.length<1)return[new vt(s,n,"filter array must have at least 1 element")];switch(S=S.concat(Li({key:`${s}[0]`,value:n[0],valueSpec:f.filter_operator,style:l.style,styleSpec:l.styleSpec})),Gr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Gr(n[1])==="$type"&&S.push(new vt(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&S.push(new vt(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(v=gr(n[1]),v!=="string"&&S.push(new vt(`${s}[1]`,n[1],`string expected, ${v} found`)));for(let P=2;P<n.length;P++)v=gr(n[P]),Gr(n[1])==="$type"?S=S.concat(Li({key:`${s}[${P}]`,value:n[P],valueSpec:f.geometry_type,style:l.style,styleSpec:l.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&S.push(new vt(`${s}[${P}]`,n[P],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let P=1;P<n.length;P++)S=S.concat(Mh({key:`${s}[${P}]`,value:n[P],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":v=gr(n[1]),n.length!==2?S.push(new vt(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):v!=="string"&&S.push(new vt(`${s}[1]`,n[1],`string expected, ${v} found`))}return S}function Tu(l,n){const s=l.key,f=l.validateSpec,v=l.style,S=l.styleSpec,P=l.value,D=l.objectKey,R=S[`${n}_${l.layerType}`];if(!R)return[];const O=D.match(/^(.*)-transition$/);if(n==="paint"&&O&&R[O[1]]&&R[O[1]].transition)return f({key:s,value:P,valueSpec:S.transition,style:v,styleSpec:S});const j=l.valueSpec||R[D];if(!j)return[new vt(s,P,`unknown property "${D}"`)];let q;if(gr(P)==="string"&&Ii(j)&&!j.tokens&&(q=/^{([^}]+)}$/.exec(P)))return[new vt(s,P,`"${D}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(q[1])} }\`.`)];const Z=[];return l.layerType==="symbol"&&(D==="text-field"&&v&&!v.glyphs&&Z.push(new vt(s,P,'use of "text-field" requires a style "glyphs" property')),D==="text-font"&&Dc(uo(P))&&Gr(P.type)==="identity"&&Z.push(new vt(s,P,'"text-font" does not support identity functions'))),Z.concat(f({key:l.key,value:P,valueSpec:j,style:v,styleSpec:S,expressionContext:"property",propertyType:n,propertyKey:D}))}function Rc(l){return Tu(l,"paint")}function Vs(l){return Tu(l,"layout")}function qn(l){let n=[];const s=l.value,f=l.key,v=l.style,S=l.styleSpec;if(gr(s)!=="object")return[new vt(f,s,`object expected, ${gr(s)} found`)];s.type||s.ref||n.push(new vt(f,s,'either "type" or "ref" is required'));let P=Gr(s.type);const D=Gr(s.ref);if(s.id){const R=Gr(s.id);for(let O=0;O<l.arrayIndex;O++){const j=v.layers[O];Gr(j.id)===R&&n.push(new vt(f,s.id,`duplicate layer id "${s.id}", previously used at line ${j.id.__line__}`))}}if("ref"in s){let R;["type","source","source-layer","filter","layout"].forEach((O=>{O in s&&n.push(new vt(f,s[O],`"${O}" is prohibited for ref layers`))})),v.layers.forEach((O=>{Gr(O.id)===D&&(R=O)})),R?R.ref?n.push(new vt(f,s.ref,"ref cannot reference another ref layer")):P=Gr(R.type):n.push(new vt(f,s.ref,`ref layer "${D}" not found`))}else if(P!=="background")if(s.source){const R=v.sources&&v.sources[s.source],O=R&&Gr(R.type);R?O==="vector"&&P==="raster"?n.push(new vt(f,s.source,`layer "${s.id}" requires a raster source`)):O!=="raster-dem"&&P==="hillshade"||O!=="raster-dem"&&P==="color-relief"?n.push(new vt(f,s.source,`layer "${s.id}" requires a raster-dem source`)):O==="raster"&&P!=="raster"?n.push(new vt(f,s.source,`layer "${s.id}" requires a vector source`)):O!=="vector"||s["source-layer"]?O==="raster-dem"&&P!=="hillshade"&&P!=="color-relief"?n.push(new vt(f,s.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):P!=="line"||!s.paint||!s.paint["line-gradient"]||O==="geojson"&&R.lineMetrics||n.push(new vt(f,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new vt(f,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new vt(f,s.source,`source "${s.source}" not found`))}else n.push(new vt(f,s,'missing required property "source"'));return n=n.concat(mi({key:f,value:s,valueSpec:S.layer,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*":()=>[],type:()=>l.validateSpec({key:`${f}.type`,value:s.type,valueSpec:S.layer.type,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,object:s,objectKey:"type"}),filter:Ec,layout:R=>mi({layer:s,key:R.key,value:R.value,style:R.style,styleSpec:R.styleSpec,validateSpec:R.validateSpec,objectElementValidators:{"*":O=>Vs(Ia({layerType:P},O))}}),paint:R=>mi({layer:s,key:R.key,value:R.value,style:R.style,styleSpec:R.styleSpec,validateSpec:R.validateSpec,objectElementValidators:{"*":O=>Rc(Ia({layerType:P},O))}})}})),n}function gi(l){const n=l.value,s=l.key,f=gr(n);return f!=="string"?[new vt(s,n,`string expected, ${f} found`)]:[]}const Ka={promoteId:function({key:l,value:n}){if(gr(n)==="string")return gi({key:l,value:n});{const s=[];for(const f in n)s.push(...gi({key:`${l}.${f}`,value:n[f]}));return s}}};function Eu(l){const n=l.value,s=l.key,f=l.styleSpec,v=l.style,S=l.validateSpec;if(!n.type)return[new vt(s,n,'"type" is required')];const P=Gr(n.type);let D;switch(P){case"vector":case"raster":return D=mi({key:s,value:n,valueSpec:f[`source_${P.replace("-","_")}`],style:l.style,styleSpec:f,objectElementValidators:Ka,validateSpec:S}),D;case"raster-dem":return D=(function(R){var O;const j=(O=R.sourceName)!==null&&O!==void 0?O:"",q=R.value,Z=R.styleSpec,J=Z.source_raster_dem,te=R.style;let oe=[];const ue=gr(q);if(q===void 0)return oe;if(ue!=="object")return oe.push(new vt("source_raster_dem",q,`object expected, ${ue} found`)),oe;const pe=Gr(q.encoding)==="custom",Le=["redFactor","greenFactor","blueFactor","baseShift"],Se=R.value.encoding?`"${R.value.encoding}"`:"Default";for(const De in q)!pe&&Le.includes(De)?oe.push(new vt(De,q[De],`In "${j}": "${De}" is only valid when "encoding" is set to "custom". ${Se} encoding found`)):J[De]?oe=oe.concat(R.validateSpec({key:De,value:q[De],valueSpec:J[De],validateSpec:R.validateSpec,style:te,styleSpec:Z})):oe.push(new vt(De,q[De],`unknown property "${De}"`));return oe})({sourceName:s,value:n,style:l.style,styleSpec:f,validateSpec:S}),D;case"geojson":if(D=mi({key:s,value:n,valueSpec:f.source_geojson,style:v,styleSpec:f,validateSpec:S,objectElementValidators:Ka}),n.cluster)for(const R in n.clusterProperties){const[O,j]=n.clusterProperties[R],q=typeof O=="string"?[O,["accumulated"],["get",R]]:O;D.push(...Xa({key:`${s}.${R}.map`,value:j,expressionContext:"cluster-map"})),D.push(...Xa({key:`${s}.${R}.reduce`,value:q,expressionContext:"cluster-reduce"}))}return D;case"video":return mi({key:s,value:n,valueSpec:f.source_video,style:v,validateSpec:S,styleSpec:f});case"image":return mi({key:s,value:n,valueSpec:f.source_image,style:v,validateSpec:S,styleSpec:f});case"canvas":return[new vt(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Li({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Of(l){const n=l.value,s=l.styleSpec,f=s.light,v=l.style;let S=[];const P=gr(n);if(n===void 0)return S;if(P!=="object")return S=S.concat([new vt("light",n,`object expected, ${P} found`)]),S;for(const D in n){const R=D.match(/^(.*)-transition$/);S=S.concat(R&&f[R[1]]&&f[R[1]].transition?l.validateSpec({key:D,value:n[D],valueSpec:s.transition,validateSpec:l.validateSpec,style:v,styleSpec:s}):f[D]?l.validateSpec({key:D,value:n[D],valueSpec:f[D],validateSpec:l.validateSpec,style:v,styleSpec:s}):[new vt(D,n[D],`unknown property "${D}"`)])}return S}function ap(l){const n=l.value,s=l.styleSpec,f=s.sky,v=l.style,S=gr(n);if(n===void 0)return[];if(S!=="object")return[new vt("sky",n,`object expected, ${S} found`)];let P=[];for(const D in n)P=P.concat(f[D]?l.validateSpec({key:D,value:n[D],valueSpec:f[D],style:v,styleSpec:s}):[new vt(D,n[D],`unknown property "${D}"`)]);return P}function Jn(l){const n=l.value,s=l.styleSpec,f=s.terrain,v=l.style;let S=[];const P=gr(n);if(n===void 0)return S;if(P!=="object")return S=S.concat([new vt("terrain",n,`object expected, ${P} found`)]),S;for(const D in n)S=S.concat(f[D]?l.validateSpec({key:D,value:n[D],valueSpec:f[D],validateSpec:l.validateSpec,style:v,styleSpec:s}):[new vt(D,n[D],`unknown property "${D}"`)]);return S}function Gs(l){let n=[];const s=l.value,f=l.key;if(Array.isArray(s)){const v=[],S=[];for(const P in s)s[P].id&&v.includes(s[P].id)&&n.push(new vt(f,s,`all the sprites' ids must be unique, but ${s[P].id} is duplicated`)),v.push(s[P].id),s[P].url&&S.includes(s[P].url)&&n.push(new vt(f,s,`all the sprites' URLs must be unique, but ${s[P].url} is duplicated`)),S.push(s[P].url),n=n.concat(mi({key:`${f}[${P}]`,value:s[P],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:l.validateSpec}));return n}return gi({key:f,value:s})}function Tl(l){return n=l.value,n&&n.constructor===Object?[]:[new vt(l.key,l.value,`object expected, ${gr(l.value)} found`)];var n}const Ws={"*":()=>[],array:$s,boolean:function(l){const n=l.value,s=l.key,f=gr(n);return f!=="boolean"?[new vt(s,n,`boolean expected, ${f} found`)]:[]},number:Mu,color:yi,constants:Dh,enum:Li,filter:Ec,function:ss,layer:qn,object:mi,source:Eu,light:Of,sky:ap,terrain:Jn,projection:function(l){const n=l.value,s=l.styleSpec,f=s.projection,v=l.style,S=gr(n);if(n===void 0)return[];if(S!=="object")return[new vt("projection",n,`object expected, ${S} found`)];let P=[];for(const D in n)P=P.concat(f[D]?l.validateSpec({key:D,value:n[D],valueSpec:f[D],style:v,styleSpec:s}):[new vt(D,n[D],`unknown property "${D}"`)]);return P},projectionDefinition:function(l){const n=l.key;let s=l.value;s=s instanceof String?s.valueOf():s;const f=gr(s);return f!=="array"||(function(v){return Array.isArray(v)&&v.length===3&&typeof v[0]=="string"&&typeof v[1]=="string"&&typeof v[2]=="number"})(s)||(function(v){return!!["interpolate","step","literal"].includes(v[0])})(s)?["array","string"].includes(f)?[]:[new vt(n,s,`projection expected, invalid type "${f}" found`)]:[new vt(n,s,`projection expected, invalid array ${JSON.stringify(s)} found`)]},string:gi,formatted:function(l){return gi(l).length===0?[]:Xa(l)},resolvedImage:function(l){return gi(l).length===0?[]:Xa(l)},padding:function(l){const n=l.key,s=l.value;if(gr(s)==="array"){if(s.length<1||s.length>4)return[new vt(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const f={type:"number"};let v=[];for(let S=0;S<s.length;S++)v=v.concat(l.validateSpec({key:`${n}[${S}]`,value:s[S],validateSpec:l.validateSpec,valueSpec:f}));return v}return Mu({key:n,value:s,valueSpec:{}})},numberArray:function(l){const n=l.key,s=l.value;if(gr(s)==="array"){const f={type:"number"};if(s.length<1)return[new vt(n,s,"array length at least 1 expected, length 0 found")];let v=[];for(let S=0;S<s.length;S++)v=v.concat(l.validateSpec({key:`${n}[${S}]`,value:s[S],validateSpec:l.validateSpec,valueSpec:f}));return v}return Mu({key:n,value:s,valueSpec:{}})},colorArray:function(l){const n=l.key,s=l.value;if(gr(s)==="array"){if(s.length<1)return[new vt(n,s,"array length at least 1 expected, length 0 found")];let f=[];for(let v=0;v<s.length;v++)f=f.concat(yi({key:`${n}[${v}]`,value:s[v]}));return f}return yi({key:n,value:s})},variableAnchorOffsetCollection:function(l){const n=l.key,s=l.value,f=gr(s),v=l.styleSpec;if(f!=="array"||s.length<1||s.length%2!=0)return[new vt(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let S=[];for(let P=0;P<s.length;P+=2)S=S.concat(Li({key:`${n}[${P}]`,value:s[P],valueSpec:v.layout_symbol["text-anchor"]})),S=S.concat($s({key:`${n}[${P+1}]`,value:s[P+1],valueSpec:{length:2,value:"number"},validateSpec:l.validateSpec,style:l.style,styleSpec:v}));return S},sprite:Gs,state:Tl};function Ru(l){const n=l.value,s=l.valueSpec,f=l.styleSpec;return l.validateSpec=Ru,s.expression&&Dc(Gr(n))?ss(l):s.expression&&as(uo(n))?Xa(l):s.type&&Ws[s.type]?Ws[s.type](l):mi(Ia({},l,{valueSpec:s.type?f[s.type]:s}))}function ls(l){const n=l.value,s=l.key,f=gi(l);return f.length||(n.indexOf("{fontstack}")===-1&&f.push(new vt(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&f.push(new vt(s,n,'"glyphs" url must include a "{range}" token'))),f}function Da(l,n=Oe){let s=[];return s=s.concat(Ru({key:"",value:l,valueSpec:n.$root,styleSpec:n,style:l,validateSpec:Ru,objectElementValidators:{glyphs:ls,"*":()=>[]}})),l.constants&&(s=s.concat(Dh({key:"constants",value:l.constants}))),Lf(s)}function Ja(l){return function(n){return l({...n,validateSpec:Ru})}}function Lf(l){return[].concat(l).sort(((n,s)=>n.line-s.line))}function co(l){return function(...n){return Lf(l.apply(this,n))}}Da.source=co(Ja(Eu)),Da.sprite=co(Ja(Gs)),Da.glyphs=co(Ja(ls)),Da.light=co(Ja(Of)),Da.sky=co(Ja(ap)),Da.terrain=co(Ja(Jn)),Da.state=co(Ja(Tl)),Da.layer=co(Ja(qn)),Da.filter=co(Ja(Ec)),Da.paintProperty=co(Ja(Rc)),Da.layoutProperty=co(Ja(Vs));const El=Da,ho=El.light,zf=El.sky,Th=El.paintProperty,Ic=El.layoutProperty;function Iu(l,n){let s=!1;if(n&&n.length)for(const f of n)l.fire(new it(new Error(f.message))),s=!0;return s}class Zs{constructor(n,s,f){const v=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const P=new Int32Array(this.arrayBuffer);n=P[0],this.d=(s=P[1])+2*(f=P[2]);for(let R=0;R<this.d*this.d;R++){const O=P[3+R],j=P[3+R+1];v.push(O===j?null:P.subarray(O,j))}const D=P[3+v.length+1];this.keys=P.subarray(P[3+v.length],D),this.bboxes=P.subarray(D),this.insert=this._insertReadonly}else{this.d=s+2*f;for(let P=0;P<this.d*this.d;P++)v.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=f,this.scale=s/n,this.uid=0;const S=f/s*n;this.min=-S,this.max=n+S}insert(n,s,f,v,S){this._forEachCell(s,f,v,S,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(S)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,f,v,S,P){this.cells[S].push(P)}query(n,s,f,v,S){const P=this.min,D=this.max;if(n<=P&&s<=P&&D<=f&&D<=v&&!S)return Array.prototype.slice.call(this.keys);{const R=[];return this._forEachCell(n,s,f,v,this._queryCell,R,{},S),R}}_queryCell(n,s,f,v,S,P,D,R){const O=this.cells[S];if(O!==null){const j=this.keys,q=this.bboxes;for(let Z=0;Z<O.length;Z++){const J=O[Z];if(D[J]===void 0){const te=4*J;(R?R(q[te+0],q[te+1],q[te+2],q[te+3]):n<=q[te+2]&&s<=q[te+3]&&f>=q[te+0]&&v>=q[te+1])?(D[J]=!0,P.push(j[J])):D[J]=!1}}}}_forEachCell(n,s,f,v,S,P,D,R){const O=this._convertToCellCoord(n),j=this._convertToCellCoord(s),q=this._convertToCellCoord(f),Z=this._convertToCellCoord(v);for(let J=O;J<=q;J++)for(let te=j;te<=Z;te++){const oe=this.d*te+J;if((!R||R(this._convertFromCellCoord(J),this._convertFromCellCoord(te),this._convertFromCellCoord(J+1),this._convertFromCellCoord(te+1)))&&S.call(this,n,s,f,v,oe,P,D,R))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let f=0;for(let P=0;P<this.cells.length;P++)f+=this.cells[P].length;const v=new Int32Array(s+f+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;let S=s;for(let P=0;P<n.length;P++){const D=n[P];v[3+P]=S,v.set(D,S),S+=D.length}return v[3+n.length]=S,v.set(this.keys,S),S+=this.keys.length,v[3+n.length+1]=S,v.set(this.bboxes,S),S+=this.bboxes.length,v.buffer}static serialize(n,s){const f=n.toArrayBuffer();return s&&s.push(f),{buffer:f}}static deserialize(n){return new Zs(n.buffer)}}const ei={};function Rt(l,n,s={}){if(ei[l])throw new Error(`${l} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:l,writeable:!1}),ei[l]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}Rt("Object",Object),Rt("Set",Set),Rt("TransferableGridIndex",Zs),Rt("Color",_r),Rt("Error",Error),Rt("AJAXError",be),Rt("ResolvedImage",Aa),Rt("StylePropertyFunction",La),Rt("StyleExpression",Mc,{omit:["_evaluator"]}),Rt("ZoomDependentExpression",Cu),Rt("ZoomConstantExpression",qs),Rt("CompoundExpression",Ri,{omit:["_evaluate"]});for(const l in Cl)Cl[l]._classRegistryKey||Rt(`Expression_${l}`,Cl[l]);function Eh(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function Rl(l){return l.$name||l.constructor._classRegistryKey}function Rh(l){return!(function(n){if(n===null||typeof n!="object")return!1;const s=Rl(n);return!(!s||s==="Object")})(l)&&(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||l instanceof Error||Eh(l)||Nn(l)||ArrayBuffer.isView(l)||l instanceof ImageData)}function fo(l,n){if(Rh(l))return(Eh(l)||Nn(l))&&n&&n.push(l),ArrayBuffer.isView(l)&&n&&n.push(l.buffer),l instanceof ImageData&&n&&n.push(l.data.buffer),l;if(Array.isArray(l)){const S=[];for(const P of l)S.push(fo(P,n));return S}if(typeof l!="object")throw new Error("can't serialize object of type "+typeof l);const s=Rl(l);if(!s)throw new Error(`can't serialize object of unregistered class ${l.constructor.name}`);if(!ei[s])throw new Error(`${s} is not registered.`);const{klass:f}=ei[s],v=f.serialize?f.serialize(l,n):{};if(f.serialize){if(n&&v===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const S in l){if(!l.hasOwnProperty(S)||ei[s].omit.indexOf(S)>=0)continue;const P=l[S];v[S]=ei[s].shallow.indexOf(S)>=0?P:fo(P,n)}l instanceof Error&&(v.message=l.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(v.$name=s),v}function Il(l){if(Rh(l))return l;if(Array.isArray(l))return l.map(Il);if(typeof l!="object")throw new Error("can't deserialize object of type "+typeof l);const n=Rl(l)||"Object";if(!ei[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=ei[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(l);const f=Object.create(s.prototype);for(const v of Object.keys(l)){if(v==="$name")continue;const S=l[v];f[v]=ei[n].shallow.indexOf(v)>=0?S:Il(S)}return f}class Ih{constructor(){this.first=!0}update(n,s){const f=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=f,!0))}}const fr={"Latin-1 Supplement":l=>l>=128&&l<=255,"Hangul Jamo":l=>l>=4352&&l<=4607,Khmer:l=>l>=6016&&l<=6143,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Hiragana:l=>l>=12352&&l<=12447,Katakana:l=>l>=12448&&l<=12543,Kanbun:l=>l>=12688&&l<=12703,"CJK Strokes":l=>l>=12736&&l<=12783,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"CJK Unified Ideographs":l=>l>=19968&&l<=40959,"Hangul Syllables":l=>l>=44032&&l<=55215,"Private Use Area":l=>l>=57344&&l<=63743,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519};function kc(l){for(const n of l)if(Uc(n.charCodeAt(0)))return!0;return!1}function kh(l){for(const n of l)if(!ku(n.charCodeAt(0)))return!1;return!0}function No(l){const n=l.map((s=>{try{return new RegExp(`\\p{sc=${s}}`,"u").source}catch{return null}})).filter((s=>s));return new RegExp(n.join("|"),"u")}const us=No(["Arab","Dupl","Mong","Ougr","Syrc"]);function ku(l){return!us.test(String.fromCodePoint(l))}const Uh=No(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Uc(l){return!(l!==746&&l!==747&&(l<4352||!(fr["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||fr["CJK Compatibility"](l)||fr["CJK Strokes"](l)||!(!fr["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||l===12336)||fr["Enclosed CJK Letters and Months"](l)||fr["Ideographic Description Characters"](l)||fr.Kanbun(l)||fr.Katakana(l)&&l!==12540||!(!fr["Halfwidth and Fullwidth Forms"](l)||l===65288||l===65289||l===65293||l>=65306&&l<=65310||l===65339||l===65341||l===65343||l>=65371&&l<=65503||l===65507||l>=65512&&l<=65519)||!(!fr["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||fr["Vertical Forms"](l)||fr["Yijing Hexagram Symbols"](l)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(l))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(l))||Uh.test(String.fromCodePoint(l)))))}function kl(l){return!(Uc(l)||(function(n){return!!(fr["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||fr["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||fr["Letterlike Symbols"](n)||fr["Number Forms"](n)||fr["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||fr["Control Pictures"](n)&&n!==9251||fr["Optical Character Recognition"](n)||fr["Enclosed Alphanumerics"](n)||fr["Geometric Shapes"](n)||fr["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||fr["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||fr["CJK Symbols and Punctuation"](n)||fr.Katakana(n)||fr["Private Use Area"](n)||fr["CJK Compatibility Forms"](n)||fr["Small Form Variants"](n)||fr["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)})(l))}const Uu=No(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Oh(l){return Uu.test(String.fromCodePoint(l))}function Ff(l,n){return!(!n&&Oh(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||fr.Khmer(l))}function cs(l){for(const n of l)if(Oh(n.charCodeAt(0)))return!0;return!1}const po=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(l){this.pluginStatus=l.pluginStatus,this.pluginURL=l.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(l){if(po.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=l.applyArabicShaping,this.processBidirectionalText=l.processBidirectionalText,this.processStyledBidirectionalText=l.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(l,n){return c(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(l.pluginStatus!=="loading")return this.setState(l),l;const s=l.pluginURL,f=new Promise((S=>{this.loadScriptResolve=S}));n(s);const v=new Promise((S=>setTimeout((()=>S()),this.TIMEOUT)));if(yield Promise.race([f,v]),this.isParsed()){const S={pluginStatus:"loaded",pluginURL:s};return this.setState(S),S}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${s}`)}))}};class Hr{constructor(n,s){this.isSupportedScript=Nf,this.zoom=n,s?(this.now=s.now||0,this.fadeDuration=s.fadeDuration||0,this.zoomHistory=s.zoomHistory||new Ih,this.transition=s.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ih,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),f=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*s}}}function Nf(l){return(function(n,s){for(const f of n)if(!Ff(f.charCodeAt(0),s))return!1;return!0})(l,po.getRTLTextPluginStatus()==="loaded")}class Ou{constructor(n,s,f){this.property=n,this.value=s,this.expression=(function(v,S,P){if(Dc(v))return new La(v,S);if(as(v)){const D=Ui(v,S,P);if(D.result==="error")throw new Error(D.value.map((R=>`${R.key}: ${R.message}`)).join(", "));return D.value}{let D=v;return S.type==="color"&&typeof v=="string"?D=_r.parse(v):S.type!=="padding"||typeof v!="number"&&!Array.isArray(v)?S.type!=="numberArray"||typeof v!="number"&&!Array.isArray(v)?S.type!=="colorArray"||typeof v!="string"&&!Array.isArray(v)?S.type==="variableAnchorOffsetCollection"&&Array.isArray(v)?D=Pa.parse(v):S.type==="projectionDefinition"&&typeof v=="string"&&(D=Mn.parse(v)):D=Bn.parse(v):D=wa.parse(v):D=na.parse(v),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>D}}})(s===void 0?n.specification.default:s,n.specification,f)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(n,s,f){return this.property.possiblyEvaluate(this,n,s,f)}}class mo{constructor(n,s){this.property=n,this.value=new Ou(n,void 0,s)}transitioned(n,s){return new $r(this.property,this.value,s,Jt({},n.transition,this.transition),n.now)}untransitioned(){return new $r(this.property,this.value,null,{},0)}}class wr{constructor(n,s){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues),this._globalState=s}getValue(n){return $e(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new mo(this._values[n].property,this._globalState)),this._values[n].value=new Ou(this._values[n].property,s===null?void 0:$e(s),this._globalState)}getTransition(n){return $e(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new mo(this._values[n].property,this._globalState)),this._values[n].transition=$e(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const f=this.getValue(s);f!==void 0&&(n[s]=f);const v=this.getTransition(s);v!==void 0&&(n[`${s}-transition`]=v)}return n}transitioned(n,s){const f=new Hn(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].transitioned(n,s._values[v]);return f}untransitioned(){const n=new Hn(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class $r{constructor(n,s,f,v,S){this.property=n,this.value=s,this.begin=S+v.delay||0,this.end=this.begin+v.duration||0,n.specification.transition&&(v.delay||v.duration)&&(this.prior=f)}possiblyEvaluate(n,s,f){const v=n.now||0,S=this.value.possiblyEvaluate(n,s,f),P=this.prior;if(P){if(v>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(v<this.begin)return P.possiblyEvaluate(n,s,f);{const D=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(P.possiblyEvaluate(n,s,f),S,gt(D))}}return S}}class Hn{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,f){const v=new jo(this._properties);for(const S of Object.keys(this._values))v._values[S]=this._values[S].possiblyEvaluate(n,s,f);return v}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Lh{constructor(n,s){this._properties=n,this._values=Object.create(n.defaultPropertyValues),this._globalState=s}hasValue(n){return this._values[n].value!==void 0}getValue(n){return $e(this._values[n].value)}setValue(n,s){this._values[n]=new Ou(this._values[n].property,s===null?void 0:$e(s),this._globalState)}serialize(){const n={};for(const s of Object.keys(this._values)){const f=this.getValue(s);f!==void 0&&(n[s]=f)}return n}possiblyEvaluate(n,s,f){const v=new jo(this._properties);for(const S of Object.keys(this._values))v._values[S]=this._values[S].possiblyEvaluate(n,s,f);return v}}class ti{constructor(n,s,f){this.property=n,this.value=s,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,f,v){return this.property.evaluate(this.value,this.parameters,n,s,f,v)}}class jo{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Lt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,f){const v=Lo[this.specification.type];return v?v(n,s,f):n}}class Vt{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,f,v){return new ti(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},f,v)}:n.expression,s)}interpolate(n,s,f){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new ti(this,{kind:"constant",value:void 0},n.parameters);const v=Lo[this.specification.type];if(v){const S=v(n.value.value,s.value.value,f);return new ti(this,{kind:"constant",value:S},n.parameters)}return n}evaluate(n,s,f,v,S,P){return n.kind==="constant"?n.value:n.evaluate(s,f,v,S,P)}}class hs extends Vt{possiblyEvaluate(n,s,f,v){if(n.value===void 0)return new ti(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const S=n.expression.evaluate(s,null,{},f,v),P=n.property.specification.type==="resolvedImage"&&typeof S!="string"?S.name:S,D=this._calculate(P,P,P,s);return new ti(this,{kind:"constant",value:D},s)}if(n.expression.kind==="camera"){const S=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new ti(this,{kind:"constant",value:S},s)}return new ti(this,n.expression,s)}evaluate(n,s,f,v,S,P){if(n.kind==="source"){const D=n.evaluate(s,f,v,S,P);return this._calculate(D,D,D,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},f,v),n.evaluate({zoom:Math.floor(s.zoom)},f,v),n.evaluate({zoom:Math.floor(s.zoom)+1},f,v),s):n.value}_calculate(n,s,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:f,to:s}}interpolate(n){return n}}class jf{constructor(n){this.specification=n}possiblyEvaluate(n,s,f,v){if(n.value!==void 0){if(n.expression.kind==="constant"){const S=n.expression.evaluate(s,null,{},f,v);return this._calculate(S,S,S,s)}return this._calculate(n.expression.evaluate(new Hr(Math.floor(s.zoom-1),s)),n.expression.evaluate(new Hr(Math.floor(s.zoom),s)),n.expression.evaluate(new Hr(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:f,to:s}}interpolate(n){return n}}class xn{constructor(n){this.specification=n}possiblyEvaluate(n,s,f,v){return!!n.expression.evaluate(s,null,{},f,v)}interpolate(){return!1}}class pa{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const f=n[s];f.specification.overridable&&this.overridableProperties.push(s);const v=this.defaultPropertyValues[s]=new Ou(f,void 0,void 0),S=this.defaultTransitionablePropertyValues[s]=new mo(f,void 0);this.defaultTransitioningPropertyValues[s]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=v.possiblyEvaluate({})}}}Rt("DataDrivenProperty",Vt),Rt("DataConstantProperty",Lt),Rt("CrossFadedDataDrivenProperty",hs),Rt("CrossFadedProperty",jf),Rt("ColorRampProperty",xn);const zh="-transition";class Qi extends kt{constructor(n,s,f){if(super(),this.id=n.id,this.type=n.type,this._globalState=f,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter,this._featureFilter=is(n.filter,f)),s.layout&&(this._unevaluatedLayout=new Lh(s.layout,f)),s.paint)){this._transitionablePaint=new wr(s.paint,f);for(const v in n.paint)this.setPaintProperty(v,n.paint[v],{validate:!1});for(const v in n.layout)this.setLayoutProperty(v,n.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new jo(s.paint)}}setFilter(n){this.filter=n,this._featureFilter=is(n,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}getLayoutAffectingGlobalStateRefs(){const n=new Set;if(this._unevaluatedLayout)for(const s in this._unevaluatedLayout._values){const f=this._unevaluatedLayout._values[s];for(const v of f.getGlobalStateRefs())n.add(v)}for(const s of this._featureFilter.getGlobalStateRefs())n.add(s);return n}getPaintAffectingGlobalStateRefs(){var n;const s=new globalThis.Map;if(this._transitionablePaint)for(const f in this._transitionablePaint._values){const v=this._transitionablePaint._values[f].value;for(const S of v.getGlobalStateRefs()){const P=(n=s.get(S))!==null&&n!==void 0?n:[];P.push({name:f,value:v.value}),s.set(S,P)}}return s}setLayoutProperty(n,s,f={}){s!=null&&this._validate(Ic,`layers.${this.id}.layout.${n}`,n,s,f)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(zh)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,f={}){if(s!=null&&this._validate(Th,`layers.${this.id}.paint.${n}`,n,s,f))return!1;if(n.endsWith(zh))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const v=this._transitionablePaint._values[n],S=v.property.specification["property-type"]==="cross-faded-data-driven",P=v.value.isDataDriven(),D=v.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const R=this._transitionablePaint._values[n].value;return R.isDataDriven()||P||S||this._handleOverridablePaintPropertyUpdate(n,D,R)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,f){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),zt(n,((s,f)=>!(s===void 0||f==="layout"&&!Object.keys(s).length||f==="paint"&&!Object.keys(s).length)))}_validate(n,s,f,v,S={}){return(!S||S.validate!==!1)&&Iu(this,n.call(El,{key:s,layerType:this.type,objectKey:f,value:v,styleSpec:Oe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof ti&&Ii(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const Ys={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Lu{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class tn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Sn(l,n=1){let s=0,f=0;return{members:l.map((v=>{const S=Ys[v.type].BYTES_PER_ELEMENT,P=s=zu(s,Math.max(n,S)),D=v.components||1;return f=Math.max(f,S),s+=S*D,{name:v.name,type:v.type,components:D,offset:P}})),size:zu(s,Math.max(f,n)),alignment:n}}function zu(l,n){return Math.ceil(l/n)*n}class ma extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const f=this.length;return this.resize(f+1),this.emplace(f,n,s)}emplace(n,s,f){const v=2*n;return this.int16[v+0]=s,this.int16[v+1]=f,n}}ma.prototype.bytesPerElement=4,Rt("StructArrayLayout2i4",ma);class cn extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,f)}emplace(n,s,f,v){const S=3*n;return this.int16[S+0]=s,this.int16[S+1]=f,this.int16[S+2]=v,n}}cn.prototype.bytesPerElement=6,Rt("StructArrayLayout3i6",cn);class fs extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,f,v){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,f,v)}emplace(n,s,f,v,S){const P=4*n;return this.int16[P+0]=s,this.int16[P+1]=f,this.int16[P+2]=v,this.int16[P+3]=S,n}}fs.prototype.bytesPerElement=8,Rt("StructArrayLayout4i8",fs);class Ul extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,S,P){const D=this.length;return this.resize(D+1),this.emplace(D,n,s,f,v,S,P)}emplace(n,s,f,v,S,P,D){const R=6*n;return this.int16[R+0]=s,this.int16[R+1]=f,this.int16[R+2]=v,this.int16[R+3]=S,this.int16[R+4]=P,this.int16[R+5]=D,n}}Ul.prototype.bytesPerElement=12,Rt("StructArrayLayout2i4i12",Ul);class Ol extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,S,P){const D=this.length;return this.resize(D+1),this.emplace(D,n,s,f,v,S,P)}emplace(n,s,f,v,S,P,D){const R=4*n,O=8*n;return this.int16[R+0]=s,this.int16[R+1]=f,this.uint8[O+4]=v,this.uint8[O+5]=S,this.uint8[O+6]=P,this.uint8[O+7]=D,n}}Ol.prototype.bytesPerElement=8,Rt("StructArrayLayout2i4ub8",Ol);class yo extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const f=this.length;return this.resize(f+1),this.emplace(f,n,s)}emplace(n,s,f){const v=2*n;return this.float32[v+0]=s,this.float32[v+1]=f,n}}yo.prototype.bytesPerElement=8,Rt("StructArrayLayout2f8",yo);class go extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,S,P,D,R,O,j){const q=this.length;return this.resize(q+1),this.emplace(q,n,s,f,v,S,P,D,R,O,j)}emplace(n,s,f,v,S,P,D,R,O,j,q){const Z=10*n;return this.uint16[Z+0]=s,this.uint16[Z+1]=f,this.uint16[Z+2]=v,this.uint16[Z+3]=S,this.uint16[Z+4]=P,this.uint16[Z+5]=D,this.uint16[Z+6]=R,this.uint16[Z+7]=O,this.uint16[Z+8]=j,this.uint16[Z+9]=q,n}}go.prototype.bytesPerElement=20,Rt("StructArrayLayout10ui20",go);class Fu extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,S,P,D,R,O,j,q,Z){const J=this.length;return this.resize(J+1),this.emplace(J,n,s,f,v,S,P,D,R,O,j,q,Z)}emplace(n,s,f,v,S,P,D,R,O,j,q,Z,J){const te=12*n;return this.int16[te+0]=s,this.int16[te+1]=f,this.int16[te+2]=v,this.int16[te+3]=S,this.uint16[te+4]=P,this.uint16[te+5]=D,this.uint16[te+6]=R,this.uint16[te+7]=O,this.int16[te+8]=j,this.int16[te+9]=q,this.int16[te+10]=Z,this.int16[te+11]=J,n}}Fu.prototype.bytesPerElement=24,Rt("StructArrayLayout4i4ui4i24",Fu);class Nu extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,f)}emplace(n,s,f,v){const S=3*n;return this.float32[S+0]=s,this.float32[S+1]=f,this.float32[S+2]=v,n}}Nu.prototype.bytesPerElement=12,Rt("StructArrayLayout3f12",Nu);class Oc extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}Oc.prototype.bytesPerElement=4,Rt("StructArrayLayout1ul4",Oc);class b extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,S,P,D,R,O){const j=this.length;return this.resize(j+1),this.emplace(j,n,s,f,v,S,P,D,R,O)}emplace(n,s,f,v,S,P,D,R,O,j){const q=10*n,Z=5*n;return this.int16[q+0]=s,this.int16[q+1]=f,this.int16[q+2]=v,this.int16[q+3]=S,this.int16[q+4]=P,this.int16[q+5]=D,this.uint32[Z+3]=R,this.uint16[q+8]=O,this.uint16[q+9]=j,n}}b.prototype.bytesPerElement=20,Rt("StructArrayLayout6i1ul2ui20",b);class t extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,S,P){const D=this.length;return this.resize(D+1),this.emplace(D,n,s,f,v,S,P)}emplace(n,s,f,v,S,P,D){const R=6*n;return this.int16[R+0]=s,this.int16[R+1]=f,this.int16[R+2]=v,this.int16[R+3]=S,this.int16[R+4]=P,this.int16[R+5]=D,n}}t.prototype.bytesPerElement=12,Rt("StructArrayLayout2i2i2i12",t);class u extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,S){const P=this.length;return this.resize(P+1),this.emplace(P,n,s,f,v,S)}emplace(n,s,f,v,S,P){const D=4*n,R=8*n;return this.float32[D+0]=s,this.float32[D+1]=f,this.float32[D+2]=v,this.int16[R+6]=S,this.int16[R+7]=P,n}}u.prototype.bytesPerElement=16,Rt("StructArrayLayout2f1f2i16",u);class d extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,S,P){const D=this.length;return this.resize(D+1),this.emplace(D,n,s,f,v,S,P)}emplace(n,s,f,v,S,P,D){const R=16*n,O=4*n,j=8*n;return this.uint8[R+0]=s,this.uint8[R+1]=f,this.float32[O+1]=v,this.float32[O+2]=S,this.int16[j+6]=P,this.int16[j+7]=D,n}}d.prototype.bytesPerElement=16,Rt("StructArrayLayout2ub2f2i16",d);class _ extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,f)}emplace(n,s,f,v){const S=3*n;return this.uint16[S+0]=s,this.uint16[S+1]=f,this.uint16[S+2]=v,n}}_.prototype.bytesPerElement=6,Rt("StructArrayLayout3ui6",_);class w extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,f,v,S,P,D,R,O,j,q,Z,J,te,oe,ue,pe){const Le=this.length;return this.resize(Le+1),this.emplace(Le,n,s,f,v,S,P,D,R,O,j,q,Z,J,te,oe,ue,pe)}emplace(n,s,f,v,S,P,D,R,O,j,q,Z,J,te,oe,ue,pe,Le){const Se=24*n,De=12*n,Ge=48*n;return this.int16[Se+0]=s,this.int16[Se+1]=f,this.uint16[Se+2]=v,this.uint16[Se+3]=S,this.uint32[De+2]=P,this.uint32[De+3]=D,this.uint32[De+4]=R,this.uint16[Se+10]=O,this.uint16[Se+11]=j,this.uint16[Se+12]=q,this.float32[De+7]=Z,this.float32[De+8]=J,this.uint8[Ge+36]=te,this.uint8[Ge+37]=oe,this.uint8[Ge+38]=ue,this.uint32[De+10]=pe,this.int16[Se+22]=Le,n}}w.prototype.bytesPerElement=48,Rt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",w);class A extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,f,v,S,P,D,R,O,j,q,Z,J,te,oe,ue,pe,Le,Se,De,Ge,Xe,dt,Dt,_t,Mt,Ht,bt){const St=this.length;return this.resize(St+1),this.emplace(St,n,s,f,v,S,P,D,R,O,j,q,Z,J,te,oe,ue,pe,Le,Se,De,Ge,Xe,dt,Dt,_t,Mt,Ht,bt)}emplace(n,s,f,v,S,P,D,R,O,j,q,Z,J,te,oe,ue,pe,Le,Se,De,Ge,Xe,dt,Dt,_t,Mt,Ht,bt,St){const tt=32*n,Kt=16*n;return this.int16[tt+0]=s,this.int16[tt+1]=f,this.int16[tt+2]=v,this.int16[tt+3]=S,this.int16[tt+4]=P,this.int16[tt+5]=D,this.int16[tt+6]=R,this.int16[tt+7]=O,this.uint16[tt+8]=j,this.uint16[tt+9]=q,this.uint16[tt+10]=Z,this.uint16[tt+11]=J,this.uint16[tt+12]=te,this.uint16[tt+13]=oe,this.uint16[tt+14]=ue,this.uint16[tt+15]=pe,this.uint16[tt+16]=Le,this.uint16[tt+17]=Se,this.uint16[tt+18]=De,this.uint16[tt+19]=Ge,this.uint16[tt+20]=Xe,this.uint16[tt+21]=dt,this.uint16[tt+22]=Dt,this.uint32[Kt+12]=_t,this.float32[Kt+13]=Mt,this.float32[Kt+14]=Ht,this.uint16[tt+30]=bt,this.uint16[tt+31]=St,n}}A.prototype.bytesPerElement=64,Rt("StructArrayLayout8i15ui1ul2f2ui64",A);class I extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}I.prototype.bytesPerElement=4,Rt("StructArrayLayout1f4",I);class k extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,f)}emplace(n,s,f,v){const S=3*n;return this.uint16[6*n+0]=s,this.float32[S+1]=f,this.float32[S+2]=v,n}}k.prototype.bytesPerElement=12,Rt("StructArrayLayout1ui2f12",k);class N extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,f)}emplace(n,s,f,v){const S=4*n;return this.uint32[2*n+0]=s,this.uint16[S+2]=f,this.uint16[S+3]=v,n}}N.prototype.bytesPerElement=8,Rt("StructArrayLayout1ul2ui8",N);class B extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const f=this.length;return this.resize(f+1),this.emplace(f,n,s)}emplace(n,s,f){const v=2*n;return this.uint16[v+0]=s,this.uint16[v+1]=f,n}}B.prototype.bytesPerElement=4,Rt("StructArrayLayout2ui4",B);class W extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}W.prototype.bytesPerElement=2,Rt("StructArrayLayout1ui2",W);class H extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,f,v){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,f,v)}emplace(n,s,f,v,S){const P=4*n;return this.float32[P+0]=s,this.float32[P+1]=f,this.float32[P+2]=v,this.float32[P+3]=S,n}}H.prototype.bytesPerElement=16,Rt("StructArrayLayout4f16",H);class K extends Lu{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new C(this.anchorPointX,this.anchorPointY)}}K.prototype.size=20;class ie extends b{get(n){return new K(this,n)}}Rt("CollisionBoxArray",ie);class ce extends Lu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ce.prototype.size=48;class he extends w{get(n){return new ce(this,n)}}Rt("PlacedSymbolArray",he);class fe extends Lu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}fe.prototype.size=64;class me extends A{get(n){return new fe(this,n)}}Rt("SymbolInstanceArray",me);class xe extends I{getoffsetX(n){return this.float32[1*n+0]}}Rt("GlyphOffsetArray",xe);class ye extends cn{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Rt("SymbolLineVertexArray",ye);class we extends Lu{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}we.prototype.size=12;class Te extends k{get(n){return new we(this,n)}}Rt("TextAnchorOffsetArray",Te);class ge extends Lu{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ge.prototype.size=8;class ke extends N{get(n){return new ge(this,n)}}Rt("FeatureIndexArray",ke);class Ze extends ma{}class je extends ma{}class He extends ma{}class Ye extends Ul{}class Pt extends Ol{}class xt extends yo{}class lt extends go{}class Ft extends Fu{}class vr extends Nu{}class kr extends Oc{}class hn extends t{}class Wr extends d{}class Zr extends _{}class rn extends B{}const Kr=Sn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Yr}=Kr;class Mr{constructor(n=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=n}prepareSegment(n,s,f,v){const S=this.segments[this.segments.length-1];return n>Mr.MAX_VERTEX_ARRAY_LENGTH&&Ot(`Max vertices per segment is ${Mr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Mr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!S||S.vertexLength+n>Mr.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==v?this.createNewSegment(s,f,v):S}createNewSegment(n,s,f){const v={vertexOffset:n.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0,vaos:{}};return f!==void 0&&(v.sortKey=f),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(v),v}getOrCreateLatestSegment(n,s,f){return this.prepareSegment(0,n,s,f)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,f,v){return new Mr([{vertexOffset:n,primitiveOffset:s,vertexLength:f,primitiveLength:v,vaos:{},sortKey:0}])}}function ea(l,n){return 256*(l=jt(Math.floor(l),0,255))+jt(Math.floor(n),0,255)}Mr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Rt("SegmentVector",Mr);const $n=Sn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ri,Qs,ds,ni={exports:{}},ps={exports:{}},Xs={exports:{}},Lc=(function(){if(ds)return ni.exports;ds=1;var l=(ri||(ri=1,ps.exports=function(s,f){var v,S,P,D,R,O,j,q;for(S=s.length-(v=3&s.length),P=f,R=3432918353,O=461845907,q=0;q<S;)j=255&s.charCodeAt(q)|(255&s.charCodeAt(++q))<<8|(255&s.charCodeAt(++q))<<16|(255&s.charCodeAt(++q))<<24,++q,P=27492+(65535&(D=5*(65535&(P=(P^=j=(65535&(j=(j=(65535&j)*R+(((j>>>16)*R&65535)<<16)&4294967295)<<15|j>>>17))*O+(((j>>>16)*O&65535)<<16)&4294967295)<<13|P>>>19))+((5*(P>>>16)&65535)<<16)&4294967295))+((58964+(D>>>16)&65535)<<16);switch(j=0,v){case 3:j^=(255&s.charCodeAt(q+2))<<16;case 2:j^=(255&s.charCodeAt(q+1))<<8;case 1:P^=j=(65535&(j=(j=(65535&(j^=255&s.charCodeAt(q)))*R+(((j>>>16)*R&65535)<<16)&4294967295)<<15|j>>>17))*O+(((j>>>16)*O&65535)<<16)&4294967295}return P^=s.length,P=2246822507*(65535&(P^=P>>>16))+((2246822507*(P>>>16)&65535)<<16)&4294967295,P=3266489909*(65535&(P^=P>>>13))+((3266489909*(P>>>16)&65535)<<16)&4294967295,(P^=P>>>16)>>>0}),ps.exports),n=(Qs||(Qs=1,Xs.exports=function(s,f){for(var v,S=s.length,P=f^S,D=0;S>=4;)v=1540483477*(65535&(v=255&s.charCodeAt(D)|(255&s.charCodeAt(++D))<<8|(255&s.charCodeAt(++D))<<16|(255&s.charCodeAt(++D))<<24))+((1540483477*(v>>>16)&65535)<<16),P=1540483477*(65535&P)+((1540483477*(P>>>16)&65535)<<16)^(v=1540483477*(65535&(v^=v>>>24))+((1540483477*(v>>>16)&65535)<<16)),S-=4,++D;switch(S){case 3:P^=(255&s.charCodeAt(D+2))<<16;case 2:P^=(255&s.charCodeAt(D+1))<<8;case 1:P=1540483477*(65535&(P^=255&s.charCodeAt(D)))+((1540483477*(P>>>16)&65535)<<16)}return P=1540483477*(65535&(P^=P>>>13))+((1540483477*(P>>>16)&65535)<<16),(P^=P>>>15)>>>0}),Xs.exports);return ni.exports=l,ni.exports.murmur3=l,ni.exports.murmur2=n,ni.exports})(),ms=M(Lc);class ya{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,f,v){this.ids.push(Bo(n)),this.positions.push(s,f,v)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Bo(n);let f=0,v=this.ids.length-1;for(;f<v;){const P=f+v>>1;this.ids[P]>=s?v=P:f=P+1}const S=[];for(;this.ids[f]===s;)S.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return S}static serialize(n,s){const f=new Float64Array(n.ids),v=new Uint32Array(n.positions);return qo(f,v,0,f.length-1),s&&s.push(f.buffer,v.buffer),{ids:f,positions:v}}static deserialize(n){const s=new ya;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function Bo(l){const n=+l;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:ms(String(l))}function qo(l,n,s,f){for(;s<f;){const v=l[s+f>>1];let S=s-1,P=f+1;for(;;){do S++;while(l[S]<v);do P--;while(l[P]>v);if(S>=P)break;Ks(l,S,P),Ks(n,3*S,3*P),Ks(n,3*S+1,3*P+1),Ks(n,3*S+2,3*P+2)}P-s<f-P?(qo(l,n,s,P),s=P+1):(qo(l,n,P+1,f),f=P)}}function Ks(l,n,s){const f=l[n];l[n]=l[s],l[s]=f}Rt("FeaturePositionMap",ya);class jr{constructor(n,s){this.gl=n.gl,this.location=s}}class gn extends jr{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class za extends jr{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Tn extends jr{constructor(n,s){super(n,s),this.current=_r.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Fh=new Float32Array(16);function Nh(l){return[ea(255*l.r,255*l.g),ea(255*l.b,255*l.a)]}class ju{constructor(n,s,f){this.value=n,this.uniformNames=s.map((v=>`u_${v}`)),this.type=f}setUniform(n,s,f){n.set(f.constantOr(this.value))}getBinding(n,s,f){return this.type==="color"?new Tn(n,s):new gn(n,s)}}class vo{constructor(n,s){this.uniformNames=s.map((f=>`u_${f}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,f,v){const S=v==="u_pattern_to"?this.patternTo:v==="u_pattern_from"?this.patternFrom:v==="u_pixel_ratio_to"?this.pixelRatioTo:v==="u_pixel_ratio_from"?this.pixelRatioFrom:null;S&&n.set(S)}getBinding(n,s,f){return f.substr(0,9)==="u_pattern"?new za(n,s):new gn(n,s)}}class Ho{constructor(n,s,f,v){this.expression=n,this.type=f,this.maxValue=0,this.paintVertexAttributes=s.map((S=>({name:`a_${S}`,type:"Float32",components:f==="color"?2:1,offset:0}))),this.paintVertexArray=new v}populatePaintArray(n,s,f){const v=this.paintVertexArray.length,S=this.expression.evaluate(new Hr(0,f),s,{},f.canonical,[],f.formattedSection);this.paintVertexArray.resize(n),this._setPaintValue(v,n,S)}updatePaintArray(n,s,f,v,S){const P=this.expression.evaluate(new Hr(0,S),f,v);this._setPaintValue(n,s,P)}_setPaintValue(n,s,f){if(this.type==="color"){const v=Nh(f);for(let S=n;S<s;S++)this.paintVertexArray.emplace(S,v[0],v[1])}else{for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Un{constructor(n,s,f,v,S,P){this.expression=n,this.uniformNames=s.map((D=>`u_${D}_t`)),this.type=f,this.useIntegerZoom=v,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=s.map((D=>({name:`a_${D}`,type:"Float32",components:f==="color"?4:2,offset:0}))),this.paintVertexArray=new P}populatePaintArray(n,s,f){const v=this.expression.evaluate(new Hr(this.zoom,f),s,{},f.canonical,[],f.formattedSection),S=this.expression.evaluate(new Hr(this.zoom+1,f),s,{},f.canonical,[],f.formattedSection),P=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(P,n,v,S)}updatePaintArray(n,s,f,v,S){const P=this.expression.evaluate(new Hr(this.zoom,S),f,v),D=this.expression.evaluate(new Hr(this.zoom+1,S),f,v);this._setPaintValue(n,s,P,D)}_setPaintValue(n,s,f,v){if(this.type==="color"){const S=Nh(f),P=Nh(v);for(let D=n;D<s;D++)this.paintVertexArray.emplace(D,S[0],S[1],P[0],P[1])}else{for(let S=n;S<s;S++)this.paintVertexArray.emplace(S,f,v);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(v))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const f=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,v=jt(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);n.set(v)}getBinding(n,s,f){return new gn(n,s)}}class En{constructor(n,s,f,v,S,P){this.expression=n,this.type=s,this.useIntegerZoom=f,this.zoom=v,this.layerId=P,this.zoomInPaintVertexArray=new S,this.zoomOutPaintVertexArray=new S}populatePaintArray(n,s,f){const v=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(v,n,s.patterns&&s.patterns[this.layerId],f.imagePositions)}updatePaintArray(n,s,f,v,S){this._setPaintValues(n,s,f.patterns&&f.patterns[this.layerId],S.imagePositions)}_setPaintValues(n,s,f,v){if(!v||!f)return;const{min:S,mid:P,max:D}=f,R=v[S],O=v[P],j=v[D];if(R&&O&&j)for(let q=n;q<s;q++)this.zoomInPaintVertexArray.emplace(q,O.tl[0],O.tl[1],O.br[0],O.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1],O.pixelRatio,R.pixelRatio),this.zoomOutPaintVertexArray.emplace(q,O.tl[0],O.tl[1],O.br[0],O.br[1],j.tl[0],j.tl[1],j.br[0],j.br[1],O.pixelRatio,j.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,$n.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,$n.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class $o{constructor(n,s,f){this.binders={},this._buffers=[];const v=[];for(const S in n.paint._values){if(!f(S))continue;const P=n.paint.get(S);if(!(P instanceof ti&&Ii(P.property.specification)))continue;const D=gs(S,n.type),R=P.value,O=P.property.specification.type,j=P.property.useIntegerZoom,q=P.property.specification["property-type"],Z=q==="cross-faded"||q==="cross-faded-data-driven";if(R.kind==="constant")this.binders[S]=Z?new vo(R.value,D):new ju(R.value,D,O),v.push(`/u_${S}`);else if(R.kind==="source"||Z){const J=Xi(S,O,"source");this.binders[S]=Z?new En(R,O,j,s,J,n.id):new Ho(R,D,O,J),v.push(`/a_${S}`)}else{const J=Xi(S,O,"composite");this.binders[S]=new Un(R,D,O,j,s,J),v.push(`/z_${S}`)}}this.cacheKey=v.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof Ho||s instanceof Un?s.maxValue:0}populatePaintArrays(n,s,f){for(const v in this.binders){const S=this.binders[v];(S instanceof Ho||S instanceof Un||S instanceof En)&&S.populatePaintArray(n,s,f)}}setConstantPatternPositions(n,s){for(const f in this.binders){const v=this.binders[f];v instanceof vo&&v.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,f,v,S){let P=!1;for(const D in n){const R=s.getPositions(D);for(const O of R){const j=f.feature(O.index);for(const q in this.binders){const Z=this.binders[q];if((Z instanceof Ho||Z instanceof Un||Z instanceof En)&&Z.expression.isStateDependent===!0){const J=v.paint.get(q);Z.expression=J.value,Z.updatePaintArray(O.start,O.end,j,n[D],S),P=!0}}}}return P}defines(){const n=[];for(const s in this.binders){const f=this.binders[s];(f instanceof ju||f instanceof vo)&&n.push(...f.uniformNames.map((v=>`#define HAS_UNIFORM_${v}`)))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const f=this.binders[s];if(f instanceof Ho||f instanceof Un)for(let v=0;v<f.paintVertexAttributes.length;v++)n.push(f.paintVertexAttributes[v].name);else if(f instanceof En)for(let v=0;v<$n.members.length;v++)n.push($n.members[v].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const f=this.binders[s];if(f instanceof ju||f instanceof vo||f instanceof Un)for(const v of f.uniformNames)n.push(v)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const f=[];for(const v in this.binders){const S=this.binders[v];if(S instanceof ju||S instanceof vo||S instanceof Un){for(const P of S.uniformNames)if(s[P]){const D=S.getBinding(n,s[P],P);f.push({name:P,property:v,binding:D})}}}return f}setUniforms(n,s,f,v){for(const{name:S,property:P,binding:D}of s)this.binders[P].setUniform(D,v,f.get(P),S)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const f=this.binders[s];if(n&&f instanceof En){const v=n.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;v&&this._buffers.push(v)}else(f instanceof Ho||f instanceof Un)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(n){for(const s in this.binders){const f=this.binders[s];(f instanceof Ho||f instanceof Un||f instanceof En)&&f.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof Ho||s instanceof Un||s instanceof En)&&s.destroy()}}}class ys{constructor(n,s,f=()=>!0){this.programConfigurations={};for(const v of n)this.programConfigurations[v.id]=new $o(v,s,f);this.needsUpload=!1,this._featureMap=new ya,this._bufferOffset=0}populatePaintArrays(n,s,f,v){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(n,s,v);s.id!==void 0&&this._featureMap.add(s.id,f,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,f,v){for(const S of f)this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(n,this._featureMap,s,S,v)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function gs(l,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(`${n}-`,"").replace(/-/g,"_")]}function Xi(l,n,s){const f={color:{source:yo,composite:H},number:{source:I,composite:yo}},v=(function(S){return{"line-pattern":{source:lt,composite:lt},"fill-pattern":{source:lt,composite:lt},"fill-extrusion-pattern":{source:lt,composite:lt}}[S]})(l);return v&&v[s]||f[n][s]}Rt("ConstantBinder",ju),Rt("CrossFadedConstantBinder",vo),Rt("SourceExpressionBinder",Ho),Rt("CrossFadedCompositeBinder",En),Rt("CompositeExpressionBinder",Un),Rt("ProgramConfiguration",$o,{omit:["_buffers"]}),Rt("ProgramConfigurationSet",ys);const On=Math.pow(2,14)-1,Ll=-On-1;function zl(l){const n=Ct/l.extent,s=l.loadGeometry();for(let f=0;f<s.length;f++){const v=s[f];for(let S=0;S<v.length;S++){const P=v[S],D=Math.round(P.x*n),R=Math.round(P.y*n);P.x=jt(D,Ll,On),P.y=jt(R,Ll,On),(D<P.x||D>P.x+1||R<P.y||R>P.y+1)&&Ot("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Fl(l,n){return{type:l.type,id:l.id,properties:l.properties,geometry:n?zl(l):[]}}const ym=-32768;function mg(l,n,s,f,v){l.emplaceBack(ym+8*n+f,ym+8*s+v)}class Nl{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new je,this.indexArray=new Zr,this.segments=new Mr,this.programConfigurations=new ys(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(n,s,f){const v=this.layers[0],S=[];let P=null,D=!1,R=v.type==="heatmap";if(v.type==="circle"){const j=v;P=j.layout.get("circle-sort-key"),D=!P.isConstant(),R=R||j.paint.get("circle-pitch-alignment")==="map"}const O=R?s.subdivisionGranularity.circle:1;for(const{feature:j,id:q,index:Z,sourceLayerIndex:J}of n){const te=this.layers[0]._featureFilter.needGeometry,oe=Fl(j,te);if(!this.layers[0]._featureFilter.filter(new Hr(this.zoom),oe,f))continue;const ue=D?P.evaluate(oe,{},f):void 0,pe={id:q,properties:j.properties,type:j.type,sourceLayerIndex:J,index:Z,geometry:te?oe.geometry:zl(j),patterns:{},sortKey:ue};S.push(pe)}D&&S.sort(((j,q)=>j.sortKey-q.sortKey));for(const j of S){const{geometry:q,index:Z,sourceLayerIndex:J}=j,te=n[Z].feature;this.addFeature(j,q,Z,f,O),s.featureIndex.insert(te,q,Z,J,this.index)}}update(n,s,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,{imagePositions:f})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Yr),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,f,v,S=1){let P;switch(S){case 1:P=[0,7];break;case 3:P=[0,2,5,7];break;case 5:P=[0,1,3,4,6,7];break;case 7:P=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${S}; valid values are 1, 3, 5, 7.`)}const D=P.length;for(const R of s)for(const O of R){const j=O.x,q=O.y;if(j<0||j>=Ct||q<0||q>=Ct)continue;const Z=this.segments.prepareSegment(D*D,this.layoutVertexArray,this.indexArray,n.sortKey),J=Z.vertexLength;for(let te=0;te<D;te++)for(let oe=0;oe<D;oe++)mg(this.layoutVertexArray,j,q,P[oe],P[te]);for(let te=0;te<D-1;te++)for(let oe=0;oe<D-1;oe++){const ue=J+te*D+oe,pe=J+(te+1)*D+oe;this.indexArray.emplaceBack(ue,pe+1,ue+1),this.indexArray.emplaceBack(ue,pe,pe+1)}Z.vertexLength+=D*D,Z.primitiveLength+=(D-1)*(D-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{imagePositions:{},canonical:v})}}function Bf(l,n){for(let s=0;s<l.length;s++)if(Bh(n,l[s]))return!0;for(let s=0;s<n.length;s++)if(Bh(l,n[s]))return!0;return!!jh(l,n)}function qf(l,n,s){return!!Bh(l,n)||!!Hf(n,l,s)}function gm(l,n){if(l.length===1)return _m(n,l[0]);for(let s=0;s<n.length;s++){const f=n[s];for(let v=0;v<f.length;v++)if(Bh(l,f[v]))return!0}for(let s=0;s<l.length;s++)if(_m(n,l[s]))return!0;for(let s=0;s<n.length;s++)if(jh(l,n[s]))return!0;return!1}function yg(l,n,s){if(l.length>1){if(jh(l,n))return!0;for(let f=0;f<n.length;f++)if(Hf(n[f],l,s))return!0}for(let f=0;f<l.length;f++)if(Hf(l[f],n,s))return!0;return!1}function jh(l,n){if(l.length===0||n.length===0)return!1;for(let s=0;s<l.length-1;s++){const f=l[s],v=l[s+1];for(let S=0;S<n.length-1;S++)if(gg(f,v,n[S],n[S+1]))return!0}return!1}function gg(l,n,s,f){return Sr(l,s,f)!==Sr(n,s,f)&&Sr(l,n,s)!==Sr(l,n,f)}function Hf(l,n,s){const f=s*s;if(n.length===1)return l.distSqr(n[0])<f;for(let v=1;v<n.length;v++)if(vm(l,n[v-1],n[v])<f)return!0;return!1}function vm(l,n,s){const f=n.distSqr(s);if(f===0)return l.distSqr(n);const v=((l.x-n.x)*(s.x-n.x)+(l.y-n.y)*(s.y-n.y))/f;return l.distSqr(v<0?n:v>1?s:s.sub(n)._mult(v)._add(n))}function _m(l,n){let s,f,v,S=!1;for(let P=0;P<l.length;P++){s=l[P];for(let D=0,R=s.length-1;D<s.length;R=D++)f=s[D],v=s[R],f.y>n.y!=v.y>n.y&&n.x<(v.x-f.x)*(n.y-f.y)/(v.y-f.y)+f.x&&(S=!S)}return S}function Bh(l,n){let s=!1;for(let f=0,v=l.length-1;f<l.length;v=f++){const S=l[f],P=l[v];S.y>n.y!=P.y>n.y&&n.x<(P.x-S.x)*(n.y-S.y)/(P.y-S.y)+S.x&&(s=!s)}return s}function vg(l,n,s){const f=s[0],v=s[2];if(l.x<f.x&&n.x<f.x||l.x>v.x&&n.x>v.x||l.y<f.y&&n.y<f.y||l.y>v.y&&n.y>v.y)return!1;const S=Sr(l,n,s[0]);return S!==Sr(l,n,s[1])||S!==Sr(l,n,s[2])||S!==Sr(l,n,s[3])}function Vn(l,n,s){const f=n.paint.get(l).value;return f.kind==="constant"?f.value:s.programConfigurations.get(n.id).getMaxValue(l)}function ga(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function $f(l,n,s,f,v){if(!n[0]&&!n[1])return l;const S=C.convert(n)._mult(v);s==="viewport"&&S._rotate(-f);const P=[];for(let D=0;D<l.length;D++)P.push(l[D].sub(S));return P}function _g({queryGeometry:l,size:n},s){return qf(l,s,n)}function bg({queryGeometry:l,size:n,transform:s,unwrappedTileID:f,getElevation:v},S){return qf(l,S,n*(s.projectTileCoordinates(S.x,S.y,f,v).signedDistanceFromCamera/s.cameraToCenterDistance))}function xg({queryGeometry:l,size:n,transform:s,unwrappedTileID:f,getElevation:v},S){const P=s.projectTileCoordinates(S.x,S.y,f,v).signedDistanceFromCamera,D=n*(s.cameraToCenterDistance/P);return qf(l,Gf(S,s,f,v),D)}function Sg({queryGeometry:l,size:n,transform:s,unwrappedTileID:f,getElevation:v},S){return qf(l,Gf(S,s,f,v),n)}function Vf({queryGeometry:l,size:n,transform:s,unwrappedTileID:f,getElevation:v,pitchAlignment:S="map",pitchScale:P="map"},D){const R=S==="map"?P==="map"?_g:bg:P==="map"?xg:Sg,O={queryGeometry:l,size:n,transform:s,unwrappedTileID:f,getElevation:v};for(const j of D)for(const q of j)if(R(O,q))return!0;return!1}function Gf(l,n,s,f){const v=n.projectTileCoordinates(l.x,l.y,s,f).point;return new C((.5*v.x+.5)*n.width,(.5*-v.y+.5)*n.height)}let bm,xm;Rt("CircleBucket",Nl,{omit:["layers"]});var wg={get paint(){return xm=xm||new pa({"circle-radius":new Vt(Oe.paint_circle["circle-radius"]),"circle-color":new Vt(Oe.paint_circle["circle-color"]),"circle-blur":new Vt(Oe.paint_circle["circle-blur"]),"circle-opacity":new Vt(Oe.paint_circle["circle-opacity"]),"circle-translate":new Lt(Oe.paint_circle["circle-translate"]),"circle-translate-anchor":new Lt(Oe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Lt(Oe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Lt(Oe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Vt(Oe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Vt(Oe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Vt(Oe.paint_circle["circle-stroke-opacity"])})},get layout(){return bm=bm||new pa({"circle-sort-key":new Vt(Oe.layout_circle["circle-sort-key"])})}};class Sm extends Qi{constructor(n,s){super(n,wg,s)}createBucket(n){return new Nl(n)}queryRadius(n){const s=n;return Vn("circle-radius",this,s)+Vn("circle-stroke-width",this,s)+ga(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:n,feature:s,featureState:f,geometry:v,transform:S,pixelsToTileUnits:P,unwrappedTileID:D,getElevation:R}){const O=$f(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-S.bearingInRadians,P),j=this.paint.get("circle-radius").evaluate(s,f)+this.paint.get("circle-stroke-width").evaluate(s,f),q=this.paint.get("circle-pitch-scale"),Z=this.paint.get("circle-pitch-alignment");let J,te;return Z==="map"?(J=O,te=j*P):(J=(function(oe,ue,pe,Le){return oe.map((Se=>Gf(Se,ue,pe,Le)))})(O,S,D,R),te=j),Vf({queryGeometry:J,size:te,transform:S,unwrappedTileID:D,getElevation:R,pitchAlignment:Z,pitchScale:q},v)}}class ip extends Nl{}let op;Rt("HeatmapBucket",ip,{omit:["layers"]});var Pg={get paint(){return op=op||new pa({"heatmap-radius":new Vt(Oe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Vt(Oe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Lt(Oe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new xn(Oe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Lt(Oe.paint_heatmap["heatmap-opacity"])})}};function Wf(l,{width:n,height:s},f,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==n*s*f)throw new RangeError(`mismatched image size. expected: ${v.length} but got: ${n*s*f}`)}else v=new Uint8Array(n*s*f);return l.width=n,l.height=s,l.data=v,l}function Zf(l,{width:n,height:s},f){if(n===l.width&&s===l.height)return;const v=Wf({},{width:n,height:s},f);Yf(l,v,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,n),height:Math.min(l.height,s)},f),l.width=n,l.height=s,l.data=v.data}function Yf(l,n,s,f,v,S){if(v.width===0||v.height===0)return n;if(v.width>l.width||v.height>l.height||s.x>l.width-v.width||s.y>l.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>n.width||v.height>n.height||f.x>n.width-v.width||f.y>n.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const P=l.data,D=n.data;if(P===D)throw new Error("srcData equals dstData, so image is already copied");for(let R=0;R<v.height;R++){const O=((s.y+R)*l.width+s.x)*S,j=((f.y+R)*n.width+f.x)*S;for(let q=0;q<v.width*S;q++)D[j+q]=P[O+q]}return n}class qh{constructor(n,s){Wf(this,n,1,s)}resize(n){Zf(this,n,1)}clone(){return new qh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,f,v,S){Yf(n,s,f,v,S,1)}}class ai{constructor(n,s){Wf(this,n,4,s)}resize(n){Zf(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new ai({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,f,v,S){Yf(n,s,f,v,S,4)}setPixel(n,s,f){const v=4*(n*this.width+s);this.data[v+0]=Math.round(255*f.r/f.a),this.data[v+1]=Math.round(255*f.g/f.a),this.data[v+2]=Math.round(255*f.b/f.a),this.data[v+3]=Math.round(255*f.a)}}function wm(l){const n={},s=l.resolution||256,f=l.clips?l.clips.length:1,v=l.image||new ai({width:s,height:f});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const S=(P,D,R)=>{n[l.evaluationKey]=R;const O=l.expression.evaluate(n);v.setPixel(P/4/s,D/4,O)};if(l.clips)for(let P=0,D=0;P<f;++P,D+=4*s)for(let R=0,O=0;R<s;R++,O+=4){const j=R/(s-1),{start:q,end:Z}=l.clips[P];S(D,O,q*(1-j)+Z*j)}else for(let P=0,D=0;P<s;P++,D+=4)S(0,D,P/(s-1));return v}Rt("AlphaImage",qh),Rt("RGBAImage",ai);const vs="big-fb";class Pm extends Qi{createBucket(n){return new ip(n)}constructor(n,s){super(n,Pg,s),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=wm({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(vs)&&this.heatmapFbos.delete(vs)}queryRadius(n){return Vn("heatmap-radius",this,n)}queryIntersectsFeature({queryGeometry:n,feature:s,featureState:f,geometry:v,transform:S,pixelsToTileUnits:P,unwrappedTileID:D,getElevation:R}){return Vf({queryGeometry:n,size:this.paint.get("heatmap-radius").evaluate(s,f)*P,transform:S,unwrappedTileID:D,getElevation:R},v)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Ag;var Cg={get paint(){return Ag=Ag||new pa({"hillshade-illumination-direction":new Lt(Oe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Lt(Oe.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Lt(Oe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Lt(Oe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Lt(Oe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Lt(Oe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Lt(Oe.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Lt(Oe.paint_hillshade["hillshade-method"])})}};class jl extends Qi{constructor(n,s){super(n,Cg,s),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let n=this.paint.get("hillshade-illumination-direction").values,s=this.paint.get("hillshade-illumination-altitude").values,f=this.paint.get("hillshade-highlight-color").values,v=this.paint.get("hillshade-shadow-color").values;const S=Math.max(n.length,s.length,f.length,v.length);n=n.concat(Array(S-n.length).fill(n.at(-1))),s=s.concat(Array(S-s.length).fill(s.at(-1))),f=f.concat(Array(S-f.length).fill(f.at(-1))),v=v.concat(Array(S-v.length).fill(v.at(-1)));const P=s.map(Do);return{directionRadians:n.map(Do),altitudeRadians:P,shadowColor:v,highlightColor:f}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let Am;var sp={get paint(){return Am=Am||new pa({"color-relief-opacity":new Lt(Oe["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new xn(Oe["paint_color-relief"]["color-relief-color"])})}};class zc{constructor(n,s,f,v){this.context=n,this.format=f,this.texture=n.gl.createTexture(),this.update(s,v)}update(n,s,f){const{width:v,height:S}=n,P=!(this.size&&this.size[0]===v&&this.size[1]===S||f),{context:D}=this,{gl:R}=D;if(this.useMipmap=!!(s&&s.useMipmap),R.bindTexture(R.TEXTURE_2D,this.texture),D.pixelStoreUnpackFlipY.set(!1),D.pixelStoreUnpack.set(1),D.pixelStoreUnpackPremultiplyAlpha.set(this.format===R.RGBA&&(!s||s.premultiply!==!1)),P)this.size=[v,S],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||Nn(n)?R.texImage2D(R.TEXTURE_2D,0,this.format,this.format,R.UNSIGNED_BYTE,n):R.texImage2D(R.TEXTURE_2D,0,this.format,v,S,0,this.format,R.UNSIGNED_BYTE,n.data);else{const{x:O,y:j}=f||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||Nn(n)?R.texSubImage2D(R.TEXTURE_2D,0,O,j,R.RGBA,R.UNSIGNED_BYTE,n):R.texSubImage2D(R.TEXTURE_2D,0,O,j,v,S,R.RGBA,R.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&R.generateMipmap(R.TEXTURE_2D),D.pixelStoreUnpackFlipY.setDefault(),D.pixelStoreUnpack.setDefault(),D.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(n,s,f){const{context:v}=this,{gl:S}=v;S.bindTexture(S.TEXTURE_2D,this.texture),f!==S.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=S.LINEAR),n!==this.filter&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,n),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,f||n),this.filter=n),s!==this.wrap&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,s),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class Ln{constructor(n,s,f,v=1,S=1,P=1,D=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void Ot(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const R=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=v,this.greenFactor=S,this.blueFactor=P,this.baseShift=D;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let O=0;O<R;O++)this.data[this._idx(-1,O)]=this.data[this._idx(0,O)],this.data[this._idx(R,O)]=this.data[this._idx(R-1,O)],this.data[this._idx(O,-1)]=this.data[this._idx(O,0)],this.data[this._idx(O,R)]=this.data[this._idx(O,R-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(R,-1)]=this.data[this._idx(R-1,0)],this.data[this._idx(-1,R)]=this.data[this._idx(0,R-1)],this.data[this._idx(R,R)]=this.data[this._idx(R-1,R-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let O=0;O<R;O++)for(let j=0;j<R;j++){const q=this.get(O,j);q>this.max&&(this.max=q),q<this.min&&(this.min=q)}}get(n,s){const f=new Uint8Array(this.data.buffer),v=4*this._idx(n,s);return this.unpack(f[v],f[v+1],f[v+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,f){return n*this.redFactor+s*this.greenFactor+f*this.blueFactor-this.baseShift}pack(n){return Dg(n,this.getUnpackVector())}getPixels(){return new ai({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,f){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let v=s*this.dim,S=s*this.dim+this.dim,P=f*this.dim,D=f*this.dim+this.dim;switch(s){case-1:v=S-1;break;case 1:S=v+1}switch(f){case-1:P=D-1;break;case 1:D=P+1}const R=-s*this.dim,O=-f*this.dim;for(let j=P;j<D;j++)for(let q=v;q<S;q++)this.data[this._idx(q,j)]=n.data[this._idx(q+R,j+O)]}}function Dg(l,n){const s=n[0],f=n[1],v=n[2],S=n[3],P=Math.min(s,f,v),D=Math.round((l+S)/P);return{r:Math.floor(D*P/s)%256,g:Math.floor(D*P/f)%256,b:Math.floor(D*P/v)%256}}Rt("DEMData",Ln);class d1 extends Qi{constructor(n,s){super(n,sp,s)}_createColorRamp(n){const s={elevationStops:[],colorStops:[]},f=this._transitionablePaint._values["color-relief-color"].value.expression;if(f instanceof qs&&f._styleExpression.expression instanceof Ca){this.colorRampExpression=f;const P=f._styleExpression.expression;s.elevationStops=P.labels,s.colorStops=[];for(const D of s.elevationStops)s.colorStops.push(P.evaluate({globals:{elevation:D}}))}if(s.elevationStops.length<1&&(s.elevationStops=[0],s.colorStops=[_r.transparent]),s.elevationStops.length<2&&(s.elevationStops.push(s.elevationStops[0]+1),s.colorStops.push(s.colorStops[0])),s.elevationStops.length<=n)return s;const v={elevationStops:[],colorStops:[]},S=(s.elevationStops.length-1)/(n-1);for(let P=0;P<s.elevationStops.length-.5;P+=S)v.elevationStops.push(s.elevationStops[Math.round(P)]),v.colorStops.push(s.colorStops[Math.round(P)]);return Ot(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),v}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(n,s,f){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const v=this._createColorRamp(s),S=new ai({width:v.colorStops.length,height:1}),P=new ai({width:v.colorStops.length,height:1});for(let D=0;D<v.elevationStops.length;D++){const R=Dg(v.elevationStops[D],f);P.setPixel(0,D,new _r(R.r/255,R.g/255,R.b/255,1)),S.setPixel(0,D,v.colorStops[D])}return this.colorRampTextures={elevationTexture:new zc(n,P,n.gl.RGBA),colorTexture:new zc(n,S,n.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const Mg=Sn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Qf}=Mg;function Js(l,n,s){const f=s.patternDependencies;let v=!1;for(const S of n){const P=S.paint.get(`${l}-pattern`);P.isConstant()||(v=!0);const D=P.constantOr(null);D&&(v=!0,f[D.to]=!0,f[D.from]=!0)}return v}function lp(l,n,s,f,v){const{zoom:S}=f,P=v.patternDependencies;for(const D of n){const R=D.paint.get(`${l}-pattern`).value;if(R.kind!=="constant"){let O=R.evaluate({zoom:S-1},s,{},v.availableImages),j=R.evaluate({zoom:S},s,{},v.availableImages),q=R.evaluate({zoom:S+1},s,{},v.availableImages);O=O&&O.name?O.name:O,j=j&&j.name?j.name:j,q=q&&q.name?q.name:q,P[O]=!0,P[j]=!0,P[q]=!0,s.patterns[D.id]={min:O,mid:j,max:q}}}return s}function Cm(l,n,s,f,v){let S;if(v===(function(P,D,R,O){let j=0;for(let q=D,Z=R-O;q<R;q+=O)j+=(P[Z]-P[q])*(P[q+1]+P[Z+1]),Z=q;return j})(l,n,s,f)>0)for(let P=n;P<s;P+=f)S=Im(P/f|0,l[P],l[P+1],S);else for(let P=s-f;P>=n;P-=f)S=Im(P/f|0,l[P],l[P+1],S);return S&&Fc(S,S.next)&&(Xf(S),S=S.next),S}function _s(l,n){if(!l)return l;n||(n=l);let s,f=l;do if(s=!1,f.steiner||!Fc(f,f.next)&&Gn(f.prev,f,f.next)!==0)f=f.next;else{if(Xf(f),f=n=f.prev,f===f.next)break;s=!0}while(s||f!==n);return n}function Ki(l,n,s,f,v,S,P){if(!l)return;!P&&S&&(function(R,O,j,q){let Z=R;do Z.z===0&&(Z.z=bs(Z.x,Z.y,O,j,q)),Z.prevZ=Z.prev,Z.nextZ=Z.next,Z=Z.next;while(Z!==R);Z.prevZ.nextZ=null,Z.prevZ=null,(function(J){let te,oe=1;do{let ue,pe=J;J=null;let Le=null;for(te=0;pe;){te++;let Se=pe,De=0;for(let Xe=0;Xe<oe&&(De++,Se=Se.nextZ,Se);Xe++);let Ge=oe;for(;De>0||Ge>0&&Se;)De!==0&&(Ge===0||!Se||pe.z<=Se.z)?(ue=pe,pe=pe.nextZ,De--):(ue=Se,Se=Se.nextZ,Ge--),Le?Le.nextZ=ue:J=ue,ue.prevZ=Le,Le=ue;pe=Se}Le.nextZ=null,oe*=2}while(te>1)})(Z)})(l,f,v,S);let D=l;for(;l.prev!==l.next;){const R=l.prev,O=l.next;if(S?Dm(l,f,v,S):Tg(l))n.push(R.i,l.i,O.i),Xf(l),l=O.next,D=O.next;else if((l=O)===D){P?P===1?Ki(l=Eg(_s(l),n),n,s,f,v,S,2):P===2&&Mm(l,n,s,f,v,S):Ki(_s(l),n,s,f,v,S,1);break}}}function Tg(l){const n=l.prev,s=l,f=l.next;if(Gn(n,s,f)>=0)return!1;const v=n.x,S=s.x,P=f.x,D=n.y,R=s.y,O=f.y,j=Math.min(v,S,P),q=Math.min(D,R,O),Z=Math.max(v,S,P),J=Math.max(D,R,O);let te=f.next;for(;te!==n;){if(te.x>=j&&te.x<=Z&&te.y>=q&&te.y<=J&&Hh(v,D,S,R,P,O,te.x,te.y)&&Gn(te.prev,te,te.next)>=0)return!1;te=te.next}return!0}function Dm(l,n,s,f){const v=l.prev,S=l,P=l.next;if(Gn(v,S,P)>=0)return!1;const D=v.x,R=S.x,O=P.x,j=v.y,q=S.y,Z=P.y,J=Math.min(D,R,O),te=Math.min(j,q,Z),oe=Math.max(D,R,O),ue=Math.max(j,q,Z),pe=bs(J,te,n,s,f),Le=bs(oe,ue,n,s,f);let Se=l.prevZ,De=l.nextZ;for(;Se&&Se.z>=pe&&De&&De.z<=Le;){if(Se.x>=J&&Se.x<=oe&&Se.y>=te&&Se.y<=ue&&Se!==v&&Se!==P&&Hh(D,j,R,q,O,Z,Se.x,Se.y)&&Gn(Se.prev,Se,Se.next)>=0||(Se=Se.prevZ,De.x>=J&&De.x<=oe&&De.y>=te&&De.y<=ue&&De!==v&&De!==P&&Hh(D,j,R,q,O,Z,De.x,De.y)&&Gn(De.prev,De,De.next)>=0))return!1;De=De.nextZ}for(;Se&&Se.z>=pe;){if(Se.x>=J&&Se.x<=oe&&Se.y>=te&&Se.y<=ue&&Se!==v&&Se!==P&&Hh(D,j,R,q,O,Z,Se.x,Se.y)&&Gn(Se.prev,Se,Se.next)>=0)return!1;Se=Se.prevZ}for(;De&&De.z<=Le;){if(De.x>=J&&De.x<=oe&&De.y>=te&&De.y<=ue&&De!==v&&De!==P&&Hh(D,j,R,q,O,Z,De.x,De.y)&&Gn(De.prev,De,De.next)>=0)return!1;De=De.nextZ}return!0}function Eg(l,n){let s=l;do{const f=s.prev,v=s.next.next;!Fc(f,v)&&Em(f,s,s.next,v)&&_o(f,v)&&_o(v,f)&&(n.push(f.i,s.i,v.i),Xf(s),Xf(s.next),s=l=v),s=s.next}while(s!==l);return _s(s)}function Mm(l,n,s,f,v,S){let P=l;do{let D=P.next.next;for(;D!==P.prev;){if(P.i!==D.i&&Fa(P,D)){let R=Rm(P,D);return P=_s(P,P.next),R=_s(R,R.next),Ki(P,n,s,f,v,S,0),void Ki(R,n,s,f,v,S,0)}D=D.next}P=P.next}while(P!==l)}function Tm(l,n){let s=l.x-n.x;return s===0&&(s=l.y-n.y,s===0)&&(s=(l.next.y-l.y)/(l.next.x-l.x)-(n.next.y-n.y)/(n.next.x-n.x)),s}function up(l,n){const s=(function(v,S){let P=S;const D=v.x,R=v.y;let O,j=-1/0;if(Fc(v,P))return P;do{if(Fc(v,P.next))return P.next;if(R<=P.y&&R>=P.next.y&&P.next.y!==P.y){const oe=P.x+(R-P.y)*(P.next.x-P.x)/(P.next.y-P.y);if(oe<=D&&oe>j&&(j=oe,O=P.x<P.next.x?P:P.next,oe===D))return O}P=P.next}while(P!==S);if(!O)return null;const q=O,Z=O.x,J=O.y;let te=1/0;P=O;do{if(D>=P.x&&P.x>=Z&&D!==P.x&&cp(R<J?D:j,R,Z,J,R<J?j:D,R,P.x,P.y)){const oe=Math.abs(R-P.y)/(D-P.x);_o(P,v)&&(oe<te||oe===te&&(P.x>O.x||P.x===O.x&&Rg(O,P)))&&(O=P,te=oe)}P=P.next}while(P!==q);return O})(l,n);if(!s)return n;const f=Rm(s,l);return _s(f,f.next),_s(s,s.next)}function Rg(l,n){return Gn(l.prev,l,n.prev)<0&&Gn(n.next,l,l.next)<0}function bs(l,n,s,f,v){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-s)*v|0)|l<<8))|l<<4))|l<<2))|l<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-f)*v|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function ia(l){let n=l,s=l;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==l);return s}function cp(l,n,s,f,v,S,P,D){return(v-P)*(n-D)>=(l-P)*(S-D)&&(l-P)*(f-D)>=(s-P)*(n-D)&&(s-P)*(S-D)>=(v-P)*(f-D)}function Hh(l,n,s,f,v,S,P,D){return!(l===P&&n===D)&&cp(l,n,s,f,v,S,P,D)}function Fa(l,n){return l.next.i!==n.i&&l.prev.i!==n.i&&!(function(s,f){let v=s;do{if(v.i!==s.i&&v.next.i!==s.i&&v.i!==f.i&&v.next.i!==f.i&&Em(v,v.next,s,f))return!0;v=v.next}while(v!==s);return!1})(l,n)&&(_o(l,n)&&_o(n,l)&&(function(s,f){let v=s,S=!1;const P=(s.x+f.x)/2,D=(s.y+f.y)/2;do v.y>D!=v.next.y>D&&v.next.y!==v.y&&P<(v.next.x-v.x)*(D-v.y)/(v.next.y-v.y)+v.x&&(S=!S),v=v.next;while(v!==s);return S})(l,n)&&(Gn(l.prev,l,n.prev)||Gn(l,n.prev,n))||Fc(l,n)&&Gn(l.prev,l,l.next)>0&&Gn(n.prev,n,n.next)>0)}function Gn(l,n,s){return(n.y-l.y)*(s.x-n.x)-(n.x-l.x)*(s.y-n.y)}function Fc(l,n){return l.x===n.x&&l.y===n.y}function Em(l,n,s,f){const v=ii(Gn(l,n,s)),S=ii(Gn(l,n,f)),P=ii(Gn(s,f,l)),D=ii(Gn(s,f,n));return v!==S&&P!==D||!(v!==0||!vn(l,s,n))||!(S!==0||!vn(l,f,n))||!(P!==0||!vn(s,l,f))||!(D!==0||!vn(s,n,f))}function vn(l,n,s){return n.x<=Math.max(l.x,s.x)&&n.x>=Math.min(l.x,s.x)&&n.y<=Math.max(l.y,s.y)&&n.y>=Math.min(l.y,s.y)}function ii(l){return l>0?1:l<0?-1:0}function _o(l,n){return Gn(l.prev,l,l.next)<0?Gn(l,n,l.next)>=0&&Gn(l,l.prev,n)>=0:Gn(l,n,l.prev)<0||Gn(l,l.next,n)<0}function Rm(l,n){const s=Kf(l.i,l.x,l.y),f=Kf(n.i,n.x,n.y),v=l.next,S=n.prev;return l.next=n,n.prev=l,s.next=v,v.prev=s,f.next=s,s.prev=f,S.next=f,f.prev=S,f}function Im(l,n,s,f){const v=Kf(l,n,s);return f?(v.next=f.next,v.prev=f,f.next.prev=v,f.next=v):(v.prev=v,v.next=v),v}function Xf(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function Kf(l,n,s){return{i:l,x:n,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Na{constructor(n,s){if(s>n)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=n,this._minGranularity=s}getGranularityForZoomLevel(n){return Math.max(Math.floor(this._baseZoomGranularity/(1<<n)),this._minGranularity,1)}}class Ji{constructor(n){this.fill=n.fill,this.line=n.line,this.tile=n.tile,this.stencil=n.stencil,this.circle=n.circle}}Ji.noSubdivision=new Ji({fill:new Na(0,0),line:new Na(0,0),tile:new Na(0,0),stencil:new Na(0,0),circle:1}),Rt("SubdivisionGranularityExpression",Na),Rt("SubdivisionGranularitySetting",Ji);const Nc=-32768,oi=32767;class Ig{constructor(n,s){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=n,this._granularityCellSize=Ct/n,this._canonical=s}_getKey(n,s){return(n+=32768)<<16|s+32768}_vertexToIndex(n,s){if(n<-32768||s<-32768||n>32767||s>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const f=0|Math.round(n),v=0|Math.round(s),S=this._getKey(f,v);if(this._vertexDictionary.has(S))return this._vertexDictionary.get(S);const P=this._vertexBuffer.length/2;return this._vertexDictionary.set(S,P),this._vertexBuffer.push(f,v),P}_subdivideTrianglesScanline(n){if(this._granularity<2)return(function(v,S){const P=[];for(let D=0;D<S.length;D+=3){const R=S[D],O=S[D+1],j=S[D+2],q=v[2*R],Z=v[2*R+1];(v[2*O]-q)*(v[2*j+1]-Z)-(v[2*O+1]-Z)*(v[2*j]-q)>0?(P.push(R),P.push(j),P.push(O)):(P.push(R),P.push(O),P.push(j))}return P})(this._vertexBuffer,n);const s=[],f=n.length;for(let v=0;v<f;v+=3){const S=[n[v+0],n[v+1],n[v+2]],P=[this._vertexBuffer[2*n[v+0]+0],this._vertexBuffer[2*n[v+0]+1],this._vertexBuffer[2*n[v+1]+0],this._vertexBuffer[2*n[v+1]+1],this._vertexBuffer[2*n[v+2]+0],this._vertexBuffer[2*n[v+2]+1]];let D=1/0,R=1/0,O=-1/0,j=-1/0;for(let oe=0;oe<3;oe++){const ue=P[2*oe],pe=P[2*oe+1];D=Math.min(D,ue),O=Math.max(O,ue),R=Math.min(R,pe),j=Math.max(j,pe)}if(D===O||R===j)continue;const q=Math.floor(D/this._granularityCellSize),Z=Math.ceil(O/this._granularityCellSize),J=Math.floor(R/this._granularityCellSize),te=Math.ceil(j/this._granularityCellSize);if(q!==Z||J!==te)for(let oe=J;oe<te;oe++){const ue=this._scanlineGenerateVertexRingForCellRow(oe,P,S);Bu(this._vertexBuffer,ue,s)}else s.push(...S)}return s}_scanlineGenerateVertexRingForCellRow(n,s,f){const v=n*this._granularityCellSize,S=v+this._granularityCellSize,P=[];for(let D=0;D<3;D++){const R=s[2*D],O=s[2*D+1],j=s[2*(D+1)%6],q=s[(2*(D+1)+1)%6],Z=s[2*(D+2)%6],J=s[(2*(D+2)+1)%6],te=j-R,oe=q-O,ue=te===0,pe=oe===0,Le=(v-O)/oe,Se=(S-O)/oe,De=Math.min(Le,Se),Ge=Math.max(Le,Se);if(!pe&&(De>=1||Ge<=0)||pe&&(O<v||O>S)){q>=v&&q<=S&&P.push(f[(D+1)%3]);continue}!pe&&De>0&&P.push(this._vertexToIndex(R+te*De,O+oe*De));const Xe=R+te*Math.max(De,0),dt=R+te*Math.min(Ge,1);ue||this._generateIntraEdgeVertices(P,R,O,j,q,Xe,dt),!pe&&Ge<1&&P.push(this._vertexToIndex(R+te*Ge,O+oe*Ge)),(pe||q>=v&&q<=S)&&P.push(f[(D+1)%3]),!pe&&(q<=v||q>=S)&&this._generateInterEdgeVertices(P,R,O,j,q,Z,J,dt,v,S)}return P}_generateIntraEdgeVertices(n,s,f,v,S,P,D){const R=v-s,O=S-f,j=O===0,q=j?Math.min(s,v):Math.min(P,D),Z=j?Math.max(s,v):Math.max(P,D),J=Math.floor(q/this._granularityCellSize)+1,te=Math.ceil(Z/this._granularityCellSize)-1;if(j?s<v:P<D)for(let oe=J;oe<=te;oe++){const ue=oe*this._granularityCellSize;n.push(this._vertexToIndex(ue,f+O*(ue-s)/R))}else for(let oe=te;oe>=J;oe--){const ue=oe*this._granularityCellSize;n.push(this._vertexToIndex(ue,f+O*(ue-s)/R))}}_generateInterEdgeVertices(n,s,f,v,S,P,D,R,O,j){const q=S-f,Z=P-v,J=D-S,te=(O-S)/J,oe=(j-S)/J,ue=Math.min(te,oe),pe=Math.max(te,oe),Le=v+Z*ue;let Se=Math.floor(Math.min(Le,R)/this._granularityCellSize)+1,De=Math.ceil(Math.max(Le,R)/this._granularityCellSize)-1,Ge=R<Le;const Xe=J===0;if(Xe&&(D===O||D===j))return;if(Xe||ue>=1||pe<=0){const Dt=f-D,_t=P+(s-P)*Math.min((O-D)/Dt,(j-D)/Dt);Se=Math.floor(Math.min(_t,R)/this._granularityCellSize)+1,De=Math.ceil(Math.max(_t,R)/this._granularityCellSize)-1,Ge=R<_t}const dt=q>0?j:O;if(Ge)for(let Dt=Se;Dt<=De;Dt++)n.push(this._vertexToIndex(Dt*this._granularityCellSize,dt));else for(let Dt=De;Dt>=Se;Dt--)n.push(this._vertexToIndex(Dt*this._granularityCellSize,dt))}_generateOutline(n){const s=[];for(const f of n){const v=bo(f,this._granularity,!0),S=this._pointArrayToIndices(v),P=[];for(let D=1;D<S.length;D++)P.push(S[D-1]),P.push(S[D]);s.push(P)}return s}_handlePoles(n){let s=!1,f=!1;this._canonical&&(this._canonical.y===0&&(s=!0),this._canonical.y===(1<<this._canonical.z)-1&&(f=!0)),(s||f)&&this._fillPoles(n,s,f)}_ensureNoPoleVertices(){const n=this._vertexBuffer;for(let s=0;s<n.length;s+=2){const f=n[s+1];f===Nc&&(n[s+1]=-32767),f===oi&&(n[s+1]=32766)}}_generatePoleQuad(n,s,f,v,S,P){v>S!=(P===Nc)?(n.push(s),n.push(f),n.push(this._vertexToIndex(v,P)),n.push(f),n.push(this._vertexToIndex(S,P)),n.push(this._vertexToIndex(v,P))):(n.push(f),n.push(s),n.push(this._vertexToIndex(v,P)),n.push(this._vertexToIndex(S,P)),n.push(f),n.push(this._vertexToIndex(v,P)))}_fillPoles(n,s,f){const v=this._vertexBuffer,S=Ct,P=n.length;for(let D=2;D<P;D+=3){const R=n[D-2],O=n[D-1],j=n[D],q=v[2*R],Z=v[2*R+1],J=v[2*O],te=v[2*O+1],oe=v[2*j],ue=v[2*j+1];s&&(Z===0&&te===0&&this._generatePoleQuad(n,R,O,q,J,Nc),te===0&&ue===0&&this._generatePoleQuad(n,O,j,J,oe,Nc),ue===0&&Z===0&&this._generatePoleQuad(n,j,R,oe,q,Nc)),f&&(Z===S&&te===S&&this._generatePoleQuad(n,R,O,q,J,oi),te===S&&ue===S&&this._generatePoleQuad(n,O,j,J,oe,oi),ue===S&&Z===S&&this._generatePoleQuad(n,j,R,oe,q,oi))}}_initializeVertices(n){for(let s=0;s<n.length;s+=2)this._vertexToIndex(n[s],n[s+1])}subdividePolygonInternal(n,s){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:f,holeIndices:v}=(function(D){const R=[],O=[];for(const j of D)if(j.length!==0){j!==D[0]&&R.push(O.length/2);for(let q=0;q<j.length;q++)O.push(j[q].x),O.push(j[q].y)}return{flattened:O,holeIndices:R}})(n);let S;this._initializeVertices(f);try{const D=(function(O,j,q=2){const Z=j&&j.length,J=Z?j[0]*q:O.length;let te=Cm(O,0,J,q,!0);const oe=[];if(!te||te.next===te.prev)return oe;let ue,pe,Le;if(Z&&(te=(function(Se,De,Ge,Xe){const dt=[];for(let Dt=0,_t=De.length;Dt<_t;Dt++){const Mt=Cm(Se,De[Dt]*Xe,Dt<_t-1?De[Dt+1]*Xe:Se.length,Xe,!1);Mt===Mt.next&&(Mt.steiner=!0),dt.push(ia(Mt))}dt.sort(Tm);for(let Dt=0;Dt<dt.length;Dt++)Ge=up(dt[Dt],Ge);return Ge})(O,j,te,q)),O.length>80*q){ue=O[0],pe=O[1];let Se=ue,De=pe;for(let Ge=q;Ge<J;Ge+=q){const Xe=O[Ge],dt=O[Ge+1];Xe<ue&&(ue=Xe),dt<pe&&(pe=dt),Xe>Se&&(Se=Xe),dt>De&&(De=dt)}Le=Math.max(Se-ue,De-pe),Le=Le!==0?32767/Le:0}return Ki(te,oe,q,ue,pe,Le,0),oe})(f,v),R=this._convertIndices(f,D);S=this._subdivideTrianglesScanline(R)}catch(D){console.error(D)}let P=[];return s&&(P=this._generateOutline(n)),this._ensureNoPoleVertices(),this._handlePoles(S),{verticesFlattened:this._vertexBuffer,indicesTriangles:S,indicesLineList:P}}_convertIndices(n,s){const f=[];for(let v=0;v<s.length;v++)f.push(this._vertexToIndex(n[2*s[v]],n[2*s[v]+1]));return f}_pointArrayToIndices(n){const s=[];for(let f=0;f<n.length;f++){const v=n[f];s.push(this._vertexToIndex(v.x,v.y))}return s}}function Bl(l,n,s,f=!0){return new Ig(s,n).subdividePolygonInternal(l,f)}function bo(l,n,s=!1){if(!l||l.length<1)return[];if(l.length<2)return[];const f=l[0],v=l[l.length-1],S=s&&(f.x!==v.x||f.y!==v.y);if(n<2)return S?[...l,l[0]]:[...l];const P=Math.floor(Ct/n),D=[];D.push(new C(l[0].x,l[0].y));const R=l.length,O=S?R:R-1;for(let j=0;j<O;j++){const q=l[j],Z=j<R-1?l[j+1]:l[0],J=q.x,te=q.y,oe=Z.x,ue=Z.y,pe=J!==oe,Le=te!==ue;if(!pe&&!Le)continue;const Se=oe-J,De=ue-te,Ge=Math.abs(Se),Xe=Math.abs(De);let dt=J,Dt=te;for(;;){const Mt=Se>0?(Math.floor(dt/P)+1)*P:(Math.ceil(dt/P)-1)*P,Ht=De>0?(Math.floor(Dt/P)+1)*P:(Math.ceil(Dt/P)-1)*P,bt=Math.abs(dt-Mt),St=Math.abs(Dt-Ht),tt=Math.abs(dt-oe),Kt=Math.abs(Dt-ue),rr=pe?bt/Ge:Number.POSITIVE_INFINITY,Bt=Le?St/Xe:Number.POSITIVE_INFINITY;if((tt<=bt||!pe)&&(Kt<=St||!Le))break;if(rr<Bt&&pe||!Le){dt=Mt,Dt+=De*rr;const Nt=new C(dt,Math.round(Dt));D[D.length-1].x===Nt.x&&D[D.length-1].y===Nt.y||D.push(Nt)}else{dt+=Se*Bt,Dt=Ht;const Nt=new C(Math.round(dt),Dt);D[D.length-1].x===Nt.x&&D[D.length-1].y===Nt.y||D.push(Nt)}}const _t=new C(oe,ue);D[D.length-1].x===_t.x&&D[D.length-1].y===_t.y||D.push(_t)}return D}function Bu(l,n,s){if(n.length===0)throw new Error("Subdivision vertex ring is empty.");let f=0,v=l[2*n[0]];for(let R=1;R<n.length;R++){const O=l[2*n[R]];O<v&&(v=O,f=R)}const S=n.length;let P=f,D=(P+1)%S;for(;;){const R=P-1>=0?P-1:S-1,O=(D+1)%S,j=l[2*n[R]],q=l[2*n[O]],Z=l[2*n[P]],J=l[2*n[P]+1],te=l[2*n[D]+1];let oe=!1;if(j<q)oe=!0;else if(j>q)oe=!1;else{const ue=te-J,pe=-(l[2*n[D]]-Z),Le=J<te?1:-1;((j-Z)*ue+(l[2*n[R]+1]-J)*pe)*Le>((q-Z)*ue+(l[2*n[O]+1]-J)*pe)*Le&&(oe=!0)}if(oe){const ue=n[R],pe=n[P],Le=n[D];ue!==pe&&ue!==Le&&pe!==Le&&s.push(Le,pe,ue),P--,P<0&&(P=S-1)}else{const ue=n[O],pe=n[P],Le=n[D];ue!==pe&&ue!==Le&&pe!==Le&&s.push(Le,pe,ue),D++,D>=S&&(D=0)}if(R===O)break}}function hp(l,n,s,f,v,S,P,D,R){const O=v.length/2,j=P&&D&&R;if(O<Mr.MAX_VERTEX_ARRAY_LENGTH){const q=n.prepareSegment(O,s,f),Z=q.vertexLength;for(let oe=0;oe<S.length;oe+=3)f.emplaceBack(Z+S[oe],Z+S[oe+1],Z+S[oe+2]);let J,te;q.vertexLength+=O,q.primitiveLength+=S.length/3,j&&(te=P.prepareSegment(O,s,D),J=te.vertexLength,te.vertexLength+=O);for(let oe=0;oe<v.length;oe+=2)l(v[oe],v[oe+1]);if(j)for(let oe=0;oe<R.length;oe++){const ue=R[oe];for(let pe=1;pe<ue.length;pe+=2)D.emplaceBack(J+ue[pe-1],J+ue[pe]);te.primitiveLength+=ue.length/2}}else(function(q,Z,J,te,oe,ue){const pe=[];for(let Xe=0;Xe<te.length/2;Xe++)pe.push(-1);const Le={count:0};let Se=0,De=q.getOrCreateLatestSegment(Z,J),Ge=De.vertexLength;for(let Xe=2;Xe<oe.length;Xe+=3){const dt=oe[Xe-2],Dt=oe[Xe-1],_t=oe[Xe];let Mt=pe[dt]<Se,Ht=pe[Dt]<Se,bt=pe[_t]<Se;De.vertexLength+((Mt?1:0)+(Ht?1:0)+(bt?1:0))>Mr.MAX_VERTEX_ARRAY_LENGTH&&(De=q.createNewSegment(Z,J),Se=Le.count,Mt=!0,Ht=!0,bt=!0,Ge=0);const St=jc(pe,te,ue,Le,dt,Mt,De),tt=jc(pe,te,ue,Le,Dt,Ht,De),Kt=jc(pe,te,ue,Le,_t,bt,De);J.emplaceBack(Ge+St-Se,Ge+tt-Se,Ge+Kt-Se),De.primitiveLength++}})(n,s,f,v,S,l),j&&(function(q,Z,J,te,oe,ue){const pe=[];for(let Xe=0;Xe<te.length/2;Xe++)pe.push(-1);const Le={count:0};let Se=0,De=q.getOrCreateLatestSegment(Z,J),Ge=De.vertexLength;for(let Xe=0;Xe<oe.length;Xe++){const dt=oe[Xe];for(let Dt=1;Dt<oe[Xe].length;Dt+=2){const _t=dt[Dt-1],Mt=dt[Dt];let Ht=pe[_t]<Se,bt=pe[Mt]<Se;De.vertexLength+((Ht?1:0)+(bt?1:0))>Mr.MAX_VERTEX_ARRAY_LENGTH&&(De=q.createNewSegment(Z,J),Se=Le.count,Ht=!0,bt=!0,Ge=0);const St=jc(pe,te,ue,Le,_t,Ht,De),tt=jc(pe,te,ue,Le,Mt,bt,De);J.emplaceBack(Ge+St-Se,Ge+tt-Se),De.primitiveLength++}}})(P,s,D,v,R,l),n.forceNewSegmentOnNextPrepare(),P?.forceNewSegmentOnNextPrepare()}function jc(l,n,s,f,v,S,P){if(S){const D=f.count;return s(n[2*v],n[2*v+1]),l[v]=f.count,f.count++,P.vertexLength++,D}return l[v]}class Vo{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new He,this.indexArray=new Zr,this.indexArray2=new rn,this.programConfigurations=new ys(n.layers,n.zoom),this.segments=new Mr,this.segments2=new Mr,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(n,s,f){this.hasPattern=Js("fill",this.layers,s);const v=this.layers[0].layout.get("fill-sort-key"),S=!v.isConstant(),P=[];for(const{feature:D,id:R,index:O,sourceLayerIndex:j}of n){const q=this.layers[0]._featureFilter.needGeometry,Z=Fl(D,q);if(!this.layers[0]._featureFilter.filter(new Hr(this.zoom),Z,f))continue;const J=S?v.evaluate(Z,{},f,s.availableImages):void 0,te={id:R,properties:D.properties,type:D.type,sourceLayerIndex:j,index:O,geometry:q?Z.geometry:zl(D),patterns:{},sortKey:J};P.push(te)}S&&P.sort(((D,R)=>D.sortKey-R.sortKey));for(const D of P){const{geometry:R,index:O,sourceLayerIndex:j}=D;if(this.hasPattern){const q=lp("fill",this.layers,D,{zoom:this.zoom},s);this.patternFeatures.push(q)}else this.addFeature(D,R,O,f,{},s.subdivisionGranularity);s.featureIndex.insert(n[O].feature,R,O,j,this.index)}}update(n,s,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,{imagePositions:f})}addFeatures(n,s,f){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,s,f,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Qf),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,f,v,S,P){for(const D of Su(s,500)){const R=Bl(D,v,P.fill.getGranularityForZoomLevel(v.z)),O=this.layoutVertexArray;hp(((j,q)=>{O.emplaceBack(j,q)}),this.segments,this.layoutVertexArray,this.indexArray,R.verticesFlattened,R.indicesTriangles,this.segments2,this.indexArray2,R.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{imagePositions:S,canonical:v})}}let km,Bc;Rt("FillBucket",Vo,{omit:["layers","patternFeatures"]});var Jf={get paint(){return Bc=Bc||new pa({"fill-antialias":new Lt(Oe.paint_fill["fill-antialias"]),"fill-opacity":new Vt(Oe.paint_fill["fill-opacity"]),"fill-color":new Vt(Oe.paint_fill["fill-color"]),"fill-outline-color":new Vt(Oe.paint_fill["fill-outline-color"]),"fill-translate":new Lt(Oe.paint_fill["fill-translate"]),"fill-translate-anchor":new Lt(Oe.paint_fill["fill-translate-anchor"]),"fill-pattern":new hs(Oe.paint_fill["fill-pattern"])})},get layout(){return km=km||new pa({"fill-sort-key":new Vt(Oe.layout_fill["fill-sort-key"])})}};class ed extends Qi{constructor(n,s){super(n,Jf,s)}recalculate(n,s){super.recalculate(n,s);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Vo(n)}queryRadius(){return ga(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:n,geometry:s,transform:f,pixelsToTileUnits:v}){return gm($f(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-f.bearingInRadians,v),s)}isTileClipped(){return!0}}const $h=Sn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),kg=Sn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Ug}=$h;class el{constructor(n,s,f,v,S){this.properties={},this.extent=f,this.type=0,this.id=void 0,this._pbf=n,this._geometry=-1,this._keys=v,this._values=S,n.readFields(Og,this,s)}loadGeometry(){const n=this._pbf;n.pos=this._geometry;const s=n.readVarint()+n.pos,f=[];let v,S=1,P=0,D=0,R=0;for(;n.pos<s;){if(P<=0){const O=n.readVarint();S=7&O,P=O>>3}if(P--,S===1||S===2)D+=n.readSVarint(),R+=n.readSVarint(),S===1&&(v&&f.push(v),v=[]),v&&v.push(new C(D,R));else{if(S!==7)throw new Error(`unknown command ${S}`);v&&v.push(v[0].clone())}}return v&&f.push(v),f}bbox(){const n=this._pbf;n.pos=this._geometry;const s=n.readVarint()+n.pos;let f=1,v=0,S=0,P=0,D=1/0,R=-1/0,O=1/0,j=-1/0;for(;n.pos<s;){if(v<=0){const q=n.readVarint();f=7&q,v=q>>3}if(v--,f===1||f===2)S+=n.readSVarint(),P+=n.readSVarint(),S<D&&(D=S),S>R&&(R=S),P<O&&(O=P),P>j&&(j=P);else if(f!==7)throw new Error(`unknown command ${f}`)}return[D,O,R,j]}toGeoJSON(n,s,f){const v=this.extent*Math.pow(2,f),S=this.extent*n,P=this.extent*s,D=this.loadGeometry();function R(Z){return[360*(Z.x+S)/v-180,360/Math.PI*Math.atan(Math.exp((1-2*(Z.y+P)/v)*Math.PI))-90]}function O(Z){return Z.map(R)}let j;if(this.type===1){const Z=[];for(const te of D)Z.push(te[0]);const J=O(Z);j=Z.length===1?{type:"Point",coordinates:J[0]}:{type:"MultiPoint",coordinates:J}}else if(this.type===2){const Z=D.map(O);j=Z.length===1?{type:"LineString",coordinates:Z[0]}:{type:"MultiLineString",coordinates:Z}}else{if(this.type!==3)throw new Error("unknown feature type");{const Z=(function(te){const oe=te.length;if(oe<=1)return[te];const ue=[];let pe,Le;for(let Se=0;Se<oe;Se++){const De=fp(te[Se]);De!==0&&(Le===void 0&&(Le=De<0),Le===De<0?(pe&&ue.push(pe),pe=[te[Se]]):pe&&pe.push(te[Se]))}return pe&&ue.push(pe),ue})(D),J=[];for(const te of Z)J.push(te.map(O));j=J.length===1?{type:"Polygon",coordinates:J[0]}:{type:"MultiPolygon",coordinates:J}}}const q={type:"Feature",geometry:j,properties:this.properties};return this.id!=null&&(q.id=this.id),q}}function Og(l,n,s){l===1?n.id=s.readVarint():l===2?(function(f,v){const S=f.readVarint()+f.pos;for(;f.pos<S;){const P=v._keys[f.readVarint()],D=v._values[f.readVarint()];v.properties[P]=D}})(s,n):l===3?n.type=s.readVarint():l===4&&(n._geometry=s.pos)}function fp(l){let n=0;for(let s,f,v=0,S=l.length,P=S-1;v<S;P=v++)s=l[v],f=l[P],n+=(f.x-s.x)*(s.y+f.y);return n}el.types=["Unknown","Point","LineString","Polygon"];class Um{constructor(n,s){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(p1,this,s),this.length=this._features.length}feature(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];const s=this._pbf.readVarint()+this._pbf.pos;return new el(this._pbf,s,this.extent,this._keys,this._values)}}function p1(l,n,s){l===15?n.version=s.readVarint():l===1?n.name=s.readString():l===5?n.extent=s.readVarint():l===2?n._features.push(s.pos):l===3?n._keys.push(s.readString()):l===4&&n._values.push((function(f){let v=null;const S=f.readVarint()+f.pos;for(;f.pos<S;){const P=f.readVarint()>>3;v=P===1?f.readString():P===2?f.readFloat():P===3?f.readDouble():P===4?f.readVarint64():P===5?f.readVarint():P===6?f.readSVarint():P===7?f.readBoolean():null}if(v==null)throw new Error("unknown feature value");return v})(s))}class Lg{constructor(n,s){this.layers=n.readFields(nn,{},s)}}function nn(l,n,s){if(l===3){const f=new Um(s,s.readVarint()+s.pos);f.length&&(n[f.name]=f)}}const fn=Math.pow(2,13);function Cr(l,n,s,f,v,S,P,D){l.emplaceBack(n,s,2*Math.floor(f*fn)+P,v*fn*2,S*fn*2,Math.round(D))}class zr{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Ye,this.centroidVertexArray=new Ze,this.indexArray=new Zr,this.programConfigurations=new ys(n.layers,n.zoom),this.segments=new Mr,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(n,s,f){this.features=[],this.hasPattern=Js("fill-extrusion",this.layers,s);for(const{feature:v,id:S,index:P,sourceLayerIndex:D}of n){const R=this.layers[0]._featureFilter.needGeometry,O=Fl(v,R);if(!this.layers[0]._featureFilter.filter(new Hr(this.zoom),O,f))continue;const j={id:S,sourceLayerIndex:D,index:P,geometry:R?O.geometry:zl(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push(lp("fill-extrusion",this.layers,j,{zoom:this.zoom},s)):this.addFeature(j,j.geometry,P,f,{},s.subdivisionGranularity),s.featureIndex.insert(v,j.geometry,P,D,this.index,!0)}}addFeatures(n,s,f){for(const v of this.features){const{geometry:S}=v;this.addFeature(v,S,v.index,s,f,n.subdivisionGranularity)}}update(n,s,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,{imagePositions:f})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ug),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,kg.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,f,v,S,P){for(const D of Su(s,500)){const R={x:0,y:0,sampleCount:0},O=this.layoutVertexArray.length;this.processPolygon(R,v,n,D,P);const j=this.layoutVertexArray.length-O,q=Math.floor(R.x/R.sampleCount),Z=Math.floor(R.y/R.sampleCount);for(let J=0;J<j;J++)this.centroidVertexArray.emplaceBack(q,Z)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{imagePositions:S,canonical:v})}processPolygon(n,s,f,v,S){if(v.length<1||ql(v[0]))return;for(const q of v)q.length!==0&&an(n,q);const P={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},D=S.fill.getGranularityForZoomLevel(s.z),R=el.types[f.type]==="Polygon";for(const q of v){if(q.length===0||ql(q))continue;const Z=bo(q,D,R);this._generateSideFaces(Z,P)}if(!R)return;const O=Bl(v,s,D,!1),j=this.layoutVertexArray;hp(((q,Z)=>{Cr(j,q,Z,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,O.verticesFlattened,O.indicesTriangles)}_generateSideFaces(n,s){let f=0;for(let v=1;v<n.length;v++){const S=n[v],P=n[v-1];if(xo(S,P))continue;s.segment.vertexLength+4>Mr.MAX_VERTEX_ARRAY_LENGTH&&(s.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const D=S.sub(P)._perp()._unit(),R=P.dist(S);f+R>32768&&(f=0),Cr(this.layoutVertexArray,S.x,S.y,D.x,D.y,0,0,f),Cr(this.layoutVertexArray,S.x,S.y,D.x,D.y,0,1,f),f+=R,Cr(this.layoutVertexArray,P.x,P.y,D.x,D.y,0,0,f),Cr(this.layoutVertexArray,P.x,P.y,D.x,D.y,0,1,f);const O=s.segment.vertexLength;this.indexArray.emplaceBack(O,O+2,O+1),this.indexArray.emplaceBack(O+1,O+2,O+3),s.segment.vertexLength+=4,s.segment.primitiveLength+=2}}}function an(l,n){for(let s=0;s<n.length;s++){const f=n[s];s===n.length-1&&n[0].x===f.x&&n[0].y===f.y||(l.x+=f.x,l.y+=f.y,l.sampleCount++)}}function xo(l,n){return l.x===n.x&&(l.x<0||l.x>Ct)||l.y===n.y&&(l.y<0||l.y>Ct)}function ql(l){return l.every((n=>n.x<0))||l.every((n=>n.x>Ct))||l.every((n=>n.y<0))||l.every((n=>n.y>Ct))}let qc;Rt("FillExtrusionBucket",zr,{omit:["layers","features"]});var Om={get paint(){return qc=qc||new pa({"fill-extrusion-opacity":new Lt(Oe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Vt(Oe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Lt(Oe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Lt(Oe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new hs(Oe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Vt(Oe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Vt(Oe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Lt(Oe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Hl extends Qi{constructor(n,s){super(n,Om,s)}createBucket(n){return new zr(n)}queryRadius(){return ga(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:n,feature:s,featureState:f,geometry:v,transform:S,pixelsToTileUnits:P,pixelPosMatrix:D}){const R=$f(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-S.bearingInRadians,P),O=this.paint.get("fill-extrusion-height").evaluate(s,f),j=this.paint.get("fill-extrusion-base").evaluate(s,f),q=(function(J,te){const oe=[];for(const ue of J){const pe=[ue.x,ue.y,0,1];It(pe,pe,te),oe.push(new C(pe[0]/pe[3],pe[1]/pe[3]))}return oe})(R,D),Z=(function(J,te,oe,ue){const pe=[],Le=[],Se=ue[8]*te,De=ue[9]*te,Ge=ue[10]*te,Xe=ue[11]*te,dt=ue[8]*oe,Dt=ue[9]*oe,_t=ue[10]*oe,Mt=ue[11]*oe;for(const Ht of J){const bt=[],St=[];for(const tt of Ht){const Kt=tt.x,rr=tt.y,Bt=ue[0]*Kt+ue[4]*rr+ue[12],Nt=ue[1]*Kt+ue[5]*rr+ue[13],Ar=ue[2]*Kt+ue[6]*rr+ue[14],on=ue[3]*Kt+ue[7]*rr+ue[15],la=Ar+Ge,Ma=on+Xe,_i=Bt+dt,bi=Nt+Dt,Ta=Ar+_t,sn=on+Mt,Wn=new C((Bt+Se)/Ma,(Nt+De)/Ma);Wn.z=la/Ma,bt.push(Wn);const _a=new C(_i/sn,bi/sn);_a.z=Ta/sn,St.push(_a)}pe.push(bt),Le.push(St)}return[pe,Le]})(v,j,O,D);return(function(J,te,oe){let ue=1/0;gm(oe,te)&&(ue=$l(oe,te[0]));for(let pe=0;pe<te.length;pe++){const Le=te[pe],Se=J[pe];for(let De=0;De<Le.length-1;De++){const Ge=Le[De],Xe=[Ge,Le[De+1],Se[De+1],Se[De],Ge];Bf(oe,Xe)&&(ue=Math.min(ue,$l(oe,Xe)))}}return ue!==1/0&&ue})(Z[0],Z[1],q)}}function wn(l,n){return l.x*n.x+l.y*n.y}function $l(l,n){if(l.length===1){let s=0;const f=n[s++];let v;for(;!v||f.equals(v);)if(v=n[s++],!v)return 1/0;for(;s<n.length;s++){const S=n[s],P=l[0],D=v.sub(f),R=S.sub(f),O=P.sub(f),j=wn(D,D),q=wn(D,R),Z=wn(R,R),J=wn(O,D),te=wn(O,R),oe=j*Z-q*q,ue=(Z*J-q*te)/oe,pe=(j*te-q*J)/oe,Le=f.z*(1-ue-pe)+v.z*ue+S.z*pe;if(isFinite(Le))return Le}return 1/0}{let s=1/0;for(const f of n)s=Math.min(s,f.z);return s}}const Hc=Sn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Lm}=Hc,Go=Sn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Vh}=Go,td=Math.cos(Math.PI/180*37.5),zi=Math.pow(2,14)/.5;class rd{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((s=>{this.gradients[s.id]={}})),this.layoutVertexArray=new Pt,this.layoutVertexArray2=new xt,this.indexArray=new Zr,this.programConfigurations=new ys(n.layers,n.zoom),this.segments=new Mr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(n,s,f){this.hasPattern=Js("line",this.layers,s);const v=this.layers[0].layout.get("line-sort-key"),S=!v.isConstant(),P=[];for(const{feature:D,id:R,index:O,sourceLayerIndex:j}of n){const q=this.layers[0]._featureFilter.needGeometry,Z=Fl(D,q);if(!this.layers[0]._featureFilter.filter(new Hr(this.zoom),Z,f))continue;const J=S?v.evaluate(Z,{},f):void 0,te={id:R,properties:D.properties,type:D.type,sourceLayerIndex:j,index:O,geometry:q?Z.geometry:zl(D),patterns:{},sortKey:J};P.push(te)}S&&P.sort(((D,R)=>D.sortKey-R.sortKey));for(const D of P){const{geometry:R,index:O,sourceLayerIndex:j}=D;if(this.hasPattern){const q=lp("line",this.layers,D,{zoom:this.zoom},s);this.patternFeatures.push(q)}else this.addFeature(D,R,O,f,{},s.subdivisionGranularity);s.featureIndex.insert(n[O].feature,R,O,j,this.index)}}update(n,s,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,{imagePositions:f})}addFeatures(n,s,f){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,s,f,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,Vh)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Lm),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,f,v,S,P){const D=this.layers[0].layout,R=D.get("line-join").evaluate(n,{}),O=D.get("line-cap"),j=D.get("line-miter-limit"),q=D.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const Z of s)this.addLine(Z,n,R,O,j,q,v,P);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{imagePositions:S,canonical:v})}addLine(n,s,f,v,S,P,D,R){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,n=bo(n,D?R.line.getGranularityForZoomLevel(D.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Se=0;Se<n.length-1;Se++)this.totalDistance+=n[Se].dist(n[Se+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const O=el.types[s.type]==="Polygon";let j=n.length;for(;j>=2&&n[j-1].equals(n[j-2]);)j--;let q=0;for(;q<j-1&&n[q].equals(n[q+1]);)q++;if(j<(O?3:2))return;f==="bevel"&&(S=1.05);const Z=this.overscaling<=16?122880/(512*this.overscaling):0,J=this.segments.prepareSegment(10*j,this.layoutVertexArray,this.indexArray);let te,oe,ue,pe,Le;this.e1=this.e2=-1,O&&(te=n[j-2],Le=n[q].sub(te)._unit()._perp());for(let Se=q;Se<j;Se++){if(ue=Se===j-1?O?n[q+1]:void 0:n[Se+1],ue&&n[Se].equals(ue))continue;Le&&(pe=Le),te&&(oe=te),te=n[Se],Le=ue?ue.sub(te)._unit()._perp():pe,pe=pe||Le;let De=pe.add(Le);De.x===0&&De.y===0||De._unit();const Ge=pe.x*Le.x+pe.y*Le.y,Xe=De.x*Le.x+De.y*Le.y,dt=Xe!==0?1/Xe:1/0,Dt=2*Math.sqrt(2-2*Xe),_t=Xe<td&&oe&&ue,Mt=pe.x*Le.y-pe.y*Le.x>0;if(_t&&Se>q){const St=te.dist(oe);if(St>2*Z){const tt=te.sub(te.sub(oe)._mult(Z/St)._round());this.updateDistance(oe,tt),this.addCurrentVertex(tt,pe,0,0,J),oe=tt}}const Ht=oe&&ue;let bt=Ht?f:O?"butt":v;if(Ht&&bt==="round"&&(dt<P?bt="miter":dt<=2&&(bt="fakeround")),bt==="miter"&&dt>S&&(bt="bevel"),bt==="bevel"&&(dt>2&&(bt="flipbevel"),dt<S&&(bt="miter")),oe&&this.updateDistance(oe,te),bt==="miter")De._mult(dt),this.addCurrentVertex(te,De,0,0,J);else if(bt==="flipbevel"){if(dt>100)De=Le.mult(-1);else{const St=dt*pe.add(Le).mag()/pe.sub(Le).mag();De._perp()._mult(St*(Mt?-1:1))}this.addCurrentVertex(te,De,0,0,J),this.addCurrentVertex(te,De.mult(-1),0,0,J)}else if(bt==="bevel"||bt==="fakeround"){const St=-Math.sqrt(dt*dt-1),tt=Mt?St:0,Kt=Mt?0:St;if(oe&&this.addCurrentVertex(te,pe,tt,Kt,J),bt==="fakeround"){const rr=Math.round(180*Dt/Math.PI/20);for(let Bt=1;Bt<rr;Bt++){let Nt=Bt/rr;if(Nt!==.5){const on=Nt-.5;Nt+=Nt*on*(Nt-1)*((1.0904+Ge*(Ge*(3.55645-1.43519*Ge)-3.2452))*on*on+(.848013+Ge*(.215638*Ge-1.06021)))}const Ar=Le.sub(pe)._mult(Nt)._add(pe)._unit()._mult(Mt?-1:1);this.addHalfVertex(te,Ar.x,Ar.y,!1,Mt,0,J)}}ue&&this.addCurrentVertex(te,Le,-tt,-Kt,J)}else if(bt==="butt")this.addCurrentVertex(te,De,0,0,J);else if(bt==="square"){const St=oe?1:-1;this.addCurrentVertex(te,De,St,St,J)}else bt==="round"&&(oe&&(this.addCurrentVertex(te,pe,0,0,J),this.addCurrentVertex(te,pe,1,1,J,!0)),ue&&(this.addCurrentVertex(te,Le,-1,-1,J,!0),this.addCurrentVertex(te,Le,0,0,J)));if(_t&&Se<j-1){const St=te.dist(ue);if(St>2*Z){const tt=te.add(ue.sub(te)._mult(Z/St)._round());this.updateDistance(te,tt),this.addCurrentVertex(tt,Le,0,0,J),te=tt}}}}addCurrentVertex(n,s,f,v,S,P=!1){const D=s.y*v-s.x,R=-s.y-s.x*v;this.addHalfVertex(n,s.x+s.y*f,s.y-s.x*f,P,!1,f,S),this.addHalfVertex(n,D,R,P,!0,-v,S),this.distance>zi/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,f,v,S,P))}addHalfVertex({x:n,y:s},f,v,S,P,D,R){const O=.5*(this.lineClips?this.scaledDistance*(zi-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(S?1:0),(s<<1)+(P?1:0),Math.round(63*f)+128,Math.round(63*v)+128,1+(D===0?0:D<0?-1:1)|(63&O)<<2,O>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const j=R.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,j,this.e2),R.primitiveLength++),P?this.e2=j:this.e1=j}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let dp,nd;Rt("LineBucket",rd,{omit:["layers","patternFeatures"]});var ad={get paint(){return nd=nd||new pa({"line-opacity":new Vt(Oe.paint_line["line-opacity"]),"line-color":new Vt(Oe.paint_line["line-color"]),"line-translate":new Lt(Oe.paint_line["line-translate"]),"line-translate-anchor":new Lt(Oe.paint_line["line-translate-anchor"]),"line-width":new Vt(Oe.paint_line["line-width"]),"line-gap-width":new Vt(Oe.paint_line["line-gap-width"]),"line-offset":new Vt(Oe.paint_line["line-offset"]),"line-blur":new Vt(Oe.paint_line["line-blur"]),"line-dasharray":new jf(Oe.paint_line["line-dasharray"]),"line-pattern":new hs(Oe.paint_line["line-pattern"]),"line-gradient":new xn(Oe.paint_line["line-gradient"])})},get layout(){return dp=dp||new pa({"line-cap":new Lt(Oe.layout_line["line-cap"]),"line-join":new Vt(Oe.layout_line["line-join"]),"line-miter-limit":new Lt(Oe.layout_line["line-miter-limit"]),"line-round-limit":new Lt(Oe.layout_line["line-round-limit"]),"line-sort-key":new Vt(Oe.layout_line["line-sort-key"])})}};class qu extends Vt{possiblyEvaluate(n,s){return s=new Hr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,f,v){return s=Jt({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,f,v)}}let va;class Hu extends Qi{constructor(n,s){super(n,ad,s),this.gradientVersion=0,va||(va=new qu(ad.paint.properties["line-width"].specification),va.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!(function(f){return f._styleExpression!==void 0})(s)&&s._styleExpression.expression instanceof kn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=va.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new rd(n)}queryRadius(n){const s=n,f=$c(Vn("line-width",this,s),Vn("line-gap-width",this,s)),v=Vn("line-offset",this,s);return f/2+Math.abs(v)+ga(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:n,feature:s,featureState:f,geometry:v,transform:S,pixelsToTileUnits:P}){const D=$f(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-S.bearingInRadians,P),R=P/2*$c(this.paint.get("line-width").evaluate(s,f),this.paint.get("line-gap-width").evaluate(s,f)),O=this.paint.get("line-offset").evaluate(s,f);return O&&(v=(function(j,q){const Z=[];for(let J=0;J<j.length;J++){const te=j[J],oe=[];for(let ue=0;ue<te.length;ue++){const pe=te[ue-1],Le=te[ue],Se=te[ue+1],De=ue===0?new C(0,0):Le.sub(pe)._unit()._perp(),Ge=ue===te.length-1?new C(0,0):Se.sub(Le)._unit()._perp(),Xe=De._add(Ge)._unit(),dt=Xe.x*Ge.x+Xe.y*Ge.y;dt!==0&&Xe._mult(1/dt),oe.push(Xe._mult(q)._add(Le))}Z.push(oe)}return Z})(v,O*P)),(function(j,q,Z){for(let J=0;J<q.length;J++){const te=q[J];if(j.length>=3){for(let oe=0;oe<te.length;oe++)if(Bh(j,te[oe]))return!0}if(yg(j,te,Z))return!0}return!1})(D,v,R)}isTileClipped(){return!0}}function $c(l,n){return n>0?n+2*l:l}const Gh=Sn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),zm=Sn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Sn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Fm=Sn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Sn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Nm=Sn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),id=Sn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function jm(l,n,s){return l.sections.forEach((f=>{f.text=(function(v,S,P){const D=S.layout.get("text-transform").evaluate(P,{});return D==="uppercase"?v=v.toLocaleUpperCase():D==="lowercase"&&(v=v.toLocaleLowerCase()),po.applyArabicShaping&&(v=po.applyArabicShaping(v)),v})(f.text,n,s)})),l}Sn([{name:"triangle",components:3,type:"Uint16"}]),Sn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Sn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Sn([{type:"Float32",name:"offsetX"}]),Sn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Sn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const si={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var oa=24;const Fi=4294967296,Bm=1/Fi,qm=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Hm{constructor(n=new Uint8Array(16)){this.buf=ArrayBuffer.isView(n)?n:new Uint8Array(n),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(n,s,f=this.length){for(;this.pos<f;){const v=this.readVarint(),S=v>>3,P=this.pos;this.type=7&v,n(S,s,this),this.pos===P&&this.skip(v)}return s}readMessage(n,s){return this.readFields(n,s,this.readVarint()+this.pos)}readFixed32(){const n=this.dataView.getUint32(this.pos,!0);return this.pos+=4,n}readSFixed32(){const n=this.dataView.getInt32(this.pos,!0);return this.pos+=4,n}readFixed64(){const n=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Fi;return this.pos+=8,n}readSFixed64(){const n=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Fi;return this.pos+=8,n}readFloat(){const n=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,n}readDouble(){const n=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,n}readVarint(n){const s=this.buf;let f,v;return v=s[this.pos++],f=127&v,v<128?f:(v=s[this.pos++],f|=(127&v)<<7,v<128?f:(v=s[this.pos++],f|=(127&v)<<14,v<128?f:(v=s[this.pos++],f|=(127&v)<<21,v<128?f:(v=s[this.pos],f|=(15&v)<<28,(function(S,P,D){const R=D.buf;let O,j;if(j=R[D.pos++],O=(112&j)>>4,j<128||(j=R[D.pos++],O|=(127&j)<<3,j<128)||(j=R[D.pos++],O|=(127&j)<<10,j<128)||(j=R[D.pos++],O|=(127&j)<<17,j<128)||(j=R[D.pos++],O|=(127&j)<<24,j<128)||(j=R[D.pos++],O|=(1&j)<<31,j<128))return So(S,O,P);throw new Error("Expected varint not more than 10 bytes")})(f,n,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const n=this.readVarint();return n%2==1?(n+1)/-2:n/2}readBoolean(){return!!this.readVarint()}readString(){const n=this.readVarint()+this.pos,s=this.pos;return this.pos=n,n-s>=12&&qm?qm.decode(this.buf.subarray(s,n)):(function(f,v,S){let P="",D=v;for(;D<S;){const R=f[D];let O,j,q,Z=null,J=R>239?4:R>223?3:R>191?2:1;if(D+J>S)break;J===1?R<128&&(Z=R):J===2?(O=f[D+1],(192&O)==128&&(Z=(31&R)<<6|63&O,Z<=127&&(Z=null))):J===3?(O=f[D+1],j=f[D+2],(192&O)==128&&(192&j)==128&&(Z=(15&R)<<12|(63&O)<<6|63&j,(Z<=2047||Z>=55296&&Z<=57343)&&(Z=null))):J===4&&(O=f[D+1],j=f[D+2],q=f[D+3],(192&O)==128&&(192&j)==128&&(192&q)==128&&(Z=(15&R)<<18|(63&O)<<12|(63&j)<<6|63&q,(Z<=65535||Z>=1114112)&&(Z=null))),Z===null?(Z=65533,J=1):Z>65535&&(Z-=65536,P+=String.fromCharCode(Z>>>10&1023|55296),Z=56320|1023&Z),P+=String.fromCharCode(Z),D+=J}return P})(this.buf,s,n)}readBytes(){const n=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,n);return this.pos=n,s}readPackedVarint(n=[],s){const f=this.readPackedEnd();for(;this.pos<f;)n.push(this.readVarint(s));return n}readPackedSVarint(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readSVarint());return n}readPackedBoolean(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readBoolean());return n}readPackedFloat(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readFloat());return n}readPackedDouble(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readDouble());return n}readPackedFixed32(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readFixed32());return n}readPackedSFixed32(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readSFixed32());return n}readPackedFixed64(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readFixed64());return n}readPackedSFixed64(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readSFixed64());return n}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(n){const s=7&n;if(s===0)for(;this.buf[this.pos++]>127;);else if(s===2)this.pos=this.readVarint()+this.pos;else if(s===5)this.pos+=4;else{if(s!==1)throw new Error(`Unimplemented type: ${s}`);this.pos+=8}}writeTag(n,s){this.writeVarint(n<<3|s)}realloc(n){let s=this.length||16;for(;s<this.pos+n;)s*=2;if(s!==this.length){const f=new Uint8Array(s);f.set(this.buf),this.buf=f,this.dataView=new DataView(f.buffer),this.length=s}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(n){this.realloc(4),this.dataView.setInt32(this.pos,n,!0),this.pos+=4}writeSFixed32(n){this.realloc(4),this.dataView.setInt32(this.pos,n,!0),this.pos+=4}writeFixed64(n){this.realloc(8),this.dataView.setInt32(this.pos,-1&n,!0),this.dataView.setInt32(this.pos+4,Math.floor(n*Bm),!0),this.pos+=8}writeSFixed64(n){this.realloc(8),this.dataView.setInt32(this.pos,-1&n,!0),this.dataView.setInt32(this.pos+4,Math.floor(n*Bm),!0),this.pos+=8}writeVarint(n){(n=+n||0)>268435455||n<0?(function(s,f){let v,S;if(s>=0?(v=s%4294967296|0,S=s/4294967296|0):(v=~(-s%4294967296),S=~(-s/4294967296),4294967295^v?v=v+1|0:(v=0,S=S+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),(function(P,D,R){R.buf[R.pos++]=127&P|128,P>>>=7,R.buf[R.pos++]=127&P|128,P>>>=7,R.buf[R.pos++]=127&P|128,P>>>=7,R.buf[R.pos++]=127&P|128,R.buf[R.pos]=127&(P>>>=7)})(v,0,f),(function(P,D){const R=(7&P)<<4;D.buf[D.pos++]|=R|((P>>>=3)?128:0),P&&(D.buf[D.pos++]=127&P|((P>>>=7)?128:0),P&&(D.buf[D.pos++]=127&P|((P>>>=7)?128:0),P&&(D.buf[D.pos++]=127&P|((P>>>=7)?128:0),P&&(D.buf[D.pos++]=127&P|((P>>>=7)?128:0),P&&(D.buf[D.pos++]=127&P)))))})(S,f)})(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))}writeSVarint(n){this.writeVarint(n<0?2*-n-1:2*n)}writeBoolean(n){this.writeVarint(+n)}writeString(n){n=String(n),this.realloc(4*n.length),this.pos++;const s=this.pos;this.pos=(function(v,S,P){for(let D,R,O=0;O<S.length;O++){if(D=S.charCodeAt(O),D>55295&&D<57344){if(!R){D>56319||O+1===S.length?(v[P++]=239,v[P++]=191,v[P++]=189):R=D;continue}if(D<56320){v[P++]=239,v[P++]=191,v[P++]=189,R=D;continue}D=R-55296<<10|D-56320|65536,R=null}else R&&(v[P++]=239,v[P++]=191,v[P++]=189,R=null);D<128?v[P++]=D:(D<2048?v[P++]=D>>6|192:(D<65536?v[P++]=D>>12|224:(v[P++]=D>>18|240,v[P++]=D>>12&63|128),v[P++]=D>>6&63|128),v[P++]=63&D|128)}return P})(this.buf,n,this.pos);const f=this.pos-s;f>=128&&od(s,f,this),this.pos=s-1,this.writeVarint(f),this.pos+=f}writeFloat(n){this.realloc(4),this.dataView.setFloat32(this.pos,n,!0),this.pos+=4}writeDouble(n){this.realloc(8),this.dataView.setFloat64(this.pos,n,!0),this.pos+=8}writeBytes(n){const s=n.length;this.writeVarint(s),this.realloc(s);for(let f=0;f<s;f++)this.buf[this.pos++]=n[f]}writeRawMessage(n,s){this.pos++;const f=this.pos;n(s,this);const v=this.pos-f;v>=128&&od(f,v,this),this.pos=f-1,this.writeVarint(v),this.pos+=v}writeMessage(n,s,f){this.writeTag(n,2),this.writeRawMessage(s,f)}writePackedVarint(n,s){s.length&&this.writeMessage(n,$m,s)}writePackedSVarint(n,s){s.length&&this.writeMessage(n,Wh,s)}writePackedBoolean(n,s){s.length&&this.writeMessage(n,Ng,s)}writePackedFloat(n,s){s.length&&this.writeMessage(n,zg,s)}writePackedDouble(n,s){s.length&&this.writeMessage(n,Fg,s)}writePackedFixed32(n,s){s.length&&this.writeMessage(n,Vm,s)}writePackedSFixed32(n,s){s.length&&this.writeMessage(n,Gm,s)}writePackedFixed64(n,s){s.length&&this.writeMessage(n,m1,s)}writePackedSFixed64(n,s){s.length&&this.writeMessage(n,y1,s)}writeBytesField(n,s){this.writeTag(n,2),this.writeBytes(s)}writeFixed32Field(n,s){this.writeTag(n,5),this.writeFixed32(s)}writeSFixed32Field(n,s){this.writeTag(n,5),this.writeSFixed32(s)}writeFixed64Field(n,s){this.writeTag(n,1),this.writeFixed64(s)}writeSFixed64Field(n,s){this.writeTag(n,1),this.writeSFixed64(s)}writeVarintField(n,s){this.writeTag(n,0),this.writeVarint(s)}writeSVarintField(n,s){this.writeTag(n,0),this.writeSVarint(s)}writeStringField(n,s){this.writeTag(n,2),this.writeString(s)}writeFloatField(n,s){this.writeTag(n,5),this.writeFloat(s)}writeDoubleField(n,s){this.writeTag(n,1),this.writeDouble(s)}writeBooleanField(n,s){this.writeVarintField(n,+s)}}function So(l,n,s){return s?4294967296*n+(l>>>0):4294967296*(n>>>0)+(l>>>0)}function od(l,n,s){const f=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(f);for(let v=s.pos-1;v>=l;v--)s.buf[v+f]=s.buf[v]}function $m(l,n){for(let s=0;s<l.length;s++)n.writeVarint(l[s])}function Wh(l,n){for(let s=0;s<l.length;s++)n.writeSVarint(l[s])}function zg(l,n){for(let s=0;s<l.length;s++)n.writeFloat(l[s])}function Fg(l,n){for(let s=0;s<l.length;s++)n.writeDouble(l[s])}function Ng(l,n){for(let s=0;s<l.length;s++)n.writeBoolean(l[s])}function Vm(l,n){for(let s=0;s<l.length;s++)n.writeFixed32(l[s])}function Gm(l,n){for(let s=0;s<l.length;s++)n.writeSFixed32(l[s])}function m1(l,n){for(let s=0;s<l.length;s++)n.writeFixed64(l[s])}function y1(l,n){for(let s=0;s<l.length;s++)n.writeSFixed64(l[s])}function g1(l,n,s){l===1&&s.readMessage(jg,n)}function jg(l,n,s){if(l===3){const{id:f,bitmap:v,width:S,height:P,left:D,top:R,advance:O}=s.readMessage(Bg,{});n.push({id:f,bitmap:new qh({width:S+6,height:P+6},v),metrics:{width:S,height:P,left:D,top:R,advance:O}})}}function Bg(l,n,s){l===1?n.id=s.readVarint():l===2?n.bitmap=s.readBytes():l===3?n.width=s.readVarint():l===4?n.height=s.readVarint():l===5?n.left=s.readSVarint():l===6?n.top=s.readSVarint():l===7&&(n.advance=s.readVarint())}function Vc(l){let n=0,s=0;for(const P of l)n+=P.w*P.h,s=Math.max(s,P.w);l.sort(((P,D)=>D.h-P.h));const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let v=0,S=0;for(const P of l)for(let D=f.length-1;D>=0;D--){const R=f[D];if(!(P.w>R.w||P.h>R.h)){if(P.x=R.x,P.y=R.y,S=Math.max(S,P.y+P.h),v=Math.max(v,P.x+P.w),P.w===R.w&&P.h===R.h){const O=f.pop();O&&D<f.length&&(f[D]=O)}else P.h===R.h?(R.x+=P.w,R.w-=P.w):P.w===R.w?(R.y+=P.h,R.h-=P.h):(f.push({x:R.x+P.w,y:R.y,w:R.w-P.w,h:P.h}),R.y+=P.h,R.h-=P.h);break}}return{w:v,h:S,fill:n/(v*S)||0}}class Zh{constructor(n,{pixelRatio:s,version:f,stretchX:v,stretchY:S,content:P,textFitWidth:D,textFitHeight:R}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=v,this.stretchY=S,this.content=P,this.version=f,this.textFitWidth=D,this.textFitHeight=R}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Wm{constructor(n,s){const f={},v={};this.haveRenderCallbacks=[];const S=[];this.addImages(n,f,S),this.addImages(s,v,S);const{w:P,h:D}=Vc(S),R=new ai({width:P||1,height:D||1});for(const O in n){const j=n[O],q=f[O].paddedRect;ai.copy(j.data,R,{x:0,y:0},{x:q.x+1,y:q.y+1},j.data)}for(const O in s){const j=s[O],q=v[O].paddedRect,Z=q.x+1,J=q.y+1,te=j.data.width,oe=j.data.height;ai.copy(j.data,R,{x:0,y:0},{x:Z,y:J},j.data),ai.copy(j.data,R,{x:0,y:oe-1},{x:Z,y:J-1},{width:te,height:1}),ai.copy(j.data,R,{x:0,y:0},{x:Z,y:J+oe},{width:te,height:1}),ai.copy(j.data,R,{x:te-1,y:0},{x:Z-1,y:J},{width:1,height:oe}),ai.copy(j.data,R,{x:0,y:0},{x:Z+te,y:J},{width:1,height:oe})}this.image=R,this.iconPositions=f,this.patternPositions=v}addImages(n,s,f){for(const v in n){const S=n[v],P={x:0,y:0,w:S.data.width+2,h:S.data.height+2};f.push(P),s[v]=new Zh(P,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in n.updatedImages)this.patchUpdatedImage(this.iconPositions[f],n.getImage(f),s),this.patchUpdatedImage(this.patternPositions[f],n.getImage(f),s)}patchUpdatedImage(n,s,f){if(!n||!s||n.version===s.version)return;n.version=s.version;const[v,S]=n.tl;f.update(s.data,void 0,{x:v,y:S})}}var Vl;Rt("ImagePosition",Zh),Rt("ImageAtlas",Wm),g.ao=void 0,(Vl=g.ao||(g.ao={}))[Vl.none=0]="none",Vl[Vl.horizontal=1]="horizontal",Vl[Vl.vertical=2]="vertical",Vl[Vl.horizontalOnly=3]="horizontalOnly";class Yh{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(n,s,f){const v=new Yh;return v.scale=n||1,v.fontStack=s,v.verticalAlign=f||"bottom",v}static forImage(n,s){const f=new Yh;return f.imageName=n,f.verticalAlign=s||"bottom",f}}class Gc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const f=new Gc;for(let v=0;v<n.sections.length;v++){const S=n.sections[v];S.image?f.addImageSection(S):f.addTextSection(S,s)}return f}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=(function(n){let s="";for(let f=0;f<n.length;f++){const v=n.charCodeAt(f+1)||null,S=n.charCodeAt(f-1)||null;s+=v&&kl(v)&&!si[n[f+1]]||S&&kl(S)&&!si[n[f-1]]||!si[n[f]]?n[f]:si[n[f]]}return s})(this.text)}trim(){let n=0;for(let f=0;f<this.text.length&&ld[this.text.charCodeAt(f)];f++)n++;let s=this.text.length;for(let f=this.text.length-1;f>=0&&f>=n&&ld[this.text.charCodeAt(f)];f--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const f=new Gc;return f.text=this.text.substring(n,s),f.sectionIndex=this.sectionIndex.slice(n,s),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((n,s)=>Math.max(n,this.sections[s].scale)),0)}getMaxImageSize(n){let s=0,f=0;for(let v=0;v<this.length();v++){const S=this.getSection(v);if(S.imageName){const P=n[S.imageName];if(!P)continue;const D=P.displaySize;s=Math.max(s,D[0]),f=Math.max(f,D[1])}}return{maxImageWidth:s,maxImageHeight:f}}addTextSection(n,s){this.text+=n.text,this.sections.push(Yh.forText(n.scale,n.fontStack||s,n.verticalAlign));const f=this.sections.length-1;for(let v=0;v<n.text.length;++v)this.sectionIndex.push(f)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void Ot("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(Yh.forImage(s,n.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Ot("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function sd(l,n,s,f,v,S,P,D,R,O,j,q,Z,J,te){const oe=Gc.fromFeature(l,v);let ue;q===g.ao.vertical&&oe.verticalizePunctuation();const{processBidirectionalText:pe,processStyledBidirectionalText:Le}=po;if(pe&&oe.sections.length===1){ue=[];const Ge=pe(oe.toString(),Xm(oe,O,S,n,f,J));for(const Xe of Ge){const dt=new Gc;dt.text=Xe,dt.sections=oe.sections;for(let Dt=0;Dt<Xe.length;Dt++)dt.sectionIndex.push(0);ue.push(dt)}}else if(Le){ue=[];const Ge=Le(oe.text,oe.sectionIndex,Xm(oe,O,S,n,f,J));for(const Xe of Ge){const dt=new Gc;dt.text=Xe[0],dt.sectionIndex=Xe[1],dt.sections=oe.sections,ue.push(dt)}}else ue=(function(Ge,Xe){const dt=[],Dt=Ge.text;let _t=0;for(const Mt of Xe)dt.push(Ge.substring(_t,Mt)),_t=Mt;return _t<Dt.length&&dt.push(Ge.substring(_t,Dt.length)),dt})(oe,Xm(oe,O,S,n,f,J));const Se=[],De={positionedLines:Se,text:oe.toString(),top:j[1],bottom:j[1],left:j[0],right:j[0],writingMode:q,iconsInText:!1,verticalizable:!1};return(function(Ge,Xe,dt,Dt,_t,Mt,Ht,bt,St,tt,Kt,rr){let Bt=0,Nt=0,Ar=0,on=0;const la=bt==="right"?1:bt==="left"?0:.5,Ma=oa/rr;let _i=0;for(const sn of _t){sn.trim();const Wn=sn.getMaxScale(),_a={positionedGlyphs:[],lineOffset:0};Ge.positionedLines[_i]=_a;const Zn=_a.positionedGlyphs;let Ba=0;if(!sn.length()){Nt+=Mt,++_i;continue}const xi=v1(Dt,sn,Ma);for(let ji=0;ji<sn.length();ji++){const zn=sn.getSection(ji),o=sn.getSectionIndex(ji),h=sn.getCharCode(ji),m=Qh(St,Kt,h);let x;if(zn.imageName){if(Ge.iconsInText=!0,zn.scale=zn.scale*Ma,x=mp(zn,m,Wn,xi,Dt),!x)continue;Ba=Math.max(Ba,x.imageOffset)}else if(x=Jm(zn,h,m,xi,Xe,dt),!x)continue;const{rect:E,metrics:L,baselineOffset:X}=x;Zn.push({glyph:h,imageName:zn.imageName,x:Bt,y:Nt+X+-17,vertical:m,scale:zn.scale,fontStack:zn.fontStack,sectionIndex:o,metrics:L,rect:E}),m?(Ge.verticalizable=!0,Bt+=(zn.imageName?L.advance:oa)*zn.scale+tt):Bt+=L.advance*zn.scale+tt}Zn.length!==0&&(Ar=Math.max(Bt-tt,Ar),ey(Zn,0,Zn.length-1,la)),Bt=0,_a.lineOffset=Math.max(Ba,(Wn-1)*oa);const ua=Mt*Wn+Ba;Nt+=ua,on=Math.max(ua,on),++_i}const{horizontalAlign:bi,verticalAlign:Ta}=Km(Ht);(function(sn,Wn,_a,Zn,Ba,xi,ua,ji,zn){const o=(Wn-_a)*Ba;let h=0;h=xi!==ua?-ji*Zn- -17:-Zn*zn*ua+.5*ua;for(const m of sn)for(const x of m.positionedGlyphs)x.x+=o,x.y+=h})(Ge.positionedLines,la,bi,Ta,Ar,on,Mt,Nt,_t.length),Ge.top+=-Ta*Nt,Ge.bottom=Ge.top+Nt,Ge.left+=-bi*Ar,Ge.right=Ge.left+Ar})(De,n,s,f,ue,P,D,R,q,O,Z,te),!(function(Ge){for(const Xe of Ge)if(Xe.positionedGlyphs.length!==0)return!1;return!0})(Se)&&De}const ld={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},pp={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},qg={40:!0};function Zm(l,n,s,f,v,S){if(n.imageName){const P=f[n.imageName];return P?P.displaySize[0]*n.scale*oa/S+v:0}{const P=s[n.fontStack],D=P&&P[l];return D?D.metrics.advance*n.scale+v:0}}function dn(l,n,s,f){const v=Math.pow(l-n,2);return f?l<n?v/2:2*v:v+Math.abs(s)*s}function Ym(l,n,s){let f=0;return l===10&&(f-=1e4),s&&(f+=150),l!==40&&l!==65288||(f+=50),n!==41&&n!==65289||(f+=50),f}function Hg(l,n,s,f,v,S){let P=null,D=dn(n,s,v,S);for(const R of f){const O=dn(n-R.x,s,v,S)+R.badness;O<=D&&(P=R,D=O)}return{index:l,x:n,priorBreak:P,badness:D}}function Qm(l){return l?Qm(l.priorBreak).concat(l.index):[]}function Xm(l,n,s,f,v,S){if(!l)return[];const P=[],D=(function(q,Z,J,te,oe,ue){let pe=0;for(let Le=0;Le<q.length();Le++){const Se=q.getSection(Le);pe+=Zm(q.getCharCode(Le),Se,te,oe,Z,ue)}return pe/Math.max(1,Math.ceil(pe/J))})(l,n,s,f,v,S),R=l.text.indexOf("")>=0;let O=0;for(let q=0;q<l.length();q++){const Z=l.getSection(q),J=l.getCharCode(q);if(ld[J]||(O+=Zm(J,Z,f,v,n,S)),q<l.length()-1){const te=!((j=J)<11904)&&(!!fr["CJK Compatibility Forms"](j)||!!fr["CJK Compatibility"](j)||!!fr["CJK Strokes"](j)||!!fr["CJK Symbols and Punctuation"](j)||!!fr["Enclosed CJK Letters and Months"](j)||!!fr["Halfwidth and Fullwidth Forms"](j)||!!fr["Ideographic Description Characters"](j)||!!fr["Vertical Forms"](j)||Uh.test(String.fromCodePoint(j)));(pp[J]||te||Z.imageName||q!==l.length()-2&&qg[l.getCharCode(q+1)])&&P.push(Hg(q+1,O,D,P,Ym(J,l.getCharCode(q+1),te&&R),!1))}}var j;return Qm(Hg(l.length(),O,D,P,0,!0))}function Km(l){let n=.5,s=.5;switch(l){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function v1(l,n,s){const f=n.getMaxScale()*oa,{maxImageWidth:v,maxImageHeight:S}=n.getMaxImageSize(l),P=Math.max(f,S*s);return{verticalLineContentWidth:Math.max(f,v*s),horizontalLineContentHeight:P}}function ud(l){switch(l){case"top":return 0;case"center":return .5;default:return 1}}function Qh(l,n,s){return!(l===g.ao.horizontal||!n&&!Uc(s)||n&&(ld[s]||(f=s,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(f)))));var f}function Jm(l,n,s,f,v,S){const P=S[l.fontStack],D=(function(O,j,q,Z){if(O&&O.rect)return O;const J=j[q.fontStack],te=J&&J[Z];return te?{rect:null,metrics:te.metrics}:null})(P&&P[n],v,l,n);if(D===null)return null;let R;if(s)R=f.verticalLineContentWidth-l.scale*oa;else{const O=ud(l.verticalAlign);R=(f.horizontalLineContentHeight-l.scale*oa)*O}return{rect:D.rect,metrics:D.metrics,baselineOffset:R}}function mp(l,n,s,f,v){const S=v[l.imageName];if(!S)return null;const P=S.paddedRect,D=S.displaySize,R={width:D[0],height:D[1],left:1,top:-3,advance:n?D[1]:D[0]};let O;if(n)O=f.verticalLineContentWidth-D[1]*l.scale;else{const j=ud(l.verticalAlign);O=(f.horizontalLineContentHeight-D[1]*l.scale)*j}return{rect:P,metrics:R,baselineOffset:O,imageOffset:(n?D[0]:D[1])*l.scale-oa*s}}function ey(l,n,s,f){if(f===0)return;const v=l[s],S=(l[s].x+v.metrics.advance*v.scale)*f;for(let P=n;P<=s;P++)l[P].x-=S}function Wc(l,n,s){const{horizontalAlign:f,verticalAlign:v}=Km(s),S=n[0]-l.displaySize[0]*f,P=n[1]-l.displaySize[1]*v;return{image:l,top:P,bottom:P+l.displaySize[1],left:S,right:S+l.displaySize[0]}}function xs(l){var n,s;let f=l.left,v=l.top,S=l.right-f,P=l.bottom-v;const D=(n=l.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",R=(s=l.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",O=(l.image.content[2]-l.image.content[0])/(l.image.content[3]-l.image.content[1]);if(R==="proportional"){if(D==="stretchOnly"&&S/P<O||D==="proportional"){const j=Math.ceil(P*O);f*=j/S,S=j}}else if(D==="proportional"&&R==="stretchOnly"&&O!==0&&S/P>O){const j=Math.ceil(S/O);v*=j/P,P=j}return{x1:f,y1:v,x2:f+S,y2:v+P}}function Xh(l,n,s,f,v,S){const P=l.image;let D;if(P.content){const ue=P.content,pe=P.pixelRatio||1;D=[ue[0]/pe,ue[1]/pe,P.displaySize[0]-ue[2]/pe,P.displaySize[1]-ue[3]/pe]}const R=n.left*S,O=n.right*S;let j,q,Z,J;s==="width"||s==="both"?(J=v[0]+R-f[3],q=v[0]+O+f[1]):(J=v[0]+(R+O-P.displaySize[0])/2,q=J+P.displaySize[0]);const te=n.top*S,oe=n.bottom*S;return s==="height"||s==="both"?(j=v[1]+te-f[0],Z=v[1]+oe+f[2]):(j=v[1]+(te+oe-P.displaySize[1])/2,Z=j+P.displaySize[1]),{image:P,top:j,right:q,bottom:Z,left:J,collisionPadding:D}}const Gl=128,Wl=32640;function ty(l,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Hr(l+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:v}=s;let S=0;for(;S<f.length&&f[S]<=l;)S++;S=Math.max(0,S-1);let P=S;for(;P<f.length&&f[P]<l+1;)P++;P=Math.min(f.length-1,P);const D=f[S],R=f[P];return s.kind==="composite"?{kind:"composite",minZoom:D,maxZoom:R,interpolationType:v}:{kind:"camera",minZoom:D,maxZoom:R,minSize:s.evaluate(new Hr(D)),maxSize:s.evaluate(new Hr(R)),interpolationType:v}}}function yp(l,n,s){let f="never";const v=l.get(n);return v?f=v:l.get(s)&&(f="always"),f}const $g=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function gp(l,n,s,f,v,S,P,D,R,O,j,q,Z){const J=D?Math.min(Wl,Math.round(D[0])):0,te=D?Math.min(Wl,Math.round(D[1])):0;l.emplaceBack(n,s,Math.round(32*f),Math.round(32*v),S,P,(J<<1)+(R?1:0),te,16*O,16*j,256*q,256*Z)}function cd(l,n,s){l.emplaceBack(n.x,n.y,s),l.emplaceBack(n.x,n.y,s),l.emplaceBack(n.x,n.y,s),l.emplaceBack(n.x,n.y,s)}function Vg(l){for(const n of l.sections)if(cs(n.text))return!0;return!1}class vp{constructor(n){this.layoutVertexArray=new Ft,this.indexArray=new Zr,this.programConfigurations=n,this.segments=new Mr,this.dynamicLayoutVertexArray=new vr,this.opacityVertexArray=new kr,this.hasVisibleVertices=!1,this.placedSymbolArray=new he}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,f,v){this.isEmpty()||(f&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Gh.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,zm.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,$g,!0),this.opacityVertexBuffer.itemSize=1),(f||v)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Rt("SymbolBuffers",vp);class ry{constructor(n,s,f){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new f,this.segments=new Mr,this.collisionVertexArray=new Wr}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,Fm.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Rt("CollisionBuffers",ry);class $u{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((P=>P.id)),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ty(this.zoom,s["text-size"]),this.iconSizeData=ty(this.zoom,s["icon-size"]);const f=this.layers[0].layout,v=f.get("symbol-sort-key"),S=f.get("symbol-z-order");this.canOverlap=yp(f,"text-overlap","text-allow-overlap")!=="never"||yp(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=S!=="viewport-y"&&!v.isConstant(),this.sortFeaturesByY=(S==="viewport-y"||S==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map((P=>g.ao[P]))),this.stateDependentLayerIds=this.layers.filter((P=>P.isStateDependent())).map((P=>P.id)),this.sourceID=n.sourceID}createArrays(){this.text=new vp(new ys(this.layers,this.zoom,(n=>/^text/.test(n)))),this.icon=new vp(new ys(this.layers,this.zoom,(n=>/^icon/.test(n)))),this.glyphOffsetArray=new xe,this.lineVertexArray=new ye,this.symbolInstances=new me,this.textAnchorOffsets=new Te}calculateGlyphDependencies(n,s,f,v,S){for(let P=0;P<n.length;P++)if(s[n.charCodeAt(P)]=!0,(f||v)&&S){const D=si[n.charAt(P)];D&&(s[D.charCodeAt(0)]=!0)}}populate(n,s,f){const v=this.layers[0],S=v.layout,P=S.get("text-font"),D=S.get("text-field"),R=S.get("icon-image"),O=(D.value.kind!=="constant"||D.value.value instanceof Kn&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&(P.value.kind!=="constant"||P.value.value.length>0),j=R.value.kind!=="constant"||!!R.value.value||Object.keys(R.parameters).length>0,q=S.get("symbol-sort-key");if(this.features=[],!O&&!j)return;const Z=s.iconDependencies,J=s.glyphDependencies,te=s.availableImages,oe=new Hr(this.zoom);for(const{feature:ue,id:pe,index:Le,sourceLayerIndex:Se}of n){const De=v._featureFilter.needGeometry,Ge=Fl(ue,De);if(!v._featureFilter.filter(oe,Ge,f))continue;let Xe,dt;if(De||(Ge.geometry=zl(ue)),O){const _t=v.getValueAndResolveTokens("text-field",Ge,f,te),Mt=Kn.factory(_t),Ht=this.hasRTLText=this.hasRTLText||Vg(Mt);(!Ht||po.getRTLTextPluginStatus()==="unavailable"||Ht&&po.isParsed())&&(Xe=jm(Mt,v,Ge))}if(j){const _t=v.getValueAndResolveTokens("icon-image",Ge,f,te);dt=_t instanceof Aa?_t:Aa.fromString(_t)}if(!Xe&&!dt)continue;const Dt=this.sortFeaturesByKey?q.evaluate(Ge,{},f):void 0;if(this.features.push({id:pe,text:Xe,icon:dt,index:Le,sourceLayerIndex:Se,geometry:Ge.geometry,properties:ue.properties,type:el.types[ue.type],sortKey:Dt}),dt&&(Z[dt.name]=!0),Xe){const _t=P.evaluate(Ge,{},f).join(","),Mt=S.get("text-rotation-alignment")!=="viewport"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(g.ao.vertical)>=0;for(const Ht of Xe.sections)if(Ht.image)Z[Ht.image.name]=!0;else{const bt=kc(Xe.toString()),St=Ht.fontStack||_t,tt=J[St]=J[St]||{};this.calculateGlyphDependencies(Ht.text,tt,Mt,this.allowVerticalPlacement,bt)}}}S.get("symbol-placement")==="line"&&(this.features=(function(ue){const pe={},Le={},Se=[];let De=0;function Ge(_t){Se.push(ue[_t]),De++}function Xe(_t,Mt,Ht){const bt=Le[_t];return delete Le[_t],Le[Mt]=bt,Se[bt].geometry[0].pop(),Se[bt].geometry[0]=Se[bt].geometry[0].concat(Ht[0]),bt}function dt(_t,Mt,Ht){const bt=pe[Mt];return delete pe[Mt],pe[_t]=bt,Se[bt].geometry[0].shift(),Se[bt].geometry[0]=Ht[0].concat(Se[bt].geometry[0]),bt}function Dt(_t,Mt,Ht){const bt=Ht?Mt[0][Mt[0].length-1]:Mt[0][0];return`${_t}:${bt.x}:${bt.y}`}for(let _t=0;_t<ue.length;_t++){const Mt=ue[_t],Ht=Mt.geometry,bt=Mt.text?Mt.text.toString():null;if(!bt){Ge(_t);continue}const St=Dt(bt,Ht),tt=Dt(bt,Ht,!0);if(St in Le&&tt in pe&&Le[St]!==pe[tt]){const Kt=dt(St,tt,Ht),rr=Xe(St,tt,Se[Kt].geometry);delete pe[St],delete Le[tt],Le[Dt(bt,Se[rr].geometry,!0)]=rr,Se[Kt].geometry=null}else St in Le?Xe(St,tt,Ht):tt in pe?dt(St,tt,Ht):(Ge(_t),pe[St]=De-1,Le[tt]=De-1)}return Se.filter((_t=>_t.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((ue,pe)=>ue.sortKey-pe.sortKey))}update(n,s,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,{imagePositions:f}),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,{imagePositions:f}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const f=this.lineVertexArray.length;if(n.segment!==void 0){let v=n.dist(s[n.segment+1]),S=n.dist(s[n.segment]);const P={};for(let D=n.segment+1;D<s.length;D++)P[D]={x:s[D].x,y:s[D].y,tileUnitDistanceFromAnchor:v},D<s.length-1&&(v+=s[D+1].dist(s[D]));for(let D=n.segment||0;D>=0;D--)P[D]={x:s[D].x,y:s[D].y,tileUnitDistanceFromAnchor:S},D>0&&(S+=s[D-1].dist(s[D]));for(let D=0;D<s.length;D++){const R=P[D];this.lineVertexArray.emplaceBack(R.x,R.y,R.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(n,s,f,v,S,P,D,R,O,j,q,Z){const J=n.indexArray,te=n.layoutVertexArray,oe=n.segments.prepareSegment(4*s.length,te,J,this.canOverlap?P.sortKey:void 0),ue=this.glyphOffsetArray.length,pe=oe.vertexLength,Le=this.allowVerticalPlacement&&D===g.ao.vertical?Math.PI/2:0,Se=P.text&&P.text.sections;for(let De=0;De<s.length;De++){const{tl:Ge,tr:Xe,bl:dt,br:Dt,tex:_t,pixelOffsetTL:Mt,pixelOffsetBR:Ht,minFontScaleX:bt,minFontScaleY:St,glyphOffset:tt,isSDF:Kt,sectionIndex:rr}=s[De],Bt=oe.vertexLength,Nt=tt[1];gp(te,R.x,R.y,Ge.x,Nt+Ge.y,_t.x,_t.y,f,Kt,Mt.x,Mt.y,bt,St),gp(te,R.x,R.y,Xe.x,Nt+Xe.y,_t.x+_t.w,_t.y,f,Kt,Ht.x,Mt.y,bt,St),gp(te,R.x,R.y,dt.x,Nt+dt.y,_t.x,_t.y+_t.h,f,Kt,Mt.x,Ht.y,bt,St),gp(te,R.x,R.y,Dt.x,Nt+Dt.y,_t.x+_t.w,_t.y+_t.h,f,Kt,Ht.x,Ht.y,bt,St),cd(n.dynamicLayoutVertexArray,R,Le),J.emplaceBack(Bt,Bt+2,Bt+1),J.emplaceBack(Bt+1,Bt+2,Bt+3),oe.vertexLength+=4,oe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(tt[0]),De!==s.length-1&&rr===s[De+1].sectionIndex||n.programConfigurations.populatePaintArrays(te.length,P,P.index,{imagePositions:{},canonical:Z,formattedSection:Se&&Se[rr]})}n.placedSymbolArray.emplaceBack(R.x,R.y,ue,this.glyphOffsetArray.length-ue,pe,O,j,R.segment,f?f[0]:0,f?f[1]:0,v[0],v[1],D,0,!1,0,q)}_addCollisionDebugVertex(n,s,f,v,S,P){return s.emplaceBack(0,0),n.emplaceBack(f.x,f.y,v,S,Math.round(P.x),Math.round(P.y))}addCollisionDebugVertices(n,s,f,v,S,P,D){const R=S.segments.prepareSegment(4,S.layoutVertexArray,S.indexArray),O=R.vertexLength,j=S.layoutVertexArray,q=S.collisionVertexArray,Z=D.anchorX,J=D.anchorY;this._addCollisionDebugVertex(j,q,P,Z,J,new C(n,s)),this._addCollisionDebugVertex(j,q,P,Z,J,new C(f,s)),this._addCollisionDebugVertex(j,q,P,Z,J,new C(f,v)),this._addCollisionDebugVertex(j,q,P,Z,J,new C(n,v)),R.vertexLength+=4;const te=S.indexArray;te.emplaceBack(O,O+1),te.emplaceBack(O+1,O+2),te.emplaceBack(O+2,O+3),te.emplaceBack(O+3,O),R.primitiveLength+=4}addDebugCollisionBoxes(n,s,f,v){for(let S=n;S<s;S++){const P=this.collisionBoxArray.get(S);this.addCollisionDebugVertices(P.x1,P.y1,P.x2,P.y2,v?this.textCollisionBox:this.iconCollisionBox,P.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ry(hn,Nm.members,rn),this.iconCollisionBox=new ry(hn,Nm.members,rn);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,f,v,S,P,D,R,O){const j={};for(let q=s;q<f;q++){const Z=n.get(q);j.textBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},j.textFeatureIndex=Z.featureIndex;break}for(let q=v;q<S;q++){const Z=n.get(q);j.verticalTextBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},j.verticalTextFeatureIndex=Z.featureIndex;break}for(let q=P;q<D;q++){const Z=n.get(q);j.iconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},j.iconFeatureIndex=Z.featureIndex;break}for(let q=R;q<O;q++){const Z=n.get(q);j.verticalIconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},j.verticalIconFeatureIndex=Z.featureIndex;break}return j}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const f=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const f=n.placedSymbolArray.get(s),v=f.vertexStartIndex+4*f.numGlyphs;for(let S=f.vertexStartIndex;S<v;S+=4)n.indexArray.emplaceBack(S,S+2,S+1),n.indexArray.emplaceBack(S+1,S+2,S+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),f=Math.cos(n),v=[],S=[],P=[];for(let D=0;D<this.symbolInstances.length;++D){P.push(D);const R=this.symbolInstances.get(D);v.push(0|Math.round(s*R.anchorX+f*R.anchorY)),S.push(R.featureIndex)}return P.sort(((D,R)=>v[D]-v[R]||S[R]-S[D])),P}addToSortKeyRanges(n,s){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===s?f.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const f=this.symbolInstances.get(s);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach(((v,S,P)=>{v>=0&&P.indexOf(v)===S&&this.addIndicesForPlacedSymbol(this.text,v)})),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let _p,Gg;Rt("SymbolBucket",$u,{omit:["layers","collisionBoxArray","features","compareText"]}),$u.MAX_GLYPHS=65535,$u.addDynamicAttributes=cd;var ny={get paint(){return Gg=Gg||new pa({"icon-opacity":new Vt(Oe.paint_symbol["icon-opacity"]),"icon-color":new Vt(Oe.paint_symbol["icon-color"]),"icon-halo-color":new Vt(Oe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Vt(Oe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Vt(Oe.paint_symbol["icon-halo-blur"]),"icon-translate":new Lt(Oe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Lt(Oe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Vt(Oe.paint_symbol["text-opacity"]),"text-color":new Vt(Oe.paint_symbol["text-color"],{runtimeType:jn,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new Vt(Oe.paint_symbol["text-halo-color"]),"text-halo-width":new Vt(Oe.paint_symbol["text-halo-width"]),"text-halo-blur":new Vt(Oe.paint_symbol["text-halo-blur"]),"text-translate":new Lt(Oe.paint_symbol["text-translate"]),"text-translate-anchor":new Lt(Oe.paint_symbol["text-translate-anchor"])})},get layout(){return _p=_p||new pa({"symbol-placement":new Lt(Oe.layout_symbol["symbol-placement"]),"symbol-spacing":new Lt(Oe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Lt(Oe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Vt(Oe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Lt(Oe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Lt(Oe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Lt(Oe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Lt(Oe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Lt(Oe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Lt(Oe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Vt(Oe.layout_symbol["icon-size"]),"icon-text-fit":new Lt(Oe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Lt(Oe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Vt(Oe.layout_symbol["icon-image"]),"icon-rotate":new Vt(Oe.layout_symbol["icon-rotate"]),"icon-padding":new Vt(Oe.layout_symbol["icon-padding"]),"icon-keep-upright":new Lt(Oe.layout_symbol["icon-keep-upright"]),"icon-offset":new Vt(Oe.layout_symbol["icon-offset"]),"icon-anchor":new Vt(Oe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Lt(Oe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Lt(Oe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Lt(Oe.layout_symbol["text-rotation-alignment"]),"text-field":new Vt(Oe.layout_symbol["text-field"]),"text-font":new Vt(Oe.layout_symbol["text-font"]),"text-size":new Vt(Oe.layout_symbol["text-size"]),"text-max-width":new Vt(Oe.layout_symbol["text-max-width"]),"text-line-height":new Lt(Oe.layout_symbol["text-line-height"]),"text-letter-spacing":new Vt(Oe.layout_symbol["text-letter-spacing"]),"text-justify":new Vt(Oe.layout_symbol["text-justify"]),"text-radial-offset":new Vt(Oe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Lt(Oe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Vt(Oe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Vt(Oe.layout_symbol["text-anchor"]),"text-max-angle":new Lt(Oe.layout_symbol["text-max-angle"]),"text-writing-mode":new Lt(Oe.layout_symbol["text-writing-mode"]),"text-rotate":new Vt(Oe.layout_symbol["text-rotate"]),"text-padding":new Lt(Oe.layout_symbol["text-padding"]),"text-keep-upright":new Lt(Oe.layout_symbol["text-keep-upright"]),"text-transform":new Vt(Oe.layout_symbol["text-transform"]),"text-offset":new Vt(Oe.layout_symbol["text-offset"]),"text-allow-overlap":new Lt(Oe.layout_symbol["text-allow-overlap"]),"text-overlap":new Lt(Oe.layout_symbol["text-overlap"]),"text-ignore-placement":new Lt(Oe.layout_symbol["text-ignore-placement"]),"text-optional":new Lt(Oe.layout_symbol["text-optional"])})}};class Kh{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:Mo,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Rt("FormatSectionOverride",Kh,{omit:["defaultValue"]});class bp extends Qi{constructor(n,s){super(n,ny,s)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const v=[];for(const S of f)v.indexOf(S)<0&&v.push(S);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,f,v){const S=this.layout.get(n).evaluate(s,{},f,v),P=this._unevaluatedLayout._values[n];return P.isDataDriven()||as(P.value)||!S?S:(function(D,R){return R.replace(/{([^{}]+)}/g,((O,j)=>D&&j in D?String(D[j]):""))})(s.properties,S)}createBucket(n){return new $u(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of ny.paint.overridableProperties){if(!bp.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),f=new Kh(s),v=new Mc(f,s.property.specification);let S=null;S=s.value.kind==="constant"||s.value.kind==="source"?new qs("source",v):new Cu("composite",v,s.value.zoomStops),this.paint._values[n]=new ti(s.property,S,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,f){return!(!this.layout||s.isDataDriven()||f.isDataDriven())&&bp.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const f=n.get("text-field"),v=ny.paint.properties[s];let S=!1;const P=D=>{for(const R of D)if(v.overrides&&v.overrides.hasOverride(R))return void(S=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Kn)P(f.value.value.sections);else if(f.value.kind==="source"||f.value.kind==="composite"){const D=O=>{S||(O instanceof Zi&&er(O.value)===di?P(O.value.sections):O instanceof bl?P(O.sections):O.eachChild(D))},R=f.value;R._styleExpression&&D(R._styleExpression.expression)}return S}}let ay;var Ur={get paint(){return ay=ay||new pa({"background-color":new Lt(Oe.paint_background["background-color"]),"background-pattern":new jf(Oe.paint_background["background-pattern"]),"background-opacity":new Lt(Oe.paint_background["background-opacity"])})}};class iy extends Qi{constructor(n,s){super(n,Ur,s)}}let hd;var oy={get paint(){return hd=hd||new pa({"raster-opacity":new Lt(Oe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Lt(Oe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Lt(Oe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Lt(Oe.paint_raster["raster-brightness-max"]),"raster-saturation":new Lt(Oe.paint_raster["raster-saturation"]),"raster-contrast":new Lt(Oe.paint_raster["raster-contrast"]),"raster-resampling":new Lt(Oe.paint_raster["raster-resampling"]),"raster-fade-duration":new Lt(Oe.paint_raster["raster-fade-duration"])})}};class Wg extends Qi{constructor(n,s){super(n,oy,s)}}class sy extends Qi{constructor(n,s){super(n,{},s),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class fd{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const xp={once:!0},Vu=63710088e-1;class Zl{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Zl(ar(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,f=this.lat*s,v=n.lat*s,S=Math.sin(f)*Math.sin(v)+Math.cos(f)*Math.cos(v)*Math.cos((n.lng-this.lng)*s);return Vu*Math.acos(Math.min(S,1))}static convert(n){if(n instanceof Zl)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Zl(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Zl(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Zg=2*Math.PI*Vu;function Yg(l){return Zg*Math.cos(l*Math.PI/180)}function ly(l){return(180+l)/360}function uy(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function dd(l,n){return l/Yg(n)}function Jr(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function Sp(l,n){return l*Yg(Jr(n))}class sa{constructor(n,s,f=0){this.x=+n,this.y=+s,this.z=+f}static fromLngLat(n,s=0){const f=Zl.convert(n);return new sa(ly(f.lng),uy(f.lat),dd(s,f.lat))}toLngLat(){return new Zl(360*this.x-180,Jr(this.y))}toAltitude(){return Sp(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Zg*(n=Jr(this.y),1/Math.cos(n*Math.PI/180));var n}}function Qg(l,n,s){var f=2*Math.PI*6378137/256/Math.pow(2,s);return[l*f-2*Math.PI*6378137/2,n*f-2*Math.PI*6378137/2]}class pd{constructor(n,s,f){if(!(function(v,S,P){return!(v<0||v>25||P<0||P>=Math.pow(2,v)||S<0||S>=Math.pow(2,v))})(n,s,f))throw new Error(`x=${s}, y=${f}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=f,this.key=Zc(0,n,n,s,f)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,f){const v=(P=this.y,D=this.z,R=Qg(256*(S=this.x),256*(P=Math.pow(2,D)-P-1),D),O=Qg(256*(S+1),256*(P+1),D),R[0]+","+R[1]+","+O[0]+","+O[1]);var S,P,D,R,O;const j=(function(q,Z,J){let te,oe="";for(let ue=q;ue>0;ue--)te=1<<ue-1,oe+=(Z&te?1:0)+(J&te?2:0);return oe})(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,j).replace(/{bbox-epsg-3857}/g,v)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new C((n.x*s-this.x)*Ct,(n.y*s-this.y)*Ct)}toString(){return`${this.z}/${this.x}/${this.y}`}}class wp{constructor(n,s){this.wrap=n,this.canonical=s,this.key=Zc(n,s.z,s.z,s.x,s.y)}}class vi{constructor(n,s,f,v,S){if(this.terrainRttPosMatrix32f=null,n<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${f}`);this.overscaledZ=n,this.wrap=s,this.canonical=new pd(f,+v,+S),this.key=Zc(s,n,f,v,S)}clone(){return new vi(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new vi(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new vi(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-n;return n>this.canonical.z?Zc(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):Zc(this.wrap*+s,n,n,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(n){if(n.wrap!==this.wrap||this.overscaledZ-n.overscaledZ<=0)return!1;if(n.overscaledZ===0)return this.overscaledZ>0;const s=this.canonical.z-n.canonical.z;return!(s<0)&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new vi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,f=2*this.canonical.x,v=2*this.canonical.y;return[new vi(s,this.wrap,s,f,v),new vi(s,this.wrap,s,f+1,v),new vi(s,this.wrap,s,f,v+1),new vi(s,this.wrap,s,f+1,v+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new vi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new vi(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new wp(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new sa(n.x-this.wrap,n.y))}}function Zc(l,n,s,f,v){(l*=2)<0&&(l=-1*l-1);const S=1<<s;return(S*S*l+S*v+f).toString(36)+s.toString(36)+n.toString(36)}function Jh(l,n){return n?l.properties[n]:l.id}Rt("CanonicalTileID",pd),Rt("OverscaledTileID",vi,{omit:["terrainRttPosMatrix32f"]});class Yl{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(n){return this.minX=Math.min(this.minX,n.x),this.minY=Math.min(this.minY,n.y),this.maxX=Math.max(this.maxX,n.x),this.maxY=Math.max(this.maxY,n.y),this}expandBy(n){return this.minX-=n,this.minY-=n,this.maxX+=n,this.maxY+=n,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(n){return this.expandBy(-n)}map(n){const s=new Yl;return s.extend(n(new C(this.minX,this.minY))),s.extend(n(new C(this.maxX,this.minY))),s.extend(n(new C(this.minX,this.maxY))),s.extend(n(new C(this.maxX,this.maxY))),s}static fromPoints(n){const s=new Yl;for(const f of n)s.extend(f);return s}contains(n){return n.x>=this.minX&&n.x<=this.maxX&&n.y>=this.minY&&n.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(n){return!this.empty()&&!n.empty()&&n.minX>=this.minX&&n.maxX<=this.maxX&&n.minY>=this.minY&&n.maxY<=this.maxY}intersects(n){return!this.empty()&&!n.empty()&&n.minX<=this.maxX&&n.maxX>=this.minX&&n.minY<=this.maxY&&n.maxY>=this.minY}}class Pp{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const f=n[s];this._stringToNumber[f]=s,this._numberToString[s]=f}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Xg{constructor(n,s,f,v,S){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=f,n._y=v,this.properties=n.properties,this.id=S}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class cy{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Zs(Ct,16,0),this.grid3D=new Zs(Ct,16,0),this.featureIndexArray=new ke,this.promoteId=s}insert(n,s,f,v,S,P){const D=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,v,S);const R=P?this.grid3D:this.grid;for(let O=0;O<s.length;O++){const j=s[O],q=[1/0,1/0,-1/0,-1/0];for(let Z=0;Z<j.length;Z++){const J=j[Z];q[0]=Math.min(q[0],J.x),q[1]=Math.min(q[1],J.y),q[2]=Math.max(q[2],J.x),q[3]=Math.max(q[3],J.y)}q[0]<Ct&&q[1]<Ct&&q[2]>=0&&q[3]>=0&&R.insert(D,q[0],q[1],q[2],q[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Lg(new Hm(this.rawTileData)).layers,this.sourceLayerCoder=new Pp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,f,v){this.loadVTLayers();const S=n.params,P=Ct/n.tileSize/n.scale,D=is(S.filter,S.globalState),R=n.queryGeometry,O=n.queryPadding*P,j=Yl.fromPoints(R),q=this.grid.query(j.minX-O,j.minY-O,j.maxX+O,j.maxY+O),Z=Yl.fromPoints(n.cameraQueryGeometry).expandBy(O),J=this.grid3D.query(Z.minX,Z.minY,Z.maxX,Z.maxY,((ue,pe,Le,Se)=>(function(De,Ge,Xe,dt,Dt){for(const Mt of De)if(Ge<=Mt.x&&Xe<=Mt.y&&dt>=Mt.x&&Dt>=Mt.y)return!0;const _t=[new C(Ge,Xe),new C(Ge,Dt),new C(dt,Dt),new C(dt,Xe)];if(De.length>2){for(const Mt of _t)if(Bh(De,Mt))return!0}for(let Mt=0;Mt<De.length-1;Mt++)if(vg(De[Mt],De[Mt+1],_t))return!0;return!1})(n.cameraQueryGeometry,ue-O,pe-O,Le+O,Se+O)));for(const ue of J)q.push(ue);q.sort(Jg);const te={};let oe;for(let ue=0;ue<q.length;ue++){const pe=q[ue];if(pe===oe)continue;oe=pe;const Le=this.featureIndexArray.get(pe);let Se=null;this.loadMatchingFeature(te,Le.bucketIndex,Le.sourceLayerIndex,Le.featureIndex,D,S.layers,S.availableImages,s,f,v,((De,Ge,Xe)=>(Se||(Se=zl(De)),Ge.queryIntersectsFeature({queryGeometry:R,feature:De,featureState:Xe,geometry:Se,zoom:this.z,transform:n.transform,pixelsToTileUnits:P,pixelPosMatrix:n.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:n.getElevation}))))}return te}loadMatchingFeature(n,s,f,v,S,P,D,R,O,j,q){const Z=this.bucketLayerIDs[s];if(P&&!Z.some((ue=>P.has(ue))))return;const J=this.sourceLayerCoder.decode(f),te=this.vtLayers[J].feature(v);if(S.needGeometry){const ue=Fl(te,!0);if(!S.filter(new Hr(this.tileID.overscaledZ),ue,this.tileID.canonical))return}else if(!S.filter(new Hr(this.tileID.overscaledZ),te))return;const oe=this.getId(te,J);for(let ue=0;ue<Z.length;ue++){const pe=Z[ue];if(P&&!P.has(pe))continue;const Le=R[pe];if(!Le)continue;let Se={};oe&&j&&(Se=j.getState(Le.sourceLayer||"_geojsonTileLayer",oe));const De=Jt({},O[pe]);De.paint=Kg(De.paint,Le.paint,te,Se,D),De.layout=Kg(De.layout,Le.layout,te,Se,D);const Ge=!q||q(te,Le,Se);if(!Ge)continue;const Xe=new Xg(te,this.z,this.x,this.y,oe);Xe.layer=De;let dt=n[pe];dt===void 0&&(dt=n[pe]=[]),dt.push({featureIndex:v,feature:Xe,intersectionZ:Ge})}}lookupSymbolFeatures(n,s,f,v,S,P,D,R){const O={};this.loadVTLayers();const j=is(S.filterSpec,S.globalState);for(const q of n)this.loadMatchingFeature(O,f,v,q,j,P,D,R,s);return O}hasLayer(n){for(const s of this.bucketLayerIDs)for(const f of s)if(n===f)return!0;return!1}getId(n,s){var f;let v=n.id;return this.promoteId&&(v=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof v=="boolean"&&(v=Number(v)),v===void 0&&(!((f=n.properties)===null||f===void 0)&&f.cluster)&&this.promoteId&&(v=Number(n.properties.cluster_id))),v}}function Kg(l,n,s,f,v){return Gt(l,((S,P)=>{const D=n instanceof jo?n.get(P):null;return D&&D.evaluate?D.evaluate(s,f,v):D}))}function Jg(l,n){return n-l}function e0(l,n,s,f,v){const S=[];for(let P=0;P<l.length;P++){const D=l[P];let R;for(let O=0;O<D.length-1;O++){let j=D[O],q=D[O+1];j.x<n&&q.x<n||(j.x<n?j=new C(n,j.y+(n-j.x)/(q.x-j.x)*(q.y-j.y))._round():q.x<n&&(q=new C(n,j.y+(n-j.x)/(q.x-j.x)*(q.y-j.y))._round()),j.y<s&&q.y<s||(j.y<s?j=new C(j.x+(s-j.y)/(q.y-j.y)*(q.x-j.x),s)._round():q.y<s&&(q=new C(j.x+(s-j.y)/(q.y-j.y)*(q.x-j.x),s)._round()),j.x>=f&&q.x>=f||(j.x>=f?j=new C(f,j.y+(f-j.x)/(q.x-j.x)*(q.y-j.y))._round():q.x>=f&&(q=new C(f,j.y+(f-j.x)/(q.x-j.x)*(q.y-j.y))._round()),j.y>=v&&q.y>=v||(j.y>=v?j=new C(j.x+(v-j.y)/(q.y-j.y)*(q.x-j.x),v)._round():q.y>=v&&(q=new C(j.x+(v-j.y)/(q.y-j.y)*(q.x-j.x),v)._round()),R&&j.equals(R[R.length-1])||(R=[j],S.push(R)),R.push(q)))))}}return S}Rt("FeatureIndex",cy,{omit:["rawTileData","sourceLayerCoder"]});class Gu extends C{constructor(n,s,f,v){super(n,s),this.angle=f,v!==void 0&&(this.segment=v)}clone(){return new Gu(this.x,this.y,this.angle,this.segment)}}function Ql(l,n,s,f,v){if(n.segment===void 0||s===0)return!0;let S=n,P=n.segment+1,D=0;for(;D>-s/2;){if(P--,P<0)return!1;D-=l[P].dist(S),S=l[P]}D+=l[P].dist(l[P+1]),P++;const R=[];let O=0;for(;D<s/2;){const j=l[P],q=l[P+1];if(!q)return!1;let Z=l[P-1].angleTo(j)-j.angleTo(q);for(Z=Math.abs((Z+3*Math.PI)%(2*Math.PI)-Math.PI),R.push({distance:D,angleDelta:Z}),O+=Z;D-R[0].distance>f;)O-=R.shift().angleDelta;if(O>v)return!1;P++,D+=j.dist(q)}return!0}function hy(l){let n=0;for(let s=0;s<l.length-1;s++)n+=l[s].dist(l[s+1]);return n}function Ap(l,n,s){return l?.6*n*s:0}function t0(l,n){return Math.max(l?l.right-l.left:0,n?n.right-n.left:0)}function _1(l,n,s,f,v,S){const P=Ap(s,v,S),D=t0(s,f)*S;let R=0;const O=hy(l)/2;for(let j=0;j<l.length-1;j++){const q=l[j],Z=l[j+1],J=q.dist(Z);if(R+J>O){const te=(O-R)/J,oe=Lo.number(q.x,Z.x,te),ue=Lo.number(q.y,Z.y,te),pe=new Gu(oe,ue,Z.angleTo(q),j);return pe._round(),!P||Ql(l,pe,D,P,n)?pe:void 0}R+=J}}function fy(l,n,s,f,v,S,P,D,R){const O=Ap(f,S,P),j=t0(f,v),q=j*P,Z=l[0].x===0||l[0].x===R||l[0].y===0||l[0].y===R;return n-q<n/4&&(n=q+n/4),r0(l,Z?n/2*D%n:(j/2+2*S)*P*D%n,n,O,s,q,Z,!1,R)}function r0(l,n,s,f,v,S,P,D,R){const O=S/2,j=hy(l);let q=0,Z=n-s,J=[];for(let te=0;te<l.length-1;te++){const oe=l[te],ue=l[te+1],pe=oe.dist(ue),Le=ue.angleTo(oe);for(;Z+s<q+pe;){Z+=s;const Se=(Z-q)/pe,De=Lo.number(oe.x,ue.x,Se),Ge=Lo.number(oe.y,ue.y,Se);if(De>=0&&De<R&&Ge>=0&&Ge<R&&Z-O>=0&&Z+O<=j){const Xe=new Gu(De,Ge,Le,te);Xe._round(),f&&!Ql(l,Xe,S,f,v)||J.push(Xe)}}q+=pe}return D||J.length||P||(J=r0(l,q/2,s,f,v,S,P,!0,R)),J}function Wo(l,n,s,f){const v=[],S=l.image,P=S.pixelRatio,D=S.paddedRect.w-2,R=S.paddedRect.h-2;let O={x1:l.left,y1:l.top,x2:l.right,y2:l.bottom};const j=S.stretchX||[[0,D]],q=S.stretchY||[[0,R]],Z=(tt,Kt)=>tt+Kt[1]-Kt[0],J=j.reduce(Z,0),te=q.reduce(Z,0),oe=D-J,ue=R-te;let pe=0,Le=J,Se=0,De=te,Ge=0,Xe=oe,dt=0,Dt=ue;if(S.content&&f){const tt=S.content,Kt=tt[2]-tt[0],rr=tt[3]-tt[1];(S.textFitWidth||S.textFitHeight)&&(O=xs(l)),pe=ef(j,0,tt[0]),Se=ef(q,0,tt[1]),Le=ef(j,tt[0],tt[2]),De=ef(q,tt[1],tt[3]),Ge=tt[0]-pe,dt=tt[1]-Se,Xe=Kt-Le,Dt=rr-De}const _t=O.x1,Mt=O.y1,Ht=O.x2-_t,bt=O.y2-Mt,St=(tt,Kt,rr,Bt)=>{const Nt=md(tt.stretch-pe,Le,Ht,_t),Ar=Wu(tt.fixed-Ge,Xe,tt.stretch,J),on=md(Kt.stretch-Se,De,bt,Mt),la=Wu(Kt.fixed-dt,Dt,Kt.stretch,te),Ma=md(rr.stretch-pe,Le,Ht,_t),_i=Wu(rr.fixed-Ge,Xe,rr.stretch,J),bi=md(Bt.stretch-Se,De,bt,Mt),Ta=Wu(Bt.fixed-dt,Dt,Bt.stretch,te),sn=new C(Nt,on),Wn=new C(Ma,on),_a=new C(Ma,bi),Zn=new C(Nt,bi),Ba=new C(Ar/P,la/P),xi=new C(_i/P,Ta/P),ua=n*Math.PI/180;if(ua){const o=Math.sin(ua),h=Math.cos(ua),m=[h,-o,o,h];sn._matMult(m),Wn._matMult(m),Zn._matMult(m),_a._matMult(m)}const ji=tt.stretch+tt.fixed,zn=Kt.stretch+Kt.fixed;return{tl:sn,tr:Wn,bl:Zn,br:_a,tex:{x:S.paddedRect.x+1+ji,y:S.paddedRect.y+1+zn,w:rr.stretch+rr.fixed-ji,h:Bt.stretch+Bt.fixed-zn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ba,pixelOffsetBR:xi,minFontScaleX:Xe/P/Ht,minFontScaleY:Dt/P/bt,isSDF:s}};if(f&&(S.stretchX||S.stretchY)){const tt=dy(j,oe,J),Kt=dy(q,ue,te);for(let rr=0;rr<tt.length-1;rr++){const Bt=tt[rr],Nt=tt[rr+1];for(let Ar=0;Ar<Kt.length-1;Ar++)v.push(St(Bt,Kt[Ar],Nt,Kt[Ar+1]))}}else v.push(St({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:D+1},{fixed:0,stretch:R+1}));return v}function ef(l,n,s){let f=0;for(const v of l)f+=Math.max(n,Math.min(s,v[1]))-Math.max(n,Math.min(s,v[0]));return f}function dy(l,n,s){const f=[{fixed:-1,stretch:0}];for(const[v,S]of l){const P=f[f.length-1];f.push({fixed:v-P.stretch,stretch:P.stretch}),f.push({fixed:v-P.stretch,stretch:P.stretch+(S-v)})}return f.push({fixed:n+1,stretch:s}),f}function md(l,n,s,f){return l/n*s+f}function Wu(l,n,s,f){return l-n*s/f}Rt("Anchor",Gu);class Ni{constructor(n,s,f,v,S,P,D,R,O,j){var q;if(this.boxStartIndex=n.length,O){let Z=P.top,J=P.bottom;const te=P.collisionPadding;te&&(Z-=te[1],J+=te[3]);let oe=J-Z;oe>0&&(oe=Math.max(10,oe),this.circleDiameter=oe)}else{const Z=!((q=P.image)===null||q===void 0)&&q.content&&(P.image.textFitWidth||P.image.textFitHeight)?xs(P):{x1:P.left,y1:P.top,x2:P.right,y2:P.bottom};Z.y1=Z.y1*D-R[0],Z.y2=Z.y2*D+R[2],Z.x1=Z.x1*D-R[3],Z.x2=Z.x2*D+R[1];const J=P.collisionPadding;if(J&&(Z.x1-=J[0]*D,Z.y1-=J[1]*D,Z.x2+=J[2]*D,Z.y2+=J[3]*D),j){const te=new C(Z.x1,Z.y1),oe=new C(Z.x2,Z.y1),ue=new C(Z.x1,Z.y2),pe=new C(Z.x2,Z.y2),Le=j*Math.PI/180;te._rotate(Le),oe._rotate(Le),ue._rotate(Le),pe._rotate(Le),Z.x1=Math.min(te.x,oe.x,ue.x,pe.x),Z.x2=Math.max(te.x,oe.x,ue.x,pe.x),Z.y1=Math.min(te.y,oe.y,ue.y,pe.y),Z.y2=Math.max(te.y,oe.y,ue.y,pe.y)}n.emplaceBack(s.x,s.y,Z.x1,Z.y1,Z.x2,Z.y2,f,v,S)}this.boxEndIndex=n.length}}class n0{constructor(n=[],s=(f,v)=>f<v?-1:f>v?1:0){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:f}=this,v=s[n];for(;n>0;){const S=n-1>>1,P=s[S];if(f(v,P)>=0)break;s[n]=P,n=S}s[n]=v}_down(n){const{data:s,compare:f}=this,v=this.length>>1,S=s[n];for(;n<v;){let P=1+(n<<1);const D=P+1;if(D<this.length&&f(s[D],s[P])<0&&(P=D),f(s[P],S)>=0)break;s[n]=s[P],n=P}s[n]=S}}function Cp(l,n=1,s=!1){const f=Yl.fromPoints(l[0]),v=Math.min(f.width(),f.height());let S=v/2;const P=new n0([],Xl),{minX:D,minY:R,maxX:O,maxY:j}=f;if(v===0)return new C(D,R);for(let J=D;J<O;J+=v)for(let te=R;te<j;te+=v)P.push(new tf(J+S,te+S,S,l));let q=(function(J){let te=0,oe=0,ue=0;const pe=J[0];for(let Le=0,Se=pe.length,De=Se-1;Le<Se;De=Le++){const Ge=pe[Le],Xe=pe[De],dt=Ge.x*Xe.y-Xe.x*Ge.y;oe+=(Ge.x+Xe.x)*dt,ue+=(Ge.y+Xe.y)*dt,te+=3*dt}return new tf(oe/te,ue/te,0,J)})(l),Z=P.length;for(;P.length;){const J=P.pop();(J.d>q.d||!q.d)&&(q=J,s&&console.log("found best %d after %d probes",Math.round(1e4*J.d)/1e4,Z)),J.max-q.d<=n||(S=J.h/2,P.push(new tf(J.p.x-S,J.p.y-S,S,l)),P.push(new tf(J.p.x+S,J.p.y-S,S,l)),P.push(new tf(J.p.x-S,J.p.y+S,S,l)),P.push(new tf(J.p.x+S,J.p.y+S,S,l)),Z+=4)}return s&&(console.log(`num probes: ${Z}`),console.log(`best distance: ${q.d}`)),q.p}function Xl(l,n){return n.max-l.max}function tf(l,n,s,f){this.p=new C(l,n),this.h=s,this.d=(function(v,S){let P=!1,D=1/0;for(let R=0;R<S.length;R++){const O=S[R];for(let j=0,q=O.length,Z=q-1;j<q;Z=j++){const J=O[j],te=O[Z];J.y>v.y!=te.y>v.y&&v.x<(te.x-J.x)*(v.y-J.y)/(te.y-J.y)+J.x&&(P=!P),D=Math.min(D,vm(v,J,te))}}return(P?1:-1)*Math.sqrt(D)})(this.p,f),this.max=this.d+this.h*Math.SQRT2}var ja;g.aE=void 0,(ja=g.aE||(g.aE={}))[ja.center=1]="center",ja[ja.left=2]="left",ja[ja.right=3]="right",ja[ja.top=4]="top",ja[ja.bottom=5]="bottom",ja[ja["top-left"]=6]="top-left",ja[ja["top-right"]=7]="top-right",ja[ja["bottom-left"]=8]="bottom-left",ja[ja["bottom-right"]=9]="bottom-right";const Zu=Number.POSITIVE_INFINITY;function py(l,n){return n[1]!==Zu?(function(s,f,v){let S=0,P=0;switch(f=Math.abs(f),v=Math.abs(v),s){case"top-right":case"top-left":case"top":P=v-7;break;case"bottom-right":case"bottom-left":case"bottom":P=7-v}switch(s){case"top-right":case"bottom-right":case"right":S=-f;break;case"top-left":case"bottom-left":case"left":S=f}return[S,P]})(l,n[0],n[1]):(function(s,f){let v=0,S=0;f<0&&(f=0);const P=f/Math.SQRT2;switch(s){case"top-right":case"top-left":S=P-7;break;case"bottom-right":case"bottom-left":S=7-P;break;case"bottom":S=7-f;break;case"top":S=f-7}switch(s){case"top-right":case"bottom-right":v=-P;break;case"top-left":case"bottom-left":v=P;break;case"left":v=f;break;case"right":v=-f}return[v,S]})(l,n[0])}function a0(l,n,s){var f;const v=l.layout,S=(f=v.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(n,{},s);if(S){const D=S.values,R=[];for(let O=0;O<D.length;O+=2){const j=R[O]=D[O],q=D[O+1].map((Z=>Z*oa));j.startsWith("top")?q[1]-=7:j.startsWith("bottom")&&(q[1]+=7),R[O+1]=q}return new Pa(R)}const P=v.get("text-variable-anchor");if(P){let D;D=l._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[v.get("text-radial-offset").evaluate(n,{},s)*oa,Zu]:v.get("text-offset").evaluate(n,{},s).map((O=>O*oa));const R=[];for(const O of P)R.push(O,py(O,D));return new Pa(R)}return null}function my(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function b1(l,n,s,f,v,S,P,D,R,O,j,q){let Z=S.textMaxSize.evaluate(n,{});Z===void 0&&(Z=P);const J=l.layers[0].layout,te=J.get("icon-offset").evaluate(n,{},j),oe=o0(s.horizontal),ue=P/24,pe=l.tilePixelRatio*ue,Le=l.tilePixelRatio*Z/24,Se=l.tilePixelRatio*D,De=l.tilePixelRatio*J.get("symbol-spacing"),Ge=J.get("text-padding")*l.tilePixelRatio,Xe=(function(rr,Bt,Nt,Ar=1){const on=rr.get("icon-padding").evaluate(Bt,{},Nt),la=on&&on.values;return[la[0]*Ar,la[1]*Ar,la[2]*Ar,la[3]*Ar]})(J,n,j,l.tilePixelRatio),dt=J.get("text-max-angle")/180*Math.PI,Dt=J.get("text-rotation-alignment")!=="viewport"&&J.get("symbol-placement")!=="point",_t=J.get("icon-rotation-alignment")==="map"&&J.get("symbol-placement")!=="point",Mt=J.get("symbol-placement"),Ht=De/2,bt=J.get("icon-text-fit");let St;f&&bt!=="none"&&(l.allowVerticalPlacement&&s.vertical&&(St=Xh(f,s.vertical,bt,J.get("icon-text-fit-padding"),te,ue)),oe&&(f=Xh(f,oe,bt,J.get("icon-text-fit-padding"),te,ue)));const tt=j?q.line.getGranularityForZoomLevel(j.z):1,Kt=(rr,Bt)=>{Bt.x<0||Bt.x>=Ct||Bt.y<0||Bt.y>=Ct||(function(Nt,Ar,on,la,Ma,_i,bi,Ta,sn,Wn,_a,Zn,Ba,xi,ua,ji,zn,o,h,m,x,E,L,X,se){const Ce=Nt.addToLineVertexArray(Ar,on);let We,ut,mt,Qe,Ke=0,dr=0,ur=0,ln=0,Ne=-1,ze=-1;const qe={};let pt=ms("");if(Nt.allowVerticalPlacement&&la.vertical){const Bi=Ta.layout.get("text-rotate").evaluate(x,{},X)+90;mt=new Ni(sn,Ar,Wn,_a,Zn,la.vertical,Ba,xi,ua,Bi),bi&&(Qe=new Ni(sn,Ar,Wn,_a,Zn,bi,zn,o,ua,Bi))}if(Ma){const Bi=Ta.layout.get("icon-rotate").evaluate(x,{}),Ss=Ta.layout.get("icon-text-fit")!=="none",_d=Wo(Ma,Bi,L,Ss),Jl=bi?Wo(bi,Bi,L,Ss):void 0;ut=new Ni(sn,Ar,Wn,_a,Zn,Ma,zn,o,!1,Bi),Ke=4*_d.length;const bd=Nt.iconSizeData;let Ku=null;bd.kind==="source"?(Ku=[Gl*Ta.layout.get("icon-size").evaluate(x,{})],Ku[0]>Wl&&Ot(`${Nt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):bd.kind==="composite"&&(Ku=[Gl*E.compositeIconSizes[0].evaluate(x,{},X),Gl*E.compositeIconSizes[1].evaluate(x,{},X)],(Ku[0]>Wl||Ku[1]>Wl)&&Ot(`${Nt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Nt.addSymbols(Nt.icon,_d,Ku,m,h,x,g.ao.none,Ar,Ce.lineStartIndex,Ce.lineLength,-1,X),Ne=Nt.icon.placedSymbolArray.length-1,Jl&&(dr=4*Jl.length,Nt.addSymbols(Nt.icon,Jl,Ku,m,h,x,g.ao.vertical,Ar,Ce.lineStartIndex,Ce.lineLength,-1,X),ze=Nt.icon.placedSymbolArray.length-1)}const Wt=Object.keys(la.horizontal);for(const Bi of Wt){const Ss=la.horizontal[Bi];if(!We){pt=ms(Ss.text);const Jl=Ta.layout.get("text-rotate").evaluate(x,{},X);We=new Ni(sn,Ar,Wn,_a,Zn,Ss,Ba,xi,ua,Jl)}const _d=Ss.positionedLines.length===1;if(ur+=i0(Nt,Ar,Ss,_i,Ta,ua,x,ji,Ce,la.vertical?g.ao.horizontal:g.ao.horizontalOnly,_d?Wt:[Bi],qe,Ne,E,X),_d)break}la.vertical&&(ln+=i0(Nt,Ar,la.vertical,_i,Ta,ua,x,ji,Ce,g.ao.vertical,["vertical"],qe,ze,E,X));const Er=We?We.boxStartIndex:Nt.collisionBoxArray.length,nr=We?We.boxEndIndex:Nt.collisionBoxArray.length,hr=mt?mt.boxStartIndex:Nt.collisionBoxArray.length,qa=mt?mt.boxEndIndex:Nt.collisionBoxArray.length,Vr=ut?ut.boxStartIndex:Nt.collisionBoxArray.length,Xu=ut?ut.boxEndIndex:Nt.collisionBoxArray.length,S1=Qe?Qe.boxStartIndex:Nt.collisionBoxArray.length,u4=Qe?Qe.boxEndIndex:Nt.collisionBoxArray.length;let Kl=-1;const u0=(Bi,Ss)=>Bi&&Bi.circleDiameter?Math.max(Bi.circleDiameter,Ss):Ss;Kl=u0(We,Kl),Kl=u0(mt,Kl),Kl=u0(ut,Kl),Kl=u0(Qe,Kl);const iS=Kl>-1?1:0;iS&&(Kl*=se/oa),Nt.glyphOffsetArray.length>=$u.MAX_GLYPHS&&Ot("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),x.sortKey!==void 0&&Nt.addToSortKeyRanges(Nt.symbolInstances.length,x.sortKey);const c4=a0(Ta,x,X),[h4,f4]=(function(Bi,Ss){const _d=Bi.length,Jl=Ss?.values;if(Jl?.length>0)for(let bd=0;bd<Jl.length;bd+=2){const Ku=Jl[bd+1];Bi.emplaceBack(g.aE[Jl[bd]],Ku[0],Ku[1])}return[_d,Bi.length]})(Nt.textAnchorOffsets,c4);Nt.symbolInstances.emplaceBack(Ar.x,Ar.y,qe.right>=0?qe.right:-1,qe.center>=0?qe.center:-1,qe.left>=0?qe.left:-1,qe.vertical||-1,Ne,ze,pt,Er,nr,hr,qa,Vr,Xu,S1,u4,Wn,ur,ln,Ke,dr,iS,0,Ba,Kl,h4,f4)})(l,Bt,rr,s,f,v,St,l.layers[0],l.collisionBoxArray,n.index,n.sourceLayerIndex,l.index,pe,[Ge,Ge,Ge,Ge],Dt,R,Se,Xe,_t,te,n,S,O,j,P)};if(Mt==="line")for(const rr of e0(n.geometry,0,0,Ct,Ct)){const Bt=bo(rr,tt),Nt=fy(Bt,De,dt,s.vertical||oe,f,24,Le,l.overscaling,Ct);for(const Ar of Nt)oe&&x1(l,oe.text,Ht,Ar)||Kt(Bt,Ar)}else if(Mt==="line-center"){for(const rr of n.geometry)if(rr.length>1){const Bt=bo(rr,tt),Nt=_1(Bt,dt,s.vertical||oe,f,24,Le);Nt&&Kt(Bt,Nt)}}else if(n.type==="Polygon")for(const rr of Su(n.geometry,0)){const Bt=Cp(rr,16);Kt(bo(rr[0],tt,!0),new Gu(Bt.x,Bt.y,0))}else if(n.type==="LineString")for(const rr of n.geometry){const Bt=bo(rr,tt);Kt(Bt,new Gu(Bt[0].x,Bt[0].y,0))}else if(n.type==="Point")for(const rr of n.geometry)for(const Bt of rr)Kt([Bt],new Gu(Bt.x,Bt.y,0))}function i0(l,n,s,f,v,S,P,D,R,O,j,q,Z,J,te){const oe=(function(Le,Se,De,Ge,Xe,dt,Dt,_t){const Mt=Ge.layout.get("text-rotate").evaluate(dt,{})*Math.PI/180,Ht=[];for(const bt of Se.positionedLines)for(const St of bt.positionedGlyphs){if(!St.rect)continue;const tt=St.rect||{};let Kt=4,rr=!0,Bt=1,Nt=0;const Ar=(Xe||_t)&&St.vertical,on=St.metrics.advance*St.scale/2;if(_t&&Se.verticalizable&&(Nt=bt.lineOffset/2-(St.imageName?-(oa-St.metrics.width*St.scale)/2:(St.scale-1)*oa)),St.imageName){const o=Dt[St.imageName];rr=o.sdf,Bt=o.pixelRatio,Kt=1/Bt}const la=Xe?[St.x+on,St.y]:[0,0];let Ma=Xe?[0,0]:[St.x+on+De[0],St.y+De[1]-Nt],_i=[0,0];Ar&&(_i=Ma,Ma=[0,0]);const bi=St.metrics.isDoubleResolution?2:1,Ta=(St.metrics.left-Kt)*St.scale-on+Ma[0],sn=(-St.metrics.top-Kt)*St.scale+Ma[1],Wn=Ta+tt.w/bi*St.scale/Bt,_a=sn+tt.h/bi*St.scale/Bt,Zn=new C(Ta,sn),Ba=new C(Wn,sn),xi=new C(Ta,_a),ua=new C(Wn,_a);if(Ar){const o=new C(-on,on- -17),h=-Math.PI/2,m=12-on,x=new C(22-m,-(St.imageName?m:0)),E=new C(..._i);Zn._rotateAround(h,o)._add(x)._add(E),Ba._rotateAround(h,o)._add(x)._add(E),xi._rotateAround(h,o)._add(x)._add(E),ua._rotateAround(h,o)._add(x)._add(E)}if(Mt){const o=Math.sin(Mt),h=Math.cos(Mt),m=[h,-o,o,h];Zn._matMult(m),Ba._matMult(m),xi._matMult(m),ua._matMult(m)}const ji=new C(0,0),zn=new C(0,0);Ht.push({tl:Zn,tr:Ba,bl:xi,br:ua,tex:tt,writingMode:Se.writingMode,glyphOffset:la,sectionIndex:St.sectionIndex,isSDF:rr,pixelOffsetTL:ji,pixelOffsetBR:zn,minFontScaleX:0,minFontScaleY:0})}return Ht})(0,s,D,v,S,P,f,l.allowVerticalPlacement),ue=l.textSizeData;let pe=null;ue.kind==="source"?(pe=[Gl*v.layout.get("text-size").evaluate(P,{})],pe[0]>Wl&&Ot(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ue.kind==="composite"&&(pe=[Gl*J.compositeTextSizes[0].evaluate(P,{},te),Gl*J.compositeTextSizes[1].evaluate(P,{},te)],(pe[0]>Wl||pe[1]>Wl)&&Ot(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),l.addSymbols(l.text,oe,pe,D,S,P,O,n,R.lineStartIndex,R.lineLength,Z,te);for(const Le of j)q[Le]=l.text.placedSymbolArray.length-1;return 4*oe.length}function o0(l){for(const n in l)return l[n];return null}function x1(l,n,s,f){const v=l.compareText;if(n in v){const S=v[n];for(let P=S.length-1;P>=0;P--)if(f.dist(S[P])<s)return!0}else v[n]=[];return v[n].push(f),!1}const s0=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Dp{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,f]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const v=f>>4;if(v!==1)throw new Error(`Got v${v} data when expected v1.`);const S=s0[15&f];if(!S)throw new Error("Unrecognized array type.");const[P]=new Uint16Array(n,2,1),[D]=new Uint32Array(n,4,1);return new Dp(D,P,S,n)}constructor(n,s=64,f=Float64Array,v){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=f,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const S=s0.indexOf(this.ArrayType),P=2*n*this.ArrayType.BYTES_PER_ELEMENT,D=n*this.IndexArrayType.BYTES_PER_ELEMENT,R=(8-D%8)%8;if(S<0)throw new Error(`Unexpected typed array class: ${f}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+D+R,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+P+D+R),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+D+R,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+S]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=n,this.coords[this._pos++]=s,f}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return Yu(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,f,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:S,coords:P,nodeSize:D}=this,R=[0,S.length-1,0],O=[];for(;R.length;){const j=R.pop()||0,q=R.pop()||0,Z=R.pop()||0;if(q-Z<=D){for(let ue=Z;ue<=q;ue++){const pe=P[2*ue],Le=P[2*ue+1];pe>=n&&pe<=f&&Le>=s&&Le<=v&&O.push(S[ue])}continue}const J=Z+q>>1,te=P[2*J],oe=P[2*J+1];te>=n&&te<=f&&oe>=s&&oe<=v&&O.push(S[J]),(j===0?n<=te:s<=oe)&&(R.push(Z),R.push(J-1),R.push(1-j)),(j===0?f>=te:v>=oe)&&(R.push(J+1),R.push(q),R.push(1-j))}return O}within(n,s,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:S,nodeSize:P}=this,D=[0,v.length-1,0],R=[],O=f*f;for(;D.length;){const j=D.pop()||0,q=D.pop()||0,Z=D.pop()||0;if(q-Z<=P){for(let ue=Z;ue<=q;ue++)Yc(S[2*ue],S[2*ue+1],n,s)<=O&&R.push(v[ue]);continue}const J=Z+q>>1,te=S[2*J],oe=S[2*J+1];Yc(te,oe,n,s)<=O&&R.push(v[J]),(j===0?n-f<=te:s-f<=oe)&&(D.push(Z),D.push(J-1),D.push(1-j)),(j===0?n+f>=te:s+f>=oe)&&(D.push(J+1),D.push(q),D.push(1-j))}return R}}function Yu(l,n,s,f,v,S){if(v-f<=s)return;const P=f+v>>1;rf(l,n,P,f,v,S),Yu(l,n,s,f,P-1,1-S),Yu(l,n,s,P+1,v,1-S)}function rf(l,n,s,f,v,S){for(;v>f;){if(v-f>600){const O=v-f+1,j=s-f+1,q=Math.log(O),Z=.5*Math.exp(2*q/3),J=.5*Math.sqrt(q*Z*(O-Z)/O)*(j-O/2<0?-1:1);rf(l,n,s,Math.max(f,Math.floor(s-j*Z/O+J)),Math.min(v,Math.floor(s+(O-j)*Z/O+J)),S)}const P=n[2*s+S];let D=f,R=v;for(nf(l,n,f,s),n[2*v+S]>P&&nf(l,n,f,v);D<R;){for(nf(l,n,D,R),D++,R--;n[2*D+S]<P;)D++;for(;n[2*R+S]>P;)R--}n[2*f+S]===P?nf(l,n,f,R):(R++,nf(l,n,R,v)),R<=s&&(f=R+1),s<=R&&(v=R-1)}}function nf(l,n,s,f){yy(l,s,f),yy(n,2*s,2*f),yy(n,2*s+1,2*f+1)}function yy(l,n,s){const f=l[n];l[n]=l[s],l[s]=f}function Yc(l,n,s,f){const v=l-s,S=n-f;return v*v+S*S}var Qc;g.cx=void 0,(Qc=g.cx||(g.cx={})).create="create",Qc.load="load",Qc.fullLoad="fullLoad";let yd=null,Qu=[];const gd=1e3/60,vd="loadTime",af="fullLoadTime",l0={mark(l){performance.mark(l)},frame(l){const n=l;yd!=null&&Qu.push(n-yd),yd=n},clearMetrics(){yd=null,Qu=[],performance.clearMeasures(vd),performance.clearMeasures(af);for(const l in g.cx)performance.clearMarks(g.cx[l])},getPerformanceMetrics(){performance.measure(vd,g.cx.create,g.cx.load),performance.measure(af,g.cx.create,g.cx.fullLoad);const l=performance.getEntriesByName(vd)[0].duration,n=performance.getEntriesByName(af)[0].duration,s=Qu.length,f=1/(Qu.reduce(((S,P)=>S+P),0)/s/1e3),v=Qu.filter((S=>S>gd)).reduce(((S,P)=>S+(P-gd)/gd),0);return{loadTime:l,fullLoadTime:n,fps:f,percentDroppedFrames:v/(s+v)*100,totalFrames:s}}};g.$=Ct,g.A=ae,g.B=function([l,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:l*Math.cos(n)*Math.sin(s),y:l*Math.sin(n)*Math.sin(s),z:l*Math.cos(s)}},g.C=Lo,g.D=Lt,g.E=kt,g.F=Hr,g.G=zf,g.H=function(l){if(Lr==null){const n=l.navigator?l.navigator.userAgent:null;Lr=!!l.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Lr},g.I=Zh,g.J=class{constructor(l,n){this.target=l,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new fd((()=>this.process())),this.subscription=Mi(this.target,"message",(s=>this.receive(s)),!1),this.globalScope=Rr(self)?l:window}registerMessageHandler(l,n){this.messageHandlers[l]=n}sendAsync(l,n){return new Promise(((s,f)=>{const v=Math.round(1e18*Math.random()).toString(36).substring(0,10),S=n?Mi(n.signal,"abort",(()=>{S?.unsubscribe(),delete this.resolveRejects[v];const R={id:v,type:"<cancel>",origin:location.origin,targetMapId:l.targetMapId,sourceMapId:this.mapId};this.target.postMessage(R)}),xp):null;this.resolveRejects[v]={resolve:R=>{S?.unsubscribe(),s(R)},reject:R=>{S?.unsubscribe(),f(R)}};const P=[],D=Object.assign(Object.assign({},l),{id:v,sourceMapId:this.mapId,origin:location.origin,data:fo(l.data,P)});this.target.postMessage(D,{transfer:P})}))}receive(l){const n=l.data,s=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!=="resource://android"&&location.origin!=="resource://android"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[s];const f=this.abortControllers[s];return delete this.abortControllers[s],void(f&&f.abort())}if(Rr(self)||n.mustQueue)return this.tasks[s]=n,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,n)}}process(){if(this.taskQueue.length===0)return;const l=this.taskQueue.shift(),n=this.tasks[l];delete this.tasks[l],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(l,n)}processTask(l,n){return c(this,void 0,void 0,(function*(){if(n.type==="<response>"){const v=this.resolveRejects[l];return delete this.resolveRejects[l],v?void(n.error?v.reject(Il(n.error)):v.resolve(Il(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(l,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=Il(n.data),f=new AbortController;this.abortControllers[l]=f;try{const v=yield this.messageHandlers[n.type](n.sourceMapId,s,f);this.completeTask(l,null,v)}catch(v){this.completeTask(l,v)}}))}completeTask(l,n,s){const f=[];delete this.abortControllers[l];const v={id:l,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?fo(n):null,data:fo(s,f)};this.target.postMessage(v,{transfer:f})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},g.K=le,g.L=function(){var l=new ae(16);return ae!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},g.M=function(l,n,s){var f,v,S,P,D,R,O,j,q,Z,J,te,oe=s[0],ue=s[1],pe=s[2];return n===l?(l[12]=n[0]*oe+n[4]*ue+n[8]*pe+n[12],l[13]=n[1]*oe+n[5]*ue+n[9]*pe+n[13],l[14]=n[2]*oe+n[6]*ue+n[10]*pe+n[14],l[15]=n[3]*oe+n[7]*ue+n[11]*pe+n[15]):(v=n[1],S=n[2],P=n[3],D=n[4],R=n[5],O=n[6],j=n[7],q=n[8],Z=n[9],J=n[10],te=n[11],l[0]=f=n[0],l[1]=v,l[2]=S,l[3]=P,l[4]=D,l[5]=R,l[6]=O,l[7]=j,l[8]=q,l[9]=Z,l[10]=J,l[11]=te,l[12]=f*oe+D*ue+q*pe+n[12],l[13]=v*oe+R*ue+Z*pe+n[13],l[14]=S*oe+O*ue+J*pe+n[14],l[15]=P*oe+j*ue+te*pe+n[15]),l},g.N=function(l,n,s){var f=s[0],v=s[1],S=s[2];return l[0]=n[0]*f,l[1]=n[1]*f,l[2]=n[2]*f,l[3]=n[3]*f,l[4]=n[4]*v,l[5]=n[5]*v,l[6]=n[6]*v,l[7]=n[7]*v,l[8]=n[8]*S,l[9]=n[9]*S,l[10]=n[10]*S,l[11]=n[11]*S,l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15],l},g.O=function(l,n,s){var f=n[0],v=n[1],S=n[2],P=n[3],D=n[4],R=n[5],O=n[6],j=n[7],q=n[8],Z=n[9],J=n[10],te=n[11],oe=n[12],ue=n[13],pe=n[14],Le=n[15],Se=s[0],De=s[1],Ge=s[2],Xe=s[3];return l[0]=Se*f+De*D+Ge*q+Xe*oe,l[1]=Se*v+De*R+Ge*Z+Xe*ue,l[2]=Se*S+De*O+Ge*J+Xe*pe,l[3]=Se*P+De*j+Ge*te+Xe*Le,l[4]=(Se=s[4])*f+(De=s[5])*D+(Ge=s[6])*q+(Xe=s[7])*oe,l[5]=Se*v+De*R+Ge*Z+Xe*ue,l[6]=Se*S+De*O+Ge*J+Xe*pe,l[7]=Se*P+De*j+Ge*te+Xe*Le,l[8]=(Se=s[8])*f+(De=s[9])*D+(Ge=s[10])*q+(Xe=s[11])*oe,l[9]=Se*v+De*R+Ge*Z+Xe*ue,l[10]=Se*S+De*O+Ge*J+Xe*pe,l[11]=Se*P+De*j+Ge*te+Xe*Le,l[12]=(Se=s[12])*f+(De=s[13])*D+(Ge=s[14])*q+(Xe=s[15])*oe,l[13]=Se*v+De*R+Ge*Z+Xe*ue,l[14]=Se*S+De*O+Ge*J+Xe*pe,l[15]=Se*P+De*j+Ge*te+Xe*Le,l},g.P=C,g.Q=function(l,n){const s={};for(let f=0;f<n.length;f++){const v=n[f];v in l&&(s[v]=l[v])}return s},g.R=ai,g.S=Zl,g.T=zc,g.U=uy,g.V=ly,g.W=G,g.X=Q,g.Y=Va,g.Z=vi,g._=c,g.a=re,g.a$=rt,g.a0=function(l,n){var s,f,v,S,P;if(!l)return n??{};if(!n)return l;let D=Object.assign({},l);if(n.removeAll&&(D={removeAll:!0}),n.remove){const R=new Set(n.remove);D.add&&(D.add=D.add.filter((j=>!R.has(j.id)))),D.update&&(D.update=D.update.filter((j=>!R.has(j.id))));const O=new Set(((s=l.add)!==null&&s!==void 0?s:[]).map((j=>j.id)));n.remove=n.remove.filter((j=>!O.has(j)))}if(n.remove){const R=new Set(D.remove?D.remove.concat(n.remove):n.remove);D.remove=Array.from(R.values())}if(n.add){const R=D.add?D.add.concat(n.add):n.add,O=new Map(R.map((j=>[j.id,j])));D.add=Array.from(O.values())}if(n.update){const R=new Map((f=D.update)===null||f===void 0?void 0:f.map((O=>[O.id,O])));for(const O of n.update){const j=(v=R.get(O.id))!==null&&v!==void 0?v:{id:O.id};O.newGeometry&&(j.newGeometry=O.newGeometry),O.addOrUpdateProperties&&(j.addOrUpdateProperties=((S=j.addOrUpdateProperties)!==null&&S!==void 0?S:[]).concat(O.addOrUpdateProperties)),O.removeProperties&&(j.removeProperties=((P=j.removeProperties)!==null&&P!==void 0?P:[]).concat(O.removeProperties)),O.removeAllProperties&&(j.removeAllProperties=!0),R.set(O.id,j)}D.update=Array.from(R.values())}return D.remove&&D.add&&(D.remove=D.remove.filter((R=>D.add.findIndex((O=>O.id===R))===-1))),D},g.a1=sa,g.a2=Yl,g.a3=25,g.a4=pd,g.a5=l=>{const n=window.document.createElement("video");return n.muted=!0,new Promise((s=>{n.onloadstart=()=>{s(n)};for(const f of l){const v=window.document.createElement("source");Ve(f)||(n.crossOrigin="Anonymous"),v.src=f,n.appendChild(v)}}))},g.a6=vt,g.a7=function(){return wt++},g.a8=ie,g.a9=$u,g.aA=function(l){let n=1/0,s=1/0,f=-1/0,v=-1/0;for(const S of l)n=Math.min(n,S.x),s=Math.min(s,S.y),f=Math.max(f,S.x),v=Math.max(v,S.y);return[n,s,f,v]},g.aB=oa,g.aC=Me,g.aD=function(l,n,s,f,v=!1){if(!s[0]&&!s[1])return[0,0];const S=v?f==="map"?-l.bearingInRadians:0:f==="viewport"?l.bearingInRadians:0;if(S){const P=Math.sin(S),D=Math.cos(S);s=[s[0]*D-s[1]*P,s[0]*P+s[1]*D]}return[v?s[0]:Me(n,s[0],l.zoom),v?s[1]:Me(n,s[1],l.zoom)]},g.aF=yp,g.aG=my,g.aH=Km,g.aI=Dp,g.aJ=Sn,g.aK=Ji,g.aL=Ze,g.aM=Mr,g.aN=Zr,g.aO=ar,g.aP=no,g.aQ=Sp,g.aR=At,g.aS=ht,g.aT=function(l){var n=new ae(3);return n[0]=l[0],n[1]=l[1],n[2]=l[2],n},g.aU=function(l,n,s){return l[0]=n[0]-s[0],l[1]=n[1]-s[1],l[2]=n[2]-s[2],l},g.aV=function(l,n){var s=n[0],f=n[1],v=n[2],S=s*s+f*f+v*v;return S>0&&(S=1/Math.sqrt(S)),l[0]=n[0]*S,l[1]=n[1]*S,l[2]=n[2]*S,l},g.aW=ot,g.aX=function(l,n){return l[0]*n[0]+l[1]*n[1]+l[2]*n[2]},g.aY=function(l,n,s){return l[0]=n[0]*s[0],l[1]=n[1]*s[1],l[2]=n[2]*s[2],l[3]=n[3]*s[3],l},g.aZ=Ee,g.a_=function(l,n,s){const f=n[0]*s[0]+n[1]*s[1]+n[2]*s[2];return f===0?null:(-(l[0]*s[0]+l[1]*s[1]+l[2]*s[2])-s[3])/f},g.aa=is,g.ab=Fl,g.ac=Xg,g.ad=function(l){const n={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((s,f,v,S)=>{const P=v||S;return n[f]=!P||P.toLowerCase(),""})),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},g.ae=Do,g.af=function(l){return Math.pow(2,l)},g.ag=ve,g.ah=jt,g.ai=85.051129,g.aj=dd,g.ak=function(l){return Math.log(l)/Math.LN2},g.al=function(l){var n=l[0],s=l[1];return n*n+s*s},g.am=function(l,n){const s=[];for(const f in l)f in n||s.push(f);return s},g.an=function(l,n){let s=0,f=0;if(l.kind==="constant")f=l.layoutSize;else if(l.kind!=="source"){const{interpolationType:v,minZoom:S,maxZoom:P}=l,D=v?jt(Ca.interpolationFactor(v,n,S,P),0,1):0;l.kind==="camera"?f=Lo.number(l.minSize,l.maxSize,D):s=D}return{uSizeT:s,uSize:f}},g.ap=function(l,{uSize:n,uSizeT:s},{lowerSize:f,upperSize:v}){return l.kind==="source"?f/Gl:l.kind==="composite"?Lo.number(f/Gl,v/Gl,s):n},g.aq=function(l,n){var s=n[0],f=n[1],v=n[2],S=n[3],P=n[4],D=n[5],R=n[6],O=n[7],j=n[8],q=n[9],Z=n[10],J=n[11],te=n[12],oe=n[13],ue=n[14],pe=n[15],Le=s*D-f*P,Se=s*R-v*P,De=s*O-S*P,Ge=f*R-v*D,Xe=f*O-S*D,dt=v*O-S*R,Dt=j*oe-q*te,_t=j*ue-Z*te,Mt=j*pe-J*te,Ht=q*ue-Z*oe,bt=q*pe-J*oe,St=Z*pe-J*ue,tt=Le*St-Se*bt+De*Ht+Ge*Mt-Xe*_t+dt*Dt;return tt?(l[0]=(D*St-R*bt+O*Ht)*(tt=1/tt),l[1]=(v*bt-f*St-S*Ht)*tt,l[2]=(oe*dt-ue*Xe+pe*Ge)*tt,l[3]=(Z*Xe-q*dt-J*Ge)*tt,l[4]=(R*Mt-P*St-O*_t)*tt,l[5]=(s*St-v*Mt+S*_t)*tt,l[6]=(ue*De-te*dt-pe*Se)*tt,l[7]=(j*dt-Z*De+J*Se)*tt,l[8]=(P*bt-D*Mt+O*Dt)*tt,l[9]=(f*Mt-s*bt-S*Dt)*tt,l[10]=(te*Xe-oe*De+pe*Le)*tt,l[11]=(q*De-j*Xe-J*Le)*tt,l[12]=(D*_t-P*Ht-R*Dt)*tt,l[13]=(s*Ht-f*_t+v*Dt)*tt,l[14]=(oe*Se-te*Ge-ue*Le)*tt,l[15]=(j*Ge-q*Se+Z*Le)*tt,l):null},g.ar=ct,g.as=function(l){var n=l[0],s=l[1];return Math.sqrt(n*n+s*s)},g.at=function(l){return l[0]=0,l[1]=0,l},g.au=function(l,n,s){return l[0]=n[0]*s,l[1]=n[1]*s,l},g.av=cd,g.aw=It,g.ax=function(l,n,s,f){const v=n.y-l.y,S=n.x-l.x,P=f.y-s.y,D=f.x-s.x,R=P*S-D*v;if(R===0)return null;const O=(D*(l.y-s.y)-P*(l.x-s.x))/R;return new C(l.x+O*S,l.y+O*v)},g.ay=e0,g.az=Bf,g.b=Nn,g.b$=class extends u{},g.b0=function(l,n,s){return l[0]=n[0]*s,l[1]=n[1]*s,l[2]=n[2]*s,l[3]=n[3]*s,l},g.b1=function(l,n){return l[0]*n[0]+l[1]*n[1]+l[2]*n[2]+l[3]},g.b2=wp,g.b3=Zc,g.b4=function(l,n,s,f,v){var S=1/Math.tan(n/2);if(l[0]=S/s,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=S,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,v!=null&&v!==1/0){var P=1/(f-v);l[10]=(v+f)*P,l[14]=2*v*f*P}else l[10]=-1,l[14]=-2*f;return l},g.b5=function(l){var n=new ae(16);return n[0]=l[0],n[1]=l[1],n[2]=l[2],n[3]=l[3],n[4]=l[4],n[5]=l[5],n[6]=l[6],n[7]=l[7],n[8]=l[8],n[9]=l[9],n[10]=l[10],n[11]=l[11],n[12]=l[12],n[13]=l[13],n[14]=l[14],n[15]=l[15],n},g.b6=function(l,n,s){var f=Math.sin(s),v=Math.cos(s),S=n[0],P=n[1],D=n[2],R=n[3],O=n[4],j=n[5],q=n[6],Z=n[7];return n!==l&&(l[8]=n[8],l[9]=n[9],l[10]=n[10],l[11]=n[11],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15]),l[0]=S*v+O*f,l[1]=P*v+j*f,l[2]=D*v+q*f,l[3]=R*v+Z*f,l[4]=O*v-S*f,l[5]=j*v-P*f,l[6]=q*v-D*f,l[7]=Z*v-R*f,l},g.b7=function(l,n,s){var f=Math.sin(s),v=Math.cos(s),S=n[4],P=n[5],D=n[6],R=n[7],O=n[8],j=n[9],q=n[10],Z=n[11];return n!==l&&(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15]),l[4]=S*v+O*f,l[5]=P*v+j*f,l[6]=D*v+q*f,l[7]=R*v+Z*f,l[8]=O*v-S*f,l[9]=j*v-P*f,l[10]=q*v-D*f,l[11]=Z*v-R*f,l},g.b8=function(){const l=new Float32Array(16);return ve(l),l},g.b9=function(){const l=new Float64Array(16);return ve(l),l},g.bA=function(l,n){const s=et(l,360),f=et(n,360),v=f-s,S=f>s?v-360:v+360;return Math.abs(v)<Math.abs(S)?v:S},g.bB=function(l){return l[0]=0,l[1]=0,l[2]=0,l},g.bC=function(l,n,s,f){const v=Math.sqrt(l*l+n*n),S=Math.sqrt(s*s+f*f);l/=v,n/=v,s/=S,f/=S;const P=Math.acos(l*s+n*f);return-n*s+l*f>0?P:-P},g.bD=function(l,n){const s=et(l,2*Math.PI),f=et(n,2*Math.PI);return Math.min(Math.abs(s-f),Math.abs(s-f+2*Math.PI),Math.abs(s-f-2*Math.PI))},g.bE=function(){const l={},n=Oe.$version;for(const s in Oe.$root){const f=Oe.$root[s];if(f.required){let v=null;v=s==="version"?n:f.type==="array"?[]:{},v!=null&&(l[s]=v)}}return l},g.bF=Ih,g.bG=Pe,g.bH=function l(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let f=0;f<n.length;f++)if(!l(n[f],s[f]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const f in n)if(!l(n[f],s[f]))return!1;return!0}return n===s},g.bI=function(l){l=l.slice();const n=Object.create(null);for(let s=0;s<l.length;s++)n[l[s].id]=l[s];for(let s=0;s<l.length;s++)"ref"in l[s]&&(l[s]=br(l[s],n[l[s].ref]));return l},g.bJ=function(l,n){if(l.type==="custom")return new sy(l,n);switch(l.type){case"background":return new iy(l,n);case"circle":return new Sm(l,n);case"color-relief":return new d1(l,n);case"fill":return new ed(l,n);case"fill-extrusion":return new Hl(l,n);case"heatmap":return new Pm(l,n);case"hillshade":return new jl(l,n);case"line":return new Hu(l,n);case"raster":return new Wg(l,n);case"symbol":return new bp(l,n)}},g.bK=$e,g.bL=function(l,n){if(!l)return[{command:"setStyle",args:[n]}];let s=[];try{if(!qt(l.version,n.version))return[{command:"setStyle",args:[n]}];qt(l.center,n.center)||s.push({command:"setCenter",args:[n.center]}),qt(l.state,n.state)||s.push({command:"setGlobalState",args:[n.state]}),qt(l.centerAltitude,n.centerAltitude)||s.push({command:"setCenterAltitude",args:[n.centerAltitude]}),qt(l.zoom,n.zoom)||s.push({command:"setZoom",args:[n.zoom]}),qt(l.bearing,n.bearing)||s.push({command:"setBearing",args:[n.bearing]}),qt(l.pitch,n.pitch)||s.push({command:"setPitch",args:[n.pitch]}),qt(l.roll,n.roll)||s.push({command:"setRoll",args:[n.roll]}),qt(l.sprite,n.sprite)||s.push({command:"setSprite",args:[n.sprite]}),qt(l.glyphs,n.glyphs)||s.push({command:"setGlyphs",args:[n.glyphs]}),qt(l.transition,n.transition)||s.push({command:"setTransition",args:[n.transition]}),qt(l.light,n.light)||s.push({command:"setLight",args:[n.light]}),qt(l.terrain,n.terrain)||s.push({command:"setTerrain",args:[n.terrain]}),qt(l.sky,n.sky)||s.push({command:"setSky",args:[n.sky]}),qt(l.projection,n.projection)||s.push({command:"setProjection",args:[n.projection]});const f={},v=[];(function(P,D,R,O){let j;for(j in D=D||{},P=P||{})Object.prototype.hasOwnProperty.call(P,j)&&(Object.prototype.hasOwnProperty.call(D,j)||Xn(j,R,O));for(j in D)Object.prototype.hasOwnProperty.call(D,j)&&(Object.prototype.hasOwnProperty.call(P,j)?qt(P[j],D[j])||(P[j].type==="geojson"&&D[j].type==="geojson"&&Qr(P,D,j)?or(R,{command:"setGeoJSONSourceData",args:[j,D[j].data]}):ra(j,D,R,O)):Br(j,D,R))})(l.sources,n.sources,v,f);const S=[];l.layers&&l.layers.forEach((P=>{"source"in P&&f[P.source]?s.push({command:"removeLayer",args:[P.id]}):S.push(P)})),s=s.concat(v),(function(P,D,R){D=D||[];const O=(P=P||[]).map(sr),j=D.map(sr),q=P.reduce(pn,{}),Z=D.reduce(pn,{}),J=O.slice(),te=Object.create(null);let oe,ue,pe,Le,Se;for(let De=0,Ge=0;De<O.length;De++)oe=O[De],Object.prototype.hasOwnProperty.call(Z,oe)?Ge++:(or(R,{command:"removeLayer",args:[oe]}),J.splice(J.indexOf(oe,Ge),1));for(let De=0,Ge=0;De<j.length;De++)oe=j[j.length-1-De],J[J.length-1-De]!==oe&&(Object.prototype.hasOwnProperty.call(q,oe)?(or(R,{command:"removeLayer",args:[oe]}),J.splice(J.lastIndexOf(oe,J.length-Ge),1)):Ge++,Le=J[J.length-De],or(R,{command:"addLayer",args:[Z[oe],Le]}),J.splice(J.length-De,0,oe),te[oe]=!0);for(let De=0;De<j.length;De++)if(oe=j[De],ue=q[oe],pe=Z[oe],!te[oe]&&!qt(ue,pe))if(qt(ue.source,pe.source)&&qt(ue["source-layer"],pe["source-layer"])&&qt(ue.type,pe.type)){for(Se in tr(ue.layout,pe.layout,R,oe,null,"setLayoutProperty"),tr(ue.paint,pe.paint,R,oe,null,"setPaintProperty"),qt(ue.filter,pe.filter)||or(R,{command:"setFilter",args:[oe,pe.filter]}),qt(ue.minzoom,pe.minzoom)&&qt(ue.maxzoom,pe.maxzoom)||or(R,{command:"setLayerZoomRange",args:[oe,pe.minzoom,pe.maxzoom]}),ue)Object.prototype.hasOwnProperty.call(ue,Se)&&Se!=="layout"&&Se!=="paint"&&Se!=="filter"&&Se!=="metadata"&&Se!=="minzoom"&&Se!=="maxzoom"&&(Se.indexOf("paint.")===0?tr(ue[Se],pe[Se],R,oe,Se.slice(6),"setPaintProperty"):qt(ue[Se],pe[Se])||or(R,{command:"setLayerProperty",args:[oe,Se,pe[Se]]}));for(Se in pe)Object.prototype.hasOwnProperty.call(pe,Se)&&!Object.prototype.hasOwnProperty.call(ue,Se)&&Se!=="layout"&&Se!=="paint"&&Se!=="filter"&&Se!=="metadata"&&Se!=="minzoom"&&Se!=="maxzoom"&&(Se.indexOf("paint.")===0?tr(ue[Se],pe[Se],R,oe,Se.slice(6),"setPaintProperty"):qt(ue[Se],pe[Se])||or(R,{command:"setLayerProperty",args:[oe,Se,pe[Se]]}))}else or(R,{command:"removeLayer",args:[oe]}),Le=J[J.lastIndexOf(oe)+1],or(R,{command:"addLayer",args:[pe,Le]})})(S,n.layers,s)}catch(f){console.warn("Unable to compute style diff:",f),s=[{command:"setStyle",args:[n]}]}return s},g.bM=function(l){const n=[],s=l.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),l.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},g.bN=Gt,g.bO=zt,g.bP=class extends jr{constructor(l,n){super(l,n),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},g.bQ=Tn,g.bR=class extends jr{constructor(l,n){super(l,n),this.current=Fh}set(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let n=1;n<16;n++)if(l[n]!==this.current[n]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}},g.bS=za,g.bT=class extends jr{constructor(l,n){super(l,n),this.current=[0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))}},g.bU=class extends jr{constructor(l,n){super(l,n),this.current=[0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))}},g.bV=_e,g.bW=function(l,n){var s=Math.sin(n),f=Math.cos(n);return l[0]=f,l[1]=s,l[2]=0,l[3]=-s,l[4]=f,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},g.bX=function(l,n,s){var f=n[0],v=n[1],S=n[2];return l[0]=f*s[0]+v*s[3]+S*s[6],l[1]=f*s[1]+v*s[4]+S*s[7],l[2]=f*s[2]+v*s[5]+S*s[8],l},g.bY=function(l,n,s,f,v,S,P){var D=1/(n-s),R=1/(f-v),O=1/(S-P);return l[0]=-2*D,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*R,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*O,l[11]=0,l[12]=(n+s)*D,l[13]=(v+f)*R,l[14]=(P+S)*O,l[15]=1,l},g.bZ=class extends jr{constructor(l,n){super(l,n),this.current=new Array}set(l){if(l!=this.current){this.current=l;const n=new Float32Array(4*l.length);for(let s=0;s<l.length;s++)n[4*s]=l[s].r,n[4*s+1]=l[s].g,n[4*s+2]=l[s].b,n[4*s+3]=l[s].a;this.gl.uniform4fv(this.location,n)}}},g.b_=class extends jr{constructor(l,n){super(l,n),this.current=new Array}set(l){if(l!=this.current){this.current=l;const n=new Float32Array(l);this.gl.uniform1fv(this.location,n)}}},g.ba=function(){return new Float64Array(16)},g.bb=function(l,n,s){const f=new Float64Array(4);return Be(f,l,n-90,s),f},g.bc=function(l,n,s,f){var v,S,P,D,R,O=n[0],j=n[1],q=n[2],Z=n[3],J=s[0],te=s[1],oe=s[2],ue=s[3];return(S=O*J+j*te+q*oe+Z*ue)<0&&(S=-S,J=-J,te=-te,oe=-oe,ue=-ue),1-S>ee?(v=Math.acos(S),P=Math.sin(v),D=Math.sin((1-f)*v)/P,R=Math.sin(f*v)/P):(D=1-f,R=f),l[0]=D*O+R*J,l[1]=D*j+R*te,l[2]=D*q+R*oe,l[3]=D*Z+R*ue,l},g.bd=function(l){const n=new Float64Array(9);var s,f,v,S,P,D,R,O,j,q,Z,J,te,oe,ue,pe,Le,Se;q=(v=(f=l)[0])*(R=v+v),Z=(S=f[1])*R,te=(P=f[2])*R,oe=P*(O=S+S),pe=(D=f[3])*R,Le=D*O,Se=D*(j=P+P),(s=n)[0]=1-(J=S*O)-(ue=P*j),s[3]=Z-Se,s[6]=te+Le,s[1]=Z+Se,s[4]=1-q-ue,s[7]=oe-pe,s[2]=te-Le,s[5]=oe+pe,s[8]=1-q-J;const De=no(-Math.asin(jt(n[2],-1,1)));let Ge,Xe;return Math.hypot(n[5],n[8])<.001?(Ge=0,Xe=-no(Math.atan2(n[3],n[4]))):(Ge=no(n[5]===0&&n[8]===0?0:Math.atan2(n[5],n[8])),Xe=no(n[1]===0&&n[0]===0?0:Math.atan2(n[1],n[0]))),{roll:Ge,pitch:De+90,bearing:Xe}},g.be=function(l,n){return l.roll==n.roll&&l.pitch==n.pitch&&l.bearing==n.bearing},g.bf=_r,g.bg=gn,g.bh=Nc,g.bi=oi,g.bj=Na,g.bk=st,g.bl=gt,g.bm=Mn,g.bn=function(l,n,s,f,v){return st(f,v,jt((l-n)/(s-n),0,1))},g.bo=et,g.bp=function(){return new Float64Array(3)},g.bq=function(l,n,s,f){return l[0]=n[0]+s[0]*f,l[1]=n[1]+s[1]*f,l[2]=n[2]+s[2]*f,l},g.br=Be,g.bs=function(l,n,s){var f=s[0],v=s[1],S=s[2],P=s[3],D=n[0],R=n[1],O=n[2],j=v*O-S*R,q=S*D-f*O,Z=f*R-v*D;return l[0]=D+P*(j+=j)+v*(Z+=Z)-S*(q+=q),l[1]=R+P*q+S*j-f*Z,l[2]=O+P*Z+f*q-v*j,l},g.bt=function(l,n,s){const f=(v=[l[0],l[1],l[2],n[0],n[1],n[2],s[0],s[1],s[2]])[0]*((j=v[8])*(P=v[4])-(D=v[5])*(O=v[7]))+v[1]*(-j*(S=v[3])+D*(R=v[6]))+v[2]*(O*S-P*R);var v,S,P,D,R,O,j;if(f===0)return null;const q=ot([],[n[0],n[1],n[2]],[s[0],s[1],s[2]]),Z=ot([],[s[0],s[1],s[2]],[l[0],l[1],l[2]]),J=ot([],[l[0],l[1],l[2]],[n[0],n[1],n[2]]),te=At([],q,-l[3]);return ht(te,te,At([],Z,-n[3])),ht(te,te,At([],J,-s[3])),At(te,te,1/f),te},g.bu=Vu,g.bv=function(){return new Float64Array(4)},g.bw=function(l,n,s,f){var v=[],S=[];return v[0]=n[0]-s[0],v[1]=n[1]-s[1],v[2]=n[2]-s[2],S[0]=v[0]*Math.cos(f)-v[1]*Math.sin(f),S[1]=v[0]*Math.sin(f)+v[1]*Math.cos(f),S[2]=v[2],l[0]=S[0]+s[0],l[1]=S[1]+s[1],l[2]=S[2]+s[2],l},g.bx=function(l,n,s,f){var v=[],S=[];return v[0]=n[0]-s[0],v[1]=n[1]-s[1],v[2]=n[2]-s[2],S[0]=v[0],S[1]=v[1]*Math.cos(f)-v[2]*Math.sin(f),S[2]=v[1]*Math.sin(f)+v[2]*Math.cos(f),l[0]=S[0]+s[0],l[1]=S[1]+s[1],l[2]=S[2]+s[2],l},g.by=function(l,n,s,f){var v=[],S=[];return v[0]=n[0]-s[0],v[1]=n[1]-s[1],v[2]=n[2]-s[2],S[0]=v[2]*Math.sin(f)+v[0]*Math.cos(f),S[1]=v[1],S[2]=v[2]*Math.cos(f)-v[0]*Math.sin(f),l[0]=S[0]+s[0],l[1]=S[1]+s[1],l[2]=S[2]+s[2],l},g.bz=function(l,n,s){var f=Math.sin(s),v=Math.cos(s),S=n[0],P=n[1],D=n[2],R=n[3],O=n[8],j=n[9],q=n[10],Z=n[11];return n!==l&&(l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15]),l[0]=S*v-O*f,l[1]=P*v-j*f,l[2]=D*v-q*f,l[3]=R*v-Z*f,l[8]=S*f+O*v,l[9]=P*f+j*v,l[10]=D*f+q*v,l[11]=R*f+Z*v,l},g.c=Re,g.c0=id,g.c1=class extends _{},g.c2=vs,g.c3=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},g.c4=wm,g.c5=function(l,n,s){var f=n[0],v=n[1],S=n[2],P=s[3]*f+s[7]*v+s[11]*S+s[15];return l[0]=(s[0]*f+s[4]*v+s[8]*S+s[12])/(P=P||1),l[1]=(s[1]*f+s[5]*v+s[9]*S+s[13])/P,l[2]=(s[2]*f+s[6]*v+s[10]*S+s[14])/P,l},g.c6=class extends fs{},g.c7=class extends W{},g.c8=function(l,n){return l[0]===n[0]&&l[1]===n[1]&&l[2]===n[2]&&l[3]===n[3]&&l[4]===n[4]&&l[5]===n[5]&&l[6]===n[6]&&l[7]===n[7]&&l[8]===n[8]&&l[9]===n[9]&&l[10]===n[10]&&l[11]===n[11]&&l[12]===n[12]&&l[13]===n[13]&&l[14]===n[14]&&l[15]===n[15]},g.c9=function(l,n){var s=l[0],f=l[1],v=l[2],S=l[3],P=l[4],D=l[5],R=l[6],O=l[7],j=l[8],q=l[9],Z=l[10],J=l[11],te=l[12],oe=l[13],ue=l[14],pe=l[15],Le=n[0],Se=n[1],De=n[2],Ge=n[3],Xe=n[4],dt=n[5],Dt=n[6],_t=n[7],Mt=n[8],Ht=n[9],bt=n[10],St=n[11],tt=n[12],Kt=n[13],rr=n[14],Bt=n[15];return Math.abs(s-Le)<=ee*Math.max(1,Math.abs(s),Math.abs(Le))&&Math.abs(f-Se)<=ee*Math.max(1,Math.abs(f),Math.abs(Se))&&Math.abs(v-De)<=ee*Math.max(1,Math.abs(v),Math.abs(De))&&Math.abs(S-Ge)<=ee*Math.max(1,Math.abs(S),Math.abs(Ge))&&Math.abs(P-Xe)<=ee*Math.max(1,Math.abs(P),Math.abs(Xe))&&Math.abs(D-dt)<=ee*Math.max(1,Math.abs(D),Math.abs(dt))&&Math.abs(R-Dt)<=ee*Math.max(1,Math.abs(R),Math.abs(Dt))&&Math.abs(O-_t)<=ee*Math.max(1,Math.abs(O),Math.abs(_t))&&Math.abs(j-Mt)<=ee*Math.max(1,Math.abs(j),Math.abs(Mt))&&Math.abs(q-Ht)<=ee*Math.max(1,Math.abs(q),Math.abs(Ht))&&Math.abs(Z-bt)<=ee*Math.max(1,Math.abs(Z),Math.abs(bt))&&Math.abs(J-St)<=ee*Math.max(1,Math.abs(J),Math.abs(St))&&Math.abs(te-tt)<=ee*Math.max(1,Math.abs(te),Math.abs(tt))&&Math.abs(oe-Kt)<=ee*Math.max(1,Math.abs(oe),Math.abs(Kt))&&Math.abs(ue-rr)<=ee*Math.max(1,Math.abs(ue),Math.abs(rr))&&Math.abs(pe-Bt)<=ee*Math.max(1,Math.abs(pe),Math.abs(Bt))},g.cA=function(l,n){re.REGISTERED_PROTOCOLS[l]=n},g.cB=function(l){delete re.REGISTERED_PROTOCOLS[l]},g.cC=function(l,n){const s={};for(let v=0;v<l.length;v++){const S=n&&n[l[v].id]||Uf(l[v]);n&&(n[l[v].id]=S);let P=s[S];P||(P=s[S]=[]),P.push(l[v])}const f=[];for(const v in s)f.push(s[v]);return f},g.cD=Rt,g.cE=Pp,g.cF=cy,g.cG=Wm,g.cH=function(l){l.bucket.createArrays(),l.bucket.tilePixelRatio=Ct/(512*l.bucket.overscaling),l.bucket.compareText={},l.bucket.iconsNeedLinear=!1;const n=l.bucket.layers[0],s=n.layout,f=n._unevaluatedLayout._values,v={layoutIconSize:f["icon-size"].possiblyEvaluate(new Hr(l.bucket.zoom+1),l.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new Hr(l.bucket.zoom+1),l.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new Hr(18))};if(l.bucket.textSizeData.kind==="composite"){const{minZoom:O,maxZoom:j}=l.bucket.textSizeData;v.compositeTextSizes=[f["text-size"].possiblyEvaluate(new Hr(O),l.canonical),f["text-size"].possiblyEvaluate(new Hr(j),l.canonical)]}if(l.bucket.iconSizeData.kind==="composite"){const{minZoom:O,maxZoom:j}=l.bucket.iconSizeData;v.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new Hr(O),l.canonical),f["icon-size"].possiblyEvaluate(new Hr(j),l.canonical)]}const S=s.get("text-line-height")*oa,P=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",D=s.get("text-keep-upright"),R=s.get("text-size");for(const O of l.bucket.features){const j=s.get("text-font").evaluate(O,{},l.canonical).join(","),q=R.evaluate(O,{},l.canonical),Z=v.layoutTextSize.evaluate(O,{},l.canonical),J=v.layoutIconSize.evaluate(O,{},l.canonical),te={horizontal:{},vertical:void 0},oe=O.text;let ue,pe=[0,0];if(oe){const De=oe.toString(),Ge=s.get("text-letter-spacing").evaluate(O,{},l.canonical)*oa,Xe=kh(De)?Ge:0,dt=s.get("text-anchor").evaluate(O,{},l.canonical),Dt=a0(n,O,l.canonical);if(!Dt){const bt=s.get("text-radial-offset").evaluate(O,{},l.canonical);pe=bt?py(dt,[bt*oa,Zu]):s.get("text-offset").evaluate(O,{},l.canonical).map((St=>St*oa))}let _t=P?"center":s.get("text-justify").evaluate(O,{},l.canonical);const Mt=s.get("symbol-placement")==="point"?s.get("text-max-width").evaluate(O,{},l.canonical)*oa:1/0,Ht=()=>{l.bucket.allowVerticalPlacement&&kc(De)&&(te.vertical=sd(oe,l.glyphMap,l.glyphPositions,l.imagePositions,j,Mt,S,dt,"left",Xe,pe,g.ao.vertical,!0,Z,q))};if(!P&&Dt){const bt=new Set;if(_t==="auto")for(let tt=0;tt<Dt.values.length;tt+=2)bt.add(my(Dt.values[tt]));else bt.add(_t);let St=!1;for(const tt of bt)if(!te.horizontal[tt])if(St)te.horizontal[tt]=te.horizontal[0];else{const Kt=sd(oe,l.glyphMap,l.glyphPositions,l.imagePositions,j,Mt,S,"center",tt,Xe,pe,g.ao.horizontal,!1,Z,q);Kt&&(te.horizontal[tt]=Kt,St=Kt.positionedLines.length===1)}Ht()}else{_t==="auto"&&(_t=my(dt));const bt=sd(oe,l.glyphMap,l.glyphPositions,l.imagePositions,j,Mt,S,dt,_t,Xe,pe,g.ao.horizontal,!1,Z,q);bt&&(te.horizontal[_t]=bt),Ht(),kc(De)&&P&&D&&(te.vertical=sd(oe,l.glyphMap,l.glyphPositions,l.imagePositions,j,Mt,S,dt,_t,Xe,pe,g.ao.vertical,!1,Z,q))}}let Le=!1;if(O.icon&&O.icon.name){const De=l.imageMap[O.icon.name];De&&(ue=Wc(l.imagePositions[O.icon.name],s.get("icon-offset").evaluate(O,{},l.canonical),s.get("icon-anchor").evaluate(O,{},l.canonical)),Le=!!De.sdf,l.bucket.sdfIcons===void 0?l.bucket.sdfIcons=Le:l.bucket.sdfIcons!==Le&&Ot("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(De.pixelRatio!==l.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(l.bucket.iconsNeedLinear=!0))}const Se=o0(te.horizontal)||te.vertical;l.bucket.iconsInText=!!Se&&Se.iconsInText,(Se||ue)&&b1(l.bucket,O,te,ue,l.imageMap,v,Z,J,pe,Le,l.canonical,l.subdivisionGranularity)}l.showCollisionBoxes&&l.bucket.generateCollisionDebugBuffers()},g.cI=rd,g.cJ=Vo,g.cK=zr,g.cL=Lg,g.cM=Hm,g.cN=class{constructor(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let l=performance.getEntriesByName(this._marks.measure);return l.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),l=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),l}},g.cO=function(l,n,s,f,v){return c(this,void 0,void 0,(function*(){if(Q())try{return yield Va(l,n,s,f,v)}catch{}return(function(S,P,D,R,O){const j=S.width,q=S.height;ba&&Gi||(ba=new OffscreenCanvas(j,q),Gi=ba.getContext("2d",{willReadFrequently:!0})),ba.width=j,ba.height=q,Gi.drawImage(S,0,0,j,q);const Z=Gi.getImageData(P,D,R,O);return Gi.clearRect(0,0,j,q),Z.data})(l,n,s,f,v)}))},g.cP=Ln,g.cQ=M,g.cR=Um,g.cS=el,g.cT=Fo,g.cU=function(l,n){const s=new Map;if(l!=null)if(l.type==="Feature")s.set(Jh(l,n),l);else for(const f of l.features)s.set(Jh(f,n),f);return s},g.cV=function(l,n){if(l==null)return!0;if(l.type==="Feature")return Jh(l,n)!=null;if(l.type==="FeatureCollection"){const s=new Set;for(const f of l.features){const v=Jh(f,n);if(v==null||s.has(v))return!1;s.add(v)}return!0}return!1},g.cW=function(l,n,s){var f,v,S,P;if(n.removeAll&&l.clear(),n.remove)for(const D of n.remove)l.delete(D);if(n.add)for(const D of n.add){const R=Jh(D,s);R!=null&&l.set(R,D)}if(n.update)for(const D of n.update){let R=l.get(D.id);if(R==null)continue;const O=!D.removeAllProperties&&(((f=D.removeProperties)===null||f===void 0?void 0:f.length)>0||((v=D.addOrUpdateProperties)===null||v===void 0?void 0:v.length)>0);if((D.newGeometry||D.removeAllProperties||O)&&(R=Object.assign({},R),l.set(D.id,R),O&&(R.properties=Object.assign({},R.properties))),D.newGeometry&&(R.geometry=D.newGeometry),D.removeAllProperties)R.properties={};else if(((S=D.removeProperties)===null||S===void 0?void 0:S.length)>0)for(const j of D.removeProperties)Object.prototype.hasOwnProperty.call(R.properties,j)&&delete R.properties[j];if(((P=D.addOrUpdateProperties)===null||P===void 0?void 0:P.length)>0)for(const{key:j,value:q}of D.addOrUpdateProperties)R.properties[j]=q}},g.cX=po,g.ca=function(l,n){return l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7],l[8]=n[8],l[9]=n[9],l[10]=n[10],l[11]=n[11],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15],l},g.cb=l=>l.type==="symbol",g.cc=l=>l.type==="circle",g.cd=l=>l.type==="heatmap",g.ce=l=>l.type==="line",g.cf=l=>l.type==="fill",g.cg=l=>l.type==="fill-extrusion",g.ch=l=>l.type==="hillshade",g.ci=l=>l.type==="color-relief",g.cj=l=>l.type==="raster",g.ck=l=>l.type==="background",g.cl=l=>l.type==="custom",g.cm=Et,g.cn=function(l,n,s){const f=nt(n.x-s.x,n.y-s.y),v=nt(l.x-s.x,l.y-s.y);var S,P;return no(Math.atan2(f[0]*v[1]-f[1]*v[0],(S=f)[0]*(P=v)[0]+S[1]*P[1]))},g.co=Zt,g.cp=function(l,n){return An[n]&&(l instanceof MouseEvent||l instanceof WheelEvent)},g.cq=function(l,n){return fi[n]&&"touches"in l},g.cr=function(l){return fi[l]||An[l]},g.cs=function(l,n,s){var f=n[0],v=n[1];return l[0]=s[0]*f+s[4]*v+s[12],l[1]=s[1]*f+s[5]*v+s[13],l},g.ct=function(l,n){const{x:s,y:f}=sa.fromLngLat(n);return!(l<0||l>25||f<0||f>=1||s<0||s>=1)},g.cu=function(l,n){return l[0]=n[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=n[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=n[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},g.cv=class extends cn{},g.cw=l0,g.cy=function(l){return l.message===Ga},g.cz=be,g.d=Ve,g.e=Jt,g.f=l=>c(void 0,void 0,void 0,(function*(){if(l.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(l)],{type:"image/png"});try{return createImageBitmap(n)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),g.g=ne,g.h=l=>new Promise(((n,s)=>{const f=new Image;f.onload=()=>{n(f),URL.revokeObjectURL(f.src),f.onload=null,window.requestAnimationFrame((()=>{f.src=Qn}))},f.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const v=new Blob([new Uint8Array(l)],{type:"image/png"});f.src=l.byteLength?URL.createObjectURL(v):Qn})),g.i=Rr,g.j=(l,n)=>Ie(Jt(l,{type:"json"}),n),g.k=it,g.l=yt,g.m=Ie,g.n=(l,n)=>Ie(Jt(l,{type:"arrayBuffer"}),n),g.o=function(l){return new Hm(l).readFields(g1,[])},g.p=Vc,g.q=qh,g.r=pa,g.s=Mi,g.t=wr,g.u=fr,g.v=Oe,g.w=Ot,g.x=ho,g.y=Iu,g.z=El})),p("worker",["./shared"],(function(g){class c{constructor(re,ne){this.keyCache={},re&&this.replace(re,ne)}replace(re,ne){this._layerConfigs={},this._layers={},this.update(re,[],ne)}update(re,ne,le){for(const Pe of re){this._layerConfigs[Pe.id]=Pe;const Ie=this._layers[Pe.id]=g.bJ(Pe,le);Ie._featureFilter=g.aa(Ie.filter,le),this.keyCache[Pe.id]&&delete this.keyCache[Pe.id]}for(const Pe of ne)delete this.keyCache[Pe],delete this._layerConfigs[Pe],delete this._layers[Pe];this.familiesBySource={};const be=g.cC(Object.values(this._layerConfigs),this.keyCache);for(const Pe of be){const Ie=Pe.map((kt=>this._layers[kt.id])),Ve=Ie[0];if(Ve.visibility==="none")continue;const Ue=Ve.source||"";let Je=this.familiesBySource[Ue];Je||(Je=this.familiesBySource[Ue]={});const yt=Ve.sourceLayer||"_geojsonTileLayer";let it=Je[yt];it||(it=Je[yt]=[]),it.push(Ie)}}}class C{constructor(re){const ne={},le=[];for(const Ve in re){const Ue=re[Ve],Je=ne[Ve]={};for(const yt in Ue){const it=Ue[+yt];if(!it||it.bitmap.width===0||it.bitmap.height===0)continue;const kt={x:0,y:0,w:it.bitmap.width+2,h:it.bitmap.height+2};le.push(kt),Je[yt]={rect:kt,metrics:it.metrics}}}const{w:be,h:Pe}=g.p(le),Ie=new g.q({width:be||1,height:Pe||1});for(const Ve in re){const Ue=re[Ve];for(const Je in Ue){const yt=Ue[+Je];if(!yt||yt.bitmap.width===0||yt.bitmap.height===0)continue;const it=ne[Ve][Je].rect;g.q.copy(yt.bitmap,Ie,{x:0,y:0},{x:it.x+1,y:it.y+1},yt.bitmap)}}this.image=Ie,this.positions=ne}}g.cD("GlyphAtlas",C);class M{constructor(re){this.tileID=new g.Z(re.tileID.overscaledZ,re.tileID.wrap,re.tileID.canonical.z,re.tileID.canonical.x,re.tileID.canonical.y),this.uid=re.uid,this.zoom=re.zoom,this.pixelRatio=re.pixelRatio,this.tileSize=re.tileSize,this.source=re.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=re.showCollisionBoxes,this.collectResourceTiming=!!re.collectResourceTiming,this.returnDependencies=!!re.returnDependencies,this.promoteId=re.promoteId,this.inFlightDependencies=[]}parse(re,ne,le,be,Pe){return g._(this,void 0,void 0,(function*(){this.status="parsing",this.data=re,this.collisionBoxArray=new g.a8;const Ie=new g.cE(Object.keys(re.layers).sort()),Ve=new g.cF(this.tileID,this.promoteId);Ve.bucketLayerIDs=[];const Ue={},Je={featureIndex:Ve,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:le,subdivisionGranularity:Pe},yt=ne.familiesBySource[this.source];for(const tr in yt){const sr=re.layers[tr];if(!sr)continue;sr.version===1&&g.w(`Vector tile source "${this.source}" layer "${tr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const pn=Ie.encode(tr),vt=[];for(let Ia=0;Ia<sr.length;Ia++){const Cn=sr.feature(Ia),Xo=Ve.getId(Cn,tr);vt.push({feature:Cn,id:Xo,index:Ia,sourceLayerIndex:pn})}for(const Ia of yt[tr]){const Cn=Ia[0];Cn.source!==this.source&&g.w(`layer.source = ${Cn.source} does not equal this.source = ${this.source}`),Cn.minzoom&&this.zoom<Math.floor(Cn.minzoom)||Cn.maxzoom&&this.zoom>=Cn.maxzoom||Cn.visibility!=="none"&&(T(Ia,this.zoom,le),(Ue[Cn.id]=Cn.createBucket({index:Ve.bucketLayerIDs.length,layers:Ia,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:pn,sourceID:this.source})).populate(vt,Je,this.tileID.canonical),Ve.bucketLayerIDs.push(Ia.map((Xo=>Xo.id))))}}const it=g.bN(Je.glyphDependencies,(tr=>Object.keys(tr).map(Number)));this.inFlightDependencies.forEach((tr=>tr?.abort())),this.inFlightDependencies=[];let kt=Promise.resolve({});if(Object.keys(it).length){const tr=new AbortController;this.inFlightDependencies.push(tr),kt=be.sendAsync({type:"GG",data:{stacks:it,source:this.source,tileID:this.tileID,type:"glyphs"}},tr)}const Oe=Object.keys(Je.iconDependencies);let ir=Promise.resolve({});if(Oe.length){const tr=new AbortController;this.inFlightDependencies.push(tr),ir=be.sendAsync({type:"GI",data:{icons:Oe,source:this.source,tileID:this.tileID,type:"icons"}},tr)}const br=Object.keys(Je.patternDependencies);let qt=Promise.resolve({});if(br.length){const tr=new AbortController;this.inFlightDependencies.push(tr),qt=be.sendAsync({type:"GI",data:{icons:br,source:this.source,tileID:this.tileID,type:"patterns"}},tr)}const[or,Br,Xn]=yield Promise.all([kt,ir,qt]),ra=new C(or),Qr=new g.cG(Br,Xn);for(const tr in Ue){const sr=Ue[tr];sr instanceof g.a9?(T(sr.layers,this.zoom,le),g.cH({bucket:sr,glyphMap:or,glyphPositions:ra.positions,imageMap:Br,imagePositions:Qr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Je.subdivisionGranularity})):sr.hasPattern&&(sr instanceof g.cI||sr instanceof g.cJ||sr instanceof g.cK)&&(T(sr.layers,this.zoom,le),sr.addFeatures(Je,this.tileID.canonical,Qr.patternPositions))}return this.status="done",{buckets:Object.values(Ue).filter((tr=>!tr.isEmpty())),featureIndex:Ve,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ra.image,imageAtlas:Qr,glyphMap:this.returnDependencies?or:null,iconMap:this.returnDependencies?Br:null,glyphPositions:this.returnDependencies?ra.positions:null}}))}}function T(Re,re,ne){const le=new g.F(re);for(const be of Re)be.recalculate(le,ne)}class U{constructor(re,ne,le){this.actor=re,this.layerIndex=ne,this.availableImages=le,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(re,ne){return g._(this,void 0,void 0,(function*(){const le=yield g.n(re.request,ne);try{return{vectorTile:new g.cL(new g.cM(le.data)),rawData:le.data,cacheControl:le.cacheControl,expires:le.expires}}catch(be){const Pe=new Uint8Array(le.data);let Ie=`Unable to parse the tile at ${re.request.url}, `;throw Ie+=Pe[0]===31&&Pe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${be.message}`,new Error(Ie)}}))}loadTile(re){return g._(this,void 0,void 0,(function*(){const ne=re.uid,le=!!(re&&re.request&&re.request.collectResourceTiming)&&new g.cN(re.request),be=new M(re);this.loading[ne]=be;const Pe=new AbortController;be.abort=Pe;try{const Ie=yield this.loadVectorTile(re,Pe);if(delete this.loading[ne],!Ie)return null;const Ve=Ie.rawData,Ue={};Ie.expires&&(Ue.expires=Ie.expires),Ie.cacheControl&&(Ue.cacheControl=Ie.cacheControl);const Je={};if(le){const it=le.finish();it&&(Je.resourceTiming=JSON.parse(JSON.stringify(it)))}be.vectorTile=Ie.vectorTile;const yt=be.parse(Ie.vectorTile,this.layerIndex,this.availableImages,this.actor,re.subdivisionGranularity);this.loaded[ne]=be,this.fetching[ne]={rawTileData:Ve,cacheControl:Ue,resourceTiming:Je};try{const it=yield yt;return g.e({rawTileData:Ve.slice(0)},it,Ue,Je)}finally{delete this.fetching[ne]}}catch(Ie){throw delete this.loading[ne],be.status="done",this.loaded[ne]=be,Ie}}))}reloadTile(re){return g._(this,void 0,void 0,(function*(){const ne=re.uid;if(!this.loaded||!this.loaded[ne])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const le=this.loaded[ne];if(le.showCollisionBoxes=re.showCollisionBoxes,le.status==="parsing"){const be=yield le.parse(le.vectorTile,this.layerIndex,this.availableImages,this.actor,re.subdivisionGranularity);let Pe;if(this.fetching[ne]){const{rawTileData:Ie,cacheControl:Ve,resourceTiming:Ue}=this.fetching[ne];delete this.fetching[ne],Pe=g.e({rawTileData:Ie.slice(0)},be,Ve,Ue)}else Pe=be;return Pe}if(le.status==="done"&&le.vectorTile)return le.parse(le.vectorTile,this.layerIndex,this.availableImages,this.actor,re.subdivisionGranularity)}))}abortTile(re){return g._(this,void 0,void 0,(function*(){const ne=this.loading,le=re.uid;ne&&ne[le]&&ne[le].abort&&(ne[le].abort.abort(),delete ne[le])}))}removeTile(re){return g._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[re.uid]&&delete this.loaded[re.uid]}))}}class z{constructor(){this.loaded={}}loadTile(re){return g._(this,void 0,void 0,(function*(){const{uid:ne,encoding:le,rawImageData:be,redFactor:Pe,greenFactor:Ie,blueFactor:Ve,baseShift:Ue}=re,Je=be.width+2,yt=be.height+2,it=g.b(be)?new g.R({width:Je,height:yt},yield g.cO(be,-1,-1,Je,yt)):be,kt=new g.cP(ne,it,le,Pe,Ie,Ve,Ue);return this.loaded=this.loaded||{},this.loaded[ne]=kt,kt}))}removeTile(re){const ne=this.loaded,le=re.uid;ne&&ne[le]&&delete ne[le]}}var F,V,$=(function(){if(V)return F;function Re(ne,le){if(ne.length!==0){re(ne[0],le);for(var be=1;be<ne.length;be++)re(ne[be],!le)}}function re(ne,le){for(var be=0,Pe=0,Ie=0,Ve=ne.length,Ue=Ve-1;Ie<Ve;Ue=Ie++){var Je=(ne[Ie][0]-ne[Ue][0])*(ne[Ue][1]+ne[Ie][1]),yt=be+Je;Pe+=Math.abs(be)>=Math.abs(Je)?be-yt+Je:Je-yt+be,be=yt}be+Pe>=0!=!!le&&ne.reverse()}return V=1,F=function ne(le,be){var Pe,Ie=le&&le.type;if(Ie==="FeatureCollection")for(Pe=0;Pe<le.features.length;Pe++)ne(le.features[Pe],be);else if(Ie==="GeometryCollection")for(Pe=0;Pe<le.geometries.length;Pe++)ne(le.geometries[Pe],be);else if(Ie==="Feature")ne(le.geometry,be);else if(Ie==="Polygon")Re(le.coordinates,be);else if(Ie==="MultiPolygon")for(Pe=0;Pe<le.coordinates.length;Pe++)Re(le.coordinates[Pe],be);return le}})(),G=g.cQ($);class Q extends g.cS{constructor(re,ne){super(new g.cM,0,ne,[],[]),this.feature=re,this.type=re.type,this.properties=re.tags?re.tags:{},"id"in re&&(typeof re.id=="string"?this.id=parseInt(re.id,10):typeof re.id!="number"||isNaN(re.id)||(this.id=re.id))}loadGeometry(){const re=[],ne=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const le of ne){const be=[];for(const Pe of le)be.push(new g.P(Pe[0],Pe[1]));re.push(be)}return re}}class ee extends g.cR{constructor(re,ne){super(new g.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=ne?ne.version:1,this.extent=ne?ne.extent:4096,this.length=re.length,this.features=re}feature(re){return new Q(this.features[re],this.extent)}}function ae(Re,re){re.writeVarintField(15,Re.version||1),re.writeStringField(1,Re.name||""),re.writeVarintField(5,Re.extent||4096);const ne={keys:[],values:[],keycache:{},valuecache:{}};for(let Pe=0;Pe<Re.length;Pe++)ne.feature=Re.feature(Pe),re.writeMessage(2,_e,ne);const le=ne.keys;for(const Pe of le)re.writeStringField(3,Pe);const be=ne.values;for(const Pe of be)re.writeMessage(4,ht,Pe)}function _e(Re,re){if(!Re.feature)return;const ne=Re.feature;ne.id!==void 0&&re.writeVarintField(1,ne.id),re.writeMessage(2,ve,Re),re.writeVarintField(3,ne.type),re.writeMessage(4,Fe,ne)}function ve(Re,re){for(const ne in Re.feature?.properties){let le=Re.feature.properties[ne],be=Re.keycache[ne];if(le===null)continue;be===void 0&&(Re.keys.push(ne),be=Re.keys.length-1,Re.keycache[ne]=be),re.writeVarint(be),typeof le!="string"&&typeof le!="boolean"&&typeof le!="number"&&(le=JSON.stringify(le));const Pe=typeof le+":"+le;let Ie=Re.valuecache[Pe];Ie===void 0&&(Re.values.push(le),Ie=Re.values.length-1,Re.valuecache[Pe]=Ie),re.writeVarint(Ie)}}function Ae(Re,re){return(re<<3)+(7&Re)}function Ee(Re){return Re<<1^Re>>31}function Fe(Re,re){const ne=Re.loadGeometry(),le=Re.type;let be=0,Pe=0;for(const Ie of ne){let Ve=1;le===1&&(Ve=Ie.length),re.writeVarint(Ae(1,Ve));const Ue=le===3?Ie.length-1:Ie.length;for(let Je=0;Je<Ue;Je++){Je===1&&le!==1&&re.writeVarint(Ae(2,Ue-1));const yt=Ie[Je].x-be,it=Ie[Je].y-Pe;re.writeVarint(Ee(yt)),re.writeVarint(Ee(it)),be+=yt,Pe+=it}Re.type===3&&re.writeVarint(Ae(7,1))}}function ht(Re,re){const ne=typeof Re;ne==="string"?re.writeStringField(1,Re):ne==="boolean"?re.writeBooleanField(7,Re):ne==="number"&&(Re%1!=0?re.writeDoubleField(3,Re):Re<0?re.writeSVarintField(6,Re):re.writeVarintField(5,Re))}const At={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Re=>Re},ot=Math.fround||(ft=new Float32Array(1),Re=>(ft[0]=+Re,ft[0]));var ft;class rt{constructor(re){this.options=Object.assign(Object.create(At),re),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(re){const{log:ne,minZoom:le,maxZoom:be}=this.options;ne&&console.time("total time");const Pe=`prepare ${re.length} points`;ne&&console.time(Pe),this.points=re;const Ie=[];for(let Ue=0;Ue<re.length;Ue++){const Je=re[Ue];if(!Je.geometry)continue;const[yt,it]=Je.geometry.coordinates,kt=ot(Be(yt)),Oe=ot(ct(it));Ie.push(kt,Oe,1/0,Ue,-1,1),this.options.reduce&&Ie.push(0)}let Ve=this.trees[be+1]=this._createTree(Ie);ne&&console.timeEnd(Pe);for(let Ue=be;Ue>=le;Ue--){const Je=+Date.now();Ve=this.trees[Ue]=this._createTree(this._cluster(Ve,Ue)),ne&&console.log("z%d: %d clusters in %dms",Ue,Ve.numItems,+Date.now()-Je)}return ne&&console.timeEnd("total time"),this}getClusters(re,ne){let le=((re[0]+180)%360+360)%360-180;const be=Math.max(-90,Math.min(90,re[1]));let Pe=re[2]===180?180:((re[2]+180)%360+360)%360-180;const Ie=Math.max(-90,Math.min(90,re[3]));if(re[2]-re[0]>=360)le=-180,Pe=180;else if(le>Pe){const it=this.getClusters([le,be,180,Ie],ne),kt=this.getClusters([-180,be,Pe,Ie],ne);return it.concat(kt)}const Ve=this.trees[this._limitZoom(ne)],Ue=Ve.range(Be(le),ct(Ie),Be(Pe),ct(be)),Je=Ve.data,yt=[];for(const it of Ue){const kt=this.stride*it;yt.push(Je[kt+5]>1?It(Je,kt,this.clusterProps):this.points[Je[kt+3]])}return yt}getChildren(re){const ne=this._getOriginId(re),le=this._getOriginZoom(re),be="No cluster with the specified id.",Pe=this.trees[le];if(!Pe)throw new Error(be);const Ie=Pe.data;if(ne*this.stride>=Ie.length)throw new Error(be);const Ve=this.options.radius/(this.options.extent*Math.pow(2,le-1)),Ue=Pe.within(Ie[ne*this.stride],Ie[ne*this.stride+1],Ve),Je=[];for(const yt of Ue){const it=yt*this.stride;Ie[it+4]===re&&Je.push(Ie[it+5]>1?It(Ie,it,this.clusterProps):this.points[Ie[it+3]])}if(Je.length===0)throw new Error(be);return Je}getLeaves(re,ne,le){const be=[];return this._appendLeaves(be,re,ne=ne||10,le=le||0,0),be}getTile(re,ne,le){const be=this.trees[this._limitZoom(re)],Pe=Math.pow(2,re),{extent:Ie,radius:Ve}=this.options,Ue=Ve/Ie,Je=(le-Ue)/Pe,yt=(le+1+Ue)/Pe,it={features:[]};return this._addTileFeatures(be.range((ne-Ue)/Pe,Je,(ne+1+Ue)/Pe,yt),be.data,ne,le,Pe,it),ne===0&&this._addTileFeatures(be.range(1-Ue/Pe,Je,1,yt),be.data,Pe,le,Pe,it),ne===Pe-1&&this._addTileFeatures(be.range(0,Je,Ue/Pe,yt),be.data,-1,le,Pe,it),it.features.length?it:null}getClusterExpansionZoom(re){let ne=this._getOriginZoom(re)-1;for(;ne<=this.options.maxZoom;){const le=this.getChildren(re);if(ne++,le.length!==1)break;re=le[0].properties.cluster_id}return ne}_appendLeaves(re,ne,le,be,Pe){const Ie=this.getChildren(ne);for(const Ve of Ie){const Ue=Ve.properties;if(Ue&&Ue.cluster?Pe+Ue.point_count<=be?Pe+=Ue.point_count:Pe=this._appendLeaves(re,Ue.cluster_id,le,be,Pe):Pe<be?Pe++:re.push(Ve),re.length===le)break}return Pe}_createTree(re){const ne=new g.aI(re.length/this.stride|0,this.options.nodeSize,Float32Array);for(let le=0;le<re.length;le+=this.stride)ne.add(re[le],re[le+1]);return ne.finish(),ne.data=re,ne}_addTileFeatures(re,ne,le,be,Pe,Ie){for(const Ve of re){const Ue=Ve*this.stride,Je=ne[Ue+5]>1;let yt,it,kt;if(Je)yt=Ut(ne,Ue,this.clusterProps),it=ne[Ue],kt=ne[Ue+1];else{const br=this.points[ne[Ue+3]];yt=br.properties;const[qt,or]=br.geometry.coordinates;it=Be(qt),kt=ct(or)}const Oe={type:1,geometry:[[Math.round(this.options.extent*(it*Pe-le)),Math.round(this.options.extent*(kt*Pe-be))]],tags:yt};let ir;ir=Je||this.options.generateId?ne[Ue+3]:this.points[ne[Ue+3]].id,ir!==void 0&&(Oe.id=ir),Ie.features.push(Oe)}}_limitZoom(re){return Math.max(this.options.minZoom,Math.min(Math.floor(+re),this.options.maxZoom+1))}_cluster(re,ne){const{radius:le,extent:be,reduce:Pe,minPoints:Ie}=this.options,Ve=le/(be*Math.pow(2,ne)),Ue=re.data,Je=[],yt=this.stride;for(let it=0;it<Ue.length;it+=yt){if(Ue[it+2]<=ne)continue;Ue[it+2]=ne;const kt=Ue[it],Oe=Ue[it+1],ir=re.within(Ue[it],Ue[it+1],Ve),br=Ue[it+5];let qt=br;for(const or of ir){const Br=or*yt;Ue[Br+2]>ne&&(qt+=Ue[Br+5])}if(qt>br&&qt>=Ie){let or,Br=kt*br,Xn=Oe*br,ra=-1;const Qr=(it/yt<<5)+(ne+1)+this.points.length;for(const tr of ir){const sr=tr*yt;if(Ue[sr+2]<=ne)continue;Ue[sr+2]=ne;const pn=Ue[sr+5];Br+=Ue[sr]*pn,Xn+=Ue[sr+1]*pn,Ue[sr+4]=Qr,Pe&&(or||(or=this._map(Ue,it,!0),ra=this.clusterProps.length,this.clusterProps.push(or)),Pe(or,this._map(Ue,sr)))}Ue[it+4]=Qr,Je.push(Br/qt,Xn/qt,1/0,Qr,-1,qt),Pe&&Je.push(ra)}else{for(let or=0;or<yt;or++)Je.push(Ue[it+or]);if(qt>1)for(const or of ir){const Br=or*yt;if(!(Ue[Br+2]<=ne)){Ue[Br+2]=ne;for(let Xn=0;Xn<yt;Xn++)Je.push(Ue[Br+Xn])}}}}return Je}_getOriginId(re){return re-this.points.length>>5}_getOriginZoom(re){return(re-this.points.length)%32}_map(re,ne,le){if(re[ne+5]>1){const Ie=this.clusterProps[re[ne+6]];return le?Object.assign({},Ie):Ie}const be=this.points[re[ne+3]].properties,Pe=this.options.map(be);return le&&Pe===be?Object.assign({},Pe):Pe}}function It(Re,re,ne){return{type:"Feature",id:Re[re+3],properties:Ut(Re,re,ne),geometry:{type:"Point",coordinates:[(le=Re[re],360*(le-.5)),nt(Re[re+1])]}};var le}function Ut(Re,re,ne){const le=Re[re+5],be=le>=1e4?`${Math.round(le/1e3)}k`:le>=1e3?Math.round(le/100)/10+"k":le,Pe=Re[re+6],Ie=Pe===-1?{}:Object.assign({},ne[Pe]);return Object.assign(Ie,{cluster:!0,cluster_id:Re[re+3],point_count:le,point_count_abbreviated:be})}function Be(Re){return Re/360+.5}function ct(Re){const re=Math.sin(Re*Math.PI/180),ne=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return ne<0?0:ne>1?1:ne}function nt(Re){const re=(180-360*Re)*Math.PI/180;return 360*Math.atan(Math.exp(re))/Math.PI-90}function Ct(Re,re,ne,le){let be=le;const Pe=re+(ne-re>>1);let Ie,Ve=ne-re;const Ue=Re[re],Je=Re[re+1],yt=Re[ne],it=Re[ne+1];for(let kt=re+3;kt<ne;kt+=3){const Oe=Me(Re[kt],Re[kt+1],Ue,Je,yt,it);if(Oe>be)Ie=kt,be=Oe;else if(Oe===be){const ir=Math.abs(kt-Pe);ir<Ve&&(Ie=kt,Ve=ir)}}be>le&&(Ie-re>3&&Ct(Re,re,Ie,le),Re[Ie+2]=be,ne-Ie>3&&Ct(Re,Ie,ne,le))}function Me(Re,re,ne,le,be,Pe){let Ie=be-ne,Ve=Pe-le;if(Ie!==0||Ve!==0){const Ue=((Re-ne)*Ie+(re-le)*Ve)/(Ie*Ie+Ve*Ve);Ue>1?(ne=be,le=Pe):Ue>0&&(ne+=Ie*Ue,le+=Ve*Ue)}return Ie=Re-ne,Ve=re-le,Ie*Ie+Ve*Ve}function et(Re,re,ne,le){const be={id:Re??null,type:re,geometry:ne,tags:le,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(re==="Point"||re==="MultiPoint"||re==="LineString")st(be,ne);else if(re==="Polygon")st(be,ne[0]);else if(re==="MultiLineString")for(const Pe of ne)st(be,Pe);else if(re==="MultiPolygon")for(const Pe of ne)st(be,Pe[0]);return be}function st(Re,re){for(let ne=0;ne<re.length;ne+=3)Re.minX=Math.min(Re.minX,re[ne]),Re.minY=Math.min(Re.minY,re[ne+1]),Re.maxX=Math.max(Re.maxX,re[ne]),Re.maxY=Math.max(Re.maxY,re[ne+1])}function gt(Re,re,ne,le){if(!re.geometry)return;const be=re.geometry.coordinates;if(be&&be.length===0)return;const Pe=re.geometry.type,Ie=Math.pow(ne.tolerance/((1<<ne.maxZoom)*ne.extent),2);let Ve=[],Ue=re.id;if(ne.promoteId?Ue=re.properties[ne.promoteId]:ne.generateId&&(Ue=le||0),Pe==="Point")Et(be,Ve);else if(Pe==="MultiPoint")for(const Je of be)Et(Je,Ve);else if(Pe==="LineString")Zt(be,Ve,Ie,!1);else if(Pe==="MultiLineString"){if(ne.lineMetrics){for(const Je of be)Ve=[],Zt(Je,Ve,Ie,!1),Re.push(et(Ue,"LineString",Ve,re.properties));return}jt(be,Ve,Ie,!1)}else if(Pe==="Polygon")jt(be,Ve,Ie,!0);else{if(Pe!=="MultiPolygon"){if(Pe==="GeometryCollection"){for(const Je of re.geometry.geometries)gt(Re,{id:Ue,geometry:Je,properties:re.properties},ne,le);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Je of be){const yt=[];jt(Je,yt,Ie,!0),Ve.push(yt)}}Re.push(et(Ue,Pe,Ve,re.properties))}function Et(Re,re){re.push(ar(Re[0]),Jt(Re[1]),0)}function Zt(Re,re,ne,le){let be,Pe,Ie=0;for(let Ue=0;Ue<Re.length;Ue++){const Je=ar(Re[Ue][0]),yt=Jt(Re[Ue][1]);re.push(Je,yt,0),Ue>0&&(Ie+=le?(be*yt-Je*Pe)/2:Math.sqrt(Math.pow(Je-be,2)+Math.pow(yt-Pe,2))),be=Je,Pe=yt}const Ve=re.length-3;re[2]=1,Ct(re,0,Ve,ne),re[Ve+2]=1,re.size=Math.abs(Ie),re.start=0,re.end=re.size}function jt(Re,re,ne,le){for(let be=0;be<Re.length;be++){const Pe=[];Zt(Re[be],Pe,ne,le),re.push(Pe)}}function ar(Re){return Re/360+.5}function Jt(Re){const re=Math.sin(Re*Math.PI/180),ne=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return ne<0?0:ne>1?1:ne}function wt(Re,re,ne,le,be,Pe,Ie,Ve){if(le/=re,Pe>=(ne/=re)&&Ie<le)return Re;if(Ie<ne||Pe>=le)return null;const Ue=[];for(const Je of Re){const yt=Je.geometry;let it=Je.type;const kt=be===0?Je.minX:Je.minY,Oe=be===0?Je.maxX:Je.maxY;if(kt>=ne&&Oe<le){Ue.push(Je);continue}if(Oe<ne||kt>=le)continue;let ir=[];if(it==="Point"||it==="MultiPoint")Gt(yt,ir,ne,le,be);else if(it==="LineString")zt(yt,ir,ne,le,be,!1,Ve.lineMetrics);else if(it==="MultiLineString")$t(yt,ir,ne,le,be,!1);else if(it==="Polygon")$t(yt,ir,ne,le,be,!0);else if(it==="MultiPolygon")for(const br of yt){const qt=[];$t(br,qt,ne,le,be,!0),qt.length&&ir.push(qt)}if(ir.length){if(Ve.lineMetrics&&it==="LineString"){for(const br of ir)Ue.push(et(Je.id,it,br,Je.tags));continue}it!=="LineString"&&it!=="MultiLineString"||(ir.length===1?(it="LineString",ir=ir[0]):it="MultiLineString"),it!=="Point"&&it!=="MultiPoint"||(it=ir.length===3?"Point":"MultiPoint"),Ue.push(et(Je.id,it,ir,Je.tags))}}return Ue.length?Ue:null}function Gt(Re,re,ne,le,be){for(let Pe=0;Pe<Re.length;Pe+=3){const Ie=Re[Pe+be];Ie>=ne&&Ie<=le&&Ot(re,Re[Pe],Re[Pe+1],Re[Pe+2])}}function zt(Re,re,ne,le,be,Pe,Ie){let Ve=$e(Re);const Ue=be===0?Sr:Rr;let Je,yt,it=Re.start;for(let qt=0;qt<Re.length-3;qt+=3){const or=Re[qt],Br=Re[qt+1],Xn=Re[qt+2],ra=Re[qt+3],Qr=Re[qt+4],tr=be===0?or:Br,sr=be===0?ra:Qr;let pn=!1;Ie&&(Je=Math.sqrt(Math.pow(or-ra,2)+Math.pow(Br-Qr,2))),tr<ne?sr>ne&&(yt=Ue(Ve,or,Br,ra,Qr,ne),Ie&&(Ve.start=it+Je*yt)):tr>le?sr<le&&(yt=Ue(Ve,or,Br,ra,Qr,le),Ie&&(Ve.start=it+Je*yt)):Ot(Ve,or,Br,Xn),sr<ne&&tr>=ne&&(yt=Ue(Ve,or,Br,ra,Qr,ne),pn=!0),sr>le&&tr<=le&&(yt=Ue(Ve,or,Br,ra,Qr,le),pn=!0),!Pe&&pn&&(Ie&&(Ve.end=it+Je*yt),re.push(Ve),Ve=$e(Re)),Ie&&(it+=Je)}let kt=Re.length-3;const Oe=Re[kt],ir=Re[kt+1],br=be===0?Oe:ir;br>=ne&&br<=le&&Ot(Ve,Oe,ir,Re[kt+2]),kt=Ve.length-3,Pe&&kt>=3&&(Ve[kt]!==Ve[0]||Ve[kt+1]!==Ve[1])&&Ot(Ve,Ve[0],Ve[1],Ve[2]),Ve.length&&re.push(Ve)}function $e(Re){const re=[];return re.size=Re.size,re.start=Re.start,re.end=Re.end,re}function $t(Re,re,ne,le,be,Pe){for(const Ie of Re)zt(Ie,re,ne,le,be,Pe,!1)}function Ot(Re,re,ne,le){Re.push(re,ne,le)}function Sr(Re,re,ne,le,be,Pe){const Ie=(Pe-re)/(le-re);return Ot(Re,Pe,ne+(be-ne)*Ie,1),Ie}function Rr(Re,re,ne,le,be,Pe){const Ie=(Pe-ne)/(be-ne);return Ot(Re,re+(le-re)*Ie,Pe,1),Ie}function Lr(Re,re){const ne=[];for(let le=0;le<Re.length;le++){const be=Re[le],Pe=be.type;let Ie;if(Pe==="Point"||Pe==="MultiPoint"||Pe==="LineString")Ie=Nn(be.geometry,re);else if(Pe==="MultiLineString"||Pe==="Polygon"){Ie=[];for(const Ve of be.geometry)Ie.push(Nn(Ve,re))}else if(Pe==="MultiPolygon"){Ie=[];for(const Ve of be.geometry){const Ue=[];for(const Je of Ve)Ue.push(Nn(Je,re));Ie.push(Ue)}}ne.push(et(be.id,Pe,Ie,be.tags))}return ne}function Nn(Re,re){const ne=[];ne.size=Re.size,Re.start!==void 0&&(ne.start=Re.start,ne.end=Re.end);for(let le=0;le<Re.length;le+=3)ne.push(Re[le]+re,Re[le+1],Re[le+2]);return ne}function Qn(Re,re){if(Re.transformed)return Re;const ne=1<<Re.z,le=Re.x,be=Re.y;for(const Pe of Re.features){const Ie=Pe.geometry,Ve=Pe.type;if(Pe.geometry=[],Ve===1)for(let Ue=0;Ue<Ie.length;Ue+=2)Pe.geometry.push(Va(Ie[Ue],Ie[Ue+1],re,ne,le,be));else for(let Ue=0;Ue<Ie.length;Ue++){const Je=[];for(let yt=0;yt<Ie[Ue].length;yt+=2)Je.push(Va(Ie[Ue][yt],Ie[Ue][yt+1],re,ne,le,be));Pe.geometry.push(Je)}}return Re.transformed=!0,Re}function Va(Re,re,ne,le,be,Pe){return[Math.round(ne*(Re*le-be)),Math.round(ne*(re*le-Pe))]}function ba(Re,re,ne,le,be){const Pe=re===be.maxZoom?0:be.tolerance/((1<<re)*be.extent),Ie={features:[],numPoints:0,numSimplified:0,numFeatures:Re.length,source:null,x:ne,y:le,z:re,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ve of Re)Gi(Ie,Ve,Pe,be);return Ie}function Gi(Re,re,ne,le){const be=re.geometry,Pe=re.type,Ie=[];if(Re.minX=Math.min(Re.minX,re.minX),Re.minY=Math.min(Re.minY,re.minY),Re.maxX=Math.max(Re.maxX,re.maxX),Re.maxY=Math.max(Re.maxY,re.maxY),Pe==="Point"||Pe==="MultiPoint")for(let Ve=0;Ve<be.length;Ve+=3)Ie.push(be[Ve],be[Ve+1]),Re.numPoints++,Re.numSimplified++;else if(Pe==="LineString")Mi(Ie,be,Re,ne,!1,!1);else if(Pe==="MultiLineString"||Pe==="Polygon")for(let Ve=0;Ve<be.length;Ve++)Mi(Ie,be[Ve],Re,ne,Pe==="Polygon",Ve===0);else if(Pe==="MultiPolygon")for(let Ve=0;Ve<be.length;Ve++){const Ue=be[Ve];for(let Je=0;Je<Ue.length;Je++)Mi(Ie,Ue[Je],Re,ne,!0,Je===0)}if(Ie.length){let Ve=re.tags||null;if(Pe==="LineString"&&le.lineMetrics){Ve={};for(const Je in re.tags)Ve[Je]=re.tags[Je];Ve.mapbox_clip_start=be.start/be.size,Ve.mapbox_clip_end=be.end/be.size}const Ue={geometry:Ie,type:Pe==="Polygon"||Pe==="MultiPolygon"?3:Pe==="LineString"||Pe==="MultiLineString"?2:1,tags:Ve};re.id!==null&&(Ue.id=re.id),Re.features.push(Ue)}}function Mi(Re,re,ne,le,be,Pe){const Ie=le*le;if(le>0&&re.size<(be?Ie:le))return void(ne.numPoints+=re.length/3);const Ve=[];for(let Ue=0;Ue<re.length;Ue+=3)(le===0||re[Ue+2]>Ie)&&(ne.numSimplified++,Ve.push(re[Ue],re[Ue+1])),ne.numPoints++;be&&(function(Ue,Je){let yt=0;for(let it=0,kt=Ue.length,Oe=kt-2;it<kt;Oe=it,it+=2)yt+=(Ue[it]-Ue[Oe])*(Ue[it+1]+Ue[Oe+1]);if(yt>0===Je)for(let it=0,kt=Ue.length;it<kt/2;it+=2){const Oe=Ue[it],ir=Ue[it+1];Ue[it]=Ue[kt-2-it],Ue[it+1]=Ue[kt-1-it],Ue[kt-2-it]=Oe,Ue[kt-1-it]=ir}})(Ve,Pe),Re.push(Ve)}const Do={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class no{constructor(re,ne){const le=(ne=this.options=(function(Pe,Ie){for(const Ve in Ie)Pe[Ve]=Ie[Ve];return Pe})(Object.create(Do),ne)).debug;if(le&&console.time("preprocess data"),ne.maxZoom<0||ne.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ne.promoteId&&ne.generateId)throw new Error("promoteId and generateId cannot be used together.");let be=(function(Pe,Ie){const Ve=[];if(Pe.type==="FeatureCollection")for(let Ue=0;Ue<Pe.features.length;Ue++)gt(Ve,Pe.features[Ue],Ie,Ue);else gt(Ve,Pe.type==="Feature"?Pe:{geometry:Pe},Ie);return Ve})(re,ne);this.tiles={},this.tileCoords=[],le&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ne.indexMaxZoom,ne.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),be=(function(Pe,Ie){const Ve=Ie.buffer/Ie.extent;let Ue=Pe;const Je=wt(Pe,1,-1-Ve,Ve,0,-1,2,Ie),yt=wt(Pe,1,1-Ve,2+Ve,0,-1,2,Ie);return(Je||yt)&&(Ue=wt(Pe,1,-Ve,1+Ve,0,-1,2,Ie)||[],Je&&(Ue=Lr(Je,1).concat(Ue)),yt&&(Ue=Ue.concat(Lr(yt,-1)))),Ue})(be,ne),be.length&&this.splitTile(be,0,0,0),le&&(be.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(re,ne,le,be,Pe,Ie,Ve){const Ue=[re,ne,le,be],Je=this.options,yt=Je.debug;for(;Ue.length;){be=Ue.pop(),le=Ue.pop(),ne=Ue.pop(),re=Ue.pop();const it=1<<ne,kt=fi(ne,le,be);let Oe=this.tiles[kt];if(!Oe&&(yt>1&&console.time("creation"),Oe=this.tiles[kt]=ba(re,ne,le,be,Je),this.tileCoords.push({z:ne,x:le,y:be}),yt)){yt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ne,le,be,Oe.numFeatures,Oe.numPoints,Oe.numSimplified),console.timeEnd("creation"));const pn=`z${ne}`;this.stats[pn]=(this.stats[pn]||0)+1,this.total++}if(Oe.source=re,Pe==null){if(ne===Je.indexMaxZoom||Oe.numPoints<=Je.indexMaxPoints)continue}else{if(ne===Je.maxZoom||ne===Pe)continue;if(Pe!=null){const pn=Pe-ne;if(le!==Ie>>pn||be!==Ve>>pn)continue}}if(Oe.source=null,re.length===0)continue;yt>1&&console.time("clipping");const ir=.5*Je.buffer/Je.extent,br=.5-ir,qt=.5+ir,or=1+ir;let Br=null,Xn=null,ra=null,Qr=null,tr=wt(re,it,le-ir,le+qt,0,Oe.minX,Oe.maxX,Je),sr=wt(re,it,le+br,le+or,0,Oe.minX,Oe.maxX,Je);re=null,tr&&(Br=wt(tr,it,be-ir,be+qt,1,Oe.minY,Oe.maxY,Je),Xn=wt(tr,it,be+br,be+or,1,Oe.minY,Oe.maxY,Je),tr=null),sr&&(ra=wt(sr,it,be-ir,be+qt,1,Oe.minY,Oe.maxY,Je),Qr=wt(sr,it,be+br,be+or,1,Oe.minY,Oe.maxY,Je),sr=null),yt>1&&console.timeEnd("clipping"),Ue.push(Br||[],ne+1,2*le,2*be),Ue.push(Xn||[],ne+1,2*le,2*be+1),Ue.push(ra||[],ne+1,2*le+1,2*be),Ue.push(Qr||[],ne+1,2*le+1,2*be+1)}}getTile(re,ne,le){re=+re,ne=+ne,le=+le;const be=this.options,{extent:Pe,debug:Ie}=be;if(re<0||re>24)return null;const Ve=1<<re,Ue=fi(re,ne=ne+Ve&Ve-1,le);if(this.tiles[Ue])return Qn(this.tiles[Ue],Pe);Ie>1&&console.log("drilling down to z%d-%d-%d",re,ne,le);let Je,yt=re,it=ne,kt=le;for(;!Je&&yt>0;)yt--,it>>=1,kt>>=1,Je=this.tiles[fi(yt,it,kt)];return Je&&Je.source?(Ie>1&&(console.log("found parent tile z%d-%d-%d",yt,it,kt),console.time("drilling down")),this.splitTile(Je.source,yt,it,kt,re,ne,le),Ie>1&&console.timeEnd("drilling down"),this.tiles[Ue]?Qn(this.tiles[Ue],Pe):null):null}}function fi(Re,re,ne){return 32*((1<<Re)*ne+re)+Re}class An extends U{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(re,ne){return g._(this,void 0,void 0,(function*(){const le=re.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const be=this._geoJSONIndex.getTile(le.z,le.x,le.y);if(!be)return null;const Pe=new ee(be.features,{version:2,extent:g.$});let Ie=(function(Ve){const Ue=new g.cM;return(function(Je,yt){for(const it in Je.layers)yt.writeMessage(3,ae,Je.layers[it])})(Ve,Ue),Ue.finish()})(Pe);return Ie.byteOffset===0&&Ie.byteLength===Ie.buffer.byteLength||(Ie=new Uint8Array(Ie)),{vectorTile:Pe,rawData:Ie.buffer}}))}loadData(re){return g._(this,void 0,void 0,(function*(){var ne;(ne=this._pendingRequest)===null||ne===void 0||ne.abort();const le=!!(re&&re.request&&re.request.collectResourceTiming)&&new g.cN(re.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(re,this._pendingRequest);const be=yield this._pendingData;this._geoJSONIndex=re.cluster?new rt((function({superclusterOptions:Ie,clusterProperties:Ve}){if(!Ve||!Ie)return Ie;const Ue={},Je={},yt={accumulated:null,zoom:0},it={properties:null},kt=Object.keys(Ve);for(const Oe of kt){const[ir,br]=Ve[Oe],qt=g.cT(br),or=g.cT(typeof ir=="string"?[ir,["accumulated"],["get",Oe]]:ir);Ue[Oe]=qt.value,Je[Oe]=or.value}return Ie.map=Oe=>{it.properties=Oe;const ir={};for(const br of kt)ir[br]=Ue[br].evaluate(yt,it);return ir},Ie.reduce=(Oe,ir)=>{it.properties=ir;for(const br of kt)yt.accumulated=Oe[br],Oe[br]=Je[br].evaluate(yt,it)},Ie})(re)).load(be.features):(function(Ie,Ve){return new no(Ie,Ve)})(be,re.geojsonVtOptions),this.loaded={};const Pe={data:be};if(le){const Ie=le.finish();Ie&&(Pe.resourceTiming={},Pe.resourceTiming[re.source]=JSON.parse(JSON.stringify(Ie)))}return Pe}catch(be){if(delete this._pendingRequest,g.cy(be))return{abandoned:!0};throw be}}))}getData(){return g._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(re){const ne=this.loaded;return ne&&ne[re.uid]?super.reloadTile(re):this.loadTile(re)}loadAndProcessGeoJSON(re,ne){return g._(this,void 0,void 0,(function*(){let le=yield this.loadGeoJSON(re,ne);if(delete this._pendingRequest,typeof le!="object")throw new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`);if(G(le,!0),re.filter){const be=g.cT(re.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(be.result==="error")throw new Error(be.value.map((Ie=>`${Ie.key}: ${Ie.message}`)).join(", "));le={type:"FeatureCollection",features:le.features.filter((Ie=>be.value.evaluate({zoom:0},Ie)))}}return le}))}loadGeoJSON(re,ne){return g._(this,void 0,void 0,(function*(){const{promoteId:le}=re;if(re.request){const be=yield g.j(re.request,ne);return this._dataUpdateable=g.cV(be.data,le)?g.cU(be.data,le):void 0,be.data}if(typeof re.data=="string")try{const be=JSON.parse(re.data);return this._dataUpdateable=g.cV(be,le)?g.cU(be,le):void 0,be}catch{throw new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`)}if(!re.dataDiff)throw new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${re.source}`);return g.cW(this._dataUpdateable,re.dataDiff,le),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(re){return g._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(re){return this._geoJSONIndex.getClusterExpansionZoom(re.clusterId)}getClusterChildren(re){return this._geoJSONIndex.getChildren(re.clusterId)}getClusterLeaves(re){return this._geoJSONIndex.getLeaves(re.clusterId,re.limit,re.offset)}}class Ga{constructor(re){this.self=re,this.actor=new g.J(re),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(ne,le)=>{if(this.externalWorkerSourceTypes[ne])throw new Error(`Worker source with name "${ne}" already registered.`);this.externalWorkerSourceTypes[ne]=le},this.self.addProtocol=g.cA,this.self.removeProtocol=g.cB,this.self.registerRTLTextPlugin=ne=>{g.cX.setMethods(ne)},this.actor.registerMessageHandler("LDT",((ne,le)=>this._getDEMWorkerSource(ne,le.source).loadTile(le))),this.actor.registerMessageHandler("RDT",((ne,le)=>g._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(ne,le.source).removeTile(le)})))),this.actor.registerMessageHandler("GCEZ",((ne,le)=>g._(this,void 0,void 0,(function*(){return this._getWorkerSource(ne,le.type,le.source).getClusterExpansionZoom(le)})))),this.actor.registerMessageHandler("GCC",((ne,le)=>g._(this,void 0,void 0,(function*(){return this._getWorkerSource(ne,le.type,le.source).getClusterChildren(le)})))),this.actor.registerMessageHandler("GCL",((ne,le)=>g._(this,void 0,void 0,(function*(){return this._getWorkerSource(ne,le.type,le.source).getClusterLeaves(le)})))),this.actor.registerMessageHandler("LD",((ne,le)=>this._getWorkerSource(ne,le.type,le.source).loadData(le))),this.actor.registerMessageHandler("GD",((ne,le)=>this._getWorkerSource(ne,le.type,le.source).getData())),this.actor.registerMessageHandler("LT",((ne,le)=>this._getWorkerSource(ne,le.type,le.source).loadTile(le))),this.actor.registerMessageHandler("RT",((ne,le)=>this._getWorkerSource(ne,le.type,le.source).reloadTile(le))),this.actor.registerMessageHandler("AT",((ne,le)=>this._getWorkerSource(ne,le.type,le.source).abortTile(le))),this.actor.registerMessageHandler("RMT",((ne,le)=>this._getWorkerSource(ne,le.type,le.source).removeTile(le))),this.actor.registerMessageHandler("RS",((ne,le)=>g._(this,void 0,void 0,(function*(){if(!this.workerSources[ne]||!this.workerSources[ne][le.type]||!this.workerSources[ne][le.type][le.source])return;const be=this.workerSources[ne][le.type][le.source];delete this.workerSources[ne][le.type][le.source],be.removeSource!==void 0&&be.removeSource(le)})))),this.actor.registerMessageHandler("RM",(ne=>g._(this,void 0,void 0,(function*(){delete this.layerIndexes[ne],delete this.availableImages[ne],delete this.workerSources[ne],delete this.demWorkerSources[ne],this.globalStates.delete(ne)})))),this.actor.registerMessageHandler("SR",((ne,le)=>g._(this,void 0,void 0,(function*(){this.referrer=le})))),this.actor.registerMessageHandler("SRPS",((ne,le)=>this._syncRTLPluginState(ne,le))),this.actor.registerMessageHandler("IS",((ne,le)=>g._(this,void 0,void 0,(function*(){this.self.importScripts(le)})))),this.actor.registerMessageHandler("SI",((ne,le)=>this._setImages(ne,le))),this.actor.registerMessageHandler("UL",((ne,le)=>g._(this,void 0,void 0,(function*(){this._getLayerIndex(ne).update(le.layers,le.removedIds,this._getGlobalState(ne))})))),this.actor.registerMessageHandler("UGS",((ne,le)=>g._(this,void 0,void 0,(function*(){const be=this._getGlobalState(ne);for(const Pe in le)be[Pe]=le[Pe]})))),this.actor.registerMessageHandler("SL",((ne,le)=>g._(this,void 0,void 0,(function*(){this._getLayerIndex(ne).replace(le,this._getGlobalState(ne))}))))}_getGlobalState(re){let ne=this.globalStates.get(re);return ne||(ne={},this.globalStates.set(re,ne)),ne}_setImages(re,ne){return g._(this,void 0,void 0,(function*(){this.availableImages[re]=ne;for(const le in this.workerSources[re]){const be=this.workerSources[re][le];for(const Pe in be)be[Pe].availableImages=ne}}))}_syncRTLPluginState(re,ne){return g._(this,void 0,void 0,(function*(){return yield g.cX.syncState(ne,this.self.importScripts)}))}_getAvailableImages(re){let ne=this.availableImages[re];return ne||(ne=[]),ne}_getLayerIndex(re){let ne=this.layerIndexes[re];return ne||(ne=this.layerIndexes[re]=new c),ne}_getWorkerSource(re,ne,le){if(this.workerSources[re]||(this.workerSources[re]={}),this.workerSources[re][ne]||(this.workerSources[re][ne]={}),!this.workerSources[re][ne][le]){const be={sendAsync:(Pe,Ie)=>(Pe.targetMapId=re,this.actor.sendAsync(Pe,Ie))};switch(ne){case"vector":this.workerSources[re][ne][le]=new U(be,this._getLayerIndex(re),this._getAvailableImages(re));break;case"geojson":this.workerSources[re][ne][le]=new An(be,this._getLayerIndex(re),this._getAvailableImages(re));break;default:this.workerSources[re][ne][le]=new this.externalWorkerSourceTypes[ne](be,this._getLayerIndex(re),this._getAvailableImages(re))}}return this.workerSources[re][ne][le]}_getDEMWorkerSource(re,ne){return this.demWorkerSources[re]||(this.demWorkerSources[re]={}),this.demWorkerSources[re][ne]||(this.demWorkerSources[re][ne]=new z),this.demWorkerSources[re][ne]}}return g.i(self)&&(self.worker=new Ga(self)),Ga})),p("index",["exports","./shared"],(function(g,c){var C="5.7.3";function M(){var b=new c.A(4);return c.A!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b}let T,U;const z={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(b,t,u){const d=requestAnimationFrame((w=>{_(),t(w)})),{unsubscribe:_}=c.s(b.signal,"abort",(()=>{_(),cancelAnimationFrame(d),u(c.c())}),!1)},frameAsync(b){return new Promise(((t,u)=>{this.frame(b,t,u)}))},getImageData(b,t=0){return this.getImageCanvasContext(b).getImageData(-t,-t,b.width+2*t,b.height+2*t)},getImageCanvasContext(b){const t=window.document.createElement("canvas"),u=t.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return t.width=b.width,t.height=b.height,u.drawImage(b,0,0,b.width,b.height),u},resolveURL:b=>(T||(T=document.createElement("a")),T.href=b,T.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(U==null&&(U=matchMedia("(prefers-reduced-motion: reduce)")),U.matches)}};class F{static testProp(t){if(!F.docStyle)return t[0];for(let u=0;u<t.length;u++)if(t[u]in F.docStyle)return t[u];return t[0]}static create(t,u,d){const _=window.document.createElement(t);return u!==void 0&&(_.className=u),d&&d.appendChild(_),_}static createNS(t,u){return window.document.createElementNS(t,u)}static disableDrag(){F.docStyle&&F.selectProp&&(F.userSelect=F.docStyle[F.selectProp],F.docStyle[F.selectProp]="none")}static enableDrag(){F.docStyle&&F.selectProp&&(F.docStyle[F.selectProp]=F.userSelect)}static setTransform(t,u){t.style[F.transformProp]=u}static addEventListener(t,u,d,_={}){t.addEventListener(u,d,"passive"in _?_:_.capture)}static removeEventListener(t,u,d,_={}){t.removeEventListener(u,d,"passive"in _?_:_.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",F.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",F.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",F.suppressClickInternal,!0)}),0)}static getScale(t){const u=t.getBoundingClientRect();return{x:u.width/t.offsetWidth||1,y:u.height/t.offsetHeight||1,boundingClientRect:u}}static getPoint(t,u,d){const _=u.boundingClientRect;return new c.P((d.clientX-_.left)/u.x-t.clientLeft,(d.clientY-_.top)/u.y-t.clientTop)}static mousePos(t,u){const d=F.getScale(t);return F.getPoint(t,d,u)}static touchPos(t,u){const d=[],_=F.getScale(t);for(let w=0;w<u.length;w++)d.push(F.getPoint(t,_,u[w]));return d}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}static sanitize(t){const u=new DOMParser().parseFromString(t,"text/html").body||document.createElement("body"),d=u.querySelectorAll("script");for(const _ of d)_.remove();return F.clean(u),u.innerHTML}static isPossiblyDangerous(t,u){const d=u.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(t)||!d.includes("javascript:")&&!d.includes("data:"))||!!t.startsWith("on")||void 0}static clean(t){const u=t.children;for(const d of u)F.removeAttributes(d),F.clean(d)}static removeAttributes(t){for(const{name:u,value:d}of t.attributes)F.isPossiblyDangerous(u,d)&&t.removeAttribute(u)}}F.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,F.selectProp=F.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),F.transformProp=F.testProp(["transform","WebkitTransform"]);const V={supported:!1,testSupport:function(b){!Q&&G&&(ee?ae(b):$=b)}};let $,G,Q=!1,ee=!1;function ae(b){const t=b.createTexture();b.bindTexture(b.TEXTURE_2D,t);try{if(b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,G),b.isContextLost())return;V.supported=!0}catch{}b.deleteTexture(t),Q=!0}var _e;typeof document<"u"&&(G=document.createElement("img"),G.onload=()=>{$&&ae($),$=null,ee=!0},G.onerror=()=>{Q=!0,$=null},G.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(b){let t,u,d,_;b.resetRequestQueue=()=>{t=[],u=0,d=0,_={}},b.addThrottleControl=k=>{const N=d++;return _[N]=k,N},b.removeThrottleControl=k=>{delete _[k],A()},b.getImage=(k,N,B=!0)=>new Promise(((W,H)=>{V.supported&&(k.headers||(k.headers={}),k.headers.accept="image/webp,*/*"),c.e(k,{type:"image"}),t.push({abortController:N,requestParameters:k,supportImageRefresh:B,state:"queued",onError:K=>{H(K)},onSuccess:K=>{W(K)}}),A()}));const w=k=>c._(this,void 0,void 0,(function*(){k.state="running";const{requestParameters:N,supportImageRefresh:B,onError:W,onSuccess:H,abortController:K}=k,ie=B===!1&&!c.i(self)&&!c.g(N.url)&&(!N.headers||Object.keys(N.headers).reduce(((fe,me)=>fe&&me==="accept"),!0));u++;const ce=ie?I(N,K):c.m(N,K);try{const fe=yield ce;delete k.abortController,k.state="completed",fe.data instanceof HTMLImageElement||c.b(fe.data)?H(fe):fe.data&&H({data:yield(he=fe.data,typeof createImageBitmap=="function"?c.f(he):c.h(he)),cacheControl:fe.cacheControl,expires:fe.expires})}catch(fe){delete k.abortController,W(fe)}finally{u--,A()}var he})),A=()=>{const k=(()=>{for(const N of Object.keys(_))if(_[N]())return!0;return!1})()?c.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let N=u;N<k&&t.length>0;N++){const B=t.shift();B.abortController.signal.aborted?N--:w(B)}},I=(k,N)=>new Promise(((B,W)=>{const H=new Image,K=k.url,ie=k.credentials;ie&&ie==="include"?H.crossOrigin="use-credentials":(ie&&ie==="same-origin"||!c.d(K))&&(H.crossOrigin="anonymous"),N.signal.addEventListener("abort",(()=>{H.src="",W(c.c())})),H.fetchPriority="high",H.onload=()=>{H.onerror=H.onload=null,B({data:H})},H.onerror=()=>{H.onerror=H.onload=null,N.signal.aborted||W(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},H.src=K}))})(_e||(_e={})),_e.resetRequestQueue();class ve{constructor(t){this._transformRequestFn=t??null}transformRequest(t,u){return this._transformRequestFn&&this._transformRequestFn(t,u)||{url:t}}setTransformRequest(t){this._transformRequestFn=t}}function Ae(b){const t=[];if(typeof b=="string")t.push({id:"default",url:b});else if(b&&b.length>0){const u=[];for(const{id:d,url:_}of b){const w=`${d}${_}`;u.indexOf(w)===-1&&(u.push(w),t.push({id:d,url:_}))}}return t}function Ee(b,t,u){try{const d=new URL(b);return d.pathname+=`${t}${u}`,d.toString()}catch{throw new Error(`Invalid sprite URL "${b}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function Fe(b){const{userImage:t}=b;return!!(t&&t.render&&t.render())&&(b.data.replace(new Uint8Array(t.data.buffer)),!0)}class ht extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:u,promiseResolve:d}of this.requestors)d(this._getImagesForIds(u));this.requestors=[]}}getImage(t){const u=this.images[t];if(u&&!u.data&&u.spriteData){const d=u.spriteData;u.data=new c.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),u.spriteData=null}return u}addImage(t,u){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,u)&&(this.images[t]=u)}_validate(t,u){let d=!0;const _=u.data||u.spriteData;return this._validateStretch(u.stretchX,_&&_.width)||(this.fire(new c.k(new Error(`Image "${t}" has invalid "stretchX" value`))),d=!1),this._validateStretch(u.stretchY,_&&_.height)||(this.fire(new c.k(new Error(`Image "${t}" has invalid "stretchY" value`))),d=!1),this._validateContent(u.content,u)||(this.fire(new c.k(new Error(`Image "${t}" has invalid "content" value`))),d=!1),d}_validateStretch(t,u){if(!t)return!0;let d=0;for(const _ of t){if(_[0]<d||_[1]<_[0]||u<_[1])return!1;d=_[1]}return!0}_validateContent(t,u){if(!t)return!0;if(t.length!==4)return!1;const d=u.spriteData,_=d&&d.width||u.data.width,w=d&&d.height||u.data.height;return!(t[0]<0||_<t[0]||t[1]<0||w<t[1]||t[2]<0||_<t[2]||t[3]<0||w<t[3]||t[2]<t[0]||t[3]<t[1])}updateImage(t,u,d=!0){const _=this.getImage(t);if(d&&(_.data.width!==u.data.width||_.data.height!==u.data.height))throw new Error(`size mismatch between old image (${_.data.width}x${_.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=_.version+1,this.images[t]=u,this.updatedImages[t]=!0}removeImage(t){const u=this.images[t];delete this.images[t],delete this.patterns[t],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t){return new Promise(((u,d)=>{let _=!0;if(!this.isLoaded())for(const w of t)this.images[w]||(_=!1);this.isLoaded()||_?u(this._getImagesForIds(t)):this.requestors.push({ids:t,promiseResolve:u})}))}_getImagesForIds(t){const u={};for(const d of t){let _=this.getImage(d);_||(this.fire(new c.l("styleimagemissing",{id:d})),_=this.getImage(d)),_?u[d]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,textFitWidth:_.textFitWidth,textFitHeight:_.textFitHeight,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:c.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return u}getPixelSize(){const{width:t,height:u}=this.atlasImage;return{width:t,height:u}}getPattern(t){const u=this.patterns[t],d=this.getImage(t);if(!d)return null;if(u&&u.position.version===d.version)return u.position;if(u)u.position.version=d.version;else{const _={w:d.data.width+2,h:d.data.height+2,x:0,y:0},w=new c.I(_,d);this.patterns[t]={bin:_,position:w}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const u=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new c.T(t,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const w in this.patterns)t.push(this.patterns[w].bin);const{w:u,h:d}=c.p(t),_=this.atlasImage;_.resize({width:u||1,height:d||1});for(const w in this.patterns){const{bin:A}=this.patterns[w],I=A.x+1,k=A.y+1,N=this.getImage(w).data,B=N.width,W=N.height;c.R.copy(N,_,{x:0,y:0},{x:I,y:k},{width:B,height:W}),c.R.copy(N,_,{x:0,y:W-1},{x:I,y:k-1},{width:B,height:1}),c.R.copy(N,_,{x:0,y:0},{x:I,y:k+W},{width:B,height:1}),c.R.copy(N,_,{x:B-1,y:0},{x:I-1,y:k},{width:1,height:W}),c.R.copy(N,_,{x:0,y:0},{x:I+B,y:k},{width:1,height:W})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const u of t){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const d=this.getImage(u);d||c.w(`Image with ID: "${u}" was not found`),Fe(d)&&this.updateImage(u,d)}}}const At=1e20;function ot(b,t,u,d,_,w,A,I,k){for(let N=t;N<t+d;N++)ft(b,u*w+N,w,_,A,I,k);for(let N=u;N<u+_;N++)ft(b,N*w+t,1,d,A,I,k)}function ft(b,t,u,d,_,w,A){w[0]=0,A[0]=-At,A[1]=At,_[0]=b[t];for(let I=1,k=0,N=0;I<d;I++){_[I]=b[t+I*u];const B=I*I;do{const W=w[k];N=(_[I]-_[W]+B-W*W)/(I-W)/2}while(N<=A[k]&&--k>-1);k++,w[k]=I,A[k]=N,A[k+1]=At}for(let I=0,k=0;I<d;I++){for(;A[k+1]<I;)k++;const N=w[k],B=I-N;b[t+I*u]=_[N]+B*B}}class rt{constructor(t,u,d){this.requestManager=t,this.localIdeographFontFamily=u,this.entries={},this.lang=d}setURL(t){this.url=t}getGlyphs(t){return c._(this,void 0,void 0,(function*(){const u=[];for(const w in t)for(const A of t[w])u.push(this._getAndCacheGlyphsPromise(w,A));const d=yield Promise.all(u),_={};for(const{stack:w,id:A,glyph:I}of d)_[w]||(_[w]={}),_[w][A]=I&&{id:I.id,bitmap:I.bitmap.clone(),metrics:I.metrics};return _}))}_getAndCacheGlyphsPromise(t,u){return c._(this,void 0,void 0,(function*(){let d=this.entries[t];d||(d=this.entries[t]={glyphs:{},requests:{},ranges:{}});let _=d.glyphs[u];if(_!==void 0)return{stack:t,id:u,glyph:_};if(_=this._tinySDF(d,t,u),_)return d.glyphs[u]=_,{stack:t,id:u,glyph:_};const w=Math.floor(u/256);if(256*w>65535)throw new Error("glyphs > 65535 not supported");if(d.ranges[w])return{stack:t,id:u,glyph:_};if(!this.url)throw new Error("glyphsUrl is not set");if(!d.requests[w]){const I=rt.loadGlyphRange(t,w,this.url,this.requestManager);d.requests[w]=I}const A=yield d.requests[w];for(const I in A)this._doesCharSupportLocalGlyph(+I)||(d.glyphs[+I]=A[+I]);return d.ranges[w]=!0,{stack:t,id:u,glyph:A[u]||null}}))}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(t))||c.u["CJK Unified Ideographs"](t)||c.u["Hangul Syllables"](t)||c.u.Hiragana(t)||c.u.Katakana(t)||c.u["CJK Symbols and Punctuation"](t)||c.u["Halfwidth and Fullwidth Forms"](t))}_tinySDF(t,u,d){const _=this.localIdeographFontFamily;if(!_||!this._doesCharSupportLocalGlyph(d))return;let w=t.tinySDF;if(!w){let I="400";/bold/i.test(u)?I="900":/medium/i.test(u)?I="500":/light/i.test(u)&&(I="200"),w=t.tinySDF=new rt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:_,fontWeight:I})}const A=w.draw(String.fromCharCode(d));return{id:d,bitmap:new c.q({width:A.width||60,height:A.height||60},A.data),metrics:{width:A.glyphWidth/2||24,height:A.glyphHeight/2||24,left:A.glyphLeft/2+.5||0,top:A.glyphTop/2-27.5||-8,advance:A.glyphAdvance/2||24,isDoubleResolution:!0}}}}rt.loadGlyphRange=function(b,t,u,d){return c._(this,void 0,void 0,(function*(){const _=256*t,w=_+255,A=d.transformRequest(u.replace("{fontstack}",b).replace("{range}",`${_}-${w}`),"Glyphs"),I=yield c.n(A,new AbortController);if(!I||!I.data)throw new Error(`Could not load glyph range. range: ${t}, ${_}-${w}`);const k={};for(const N of c.o(I.data))k[N.id]=N;return k}))},rt.TinySDF=class{constructor({fontSize:b=24,buffer:t=3,radius:u=8,cutoff:d=.25,fontFamily:_="sans-serif",fontWeight:w="normal",fontStyle:A="normal",lang:I=null}={}){this.buffer=t,this.cutoff=d,this.radius=u,this.lang=I;const k=this.size=b+4*t,N=this._createCanvas(k),B=this.ctx=N.getContext("2d",{willReadFrequently:!0});B.font=`${A} ${w} ${b}px ${_}`,B.textBaseline="alphabetic",B.textAlign="left",B.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Uint16Array(k)}_createCanvas(b){const t=document.createElement("canvas");return t.width=t.height=b,t}draw(b){const{width:t,actualBoundingBoxAscent:u,actualBoundingBoxDescent:d,actualBoundingBoxLeft:_,actualBoundingBoxRight:w}=this.ctx.measureText(b),A=Math.ceil(u),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(w-_))),k=Math.min(this.size-this.buffer,A+Math.ceil(d)),N=I+2*this.buffer,B=k+2*this.buffer,W=Math.max(N*B,0),H=new Uint8ClampedArray(W),K={data:H,width:N,height:B,glyphWidth:I,glyphHeight:k,glyphTop:A,glyphLeft:0,glyphAdvance:t};if(I===0||k===0)return K;const{ctx:ie,buffer:ce,gridInner:he,gridOuter:fe}=this;this.lang&&(ie.lang=this.lang),ie.clearRect(ce,ce,I,k),ie.fillText(b,ce,ce+A);const me=ie.getImageData(ce,ce,I,k);fe.fill(At,0,W),he.fill(0,0,W);for(let xe=0;xe<k;xe++)for(let ye=0;ye<I;ye++){const we=me.data[4*(xe*I+ye)+3]/255;if(we===0)continue;const Te=(xe+ce)*N+ye+ce;if(we===1)fe[Te]=0,he[Te]=At;else{const ge=.5-we;fe[Te]=ge>0?ge*ge:0,he[Te]=ge<0?ge*ge:0}}ot(fe,0,0,N,B,N,this.f,this.v,this.z),ot(he,ce,ce,I,k,N,this.f,this.v,this.z);for(let xe=0;xe<W;xe++){const ye=Math.sqrt(fe[xe])-Math.sqrt(he[xe]);H[xe]=Math.round(255-255*(ye/this.radius+this.cutoff))}return K}};class It{constructor(){this.specification=c.v.light.position}possiblyEvaluate(t,u){return c.B(t.expression.evaluate(u))}interpolate(t,u,d){return{x:c.C.number(t.x,u.x,d),y:c.C.number(t.y,u.y,d),z:c.C.number(t.z,u.z,d)}}}let Ut;class Be extends c.E{constructor(t){super(),Ut=Ut||new c.r({anchor:new c.D(c.v.light.anchor),position:new It,color:new c.D(c.v.light.color),intensity:new c.D(c.v.light.intensity)}),this._transitionable=new c.t(Ut,void 0),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,u={}){if(!this._validate(c.x,t,u))for(const d in t){const _=t[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),_):this._transitionable.setValue(d,_)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,u,d){return(!d||d.validate!==!1)&&c.y(this,t.call(c.z,{value:u,style:{glyphs:!0,sprite:!0},styleSpec:c.v}))}}const ct=new c.r({"sky-color":new c.D(c.v.sky["sky-color"]),"horizon-color":new c.D(c.v.sky["horizon-color"]),"fog-color":new c.D(c.v.sky["fog-color"]),"fog-ground-blend":new c.D(c.v.sky["fog-ground-blend"]),"horizon-fog-blend":new c.D(c.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new c.D(c.v.sky["sky-horizon-blend"]),"atmosphere-blend":new c.D(c.v.sky["atmosphere-blend"])});class nt extends c.E{constructor(t){super(),this._transitionable=new c.t(ct,void 0),this.setSky(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.F(0))}setSky(t,u={}){if(!this._validate(c.G,t,u)){t||(t={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const d in t){const _=t[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),_):this._transitionable.setValue(d,_)}}}getSky(){return this._transitionable.serialize()}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,u,d={}){return d?.validate!==!1&&c.y(this,t.call(c.z,c.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:c.v})))}calculateFogBlendOpacity(t){return t<60?0:t<70?(t-60)/10:1}}class Ct{constructor(t,u){this.width=t,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,u){const d=t.join(",")+String(u);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(t,u)),this.dashEntry[d]}getDashRanges(t,u,d){const _=[];let w=t.length%2==1?-t[t.length-1]*d:0,A=t[0]*d,I=!0;_.push({left:w,right:A,isDash:I,zeroLength:t[0]===0});let k=t[0];for(let N=1;N<t.length;N++){I=!I;const B=t[N];w=k*d,k+=B,A=k*d,_.push({left:w,right:A,isDash:I,zeroLength:B===0})}return _}addRoundDash(t,u,d){const _=u/2;for(let w=-d;w<=d;w++){const A=this.width*(this.nextRow+d+w);let I=0,k=t[I];for(let N=0;N<this.width;N++){N/k.right>1&&(k=t[++I]);const B=Math.abs(N-k.left),W=Math.abs(N-k.right),H=Math.min(B,W);let K;const ie=w/d*(_+1);if(k.isDash){const ce=_-Math.abs(ie);K=Math.sqrt(H*H+ce*ce)}else K=_-Math.sqrt(H*H+ie*ie);this.data[A+N]=Math.max(0,Math.min(255,K+128))}}}addRegularDash(t){for(let I=t.length-1;I>=0;--I){const k=t[I],N=t[I+1];k.zeroLength?t.splice(I,1):N&&N.isDash===k.isDash&&(N.left=k.left,t.splice(I,1))}const u=t[0],d=t[t.length-1];u.isDash===d.isDash&&(u.left=d.left-this.width,d.right=u.right+this.width);const _=this.width*this.nextRow;let w=0,A=t[w];for(let I=0;I<this.width;I++){I/A.right>1&&(A=t[++w]);const k=Math.abs(I-A.left),N=Math.abs(I-A.right),B=Math.min(k,N);this.data[_+I]=Math.max(0,Math.min(255,(A.isDash?B:-B)+128))}}addDash(t,u){const d=u?7:0,_=2*d+1;if(this.nextRow+_>this.height)return c.w("LineAtlas out of space"),null;let w=0;for(let I=0;I<t.length;I++)w+=t[I];if(w!==0){const I=this.width/w,k=this.getDashRanges(t,this.width,I);u?this.addRoundDash(k,I,d):this.addRegularDash(k)}const A={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:w};return this.nextRow+=_,this.dirty=!0,A}bind(t){const u=t.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}const Me="maplibre_preloaded_worker_pool";class et{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<et.workerCount;)this.workers.push(new Worker(c.a.WORKER_URL));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.numActive()===0&&(this.workers.forEach((u=>{u.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Me]}numActive(){return Object.keys(this.active).length}}const st=Math.floor(z.hardwareConcurrency/2);let gt,Et;function Zt(){return gt||(gt=new et),gt}et.workerCount=c.H(globalThis)?Math.max(Math.min(st,3),1):1;class jt{constructor(t,u){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=u;const d=this.workerPool.acquire(u);for(let _=0;_<d.length;_++){const w=new c.J(d[_],u);w.name=`Worker ${_}`,this.actors.push(w)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,u){const d=[];for(const _ of this.actors)d.push(_.sendAsync({type:t,data:u}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(t=!0){this.actors.forEach((u=>{u.remove()})),this.actors=[],t&&this.workerPool.release(this.id)}registerMessageHandler(t,u){for(const d of this.actors)d.registerMessageHandler(t,u)}}function ar(){return Et||(Et=new jt(Zt(),c.K),Et.registerMessageHandler("GR",((b,t,u)=>c.m(t,u)))),Et}function Jt(b,t){const u=c.L();return c.M(u,u,[1,1,0]),c.N(u,u,[.5*b.width,.5*b.height,1]),b.calculatePosMatrix?c.O(u,u,b.calculatePosMatrix(t.toUnwrapped())):u}function wt(b,t,u,d,_,w,A){var I;const k=(function(H,K,ie){if(H)for(const ce of H){const he=K[ce];if(he&&he.source===ie&&he.type==="fill-extrusion")return!0}else for(const ce in K){const he=K[ce];if(he.source===ie&&he.type==="fill-extrusion")return!0}return!1})((I=_?.layers)!==null&&I!==void 0?I:null,t,b.id),N=w.maxPitchScaleFactor(),B=b.tilesIn(d,N,k);B.sort(Gt);const W=[];for(const H of B)W.push({wrappedTileID:H.tileID.wrapped().key,queryResults:H.tile.queryRenderedFeatures(t,u,b._state,H.queryGeometry,H.cameraQueryGeometry,H.scale,_,w,N,Jt(b.transform,H.tileID),A?(K,ie)=>A(H.tileID,K,ie):void 0)});return(function(H,K){for(const ie in H)for(const ce of H[ie])zt(ce,K);return H})((function(H){const K={},ie={};for(const ce of H){const he=ce.queryResults,fe=ce.wrappedTileID,me=ie[fe]=ie[fe]||{};for(const xe in he){const ye=he[xe],we=me[xe]=me[xe]||{},Te=K[xe]=K[xe]||[];for(const ge of ye)we[ge.featureIndex]||(we[ge.featureIndex]=!0,Te.push(ge))}}return K})(W),b)}function Gt(b,t){const u=b.tileID,d=t.tileID;return u.overscaledZ-d.overscaledZ||u.canonical.y-d.canonical.y||u.wrap-d.wrap||u.canonical.x-d.canonical.x}function zt(b,t){const u=b.feature,d=t.getFeatureState(u.layer["source-layer"],u.id);u.source=u.layer.source,u.layer["source-layer"]&&(u.sourceLayer=u.layer["source-layer"]),u.state=d}function $e(b,t,u){return c._(this,void 0,void 0,(function*(){let d=b;if(b.url?d=(yield c.j(t.transformRequest(b.url,"Source"),u)).data:yield z.frameAsync(u),!d)return null;const _=c.Q(c.e(d,b),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(_.vectorLayerIds=d.vector_layers.map((w=>w.id))),_}))}class $t{constructor(t,u){t&&(u?this.setSouthWest(t).setNorthEast(u):Array.isArray(t)&&(t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof c.S?new c.S(t.lng,t.lat):c.S.convert(t),this}setSouthWest(t){return this._sw=t instanceof c.S?new c.S(t.lng,t.lat):c.S.convert(t),this}extend(t){const u=this._sw,d=this._ne;let _,w;if(t instanceof c.S)_=t,w=t;else{if(!(t instanceof $t))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend($t.convert(t)):this.extend(c.S.convert(t)):t&&("lng"in t||"lon"in t)&&"lat"in t?this.extend(c.S.convert(t)):this;if(_=t._sw,w=t._ne,!_||!w)return this}return u||d?(u.lng=Math.min(_.lng,u.lng),u.lat=Math.min(_.lat,u.lat),d.lng=Math.max(w.lng,d.lng),d.lat=Math.max(w.lat,d.lat)):(this._sw=new c.S(_.lng,_.lat),this._ne=new c.S(w.lng,w.lat)),this}getCenter(){return new c.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.S(this.getWest(),this.getNorth())}getSouthEast(){return new c.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:u,lat:d}=c.S.convert(t);let _=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&_}static convert(t){return t instanceof $t?t:t&&new $t(t)}static fromLngLat(t,u=0){const d=360*u/40075017,_=d/Math.cos(Math.PI/180*t.lat);return new $t(new c.S(t.lng-_,t.lat-d),new c.S(t.lng+_,t.lat+d))}adjustAntiMeridian(){const t=new c.S(this._sw.lng,this._sw.lat),u=new c.S(this._ne.lng,this._ne.lat);return new $t(t,t.lng>u.lng?new c.S(u.lng+360,u.lat):u)}}class Ot{constructor(t,u,d){this.bounds=$t.convert(this.validateBounds(t)),this.minzoom=u||0,this.maxzoom=d||24}validateBounds(t){return Array.isArray(t)&&t.length===4?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const u=Math.pow(2,t.z),d=Math.floor(c.V(this.bounds.getWest())*u),_=Math.floor(c.U(this.bounds.getNorth())*u),w=Math.ceil(c.V(this.bounds.getEast())*u),A=Math.ceil(c.U(this.bounds.getSouth())*u);return t.x>=d&&t.x<w&&t.y>=_&&t.y<A}}class Sr extends c.E{constructor(t,u,d,_){if(super(),this.id=t,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.Q(u,["url","scheme","tileSize","promoteId"])),this._options=c.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const t=yield $e(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),t&&(c.e(this,t),t.bounds&&(this.tileBounds=new Ot(t.bounds,this.minzoom,this.maxzoom)),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.l("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this._loaded=!0,this.fire(new c.k(t))}}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.abort(),t(),this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return c.e({},this._options)}loadTile(t){return c._(this,void 0,void 0,(function*(){const u=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(u,"Tile"),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};d.request.collectResourceTiming=this._collectResourceTiming;let _="RT";if(t.actor&&t.state!=="expired"){if(t.state==="loading")return new Promise(((w,A)=>{t.reloadPromise={resolve:w,reject:A}}))}else t.actor=this.dispatcher.getActor(),_="LT";t.abortController=new AbortController;try{const w=yield t.actor.sendAsync({type:_,data:d},t.abortController);if(delete t.abortController,t.aborted)return;this._afterTileLoadWorkerResponse(t,w)}catch(w){if(delete t.abortController,t.aborted)return;if(w&&w.status!==404)throw w;this._afterTileLoadWorkerResponse(t,null)}}))}_afterTileLoadWorkerResponse(t,u){if(u&&u.resourceTiming&&(t.resourceTiming=u.resourceTiming),u&&this.map._refreshExpiredTiles&&t.setExpiryData(u),t.loadVectorData(u,this.map.painter),t.reloadPromise){const d=t.reloadPromise;t.reloadPromise=null,this.loadTile(t).then(d.resolve).catch(d.reject)}}abortTile(t){return c._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.actor&&(yield t.actor.sendAsync({type:"AT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}unloadTile(t){return c._(this,void 0,void 0,(function*(){t.unloadVectorData(),t.actor&&(yield t.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Rr extends c.E{constructor(t,u,d,_){super(),this.id=t,this.dispatcher=d,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},u),c.e(this,c.Q(u,["url","scheme","tileSize"]))}load(){return c._(this,arguments,void 0,(function*(t=!1){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield $e(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,u&&(c.e(this,u),u.bounds&&(this.tileBounds=new Ot(u.bounds,this.minzoom,this.maxzoom)),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:t})))}catch(u){this._tileJSONRequest=null,this._loaded=!0,this.fire(new c.k(u))}}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(t){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),t(),this.load(!0)}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}serialize(){return c.e({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t){return c._(this,void 0,void 0,(function*(){const u=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.abortController=new AbortController;try{const d=yield _e.getImage(this.map._requestManager.transformRequest(u,"Tile"),t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&(d.cacheControl||d.expires)&&t.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const _=this.map.painter.context,w=_.gl,A=d.data;t.texture=this.map.painter.getTileTexture(A.width),t.texture?t.texture.update(A,{useMipmap:!0}):(t.texture=new c.T(_,A,w.RGBA,{useMipmap:!0}),t.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST)),t.state="loaded"}}catch(d){if(delete t.abortController,t.aborted)t.state="unloaded";else if(d)throw t.state="errored",d}}))}abortTile(t){return c._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController)}))}unloadTile(t){return c._(this,void 0,void 0,(function*(){t.texture&&this.map.painter.saveTileTexture(t.texture)}))}hasTransition(){return!1}}class Lr extends Rr{constructor(t,u,d,_){super(t,u,d,_),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(t){return c._(this,void 0,void 0,(function*(){const u=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(u,"Tile");t.neighboringTiles=this._getNeighboringTiles(t.tileID),t.abortController=new AbortController;try{const _=yield _e.getImage(d,t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(_&&_.data){const w=_.data;this.map._refreshExpiredTiles&&(_.cacheControl||_.expires)&&t.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const A=c.b(w)&&c.W()?w:yield this.readImageNow(w),I={type:this.type,uid:t.uid,source:this.id,rawImageData:A,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!t.actor||t.state==="expired"){t.actor=this.dispatcher.getActor();const k=yield t.actor.sendAsync({type:"LDT",data:I});t.dem=k,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded"}}}catch(_){if(delete t.abortController,t.aborted)t.state="unloaded";else if(_)throw t.state="errored",_}}))}readImageNow(t){return c._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&c.X()){const u=t.width+2,d=t.height+2;try{return new c.R({width:u,height:d},yield c.Y(t,-1,-1,u,d))}catch{}}return z.getImageData(t,1)}))}_getNeighboringTiles(t){const u=t.canonical,d=Math.pow(2,u.z),_=(u.x-1+d)%d,w=u.x===0?t.wrap-1:t.wrap,A=(u.x+1+d)%d,I=u.x+1===d?t.wrap+1:t.wrap,k={};return k[new c.Z(t.overscaledZ,w,u.z,_,u.y).key]={backfilled:!1},k[new c.Z(t.overscaledZ,I,u.z,A,u.y).key]={backfilled:!1},u.y>0&&(k[new c.Z(t.overscaledZ,w,u.z,_,u.y-1).key]={backfilled:!1},k[new c.Z(t.overscaledZ,t.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},k[new c.Z(t.overscaledZ,I,u.z,A,u.y-1).key]={backfilled:!1}),u.y+1<d&&(k[new c.Z(t.overscaledZ,w,u.z,_,u.y+1).key]={backfilled:!1},k[new c.Z(t.overscaledZ,t.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},k[new c.Z(t.overscaledZ,I,u.z,A,u.y+1).key]={backfilled:!1}),k}unloadTile(t){return c._(this,void 0,void 0,(function*(){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&(yield t.actor.sendAsync({type:"RDT",data:{type:this.type,uid:t.uid,source:this.id}}))}))}}class Nn extends c.E{constructor(t,u,d,_){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:u.data},this.actor=d.getActor(),this.setEventedParent(_),this._data=u.data,this._options=c.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId,u.clusterMaxZoom!==void 0&&this.maxzoom<=u.clusterMaxZoom&&c.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${u.clusterMaxZoom}".`),this.workerOptions=c.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(u.buffer!==void 0?u.buffer:128),tolerance:this._pixelsToTileUnits(u.tolerance!==void 0?u.tolerance:.375),extent:c.$,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(u.clusterMaxZoom),minPoints:Math.max(2,u.clusterMinPoints||2),extent:c.$,radius:this._pixelsToTileUnits(u.clusterRadius||50),log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(t){return t*(c.$/this.tileSize)}_getClusterMaxZoom(t){const u=t?Math.round(t):this.maxzoom-1;return Number.isInteger(t)||t===void 0||c.w(`Integer expected for option 'clusterMaxZoom': provided value "${t}" rounded to "${u}"`),u}load(){return c._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._pendingWorkerUpdate={data:t},this._updateWorkerData(),this}updateData(t){return this._pendingWorkerUpdate.diff=c.a0(this._pendingWorkerUpdate.diff,t),this._updateWorkerData(),this}getData(){return c._(this,void 0,void 0,(function*(){const t=c.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:t})}))}getCoordinatesFromGeometry(t){return t.type==="GeometryCollection"?t.geometries.map((u=>u.coordinates)).flat(1/0):t.coordinates.flat(1/0)}getBounds(){return c._(this,void 0,void 0,(function*(){const t=new $t,u=yield this.getData();let d;switch(u.type){case"FeatureCollection":d=u.features.map((_=>this.getCoordinatesFromGeometry(_.geometry))).flat(1/0);break;case"Feature":d=this.getCoordinatesFromGeometry(u.geometry);break;default:d=this.getCoordinatesFromGeometry(u)}if(d.length==0)return t;for(let _=0;_<d.length-1;_+=2)t.extend([d[_],d[_+1]]);return t}))}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t&&(t.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(t.clusterRadius)),t.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(t.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(t){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:t,source:this.id}})}getClusterChildren(t){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:t,source:this.id}})}getClusterLeaves(t,u,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:t,limit:u,offset:d}})}_updateWorkerData(){return c._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;const{data:t,diff:u}=this._pendingWorkerUpdate;if(!t&&!u)return void c.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const d=c.e({type:this.type},this.workerOptions);t?(typeof t=="string"?(d.request=this.map._requestManager.transformRequest(z.resolveURL(t),"Source"),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(t),this._pendingWorkerUpdate.data=void 0):u&&(d.dataDiff=u,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new c.l("dataloading",{dataType:"source"}));try{const _=yield this.actor.sendAsync({type:"LD",data:d});if(this._isUpdatingWorker=!1,this._removed||_.abandoned)return void this.fire(new c.l("dataabort",{dataType:"source"}));this._data=_.data;let w=null;_.resourceTiming&&_.resourceTiming[this.id]&&(w=_.resourceTiming[this.id].slice(0));const A={dataType:"source"};this._collectResourceTiming&&w&&w.length>0&&c.e(A,{resourceTiming:w}),this.fire(new c.l("data",Object.assign(Object.assign({},A),{sourceDataType:"metadata"}))),this.fire(new c.l("data",Object.assign(Object.assign({},A),{sourceDataType:"content"})))}catch(_){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new c.l("dataabort",{dataType:"source"}));this.fire(new c.k(_))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}}))}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(t){return c._(this,void 0,void 0,(function*(){const u=t.actor?"RT":"LT";t.actor=this.actor;const d={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};t.abortController=new AbortController;const _=yield this.actor.sendAsync({type:u,data:d},t.abortController);delete t.abortController,t.unloadVectorData(),t.aborted||t.loadVectorData(_,this.map.painter,u==="RT")}))}abortTile(t){return c._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.aborted=!0}))}unloadTile(t){return c._(this,void 0,void 0,(function*(){t.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return c.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Qn extends c.E{constructor(t,u,d,_){super(),this.flippedWindingOrder=!1,this.id=t,this.dispatcher=d,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=u}load(t){return c._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const u=yield _e.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,u&&u.data&&(this.image=u.data,t&&(this.coordinates=t),this._finishLoading())}catch(u){this._request=null,this._loaded=!0,this.fire(new c.k(u))}}))}loaded(){return this._loaded}updateImage(t){return t.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=t.url,this.load(t.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(t){this.coordinates=t;const u=t.map(c.a1.fromLngLat);var d;return this.tileID=(function(_){const w=c.a2.fromPoints(_),A=w.width(),I=w.height(),k=Math.max(A,I),N=Math.max(0,Math.floor(-Math.log(k)/Math.LN2)),B=Math.pow(2,N);return new c.a4(N,Math.floor((w.minX+w.maxX)/2*B),Math.floor((w.minY+w.maxY)/2*B))})(u),this.terrainTileRanges=this._getOverlappingTileRanges(u),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=u.map((_=>this.tileID.getTilePoint(_)._round())),this.flippedWindingOrder=((d=this.tileCoords)[1].x-d[0].x)*(d[2].y-d[0].y)-(d[1].y-d[0].y)*(d[2].x-d[0].x)<0,this.fire(new c.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const t=this.map.painter.context,u=t.gl;this.texture||(this.texture=new c.T(t,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let d=!1;for(const _ in this.tiles){const w=this.tiles[_];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,d=!0)}d&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(t){return c._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={}):t.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(t){const{minX:u,minY:d,maxX:_,maxY:w}=c.a2.fromPoints(t),A={};for(let I=0;I<=c.a3;I++){const k=Math.pow(2,I),N=Math.floor(u*k),B=Math.floor(d*k),W=Math.floor(_*k),H=Math.floor(w*k);A[I]={minTileX:N,minTileY:B,maxTileX:W,maxTileY:H}}return A}}class Va extends Qn{constructor(t,u,d,_){super(t,u,d,_),this.roundZoom=!0,this.type="video",this.options=u}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!1;const t=this.options;this.urls=[];for(const u of t.urls)this.urls.push(this.map._requestManager.transformRequest(u,"Source").url);try{const u=yield c.a5(this.urls);if(this._loaded=!0,!u)return;this.video=u,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(u){this.fire(new c.k(u))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const u=this.video.seekable;t<u.start(0)||t>u.end(0)?this.fire(new c.k(new c.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const t=this.map.painter.context,u=t.gl;this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new c.T(t,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let d=!1;for(const _ in this.tiles){const w=this.tiles[_];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,d=!0)}d&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ba extends Qn{constructor(t,u,d,_){super(t,u,d,_),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some((w=>!Array.isArray(w)||w.length!==2||w.some((A=>typeof A!="number"))))||this.fire(new c.k(new c.a6(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.k(new c.a6(`sources.${t}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new c.k(new c.a6(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new c.k(new c.a6(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.k(new c.a6(`sources.${t}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,d=u.gl;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new c.T(u,this.canvas,d.RGBA,{premultiply:!0});let _=!1;for(const w in this.tiles){const A=this.tiles[w];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,_=!0)}_&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const Gi={},Mi=b=>{switch(b){case"geojson":return Nn;case"image":return Qn;case"raster":return Rr;case"raster-dem":return Lr;case"vector":return Sr;case"video":return Va;case"canvas":return ba}return Gi[b]},Do="RTLPluginLoaded";class no extends c.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=ar()}_syncState(t){return this.status=t,this.dispatcher.broadcast("SRPS",{pluginStatus:t,pluginURL:this.url}).catch((u=>{throw this.status="error",u}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(t){return c._(this,arguments,void 0,(function*(u,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=z.resolveURL(u),!this.url)throw new Error(`requested url ${u} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return c._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new c.l(Do))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let fi=null;function An(){return fi||(fi=new no),fi}class Ga{constructor(t,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=t,this.uid=c.a7(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const u=t+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,u,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=(function(_,w){const A={};if(!w)return A;for(const I of _){const k=I.layerIds.map((N=>w.getLayer(N))).filter(Boolean);if(k.length!==0){I.layers=k,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map((N=>k.filter((B=>B.id===N))[0])));for(const N of k)A[N.id]=I}}return A})(t.buckets,u?.style),this.hasSymbolBuckets=!1;for(const _ in this.buckets){const w=this.buckets[_];if(w instanceof c.a9){if(this.hasSymbolBuckets=!0,!d)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _ in this.buckets){const w=this.buckets[_];if(w instanceof c.a9&&w.hasRTLText){this.hasRTLText=!0,An().lazyLoad();break}}this.queryPadding=0;for(const _ in this.buckets){const w=this.buckets[_];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(_).queryRadius(w))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new c.a8}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const d in this.buckets){const _=this.buckets[d];_.uploadPending()&&_.upload(t)}const u=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new c.T(t,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new c.T(t,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,u,d,_,w,A,I,k,N,B,W){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:w,scale:A,tileSize:this.tileSize,pixelPosMatrix:B,transform:k,params:I,queryPadding:this.queryPadding*N,getElevation:W},t,u,d):{}}querySourceFeatures(t,u){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const _=d.loadVTLayers(),w=u&&u.sourceLayer?u.sourceLayer:"",A=_._geojsonTileLayer||_[w];if(!A)return;const I=c.aa(u?.filter,u?.globalState),{z:k,x:N,y:B}=this.tileID.canonical,W={z:k,x:N,y:B};for(let H=0;H<A.length;H++){const K=A.feature(H);if(I.needGeometry){const he=c.ab(K,!0);if(!I.filter(new c.F(this.tileID.overscaledZ),he,this.tileID.canonical))continue}else if(!I.filter(new c.F(this.tileID.overscaledZ),K))continue;const ie=d.getId(K,w),ce=new c.ac(K,k,N,B,ie);ce.tile=W,t.push(ce)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const u=this.expirationTime;if(t.cacheControl){const d=c.ad(t.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const d=Date.now();let _=!1;if(this.expirationTime>d)_=!1;else if(u)if(this.expirationTime<u)_=!0;else{const w=this.expirationTime-u;w?this.expirationTime=d+Math.max(w,3e4):_=!0}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const _ in this.buckets){if(!u.style.hasLayer(_))continue;const w=this.buckets[_],A=w.layers[0].sourceLayer||"_geojsonTileLayer",I=d[A],k=t[A];if(!I||!k||Object.keys(k).length===0)continue;w.update(k,I,this.imageAtlas&&this.imageAtlas.patternPositions||{});const N=u&&u.style&&u.style.getLayer(_);N&&(this.queryPadding=Math.max(this.queryPadding,N.queryRadius(w)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<z.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=z.now()+t}setDependencies(t,u){const d={};for(const _ of u)d[_]=!0;this.dependencies[t]=d}hasDependency(t,u){for(const d of t){const _=this.dependencies[d];if(_){for(const w of u)if(_[w])return!0}}return!1}}class Re{constructor(t,u){this.max=t,this.onRemove=u,this.reset()}reset(){for(const t in this.data)for(const u of this.data[t])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(t,u,d){const _=t.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);const w={value:u,timeout:void 0};if(d!==void 0&&(w.timeout=setTimeout((()=>{this.remove(t,w)}),d)),this.data[_].push(w),this.order.push(_),this.order.length>this.max){const A=this._getAndRemoveByKey(this.order[0]);A&&this.onRemove(A)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const u=this.data[t].shift();return u.timeout&&clearTimeout(u.timeout),this.data[t].length===0&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),u.value}getByKey(t){const u=this.data[t];return u?u[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,u){if(!this.has(t))return this;const d=t.wrapped().key,_=u===void 0?0:this.data[d].indexOf(u),w=this.data[d][_];return this.data[d].splice(_,1),w.timeout&&clearTimeout(w.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(w.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(t){const u=[];for(const d in this.data)for(const _ of this.data[d])t(_.value)||u.push(_);for(const d of u)this.remove(d.value.tileID,d)}}class re{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,u,d){const _=String(u);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][_]=this.stateChanges[t][_]||{},c.e(this.stateChanges[t][_],d),this.deletedStates[t]===null){this.deletedStates[t]={};for(const w in this.state[t])w!==_&&(this.deletedStates[t][w]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][_]===null){this.deletedStates[t][_]={};for(const w in this.state[t][_])d[w]||(this.deletedStates[t][_][w]=null)}else for(const w in d)this.deletedStates[t]&&this.deletedStates[t][_]&&this.deletedStates[t][_][w]===null&&delete this.deletedStates[t][_][w]}removeFeatureState(t,u,d){if(this.deletedStates[t]===null)return;const _=String(u);if(this.deletedStates[t]=this.deletedStates[t]||{},d&&u!==void 0)this.deletedStates[t][_]!==null&&(this.deletedStates[t][_]=this.deletedStates[t][_]||{},this.deletedStates[t][_][d]=null);else if(u!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][_])for(d in this.deletedStates[t][_]={},this.stateChanges[t][_])this.deletedStates[t][_][d]=null;else this.deletedStates[t][_]=null;else this.deletedStates[t]=null}getState(t,u){const d=String(u),_=c.e({},(this.state[t]||{})[d],(this.stateChanges[t]||{})[d]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){const w=this.deletedStates[t][u];if(w===null)return{};for(const A in w)delete _[A]}return _}initializeTileState(t,u){t.setFeatureState(this.state,u)}coalesceChanges(t,u){const d={};for(const _ in this.stateChanges){this.state[_]=this.state[_]||{};const w={};for(const A in this.stateChanges[_])this.state[_][A]||(this.state[_][A]={}),c.e(this.state[_][A],this.stateChanges[_][A]),w[A]=this.state[_][A];d[_]=w}for(const _ in this.deletedStates){this.state[_]=this.state[_]||{};const w={};if(this.deletedStates[_]===null)for(const A in this.state[_])w[A]={},this.state[_][A]={};else for(const A in this.deletedStates[_]){if(this.deletedStates[_][A]===null)this.state[_][A]={};else for(const I of Object.keys(this.deletedStates[_][A]))delete this.state[_][A][I];w[A]=this.state[_][A]}d[_]=d[_]||{},c.e(d[_],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const _ in t)t[_].setFeatureState(d,u)}}const ne=89.25;function le(b,t){const u=c.ah(t.lat,-c.ai,c.ai);return new c.P(c.V(t.lng)*b,c.U(u)*b)}function be(b,t){return new c.a1(t.x/b,t.y/b).toLngLat()}function Pe(b){return b.cameraToCenterDistance*Math.min(.85*Math.tan(c.ae(90-b.pitch)),Math.tan(c.ae(ne-b.pitch)))}function Ie(b,t){const u=b.canonical,d=t/c.af(u.z),_=u.x+Math.pow(2,u.z)*b.wrap,w=c.ag(new Float64Array(16));return c.M(w,w,[_*d,u.y*d,0]),c.N(w,w,[d/c.$,d/c.$,1]),w}function Ve(b,t,u,d,_){const w=c.a1.fromLngLat(b,t),A=_*c.aj(1,b.lat),I=A*Math.cos(c.ae(u)),k=Math.sqrt(A*A-I*I),N=k*Math.sin(c.ae(-d)),B=k*Math.cos(c.ae(-d));return new c.a1(w.x+N,w.y+B,w.z+I)}function Ue(b,t,u){const d=t.intersectsFrustum(b);if(!u||d===0)return d;const _=t.intersectsPlane(u);return _===0?0:d===2&&_===2?2:1}function Je(b,t,u){let d=0;const _=(u-t)/10;for(let w=0;w<10;w++)d+=_*Math.pow(Math.cos(t+(w+.5)/10*(u-t)),b);return d}function yt(b,t){return function(u,d,_,w,A){const I=2*((b-1)/c.ak(Math.cos(c.ae(ne-A))/Math.cos(c.ae(ne)))-1),k=Math.acos(_/w),N=2*Je(I-1,0,c.ae(A/2)),B=Math.min(c.ae(ne),k+c.ae(A/2)),W=Je(I-1,Math.min(B,k-c.ae(A/2)),B),H=Math.atan(d/_),K=Math.hypot(d,_);let ie=u;return ie+=c.ak(w/K/Math.max(.5,Math.cos(c.ae(A/2)))),ie+=I*c.ak(Math.cos(H))/2,ie-=c.ak(Math.max(1,W/N/t))/2,ie}}const it=yt(9.314,3);function kt(b,t){const u=(t.roundZoom?Math.round:Math.floor)(b.zoom+c.ak(b.tileSize/t.tileSize));return Math.max(0,u)}function Oe(b,t){const u=b.getCameraFrustum(),d=b.getClippingPlane(),_=b.screenPointToMercatorCoordinate(b.getCameraPoint()),w=c.a1.fromLngLat(b.center,b.elevation);_.z=w.z+Math.cos(b.pitchInRadians)*b.cameraToCenterDistance/b.worldSize;const A=b.getCoveringTilesDetailsProvider(),I=A.allowVariableZoom(b,t),k=kt(b,t),N=t.minzoom||0,B=t.maxzoom!==void 0?t.maxzoom:b.maxZoom,W=Math.min(Math.max(0,k),B),H=Math.pow(2,W),K=[H*_.x,H*_.y,0],ie=[H*w.x,H*w.y,0],ce=Math.hypot(w.x-_.x,w.y-_.y),he=Math.abs(w.z-_.z),fe=Math.hypot(ce,he),me=we=>({zoom:0,x:0,y:0,wrap:we,fullyVisible:!1}),xe=[],ye=[];if(b.renderWorldCopies&&A.allowWorldCopies())for(let we=1;we<=3;we++)xe.push(me(-we)),xe.push(me(we));for(xe.push(me(0));xe.length>0;){const we=xe.pop(),Te=we.x,ge=we.y;let ke=we.fullyVisible;const Ze={x:Te,y:ge,z:we.zoom},je=A.getTileBoundingVolume(Ze,we.wrap,b.elevation,t);if(!ke){const xt=Ue(u,je,d);if(xt===0)continue;ke=xt===2}const He=A.distanceToTile2d(_.x,_.y,Ze,je);let Ye=k;I&&(Ye=(t.calculateTileZoom||it)(b.zoom+c.ak(b.tileSize/t.tileSize),He,he,fe,b.fov)),Ye=(t.roundZoom?Math.round:Math.floor)(Ye),Ye=Math.max(0,Ye);const Pt=Math.min(Ye,B);if(we.wrap=A.getWrap(w,Ze,we.wrap),we.zoom>=Pt){if(we.zoom<N)continue;const xt=W-we.zoom,lt=K[0]-.5-(Te<<xt),Ft=K[1]-.5-(ge<<xt),vr=t.reparseOverscaled?Math.max(we.zoom,Ye):we.zoom;ye.push({tileID:new c.Z(we.zoom===B?vr:we.zoom,we.wrap,we.zoom,Te,ge),distanceSq:c.al([ie[0]-.5-Te,ie[1]-.5-ge]),tileDistanceToCamera:Math.sqrt(lt*lt+Ft*Ft)})}else for(let xt=0;xt<4;xt++)xe.push({zoom:we.zoom+1,x:(Te<<1)+xt%2,y:(ge<<1)+(xt>>1),wrap:we.wrap,fullyVisible:ke})}return ye.sort(((we,Te)=>we.distanceSq-Te.distanceSq)).map((we=>we.tileID))}const ir=c.a2.fromPoints([new c.P(0,0),new c.P(c.$,c.$)]);class br extends c.E{constructor(t,u,d){super(),this.id=t,this.dispatcher=d,this.on("data",(_=>this._dataHandler(_))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((_,w,A,I)=>{const k=new(Mi(w.type))(_,w,A,I);if(k.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${k.id}`);return k})(t,u,d,this),this._tiles={},this._cache=new Re(0,(_=>this._unloadTile(_))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new re,this._didEmitContent=!1,this._updated=!1}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._maxTileCacheZoomLevels=t?t._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const t in this._tiles){const u=this._tiles[t];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,u,d){return c._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(t),this._tileLoaded(t,u,d)}catch(_){t.state="errored",_.status!==404?this._source.fire(new c.k(_,{tile:t})):this.update(this.transform,this.terrain)}}))}_unloadTile(t){this._source.unloadTile&&this._source.unloadTile(t)}_abortTile(t){this._source.abortTile&&this._source.abortTile(t),this._source.fire(new c.l("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const d=this._tiles[u];d.upload(t),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((t=>t.tileID)).sort(qt).map((t=>t.key))}getRenderableIds(t){const u=[];for(const d in this._tiles)this._isIdRenderable(d,t)&&u.push(this._tiles[d]);return t?u.sort(((d,_)=>{const w=d.tileID,A=_.tileID,I=new c.P(w.canonical.x,w.canonical.y)._rotate(-this.transform.bearingInRadians),k=new c.P(A.canonical.x,A.canonical.y)._rotate(-this.transform.bearingInRadians);return w.overscaledZ-A.overscaledZ||k.y-I.y||k.x-I.x})).map((d=>d.tileID.key)):u.map((d=>d.tileID)).sort(qt).map((d=>d.key))}hasRenderableParent(t){const u=this.findLoadedParent(t,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(t,u){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(u||!this._tiles[t].holdingForFade())}reload(t){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const u in this._tiles)t?this._reloadTile(u,"expired"):this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")}}_reloadTile(t,u){return c._(this,void 0,void 0,(function*(){const d=this._tiles[t];d&&(d.state!=="loading"&&(d.state=u),yield this._loadTile(d,t,u))}))}_tileLoaded(t,u,d){t.timeAdded=z.now(),d==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(u,t),this.getSource().type==="raster-dem"&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new c.l("data",{dataType:"source",tile:t,coord:t.tileID}))}_backfillDEM(t){const u=this.getRenderableIds();for(let _=0;_<u.length;_++){const w=u[_];if(t.neighboringTiles&&t.neighboringTiles[w]){const A=this.getTileByID(w);d(t,A),d(A,t)}}function d(_,w){_.needsHillshadePrepare=!0,_.needsTerrainPrepare=!0;let A=w.tileID.canonical.x-_.tileID.canonical.x;const I=w.tileID.canonical.y-_.tileID.canonical.y,k=Math.pow(2,_.tileID.canonical.z),N=w.tileID.key;A===0&&I===0||Math.abs(I)>1||(Math.abs(A)>1&&(Math.abs(A+k)===1?A+=k:Math.abs(A-k)===1&&(A-=k)),w.dem&&_.dem&&(_.dem.backfillBorder(w.dem,A,I),_.neighboringTiles&&_.neighboringTiles[N]&&(_.neighboringTiles[N].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,u){const d=Object.values(t),_=this._getLoadedDescendents(d);for(const w of d){const A=_[w.key];if(!A)continue;const I=w.overscaledZ+br.maxUnderzooming;let k=1/0;for(const N of A){const B=N.tileID.overscaledZ;B<=I&&B<k&&(k=B)}if(k!==1/0)for(const N of A)N.tileID.overscaledZ===k&&(u[N.tileID.key]=N.tileID)}}_getLoadedDescendents(t){var u;const d={};for(const _ in this._tiles){const w=this._tiles[_];if(w.hasData())for(const A of t)w.tileID.isChildOf(A)&&(d[u=A.key]||(d[u]=[])).push(w)}return d}findLoadedParent(t,u){if(t.key in this._loadedParentTiles){const d=this._loadedParentTiles[t.key];return d&&d.tileID.overscaledZ>=u?d:null}for(let d=t.overscaledZ-1;d>=u;d--){const _=t.scaledTo(d),w=this._getLoadedTile(_);if(w)return w}}findLoadedSibling(t){return this._getLoadedTile(t)}_getLoadedTile(t){const u=this._tiles[t.key];return u&&u.hasData()?u:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){const u=Math.ceil(t.width/this._source.tileSize)+1,d=Math.ceil(t.height/this._source.tileSize)+1,_=Math.floor(u*d*(this._maxTileCacheZoomLevels===null?c.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(w)}handleWrapJump(t){const u=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);if(this._prevLng=t,u){const d={};for(const _ in this._tiles){const w=this._tiles[_];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+u),d[w.tileID.key]=w}this._tiles=d;for(const _ in this._timers)clearTimeout(this._timers[_]),delete this._timers[_];for(const _ in this._tiles)this._setTileReloadTimer(_,this._tiles[_])}}_updateCoveredAndRetainedTiles(t,u,d,_){const w={},A={},I=Object.keys(t),k=z.now();for(const N of I){const B=t[N],W=this._tiles[N];if(!W||W.fadeEndTime!==0&&W.fadeEndTime<=k)continue;const H=this.findLoadedParent(B,u),K=this.findLoadedSibling(B),ie=H||K||null;ie&&(this._addTile(ie.tileID),w[ie.tileID.key]=ie.tileID),A[N]=B}this._retainLoadedChildren(A,t);for(const N in w)t[N]||(this._coveredTiles[N]=!0,t[N]=w[N]);if(_){const N={},B={};for(const W of d)this._tiles[W.key].hasData()?N[W.key]=W:B[W.key]=W;for(const W in B){const H=B[W].children(this._source.maxzoom);this._tiles[H[0].key]&&this._tiles[H[1].key]&&this._tiles[H[2].key]&&this._tiles[H[3].key]&&(N[H[0].key]=t[H[0].key]=H[0],N[H[1].key]=t[H[1].key]=H[1],N[H[2].key]=t[H[2].key]=H[2],N[H[3].key]=t[H[3].key]=H[3],delete B[W])}for(const W in B){const H=B[W],K=this.findLoadedParent(H,this._source.minzoom),ie=this.findLoadedSibling(H),ce=K||ie||null;if(ce){N[ce.tileID.key]=t[ce.tileID.key]=ce.tileID;for(const he in N)N[he].isChildOf(ce.tileID)&&delete N[he]}}for(const W in this._tiles)N[W]||(this._coveredTiles[W]=!0)}}update(t,u){if(!this._sourceLoaded||this._paused)return;let d;this.transform=t,this.terrain=u,this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((N=>new c.Z(N.canonical.z,N.wrap,N.canonical.z,N.canonical.x,N.canonical.y))):(d=Oe(t,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(d=d.filter((N=>this._source.hasTile(N))))):d=[];const _=kt(t,this._source),w=Math.max(_-br.maxOverzooming,this._source.minzoom);if(this.usedForTerrain){const N={};for(const B of d)if(B.canonical.z>this._source.minzoom){const W=B.scaledTo(B.canonical.z-1);N[W.key]=W;const H=B.scaledTo(Math.max(this._source.minzoom,Math.min(B.canonical.z,5)));N[H.key]=H}d=d.concat(Object.values(N))}const A=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new c.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const I=this._updateRetainedTiles(d,_);or(this._source.type)&&this._updateCoveredAndRetainedTiles(I,w,d,u);for(const N in I)this._tiles[N].clearFadeHold();const k=c.am(this._tiles,I);for(const N of k){const B=this._tiles[N];B.hasSymbolBuckets&&!B.holdingForFade()?B.setHoldDuration(this.map._fadeDuration):B.hasSymbolBuckets&&!B.symbolFadeFinished()||this._removeTile(N)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,u){var d;const _={},w={},A=Math.max(u-br.maxOverzooming,this._source.minzoom),I={};for(const k of t){const N=this._addTile(k);_[k.key]=k,N.hasData()||u<this._source.maxzoom&&(I[k.key]=k)}this._retainLoadedChildren(I,_);for(const k of t){let N=this._tiles[k.key];if(N.hasData())continue;if(u+1>this._source.maxzoom){const W=k.children(this._source.maxzoom)[0],H=this.getTile(W);if(H&&H.hasData()){_[W.key]=W;continue}}else{const W=k.children(this._source.maxzoom);if(W.length===4&&_[W[0].key]&&_[W[1].key]&&_[W[2].key]&&_[W[3].key]||W.length===1&&_[W[0].key])continue}let B=N.wasRequested();for(let W=k.overscaledZ-1;W>=A;--W){const H=k.scaledTo(W);if(w[H.key])break;if(w[H.key]=!0,N=this.getTile(H),!N&&B&&(N=this._addTile(H)),N){const K=N.hasData();if((K||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||B)&&(_[H.key]=H),B=N.wasRequested(),K)break}}}return _}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const u=[];let d,_=this._tiles[t].tileID;for(;_.overscaledZ>0;){if(_.key in this._loadedParentTiles){d=this._loadedParentTiles[_.key];break}u.push(_.key);const w=_.scaledTo(_.overscaledZ-1);if(d=this._getLoadedTile(w),d)break;_=w}for(const w of u)this._loadedParentTiles[w]=d}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const t in this._tiles){const u=this._tiles[t].tileID,d=this._getLoadedTile(u);this._loadedSiblingTiles[u.key]=d}}_addTile(t){let u=this._tiles[t.key];if(u)return u;u=this._cache.getAndRemove(t),u&&(this._setTileReloadTimer(t.key,u),u.tileID=t,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,u)));const d=u;return u||(u=new Ga(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(u,t.key,u.state)),u.uses++,this._tiles[t.key]=u,d||this._source.fire(new c.l("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(t,u){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const d=u.getExpiryTimeout();d&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),d))}refreshTiles(t){for(const u in this._tiles)(this._isIdRenderable(u)||this._tiles[u].state=="errored")&&t.some((d=>d.equals(this._tiles[u].tileID.canonical)))&&this._reloadTile(u,"expired")}_removeTile(t){const u=this._tiles[t];u&&(u.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}_dataHandler(t){const u=t.sourceDataType;t.dataType==="source"&&u==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&t.dataType==="source"&&u==="content"&&(this.reload(t.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(t,u,d){const _=[],w=this.transform;if(!w)return _;const A=w.getCoveringTilesDetailsProvider().allowWorldCopies(),I=d?w.getCameraQueryGeometry(t):t,k=K=>w.screenPointToMercatorCoordinate(K,this.terrain),N=this.transformBbox(t,k,!A),B=this.transformBbox(I,k,!A),W=this.getIds(),H=c.a2.fromPoints(B);for(let K=0;K<W.length;K++){const ie=this._tiles[W[K]];if(ie.holdingForFade())continue;const ce=A?[ie.tileID]:[ie.tileID.unwrapTo(-1),ie.tileID.unwrapTo(0)],he=Math.pow(2,w.zoom-ie.tileID.overscaledZ),fe=u*ie.queryPadding*c.$/ie.tileSize/he;for(const me of ce){const xe=H.map((ye=>me.getTilePoint(new c.a1(ye.x,ye.y))));if(xe.expandBy(fe),xe.intersects(ir)){const ye=N.map((Te=>me.getTilePoint(Te))),we=B.map((Te=>me.getTilePoint(Te)));_.push({tile:ie,tileID:A?me:me.unwrapTo(0),queryGeometry:ye,cameraQueryGeometry:we,scale:he})}}}return _}transformBbox(t,u,d){let _=t.map(u);if(d){const w=c.a2.fromPoints(t);w.shrinkBy(.001*Math.min(w.width(),w.height()));const A=w.map(u);c.a2.fromPoints(_).covers(A)||(_=_.map((I=>I.x>.5?new c.a1(I.x-1,I.y,I.z):I)))}return _}getVisibleCoordinates(t){const u=this.getRenderableIds(t).map((d=>this._tiles[d].tileID));return this.transform&&this.transform.populateCache(u),u}hasTransition(){if(this._source.hasTransition())return!0;if(or(this._source.type)){const t=z.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=t)return!0}return!1}setFeatureState(t,u,d){this._state.updateState(t=t||"_geojsonTileLayer",u,d)}removeFeatureState(t,u,d){this._state.removeFeatureState(t=t||"_geojsonTileLayer",u,d)}getFeatureState(t,u){return this._state.getState(t=t||"_geojsonTileLayer",u)}setDependencies(t,u,d){const _=this._tiles[t];_&&_.setDependencies(u,d)}reloadTilesForDependencies(t,u){for(const d in this._tiles)this._tiles[d].hasDependency(t,u)&&this._reloadTile(d,"reloading");this._cache.filter((d=>!d.hasDependency(t,u)))}}function qt(b,t){const u=Math.abs(2*b.wrap)-+(b.wrap<0),d=Math.abs(2*t.wrap)-+(t.wrap<0);return b.overscaledZ-t.overscaledZ||d-u||t.canonical.y-b.canonical.y||t.canonical.x-b.canonical.x}function or(b){return b==="raster"||b==="image"||b==="video"}br.maxOverzooming=10,br.maxUnderzooming=3;class Br{constructor(t,u){this.reset(t,u)}reset(t,u){this.points=t||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(this.points.length===1)return this.points[0];t=c.ah(t,0,1);let u=1,d=this._distances[u];const _=t*this.paddedLength+this.padding;for(;d<_&&u<this._distances.length;)d=this._distances[++u];const w=u-1,A=this._distances[w],I=d-A,k=I>0?(_-A)/I:0;return this.points[w].mult(1-k).add(this.points[u].mult(k))}}function Xn(b,t){let u=!0;return b==="always"||b!=="never"&&t!=="never"||(u=!1),u}class ra{constructor(t,u,d){const _=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(t/d),this.yCellCount=Math.ceil(u/d);for(let A=0;A<this.xCellCount*this.yCellCount;A++)_.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=u,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,u,d,_,w){this._forEachCell(u,d,_,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(u),this.bboxes.push(d),this.bboxes.push(_),this.bboxes.push(w)}insertCircle(t,u,d,_){this._forEachCell(u-_,d-_,u+_,d+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(u),this.circles.push(d),this.circles.push(_)}_insertBoxCell(t,u,d,_,w,A){this.boxCells[w].push(A)}_insertCircleCell(t,u,d,_,w,A){this.circleCells[w].push(A)}_query(t,u,d,_,w,A,I){if(d<0||t>this.width||_<0||u>this.height)return[];const k=[];if(t<=0&&u<=0&&this.width<=d&&this.height<=_){if(w)return[{key:null,x1:t,y1:u,x2:d,y2:_}];for(let N=0;N<this.boxKeys.length;N++)k.push({key:this.boxKeys[N],x1:this.bboxes[4*N],y1:this.bboxes[4*N+1],x2:this.bboxes[4*N+2],y2:this.bboxes[4*N+3]});for(let N=0;N<this.circleKeys.length;N++){const B=this.circles[3*N],W=this.circles[3*N+1],H=this.circles[3*N+2];k.push({key:this.circleKeys[N],x1:B-H,y1:W-H,x2:B+H,y2:W+H})}}else this._forEachCell(t,u,d,_,this._queryCell,k,{hitTest:w,overlapMode:A,seenUids:{box:{},circle:{}}},I);return k}query(t,u,d,_){return this._query(t,u,d,_,!1,null)}hitTest(t,u,d,_,w,A){return this._query(t,u,d,_,!0,w,A).length>0}hitTestCircle(t,u,d,_,w){const A=t-d,I=t+d,k=u-d,N=u+d;if(I<0||A>this.width||N<0||k>this.height)return!1;const B=[];return this._forEachCell(A,k,I,N,this._queryCellCircle,B,{hitTest:!0,overlapMode:_,circle:{x:t,y:u,radius:d},seenUids:{box:{},circle:{}}},w),B.length>0}_queryCell(t,u,d,_,w,A,I,k){const{seenUids:N,hitTest:B,overlapMode:W}=I,H=this.boxCells[w];if(H!==null){const ie=this.bboxes;for(const ce of H)if(!N.box[ce]){N.box[ce]=!0;const he=4*ce,fe=this.boxKeys[ce];if(t<=ie[he+2]&&u<=ie[he+3]&&d>=ie[he+0]&&_>=ie[he+1]&&(!k||k(fe))&&(!B||!Xn(W,fe.overlapMode))&&(A.push({key:fe,x1:ie[he],y1:ie[he+1],x2:ie[he+2],y2:ie[he+3]}),B))return!0}}const K=this.circleCells[w];if(K!==null){const ie=this.circles;for(const ce of K)if(!N.circle[ce]){N.circle[ce]=!0;const he=3*ce,fe=this.circleKeys[ce];if(this._circleAndRectCollide(ie[he],ie[he+1],ie[he+2],t,u,d,_)&&(!k||k(fe))&&(!B||!Xn(W,fe.overlapMode))){const me=ie[he],xe=ie[he+1],ye=ie[he+2];if(A.push({key:fe,x1:me-ye,y1:xe-ye,x2:me+ye,y2:xe+ye}),B)return!0}}}return!1}_queryCellCircle(t,u,d,_,w,A,I,k){const{circle:N,seenUids:B,overlapMode:W}=I,H=this.boxCells[w];if(H!==null){const ie=this.bboxes;for(const ce of H)if(!B.box[ce]){B.box[ce]=!0;const he=4*ce,fe=this.boxKeys[ce];if(this._circleAndRectCollide(N.x,N.y,N.radius,ie[he+0],ie[he+1],ie[he+2],ie[he+3])&&(!k||k(fe))&&!Xn(W,fe.overlapMode))return A.push(!0),!0}}const K=this.circleCells[w];if(K!==null){const ie=this.circles;for(const ce of K)if(!B.circle[ce]){B.circle[ce]=!0;const he=3*ce,fe=this.circleKeys[ce];if(this._circlesCollide(ie[he],ie[he+1],ie[he+2],N.x,N.y,N.radius)&&(!k||k(fe))&&!Xn(W,fe.overlapMode))return A.push(!0),!0}}}_forEachCell(t,u,d,_,w,A,I,k){const N=this._convertToXCellCoord(t),B=this._convertToYCellCoord(u),W=this._convertToXCellCoord(d),H=this._convertToYCellCoord(_);for(let K=N;K<=W;K++)for(let ie=B;ie<=H;ie++)if(w.call(this,t,u,d,_,this.xCellCount*ie+K,A,I,k))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,u,d,_,w,A){const I=_-t,k=w-u,N=d+A;return N*N>I*I+k*k}_circleAndRectCollide(t,u,d,_,w,A,I){const k=(A-_)/2,N=Math.abs(t-(_+k));if(N>k+d)return!1;const B=(I-w)/2,W=Math.abs(u-(w+B));if(W>B+d)return!1;if(N<=k||W<=B)return!0;const H=N-k,K=W-B;return H*H+K*K<=d*d}}function Qr(b,t,u){const d=c.L();if(!b){const{vecSouth:W,vecEast:H}=sr(t),K=M();K[0]=H[0],K[1]=H[1],K[2]=W[0],K[3]=W[1],_=K,(B=(A=(w=K)[0])*(N=w[3])-(k=w[2])*(I=w[1]))&&(_[0]=N*(B=1/B),_[1]=-I*B,_[2]=-k*B,_[3]=A*B),d[0]=K[0],d[1]=K[1],d[4]=K[2],d[5]=K[3]}var _,w,A,I,k,N,B;return c.N(d,d,[1/u,1/u,1]),d}function tr(b,t,u,d){if(b){const _=c.L();if(!t){const{vecSouth:w,vecEast:A}=sr(u);_[0]=A[0],_[1]=A[1],_[4]=w[0],_[5]=w[1]}return c.N(_,_,[d,d,1]),_}return u.pixelsToClipSpaceMatrix}function sr(b){const t=Math.cos(b.rollInRadians),u=Math.sin(b.rollInRadians),d=Math.cos(b.pitchInRadians),_=Math.cos(b.bearingInRadians),w=Math.sin(b.bearingInRadians),A=c.ar();A[0]=-_*d*u-w*t,A[1]=-w*d*u+_*t;const I=c.as(A);I<1e-9?c.at(A):c.au(A,A,1/I);const k=c.ar();k[0]=_*d*t-w*u,k[1]=w*d*t+_*u;const N=c.as(k);return N<1e-9?c.at(k):c.au(k,k,1/N),{vecEast:k,vecSouth:A}}function pn(b,t,u,d){let _;d?(_=[b,t,d(b,t),1],c.aw(_,_,u)):(_=[b,t,0,1],cl(_,_,u));const w=_[3];return{point:new c.P(_[0]/w,_[1]/w),signedDistanceFromCamera:w,isOccluded:!1}}function vt(b,t){return .5+b/t*.5}function Ia(b,t){return b.x>=-t[0]&&b.x<=t[0]&&b.y>=-t[1]&&b.y<=t[1]}function Cn(b,t,u,d,_,w,A,I,k,N,B,W,H){const K=u?b.textSizeData:b.iconSizeData,ie=c.an(K,t.transform.zoom),ce=[256/t.width*2+1,256/t.height*2+1],he=u?b.text.dynamicLayoutVertexArray:b.icon.dynamicLayoutVertexArray;he.clear();const fe=b.lineVertexArray,me=u?b.text.placedSymbolArray:b.icon.placedSymbolArray,xe=t.transform.width/t.transform.height;let ye=!1;for(let we=0;we<me.length;we++){const Te=me.get(we);if(Te.hidden||Te.writingMode===c.ao.vertical&&!ye){To(Te.numGlyphs,he);continue}ye=!1;const ge=new c.P(Te.anchorX,Te.anchorY),ke={getElevation:H,pitchedLabelPlaneMatrix:d,lineVertexArray:fe,pitchWithMap:w,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:t.transform,tileAnchorPoint:ge,unwrappedTileID:k,width:N,height:B,translation:W},Ze=mn(Te.anchorX,Te.anchorY,ke);if(!Ia(Ze.point,ce)){To(Te.numGlyphs,he);continue}const je=vt(t.transform.cameraToCenterDistance,Ze.signedDistanceFromCamera),He=c.ap(K,ie,Te),Ye=w?He*t.transform.getPitchedTextCorrection(Te.anchorX,Te.anchorY,k)/je:He*je,Pt=Tt({projectionContext:ke,pitchedLabelPlaneMatrixInverse:_,symbol:Te,fontSize:Ye,flip:!1,keepUpright:A,glyphOffsetArray:b.glyphOffsetArray,dynamicLayoutVertexArray:he,aspectRatio:xe,rotateToLine:I});ye=Pt.useVertical,(Pt.notEnoughRoom||ye||Pt.needsFlipping&&Tt({projectionContext:ke,pitchedLabelPlaneMatrixInverse:_,symbol:Te,fontSize:Ye,flip:!0,keepUpright:A,glyphOffsetArray:b.glyphOffsetArray,dynamicLayoutVertexArray:he,aspectRatio:xe,rotateToLine:I}).notEnoughRoom)&&To(Te.numGlyphs,he)}u?b.text.dynamicLayoutVertexBuffer.updateData(he):b.icon.dynamicLayoutVertexBuffer.updateData(he)}function Xo(b,t,u,d,_,w,A,I){const k=w.glyphStartIndex+w.numGlyphs,N=w.lineStartIndex,B=w.lineStartIndex+w.lineLength,W=t.getoffsetX(w.glyphStartIndex),H=t.getoffsetX(k-1),K=di(b*W,u,d,_,w.segment,N,B,I,A);if(!K)return null;const ie=di(b*H,u,d,_,w.segment,N,B,I,A);return ie?I.projectionCache.anyProjectionOccluded?null:{first:K,last:ie}:null}function Mo(b,t,u,d){return b===c.ao.horizontal&&Math.abs(u.y-t.y)>Math.abs(u.x-t.x)*d?{useVertical:!0}:(b===c.ao.vertical?t.y<u.y:t.x>u.x)?{needsFlipping:!0}:null}function Tt(b){const{projectionContext:t,pitchedLabelPlaneMatrixInverse:u,symbol:d,fontSize:_,flip:w,keepUpright:A,glyphOffsetArray:I,dynamicLayoutVertexArray:k,aspectRatio:N,rotateToLine:B}=b,W=_/24,H=d.lineOffsetX*W,K=d.lineOffsetY*W;let ie;if(d.numGlyphs>1){const ce=d.glyphStartIndex+d.numGlyphs,he=d.lineStartIndex,fe=d.lineStartIndex+d.lineLength,me=Xo(W,I,H,K,w,d,B,t);if(!me)return{notEnoughRoom:!0};const xe=Wi(me.first.point.x,me.first.point.y,t,u),ye=Wi(me.last.point.x,me.last.point.y,t,u);if(A&&!w){const we=Mo(d.writingMode,xe,ye,N);if(we)return we}ie=[me.first];for(let we=d.glyphStartIndex+1;we<ce-1;we++){const Te=di(W*I.getoffsetX(we),H,K,w,d.segment,he,fe,t,B);if(!Te)return{notEnoughRoom:!0};ie.push(Te)}ie.push(me.last)}else{if(A&&!w){const he=jn(t.tileAnchorPoint.x,t.tileAnchorPoint.y,t).point,fe=d.lineStartIndex+d.segment+1,me=new c.P(t.lineVertexArray.getx(fe),t.lineVertexArray.gety(fe)),xe=jn(me.x,me.y,t),ye=xe.signedDistanceFromCamera>0?xe.point:mr(t.tileAnchorPoint,me,he,1,t),we=Wi(he.x,he.y,t,u),Te=Wi(ye.x,ye.y,t,u),ge=Mo(d.writingMode,we,Te,N);if(ge)return ge}const ce=di(W*I.getoffsetX(d.glyphStartIndex),H,K,w,d.segment,d.lineStartIndex,d.lineStartIndex+d.lineLength,t,B);if(!ce||t.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ie=[ce]}for(const ce of ie)c.av(k,ce.point,ce.angle);return{}}function mr(b,t,u,d,_){const w=b.add(b.sub(t)._unit()),A=jn(w.x,w.y,_).point,I=u.sub(A);return u.add(I._mult(d/I.mag()))}function cr(b,t,u){const d=t.projectionCache;if(d.projections[b])return d.projections[b];const _=new c.P(t.lineVertexArray.getx(b),t.lineVertexArray.gety(b)),w=jn(_.x,_.y,t);if(w.signedDistanceFromCamera>0)return d.projections[b]=w.point,d.anyProjectionOccluded=d.anyProjectionOccluded||w.isOccluded,w.point;const A=b-u.direction;return mr(u.distanceFromAnchor===0?t.tileAnchorPoint:new c.P(t.lineVertexArray.getx(A),t.lineVertexArray.gety(A)),_,u.previousVertex,u.absOffsetX-u.distanceFromAnchor+1,t)}function jn(b,t,u){const d=b+u.translation[0],_=t+u.translation[1];let w;return u.pitchWithMap?(w=pn(d,_,u.pitchedLabelPlaneMatrix,u.getElevation),w.isOccluded=!1):(w=u.transform.projectTileCoordinates(d,_,u.unwrappedTileID,u.getElevation),w.point.x=(.5*w.point.x+.5)*u.width,w.point.y=(.5*-w.point.y+.5)*u.height),w}function Wi(b,t,u,d){if(u.pitchWithMap){const _=[b,t,0,1];return c.aw(_,_,d),u.transform.projectTileCoordinates(_[0]/_[3],_[1]/_[3],u.unwrappedTileID,u.getElevation).point}return{x:b/u.width*2-1,y:1-t/u.height*2}}function mn(b,t,u){return u.transform.projectTileCoordinates(b,t,u.unwrappedTileID,u.getElevation)}function yr(b,t,u){return b._unit()._perp()._mult(t*u)}function oc(b,t,u,d,_,w,A,I,k){if(I.projectionCache.offsets[b])return I.projectionCache.offsets[b];const N=u.add(t);if(b+k.direction<d||b+k.direction>=_)return I.projectionCache.offsets[b]=N,N;const B=cr(b+k.direction,I,k),W=yr(B.sub(u),A,k.direction),H=u.add(W),K=B.add(W);return I.projectionCache.offsets[b]=c.ax(w,N,H,K)||N,I.projectionCache.offsets[b]}function di(b,t,u,d,_,w,A,I,k){const N=d?b-t:b+t;let B=N>0?1:-1,W=0;d&&(B*=-1,W=Math.PI),B<0&&(W+=Math.PI);let H,K=B>0?w+_:w+_+1;I.projectionCache.cachedAnchorPoint?H=I.projectionCache.cachedAnchorPoint:(H=jn(I.tileAnchorPoint.x,I.tileAnchorPoint.y,I).point,I.projectionCache.cachedAnchorPoint=H);let ie,ce,he=H,fe=H,me=0,xe=0;const ye=Math.abs(N),we=[];let Te;for(;me+xe<=ye;){if(K+=B,K<w||K>=A)return null;me+=xe,fe=he,ce=ie;const Ze={absOffsetX:ye,direction:B,distanceFromAnchor:me,previousVertex:fe};if(he=cr(K,I,Ze),u===0)we.push(fe),Te=he.sub(fe);else{let je;const He=he.sub(fe);je=He.mag()===0?yr(cr(K+B,I,Ze).sub(he),u,B):yr(He,u,B),ce||(ce=fe.add(je)),ie=oc(K,je,he,w,A,ce,u,I,Ze),we.push(ce),Te=ie.sub(ce)}xe=Te.mag()}const ge=Te._mult((ye-me)/xe)._add(ce||fe),ke=W+Math.atan2(he.y-fe.y,he.x-fe.x);return we.push(ge),{point:ge,angle:k?ke:0,path:we}}const Ko=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function To(b,t){for(let u=0;u<b;u++){const d=t.length;t.resize(d+4),t.float32.set(Ko,3*d)}}function cl(b,t,u){const d=t[0],_=t[1];return b[0]=u[0]*d+u[4]*_+u[12],b[1]=u[1]*d+u[5]*_+u[13],b[3]=u[3]*d+u[7]*_+u[15],b}const Dn=100;class ph{constructor(t,u=new ra(t.width+200,t.height+200,25),d=new ra(t.width+200,t.height+200,25)){this.transform=t,this.grid=u,this.ignoredGrid=d,this.pitchFactor=Math.cos(t.pitch*Math.PI/180)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+Dn,this.screenBottomBoundary=t.height+Dn,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,u,d,_,w,A,I,k,N,B,W,H){const K=this.projectAndGetPerspectiveRatio(t.anchorPointX+k[0],t.anchorPointY+k[1],w,B,H),ie=d*K.perspectiveRatio;let ce;if(A||I)ce=this._projectCollisionBox(t,ie,_,w,A,I,k,K,B,W,H);else{const Te=K.x+(W?W.x*ie:0),ge=K.y+(W?W.y*ie:0);ce={allPointsOccluded:!1,box:[Te+t.x1*ie,ge+t.y1*ie,Te+t.x2*ie,ge+t.y2*ie]}}const[he,fe,me,xe]=ce.box,ye=A?ce.allPointsOccluded:K.isOccluded;let we=ye;return we||(we=K.perspectiveRatio<this.perspectiveRatioCutoff),we||(we=!this.isInsideGrid(he,fe,me,xe)),we||u!=="always"&&this.grid.hitTest(he,fe,me,xe,u,N)?{box:[he,fe,me,xe],placeable:!1,offscreen:!1,occluded:ye}:{box:[he,fe,me,xe],placeable:!0,offscreen:this.isOffscreen(he,fe,me,xe),occluded:ye}}placeCollisionCircles(t,u,d,_,w,A,I,k,N,B,W,H,K,ie){const ce=[],he=new c.P(u.anchorX,u.anchorY),fe=this.getPerspectiveRatio(he.x,he.y,A,ie),me=(N?w*this.transform.getPitchedTextCorrection(u.anchorX,u.anchorY,A)/fe:w*fe)/c.aB,xe={getElevation:ie,pitchedLabelPlaneMatrix:I,lineVertexArray:d,pitchWithMap:N,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:he,unwrappedTileID:A,width:this.transform.width,height:this.transform.height,translation:K},ye=Xo(me,_,u.lineOffsetX*me,u.lineOffsetY*me,!1,u,!1,xe);let we=!1,Te=!1,ge=!0;if(ye){const ke=.5*W*fe+H,Ze=new c.P(-100,-100),je=new c.P(this.screenRightBoundary,this.screenBottomBoundary),He=new Br,Ye=ye.first,Pt=ye.last;let xt=[];for(let vr=Ye.path.length-1;vr>=1;vr--)xt.push(Ye.path[vr]);for(let vr=1;vr<Pt.path.length;vr++)xt.push(Pt.path[vr]);const lt=2.5*ke;if(N){const vr=this.projectPathToScreenSpace(xt,xe);xt=vr.some((kr=>kr.signedDistanceFromCamera<=0))?[]:vr.map((kr=>kr.point))}let Ft=[];if(xt.length>0){const vr=xt[0].clone(),kr=xt[0].clone();for(let hn=1;hn<xt.length;hn++)vr.x=Math.min(vr.x,xt[hn].x),vr.y=Math.min(vr.y,xt[hn].y),kr.x=Math.max(kr.x,xt[hn].x),kr.y=Math.max(kr.y,xt[hn].y);Ft=vr.x>=Ze.x&&kr.x<=je.x&&vr.y>=Ze.y&&kr.y<=je.y?[xt]:kr.x<Ze.x||vr.x>je.x||kr.y<Ze.y||vr.y>je.y?[]:c.ay([xt],Ze.x,Ze.y,je.x,je.y)}for(const vr of Ft){He.reset(vr,.25*ke);let kr=0;kr=He.length<=.5*ke?1:Math.ceil(He.paddedLength/lt)+1;for(let hn=0;hn<kr;hn++){const Wr=hn/Math.max(kr-1,1),Zr=He.lerp(Wr),rn=Zr.x+Dn,Kr=Zr.y+Dn;ce.push(rn,Kr,ke,0);const Yr=rn-ke,Mr=Kr-ke,ea=rn+ke,$n=Kr+ke;if(ge=ge&&this.isOffscreen(Yr,Mr,ea,$n),Te=Te||this.isInsideGrid(Yr,Mr,ea,$n),t!=="always"&&this.grid.hitTestCircle(rn,Kr,ke,t,B)&&(we=!0,!k))return{circles:[],offscreen:!1,collisionDetected:we}}}}return{circles:!k&&we||!Te||fe<this.perspectiveRatioCutoff?[]:ce,offscreen:ge,collisionDetected:we}}projectPathToScreenSpace(t,u){const d=(function(_,w){const A=c.L();return c.aq(A,w.pitchedLabelPlaneMatrix),_.map((I=>{const k=pn(I.x,I.y,A,w.getElevation),N=w.transform.projectTileCoordinates(k.point.x,k.point.y,w.unwrappedTileID,w.getElevation);return N.point.x=(.5*N.point.x+.5)*w.width,N.point.y=(.5*-N.point.y+.5)*w.height,N}))})(t,u);return(function(_){let w=0,A=0,I=0,k=0;for(let N=0;N<_.length;N++)_[N].isOccluded?(I=N+1,k=0):(k++,k>A&&(A=k,w=I));return _.slice(w,w+A)})(d)}queryRenderedSymbols(t){if(t.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[],d=new c.a2;for(const W of t){const H=new c.P(W.x+Dn,W.y+Dn);d.extend(H),u.push(H)}const{minX:_,minY:w,maxX:A,maxY:I}=d,k=this.grid.query(_,w,A,I).concat(this.ignoredGrid.query(_,w,A,I)),N={},B={};for(const W of k){const H=W.key;if(N[H.bucketInstanceId]===void 0&&(N[H.bucketInstanceId]={}),N[H.bucketInstanceId][H.featureIndex])continue;const K=[new c.P(W.x1,W.y1),new c.P(W.x2,W.y1),new c.P(W.x2,W.y2),new c.P(W.x1,W.y2)];c.az(u,K)&&(N[H.bucketInstanceId][H.featureIndex]=!0,B[H.bucketInstanceId]===void 0&&(B[H.bucketInstanceId]=[]),B[H.bucketInstanceId].push(H.featureIndex))}return B}insertCollisionBox(t,u,d,_,w,A){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:w,collisionGroupID:A,overlapMode:u},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,u,d,_,w,A){const I=d?this.ignoredGrid:this.grid,k={bucketInstanceId:_,featureIndex:w,collisionGroupID:A,overlapMode:u};for(let N=0;N<t.length;N+=4)I.insertCircle(k,t[N],t[N+1],t[N+2])}projectAndGetPerspectiveRatio(t,u,d,_,w){if(w){let A;_?(A=[t,u,_(t,u),1],c.aw(A,A,w)):(A=[t,u,0,1],cl(A,A,w));const I=A[3];return{x:(A[0]/I+1)/2*this.transform.width+Dn,y:(-A[1]/I+1)/2*this.transform.height+Dn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/I*.5,isOccluded:!1,signedDistanceFromCamera:I}}{const A=this.transform.projectTileCoordinates(t,u,d,_);return{x:(A.point.x+1)/2*this.transform.width+Dn,y:(1-A.point.y)/2*this.transform.height+Dn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/A.signedDistanceFromCamera*.5,isOccluded:A.isOccluded,signedDistanceFromCamera:A.signedDistanceFromCamera}}}getPerspectiveRatio(t,u,d,_){const w=this.transform.projectTileCoordinates(t,u,d,_);return .5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5}isOffscreen(t,u,d,_){return d<Dn||t>=this.screenRightBoundary||_<Dn||u>this.screenBottomBoundary}isInsideGrid(t,u,d,_){return d>=0&&t<this.gridRightBoundary&&_>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const t=c.ag([]);return c.M(t,t,[-100,-100,0]),t}_projectCollisionBox(t,u,d,_,w,A,I,k,N,B,W){let H=1,K=0,ie=0,ce=1;const he=t.anchorPointX+I[0],fe=t.anchorPointY+I[1];if(A&&!w){const xt=this.projectAndGetPerspectiveRatio(he+1,fe,_,N,W),lt=xt.x-k.x,Ft=Math.atan((xt.y-k.y)/lt)+(lt<0?Math.PI:0),vr=Math.sin(Ft),kr=Math.cos(Ft);H=kr,K=vr,ie=-vr,ce=kr}else if(!A&&w){const xt=sr(this.transform);H=xt.vecEast[0],K=xt.vecEast[1],ie=xt.vecSouth[0],ce=xt.vecSouth[1]}let me=k.x,xe=k.y,ye=u;w&&(me=he,xe=fe,ye=Math.pow(2,-(this.transform.zoom-d.overscaledZ)),ye*=this.transform.getPitchedTextCorrection(he,fe,_),B||(ye*=c.ah(.5+k.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),B&&(me+=H*B.x*ye+ie*B.y*ye,xe+=K*B.x*ye+ce*B.y*ye);const we=t.x1*ye,Te=t.x2*ye,ge=(we+Te)/2,ke=t.y1*ye,Ze=t.y2*ye,je=(ke+Ze)/2,He=[{offsetX:we,offsetY:ke},{offsetX:ge,offsetY:ke},{offsetX:Te,offsetY:ke},{offsetX:Te,offsetY:je},{offsetX:Te,offsetY:Ze},{offsetX:ge,offsetY:Ze},{offsetX:we,offsetY:Ze},{offsetX:we,offsetY:je}];let Ye=[];for(const{offsetX:xt,offsetY:lt}of He)Ye.push(new c.P(me+H*xt+ie*lt,xe+K*xt+ce*lt));let Pt=!1;if(w){const xt=Ye.map((lt=>this.projectAndGetPerspectiveRatio(lt.x,lt.y,_,N,W)));Pt=xt.some((lt=>!lt.isOccluded)),Ye=xt.map((lt=>new c.P(lt.x,lt.y)))}else Pt=!0;return{box:c.aA(Ye),allPointsOccluded:!Pt}}}class xa{constructor(t,u,d,_){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?u:-u))):_&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class qr{constructor(t,u,d,_,w){this.text=new xa(t?t.text:null,u,d,w),this.icon=new xa(t?t.icon:null,u,_,w)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Eo{constructor(t,u,d){this.text=t,this.icon=u,this.skipFade=d}}class hl{constructor(t,u,d,_,w){this.bucketInstanceId=t,this.featureIndex=u,this.sourceLayerIndex=d,this.bucketIndex=_,this.tileID=w}}class mh{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const u=++this.maxGroupID;this.collisionGroups[t]={ID:u,predicate:d=>d.collisionGroupID===u}}return this.collisionGroups[t]}}function Ti(b,t,u,d,_){const{horizontalAlign:w,verticalAlign:A}=c.aH(b);return new c.P(-(w-.5)*t+d[0]*_,-(A-.5)*u+d[1]*_)}class Ro{constructor(t,u,d,_,w){this.transform=t.clone(),this.terrain=u,this.collisionIndex=new ph(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new mh(_),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(t){const u=this.terrain;return u?(d,_)=>u.getElevation(t,d,_):null}getBucketParts(t,u,d,_){const w=d.getBucket(u),A=d.latestFeatureIndex;if(!w||!A||u.id!==w.layerIds[0])return;const I=d.collisionBoxArray,k=w.layers[0].layout,N=w.layers[0].paint,B=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),W=d.tileSize/c.$,H=d.tileID.toUnwrapped(),K=k.get("text-rotation-alignment")==="map",ie=c.aC(d,1,this.transform.zoom),ce=c.aD(this.collisionIndex.transform,d,N.get("text-translate"),N.get("text-translate-anchor")),he=c.aD(this.collisionIndex.transform,d,N.get("icon-translate"),N.get("icon-translate-anchor")),fe=Qr(K,this.transform,ie);this.retainedQueryData[w.bucketInstanceId]=new hl(w.bucketInstanceId,A,w.sourceLayerIndex,w.index,d.tileID);const me={bucket:w,layout:k,translationText:ce,translationIcon:he,unwrappedTileID:H,pitchedLabelPlaneMatrix:fe,scale:B,textPixelRatio:W,holdingForFade:d.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:c.an(w.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(_)for(const xe of w.sortKeyRanges){const{sortKey:ye,symbolInstanceStart:we,symbolInstanceEnd:Te}=xe;t.push({sortKey:ye,symbolInstanceStart:we,symbolInstanceEnd:Te,parameters:me})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:me})}attemptAnchorPlacement(t,u,d,_,w,A,I,k,N,B,W,H,K,ie,ce,he,fe,me,xe,ye){const we=c.aE[t.textAnchor],Te=[t.textOffset0,t.textOffset1],ge=Ti(we,d,_,Te,w),ke=this.collisionIndex.placeCollisionBox(u,H,k,N,B,I,A,he,W.predicate,xe,ge,ye);if((!me||this.collisionIndex.placeCollisionBox(me,H,k,N,B,I,A,fe,W.predicate,xe,ge,ye).placeable)&&ke.placeable){let Ze;if(this.prevPlacement&&this.prevPlacement.variableOffsets[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID].text&&(Ze=this.prevPlacement.variableOffsets[K.crossTileID].anchor),K.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[K.crossTileID]={textOffset:Te,width:d,height:_,anchor:we,textBoxScale:w,prevAnchor:Ze},this.markUsedJustification(ie,we,K,ce),ie.allowVerticalPlacement&&(this.markUsedOrientation(ie,ce,K),this.placedOrientations[K.crossTileID]=ce),{shift:ge,placedGlyphBoxes:ke}}}placeLayerBucketPart(t,u,d){const{bucket:_,layout:w,translationText:A,translationIcon:I,unwrappedTileID:k,pitchedLabelPlaneMatrix:N,textPixelRatio:B,holdingForFade:W,collisionBoxArray:H,partiallyEvaluatedTextSize:K,collisionGroup:ie}=t.parameters,ce=w.get("text-optional"),he=w.get("icon-optional"),fe=c.aF(w,"text-overlap","text-allow-overlap"),me=fe==="always",xe=c.aF(w,"icon-overlap","icon-allow-overlap"),ye=xe==="always",we=w.get("text-rotation-alignment")==="map",Te=w.get("text-pitch-alignment")==="map",ge=w.get("icon-text-fit")!=="none",ke=w.get("symbol-z-order")==="viewport-y",Ze=me&&(ye||!_.hasIconData()||he),je=ye&&(me||!_.hasTextData()||ce);!_.collisionArrays&&H&&_.deserializeCollisionBoxes(H);const He=this.retainedQueryData[_.bucketInstanceId].tileID,Ye=this._getTerrainElevationFunc(He),Pt=this.transform.getFastPathSimpleProjectionMatrix(He),xt=(lt,Ft,vr)=>{var kr,hn;if(u[lt.crossTileID])return;if(W)return void(this.placements[lt.crossTileID]=new Eo(!1,!1,!1));let Wr=!1,Zr=!1,rn=!0,Kr=null,Yr={box:null,placeable:!1,offscreen:null,occluded:!1},Mr={placeable:!1},ea=null,$n=null,ri=null,Qs=0,ds=0,ni=0;Ft.textFeatureIndex?Qs=Ft.textFeatureIndex:lt.useRuntimeCollisionCircles&&(Qs=lt.featureIndex),Ft.verticalTextFeatureIndex&&(ds=Ft.verticalTextFeatureIndex);const ps=Ft.textBox;if(ps){const ya=jr=>{let gn=c.ao.horizontal;if(_.allowVerticalPlacement&&!jr&&this.prevPlacement){const za=this.prevPlacement.placedOrientations[lt.crossTileID];za&&(this.placedOrientations[lt.crossTileID]=za,gn=za,this.markUsedOrientation(_,gn,lt))}return gn},Bo=(jr,gn)=>{if(_.allowVerticalPlacement&&lt.numVerticalGlyphVertices>0&&Ft.verticalTextBox){for(const za of _.writingModes)if(za===c.ao.vertical?(Yr=gn(),Mr=Yr):Yr=jr(),Yr&&Yr.placeable)break}else Yr=jr()},qo=lt.textAnchorOffsetStartIndex,Ks=lt.textAnchorOffsetEndIndex;if(Ks===qo){const jr=(gn,za)=>{const Tn=this.collisionIndex.placeCollisionBox(gn,fe,B,He,k,Te,we,A,ie.predicate,Ye,void 0,Pt);return Tn&&Tn.placeable&&(this.markUsedOrientation(_,za,lt),this.placedOrientations[lt.crossTileID]=za),Tn};Bo((()=>jr(ps,c.ao.horizontal)),(()=>{const gn=Ft.verticalTextBox;return _.allowVerticalPlacement&&lt.numVerticalGlyphVertices>0&&gn?jr(gn,c.ao.vertical):{box:null,offscreen:null}})),ya(Yr&&Yr.placeable)}else{let jr=c.aE[(hn=(kr=this.prevPlacement)===null||kr===void 0?void 0:kr.variableOffsets[lt.crossTileID])===null||hn===void 0?void 0:hn.anchor];const gn=(Tn,Fh,Nh)=>{const ju=Tn.x2-Tn.x1,vo=Tn.y2-Tn.y1,Ho=lt.textBoxScale,Un=ge&&xe==="never"?Fh:null;let En=null,$o=fe==="never"?1:2,ys="never";jr&&$o++;for(let gs=0;gs<$o;gs++){for(let Xi=qo;Xi<Ks;Xi++){const On=_.textAnchorOffsets.get(Xi);if(jr&&On.textAnchor!==jr)continue;const Ll=this.attemptAnchorPlacement(On,Tn,ju,vo,Ho,we,Te,B,He,k,ie,ys,lt,_,Nh,A,I,Un,Ye);if(Ll&&(En=Ll.placedGlyphBoxes,En&&En.placeable))return Wr=!0,Kr=Ll.shift,En}jr?jr=null:ys=fe}return d&&!En&&(En={box:this.collisionIndex.placeCollisionBox(ps,"always",B,He,k,Te,we,A,ie.predicate,Ye,void 0,Pt).box,offscreen:!1,placeable:!1,occluded:!1}),En};Bo((()=>gn(ps,Ft.iconBox,c.ao.horizontal)),(()=>{const Tn=Ft.verticalTextBox;return _.allowVerticalPlacement&&(!Yr||!Yr.placeable)&&lt.numVerticalGlyphVertices>0&&Tn?gn(Tn,Ft.verticalIconBox,c.ao.vertical):{box:null,occluded:!0,offscreen:null}})),Yr&&(Wr=Yr.placeable,rn=Yr.offscreen);const za=ya(Yr&&Yr.placeable);if(!Wr&&this.prevPlacement){const Tn=this.prevPlacement.variableOffsets[lt.crossTileID];Tn&&(this.variableOffsets[lt.crossTileID]=Tn,this.markUsedJustification(_,Tn.anchor,lt,za))}}}if(ea=Yr,Wr=ea&&ea.placeable,rn=ea&&ea.offscreen,lt.useRuntimeCollisionCircles){const ya=_.text.placedSymbolArray.get(lt.centerJustifiedTextSymbolIndex),Bo=c.ap(_.textSizeData,K,ya),qo=w.get("text-padding");$n=this.collisionIndex.placeCollisionCircles(fe,ya,_.lineVertexArray,_.glyphOffsetArray,Bo,k,N,d,Te,ie.predicate,lt.collisionCircleDiameter,qo,A,Ye),$n.circles.length&&$n.collisionDetected&&!d&&c.w("Collisions detected, but collision boxes are not shown"),Wr=me||$n.circles.length>0&&!$n.collisionDetected,rn=rn&&$n.offscreen}if(Ft.iconFeatureIndex&&(ni=Ft.iconFeatureIndex),Ft.iconBox){const ya=Bo=>this.collisionIndex.placeCollisionBox(Bo,xe,B,He,k,Te,we,I,ie.predicate,Ye,ge&&Kr?Kr:void 0,Pt);Mr&&Mr.placeable&&Ft.verticalIconBox?(ri=ya(Ft.verticalIconBox),Zr=ri.placeable):(ri=ya(Ft.iconBox),Zr=ri.placeable),rn=rn&&ri.offscreen}const Xs=ce||lt.numHorizontalGlyphVertices===0&&lt.numVerticalGlyphVertices===0,Lc=he||lt.numIconVertices===0;Xs||Lc?Lc?Xs||(Zr=Zr&&Wr):Wr=Zr&&Wr:Zr=Wr=Zr&&Wr;const ms=Zr&&ri.placeable;if(Wr&&ea.placeable&&this.collisionIndex.insertCollisionBox(ea.box,fe,w.get("text-ignore-placement"),_.bucketInstanceId,Mr&&Mr.placeable&&ds?ds:Qs,ie.ID),ms&&this.collisionIndex.insertCollisionBox(ri.box,xe,w.get("icon-ignore-placement"),_.bucketInstanceId,ni,ie.ID),$n&&Wr&&this.collisionIndex.insertCollisionCircles($n.circles,fe,w.get("text-ignore-placement"),_.bucketInstanceId,Qs,ie.ID),d&&this.storeCollisionData(_.bucketInstanceId,vr,Ft,ea,ri,$n),lt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(_.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[lt.crossTileID]=new Eo((Wr||Ze)&&!ea?.occluded,(Zr||je)&&!ri?.occluded,rn||_.justReloaded),u[lt.crossTileID]=!0};if(ke){if(t.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const lt=_.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Ft=lt.length-1;Ft>=0;--Ft){const vr=lt[Ft];xt(_.symbolInstances.get(vr),_.collisionArrays[vr],vr)}}else for(let lt=t.symbolInstanceStart;lt<t.symbolInstanceEnd;lt++)xt(_.symbolInstances.get(lt),_.collisionArrays[lt],lt);_.justReloaded=!1}storeCollisionData(t,u,d,_,w,A){if(d.textBox||d.iconBox){let I,k;this.collisionBoxArrays.has(t)?I=this.collisionBoxArrays.get(t):(I=new Map,this.collisionBoxArrays.set(t,I)),I.has(u)?k=I.get(u):(k={text:null,icon:null},I.set(u,k)),d.textBox&&(k.text=_.box),d.iconBox&&(k.icon=w.box)}if(A){let I=this.collisionCircleArrays[t];I===void 0&&(I=this.collisionCircleArrays[t]=[]);for(let k=0;k<A.circles.length;k+=4)I.push(A.circles[k+0]-Dn),I.push(A.circles[k+1]-Dn),I.push(A.circles[k+2]),I.push(A.collisionDetected?1:0)}}markUsedJustification(t,u,d,_){let w;w=_===c.ao.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[c.aG(u)];const A=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const I of A)I>=0&&(t.text.placedSymbolArray.get(I).crossTileID=w>=0&&I!==w?0:d.crossTileID)}markUsedOrientation(t,u,d){const _=u===c.ao.horizontal||u===c.ao.horizontalOnly?u:0,w=u===c.ao.vertical?u:0,A=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const I of A)t.text.placedSymbolArray.get(I).placedOrientation=_;d.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=w)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let d=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const _=u?u.symbolFadeChange(t):1,w=u?u.opacities:{},A=u?u.variableOffsets:{},I=u?u.placedOrientations:{};for(const k in this.placements){const N=this.placements[k],B=w[k];B?(this.opacities[k]=new qr(B,_,N.text,N.icon),d=d||N.text!==B.text.placed||N.icon!==B.icon.placed):(this.opacities[k]=new qr(null,_,N.text,N.icon,N.skipFade),d=d||N.text||N.icon)}for(const k in w){const N=w[k];if(!this.opacities[k]){const B=new qr(N,_,!1,!1);B.isHidden()||(this.opacities[k]=B,d=d||N.text.placed||N.icon.placed)}}for(const k in A)this.variableOffsets[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.variableOffsets[k]=A[k]);for(const k in I)this.placedOrientations[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.placedOrientations[k]=I[k]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=t:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:t)}updateLayerOpacities(t,u){const d={};for(const _ of u){const w=_.getBucket(t);w&&_.latestFeatureIndex&&t.id===w.layerIds[0]&&this.updateBucketOpacities(w,_.tileID,d,_.collisionBoxArray)}}updateBucketOpacities(t,u,d,_){t.hasTextData()&&(t.text.opacityVertexArray.clear(),t.text.hasVisibleVertices=!1),t.hasIconData()&&(t.icon.opacityVertexArray.clear(),t.icon.hasVisibleVertices=!1),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const w=t.layers[0],A=w.layout,I=new qr(null,0,!1,!1,!0),k=A.get("text-allow-overlap"),N=A.get("icon-allow-overlap"),B=w._unevaluatedLayout.hasValue("text-variable-anchor")||w._unevaluatedLayout.hasValue("text-variable-anchor-offset"),W=A.get("text-rotation-alignment")==="map",H=A.get("text-pitch-alignment")==="map",K=A.get("icon-text-fit")!=="none",ie=new qr(null,0,k&&(N||!t.hasIconData()||A.get("icon-optional")),N&&(k||!t.hasTextData()||A.get("text-optional")),!0);!t.collisionArrays&&_&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(_);const ce=(fe,me,xe)=>{for(let ye=0;ye<me/4;ye++)fe.opacityVertexArray.emplaceBack(xe);fe.hasVisibleVertices=fe.hasVisibleVertices||xe!==fu},he=this.collisionBoxArrays.get(t.bucketInstanceId);for(let fe=0;fe<t.symbolInstances.length;fe++){const me=t.symbolInstances.get(fe),{numHorizontalGlyphVertices:xe,numVerticalGlyphVertices:ye,crossTileID:we}=me;let Te=this.opacities[we];d[we]?Te=I:Te||(Te=ie,this.opacities[we]=Te),d[we]=!0;const ge=me.numIconVertices>0,ke=this.placedOrientations[me.crossTileID],Ze=ke===c.ao.vertical,je=ke===c.ao.horizontal||ke===c.ao.horizontalOnly;if(xe>0||ye>0){const Ye=hu(Te.text);ce(t.text,xe,Ze?fu:Ye),ce(t.text,ye,je?fu:Ye);const Pt=Te.text.isHidden();[me.rightJustifiedTextSymbolIndex,me.centerJustifiedTextSymbolIndex,me.leftJustifiedTextSymbolIndex].forEach((Ft=>{Ft>=0&&(t.text.placedSymbolArray.get(Ft).hidden=Pt||Ze?1:0)})),me.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(me.verticalPlacedTextSymbolIndex).hidden=Pt||je?1:0);const xt=this.variableOffsets[me.crossTileID];xt&&this.markUsedJustification(t,xt.anchor,me,ke);const lt=this.placedOrientations[me.crossTileID];lt&&(this.markUsedJustification(t,"left",me,lt),this.markUsedOrientation(t,lt,me))}if(ge){const Ye=hu(Te.icon),Pt=!(K&&me.verticalPlacedIconSymbolIndex&&Ze);me.placedIconSymbolIndex>=0&&(ce(t.icon,me.numIconVertices,Pt?Ye:fu),t.icon.placedSymbolArray.get(me.placedIconSymbolIndex).hidden=Te.icon.isHidden()),me.verticalPlacedIconSymbolIndex>=0&&(ce(t.icon,me.numVerticalIconVertices,Pt?fu:Ye),t.icon.placedSymbolArray.get(me.verticalPlacedIconSymbolIndex).hidden=Te.icon.isHidden())}const He=he&&he.has(fe)?he.get(fe):{text:null,icon:null};if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const Ye=t.collisionArrays[fe];if(Ye){let Pt=new c.P(0,0);if(Ye.textBox||Ye.verticalTextBox){let xt=!0;if(B){const lt=this.variableOffsets[we];lt?(Pt=Ti(lt.anchor,lt.width,lt.height,lt.textOffset,lt.textBoxScale),W&&Pt._rotate(H?-this.transform.bearingInRadians:this.transform.bearingInRadians)):xt=!1}if(Ye.textBox||Ye.verticalTextBox){let lt;Ye.textBox&&(lt=Ze),Ye.verticalTextBox&&(lt=je),sc(t.textCollisionBox.collisionVertexArray,Te.text.placed,!xt||lt,He.text,Pt.x,Pt.y)}}if(Ye.iconBox||Ye.verticalIconBox){const xt=!!(!je&&Ye.verticalIconBox);let lt;Ye.iconBox&&(lt=xt),Ye.verticalIconBox&&(lt=!xt),sc(t.iconCollisionBox.collisionVertexArray,Te.icon.placed,lt,He.icon,K?Pt.x:0,K?Pt.y:0)}}}}if(t.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);t.bucketInstanceId in this.collisionCircleArrays&&(t.collisionCircleArray=this.collisionCircleArrays[t.bucketInstanceId],delete this.collisionCircleArrays[t.bucketInstanceId])}symbolFadeChange(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,u){const d=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*d>t}setStale(){this.stale=!0}}function sc(b,t,u,d,_,w){d&&d.length!==0||(d=[0,0,0,0]);const A=d[0]-Dn,I=d[1]-Dn,k=d[2]-Dn,N=d[3]-Dn;b.emplaceBack(t?1:0,u?1:0,_||0,w||0,A,I),b.emplaceBack(t?1:0,u?1:0,_||0,w||0,k,I),b.emplaceBack(t?1:0,u?1:0,_||0,w||0,k,N),b.emplaceBack(t?1:0,u?1:0,_||0,w||0,A,N)}const Hd=Math.pow(2,25),gf=Math.pow(2,24),Sa=Math.pow(2,17),vf=Math.pow(2,16),cm=Math.pow(2,9),yh=Math.pow(2,8),$d=Math.pow(2,1);function hu(b){if(b.opacity===0&&!b.placed)return 0;if(b.opacity===1&&b.placed)return 4294967295;const t=b.placed?1:0,u=Math.floor(127*b.opacity);return u*Hd+t*gf+u*Sa+t*vf+u*cm+t*yh+u*$d+t}const fu=0;class pi{constructor(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,u,d,_,w){const A=this._bucketParts;for(;this._currentTileIndex<t.length;)if(u.getBucketParts(A,_,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,A.sort(((I,k)=>I.sortKey-k.sortKey)));this._currentPartIndex<A.length;)if(u.placeLayerBucketPart(A[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,w())return!0;return!1}}class lc{constructor(t,u,d,_,w,A,I,k){this.placement=new Ro(t,u,A,I,k),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=w,this._done=!1}isDone(){return this._done}continuePlacement(t,u,d){const _=z.now(),w=()=>!this._forceFullPlacement&&z.now()-_>2;for(;this._currentPlacementIndex>=0;){const A=u[t[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(A.type==="symbol"&&(!A.minzoom||A.minzoom<=I)&&(!A.maxzoom||A.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new pi(A)),this._inProgressLayer.continuePlacement(d[A.source],this.placement,this._showCollisionBoxes,A,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const fl=512/c.$/2;class uc{constructor(t,u,d){this.tileID=t,this.bucketInstanceId=d,this._symbolsByKey={};const _=new Map;for(let w=0;w<u.length;w++){const A=u.get(w),I=A.key,k=_.get(I);k?k.push(A):_.set(I,[A])}for(const[w,A]of _){const I={positions:A.map((k=>({x:Math.floor(k.anchorX*fl),y:Math.floor(k.anchorY*fl)}))),crossTileIDs:A.map((k=>k.crossTileID))};if(I.positions.length>128){const k=new c.aI(I.positions.length,16,Uint16Array);for(const{x:N,y:B}of I.positions)k.add(N,B);k.finish(),delete I.positions,I.index=k}this._symbolsByKey[w]=I}}getScaledCoordinates(t,u){const{x:d,y:_,z:w}=this.tileID.canonical,{x:A,y:I,z:k}=u.canonical,N=fl/Math.pow(2,k-w),B=(I*c.$+t.anchorY)*N,W=_*c.$*fl;return{x:Math.floor((A*c.$+t.anchorX)*N-d*c.$*fl),y:Math.floor(B-W)}}findMatches(t,u,d){const _=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let w=0;w<t.length;w++){const A=t.get(w);if(A.crossTileID)continue;const I=this._symbolsByKey[A.key];if(!I)continue;const k=this.getScaledCoordinates(A,u);if(I.index){const N=I.index.range(k.x-_,k.y-_,k.x+_,k.y+_).sort();for(const B of N){const W=I.crossTileIDs[B];if(!d[W]){d[W]=!0,A.crossTileID=W;break}}}else if(I.positions)for(let N=0;N<I.positions.length;N++){const B=I.positions[N],W=I.crossTileIDs[N];if(Math.abs(B.x-k.x)<=_&&Math.abs(B.y-k.y)<=_&&!d[W]){d[W]=!0,A.crossTileID=W;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:t})=>t))}}class Is{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Vd{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const u=Math.round((t-this.lng)/360);if(u!==0)for(const d in this.indexes){const _=this.indexes[d],w={};for(const A in _){const I=_[A];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+u),w[I.tileID.key]=I}this.indexes[d]=w}this.lng=t}addBucket(t,u,d){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let w=0;w<u.symbolInstances.length;w++)u.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const _=this.usedCrossTileIDs[t.overscaledZ];for(const w in this.indexes){const A=this.indexes[w];if(Number(w)>t.overscaledZ)for(const I in A){const k=A[I];k.tileID.isChildOf(t)&&k.findMatches(u.symbolInstances,t,_)}else{const I=A[t.scaledTo(Number(w)).key];I&&I.findMatches(u.symbolInstances,t,_)}}for(let w=0;w<u.symbolInstances.length;w++){const A=u.symbolInstances.get(w);A.crossTileID||(A.crossTileID=d.generate(),_[A.crossTileID]=!0)}return this.indexes[t.overscaledZ]===void 0&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new uc(t,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(t,u){for(const d of u.getCrossTileIDsLists())for(const _ of d)delete this.usedCrossTileIDs[t][_]}removeStaleBuckets(t){let u=!1;for(const d in this.indexes){const _=this.indexes[d];for(const w in _)t[_[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,_[w]),delete _[w],u=!0)}return u}}class dl{constructor(){this.layerIndexes={},this.crossTileIDs=new Is,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,u,d){let _=this.layerIndexes[t.id];_===void 0&&(_=this.layerIndexes[t.id]=new Vd);let w=!1;const A={};_.handleWrapJump(d);for(const I of u){const k=I.getBucket(t);k&&t.id===k.layerIds[0]&&(k.bucketInstanceId||(k.bucketInstanceId=++this.maxBucketInstanceId),_.addBucket(I.tileID,k,this.crossTileIDs)&&(w=!0),A[k.bucketInstanceId]=!0)}return _.removeStaleBuckets(A)&&(w=!0),w}pruneUnusedLayers(t){const u={};t.forEach((d=>{u[d]=!0}));for(const d in this.layerIndexes)u[d]||delete this.layerIndexes[d]}}var Io="void main() {fragColor=vec4(1.0);}";const ao={prelude:xr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:xr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:xr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:xr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:xr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:xr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:xr(Io,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:xr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:xr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:xr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:xr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:xr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:xr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:xr(Io,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:xr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:xr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:xr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:xr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:xr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:xr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:xr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:xr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:xr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:xr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:xr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:xr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:xr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:xr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:xr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:xr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:xr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:xr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:xr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:xr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:xr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:xr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function xr(b,t){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=t.match(/in ([\w]+) ([\w]+)/g),_=b.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=w?w.concat(_):_,I={};return{fragmentSource:b=b.replace(u,((k,N,B,W,H)=>(I[H]=!0,N==="define"?`
#ifndef HAS_UNIFORM_u_${H}
in ${B} ${W} ${H};
#else
uniform ${B} ${W} u_${H};
#endif
`:`
#ifdef HAS_UNIFORM_u_${H}
    ${B} ${W} ${H} = u_${H};
#endif
`))),vertexSource:t=t.replace(u,((k,N,B,W,H)=>{const K=W==="float"?"vec2":"vec4",ie=H.match(/color/)?"color":K;return I[H]?N==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
in ${B} ${K} a_${H};
out ${B} ${W} ${H};
#else
uniform ${B} ${W} u_${H};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = a_${H};
#else
    ${B} ${W} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = unpack_mix_${ie}(a_${H}, u_${H}_t);
#else
    ${B} ${W} ${H} = u_${H};
#endif
`:N==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
in ${B} ${K} a_${H};
#else
uniform ${B} ${W} u_${H};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${B} ${W} ${H} = a_${H};
#else
    ${B} ${W} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${B} ${W} ${H} = unpack_mix_${ie}(a_${H}, u_${H}_t);
#else
    ${B} ${W} ${H} = u_${H};
#endif
`})),staticAttributes:d,staticUniforms:A}}class ks{constructor(t,u,d){this.vertexBuffer=t,this.indexBuffer=u,this.segments=d}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var ko=c.aJ([{name:"a_pos",type:"Int16",components:2}]);const Jo="#define PROJECTION_MERCATOR",pl="mercator";class _r{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return pl}get shaderDefine(){return Jo}get shaderPreludeCode(){return ao.projectionMercator}get vertexShaderPreludeCode(){return ao.projectionMercator.vertexSource}get subdivisionGranularity(){return c.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(t){}getMeshFromTileID(t,u,d,_,w){if(this._cachedMesh)return this._cachedMesh;const A=new c.aL;A.emplaceBack(0,0),A.emplaceBack(c.$,0),A.emplaceBack(0,c.$),A.emplaceBack(c.$,c.$);const I=t.createVertexBuffer(A,ko.members),k=c.aM.simpleSegment(0,0,4,2),N=new c.aN;N.emplaceBack(1,0,2),N.emplaceBack(1,2,3);const B=t.createIndexBuffer(N);return this._cachedMesh=new ks(I,B,k),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(t){}}class es{constructor(t=0,u=0,d=0,_=0){if(isNaN(t)||t<0||isNaN(u)||u<0||isNaN(d)||d<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=u,this.left=d,this.right=_}interpolate(t,u,d){return u.top!=null&&t.top!=null&&(this.top=c.C.number(t.top,u.top,d)),u.bottom!=null&&t.bottom!=null&&(this.bottom=c.C.number(t.bottom,u.bottom,d)),u.left!=null&&t.left!=null&&(this.left=c.C.number(t.left,u.left,d)),u.right!=null&&t.right!=null&&(this.right=c.C.number(t.right,u.right,d)),this}getCenter(t,u){const d=c.ah((this.left+t-this.right)/2,0,t),_=c.ah((this.top+u-this.bottom)/2,0,u);return new c.P(d,_)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new es(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function du(b,t){if(!b.renderWorldCopies||b.lngRange)return;const u=t.lng-b.center.lng;t.lng+=u>180?-360:u<-180?360:0}function ts(b){return Math.max(0,Math.floor(b))}class Kn{constructor(t,u,d,_,w,A){this._callbacks=t,this._tileSize=512,this._renderWorldCopies=A===void 0||!!A,this._minZoom=u||0,this._maxZoom=d||22,this._minPitch=_??0,this._maxPitch=w??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new c.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ts(this._zoom),this._scale=c.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new es,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(t,u,d){this._latRange=t.latRange,this._lngRange=t.lngRange,this._width=t.width,this._height=t.height,this._center=t.center,this._elevation=t.elevation,this._minElevationForCurrentTile=t.minElevationForCurrentTile,this._zoom=t.zoom,this._tileZoom=ts(this._zoom),this._scale=c.af(this._zoom),this._bearingInRadians=t.bearingInRadians,this._fovInRadians=t.fovInRadians,this._pitchInRadians=t.pitchInRadians,this._rollInRadians=t.rollInRadians,this._unmodified=t.unmodified,this._edgeInsets=new es(t.padding.top,t.padding.bottom,t.padding.left,t.padding.right),this._minZoom=t.minZoom,this._maxZoom=t.maxZoom,this._minPitch=t.minPitch,this._maxPitch=t.maxPitch,this._renderWorldCopies=t.renderWorldCopies,this._cameraToCenterDistance=t.cameraToCenterDistance,this._nearZ=t.nearZ,this._farZ=t.farZ,this._autoCalculateNearFarZ=!d&&t.autoCalculateNearFarZ,u&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(t){this._minElevationForCurrentTile=t}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(t){this._minZoom!==t&&(this._minZoom=t,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(t){this._minPitch!==t&&(this._minPitch=t,this.setPitch(Math.max(this.pitch,t)))}get maxPitch(){return this._maxPitch}setMaxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.setPitch(Math.min(this.pitch,t)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(t){t===void 0?t=!0:t===null&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(t){const u=c.aO(t,-180,180)*Math.PI/180;var d,_,w,A,I,k,N,B,W;this._bearingInRadians!==u&&(this._unmodified=!1,this._bearingInRadians=u,this._calcMatrices(),this._rotationMatrix=M(),d=this._rotationMatrix,w=-this._bearingInRadians,A=(_=this._rotationMatrix)[0],I=_[1],k=_[2],N=_[3],B=Math.sin(w),W=Math.cos(w),d[0]=A*W+k*B,d[1]=I*W+N*B,d[2]=A*-B+k*W,d[3]=I*-B+N*W)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(t){const u=c.ah(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==u&&(this._unmodified=!1,this._pitchInRadians=u,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(t){const u=t/180*Math.PI;this._rollInRadians!==u&&(this._unmodified=!1,this._rollInRadians=u,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return c.aP(this._fovInRadians)}setFov(t){t=c.ah(t,.1,150),this.fov!==t&&(this._unmodified=!1,this._fovInRadians=c.ae(t),this._calcMatrices())}get zoom(){return this._zoom}setZoom(t){const u=this.getConstrained(this._center,t).zoom;this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this._tileZoom=Math.max(0,Math.floor(u)),this._scale=c.af(u),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(t){t!==this._elevation&&(this._elevation=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(t,u){this._autoCalculateNearFarZ=!1,this._nearZ=t,this._farZ=u,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,u,d){this._unmodified=!1,this._edgeInsets.interpolate(t,u,d),this._constrain(),this._calcMatrices()}resize(t,u,d=!0){this._width=t,this._height=u,d&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new $t([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(t){t?(this._lngRange=[t.getWest(),t.getEast()],this._latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-c.ai,c.ai])}getConstrained(t,u){return this._callbacks.getConstrained(t,u)}getCameraQueryGeometry(t,u){if(u.length===1)return[u[0],t];{const{minX:d,minY:_,maxX:w,maxY:A}=c.a2.fromPoints(u).extend(t);return[new c.P(d,_),new c.P(w,_),new c.P(w,A),new c.P(d,A),new c.P(d,_)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const t=this._unmodified,{center:u,zoom:d}=this.getConstrained(this.center,this.zoom);this.setCenter(u),this.setZoom(d),this._unmodified=t,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let t=c.ag(new Float64Array(16));c.N(t,t,[this._width/2,-this._height/2,1]),c.M(t,t,[1,-1,0]),this._clipSpaceToPixelsMatrix=t,t=c.ag(new Float64Array(16)),c.N(t,t,[1,-1,1]),c.M(t,t,[-1,-1,0]),c.N(t,t,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=t,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(t,u,d,_){const w=d!==void 0?d:this.bearing,A=_=_!==void 0?_:this.pitch,I=c.a1.fromLngLat(t,u),k=-Math.cos(c.ae(A)),N=Math.sin(c.ae(A)),B=N*Math.sin(c.ae(w)),W=-N*Math.cos(c.ae(w));let H=this.elevation;const K=u-H;let ie;k*K>=0||Math.abs(k)<.1?(ie=1e4,H=u+ie*k):ie=-K/k;let ce,he,fe=c.aQ(1,I.y),me=0;do{if(me+=1,me>10)break;he=ie/fe,ce=new c.a1(I.x+B*he,I.y+W*he),fe=1/ce.meterInMercatorCoordinateUnits()}while(Math.abs(ie-he*fe)>1e-12);return{center:ce.toLngLat(),elevation:H,zoom:c.ak(this.height/2/Math.tan(this.fovInRadians/2)/he/this.tileSize)}}recalculateZoomAndCenter(t){if(this.elevation-t==0)return;const u=c.aj(1,this.center.lat)*this.worldSize,d=this.cameraToCenterDistance/u,_=c.a1.fromLngLat(this.center,this.elevation),w=Ve(this.center,this.elevation,this.pitch,this.bearing,d);this._elevation=t;const A=this.calculateCenterFromCameraLngLatAlt(w.toLngLat(),c.aQ(w.z,_.y),this.bearing,this.pitch);this._elevation=A.elevation,this._center=A.center,this.setZoom(A.zoom)}getCameraPoint(){const t=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(t*Math.sin(this.rollInRadians),t*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const t=c.aj(1,this.center.lat)*this.worldSize;return Ve(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/t).toLngLat()}getMercatorTileCoordinates(t){if(!t)return[0,0,1,1];const u=t.canonical.z>=0?1<<t.canonical.z:Math.pow(2,t.canonical.z);return[t.canonical.x/u,t.canonical.y/u,1/u/c.$,1/u/c.$]}}class na{constructor(t,u){this.min=t,this.max=u,this.center=c.aR([],c.aS([],this.min,this.max),.5)}quadrant(t){const u=[t%2==0,t<2],d=c.aT(this.min),_=c.aT(this.max);for(let w=0;w<u.length;w++)d[w]=u[w]?this.min[w]:this.center[w],_[w]=u[w]?this.center[w]:this.max[w];return _[2]=this.max[2],new na(d,_)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersectsFrustum(t){let u=!0;for(let d=0;d<t.planes.length;d++){const _=this.intersectsPlane(t.planes[d]);if(_===0)return 0;_===1&&(u=!1)}return u?2:t.aabb.min[0]>this.max[0]||t.aabb.min[1]>this.max[1]||t.aabb.min[2]>this.max[2]||t.aabb.max[0]<this.min[0]||t.aabb.max[1]<this.min[1]||t.aabb.max[2]<this.min[2]?0:1}intersectsPlane(t){let u=t[3],d=t[3];for(let _=0;_<3;_++)t[_]>0?(u+=t[_]*this.min[_],d+=t[_]*this.max[_]):(d+=t[_]*this.min[_],u+=t[_]*this.max[_]);return u>=0?2:d<0?0:1}}class wa{distanceToTile2d(t,u,d,_){const w=_.distanceX([t,u]),A=_.distanceY([t,u]);return Math.hypot(w,A)}getWrap(t,u,d){return d}getTileBoundingVolume(t,u,d,_){var w,A;let I=0,k=0;if(_?.terrain){const B=new c.Z(t.z,u,t.z,t.x,t.y),W=_.terrain.getMinMaxElevation(B);I=(w=W.minElevation)!==null&&w!==void 0?w:Math.min(0,d),k=(A=W.maxElevation)!==null&&A!==void 0?A:Math.max(0,d)}const N=1<<t.z;return new na([u+t.x/N,t.y/N,I],[u+(t.x+1)/N,(t.y+1)/N,k])}allowVariableZoom(t,u){const d=t.fov*(Math.abs(Math.cos(t.rollInRadians))*t.height+Math.abs(Math.sin(t.rollInRadians))*t.width)/t.height,_=c.ah(78.5-d/2,0,60);return!!u.terrain||t.pitch>_}allowWorldCopies(){return!0}prepareNextFrame(){}}class Bn{constructor(t,u,d){this.points=t,this.planes=u,this.aabb=d}static fromInvProjectionMatrix(t,u=1,d=0,_,w){const A=w?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],I=Math.pow(2,d),k=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((H=>(function(K,ie,ce,he){const fe=c.aw([],K,ie),me=1/fe[3]/ce*he;return c.aY(fe,fe,[me,me,1/fe[3],me])})(H,t,u,I)));_&&(function(H,K,ie,ce){const he=ce?4:0,fe=ce?0:4;let me=0;const xe=[],ye=[];for(let ge=0;ge<4;ge++){const ke=c.aU([],H[ge+fe],H[ge+he]),Ze=c.aZ(ke);c.aR(ke,ke,1/Ze),xe.push(Ze),ye.push(ke)}for(let ge=0;ge<4;ge++){const ke=c.a_(H[ge+he],ye[ge],ie);me=ke!==null&&ke>=0?Math.max(me,ke):Math.max(me,xe[ge])}const we=(function(ge,ke){const Ze=c.aU([],ge[ke[0]],ge[ke[1]]),je=c.aU([],ge[ke[2]],ge[ke[1]]),He=[0,0,0,0];return c.aV(He,c.aW([],Ze,je)),He[3]=-c.aX(He,ge[ke[0]]),He})(H,K),Te=(function(ge,ke){const Ze=c.a$(ge),je=c.b0([],ge,1/Ze),He=c.aU([],ke,c.aR([],je,c.aX(ke,je))),Ye=c.a$(He);if(Ye>0){const Pt=Math.sqrt(1-je[3]*je[3]),xt=c.aR([],je,-je[3]),lt=c.aS([],xt,c.aR([],He,Pt/Ye));return c.b1(ke,lt)}return null})(ie,we);if(Te!==null){const ge=Te/c.aX(ye[0],we);me=Math.min(me,ge)}for(let ge=0;ge<4;ge++){const ke=Math.min(me,xe[ge]);H[ge+fe]=[H[ge+he][0]+ye[ge][0]*ke,H[ge+he][1]+ye[ge][1]*ke,H[ge+he][2]+ye[ge][2]*ke,1]}})(k,A[0],_,w);const N=A.map((H=>{const K=c.aU([],k[H[0]],k[H[1]]),ie=c.aU([],k[H[2]],k[H[1]]),ce=c.aV([],c.aW([],K,ie)),he=-c.aX(ce,k[H[1]]);return ce.concat(he)})),B=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],W=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const H of k)for(let K=0;K<3;K++)B[K]=Math.min(B[K],H[K]),W[K]=Math.max(W[K],H[K]);return new Bn(k,N,new na(B,W))}}class Nr{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,u,d){return this._helper.interpolatePadding(t,u,d)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,u,d=!0){this._helper.resize(t,u,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}overrideNearFarZ(t,u){this._helper.overrideNearFarZ(t,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t,u){}constructor(t,u,d,_,w){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Kn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(A,I)=>this.getConstrained(A,I)},t,u,d,_,w),this._coveringTilesDetailsProvider=new wa}clone(){const t=new Nr;return t.apply(this),t}apply(t,u,d){this._helper.apply(t,u,d)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(t){const u=[new c.b2(0,t)];if(this._helper._renderWorldCopies){const d=this.screenPointToMercatorCoordinate(new c.P(0,0)),_=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,0)),w=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,this._helper._height)),A=this.screenPointToMercatorCoordinate(new c.P(0,this._helper._height)),I=Math.floor(Math.min(d.x,_.x,w.x,A.x)),k=Math.floor(Math.max(d.x,_.x,w.x,A.x)),N=1;for(let B=I-N;B<=k+N;B++)B!==0&&u.push(new c.b2(B,t))}return u}getCameraFrustum(){return Bn.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){const u=this.screenPointToLocation(this.centerPoint,t),d=t?t.getElevationForLngLatZoom(u,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(d)}setLocationAtPoint(t,u){const d=c.aj(this.elevation,this.center.lat),_=this.screenPointToMercatorCoordinateAtZ(u,d),w=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,d),A=c.a1.fromLngLat(t),I=new c.a1(A.x-(_.x-w.x),A.y-(_.y-w.y));this.setCenter(I?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(t,u){return u?this.coordinatePoint(c.a1.fromLngLat(t),u.getElevationForLngLatZoom(t,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(c.a1.fromLngLat(t))}screenPointToLocation(t,u){var d;return(d=this.screenPointToMercatorCoordinate(t,u))===null||d===void 0?void 0:d.toLngLat()}screenPointToMercatorCoordinate(t,u){if(u){const d=u.pointCoordinate(t);if(d!=null)return d}return this.screenPointToMercatorCoordinateAtZ(t)}screenPointToMercatorCoordinateAtZ(t,u){const d=u||0,_=[t.x,t.y,0,1],w=[t.x,t.y,1,1];c.aw(_,_,this._pixelMatrixInverse),c.aw(w,w,this._pixelMatrixInverse);const A=_[3],I=w[3],k=_[1]/A,N=w[1]/I,B=_[2]/A,W=w[2]/I,H=B===W?0:(d-B)/(W-B);return new c.a1(c.C.number(_[0]/A,w[0]/I,H)/this.worldSize,c.C.number(k,N,H)/this.worldSize,d)}coordinatePoint(t,u=0,d=this._pixelMatrix){const _=[t.x*this.worldSize,t.y*this.worldSize,u,1];return c.aw(_,_,d),new c.P(_[0]/_[3],_[1]/_[3])}getBounds(){const t=Math.max(0,this._helper._height/2-Pe(this));return new $t().extend(this.screenPointToLocation(new c.P(0,t))).extend(this.screenPointToLocation(new c.P(this._helper._width,t))).extend(this.screenPointToLocation(new c.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new c.P(0,this._helper._height)))}isPointOnMapSurface(t,u){return u?u.pointCoordinate(t)!=null:t.y>this.height/2-Pe(this)}calculatePosMatrix(t,u=!1,d){var _;const w=(_=t.key)!==null&&_!==void 0?_:c.b3(t.wrap,t.canonical.z,t.canonical.z,t.canonical.x,t.canonical.y),A=u?this._alignedPosMatrixCache:this._posMatrixCache;if(A.has(w)){const N=A.get(w);return d?N.f32:N.f64}const I=Ie(t,this.worldSize);c.O(I,u?this._alignedProjMatrix:this._viewProjMatrix,I);const k={f64:I,f32:new Float32Array(I)};return A.set(w,k),d?k.f32:k.f64}calculateFogMatrix(t){const u=t.key,d=this._fogMatrixCacheF32;if(d.has(u))return d.get(u);const _=Ie(t,this.worldSize);return c.O(_,this._fogMatrix,_),d.set(u,new Float32Array(_)),d.get(u)}getConstrained(t,u){u=c.ah(+u,this.minZoom,this.maxZoom);const d={center:new c.S(t.lng,t.lat),zoom:u};let _=this._helper._lngRange;if(!this._helper._renderWorldCopies&&_===null){const xe=179.9999999999;_=[-xe,xe]}const w=this.tileSize*c.af(d.zoom);let A=0,I=w,k=0,N=w,B=0,W=0;const{x:H,y:K}=this.size;if(this._helper._latRange){const xe=this._helper._latRange;A=c.U(xe[1])*w,I=c.U(xe[0])*w,I-A<K&&(B=K/(I-A))}_&&(k=c.aO(c.V(_[0])*w,0,w),N=c.aO(c.V(_[1])*w,0,w),N<k&&(N+=w),N-k<H&&(W=H/(N-k)));const{x:ie,y:ce}=le(w,t);let he,fe;const me=Math.max(W||0,B||0);if(me){const xe=new c.P(W?(N+k)/2:ie,B?(I+A)/2:ce);return d.center=be(w,xe).wrap(),d.zoom+=c.ak(me),d}if(this._helper._latRange){const xe=K/2;ce-xe<A&&(fe=A+xe),ce+xe>I&&(fe=I-xe)}if(_){const xe=(k+N)/2;let ye=ie;this._helper._renderWorldCopies&&(ye=c.aO(ie,xe-w/2,xe+w/2));const we=H/2;ye-we<k&&(he=k+we),ye+we>N&&(he=N-we)}if(he!==void 0||fe!==void 0){const xe=new c.P(he??ie,fe??ce);d.center=be(w,xe).wrap()}return d}calculateCenterFromCameraLngLatAlt(t,u,d,_){return this._helper.calculateCenterFromCameraLngLatAlt(t,u,d,_)}_calculateNearFarZIfNeeded(t,u,d){if(!this._helper.autoCalculateNearFarZ)return;const _=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),w=t-_*this._helper._pixelPerMeter/Math.cos(u),A=_<0?w:t,I=Math.PI/2+this.pitchInRadians,k=c.ae(this.fov)*(Math.abs(Math.cos(c.ae(this.roll)))*this.height+Math.abs(Math.sin(c.ae(this.roll)))*this.width)/this.height*(.5+d.y/this.height),N=Math.sin(k)*A/Math.sin(c.ah(Math.PI-I-k,.01,Math.PI-.01)),B=Pe(this),W=Math.atan(B/this._helper.cameraToCenterDistance),H=c.ae(.75),K=W>H?2*W*(.5+d.y/(2*B)):H,ie=Math.sin(K)*A/Math.sin(c.ah(Math.PI-I-K,.01,Math.PI-.01)),ce=Math.min(N,ie);this._helper._farZ=1.01*(Math.cos(Math.PI/2-u)*ce+A),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const t=this.centerOffset,u=le(this.worldSize,this.center),d=u.x,_=u.y;this._helper._pixelPerMeter=c.aj(1,this.center.lat)*this.worldSize;const w=c.ae(Math.min(this.pitch,ne)),A=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(w));let I;this._calculateNearFarZIfNeeded(A,w,t),I=new Float64Array(16),c.b4(I,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),c.aq(this._invProjMatrix,I),I[8]=2*-t.x/this._helper._width,I[9]=2*t.y/this._helper._height,this._projectionMatrix=c.b5(I),c.N(I,I,[1,-1,1]),c.M(I,I,[0,0,-this._helper.cameraToCenterDistance]),c.b6(I,I,-this.rollInRadians),c.b7(I,I,this.pitchInRadians),c.b6(I,I,-this.bearingInRadians),c.M(I,I,[-d,-_,0]),this._mercatorMatrix=c.N([],I,[this.worldSize,this.worldSize,this.worldSize]),c.N(I,I,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=c.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,I),c.M(I,I,[0,0,-this.elevation]),this._viewProjMatrix=I,this._invViewProjMatrix=c.aq([],I);const k=[0,0,-1,1];c.aw(k,k,this._invViewProjMatrix),this._cameraPosition=[k[0]/k[3],k[1]/k[3],k[2]/k[3]],this._fogMatrix=new Float64Array(16),c.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,A,this._helper._farZ),this._fogMatrix[8]=2*-t.x/this.width,this._fogMatrix[9]=2*t.y/this.height,c.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),c.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),c.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),c.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),c.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),c.M(this._fogMatrix,this._fogMatrix,[-d,-_,0]),c.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),c.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=c.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,I);const N=this._helper._width%2/2,B=this._helper._height%2/2,W=Math.cos(this.bearingInRadians),H=Math.sin(-this.bearingInRadians),K=d-Math.round(d)+W*N+H*B,ie=_-Math.round(_)+W*B+H*N,ce=new Float64Array(I);if(c.M(ce,ce,[K>.5?K-1:K,ie>.5?ie-1:ie,0]),this._alignedProjMatrix=ce,I=c.aq(new Float64Array(16),this._pixelMatrix),!I)throw new Error("failed to invert matrix");this._pixelMatrixInverse=I,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const t=this.screenPointToMercatorCoordinate(new c.P(0,0)),u=[t.x*this.worldSize,t.y*this.worldSize,0,1];return c.aw(u,u,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const t=c.aj(1,this.center.lat)*this.worldSize;return Ve(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/t).toLngLat()}lngLatToCameraDepth(t,u){const d=c.a1.fromLngLat(t),_=[d.x*this.worldSize,d.y*this.worldSize,u,1];return c.aw(_,_,this._viewProjMatrix),_[2]/_[3]}getProjectionData(t){const{overscaledTileID:u,aligned:d,applyTerrainMatrix:_}=t,w=this._helper.getMercatorTileCoordinates(u),A=u?this.calculatePosMatrix(u,d,!0):null;let I;return I=u&&u.terrainRttPosMatrix32f&&_?u.terrainRttPosMatrix32f:A||c.b8(),{mainMatrix:I,tileMercatorCoords:w,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:I}}isLocationOccluded(t){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(t,u,d){return 1}transformLightDirection(t){return c.aT(t)}getRayDirectionFromPixel(t){throw new Error("Not implemented.")}projectTileCoordinates(t,u,d,_){const w=this.calculatePosMatrix(d);let A;_?(A=[t,u,_(t,u),1],c.aw(A,A,w)):(A=[t,u,0,1],cl(A,A,w));const I=A[3];return{point:new c.P(A[0]/I,A[1]/I),signedDistanceFromCamera:I,isOccluded:!1}}populateCache(t){for(const u of t)this.calculatePosMatrix(u)}getMatrixForModel(t,u){const d=c.a1.fromLngLat(t,u),_=d.meterInMercatorCoordinateUnits(),w=c.b9();return c.M(w,w,[d.x,d.y,d.z]),c.b6(w,w,Math.PI),c.b7(w,w,Math.PI/2),c.N(w,w,[-_,_,_]),w}getProjectionDataForCustomLayer(t=!0){const u=new c.Z(0,0,0,0,0),d=this.getProjectionData({overscaledTileID:u,applyGlobeMatrix:t}),_=Ie(u,this.worldSize);c.O(_,this._viewProjMatrix,_),d.tileMercatorCoords=[0,0,1,1];const w=[c.$,c.$,this.worldSize/this._helper.pixelsPerMeter],A=c.ba();return c.N(A,_,w),d.fallbackMatrix=A,d.mainMatrix=A,d}getFastPathSimpleProjectionMatrix(t){return this.calculatePosMatrix(t)}}function Uo(){c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Pa(b){if(b.useSlerp)if(b.k<1){const t=c.bb(b.startEulerAngles.roll,b.startEulerAngles.pitch,b.startEulerAngles.bearing),u=c.bb(b.endEulerAngles.roll,b.endEulerAngles.pitch,b.endEulerAngles.bearing),d=new Float64Array(4);c.bc(d,t,u,b.k);const _=c.bd(d);b.tr.setRoll(_.roll),b.tr.setPitch(_.pitch),b.tr.setBearing(_.bearing)}else b.tr.setRoll(b.endEulerAngles.roll),b.tr.setPitch(b.endEulerAngles.pitch),b.tr.setBearing(b.endEulerAngles.bearing);else b.tr.setRoll(c.C.number(b.startEulerAngles.roll,b.endEulerAngles.roll,b.k)),b.tr.setPitch(c.C.number(b.startEulerAngles.pitch,b.endEulerAngles.pitch,b.k)),b.tr.setBearing(c.C.number(b.startEulerAngles.bearing,b.endEulerAngles.bearing,b.k))}function Aa(b,t,u,d,_){const w=_.padding,A=le(_.worldSize,u.getNorthWest()),I=le(_.worldSize,u.getNorthEast()),k=le(_.worldSize,u.getSouthEast()),N=le(_.worldSize,u.getSouthWest()),B=c.ae(-d),W=A.rotate(B),H=I.rotate(B),K=k.rotate(B),ie=N.rotate(B),ce=new c.P(Math.max(W.x,H.x,ie.x,K.x),Math.max(W.y,H.y,ie.y,K.y)),he=new c.P(Math.min(W.x,H.x,ie.x,K.x),Math.min(W.y,H.y,ie.y,K.y)),fe=ce.sub(he),me=(_.width-(w.left+w.right+t.left+t.right))/fe.x,xe=(_.height-(w.top+w.bottom+t.top+t.bottom))/fe.y;if(xe<0||me<0)return void Uo();const ye=Math.min(c.ak(_.scale*Math.min(me,xe)),b.maxZoom),we=c.P.convert(b.offset),Te=new c.P((t.left-t.right)/2,(t.top-t.bottom)/2).rotate(c.ae(d)),ge=we.add(Te).mult(_.scale/c.af(ye));return{center:be(_.worldSize,A.add(k).div(2).sub(ge)),zoom:ye,bearing:d}}class Mn{get useGlobeControls(){return!1}handlePanInertia(t,u){const d=t.mag(),_=Math.abs(Pe(u));return{easingOffset:t.mult(Math.min(.75*_/d,1)),easingCenter:u.center}}handleMapControlsRollPitchBearingZoom(t,u){t.bearingDelta&&u.setBearing(u.bearing+t.bearingDelta),t.pitchDelta&&u.setPitch(u.pitch+t.pitchDelta),t.rollDelta&&u.setRoll(u.roll+t.rollDelta),t.zoomDelta&&u.setZoom(u.zoom+t.zoomDelta)}handleMapControlsPan(t,u,d){t.around.distSqr(u.centerPoint)<.01||u.setLocationAtPoint(d,t.around)}cameraForBoxAndBearing(t,u,d,_,w){return Aa(t,u,d,_,w)}handleJumpToCenterZoom(t,u){t.zoom!==(u.zoom!==void 0?+u.zoom:t.zoom)&&t.setZoom(+u.zoom),u.center!==void 0&&t.setCenter(c.S.convert(u.center))}handleEaseTo(t,u){const d=t.zoom,_=t.padding,w={roll:t.roll,pitch:t.pitch,bearing:t.bearing},A={roll:u.roll===void 0?t.roll:u.roll,pitch:u.pitch===void 0?t.pitch:u.pitch,bearing:u.bearing===void 0?t.bearing:u.bearing},I=u.zoom!==void 0,k=!t.isPaddingEqual(u.padding);let N=!1;const B=I?+u.zoom:t.zoom;let W=t.centerPoint.add(u.offsetAsPoint);const H=t.screenPointToLocation(W),{center:K,zoom:ie}=t.getConstrained(c.S.convert(u.center||H),B??d);du(t,K);const ce=le(t.worldSize,H),he=le(t.worldSize,K).sub(ce),fe=c.af(ie-d);return N=ie!==d,{easeFunc:me=>{if(N&&t.setZoom(c.C.number(d,ie,me)),c.be(w,A)||Pa({startEulerAngles:w,endEulerAngles:A,tr:t,k:me,useSlerp:w.roll!=A.roll}),k&&(t.interpolatePadding(_,u.padding,me),W=t.centerPoint.add(u.offsetAsPoint)),u.around)t.setLocationAtPoint(u.around,u.aroundPoint);else{const xe=c.af(t.zoom-d),ye=ie>d?Math.min(2,fe):Math.max(.5,fe),we=Math.pow(ye,1-me),Te=be(t.worldSize,ce.add(he.mult(me*we)).mult(xe));t.setLocationAtPoint(t.renderWorldCopies?Te.wrap():Te,W)}},isZooming:N,elevationCenter:K}}handleFlyTo(t,u){const d=u.zoom!==void 0,_=t.zoom,w=t.getConstrained(c.S.convert(u.center||u.locationAtOffset),d?+u.zoom:_),A=w.center,I=w.zoom;du(t,A);const k=le(t.worldSize,u.locationAtOffset),N=le(t.worldSize,A).sub(k),B=N.mag(),W=c.af(I-_);let H;if(u.minZoom!==void 0){const K=Math.min(+u.minZoom,_,I),ie=t.getConstrained(A,K).zoom;H=c.af(ie-_)}return{easeFunc:(K,ie,ce,he)=>{t.setZoom(K===1?I:_+c.ak(ie));const fe=K===1?A:be(t.worldSize,k.add(N.mult(ce)).mult(ie));t.setLocationAtPoint(t.renderWorldCopies?fe.wrap():fe,he)},scaleOfZoom:W,targetCenter:A,scaleOfMinZoom:H,pixelPathLength:B}}}class Xr{constructor(t,u,d){this.blendFunction=t,this.blendColor=u,this.mask=d}}Xr.Replace=[1,0],Xr.disabled=new Xr(Xr.Replace,c.bf.transparent,[!1,!1,!1,!1]),Xr.unblended=new Xr(Xr.Replace,c.bf.transparent,[!0,!0,!0,!0]),Xr.alphaBlended=new Xr([1,771],c.bf.transparent,[!0,!0,!0,!0]);const Oo=2305;class er{constructor(t,u,d){this.enable=t,this.mode=u,this.frontFace=d}}er.disabled=new er(!1,1029,Oo),er.backCCW=new er(!0,1029,Oo),er.frontCCW=new er(!0,1028,Oo);class lr{constructor(t,u,d){this.func=t,this.mask=u,this.range=d}}lr.ReadOnly=!1,lr.ReadWrite=!0,lr.disabled=new lr(519,lr.ReadOnly,[0,1]);const Zi=7680;class Dr{constructor(t,u,d,_,w,A){this.test=t,this.ref=u,this.mask=d,this.fail=_,this.depthFail=w,this.pass=A}}Dr.disabled=new Dr({func:519,mask:0},0,0,Zi,Zi,Zi);const un=new WeakMap;function ka(b){var t;if(un.has(b))return un.get(b);{const u=(t=b.getParameter(b.VERSION))===null||t===void 0?void 0:t.startsWith("WebGL 2.0");return un.set(b,u),u}}class Ei{get awaitingQuery(){return!!this._readbackQueue}constructor(t){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=t;const u=t.context,d=u.gl;this._texFormat=d.RGBA,this._texType=d.UNSIGNED_BYTE;const _=new c.aL;_.emplaceBack(-1,-1),_.emplaceBack(2,-1),_.emplaceBack(-1,2);const w=new c.aN;w.emplaceBack(0,1,2),this._fullscreenTriangle=new ks(u.createVertexBuffer(_,ko.members),u.createIndexBuffer(w),c.aM.simpleSegment(0,0,_.length,w.length)),this._resultBuffer=new Uint8Array(4),u.activeTexture.set(d.TEXTURE1);const A=d.createTexture();d.bindTexture(d.TEXTURE_2D,A),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texImage2D(d.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=u.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(A),ka(d)&&(this._pbo=d.createBuffer(),d.bindBuffer(d.PIXEL_PACK_BUFFER,this._pbo),d.bufferData(d.PIXEL_PACK_BUFFER,4,d.STREAM_READ),d.bindBuffer(d.PIXEL_PACK_BUFFER,null))}destroy(){const t=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),t.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(t,u){const d=this._updateCount;return this._readbackQueue?d>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():d>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(t,u),this._updateCount++,this._measuredError}_bindFramebuffer(){const t=this._cachedRenderContext.context,u=t.gl;t.activeTexture.set(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,this._fbo.colorAttachment.get()),t.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(t,u){const d=this._cachedRenderContext.context,_=d.gl;if(this._bindFramebuffer(),d.viewport.set([0,0,this._texWidth,this._texHeight]),d.clear({color:c.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(d,_.TRIANGLES,lr.disabled,Dr.disabled,Xr.unblended,er.disabled,((w,A)=>({u_input:w,u_output_expected:A}))(t,u),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&ka(_)){_.bindBuffer(_.PIXEL_PACK_BUFFER,this._pbo),_.readBuffer(_.COLOR_ATTACHMENT0),_.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),_.bindBuffer(_.PIXEL_PACK_BUFFER,null);const w=_.fenceSync(_.SYNC_GPU_COMMANDS_COMPLETE,0);_.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:w}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const t=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&ka(t)){const u=t.clientWaitSync(this._readbackQueue.sync,0,0);if(u===t.WAIT_FAILED)return c.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(u===t.TIMEOUT_EXPIRED)return;t.bindBuffer(t.PIXEL_PACK_BUFFER,this._pbo),t.getBufferSubData(t.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),t.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Ei._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(t){let u=0;return u+=t[0]/256,u+=t[1]/65536,u+=t[2]/16777216,t[3]<127&&(u=-u),u/128}}const Us=c.$/128;function _f(b,t){const u=b.granularity!==void 0?Math.max(b.granularity,1):1,d=u+(b.generateBorders?2:0),_=u+(b.extendToNorthPole||b.generateBorders?1:0)+(b.extendToSouthPole||b.generateBorders?1:0),w=d+1,A=_+1,I=b.generateBorders?-1:0,k=b.generateBorders||b.extendToNorthPole?-1:0,N=u+(b.generateBorders?1:0),B=u+(b.generateBorders||b.extendToSouthPole?1:0),W=w*A,H=d*_*6,K=w*A>65536;if(K&&t==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ie=K||t==="32bit",ce=new Int16Array(2*W);let he=0;for(let xe=k;xe<=B;xe++)for(let ye=I;ye<=N;ye++){let we=ye/u*c.$;ye===-1&&(we=-Us),ye===u+1&&(we=c.$+Us);let Te=xe/u*c.$;xe===-1&&(Te=b.extendToNorthPole?c.bh:-Us),xe===u+1&&(Te=b.extendToSouthPole?c.bi:c.$+Us),ce[he++]=we,ce[he++]=Te}const fe=ie?new Uint32Array(H):new Uint16Array(H);let me=0;for(let xe=0;xe<_;xe++)for(let ye=0;ye<d;ye++){const we=ye+1+xe*w,Te=ye+(xe+1)*w,ge=ye+1+(xe+1)*w;fe[me++]=ye+xe*w,fe[me++]=Te,fe[me++]=we,fe[me++]=we,fe[me++]=Te,fe[me++]=ge}return{vertices:ce.buffer.slice(0),indices:fe.buffer.slice(0),uses32bitIndices:ie}}const Os=new c.aK({fill:new c.bj(128,2),line:new c.bj(512,0),tile:new c.bj(128,32),stencil:new c.bj(128,1),circle:3});class ml{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return ao.projectionGlobe}get vertexShaderPreludeCode(){return ao.projectionMercator.vertexSource}get subdivisionGranularity(){return Os}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(t){this._errorMeasurement||(this._errorMeasurement=new Ei(t));const u=c.U(this._errorQueryLatitudeDegrees),d=2*Math.atan(Math.exp(Math.PI-u*Math.PI*2))-.5*Math.PI,_=this._errorMeasurement.updateErrorLoop(u,d),w=z.now();_!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=_,this._errorMeasurementLastChangeTime=w);const A=Math.min(Math.max((w-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=c.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,c.bl(A))}_getMeshKey(t){return`${t.granularity.toString(36)}_${t.generateBorders?"b":""}${t.extendToNorthPole?"n":""}${t.extendToSouthPole?"s":""}`}getMeshFromTileID(t,u,d,_,w){const A=(w==="stencil"?Os.stencil:Os.tile).getGranularityForZoomLevel(u.z);return this._getMesh(t,{granularity:A,generateBorders:d,extendToNorthPole:u.y===0&&_,extendToSouthPole:u.y===(1<<u.z)-1&&_})}_getMesh(t,u){const d=this._getMeshKey(u);if(d in this._tileMeshCache)return this._tileMeshCache[d];const _=(function(w,A){const I=_f(A,"16bit"),k=c.aL.deserialize({arrayBuffer:I.vertices,length:I.vertices.byteLength/2/2}),N=c.aN.deserialize({arrayBuffer:I.indices,length:I.indices.byteLength/2/3});return new ks(w.createVertexBuffer(k,ko.members),w.createIndexBuffer(N),c.aM.simpleSegment(0,0,k.length,N.length))})(t,u);return this._tileMeshCache[d]=_,_}recalculate(t){}hasTransition(){const t=z.now();let u=!1;return u=u||(t-this._errorMeasurementLastChangeTime)/1e3<.7,u=u||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,u}setErrorQueryLatitudeDegrees(t){this._errorQueryLatitudeDegrees=t}}const Ls=new c.r({type:new c.D(c.v.projection.type)});class yl extends c.E{constructor(t){super(),this._transitionable=new c.t(Ls,void 0),this.setProjection(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.F(0)),this._mercatorProjection=new _r,this._verticalPerspectiveProjection=new ml}get transitionState(){const t=this.properties.get("type");if(typeof t=="string"&&t==="mercator")return 0;if(typeof t=="string"&&t==="vertical-perspective")return 1;if(t instanceof c.bm){if(t.from==="vertical-perspective"&&t.to==="mercator")return 1-t.transition;if(t.from==="mercator"&&t.to==="vertical-perspective")return t.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(t){this._mercatorProjection.updateGPUdependent(t),this._verticalPerspectiveProjection.updateGPUdependent(t)}getMeshFromTileID(t,u,d,_,w){return this.currentProjection.getMeshFromTileID(t,u,d,_,w)}setProjection(t){this._transitionable.setValue("type",t?.type||"mercator")}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}setErrorQueryLatitudeDegrees(t){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(t),this._mercatorProjection.setErrorQueryLatitudeDegrees(t)}}function cc(b){const t=pu(b.worldSize,b.center.lat);return 2*Math.PI*t}function io(b,t,u,d,_){const w=1/(1<<_),A=t/c.$*w+d*w,I=c.bo((b/c.$*w+u*w)*Math.PI*2+Math.PI,2*Math.PI),k=2*Math.atan(Math.exp(Math.PI-A*Math.PI*2))-.5*Math.PI,N=Math.cos(k),B=new Float64Array(3);return B[0]=Math.sin(I)*N,B[1]=Math.sin(k),B[2]=Math.cos(I)*N,B}function fa(b){return(function(t,u){const d=Math.cos(u),_=new Float64Array(3);return _[0]=Math.sin(t)*d,_[1]=Math.sin(u),_[2]=Math.cos(t)*d,_})(b.lng*Math.PI/180,b.lat*Math.PI/180)}function pu(b,t){return b/(2*Math.PI)/Math.cos(t*Math.PI/180)}function gl(b){const t=Math.asin(b[1])/Math.PI*180,u=Math.sqrt(b[0]*b[0]+b[2]*b[2]);if(u>1e-6){const d=b[0]/u,_=Math.acos(b[2]/u),w=(d>0?_:-_)/Math.PI*180;return new c.S(c.aO(w,-180,180),t)}return new c.S(0,t)}function vl(b){return Math.cos(b*Math.PI/180)}function kn(b,t){const u=vl(b),d=vl(t);return c.ak(d/u)}function Gd(b,t){const u=b.rotate(t.bearingInRadians),d=t.zoom+kn(t.center.lat,0),_=c.bk(1/vl(t.center.lat),1/vl(Math.min(Math.abs(t.center.lat),60)),c.bn(d,7,3,0,1)),w=360/cc({worldSize:t.worldSize,center:{lat:t.center.lat}});return new c.S(t.center.lng-u.x*w*_,c.ah(t.center.lat+u.y*w,-c.ai,c.ai))}function hc(b){const t=.5*b,u=Math.sin(t),d=Math.cos(t);return Math.log(u+d)-Math.log(d-u)}function bf(b,t,u,d){const _=b.lat+u*d;if(Math.abs(u)>1){const w=(Math.sign(b.lat+u)!==Math.sign(b.lat)?-Math.abs(b.lat):Math.abs(b.lat))*Math.PI/180,A=Math.abs(b.lat+u)*Math.PI/180,I=hc(w+d*(A-w)),k=hc(w),N=hc(A);return new c.S(b.lng+t*((I-k)/(N-k)),_)}return new c.S(b.lng+t*d,_)}class Wd{constructor(t){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=t}swapBuffers(){if(!this._hadAnyChanges)return;const t=this._cachePrevious;this._cachePrevious=this._cache,this._cache=t,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(t,u,d,_){const w=`${t.z}_${t.x}_${t.y}_${_?.terrain?"t":""}`,A=this._cache.get(w);if(A)return A;const I=this._cachePrevious.get(w);if(I)return this._cache.set(w,I),I;const k=this._boundingVolumeFactory(t,u,d,_);return this._cache.set(w,k),this._hadAnyChanges=!0,k}}class mu{constructor(t,u,d,_){this.min=d,this.max=_,this.points=t,this.planes=u}static fromAabb(t,u){const d=[];for(let _=0;_<8;_++)d.push([1&~_?t[0]:u[0],(_>>1&1)==1?u[1]:t[1],(_>>2&1)==1?u[2]:t[2]]);return new mu(d,[[-1,0,0,u[0]],[1,0,0,-t[0]],[0,-1,0,u[1]],[0,1,0,-t[1]],[0,0,-1,u[2]],[0,0,1,-t[2]]],t,u)}static fromCenterSizeAngles(t,u,d){const _=c.br([],d[0],d[1],d[2]),w=c.bs([],[u[0],0,0],_),A=c.bs([],[0,u[1],0],_),I=c.bs([],[0,0,u[2]],_),k=[...t],N=[...t];for(let W=0;W<8;W++)for(let H=0;H<3;H++){const K=t[H]+w[H]*(1&~W?-1:1)+A[H]*((W>>1&1)==1?1:-1)+I[H]*((W>>2&1)==1?1:-1);k[H]=Math.min(k[H],K),N[H]=Math.max(N[H],K)}const B=[];for(let W=0;W<8;W++){const H=[...t];c.aS(H,H,c.aR([],w,1&~W?-1:1)),c.aS(H,H,c.aR([],A,(W>>1&1)==1?1:-1)),c.aS(H,H,c.aR([],I,(W>>2&1)==1?1:-1)),B.push(H)}return new mu(B,[[...w,-c.aX(w,B[0])],[...A,-c.aX(A,B[0])],[...I,-c.aX(I,B[0])],[-w[0],-w[1],-w[2],-c.aX(w,B[7])],[-A[0],-A[1],-A[2],-c.aX(A,B[7])],[-I[0],-I[1],-I[2],-c.aX(I,B[7])]],k,N)}intersectsFrustum(t){let u=!0;const d=this.points.length,_=this.planes.length,w=t.planes.length,A=t.points.length;for(let I=0;I<w;I++){const k=t.planes[I];let N=0;for(let B=0;B<d;B++){const W=this.points[B];k[0]*W[0]+k[1]*W[1]+k[2]*W[2]+k[3]>=0&&N++}if(N===0)return 0;N<d&&(u=!1)}if(u)return 2;for(let I=0;I<_;I++){const k=this.planes[I];let N=0;for(let B=0;B<A;B++){const W=t.points[B];k[0]*W[0]+k[1]*W[1]+k[2]*W[2]+k[3]>=0&&N++}if(N===0)return 0}return 1}intersectsPlane(t){const u=this.points.length;let d=0;for(let _=0;_<u;_++){const w=this.points[_];t[0]*w[0]+t[1]*w[1]+t[2]*w[2]+t[3]>=0&&d++}return d===u?2:d===0?0:1}}function Ca(b,t,u){const d=b-t;return d<0?-d:Math.max(0,d-u)}function fc(b,t,u,d,_){const w=b-u;let A;return A=w<0?Math.min(-w,1+w-_):w>1?Math.min(Math.max(w-_,0),1-w):0,Math.max(A,Ca(t,d,_))}class Lo{constructor(){this._boundingVolumeCache=new Wd(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(t,u,d,_){const w=1<<d.z,A=1/w,I=d.x/w,k=d.y/w;let N=2;return N=Math.min(N,fc(t,u,I,k,A)),N=Math.min(N,fc(t,u,I+.5,-k-A,A)),N=Math.min(N,fc(t,u,I+.5,2-k-A,A)),N}getWrap(t,u,d){const _=1<<u.z,w=1/_,A=u.x/_,I=Ca(t.x,A,w),k=Ca(t.x,A-1,w),N=Ca(t.x,A+1,w),B=Math.min(I,k,N);return B===N?1:B===k?-1:0}allowVariableZoom(t,u){return kt(t,u)>4}allowWorldCopies(){return!1}getTileBoundingVolume(t,u,d,_){return this._boundingVolumeCache.getTileBoundingVolume(t,u,d,_)}_computeTileBoundingVolume(t,u,d,_){var w,A;let I=0,k=0;if(_?.terrain){const N=new c.Z(t.z,u,t.z,t.x,t.y),B=_.terrain.getMinMaxElevation(N);I=(w=B.minElevation)!==null&&w!==void 0?w:Math.min(0,d),k=(A=B.maxElevation)!==null&&A!==void 0?A:Math.max(0,d)}if(I/=c.bu,k/=c.bu,I+=1,k+=1,t.z<=0)return mu.fromAabb([-k,-k,-k],[k,k,k]);if(t.z===1)return mu.fromAabb([t.x===0?-k:0,t.y===0?0:-k,-k],[t.x===0?0:k,t.y===0?k:0,k]);{const N=[io(0,0,t.x,t.y,t.z),io(c.$,0,t.x,t.y,t.z),io(c.$,c.$,t.x,t.y,t.z),io(0,c.$,t.x,t.y,t.z)],B=[];for(const He of N)B.push(c.aR([],He,k));if(k!==I)for(const He of N)B.push(c.aR([],He,I));t.y===0&&B.push([0,1,0]),t.y===(1<<t.z)-1&&B.push([0,-1,0]);const W=[1,1,1],H=[-1,-1,-1];for(const He of B)for(let Ye=0;Ye<3;Ye++)W[Ye]=Math.min(W[Ye],He[Ye]),H[Ye]=Math.max(H[Ye],He[Ye]);const K=io(c.$/2,c.$/2,t.x,t.y,t.z),ie=c.aW([],[0,1,0],K);c.aV(ie,ie);const ce=c.aW([],K,ie);c.aV(ce,ce);const he=c.aW([],N[2],N[1]);c.aV(he,he);const fe=c.aW([],N[0],N[3]);c.aV(fe,fe),B.push(c.aR([],K,k)),t.y>=(1<<t.z)/2&&B.push(c.aR([],io(c.$/2,0,t.x,t.y,t.z),k)),t.y<(1<<t.z)/2&&B.push(c.aR([],io(c.$/2,c.$,t.x,t.y,t.z),k));const me=_l(K,B),xe=_l(ce,B),ye=[-K[0],-K[1],-K[2],me.max],we=[K[0],K[1],K[2],-me.min],Te=[-ce[0],-ce[1],-ce[2],xe.max],ge=[ce[0],ce[1],ce[2],-xe.min],ke=[...he,0],Ze=[...fe,0],je=[];return t.y===0?je.push(c.bt(Ze,ke,ye),c.bt(Ze,ke,we)):je.push(c.bt(Te,ke,ye),c.bt(Te,ke,we),c.bt(Te,Ze,ye),c.bt(Te,Ze,we)),t.y===(1<<t.z)-1?je.push(c.bt(Ze,ke,ye),c.bt(Ze,ke,we)):je.push(c.bt(ge,ke,ye),c.bt(ge,ke,we),c.bt(ge,Ze,ye),c.bt(ge,Ze,we)),new mu(je,[ye,we,Te,ge,ke,Ze],W,H)}}}function _l(b,t){let u=1/0,d=-1/0;for(const _ of t){const w=c.aX(b,_);u=Math.min(u,w),d=Math.max(d,w)}return{min:u,max:d}}class dc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,u,d){return this._helper.interpolatePadding(t,u,d)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,u){this._helper.resize(t,u)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}overrideNearFarZ(t,u){this._helper.overrideNearFarZ(t,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t){}constructor(){this._cachedClippingPlane=c.bv(),this._projectionMatrix=c.b9(),this._globeViewProjMatrix32f=c.b8(),this._globeViewProjMatrixNoCorrection=c.b9(),this._globeViewProjMatrixNoCorrectionInverted=c.b9(),this._globeProjMatrixInverted=c.b9(),this._cameraPosition=c.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Kn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(t,u)=>this.getConstrained(t,u)}),this._coveringTilesDetailsProvider=new Lo}clone(){const t=new dc;return t.apply(this),t}apply(t,u){this._globeLatitudeErrorCorrectionRadians=u||0,this._helper.apply(t)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const t=c.bp();return t[0]=this._cameraPosition[0],t[1]=this._cameraPosition[1],t[2]=this._cameraPosition[2],t}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(t){const{overscaledTileID:u,applyGlobeMatrix:d}=t,_=this._helper.getMercatorTileCoordinates(u);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:_,clippingPlane:this._cachedClippingPlane,projectionTransition:d?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(t){const u=this.pitchInRadians,d=this.cameraToCenterDistance/t,_=Math.sin(u)*d,w=Math.cos(u)*d+1,A=1/Math.sqrt(_*_+w*w)*1;let I=-_,k=w;const N=Math.sqrt(I*I+k*k);I/=N,k/=N;const B=[0,I,k];c.bw(B,B,[0,0,0],-this.bearingInRadians),c.bx(B,B,[0,0,0],-1*this.center.lat*Math.PI/180),c.by(B,B,[0,0,0],this.center.lng*Math.PI/180);const W=1/c.aZ(B);return c.aR(B,B,W),[...B,-A*W]}isLocationOccluded(t){return!this.isSurfacePointVisible(fa(t))}transformLightDirection(t){const u=this._helper._center.lng*Math.PI/180,d=this._helper._center.lat*Math.PI/180,_=Math.cos(d),w=[Math.sin(u)*_,Math.sin(d),Math.cos(u)*_],A=[w[2],0,-w[0]],I=[0,0,0];c.aW(I,A,w),c.aV(A,A),c.aV(I,I);const k=[0,0,0];return c.aV(k,[A[0]*t[0]+I[0]*t[1]+w[0]*t[2],A[1]*t[0]+I[1]*t[1]+w[1]*t[2],A[2]*t[0]+I[2]*t[1]+w[2]*t[2]]),k}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(t,u,d){const _=(function(I,k,N){const B=1/(1<<N.z);return new c.a1(I/c.$*B+N.x*B,k/c.$*B+N.y*B)})(t,u,d.canonical),w=(A=_.y,[c.bo(_.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-A*Math.PI*2))-.5*Math.PI]);var A;return this.getCircleRadiusCorrection()/Math.cos(w[1])}projectTileCoordinates(t,u,d,_){const w=d.canonical,A=io(t,u,w.x,w.y,w.z),I=1+(_?_(t,u):0)/c.bu,k=[A[0]*I,A[1]*I,A[2]*I,1];c.aw(k,k,this._globeViewProjMatrixNoCorrection);const N=this._cachedClippingPlane,B=N[0]*A[0]+N[1]*A[1]+N[2]*A[2]+N[3]<0;return{point:new c.P(k[0]/k[3],k[1]/k[3]),signedDistanceFromCamera:k[3],isOccluded:B}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const t=pu(this.worldSize,this.center.lat),u=c.ba(),d=c.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*t),c.b4(u,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const _=this.centerOffset;u[8]=2*-_.x/this._helper._width,u[9]=2*_.y/this._helper._height,this._projectionMatrix=c.b5(u),this._globeProjMatrixInverted=c.ba(),c.aq(this._globeProjMatrixInverted,u),c.M(u,u,[0,0,-this.cameraToCenterDistance]),c.b6(u,u,this.rollInRadians),c.b7(u,u,-this.pitchInRadians),c.b6(u,u,this.bearingInRadians),c.M(u,u,[0,0,-t]);const w=c.bp();w[0]=t,w[1]=t,w[2]=t,c.b7(d,u,this.center.lat*Math.PI/180),c.bz(d,d,-this.center.lng*Math.PI/180),c.N(d,d,w),this._globeViewProjMatrixNoCorrection=d,c.b7(u,u,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),c.bz(u,u,-this.center.lng*Math.PI/180),c.N(u,u,w),this._globeViewProjMatrix32f=new Float32Array(u),this._globeViewProjMatrixNoCorrectionInverted=c.ba(),c.aq(this._globeViewProjMatrixNoCorrectionInverted,d);const A=c.bp();this._cameraPosition=c.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/t,c.bw(this._cameraPosition,this._cameraPosition,A,-this.rollInRadians),c.bx(this._cameraPosition,this._cameraPosition,A,this.pitchInRadians),c.bw(this._cameraPosition,this._cameraPosition,A,-this.bearingInRadians),c.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),c.bx(this._cameraPosition,this._cameraPosition,A,-this.center.lat*Math.PI/180),c.by(this._cameraPosition,this._cameraPosition,A,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(t);const I=c.b5(this._globeViewProjMatrixNoCorrectionInverted);c.N(I,I,[1,1,-1]),this._cachedFrustum=Bn.fromInvProjectionMatrix(I,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(t){c.w("calculateFogMatrix is not supported on globe projection.");const u=c.ba();return c.ag(u),u}getVisibleUnwrappedCoordinates(t){return[new c.b2(0,t)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){t&&c.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,u){if(!this._globeViewProjMatrixNoCorrection)return 1;const d=fa(t);c.aR(d,d,1+u/c.bu);const _=c.bv();return c.aw(_,[d[0],d[1],d[2],1],this._globeViewProjMatrixNoCorrection),_[2]/_[3]}populateCache(t){}getBounds(){const t=.5*this.width,u=.5*this.height,d=[new c.P(0,0),new c.P(t,0),new c.P(this.width,0),new c.P(this.width,u),new c.P(this.width,this.height),new c.P(t,this.height),new c.P(0,this.height),new c.P(0,u)],_=[];for(const W of d)_.push(this.unprojectScreenPoint(W));let w=0,A=0,I=0,k=0;const N=this.center;for(const W of _){const H=c.bA(N.lng,W.lng),K=c.bA(N.lat,W.lat);H<A&&(A=H),H>w&&(w=H),K<k&&(k=K),K>I&&(I=K)}const B=[N.lng+A,N.lat+k,N.lng+w,N.lat+I];return this.isSurfacePointOnScreen([0,1,0])&&(B[3]=90,B[0]=-180,B[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(B[1]=-90,B[0]=-180,B[2]=180),new $t(B)}getConstrained(t,u){const d=c.ah(t.lat,-c.ai,c.ai),_=c.ah(+u,this.minZoom+kn(0,d),this.maxZoom);return{center:new c.S(t.lng,d),zoom:_}}calculateCenterFromCameraLngLatAlt(t,u,d,_){return this._helper.calculateCenterFromCameraLngLatAlt(t,u,d,_)}setLocationAtPoint(t,u){const d=fa(this.unprojectScreenPoint(u)),_=fa(t),w=c.bp();c.bB(w);const A=c.bp();c.by(A,d,w,-this.center.lng*Math.PI/180),c.bx(A,A,w,this.center.lat*Math.PI/180);const I=_[0]*_[0]+_[2]*_[2],k=A[0]*A[0];if(I<k)return;const N=Math.sqrt(I-k),B=-N,W=c.bC(_[0],_[2],A[0],N),H=c.bC(_[0],_[2],A[0],B),K=c.bp();c.by(K,_,w,-W);const ie=c.bC(K[1],K[2],A[1],A[2]),ce=c.bp();c.by(ce,_,w,-H);const he=c.bC(ce[1],ce[2],A[1],A[2]),fe=.5*Math.PI,me=ie>=-fe&&ie<=fe,xe=he>=-fe&&he<=fe;let ye,we;if(me&&xe){const Ze=this.center.lng*Math.PI/180,je=this.center.lat*Math.PI/180;c.bD(W,Ze)+c.bD(ie,je)<c.bD(H,Ze)+c.bD(he,je)?(ye=W,we=ie):(ye=H,we=he)}else if(me)ye=W,we=ie;else{if(!xe)return;ye=H,we=he}const Te=ye/Math.PI*180,ge=we/Math.PI*180,ke=this.center.lat;this.setCenter(new c.S(Te,c.ah(ge,-90,90))),this.setZoom(this.zoom+kn(ke,this.center.lat))}locationToScreenPoint(t,u){const d=fa(t);if(u){const _=u.getElevationForLngLatZoom(t,this._helper._tileZoom);c.aR(d,d,1+_/c.bu)}return this._projectSurfacePointToScreen(d)}_projectSurfacePointToScreen(t){const u=c.bv();return c.aw(u,[...t,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],new c.P((.5*u[0]+.5)*this.width,(.5*-u[1]+.5)*this.height)}screenPointToMercatorCoordinate(t,u){if(u){const d=u.pointCoordinate(t);if(d)return d}return c.a1.fromLngLat(this.unprojectScreenPoint(t))}screenPointToLocation(t,u){var d;return(d=this.screenPointToMercatorCoordinate(t,u))===null||d===void 0?void 0:d.toLngLat()}isPointOnMapSurface(t,u){const d=this._cameraPosition,_=this.getRayDirectionFromPixel(t);return!!this.rayPlanetIntersection(d,_)}getRayDirectionFromPixel(t){const u=c.bv();u[0]=t.x/this.width*2-1,u[1]=-1*(t.y/this.height*2-1),u[2]=1,u[3]=1,c.aw(u,u,this._globeViewProjMatrixNoCorrectionInverted),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3];const d=c.bp();d[0]=u[0]-this._cameraPosition[0],d[1]=u[1]-this._cameraPosition[1],d[2]=u[2]-this._cameraPosition[2];const _=c.bp();return c.aV(_,d),_}isSurfacePointVisible(t){const u=this._cachedClippingPlane;return u[0]*t[0]+u[1]*t[1]+u[2]*t[2]+u[3]>=0}isSurfacePointOnScreen(t){if(!this.isSurfacePointVisible(t))return!1;const u=c.bv();return c.aw(u,[...t,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3],u[0]>-1&&u[0]<1&&u[1]>-1&&u[1]<1&&u[2]>-1&&u[2]<1}rayPlanetIntersection(t,u){const d=c.aX(t,u),_=c.bp(),w=c.bp();c.aR(w,u,d),c.aU(_,t,w);const A=1-c.aX(_,_);if(A<0)return null;const I=c.aX(t,t)-1,k=-d+(d<0?1:-1)*Math.sqrt(A),N=I/k,B=k;return{tMin:Math.min(N,B),tMax:Math.max(N,B)}}unprojectScreenPoint(t){const u=this._cameraPosition,d=this.getRayDirectionFromPixel(t),_=this.rayPlanetIntersection(u,d);if(_){const B=c.bp();c.aS(B,u,[d[0]*_.tMin,d[1]*_.tMin,d[2]*_.tMin]);const W=c.bp();return c.aV(W,B),gl(W)}const w=this._cachedClippingPlane,A=w[0]*d[0]+w[1]*d[1]+w[2]*d[2],I=-c.b1(w,u)/A,k=c.bp();if(I>0)c.aS(k,u,[d[0]*I,d[1]*I,d[2]*I]);else{const B=c.bp();c.aS(B,u,[2*d[0],2*d[1],2*d[2]]);const W=c.b1(this._cachedClippingPlane,B);c.aU(k,B,[this._cachedClippingPlane[0]*W,this._cachedClippingPlane[1]*W,this._cachedClippingPlane[2]*W])}const N=(function(B){const W=c.bp();return W[0]=B[0]*-B[3],W[1]=B[1]*-B[3],W[2]=B[2]*-B[3],{center:W,radius:Math.sqrt(1-B[3]*B[3])}})(w);return gl((function(B,W,H){const K=c.bp();c.aU(K,H,B);const ie=c.bp();return c.bq(ie,B,K,W/c.a$(K)),ie})(N.center,N.radius,k))}getMatrixForModel(t,u){const d=c.S.convert(t),_=1/c.bu,w=c.b9();return c.bz(w,w,d.lng/180*Math.PI),c.b7(w,w,-d.lat/180*Math.PI),c.M(w,w,[0,0,1+u/c.bu]),c.b7(w,w,.5*Math.PI),c.N(w,w,[_,_,_]),w}getProjectionDataForCustomLayer(t=!0){const u=this.getProjectionData({overscaledTileID:new c.Z(0,0,0,0,0),applyGlobeMatrix:t});return u.tileMercatorCoords=[0,0,1,1],u}getFastPathSimpleProjectionMatrix(t){}}class pc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,u,d){return this._helper.interpolatePadding(t,u,d)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,u,d=!0){this._helper.resize(t,u,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}overrideNearFarZ(t,u){this._helper.overrideNearFarZ(t,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(t,u){this._globeness=t,this._globeLatitudeErrorCorrectionRadians=u,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Kn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(t,u)=>this.getConstrained(t,u)}),this._globeness=1,this._mercatorTransform=new Nr,this._verticalPerspectiveTransform=new dc}clone(){const t=new pc;return t._globeness=this._globeness,t._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,t.apply(this),t}apply(t){this._helper.apply(t),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(t){const u=this._mercatorTransform.getProjectionData(t),d=this._verticalPerspectiveTransform.getProjectionData(t);return{mainMatrix:this.isGlobeRendering?d.mainMatrix:u.mainMatrix,clippingPlane:d.clippingPlane,tileMercatorCoords:d.tileMercatorCoords,projectionTransition:t.applyGlobeMatrix?this._globeness:0,fallbackMatrix:u.fallbackMatrix}}isLocationOccluded(t){return this.currentTransform.isLocationOccluded(t)}transformLightDirection(t){return this.currentTransform.transformLightDirection(t)}getPixelScale(){return c.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return c.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(t,u,d){const _=this._mercatorTransform.getPitchedTextCorrection(t,u,d),w=this._verticalPerspectiveTransform.getPitchedTextCorrection(t,u,d);return c.bk(_,w,this._globeness)}projectTileCoordinates(t,u,d,_){return this.currentTransform.projectTileCoordinates(t,u,d,_)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(t){return this.currentTransform.calculateFogMatrix(t)}getVisibleUnwrappedCoordinates(t){return this.currentTransform.getVisibleUnwrappedCoordinates(t)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(t){this._mercatorTransform.recalculateZoomAndCenter(t),this._verticalPerspectiveTransform.recalculateZoomAndCenter(t)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,u){return this.currentTransform.lngLatToCameraDepth(t,u)}populateCache(t){this._mercatorTransform.populateCache(t),this._verticalPerspectiveTransform.populateCache(t)}getBounds(){return this.currentTransform.getBounds()}getConstrained(t,u){return this.currentTransform.getConstrained(t,u)}calculateCenterFromCameraLngLatAlt(t,u,d,_){return this._helper.calculateCenterFromCameraLngLatAlt(t,u,d,_)}setLocationAtPoint(t,u){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(t,u),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(t,u),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(t,u){return this.currentTransform.locationToScreenPoint(t,u)}screenPointToMercatorCoordinate(t,u){return this.currentTransform.screenPointToMercatorCoordinate(t,u)}screenPointToLocation(t,u){return this.currentTransform.screenPointToLocation(t,u)}isPointOnMapSurface(t,u){return this.currentTransform.isPointOnMapSurface(t,u)}getRayDirectionFromPixel(t){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(t)}getMatrixForModel(t,u){return this.currentTransform.getMatrixForModel(t,u)}getProjectionDataForCustomLayer(t=!0){const u=this._mercatorTransform.getProjectionDataForCustomLayer(t);if(!this.isGlobeRendering)return u;const d=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(t);return d.fallbackMatrix=u.mainMatrix,d}getFastPathSimpleProjectionMatrix(t){return this.currentTransform.getFastPathSimpleProjectionMatrix(t)}}class Ua{get useGlobeControls(){return!0}handlePanInertia(t,u){const d=Gd(t,u);return Math.abs(d.lng-u.center.lng)>180&&(d.lng=u.center.lng+179.5*Math.sign(d.lng-u.center.lng)),{easingCenter:d,easingOffset:new c.P(0,0)}}handleMapControlsRollPitchBearingZoom(t,u){const d=t.around,_=u.screenPointToLocation(d);t.bearingDelta&&u.setBearing(u.bearing+t.bearingDelta),t.pitchDelta&&u.setPitch(u.pitch+t.pitchDelta),t.rollDelta&&u.setRoll(u.roll+t.rollDelta);const w=u.zoom;t.zoomDelta&&u.setZoom(u.zoom+t.zoomDelta);const A=u.zoom-w;if(A===0)return;const I=c.bA(u.center.lng,_.lng),k=I/(Math.abs(I/180)+1),N=c.bA(u.center.lat,_.lat),B=u.getRayDirectionFromPixel(d),W=u.cameraPosition,H=-1*c.aX(W,B),K=c.bp();c.aS(K,W,[B[0]*H,B[1]*H,B[2]*H]);const ie=c.aZ(K)-1,ce=Math.exp(.5*-Math.max(ie-.3,0)),he=pu(u.worldSize,u.center.lat)/Math.min(u.width,u.height),fe=c.bn(he,.9,.5,1,.25),me=(1-c.af(-A))*Math.min(ce,fe),xe=u.center.lat,ye=u.zoom,we=new c.S(u.center.lng+k*me,c.ah(u.center.lat+N*me,-c.ai,c.ai));u.setLocationAtPoint(_,d);const Te=u.center,ge=c.bn(Math.abs(I),45,85,0,1),ke=c.bn(he,.75,.35,0,1),Ze=Math.pow(Math.max(ge,ke),.25),je=c.bA(Te.lng,we.lng),He=c.bA(Te.lat,we.lat);u.setCenter(new c.S(Te.lng+je*Ze,Te.lat+He*Ze).wrap()),u.setZoom(ye+kn(xe,u.center.lat))}handleMapControlsPan(t,u,d){if(!t.panDelta)return;const _=u.center.lat,w=u.zoom;u.setCenter(Gd(t.panDelta,u).wrap()),u.setZoom(w+kn(_,u.center.lat))}cameraForBoxAndBearing(t,u,d,_,w){const A=Aa(t,u,d,_,w),I=u.left/w.width*2-1,k=(w.width-u.right)/w.width*2-1,N=u.top/w.height*-2+1,B=(w.height-u.bottom)/w.height*-2+1,W=c.bA(d.getWest(),d.getEast())<0,H=W?d.getEast():d.getWest(),K=W?d.getWest():d.getEast(),ie=Math.max(d.getNorth(),d.getSouth()),ce=Math.min(d.getNorth(),d.getSouth()),he=H+.5*c.bA(H,K),fe=ie+.5*c.bA(ie,ce),me=w.clone();me.setCenter(A.center),me.setBearing(A.bearing),me.setPitch(0),me.setRoll(0),me.setZoom(A.zoom);const xe=me.modelViewProjectionMatrix,ye=[fa(d.getNorthWest()),fa(d.getNorthEast()),fa(d.getSouthWest()),fa(d.getSouthEast()),fa(new c.S(K,fe)),fa(new c.S(H,fe)),fa(new c.S(he,ie)),fa(new c.S(he,ce))],we=fa(A.center);let Te=Number.POSITIVE_INFINITY;for(const ge of ye)I<0&&(Te=Ua.getLesserNonNegativeNonNull(Te,Ua.solveVectorScale(ge,we,xe,"x",I))),k>0&&(Te=Ua.getLesserNonNegativeNonNull(Te,Ua.solveVectorScale(ge,we,xe,"x",k))),N>0&&(Te=Ua.getLesserNonNegativeNonNull(Te,Ua.solveVectorScale(ge,we,xe,"y",N))),B<0&&(Te=Ua.getLesserNonNegativeNonNull(Te,Ua.solveVectorScale(ge,we,xe,"y",B)));if(Number.isFinite(Te)&&Te!==0)return A.zoom=me.zoom+c.ak(Te),A;Uo()}handleJumpToCenterZoom(t,u){const d=t.center.lat,_=t.getConstrained(u.center?c.S.convert(u.center):t.center,t.zoom).center;t.setCenter(_.wrap());const w=u.zoom!==void 0?+u.zoom:t.zoom+kn(d,_.lat);t.zoom!==w&&t.setZoom(w)}handleEaseTo(t,u){const d=t.zoom,_=t.center,w=t.padding,A={roll:t.roll,pitch:t.pitch,bearing:t.bearing},I={roll:u.roll===void 0?t.roll:u.roll,pitch:u.pitch===void 0?t.pitch:u.pitch,bearing:u.bearing===void 0?t.bearing:u.bearing},k=u.zoom!==void 0,N=!t.isPaddingEqual(u.padding);let B=!1;const W=u.center?c.S.convert(u.center):_,H=t.getConstrained(W,d).center;du(t,H);const K=t.clone();K.setCenter(H),K.setZoom(k?+u.zoom:d+kn(_.lat,W.lat)),K.setBearing(u.bearing);const ie=new c.P(c.ah(t.centerPoint.x+u.offsetAsPoint.x,0,t.width),c.ah(t.centerPoint.y+u.offsetAsPoint.y,0,t.height));K.setLocationAtPoint(H,ie);const ce=(u.offset&&u.offsetAsPoint.mag())>0?K.center:H,he=k?+u.zoom:d+kn(_.lat,ce.lat),fe=d+kn(_.lat,0),me=he+kn(ce.lat,0),xe=c.bA(_.lng,ce.lng),ye=c.bA(_.lat,ce.lat),we=c.af(me-fe);return B=he!==d,{easeFunc:Te=>{if(c.be(A,I)||Pa({startEulerAngles:A,endEulerAngles:I,tr:t,k:Te,useSlerp:A.roll!=I.roll}),N&&t.interpolatePadding(w,u.padding,Te),u.around)c.w("Easing around a point is not supported under globe projection."),t.setLocationAtPoint(u.around,u.aroundPoint);else{const ge=me>fe?Math.min(2,we):Math.max(.5,we),ke=Math.pow(ge,1-Te),Ze=bf(_,xe,ye,Te*ke);t.setCenter(Ze.wrap())}if(B){const ge=c.C.number(fe,me,Te)+kn(0,t.center.lat);t.setZoom(ge)}},isZooming:B,elevationCenter:ce}}handleFlyTo(t,u){const d=u.zoom!==void 0,_=t.center,w=t.zoom,A=t.padding,I=!t.isPaddingEqual(u.padding),k=t.getConstrained(c.S.convert(u.center||u.locationAtOffset),w).center,N=d?+u.zoom:t.zoom+kn(t.center.lat,k.lat),B=t.clone();B.setCenter(k),B.setZoom(N),B.setBearing(u.bearing);const W=new c.P(c.ah(t.centerPoint.x+u.offsetAsPoint.x,0,t.width),c.ah(t.centerPoint.y+u.offsetAsPoint.y,0,t.height));B.setLocationAtPoint(k,W);const H=B.center;du(t,H);const K=(function(ye,we,Te){const ge=fa(we),ke=fa(Te),Ze=c.aX(ge,ke),je=Math.acos(Ze),He=cc(ye);return je/(2*Math.PI)*He})(t,_,H),ie=w+kn(_.lat,0),ce=N+kn(H.lat,0),he=c.af(ce-ie);let fe;if(typeof u.minZoom=="number"){const ye=+u.minZoom+kn(H.lat,0),we=Math.min(ye,ie,ce)+kn(0,H.lat),Te=t.getConstrained(H,we).zoom+kn(H.lat,0);fe=c.af(Te-ie)}const me=c.bA(_.lng,H.lng),xe=c.bA(_.lat,H.lat);return{easeFunc:(ye,we,Te,ge)=>{const ke=bf(_,me,xe,Te);I&&t.interpolatePadding(A,u.padding,ye);const Ze=ye===1?H:ke;t.setCenter(Ze.wrap());const je=ie+c.ak(we);t.setZoom(ye===1?N:je+kn(0,Ze.lat))},scaleOfZoom:he,targetCenter:H,scaleOfMinZoom:fe,pixelPathLength:K}}static solveVectorScale(t,u,d,_,w){const A=_==="x"?[d[0],d[4],d[8],d[12]]:[d[1],d[5],d[9],d[13]],I=[d[3],d[7],d[11],d[15]],k=t[0]*A[0]+t[1]*A[1]+t[2]*A[2],N=t[0]*I[0]+t[1]*I[1]+t[2]*I[2],B=u[0]*A[0]+u[1]*A[1]+u[2]*A[2],W=u[0]*I[0]+u[1]*I[1]+u[2]*I[2];return B+w*N===k+w*W||I[3]*(k-B)+A[3]*(W-N)+k*W==B*N?null:(B+A[3]-w*W-w*I[3])/(B-k-w*W+w*N)}static getLesserNonNegativeNonNull(t,u){return u!==null&&u>=0&&u<t?u:t}}class xf{constructor(t){this._globe=t,this._mercatorCameraHelper=new Mn,this._verticalPerspectiveCameraHelper=new Ua}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(t,u){return this.currentHelper.handlePanInertia(t,u)}handleMapControlsRollPitchBearingZoom(t,u){return this.currentHelper.handleMapControlsRollPitchBearingZoom(t,u)}handleMapControlsPan(t,u,d){this.currentHelper.handleMapControlsPan(t,u,d)}cameraForBoxAndBearing(t,u,d,_,w){return this.currentHelper.cameraForBoxAndBearing(t,u,d,_,w)}handleJumpToCenterZoom(t,u){this.currentHelper.handleJumpToCenterZoom(t,u)}handleEaseTo(t,u){return this.currentHelper.handleEaseTo(t,u)}handleFlyTo(t,u){return this.currentHelper.handleFlyTo(t,u)}}const gh=(b,t)=>c.y(b,t&&t.filter((u=>u.identifier!=="source.canvas"))),hm=c.bE();class Sf extends c.E{constructor(t,u={}){var d,_;super(),this._rtlPluginLoaded=()=>{for(const A in this.sourceCaches){const I=this.sourceCaches[A].getSource().type;I!=="vector"&&I!=="geojson"||this.sourceCaches[A].reload()}},this.map=t,this.dispatcher=new jt(Zt(),t._getMapId()),this.dispatcher.registerMessageHandler("GG",((A,I)=>this.getGlyphs(A,I))),this.dispatcher.registerMessageHandler("GI",((A,I)=>this.getImages(A,I))),this.imageManager=new ht,this.imageManager.setEventedParent(this);const w=((d=t._container)===null||d===void 0?void 0:d.lang)||typeof document<"u"&&((_=document.documentElement)===null||_===void 0?void 0:_.lang)||void 0;this.glyphManager=new rt(t._requestManager,u.localIdeographFontFamily,w),this.lineAtlas=new Ct(256,512),this.crossTileSymbolIndex=new dl,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",c.bG()),An().on(Do,this._rtlPluginLoaded),this.on("data",(A=>{if(A.dataType!=="source"||A.sourceDataType!=="metadata")return;const I=this.sourceCaches[A.sourceId];if(!I)return;const k=I.getSource();if(k&&k.vectorLayerIds)for(const N in this._layers){const B=this._layers[N];B.source===k.id&&this._validateLayer(B)}}))}setGlobalStateProperty(t,u){var d,_,w;this._checkLoaded();const A=u===null?(w=(_=(d=this.stylesheet.state)===null||d===void 0?void 0:d[t])===null||_===void 0?void 0:_.default)!==null&&w!==void 0?w:null:u;if(c.bH(A,this._globalState[t]))return this;this._globalState[t]=A,this._applyGlobalStateChanges([t])}getGlobalState(){return this._globalState}setGlobalState(t){this._checkLoaded();const u=[];for(const d in t)!c.bH(this._globalState[d],t[d].default)&&(u.push(d),this._globalState[d]=t[d].default);this._applyGlobalStateChanges(u)}_applyGlobalStateChanges(t){if(t.length===0)return;const u=new Set,d={};for(const _ of t){d[_]=this._globalState[_];for(const w in this._layers){const A=this._layers[w],I=A.getLayoutAffectingGlobalStateRefs(),k=A.getPaintAffectingGlobalStateRefs();if(I.has(_)&&u.add(A.source),k.has(_))for(const{name:N,value:B}of k.get(_))this._updatePaintProperty(A,N,B)}}this.dispatcher.broadcast("UGS",d);for(const _ in this.sourceCaches)u.has(_)&&(this._reloadSource(_),this._changed=!0)}loadURL(t,u={},d){this.fire(new c.l("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const _=this.map._requestManager.transformRequest(t,"Style");this._loadStyleRequest=new AbortController;const w=this._loadStyleRequest;c.j(_,this._loadStyleRequest).then((A=>{this._loadStyleRequest=null,this._load(A.data,u,d)})).catch((A=>{this._loadStyleRequest=null,A&&!w.signal.aborted&&this.fire(new c.k(A))}))}loadJSON(t,u={},d){this.fire(new c.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,z.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,u.validate=u.validate!==!1,this._load(t,u,d)})).catch((()=>{}))}loadEmpty(){this.fire(new c.l("dataloading",{dataType:"style"})),this._load(hm,{validate:!1})}_load(t,u,d){var _,w;let A=u.transformStyle?u.transformStyle(d,t):t;if(!u.validate||!gh(this,c.z(A))){A=Object.assign({},A),this._loaded=!0,this.stylesheet=A;for(const I in A.sources)this.addSource(I,A.sources[I],{validate:!1});A.sprite?this._loadSprite(A.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(A.glyphs),this._createLayers(),this.light=new Be(this.stylesheet.light),this._setProjectionInternal(((_=this.stylesheet.projection)===null||_===void 0?void 0:_.type)||"mercator"),this.sky=new nt(this.stylesheet.sky),this.map.setTerrain((w=this.stylesheet.terrain)!==null&&w!==void 0?w:null),this.fire(new c.l("data",{dataType:"style"})),this.fire(new c.l("style.load"))}}_createLayers(){var t;const u=c.bI(this.stylesheet.layers);this.setGlobalState((t=this.stylesheet.state)!==null&&t!==void 0?t:null),this.dispatcher.broadcast("SL",u),this._order=u.map((d=>d.id)),this._layers={},this._serializedLayers=null;for(const d of u){const _=c.bJ(d,this._globalState);_.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=_}}_loadSprite(t,u=!1,d=void 0){let _;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(w,A,I,k){return c._(this,void 0,void 0,(function*(){const N=Ae(w),B=I>1?"@2x":"",W={},H={};for(const{id:K,url:ie}of N){const ce=A.transformRequest(Ee(ie,B,".json"),"SpriteJSON");W[K]=c.j(ce,k);const he=A.transformRequest(Ee(ie,B,".png"),"SpriteImage");H[K]=_e.getImage(he,k)}return yield Promise.all([...Object.values(W),...Object.values(H)]),(function(K,ie){return c._(this,void 0,void 0,(function*(){const ce={};for(const he in K){ce[he]={};const fe=z.getImageCanvasContext((yield ie[he]).data),me=(yield K[he]).data;for(const xe in me){const{width:ye,height:we,x:Te,y:ge,sdf:ke,pixelRatio:Ze,stretchX:je,stretchY:He,content:Ye,textFitWidth:Pt,textFitHeight:xt}=me[xe];ce[he][xe]={data:null,pixelRatio:Ze,sdf:ke,stretchX:je,stretchY:He,content:Ye,textFitWidth:Pt,textFitHeight:xt,spriteData:{width:ye,height:we,x:Te,y:ge,context:fe}}}}return ce}))})(W,H)}))})(t,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((w=>{if(this._spriteRequest=null,w)for(const A in w){this._spritesImagesIds[A]=[];const I=this._spritesImagesIds[A]?this._spritesImagesIds[A].filter((k=>!(k in w))):[];for(const k of I)this.imageManager.removeImage(k),this._changedImages[k]=!0;for(const k in w[A]){const N=A==="default"?k:`${A}:${k}`;this._spritesImagesIds[A].push(N),N in this.imageManager.images?this.imageManager.updateImage(N,w[A][k],!1):this.imageManager.addImage(N,w[A][k]),u&&(this._changedImages[N]=!0)}}})).catch((w=>{this._spriteRequest=null,_=w,this.fire(new c.k(_))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"})),d&&d(_)}))}_unloadSprite(){for(const t of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(t),this._changedImages[t]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}_validateLayer(t){const u=this.sourceCaches[t.source];if(!u)return;const d=t.sourceLayer;if(!d)return;const _=u.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(d)===-1)&&this.fire(new c.k(new Error(`Source layer "${d}" does not exist on source "${_.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(t,u=!1){const d=this._serializedAllLayers();if(!t||t.length===0)return Object.values(u?c.bK(d):d);const _=[];for(const w of t)if(d[w]){const A=u?c.bK(d[w]):d[w];_.push(A)}return _}_serializedAllLayers(){let t=this._serializedLayers;if(t)return t;t=this._serializedLayers={};const u=Object.keys(this._layers);for(const d of u){const _=this._layers[d];_.type!=="custom"&&(t[d]=_.serialize())}return t}hasTransitions(){var t,u,d;if(!((t=this.light)===null||t===void 0)&&t.hasTransition()||!((u=this.sky)===null||u===void 0)&&u.hasTransition()||!((d=this.projection)===null||d===void 0)&&d.hasTransition())return!0;for(const _ in this.sourceCaches)if(this.sourceCaches[_].hasTransition())return!0;for(const _ in this._layers)if(this._layers[_].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;const u=this._changed;if(u){const _=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(_.length||w.length)&&this._updateWorkerLayers(_,w);for(const A in this._updatedSources){const I=this._updatedSources[A];if(I==="reload")this._reloadSource(A);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(A)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const A in this._updatedPaintProps)this._layers[A].updateTransitions(t);this.light.updateTransitions(t),this.sky.updateTransitions(t),this._resetUpdates()}const d={};for(const _ in this.sourceCaches){const w=this.sourceCaches[_];d[_]=w.used,w.used=!1}for(const _ of this._order){const w=this._layers[_];w.recalculate(t,this._availableImages),!w.isHidden(t.zoom)&&w.source&&(this.sourceCaches[w.source].used=!0)}for(const _ in d){const w=this.sourceCaches[_];!!d[_]!=!!w.used&&w.fire(new c.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:_}))}this.light.recalculate(t),this.sky.recalculate(t),this.projection.recalculate(t),this.z=t.zoom,u&&this.fire(new c.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(t,u){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(t,!1),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(t,u={}){var d;this._checkLoaded();const _=this.serialize();if(t=u.transformStyle?u.transformStyle(_,t):t,((d=u.validate)===null||d===void 0||d)&&gh(this,c.z(t)))return!1;(t=c.bK(t)).layers=c.bI(t.layers);const w=c.bL(_,t),A=this._getOperationsToPerform(w);if(A.unimplemented.length>0)throw new Error(`Unimplemented: ${A.unimplemented.join(", ")}.`);if(A.operations.length===0)return!1;for(const I of A.operations)I();return this.stylesheet=t,this._serializedLayers=null,!0}_getOperationsToPerform(t){const u=[],d=[];for(const _ of t)switch(_.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":u.push((()=>this.addLayer.apply(this,_.args)));break;case"removeLayer":u.push((()=>this.removeLayer.apply(this,_.args)));break;case"setPaintProperty":u.push((()=>this.setPaintProperty.apply(this,_.args)));break;case"setLayoutProperty":u.push((()=>this.setLayoutProperty.apply(this,_.args)));break;case"setFilter":u.push((()=>this.setFilter.apply(this,_.args)));break;case"addSource":u.push((()=>this.addSource.apply(this,_.args)));break;case"removeSource":u.push((()=>this.removeSource.apply(this,_.args)));break;case"setLayerZoomRange":u.push((()=>this.setLayerZoomRange.apply(this,_.args)));break;case"setLight":u.push((()=>this.setLight.apply(this,_.args)));break;case"setGeoJSONSourceData":u.push((()=>this.setGeoJSONSourceData.apply(this,_.args)));break;case"setGlyphs":u.push((()=>this.setGlyphs.apply(this,_.args)));break;case"setSprite":u.push((()=>this.setSprite.apply(this,_.args)));break;case"setTerrain":u.push((()=>this.map.setTerrain.apply(this,_.args)));break;case"setSky":u.push((()=>this.setSky.apply(this,_.args)));break;case"setProjection":this.setProjection.apply(this,_.args);break;case"setGlobalState":u.push((()=>this.setGlobalState.apply(this,_.args)));break;case"setTransition":u.push((()=>{}));break;default:d.push(_.command)}return{operations:u,unimplemented:d}}addImage(t,u){if(this.getImage(t))return this.fire(new c.k(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,u),this._afterImageUpdated(t)}updateImage(t,u){this.imageManager.updateImage(t,u)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new c.k(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,u,d={}){if(this._checkLoaded(),this.sourceCaches[t]!==void 0)throw new Error(`Source "${t}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(c.z.source,`sources.${t}`,u,null,d))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const _=this.sourceCaches[t]=new br(t,u,this.dispatcher);_.style=this,_.setEventedParent(this,(()=>({isSourceLoaded:_.loaded(),source:_.serialize(),sourceId:t}))),_.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===t)return this.fire(new c.k(new Error(`Source "${t}" cannot be removed while layer "${d}" is using it.`)));const u=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],u.fire(new c.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,u){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error(`There is no source with this ID=${t}`);const d=this.sourceCaches[t].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(u),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(t,u,d={}){this._checkLoaded();const _=t.id;if(this.getLayer(_))return void this.fire(new c.k(new Error(`Layer "${_}" already exists on this map.`)));let w;if(t.type==="custom"){if(gh(this,c.bM(t)))return;w=c.bJ(t,this._globalState)}else{if("source"in t&&typeof t.source=="object"&&(this.addSource(_,t.source),t=c.bK(t),t=c.e(t,{source:_})),this._validate(c.z.layer,`layers.${_}`,t,{arrayIndex:-1},d))return;w=c.bJ(t,this._globalState),this._validateLayer(w),w.setEventedParent(this,{layer:{id:_}})}const A=u?this._order.indexOf(u):this._order.length;if(u&&A===-1)this.fire(new c.k(new Error(`Cannot add layer "${_}" before non-existing layer "${u}".`)));else{if(this._order.splice(A,0,_),this._layerOrderChanged=!0,this._layers[_]=w,this._removedLayers[_]&&w.source&&w.type!=="custom"){const I=this._removedLayers[_];delete this._removedLayers[_],I.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map)}}moveLayer(t,u){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new c.k(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===u)return;const d=this._order.indexOf(t);this._order.splice(d,1);const _=u?this._order.indexOf(u):this._order.length;u&&_===-1?this.fire(new c.k(new Error(`Cannot move layer "${t}" before non-existing layer "${u}".`))):(this._order.splice(_,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const u=this._layers[t];if(!u)return void this.fire(new c.k(new Error(`Cannot remove non-existing layer "${t}".`)));u.setEventedParent(null);const d=this._order.indexOf(t);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=u,delete this._layers[t],this._serializedLayers&&delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],u.onRemove&&u.onRemove(this.map)}getLayer(t){return this._layers[t]}getLayersOrder(){return[...this._order]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,u,d){this._checkLoaded();const _=this.getLayer(t);_?_.minzoom===u&&_.maxzoom===d||(u!=null&&(_.minzoom=u),d!=null&&(_.maxzoom=d),this._updateLayer(_)):this.fire(new c.k(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,u,d={}){this._checkLoaded();const _=this.getLayer(t);if(_){if(!c.bH(_.filter,u))return u==null?(_.setFilter(void 0),void this._updateLayer(_)):void(this._validate(c.z.filter,`layers.${_.id}.filter`,u,null,d)||(_.setFilter(c.bK(u)),this._updateLayer(_)))}else this.fire(new c.k(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return c.bK(this.getLayer(t).filter)}setLayoutProperty(t,u,d,_={}){this._checkLoaded();const w=this.getLayer(t);w?c.bH(w.getLayoutProperty(u),d)||(w.setLayoutProperty(u,d,_),this._updateLayer(w)):this.fire(new c.k(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,u){const d=this.getLayer(t);if(d)return d.getLayoutProperty(u);this.fire(new c.k(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,u,d,_={}){this._checkLoaded();const w=this.getLayer(t);w?c.bH(w.getPaintProperty(u),d)||this._updatePaintProperty(w,u,d,_):this.fire(new c.k(new Error(`Cannot style non-existing layer "${t}".`)))}_updatePaintProperty(t,u,d,_={}){t.setPaintProperty(u,d,_)&&this._updateLayer(t),this._changed=!0,this._updatedPaintProps[t.id]=!0,this._serializedLayers=null}getPaintProperty(t,u){return this.getLayer(t).getPaintProperty(u)}setFeatureState(t,u){this._checkLoaded();const d=t.source,_=t.sourceLayer,w=this.sourceCaches[d];if(w===void 0)return void this.fire(new c.k(new Error(`The source '${d}' does not exist in the map's style.`)));const A=w.getSource().type;A==="geojson"&&_?this.fire(new c.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):A!=="vector"||_?(t.id===void 0&&this.fire(new c.k(new Error("The feature id parameter must be provided."))),w.setFeatureState(_,t.id,u)):this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,u){this._checkLoaded();const d=t.source,_=this.sourceCaches[d];if(_===void 0)return void this.fire(new c.k(new Error(`The source '${d}' does not exist in the map's style.`)));const w=_.getSource().type,A=w==="vector"?t.sourceLayer:void 0;w!=="vector"||A?u&&typeof t.id!="string"&&typeof t.id!="number"?this.fire(new c.k(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(A,t.id,u):this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();const u=t.source,d=t.sourceLayer,_=this.sourceCaches[u];if(_!==void 0)return _.getSource().type!=="vector"||d?(t.id===void 0&&this.fire(new c.k(new Error("The feature id parameter must be provided."))),_.getFeatureState(d,t.id)):void this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.k(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const t=c.bN(this.sourceCaches,(w=>w.serialize())),u=this._serializeByIds(this._order,!0),d=this.map.getTerrain()||void 0,_=this.stylesheet;return c.bO({version:_.version,name:_.name,metadata:_.metadata,light:_.light,sky:_.sky,center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,sprite:_.sprite,glyphs:_.glyphs,transition:_.transition,projection:_.projection,sources:t,layers:u,terrain:d},(w=>w!==void 0))}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&this.sourceCaches[t.source].getSource().type!=="raster"&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(t){const u=A=>this._layers[A].type==="fill-extrusion",d={},_=[];for(let A=this._order.length-1;A>=0;A--){const I=this._order[A];if(u(I)){d[I]=A;for(const k of t){const N=k[I];if(N)for(const B of N)_.push(B)}}}_.sort(((A,I)=>I.intersectionZ-A.intersectionZ));const w=[];for(let A=this._order.length-1;A>=0;A--){const I=this._order[A];if(u(I))for(let k=_.length-1;k>=0;k--){const N=_[k].feature;if(d[N.layer.id]<A)break;w.push(N),_.pop()}else for(const k of t){const N=k[I];if(N)for(const B of N)w.push(B.feature)}}return w}queryRenderedFeatures(t,u,d){u&&u.filter&&this._validate(c.z.filter,"queryRenderedFeatures.filter",u.filter,null,u);const _={};if(u&&u.layers){if(!(Array.isArray(u.layers)||u.layers instanceof Set))return this.fire(new c.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const N of u.layers){const B=this._layers[N];if(!B)return this.fire(new c.k(new Error(`The layer '${N}' does not exist in the map's style and cannot be queried for features.`))),[];_[B.source]=!0}}const w=[];u.availableImages=this._availableImages;const A=this._serializedAllLayers(),I=u.layers instanceof Set?u.layers:Array.isArray(u.layers)?new Set(u.layers):null,k=Object.assign(Object.assign({},u),{layers:I,globalState:this._globalState});for(const N in this.sourceCaches)u.layers&&!_[N]||w.push(wt(this.sourceCaches[N],this._layers,A,t,k,d,this.map.terrain?(B,W,H)=>this.map.terrain.getElevation(B,W,H):void 0));return this.placement&&w.push((function(N,B,W,H,K,ie,ce){const he={},fe=ie.queryRenderedSymbols(H),me=[];for(const xe of Object.keys(fe).map(Number))me.push(ce[xe]);me.sort(Gt);for(const xe of me){const ye=xe.featureIndex.lookupSymbolFeatures(fe[xe.bucketInstanceId],B,xe.bucketIndex,xe.sourceLayerIndex,{filterSpec:K.filter,globalState:K.globalState},K.layers,K.availableImages,N);for(const we in ye){const Te=he[we]=he[we]||[],ge=ye[we];ge.sort(((ke,Ze)=>{const je=xe.featureSortOrder;if(je){const He=je.indexOf(ke.featureIndex);return je.indexOf(Ze.featureIndex)-He}return Ze.featureIndex-ke.featureIndex}));for(const ke of ge)Te.push(ke)}}return(function(xe,ye,we){for(const Te in xe)for(const ge of xe[Te])zt(ge,we[ye[Te].source]);return xe})(he,N,W)})(this._layers,A,this.sourceCaches,t,k,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(t,u){u?.filter&&this._validate(c.z.filter,"querySourceFeatures.filter",u.filter,null,u);const d=this.sourceCaches[t];return d?(function(_,w){const A=_.getRenderableIds().map((N=>_.getTileByID(N))),I=[],k={};for(let N=0;N<A.length;N++){const B=A[N],W=B.tileID.canonical.key;k[W]||(k[W]=!0,B.querySourceFeatures(I,w))}return I})(d,u?Object.assign(Object.assign({},u),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(t,u={}){this._checkLoaded();const d=this.light.getLight();let _=!1;for(const A in t)if(!c.bH(t[A],d[A])){_=!0;break}if(!_)return;const w={now:z.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,u),this.light.updateTransitions(w)}getProjection(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.projection}setProjection(t){if(this._checkLoaded(),this.projection){if(this.projection.name===t.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=t,this._setProjectionInternal(t.type)}getSky(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.sky}setSky(t,u={}){this._checkLoaded();const d=this.getSky();let _=!1;if(!t&&!d)return;if(t&&!d)_=!0;else if(!t&&d)_=!0;else for(const A in t)if(!c.bH(t[A],d[A])){_=!0;break}if(!_)return;const w={now:z.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=t,this.sky.setSky(t,u),this.sky.updateTransitions(w)}_setProjectionInternal(t){const u=(function(d){if(Array.isArray(d)){const _=new yl({type:d});return{projection:_,transform:new pc,cameraHelper:new xf(_)}}switch(d){case"mercator":return{projection:new _r,transform:new Nr,cameraHelper:new Mn};case"globe":{const _=new yl({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:_,transform:new pc,cameraHelper:new xf(_)}}case"vertical-perspective":return{projection:new ml,transform:new dc,cameraHelper:new Ua};default:return c.w(`Unknown projection name: ${d}. Falling back to mercator projection.`),{projection:new _r,transform:new Nr,cameraHelper:new Mn}}})(t);this.projection=u.projection,this.map.migrateProjection(u.transform,u.cameraHelper);for(const d in this.sourceCaches)this.sourceCaches[d].reload()}_validate(t,u,d,_,w={}){return(!w||w.validate!==!1)&&gh(this,t.call(c.z,c.e({key:u,style:this.serialize(),value:d,styleSpec:c.v},_)))}_remove(t=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),An().off(Do,this._rtlPluginLoaded);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const d=this.sourceCaches[u];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),t&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(t)}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(const u in this.sourceCaches)this.sourceCaches[u].update(t,this.map.terrain)}_generateCollisionBoxes(){for(const t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(t,u,d,_,w=!1){let A=!1,I=!1;const k={};for(const N of this._order){const B=this._layers[N];if(B.type!=="symbol")continue;if(!k[B.source]){const H=this.sourceCaches[B.source];k[B.source]=H.getRenderableIds(!0).map((K=>H.getTileByID(K))).sort(((K,ie)=>ie.tileID.overscaledZ-K.tileID.overscaledZ||(K.tileID.isLessThan(ie.tileID)?-1:1)))}const W=this.crossTileSymbolIndex.addLayer(B,k[B.source],t.center.lng);A=A||W}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((w=w||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(z.now(),t.zoom))&&(this.pauseablePlacement=new lc(t,this.map.terrain,this._order,w,u,d,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,k),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(z.now()),I=!0),A&&this.pauseablePlacement.placement.setStale()),I||A)for(const N of this._order){const B=this._layers[N];B.type==="symbol"&&this.placement.updateLayerOpacities(B,k[B.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(z.now())}_releaseSymbolFadeTiles(){for(const t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,u){return c._(this,void 0,void 0,(function*(){const d=yield this.imageManager.getImages(u.icons);this._updateTilesForChangedImages();const _=this.sourceCaches[u.source];return _&&_.setDependencies(u.tileID.key,u.type,u.icons),d}))}getGlyphs(t,u){return c._(this,void 0,void 0,(function*(){const d=yield this.glyphManager.getGlyphs(u.stacks),_=this.sourceCaches[u.source];return _&&_.setDependencies(u.tileID.key,u.type,[""]),d}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(t,u={}){this._checkLoaded(),t&&this._validate(c.z.glyphs,"glyphs",t,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=t,this.glyphManager.entries={},this.glyphManager.setURL(t))}addSprite(t,u,d={},_){this._checkLoaded();const w=[{id:t,url:u}],A=[...Ae(this.stylesheet.sprite),...w];this._validate(c.z.sprite,"sprite",A,null,d)||(this.stylesheet.sprite=A,this._loadSprite(w,!0,_))}removeSprite(t){this._checkLoaded();const u=Ae(this.stylesheet.sprite);if(u.find((d=>d.id===t))){if(this._spritesImagesIds[t])for(const d of this._spritesImagesIds[t])this.imageManager.removeImage(d),this._changedImages[d]=!0;u.splice(u.findIndex((d=>d.id===t)),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[t],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}else this.fire(new c.k(new Error(`Sprite "${t}" doesn't exists on this map.`)))}getSprite(){return Ae(this.stylesheet.sprite)}setSprite(t,u={},d){this._checkLoaded(),t&&this._validate(c.z.sprite,"sprite",t,null,u)||(this.stylesheet.sprite=t,t?this._loadSprite(t,!0,d):(this._unloadSprite(),d&&d(null)))}}var fm=c.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class dm{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,u,d,_,w,A,I,k,N){this.context=t;let B=this.boundPaintVertexBuffers.length!==_.length;for(let W=0;!B&&W<_.length;W++)this.boundPaintVertexBuffers[W]!==_[W]&&(B=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==d||B||this.boundIndexBuffer!==w||this.boundVertexOffset!==A||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==k||this.boundDynamicVertexBuffer3!==N?this.freshBind(u,d,_,w,A,I,k,N):(t.bindVertexArray.set(this.vao),I&&I.bind(),w&&w.dynamicDraw&&w.bind(),k&&k.bind(),N&&N.bind())}freshBind(t,u,d,_,w,A,I,k){const N=t.numAttributes,B=this.context,W=B.gl;this.vao&&this.destroy(),this.vao=B.createVertexArray(),B.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=_,this.boundVertexOffset=w,this.boundDynamicVertexBuffer=A,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=k,u.enableAttributes(W,t);for(const H of d)H.enableAttributes(W,t);A&&A.enableAttributes(W,t),I&&I.enableAttributes(W,t),k&&k.enableAttributes(W,t),u.bind(),u.setVertexAttribPointers(W,t,w);for(const H of d)H.bind(),H.setVertexAttribPointers(W,t,w);A&&(A.bind(),A.setVertexAttribPointers(W,t,w)),_&&_.bind(),I&&(I.bind(),I.setVertexAttribPointers(W,t,w)),k&&(k.bind(),k.setVertexAttribPointers(W,t,w)),B.currentNumAttributes=N}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const vh=(b,t,u,d,_)=>({u_texture:0,u_ele_delta:b,u_fog_matrix:t,u_fog_color:u?u.properties.get("fog-color"):c.bf.white,u_fog_ground_blend:u?u.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:_?0:u?u.calculateFogBlendOpacity(d):0,u_horizon_color:u?u.properties.get("horizon-color"):c.bf.white,u_horizon_fog_blend:u?u.properties.get("horizon-fog-blend"):1,u_is_globe_mode:_?1:0}),wf={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function bl(b){const t=[];for(let u=0;u<b.length;u++){if(b[u]===null)continue;const d=b[u].split(" ");t.push(d.pop())}return t}class Pf{constructor(t,u,d,_,w,A,I,k,N=[]){const B=t.gl;this.program=B.createProgram();const W=bl(u.staticAttributes),H=d?d.getBinderAttributes():[],K=W.concat(H),ie=ao.prelude.staticUniforms?bl(ao.prelude.staticUniforms):[],ce=I.staticUniforms?bl(I.staticUniforms):[],he=u.staticUniforms?bl(u.staticUniforms):[],fe=d?d.getBinderUniforms():[],me=ie.concat(ce).concat(he).concat(fe),xe=[];for(const je of me)xe.indexOf(je)<0&&xe.push(je);const ye=d?d.defines():[];ka(B)&&ye.unshift("#version 300 es"),w&&ye.push("#define OVERDRAW_INSPECTOR;"),A&&ye.push("#define TERRAIN3D;"),k&&ye.push(k),N&&ye.push(...N);let we=ye.concat(ao.prelude.fragmentSource,I.fragmentSource,u.fragmentSource).join(`
`),Te=ye.concat(ao.prelude.vertexSource,I.vertexSource,u.vertexSource).join(`
`);ka(B)||(we=(function(je){return je.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(we),Te=(function(je){return je.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(Te));const ge=B.createShader(B.FRAGMENT_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);if(B.shaderSource(ge,we),B.compileShader(ge),!B.getShaderParameter(ge,B.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${B.getShaderInfoLog(ge)}`);B.attachShader(this.program,ge);const ke=B.createShader(B.VERTEX_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);if(B.shaderSource(ke,Te),B.compileShader(ke),!B.getShaderParameter(ke,B.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${B.getShaderInfoLog(ke)}`);B.attachShader(this.program,ke),this.attributes={};const Ze={};this.numAttributes=K.length;for(let je=0;je<this.numAttributes;je++)K[je]&&(B.bindAttribLocation(this.program,je,K[je]),this.attributes[K[je]]=je);if(B.linkProgram(this.program),!B.getProgramParameter(this.program,B.LINK_STATUS))throw new Error(`Program failed to link: ${B.getProgramInfoLog(this.program)}`);B.deleteShader(ke),B.deleteShader(ge);for(let je=0;je<xe.length;je++){const He=xe[je];if(He&&!Ze[He]){const Ye=B.getUniformLocation(this.program,He);Ye&&(Ze[He]=Ye)}}this.fixedUniforms=_(t,Ze),this.terrainUniforms=((je,He)=>({u_depth:new c.bP(je,He.u_depth),u_terrain:new c.bP(je,He.u_terrain),u_terrain_dim:new c.bg(je,He.u_terrain_dim),u_terrain_matrix:new c.bR(je,He.u_terrain_matrix),u_terrain_unpack:new c.bS(je,He.u_terrain_unpack),u_terrain_exaggeration:new c.bg(je,He.u_terrain_exaggeration)}))(t,Ze),this.projectionUniforms=((je,He)=>({u_projection_matrix:new c.bR(je,He.u_projection_matrix),u_projection_tile_mercator_coords:new c.bS(je,He.u_projection_tile_mercator_coords),u_projection_clipping_plane:new c.bS(je,He.u_projection_clipping_plane),u_projection_transition:new c.bg(je,He.u_projection_transition),u_projection_fallback_matrix:new c.bR(je,He.u_projection_fallback_matrix)}))(t,Ze),this.binderUniforms=d?d.getUniforms(t,Ze):[]}draw(t,u,d,_,w,A,I,k,N,B,W,H,K,ie,ce,he,fe,me,xe){const ye=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(d),t.setStencilMode(_),t.setColorMode(w),t.setCullFace(A),k){t.activeTexture.set(ye.TEXTURE2),ye.bindTexture(ye.TEXTURE_2D,k.depthTexture),t.activeTexture.set(ye.TEXTURE3),ye.bindTexture(ye.TEXTURE_2D,k.texture);for(const Te in this.terrainUniforms)this.terrainUniforms[Te].set(k[Te])}if(N)for(const Te in N)this.projectionUniforms[wf[Te]].set(N[Te]);if(I)for(const Te in this.fixedUniforms)this.fixedUniforms[Te].set(I[Te]);he&&he.setUniforms(t,this.binderUniforms,ie,{zoom:ce});let we=0;switch(u){case ye.LINES:we=2;break;case ye.TRIANGLES:we=3;break;case ye.LINE_STRIP:we=1}for(const Te of K.get()){const ge=Te.vaos||(Te.vaos={});(ge[B]||(ge[B]=new dm)).bind(t,this,W,he?he.getPaintVertexBuffers():[],H,Te.vertexOffset,fe,me,xe),ye.drawElements(u,Te.primitiveLength*we,ye.UNSIGNED_SHORT,Te.primitiveOffset*we*2)}}}function yu(b,t,u){const d=1/c.aC(u,1,t.transform.tileZoom),_=Math.pow(2,u.tileID.overscaledZ),w=u.tileSize*Math.pow(2,t.transform.tileZoom)/_,A=w*(u.tileID.canonical.x+u.tileID.wrap*_),I=w*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[d,b.fromScale,b.toScale],u_fade:b.t,u_pixel_coord_upper:[A>>16,I>>16],u_pixel_coord_lower:[65535&A,65535&I]}}const Wa=(b,t,u,d)=>{const _=b.style.light,w=_.properties.get("position"),A=[w.x,w.y,w.z],I=c.bV();_.properties.get("anchor")==="viewport"&&c.bW(I,b.transform.bearingInRadians),c.bX(A,A,I);const k=b.transform.transformLightDirection(A),N=_.properties.get("color");return{u_lightpos:A,u_lightpos_globe:k,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[N.r,N.g,N.b],u_vertical_gradient:+t,u_opacity:u,u_fill_translate:d}},pm=(b,t,u,d,_,w,A)=>c.e(Wa(b,t,u,d),yu(w,b,A),{u_height_factor:-Math.pow(2,_.overscaledZ)/A.tileSize/8}),mc=(b,t,u,d)=>c.e(yu(t,b,u),{u_fill_translate:d}),gu=(b,t)=>({u_world:b,u_fill_translate:t}),vu=(b,t,u,d,_)=>c.e(mc(b,t,u,_),{u_world:d}),Zd=(b,t,u,d,_)=>{const w=b.transform;let A,I,k=0;if(u.paint.get("circle-pitch-alignment")==="map"){const N=c.aC(t,1,w.zoom);A=!0,I=[N,N],k=N/(c.$*Math.pow(2,t.tileID.overscaledZ))*2*Math.PI*_}else A=!1,I=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_scale_with_map:+(u.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+A,u_device_pixel_ratio:b.pixelRatio,u_extrude_scale:I,u_globe_extrude_scale:k,u_translate:d}},yc=b=>({u_pixel_extrude_scale:[1/b.width,1/b.height]}),_u=b=>({u_viewport_size:[b.width,b.height]}),xl=(b,t=1)=>({u_color:b,u_overlay:0,u_overlay_scale:t}),Yd=(b,t,u,d)=>{const _=c.aC(b,1,t)/(c.$*Math.pow(2,b.tileID.overscaledZ))*2*Math.PI*d;return{u_extrude_scale:c.aC(b,1,t),u_intensity:u,u_globe_extrude_scale:_}},Af=(b,t,u,d)=>{const _=c.L();c.bY(_,0,b.width,b.height,0,0,1);const w=b.context.gl;return{u_matrix:_,u_world:[w.drawingBufferWidth,w.drawingBufferHeight],u_image:u,u_color_ramp:d,u_opacity:t.paint.get("heatmap-opacity")}},Qd=(b,t,u)=>{const d=u.paint.get("hillshade-accent-color");let _;switch(u.paint.get("hillshade-method")){case"basic":_=4;break;case"combined":_=1;break;case"igor":_=2;break;case"multidirectional":_=3;break;default:_=0}const w=u.getIlluminationProperties();for(let A=0;A<w.directionRadians.length;A++)u.paint.get("hillshade-illumination-anchor")==="viewport"&&(w.directionRadians[A]+=b.transform.bearingInRadians);return{u_image:0,u_latrange:Sl(0,t.tileID),u_exaggeration:u.paint.get("hillshade-exaggeration"),u_altitudes:w.altitudeRadians,u_azimuths:w.directionRadians,u_accent:d,u_method:_,u_highlights:w.highlightColor,u_shadows:w.shadowColor}},Cf=(b,t)=>{const u=t.stride,d=c.L();return c.bY(d,0,c.$,-c.$,0,0,1),c.M(d,d,[0,-c.$,0]),{u_matrix:d,u_image:1,u_dimension:[u,u],u_zoom:b.overscaledZ,u_unpack:t.getUnpackVector()}};function Sl(b,t){const u=Math.pow(2,t.canonical.z),d=t.canonical.y;return[new c.a1(0,d/u).toLngLat().lat,new c.a1(0,(d+1)/u).toLngLat().lat]}const bu=(b,t,u=0)=>({u_image:0,u_unpack:t.getUnpackVector(),u_dimension:[t.stride,t.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:u,u_opacity:b.paint.get("color-relief-opacity")}),_h=(b,t,u,d)=>{const _=b.transform;return{u_translation:_c(b,t,u),u_ratio:d/c.aC(t,1,_.zoom),u_device_pixel_ratio:b.pixelRatio,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},gc=(b,t,u,d,_)=>c.e(_h(b,t,u,d),{u_image:0,u_image_height:_}),Df=(b,t,u,d,_)=>{const w=b.transform,A=vc(t,w);return{u_translation:_c(b,t,u),u_texsize:t.imageAtlasTexture.size,u_ratio:d/c.aC(t,1,w.zoom),u_device_pixel_ratio:b.pixelRatio,u_image:0,u_scale:[A,_.fromScale,_.toScale],u_fade:_.t,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},zs=(b,t,u,d,_,w)=>{const A=b.lineAtlas,I=vc(t,b.transform),k=u.layout.get("line-cap")==="round",N=A.getDash(_.from,k),B=A.getDash(_.to,k),W=N.width*w.fromScale,H=B.width*w.toScale;return c.e(_h(b,t,u,d),{u_patternscale_a:[I/W,-N.height/2],u_patternscale_b:[I/H,-B.height/2],u_sdfgamma:A.width/(256*Math.min(W,H)*b.pixelRatio)/2,u_image:0,u_tex_y_a:N.y,u_tex_y_b:B.y,u_mix:w.t})};function vc(b,t){return 1/c.aC(b,1,t.tileZoom)}function _c(b,t,u){return c.aD(b.transform,t,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const xu=(b,t,u,d,_)=>{return{u_tl_parent:b,u_scale_parent:t,u_buffer_scale:1,u_fade_t:u.mix,u_opacity:u.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(A=d.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(w=d.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:Xd(d.paint.get("raster-hue-rotate")),u_coords_top:[_[0].x,_[0].y,_[1].x,_[1].y],u_coords_bottom:[_[3].x,_[3].y,_[2].x,_[2].y]};var w,A};function Xd(b){b*=Math.PI/180;const t=Math.sin(b),u=Math.cos(b);return[(2*u+1)/3,(-Math.sqrt(3)*t-u+1)/3,(Math.sqrt(3)*t-u+1)/3]}const Su=(b,t,u,d,_,w,A,I,k,N,B,W,H)=>{const K=A.transform;return{u_is_size_zoom_constant:+(b==="constant"||b==="source"),u_is_size_feature_constant:+(b==="constant"||b==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:K.cameraToCenterDistance,u_pitch:K.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:K.width/K.height,u_fade_change:A.options.fadeDuration?A.symbolFadeChange:1,u_label_plane_matrix:I,u_coord_matrix:k,u_is_text:+B,u_pitch_with_map:+d,u_is_along_line:_,u_is_variable_anchor:w,u_texsize:W,u_texture:0,u_translation:N,u_pitched_scale:H}},Kd=(b,t,u,d,_,w,A,I,k,N,B,W,H,K)=>{const ie=A.transform;return c.e(Su(b,t,u,d,_,w,A,I,k,N,B,W,K),{u_gamma_scale:d?Math.cos(ie.pitch*Math.PI/180)*ie.cameraToCenterDistance:1,u_device_pixel_ratio:A.pixelRatio,u_is_halo:1})},mm=(b,t,u,d,_,w,A,I,k,N,B,W,H)=>c.e(Kd(b,t,u,d,_,w,A,I,k,N,!0,B,0,H),{u_texsize_icon:W,u_texture_icon:1}),Jd=(b,t)=>({u_opacity:b,u_color:t}),ep=(b,t,u,d,_)=>c.e((function(w,A,I,k){const N=I.imageManager.getPattern(w.from.toString()),B=I.imageManager.getPattern(w.to.toString()),{width:W,height:H}=I.imageManager.getPixelSize(),K=Math.pow(2,k.tileID.overscaledZ),ie=k.tileSize*Math.pow(2,I.transform.tileZoom)/K,ce=ie*(k.tileID.canonical.x+k.tileID.wrap*K),he=ie*k.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:N.tl,u_pattern_br_a:N.br,u_pattern_tl_b:B.tl,u_pattern_br_b:B.br,u_texsize:[W,H],u_mix:A.t,u_pattern_size_a:N.displaySize,u_pattern_size_b:B.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/c.aC(k,1,I.transform.tileZoom),u_pixel_coord_upper:[ce>>16,he>>16],u_pixel_coord_lower:[65535&ce,65535&he]}})(u,_,t,d),{u_opacity:b}),Mf=(b,t)=>{},Za={fillExtrusion:(b,t)=>({u_lightpos:new c.bT(b,t.u_lightpos),u_lightpos_globe:new c.bT(b,t.u_lightpos_globe),u_lightintensity:new c.bg(b,t.u_lightintensity),u_lightcolor:new c.bT(b,t.u_lightcolor),u_vertical_gradient:new c.bg(b,t.u_vertical_gradient),u_opacity:new c.bg(b,t.u_opacity),u_fill_translate:new c.bU(b,t.u_fill_translate)}),fillExtrusionPattern:(b,t)=>({u_lightpos:new c.bT(b,t.u_lightpos),u_lightpos_globe:new c.bT(b,t.u_lightpos_globe),u_lightintensity:new c.bg(b,t.u_lightintensity),u_lightcolor:new c.bT(b,t.u_lightcolor),u_vertical_gradient:new c.bg(b,t.u_vertical_gradient),u_height_factor:new c.bg(b,t.u_height_factor),u_opacity:new c.bg(b,t.u_opacity),u_fill_translate:new c.bU(b,t.u_fill_translate),u_image:new c.bP(b,t.u_image),u_texsize:new c.bU(b,t.u_texsize),u_pixel_coord_upper:new c.bU(b,t.u_pixel_coord_upper),u_pixel_coord_lower:new c.bU(b,t.u_pixel_coord_lower),u_scale:new c.bT(b,t.u_scale),u_fade:new c.bg(b,t.u_fade)}),fill:(b,t)=>({u_fill_translate:new c.bU(b,t.u_fill_translate)}),fillPattern:(b,t)=>({u_image:new c.bP(b,t.u_image),u_texsize:new c.bU(b,t.u_texsize),u_pixel_coord_upper:new c.bU(b,t.u_pixel_coord_upper),u_pixel_coord_lower:new c.bU(b,t.u_pixel_coord_lower),u_scale:new c.bT(b,t.u_scale),u_fade:new c.bg(b,t.u_fade),u_fill_translate:new c.bU(b,t.u_fill_translate)}),fillOutline:(b,t)=>({u_world:new c.bU(b,t.u_world),u_fill_translate:new c.bU(b,t.u_fill_translate)}),fillOutlinePattern:(b,t)=>({u_world:new c.bU(b,t.u_world),u_image:new c.bP(b,t.u_image),u_texsize:new c.bU(b,t.u_texsize),u_pixel_coord_upper:new c.bU(b,t.u_pixel_coord_upper),u_pixel_coord_lower:new c.bU(b,t.u_pixel_coord_lower),u_scale:new c.bT(b,t.u_scale),u_fade:new c.bg(b,t.u_fade),u_fill_translate:new c.bU(b,t.u_fill_translate)}),circle:(b,t)=>({u_camera_to_center_distance:new c.bg(b,t.u_camera_to_center_distance),u_scale_with_map:new c.bP(b,t.u_scale_with_map),u_pitch_with_map:new c.bP(b,t.u_pitch_with_map),u_extrude_scale:new c.bU(b,t.u_extrude_scale),u_device_pixel_ratio:new c.bg(b,t.u_device_pixel_ratio),u_globe_extrude_scale:new c.bg(b,t.u_globe_extrude_scale),u_translate:new c.bU(b,t.u_translate)}),collisionBox:(b,t)=>({u_pixel_extrude_scale:new c.bU(b,t.u_pixel_extrude_scale)}),collisionCircle:(b,t)=>({u_viewport_size:new c.bU(b,t.u_viewport_size)}),debug:(b,t)=>({u_color:new c.bQ(b,t.u_color),u_overlay:new c.bP(b,t.u_overlay),u_overlay_scale:new c.bg(b,t.u_overlay_scale)}),depth:Mf,clippingMask:Mf,heatmap:(b,t)=>({u_extrude_scale:new c.bg(b,t.u_extrude_scale),u_intensity:new c.bg(b,t.u_intensity),u_globe_extrude_scale:new c.bg(b,t.u_globe_extrude_scale)}),heatmapTexture:(b,t)=>({u_matrix:new c.bR(b,t.u_matrix),u_world:new c.bU(b,t.u_world),u_image:new c.bP(b,t.u_image),u_color_ramp:new c.bP(b,t.u_color_ramp),u_opacity:new c.bg(b,t.u_opacity)}),hillshade:(b,t)=>({u_image:new c.bP(b,t.u_image),u_latrange:new c.bU(b,t.u_latrange),u_exaggeration:new c.bg(b,t.u_exaggeration),u_altitudes:new c.b_(b,t.u_altitudes),u_azimuths:new c.b_(b,t.u_azimuths),u_accent:new c.bQ(b,t.u_accent),u_method:new c.bP(b,t.u_method),u_shadows:new c.bZ(b,t.u_shadows),u_highlights:new c.bZ(b,t.u_highlights)}),hillshadePrepare:(b,t)=>({u_matrix:new c.bR(b,t.u_matrix),u_image:new c.bP(b,t.u_image),u_dimension:new c.bU(b,t.u_dimension),u_zoom:new c.bg(b,t.u_zoom),u_unpack:new c.bS(b,t.u_unpack)}),colorRelief:(b,t)=>({u_image:new c.bP(b,t.u_image),u_unpack:new c.bS(b,t.u_unpack),u_dimension:new c.bU(b,t.u_dimension),u_elevation_stops:new c.bP(b,t.u_elevation_stops),u_color_stops:new c.bP(b,t.u_color_stops),u_color_ramp_size:new c.bP(b,t.u_color_ramp_size),u_opacity:new c.bg(b,t.u_opacity)}),line:(b,t)=>({u_translation:new c.bU(b,t.u_translation),u_ratio:new c.bg(b,t.u_ratio),u_device_pixel_ratio:new c.bg(b,t.u_device_pixel_ratio),u_units_to_pixels:new c.bU(b,t.u_units_to_pixels)}),lineGradient:(b,t)=>({u_translation:new c.bU(b,t.u_translation),u_ratio:new c.bg(b,t.u_ratio),u_device_pixel_ratio:new c.bg(b,t.u_device_pixel_ratio),u_units_to_pixels:new c.bU(b,t.u_units_to_pixels),u_image:new c.bP(b,t.u_image),u_image_height:new c.bg(b,t.u_image_height)}),linePattern:(b,t)=>({u_translation:new c.bU(b,t.u_translation),u_texsize:new c.bU(b,t.u_texsize),u_ratio:new c.bg(b,t.u_ratio),u_device_pixel_ratio:new c.bg(b,t.u_device_pixel_ratio),u_image:new c.bP(b,t.u_image),u_units_to_pixels:new c.bU(b,t.u_units_to_pixels),u_scale:new c.bT(b,t.u_scale),u_fade:new c.bg(b,t.u_fade)}),lineSDF:(b,t)=>({u_translation:new c.bU(b,t.u_translation),u_ratio:new c.bg(b,t.u_ratio),u_device_pixel_ratio:new c.bg(b,t.u_device_pixel_ratio),u_units_to_pixels:new c.bU(b,t.u_units_to_pixels),u_patternscale_a:new c.bU(b,t.u_patternscale_a),u_patternscale_b:new c.bU(b,t.u_patternscale_b),u_sdfgamma:new c.bg(b,t.u_sdfgamma),u_image:new c.bP(b,t.u_image),u_tex_y_a:new c.bg(b,t.u_tex_y_a),u_tex_y_b:new c.bg(b,t.u_tex_y_b),u_mix:new c.bg(b,t.u_mix)}),raster:(b,t)=>({u_tl_parent:new c.bU(b,t.u_tl_parent),u_scale_parent:new c.bg(b,t.u_scale_parent),u_buffer_scale:new c.bg(b,t.u_buffer_scale),u_fade_t:new c.bg(b,t.u_fade_t),u_opacity:new c.bg(b,t.u_opacity),u_image0:new c.bP(b,t.u_image0),u_image1:new c.bP(b,t.u_image1),u_brightness_low:new c.bg(b,t.u_brightness_low),u_brightness_high:new c.bg(b,t.u_brightness_high),u_saturation_factor:new c.bg(b,t.u_saturation_factor),u_contrast_factor:new c.bg(b,t.u_contrast_factor),u_spin_weights:new c.bT(b,t.u_spin_weights),u_coords_top:new c.bS(b,t.u_coords_top),u_coords_bottom:new c.bS(b,t.u_coords_bottom)}),symbolIcon:(b,t)=>({u_is_size_zoom_constant:new c.bP(b,t.u_is_size_zoom_constant),u_is_size_feature_constant:new c.bP(b,t.u_is_size_feature_constant),u_size_t:new c.bg(b,t.u_size_t),u_size:new c.bg(b,t.u_size),u_camera_to_center_distance:new c.bg(b,t.u_camera_to_center_distance),u_pitch:new c.bg(b,t.u_pitch),u_rotate_symbol:new c.bP(b,t.u_rotate_symbol),u_aspect_ratio:new c.bg(b,t.u_aspect_ratio),u_fade_change:new c.bg(b,t.u_fade_change),u_label_plane_matrix:new c.bR(b,t.u_label_plane_matrix),u_coord_matrix:new c.bR(b,t.u_coord_matrix),u_is_text:new c.bP(b,t.u_is_text),u_pitch_with_map:new c.bP(b,t.u_pitch_with_map),u_is_along_line:new c.bP(b,t.u_is_along_line),u_is_variable_anchor:new c.bP(b,t.u_is_variable_anchor),u_texsize:new c.bU(b,t.u_texsize),u_texture:new c.bP(b,t.u_texture),u_translation:new c.bU(b,t.u_translation),u_pitched_scale:new c.bg(b,t.u_pitched_scale)}),symbolSDF:(b,t)=>({u_is_size_zoom_constant:new c.bP(b,t.u_is_size_zoom_constant),u_is_size_feature_constant:new c.bP(b,t.u_is_size_feature_constant),u_size_t:new c.bg(b,t.u_size_t),u_size:new c.bg(b,t.u_size),u_camera_to_center_distance:new c.bg(b,t.u_camera_to_center_distance),u_pitch:new c.bg(b,t.u_pitch),u_rotate_symbol:new c.bP(b,t.u_rotate_symbol),u_aspect_ratio:new c.bg(b,t.u_aspect_ratio),u_fade_change:new c.bg(b,t.u_fade_change),u_label_plane_matrix:new c.bR(b,t.u_label_plane_matrix),u_coord_matrix:new c.bR(b,t.u_coord_matrix),u_is_text:new c.bP(b,t.u_is_text),u_pitch_with_map:new c.bP(b,t.u_pitch_with_map),u_is_along_line:new c.bP(b,t.u_is_along_line),u_is_variable_anchor:new c.bP(b,t.u_is_variable_anchor),u_texsize:new c.bU(b,t.u_texsize),u_texture:new c.bP(b,t.u_texture),u_gamma_scale:new c.bg(b,t.u_gamma_scale),u_device_pixel_ratio:new c.bg(b,t.u_device_pixel_ratio),u_is_halo:new c.bP(b,t.u_is_halo),u_translation:new c.bU(b,t.u_translation),u_pitched_scale:new c.bg(b,t.u_pitched_scale)}),symbolTextAndIcon:(b,t)=>({u_is_size_zoom_constant:new c.bP(b,t.u_is_size_zoom_constant),u_is_size_feature_constant:new c.bP(b,t.u_is_size_feature_constant),u_size_t:new c.bg(b,t.u_size_t),u_size:new c.bg(b,t.u_size),u_camera_to_center_distance:new c.bg(b,t.u_camera_to_center_distance),u_pitch:new c.bg(b,t.u_pitch),u_rotate_symbol:new c.bP(b,t.u_rotate_symbol),u_aspect_ratio:new c.bg(b,t.u_aspect_ratio),u_fade_change:new c.bg(b,t.u_fade_change),u_label_plane_matrix:new c.bR(b,t.u_label_plane_matrix),u_coord_matrix:new c.bR(b,t.u_coord_matrix),u_is_text:new c.bP(b,t.u_is_text),u_pitch_with_map:new c.bP(b,t.u_pitch_with_map),u_is_along_line:new c.bP(b,t.u_is_along_line),u_is_variable_anchor:new c.bP(b,t.u_is_variable_anchor),u_texsize:new c.bU(b,t.u_texsize),u_texsize_icon:new c.bU(b,t.u_texsize_icon),u_texture:new c.bP(b,t.u_texture),u_texture_icon:new c.bP(b,t.u_texture_icon),u_gamma_scale:new c.bg(b,t.u_gamma_scale),u_device_pixel_ratio:new c.bg(b,t.u_device_pixel_ratio),u_is_halo:new c.bP(b,t.u_is_halo),u_translation:new c.bU(b,t.u_translation),u_pitched_scale:new c.bg(b,t.u_pitched_scale)}),background:(b,t)=>({u_opacity:new c.bg(b,t.u_opacity),u_color:new c.bQ(b,t.u_color)}),backgroundPattern:(b,t)=>({u_opacity:new c.bg(b,t.u_opacity),u_image:new c.bP(b,t.u_image),u_pattern_tl_a:new c.bU(b,t.u_pattern_tl_a),u_pattern_br_a:new c.bU(b,t.u_pattern_br_a),u_pattern_tl_b:new c.bU(b,t.u_pattern_tl_b),u_pattern_br_b:new c.bU(b,t.u_pattern_br_b),u_texsize:new c.bU(b,t.u_texsize),u_mix:new c.bg(b,t.u_mix),u_pattern_size_a:new c.bU(b,t.u_pattern_size_a),u_pattern_size_b:new c.bU(b,t.u_pattern_size_b),u_scale_a:new c.bg(b,t.u_scale_a),u_scale_b:new c.bg(b,t.u_scale_b),u_pixel_coord_upper:new c.bU(b,t.u_pixel_coord_upper),u_pixel_coord_lower:new c.bU(b,t.u_pixel_coord_lower),u_tile_units_to_pixels:new c.bg(b,t.u_tile_units_to_pixels)}),terrain:(b,t)=>({u_texture:new c.bP(b,t.u_texture),u_ele_delta:new c.bg(b,t.u_ele_delta),u_fog_matrix:new c.bR(b,t.u_fog_matrix),u_fog_color:new c.bQ(b,t.u_fog_color),u_fog_ground_blend:new c.bg(b,t.u_fog_ground_blend),u_fog_ground_blend_opacity:new c.bg(b,t.u_fog_ground_blend_opacity),u_horizon_color:new c.bQ(b,t.u_horizon_color),u_horizon_fog_blend:new c.bg(b,t.u_horizon_fog_blend),u_is_globe_mode:new c.bg(b,t.u_is_globe_mode)}),terrainDepth:(b,t)=>({u_ele_delta:new c.bg(b,t.u_ele_delta)}),terrainCoords:(b,t)=>({u_texture:new c.bP(b,t.u_texture),u_terrain_coords_id:new c.bg(b,t.u_terrain_coords_id),u_ele_delta:new c.bg(b,t.u_ele_delta)}),projectionErrorMeasurement:(b,t)=>({u_input:new c.bg(b,t.u_input),u_output_expected:new c.bg(b,t.u_output_expected)}),atmosphere:(b,t)=>({u_sun_pos:new c.bT(b,t.u_sun_pos),u_atmosphere_blend:new c.bg(b,t.u_atmosphere_blend),u_globe_position:new c.bT(b,t.u_globe_position),u_globe_radius:new c.bg(b,t.u_globe_radius),u_inv_proj_matrix:new c.bR(b,t.u_inv_proj_matrix)}),sky:(b,t)=>({u_sky_color:new c.bQ(b,t.u_sky_color),u_horizon_color:new c.bQ(b,t.u_horizon_color),u_horizon:new c.bU(b,t.u_horizon),u_horizon_normal:new c.bU(b,t.u_horizon_normal),u_sky_horizon_blend:new c.bg(b,t.u_sky_horizon_blend),u_sky_blend:new c.bg(b,t.u_sky_blend)})};class wu{constructor(t,u,d){this.context=t;const _=t.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const bc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class zo{constructor(t,u,d,_){this.length=u.length,this.attributes=d,this.itemSize=u.bytesPerElement,this.dynamicDraw=_,this.context=t;const w=t.gl;this.buffer=w.createBuffer(),t.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,u){for(let d=0;d<this.attributes.length;d++){const _=u.attributes[this.attributes[d].name];_!==void 0&&t.enableVertexAttribArray(_)}}setVertexAttribPointers(t,u,d){for(let _=0;_<this.attributes.length;_++){const w=this.attributes[_],A=u.attributes[w.name];A!==void 0&&t.vertexAttribPointer(A,w.components,t[bc[w.type]],!1,this.itemSize,w.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ir{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class bh extends Ir{getDefault(){return c.bf.transparent}set(t){const u=this.current;(t.r!==u.r||t.g!==u.g||t.b!==u.b||t.a!==u.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class xc extends Ir{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class tp extends Ir{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class Fs extends Ir{getDefault(){return[!0,!0,!0,!0]}set(t){const u=this.current;(t[0]!==u[0]||t[1]!==u[1]||t[2]!==u[2]||t[3]!==u[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class rs extends Ir{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class wl extends Ir{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class Tf extends Ir{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const u=this.current;(t.func!==u.func||t.ref!==u.ref||t.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class rp extends Ir{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const u=this.current;(t[0]!==u[0]||t[1]!==u[1]||t[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class Pl extends Ir{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;t?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=t,this.dirty=!1}}class Pu extends Ir{getDefault(){return[0,1]}set(t){const u=this.current;(t[0]!==u[0]||t[1]!==u[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class xh extends Ir{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;t?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=t,this.dirty=!1}}class np extends Ir{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class Ns extends Ir{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;t?u.enable(u.BLEND):u.disable(u.BLEND),this.current=t,this.dirty=!1}}class Sc extends Ir{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const u=this.current;(t[0]!==u[0]||t[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class wc extends Ir{getDefault(){return c.bf.transparent}set(t){const u=this.current;(t.r!==u.r||t.g!==u.g||t.b!==u.b||t.a!==u.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Pc extends Ir{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class Ef extends Ir{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;t?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=t,this.dirty=!1}}class Al extends Ir{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class Ac extends Ir{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class Cl extends Ir{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class Ri extends Ir{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class Sh extends Ir{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const u=this.current;(t[0]!==u[0]||t[1]!==u[1]||t[2]!==u[2]||t[3]!==u[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Yi extends Ir{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class wh extends Ir{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class da extends Ir{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class Ya extends Ir{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ns extends Ir{getDefault(){return null}set(t){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Dl extends Ir{getDefault(){return null}set(t){var u;if(t===this.current&&!this.dirty)return;const d=this.gl;ka(d)?d.bindVertexArray(t):(u=d.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(t),this.current=t,this.dirty=!1}}class Ml extends Ir{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class Cc extends Ir{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class js extends Ir{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class Ii extends Ir{constructor(t,u){super(t),this.context=t,this.parent=u}getDefault(){return null}}class Rf extends Ii{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class Au extends Ii{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class gr extends Ii{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,t),this.current=t,this.dirty=!1}}const Dc="Framebuffer is not complete";class ki{constructor(t,u,d,_,w){this.context=t,this.width=u,this.height=d;const A=t.gl,I=this.framebuffer=A.createFramebuffer();if(this.colorAttachment=new Rf(t,I),_)this.depthAttachment=w?new gr(t,I):new Au(t,I);else if(w)throw new Error("Stencil cannot be set without depth");if(A.checkFramebufferStatus(A.FRAMEBUFFER)!==A.FRAMEBUFFER_COMPLETE)throw new Error(Dc)}destroy(){const t=this.context.gl,u=this.colorAttachment.get();if(u&&t.deleteTexture(u),this.depthAttachment){const d=this.depthAttachment.get();d&&t.deleteRenderbuffer(d)}t.deleteFramebuffer(this.framebuffer)}}class Ph{constructor(t){var u,d;if(this.gl=t,this.clearColor=new bh(this),this.clearDepth=new xc(this),this.clearStencil=new tp(this),this.colorMask=new Fs(this),this.depthMask=new rs(this),this.stencilMask=new wl(this),this.stencilFunc=new Tf(this),this.stencilOp=new rp(this),this.stencilTest=new Pl(this),this.depthRange=new Pu(this),this.depthTest=new xh(this),this.depthFunc=new np(this),this.blend=new Ns(this),this.blendFunc=new Sc(this),this.blendColor=new wc(this),this.blendEquation=new Pc(this),this.cullFace=new Ef(this),this.cullFaceSide=new Al(this),this.frontFace=new Ac(this),this.program=new Cl(this),this.activeTexture=new Ri(this),this.viewport=new Sh(this),this.bindFramebuffer=new Yi(this),this.bindRenderbuffer=new wh(this),this.bindTexture=new da(this),this.bindVertexBuffer=new Ya(this),this.bindElementBuffer=new ns(this),this.bindVertexArray=new Dl(this),this.pixelStoreUnpack=new Ml(this),this.pixelStoreUnpackPremultiplyAlpha=new Cc(this),this.pixelStoreUnpackFlipY=new js(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),ka(t)){this.HALF_FLOAT=t.HALF_FLOAT;const _=t.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=t.RGBA16F)!==null&&u!==void 0?u:_?.RGBA16F_EXT,this.RGB16F=(d=t.RGB16F)!==null&&d!==void 0?d:_?.RGB16F_EXT,t.getExtension("EXT_color_buffer_float")}else{t.getExtension("EXT_color_buffer_half_float"),t.getExtension("OES_texture_half_float_linear");const _=t.getExtension("OES_texture_half_float");this.HALF_FLOAT=_?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,u){return new wu(this,t,u)}createVertexBuffer(t,u,d){return new zo(this,t,u,d)}createRenderbuffer(t,u,d){const _=this.gl,w=_.createRenderbuffer();return this.bindRenderbuffer.set(w),_.renderbufferStorage(_.RENDERBUFFER,t,u,d),this.bindRenderbuffer.set(null),w}createFramebuffer(t,u,d,_){return new ki(this,t,u,d,_)}clear({color:t,depth:u,stencil:d}){const _=this.gl;let w=0;t&&(w|=_.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(w|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),d!==void 0&&(w|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),_.clear(w)}setCullFace(t){t.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){c.bH(t.blendFunction,Xr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}createVertexArray(){var t;return ka(this.gl)?this.gl.createVertexArray():(t=this.gl.getExtension("OES_vertex_array_object"))===null||t===void 0?void 0:t.createVertexArrayOES()}deleteVertexArray(t){var u;return ka(this.gl)?this.gl.deleteVertexArray(t):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(t)}unbindVAO(){this.bindVertexArray.set(null)}}let Oa;function If(b,t,u,d,_){const w=b.context,A=b.transform,I=w.gl,k=b.useProgram("collisionBox"),N=[];let B=0,W=0;for(let fe=0;fe<d.length;fe++){const me=d[fe],xe=t.getTile(me).getBucket(u);if(!xe)continue;const ye=_?xe.textCollisionBox:xe.iconCollisionBox,we=xe.collisionCircleArray;we.length>0&&(N.push({circleArray:we,circleOffset:W,coord:me}),B+=we.length/4,W=B),ye&&k.draw(w,I.LINES,lr.disabled,Dr.disabled,b.colorModeForRenderPass(),er.disabled,yc(b.transform),b.style.map.terrain&&b.style.map.terrain.getTerrainData(me),A.getProjectionData({overscaledTileID:me,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),u.id,ye.layoutVertexBuffer,ye.indexBuffer,ye.segments,null,b.transform.zoom,null,null,ye.collisionVertexBuffer)}if(!_||!N.length)return;const H=b.useProgram("collisionCircle"),K=new c.b$;K.resize(4*B),K._trim();let ie=0;for(const fe of N)for(let me=0;me<fe.circleArray.length/4;me++){const xe=4*me,ye=fe.circleArray[xe+0],we=fe.circleArray[xe+1],Te=fe.circleArray[xe+2],ge=fe.circleArray[xe+3];K.emplace(ie++,ye,we,Te,ge,0),K.emplace(ie++,ye,we,Te,ge,1),K.emplace(ie++,ye,we,Te,ge,2),K.emplace(ie++,ye,we,Te,ge,3)}(!Oa||Oa.length<2*B)&&(Oa=(function(fe){const me=2*fe,xe=new c.c1;xe.resize(me),xe._trim();for(let ye=0;ye<me;ye++){const we=6*ye;xe.uint16[we+0]=4*ye+0,xe.uint16[we+1]=4*ye+1,xe.uint16[we+2]=4*ye+2,xe.uint16[we+3]=4*ye+2,xe.uint16[we+4]=4*ye+3,xe.uint16[we+5]=4*ye+0}return xe})(B));const ce=w.createIndexBuffer(Oa,!0),he=w.createVertexBuffer(K,c.c0.members,!0);for(const fe of N){const me=_u(b.transform);H.draw(w,I.TRIANGLES,lr.disabled,Dr.disabled,b.colorModeForRenderPass(),er.disabled,me,b.style.map.terrain&&b.style.map.terrain.getTerrainData(fe.coord),null,u.id,he,ce,c.aM.simpleSegment(0,2*fe.circleOffset,fe.circleArray.length,fe.circleArray.length/2),null,b.transform.zoom,null,null,null)}he.destroy(),ce.destroy()}const Ah=c.ag(new Float32Array(16));function Bs(b,t,u,d,_,w){const{horizontalAlign:A,verticalAlign:I}=c.aH(b);return new c.P((-(A-.5)*t/_+d[0])*w,(-(I-.5)*u/_+d[1])*w)}function kf(b,t,u,d,_,w){const A=t.tileAnchorPoint.add(new c.P(t.translation[0],t.translation[1]));if(t.pitchWithMap){let I=d.mult(w);u||(I=I.rotate(-_));const k=A.add(I);return pn(k.x,k.y,t.pitchedLabelPlaneMatrix,t.getElevation).point}if(u){const I=jn(t.tileAnchorPoint.x+1,t.tileAnchorPoint.y,t).point.sub(b),k=Math.atan(I.y/I.x)+(I.x<0?Math.PI:0);return b.add(d.rotate(k))}return b.add(d)}function Mc(b,t,u,d,_,w,A,I,k,N,B,W){const H=b.text.placedSymbolArray,K=b.text.dynamicLayoutVertexArray,ie=b.icon.dynamicLayoutVertexArray,ce={};K.clear();for(let he=0;he<H.length;he++){const fe=H.get(he),me=fe.hidden||!fe.crossTileID||b.allowVerticalPlacement&&!fe.placedOrientation?null:d[fe.crossTileID];if(me){const xe=new c.P(fe.anchorX,fe.anchorY),ye={getElevation:W,width:_.width,height:_.height,pitchedLabelPlaneMatrix:w,pitchWithMap:u,transform:_,tileAnchorPoint:xe,translation:N,unwrappedTileID:B},we=u?mn(xe.x,xe.y,ye):jn(xe.x,xe.y,ye),Te=vt(_.cameraToCenterDistance,we.signedDistanceFromCamera);let ge=c.ap(b.textSizeData,I,fe)*Te/c.aB;u&&(ge*=b.tilePixelRatio/A);const{width:ke,height:Ze,anchor:je,textOffset:He,textBoxScale:Ye}=me,Pt=Bs(je,ke,Ze,He,Ye,ge),xt=_.getPitchedTextCorrection(xe.x+N[0],xe.y+N[1],B),lt=kf(we.point,ye,t,Pt,-_.bearingInRadians,xt),Ft=b.allowVerticalPlacement&&fe.placedOrientation===c.ao.vertical?Math.PI/2:0;for(let vr=0;vr<fe.numGlyphs;vr++)c.av(K,lt,Ft);k&&fe.associatedIconIndex>=0&&(ce[fe.associatedIconIndex]={shiftedAnchor:lt,angle:Ft})}else To(fe.numGlyphs,K)}if(k){ie.clear();const he=b.icon.placedSymbolArray;for(let fe=0;fe<he.length;fe++){const me=he.get(fe);if(me.hidden)To(me.numGlyphs,ie);else{const xe=ce[fe];if(xe)for(let ye=0;ye<me.numGlyphs;ye++)c.av(ie,xe.shiftedAnchor,xe.angle);else To(me.numGlyphs,ie)}}b.icon.dynamicLayoutVertexBuffer.updateData(ie)}b.text.dynamicLayoutVertexBuffer.updateData(K)}function as(b,t,u){return u.iconsInText&&t?"symbolTextAndIcon":b?"symbolSDF":"symbolIcon"}function Fo(b,t,u,d,_,w,A,I,k,N,B,W,H){const K=b.context,ie=K.gl,ce=b.transform,he=I==="map",fe=k==="map",me=I!=="viewport"&&u.layout.get("symbol-placement")!=="point",xe=he&&!fe&&!me,ye=!u.layout.get("symbol-sort-key").isConstant();let we=!1;const Te=b.getDepthModeForSublayer(0,lr.ReadOnly),ge=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ke=[],Ze=ce.getCircleRadiusCorrection();for(const je of d){const He=t.getTile(je),Ye=He.getBucket(u);if(!Ye)continue;const Pt=_?Ye.text:Ye.icon;if(!Pt||!Pt.segments.get().length||!Pt.hasVisibleVertices)continue;const xt=Pt.programConfigurations.get(u.id),lt=_||Ye.sdfIcons,Ft=_?Ye.textSizeData:Ye.iconSizeData,vr=fe||ce.pitch!==0,kr=b.useProgram(as(lt,_,Ye),xt),hn=c.an(Ft,ce.zoom),Wr=b.style.map.terrain&&b.style.map.terrain.getTerrainData(je);let Zr,rn,Kr,Yr,Mr=[0,0],ea=null;if(_)rn=He.glyphAtlasTexture,Kr=ie.LINEAR,Zr=He.glyphAtlasTexture.size,Ye.iconsInText&&(Mr=He.imageAtlasTexture.size,ea=He.imageAtlasTexture,Yr=vr||b.options.rotating||b.options.zooming||Ft.kind==="composite"||Ft.kind==="camera"?ie.LINEAR:ie.NEAREST);else{const jr=u.layout.get("icon-size").constantOr(0)!==1||Ye.iconsNeedLinear;rn=He.imageAtlasTexture,Kr=lt||b.options.rotating||b.options.zooming||jr||vr?ie.LINEAR:ie.NEAREST,Zr=He.imageAtlasTexture.size}const $n=c.aC(He,1,b.transform.zoom),ri=Qr(he,b.transform,$n),Qs=c.L();c.aq(Qs,ri);const ds=tr(fe,he,b.transform,$n),ni=c.aD(ce,He,w,A),ps=ce.getProjectionData({overscaledTileID:je,applyGlobeMatrix:!H,applyTerrainMatrix:!0}),Xs=ge&&Ye.hasTextData(),Lc=u.layout.get("icon-text-fit")!=="none"&&Xs&&Ye.hasIconData();if(me){const jr=b.style.map.terrain?(za,Tn)=>b.style.map.terrain.getElevation(je,za,Tn):null,gn=u.layout.get("text-rotation-alignment")==="map";Cn(Ye,b,_,ri,Qs,fe,N,gn,je.toUnwrapped(),ce.width,ce.height,ni,jr)}const ms=_&&ge||Lc,ya=me||ms?Ah:fe?ri:b.transform.clipSpaceToPixelsMatrix,Bo=lt&&u.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let qo;qo=lt?Ye.iconsInText?mm(Ft.kind,hn,xe,fe,me,ms,b,ya,ds,ni,Zr,Mr,Ze):Kd(Ft.kind,hn,xe,fe,me,ms,b,ya,ds,ni,_,Zr,0,Ze):Su(Ft.kind,hn,xe,fe,me,ms,b,ya,ds,ni,_,Zr,Ze);const Ks={program:kr,buffers:Pt,uniformValues:qo,projectionData:ps,atlasTexture:rn,atlasTextureIcon:ea,atlasInterpolation:Kr,atlasInterpolationIcon:Yr,isSDF:lt,hasHalo:Bo};if(ye&&Ye.canOverlap){we=!0;const jr=Pt.segments.get();for(const gn of jr)ke.push({segments:new c.aM([gn]),sortKey:gn.sortKey,state:Ks,terrainData:Wr})}else ke.push({segments:Pt.segments,sortKey:0,state:Ks,terrainData:Wr})}we&&ke.sort(((je,He)=>je.sortKey-He.sortKey));for(const je of ke){const He=je.state;if(K.activeTexture.set(ie.TEXTURE0),He.atlasTexture.bind(He.atlasInterpolation,ie.CLAMP_TO_EDGE),He.atlasTextureIcon&&(K.activeTexture.set(ie.TEXTURE1),He.atlasTextureIcon&&He.atlasTextureIcon.bind(He.atlasInterpolationIcon,ie.CLAMP_TO_EDGE)),He.isSDF){const Ye=He.uniformValues;He.hasHalo&&(Ye.u_is_halo=1,qs(He.buffers,je.segments,u,b,He.program,Te,B,W,Ye,He.projectionData,je.terrainData)),Ye.u_is_halo=0}qs(He.buffers,je.segments,u,b,He.program,Te,B,W,He.uniformValues,He.projectionData,je.terrainData)}}function qs(b,t,u,d,_,w,A,I,k,N,B){const W=d.context;_.draw(W,W.gl.TRIANGLES,w,A,I,er.backCCW,k,B,N,u.id,b.layoutVertexBuffer,b.indexBuffer,t,u.paint,d.transform.zoom,b.programConfigurations.get(u.id),b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer)}function Cu(b,t,u,d,_){const w=b.context,A=w.gl,I=Dr.disabled,k=new Xr([A.ONE,A.ONE],c.bf.transparent,[!0,!0,!0,!0]),N=t.getBucket(u);if(!N)return;const B=d.key;let W=u.heatmapFbos.get(B);W||(W=La(w,t.tileSize,t.tileSize),u.heatmapFbos.set(B,W)),w.bindFramebuffer.set(W.framebuffer),w.viewport.set([0,0,t.tileSize,t.tileSize]),w.clear({color:c.bf.transparent});const H=N.programConfigurations.get(u.id),K=b.useProgram("heatmap",H,!_),ie=b.transform.getProjectionData({overscaledTileID:t.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ce=b.style.map.terrain.getTerrainData(d);K.draw(w,A.TRIANGLES,lr.disabled,I,k,er.disabled,Yd(t,b.transform.zoom,u.paint.get("heatmap-intensity"),1),ce,ie,u.id,N.layoutVertexBuffer,N.indexBuffer,N.segments,u.paint,b.transform.zoom,H)}function Ui(b,t,u,d,_){const w=b.context,A=w.gl,I=b.transform;w.setColorMode(b.colorModeForRenderPass());const k=oo(w,t),N=u.key,B=t.heatmapFbos.get(N);if(!B)return;w.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,B.colorAttachment.get()),w.activeTexture.set(A.TEXTURE1),k.bind(A.LINEAR,A.CLAMP_TO_EDGE);const W=I.getProjectionData({overscaledTileID:u,applyTerrainMatrix:_,applyGlobeMatrix:!d});b.useProgram("heatmapTexture").draw(w,A.TRIANGLES,lr.disabled,Dr.disabled,b.colorModeForRenderPass(),er.disabled,Af(b,t,0,1),null,W,t.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments,t.paint,I.zoom),B.destroy(),t.heatmapFbos.delete(N)}function La(b,t,u){var d,_;const w=b.gl,A=w.createTexture();w.bindTexture(w.TEXTURE_2D,A),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.LINEAR),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.LINEAR);const I=(d=b.HALF_FLOAT)!==null&&d!==void 0?d:w.UNSIGNED_BYTE,k=(_=b.RGBA16F)!==null&&_!==void 0?_:w.RGBA;w.texImage2D(w.TEXTURE_2D,0,k,t,u,0,w.RGBA,I,null);const N=b.createFramebuffer(t,u,!1,!1);return N.colorAttachment.set(A),N}function oo(b,t){return t.colorRampTexture||(t.colorRampTexture=new c.T(b,t.colorRamp,b.gl.RGBA)),t.colorRampTexture}function Oi(b,t,u,d,_){if(!u||!d||!d.imageAtlas)return;const w=d.imageAtlas.patternPositions;let A=w[u.to.toString()],I=w[u.from.toString()];if(!A&&I&&(A=I),!I&&A&&(I=A),!A||!I){const k=_.getPaintProperty(t);A=w[k],I=w[k]}A&&I&&b.setConstantPatternPositions(A,I)}function Qa(b,t,u,d,_,w,A,I){const k=b.context.gl,N="fill-pattern",B=u.paint.get(N),W=B&&B.constantOr(1),H=u.getCrossfadeParameters();let K,ie,ce,he,fe;const me=b.transform,xe=u.paint.get("fill-translate"),ye=u.paint.get("fill-translate-anchor");A?(ie=W&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",K=k.LINES):(ie=W?"fillPattern":"fill",K=k.TRIANGLES);const we=B.constantOr(null);for(const Te of d){const ge=t.getTile(Te);if(W&&!ge.patternsLoaded())continue;const ke=ge.getBucket(u);if(!ke)continue;const Ze=ke.programConfigurations.get(u.id),je=b.useProgram(ie,Ze),He=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Te);W&&(b.context.activeTexture.set(k.TEXTURE0),ge.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),Ze.updatePaintBuffers(H)),Oi(Ze,N,we,ge,u);const Ye=me.getProjectionData({overscaledTileID:Te,applyGlobeMatrix:!I,applyTerrainMatrix:!0}),Pt=c.aD(me,ge,xe,ye);if(A){he=ke.indexBuffer2,fe=ke.segments2;const lt=[k.drawingBufferWidth,k.drawingBufferHeight];ce=ie==="fillOutlinePattern"&&W?vu(b,H,ge,lt,Pt):gu(lt,Pt)}else he=ke.indexBuffer,fe=ke.segments,ce=W?mc(b,H,ge,Pt):{u_fill_translate:Pt};const xt=b.stencilModeForClipping(Te);je.draw(b.context,K,_,xt,w,er.backCCW,ce,He,Ye,u.id,ke.layoutVertexBuffer,he,fe,u.paint,b.transform.zoom,Ze)}}function so(b,t,u,d,_,w,A,I){const k=b.context,N=k.gl,B="fill-extrusion-pattern",W=u.paint.get(B),H=W.constantOr(1),K=u.getCrossfadeParameters(),ie=u.paint.get("fill-extrusion-opacity"),ce=W.constantOr(null),he=b.transform;for(const fe of d){const me=t.getTile(fe),xe=me.getBucket(u);if(!xe)continue;const ye=b.style.map.terrain&&b.style.map.terrain.getTerrainData(fe),we=xe.programConfigurations.get(u.id),Te=b.useProgram(H?"fillExtrusionPattern":"fillExtrusion",we);H&&(b.context.activeTexture.set(N.TEXTURE0),me.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),we.updatePaintBuffers(K));const ge=he.getProjectionData({overscaledTileID:fe,applyGlobeMatrix:!I,applyTerrainMatrix:!0});Oi(we,B,ce,me,u);const ke=c.aD(he,me,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Ze=u.paint.get("fill-extrusion-vertical-gradient"),je=H?pm(b,Ze,ie,ke,fe,K,me):Wa(b,Ze,ie,ke);Te.draw(k,k.gl.TRIANGLES,_,w,A,er.backCCW,je,ye,ge,u.id,xe.layoutVertexBuffer,xe.indexBuffer,xe.segments,u.paint,b.transform.zoom,we,b.style.map.terrain&&xe.centroidVertexBuffer)}}function Ch(b,t,u,d,_,w,A,I,k){var N;const B=b.style.projection,W=b.context,H=b.transform,K=W.gl,ie=[`#define NUM_ILLUMINATION_SOURCES ${u.paint.get("hillshade-highlight-color").values.length}`],ce=b.useProgram("hillshade",null,!1,ie),he=!b.options.moving;for(const fe of d){const me=t.getTile(fe),xe=me.fbo;if(!xe)continue;const ye=B.getMeshFromTileID(W,fe.canonical,I,!0,"raster"),we=(N=b.style.map.terrain)===null||N===void 0?void 0:N.getTerrainData(fe);W.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,xe.colorAttachment.get());const Te=H.getProjectionData({overscaledTileID:fe,aligned:he,applyGlobeMatrix:!k,applyTerrainMatrix:!0});ce.draw(W,K.TRIANGLES,w,_[fe.overscaledZ],A,er.backCCW,Qd(b,me,u),we,Te,u.id,ye.vertexBuffer,ye.indexBuffer,ye.segments)}}function is(b,t,u,d,_,w,A,I,k){var N;const B=b.style.projection,W=b.context,H=b.transform,K=W.gl,ie=b.useProgram("colorRelief"),ce=!b.options.moving;let he=!0,fe=0;for(const me of d){const xe=t.getTile(me),ye=xe.dem;if(he){const je=K.getParameter(K.MAX_TEXTURE_SIZE),{elevationTexture:He,colorTexture:Ye}=u.getColorRampTextures(W,je,ye.getUnpackVector());W.activeTexture.set(K.TEXTURE1),He.bind(K.NEAREST,K.CLAMP_TO_EDGE),W.activeTexture.set(K.TEXTURE4),Ye.bind(K.LINEAR,K.CLAMP_TO_EDGE),he=!1,fe=He.size[0]}if(!ye||!ye.data)continue;const we=ye.stride,Te=ye.getPixels();if(W.activeTexture.set(K.TEXTURE0),W.pixelStoreUnpackPremultiplyAlpha.set(!1),xe.demTexture=xe.demTexture||b.getTileTexture(we),xe.demTexture){const je=xe.demTexture;je.update(Te,{premultiply:!1}),je.bind(K.LINEAR,K.CLAMP_TO_EDGE)}else xe.demTexture=new c.T(W,Te,K.RGBA,{premultiply:!1}),xe.demTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE);const ge=B.getMeshFromTileID(W,me.canonical,I,!0,"raster"),ke=(N=b.style.map.terrain)===null||N===void 0?void 0:N.getTerrainData(me),Ze=H.getProjectionData({overscaledTileID:me,aligned:ce,applyGlobeMatrix:!k,applyTerrainMatrix:!0});ie.draw(W,K.TRIANGLES,w,_[me.overscaledZ],A,er.backCCW,bu(u,xe.dem,fe),ke,Ze,u.id,ge.vertexBuffer,ge.indexBuffer,ge.segments)}}const Tc=[new c.P(0,0),new c.P(c.$,0),new c.P(c.$,c.$),new c.P(0,c.$)];function aa(b,t,u,d,_,w,A,I,k=!1,N=!1){const B=d[d.length-1].overscaledZ,W=b.context,H=W.gl,K=b.useProgram("raster"),ie=b.transform,ce=b.style.projection,he=b.colorModeForRenderPass(),fe=!b.options.moving;for(const me of d){const xe=b.getDepthModeForSublayer(me.overscaledZ-B,u.paint.get("raster-opacity")===1?lr.ReadWrite:lr.ReadOnly,H.LESS),ye=t.getTile(me);ye.registerFadeDuration(u.paint.get("raster-fade-duration"));const we=t.findLoadedParent(me,0),Te=t.findLoadedSibling(me),ge=yn(ye,we||Te||null,t,u,b.transform,b.style.map.terrain);let ke,Ze;const je=u.paint.get("raster-resampling")==="nearest"?H.NEAREST:H.LINEAR;W.activeTexture.set(H.TEXTURE0),ye.texture.bind(je,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),W.activeTexture.set(H.TEXTURE1),we?(we.texture.bind(je,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),ke=Math.pow(2,we.tileID.overscaledZ-ye.tileID.overscaledZ),Ze=[ye.tileID.canonical.x*ke%1,ye.tileID.canonical.y*ke%1]):ye.texture.bind(je,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),ye.texture.useMipmap&&W.extTextureFilterAnisotropic&&b.transform.pitch>20&&H.texParameterf(H.TEXTURE_2D,W.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,W.extTextureFilterAnisotropicMax);const He=b.style.map.terrain&&b.style.map.terrain.getTerrainData(me),Ye=ie.getProjectionData({overscaledTileID:me,aligned:fe,applyGlobeMatrix:!N,applyTerrainMatrix:!0}),Pt=xu(Ze||[0,0],ke||1,ge,u,I),xt=ce.getMeshFromTileID(W,me.canonical,w,A,"raster");K.draw(W,H.TRIANGLES,xe,_?_[me.overscaledZ]:Dr.disabled,he,k?er.frontCCW:er.backCCW,Pt,He,Ye,u.id,xt.vertexBuffer,xt.indexBuffer,xt.segments)}}function yn(b,t,u,d,_,w){const A=d.paint.get("raster-fade-duration");if(!w&&A>0){const I=z.now(),k=(I-b.timeAdded)/A,N=t?(I-t.timeAdded)/A:-1,B=u.getSource(),W=kt(_,{tileSize:B.tileSize,roundZoom:B.roundZoom}),H=!t||Math.abs(t.tileID.overscaledZ-W)>Math.abs(b.tileID.overscaledZ-W),K=H&&b.refreshedUponExpiration?1:c.ah(H?k:1-N,0,1);return b.refreshedUponExpiration&&k>=1&&(b.refreshedUponExpiration=!1),t?{opacity:1,mix:1-K}:{opacity:K,mix:0}}return{opacity:1,mix:0}}const Fr=new c.bf(1,0,0,1),Hs=new c.bf(0,1,0,1),lo=new c.bf(0,0,1,1),Du=new c.bf(1,0,1,1),os=new c.bf(0,1,1,1);function Uf(b,t,u,d){Gr(b,0,t+u/2,b.transform.width,u,d)}function Dh(b,t,u,d){Gr(b,t-u/2,0,u,b.transform.height,d)}function Gr(b,t,u,d,_,w){const A=b.context,I=A.gl;I.enable(I.SCISSOR_TEST),I.scissor(t*b.pixelRatio,u*b.pixelRatio,d*b.pixelRatio,_*b.pixelRatio),A.clear({color:w}),I.disable(I.SCISSOR_TEST)}function uo(b,t,u){const d=b.context,_=d.gl,w=b.useProgram("debug"),A=lr.disabled,I=Dr.disabled,k=b.colorModeForRenderPass(),N="$debug",B=b.style.map.terrain&&b.style.map.terrain.getTerrainData(u);d.activeTexture.set(_.TEXTURE0);const W=t.getTileByID(u.key).latestRawTileData,H=Math.floor((W&&W.byteLength||0)/1024),K=t.getTile(u).tileSize,ie=512/Math.min(K,512)*(u.overscaledZ/b.transform.zoom)*.5;let ce=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(ce+=` => ${u.overscaledZ}`),(function(fe,me){fe.initDebugOverlayCanvas();const xe=fe.debugOverlayCanvas,ye=fe.context.gl,we=fe.debugOverlayCanvas.getContext("2d");we.clearRect(0,0,xe.width,xe.height),we.shadowColor="white",we.shadowBlur=2,we.lineWidth=1.5,we.strokeStyle="white",we.textBaseline="top",we.font="bold 36px Open Sans, sans-serif",we.fillText(me,5,5),we.strokeText(me,5,5),fe.debugOverlayTexture.update(xe),fe.debugOverlayTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE)})(b,`${ce} ${H}kB`);const he=b.transform.getProjectionData({overscaledTileID:u,applyGlobeMatrix:!0,applyTerrainMatrix:!0});w.draw(d,_.TRIANGLES,A,I,Xr.alphaBlended,er.disabled,xl(c.bf.transparent,ie),null,he,N,b.debugBuffer,b.quadTriangleIndexBuffer,b.debugSegments),w.draw(d,_.LINE_STRIP,A,I,k,er.disabled,xl(c.bf.red),B,he,N,b.debugBuffer,b.tileBorderIndexBuffer,b.debugSegments)}function mi(b,t,u,d){const{isRenderingGlobe:_}=d,w=b.context,A=w.gl,I=b.transform,k=b.colorModeForRenderPass(),N=b.getDepthModeFor3D(),B=b.useProgram("terrain");w.bindFramebuffer.set(null),w.viewport.set([0,0,b.width,b.height]);for(const W of u){const H=t.getTerrainMesh(W.tileID),K=b.renderToTexture.getTexture(W),ie=t.getTerrainData(W.tileID);w.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,K.texture);const ce=t.getMeshFrameDelta(I.zoom),he=I.calculateFogMatrix(W.tileID.toUnwrapped()),fe=vh(ce,he,b.style.sky,I.pitch,_),me=I.getProjectionData({overscaledTileID:W.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});B.draw(w,A.TRIANGLES,N,Dr.disabled,k,er.backCCW,fe,ie,me,"terrain",H.vertexBuffer,H.indexBuffer,H.segments)}}function $s(b,t){if(!t.mesh){const u=new c.aL;u.emplaceBack(-1,-1),u.emplaceBack(1,-1),u.emplaceBack(1,1),u.emplaceBack(-1,1);const d=new c.aN;d.emplaceBack(0,1,2),d.emplaceBack(0,2,3),t.mesh=new ks(b.createVertexBuffer(u,ko.members),b.createIndexBuffer(d),c.aM.simpleSegment(0,0,u.length,d.length))}return t.mesh}class Mu{constructor(t,u){this.context=new Ph(t),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=br.maxUnderzooming+br.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new dl}resize(t,u,d){if(this.width=Math.floor(t*d),this.height=Math.floor(u*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style._order)this.style._layers[_].resize()}setup(){const t=this.context,u=new c.aL;u.emplaceBack(0,0),u.emplaceBack(c.$,0),u.emplaceBack(0,c.$),u.emplaceBack(c.$,c.$),this.tileExtentBuffer=t.createVertexBuffer(u,ko.members),this.tileExtentSegments=c.aM.simpleSegment(0,0,4,2);const d=new c.aL;d.emplaceBack(0,0),d.emplaceBack(c.$,0),d.emplaceBack(0,c.$),d.emplaceBack(c.$,c.$),this.debugBuffer=t.createVertexBuffer(d,ko.members),this.debugSegments=c.aM.simpleSegment(0,0,4,5);const _=new c.c6;_.emplaceBack(0,0,0,0),_.emplaceBack(c.$,0,c.$,0),_.emplaceBack(0,c.$,0,c.$),_.emplaceBack(c.$,c.$,c.$,c.$),this.rasterBoundsBuffer=t.createVertexBuffer(_,fm.members),this.rasterBoundsSegments=c.aM.simpleSegment(0,0,4,2);const w=new c.aL;w.emplaceBack(0,0),w.emplaceBack(c.$,0),w.emplaceBack(0,c.$),w.emplaceBack(c.$,c.$),this.rasterBoundsBufferPosOnly=t.createVertexBuffer(w,ko.members),this.rasterBoundsSegmentsPosOnly=c.aM.simpleSegment(0,0,4,5);const A=new c.aL;A.emplaceBack(0,0),A.emplaceBack(1,0),A.emplaceBack(0,1),A.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(A,ko.members),this.viewportSegments=c.aM.simpleSegment(0,0,4,2);const I=new c.c7;I.emplaceBack(0),I.emplaceBack(1),I.emplaceBack(3),I.emplaceBack(2),I.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(I);const k=new c.aN;k.emplaceBack(1,0,2),k.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(k);const N=this.context.gl;this.stencilClearMode=new Dr({func:N.ALWAYS,mask:0},0,255,N.ZERO,N.ZERO,N.ZERO),this.tileExtentMesh=new ks(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const t=this.context,u=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=c.L();c.bY(d,0,this.width,this.height,0,0,1),c.N(d,d,[u.drawingBufferWidth,u.drawingBufferHeight,0]);const _={mainMatrix:d,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:d};this.useProgram("clippingMask",null,!0).draw(t,u.TRIANGLES,lr.disabled,this.stencilClearMode,Xr.disabled,er.disabled,null,null,_,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,u,d){if(this.currentStencilSource===t.source||!t.isTileClipped()||!u||!u.length)return;this.currentStencilSource=t.source,this.nextStencilID+u.length>256&&this.clearStencil();const _=this.context;_.setColorMode(Xr.disabled),_.setDepthMode(lr.disabled);const w={};for(const A of u)w[A.key]=this.nextStencilID++;this._renderTileMasks(w,u,d,!0),this._renderTileMasks(w,u,d,!1),this._tileClippingMaskIDs=w}_renderTileMasks(t,u,d,_){const w=this.context,A=w.gl,I=this.style.projection,k=this.transform,N=this.useProgram("clippingMask");for(const B of u){const W=t[B.key],H=this.style.map.terrain&&this.style.map.terrain.getTerrainData(B),K=I.getMeshFromTileID(this.context,B.canonical,_,!0,"stencil"),ie=k.getProjectionData({overscaledTileID:B,applyGlobeMatrix:!d,applyTerrainMatrix:!0});N.draw(w,A.TRIANGLES,lr.disabled,new Dr({func:A.ALWAYS,mask:0},W,255,A.KEEP,A.KEEP,A.REPLACE),Xr.disabled,d?er.disabled:er.backCCW,null,H,ie,"$clipping",K.vertexBuffer,K.indexBuffer,K.segments)}}_renderTilesDepthBuffer(){const t=this.context,u=t.gl,d=this.style.projection,_=this.transform,w=this.useProgram("depth"),A=this.getDepthModeFor3D(),I=Oe(_,{tileSize:_.tileSize});for(const k of I){const N=this.style.map.terrain&&this.style.map.terrain.getTerrainData(k),B=d.getMeshFromTileID(this.context,k.canonical,!0,!0,"raster"),W=_.getProjectionData({overscaledTileID:k,applyGlobeMatrix:!0,applyTerrainMatrix:!0});w.draw(t,u.TRIANGLES,A,Dr.disabled,Xr.disabled,er.backCCW,null,N,W,"$clipping",B.vertexBuffer,B.indexBuffer,B.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,u=this.context.gl;return new Dr({func:u.NOTEQUAL,mask:255},t,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(t){const u=this.context.gl;return new Dr({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,u.KEEP,u.KEEP,u.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(t){const u=this.context.gl,d=t.sort(((A,I)=>I.overscaledZ-A.overscaledZ)),_=d[d.length-1].overscaledZ,w=d[0].overscaledZ-_+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const A={};for(let I=0;I<w;I++)A[I+_]=new Dr({func:u.GEQUAL,mask:255},I+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=w,[A,d]}return[{[_]:Dr.disabled},d]}stencilConfigForOverlapTwoPass(t){const u=this.context.gl,d=t.sort(((A,I)=>I.overscaledZ-A.overscaledZ)),_=d[d.length-1].overscaledZ,w=d[0].overscaledZ-_+1;if(this.clearStencil(),w>1){const A={},I={};for(let k=0;k<w;k++)A[k+_]=new Dr({func:u.GREATER,mask:255},w+1+k,255,u.KEEP,u.KEEP,u.REPLACE),I[k+_]=new Dr({func:u.GREATER,mask:255},1+k,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID=2*w+1,[A,I,d]}return this.nextStencilID=3,[{[_]:new Dr({func:u.GREATER,mask:255},2,255,u.KEEP,u.KEEP,u.REPLACE)},{[_]:new Dr({func:u.GREATER,mask:255},1,255,u.KEEP,u.KEEP,u.REPLACE)},d]}colorModeForRenderPass(){const t=this.context.gl;return this._showOverdrawInspector?new Xr([t.CONSTANT_COLOR,t.ONE],new c.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Xr.unblended:Xr.alphaBlended}getDepthModeForSublayer(t,u,d){if(!this.opaquePassEnabledForLayer())return lr.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new lr(d||this.context.gl.LEQUAL,u,[_,_])}getDepthModeFor3D(){return new lr(this.context.gl.LEQUAL,lr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,u){var d,_;this.style=t,this.options=u,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(z.now()),this.imageManager.beginFrame();const w=this.style._order,A=this.style.sourceCaches,I={},k={},N={},B={isRenderingToTexture:!1,isRenderingGlobe:((d=t.projection)===null||d===void 0?void 0:d.transitionState)>0};for(const H in A){const K=A[H];K.used&&K.prepare(this.context),I[H]=K.getVisibleCoordinates(!1),k[H]=I[H].slice().reverse(),N[H]=K.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let H=0;H<w.length;H++)if(this.style._layers[w[H]].is3D()){this.opaquePassCutoff=H;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const H of w){const K=this.style._layers[H];if(!K.hasOffscreenPass()||K.isHidden(this.transform.zoom))continue;const ie=k[K.source];(K.type==="custom"||ie.length)&&this.renderLayer(this,A[K.source],K,ie,B)}if((_=this.style.projection)===null||_===void 0||_.updateGPUdependent({context:this.context,useProgram:H=>this.useProgram(H)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?c.bf.black:c.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(H,K){const ie=H.context,ce=ie.gl,he=((Te,ge,ke)=>{const Ze=Math.cos(ge.rollInRadians),je=Math.sin(ge.rollInRadians),He=Pe(ge),Ye=ge.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Te.properties.get("sky-color"),u_horizon_color:Te.properties.get("horizon-color"),u_horizon:[(ge.width/2-He*je)*ke,(ge.height/2+He*Ze)*ke],u_horizon_normal:[-je,Ze],u_sky_horizon_blend:Te.properties.get("sky-horizon-blend")*ge.height/2*ke,u_sky_blend:Ye}})(K,H.style.map.transform,H.pixelRatio),fe=new lr(ce.LEQUAL,lr.ReadWrite,[0,1]),me=Dr.disabled,xe=H.colorModeForRenderPass(),ye=H.useProgram("sky"),we=$s(ie,K);ye.draw(ie,ce.TRIANGLES,fe,me,xe,er.disabled,he,null,void 0,"sky",we.vertexBuffer,we.indexBuffer,we.segments)})(this,this.style.sky),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){const H=this.style._layers[w[this.currentLayer]],K=A[H.source],ie=I[H.source];this._renderTileClippingMasks(H,ie,!1),this.renderLayer(this,K,H,ie,B)}this.renderPass="translucent";let W=!1;for(this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){const H=this.style._layers[w[this.currentLayer]],K=A[H.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(H,B))continue;this.opaquePassEnabledForLayer()||W||(W=!0,B.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ie=(H.type==="symbol"?N:k)[H.source];this._renderTileClippingMasks(H,I[H.source],!!this.renderToTexture),this.renderLayer(this,K,H,ie,B)}if(B.isRenderingGlobe&&(function(H,K,ie){const ce=H.context,he=ce.gl,fe=H.useProgram("atmosphere"),me=new lr(he.LEQUAL,lr.ReadOnly,[0,1]),xe=H.transform,ye=(function(Ye,Pt){const xt=Ye.properties.get("position"),lt=[-xt.x,-xt.y,-xt.z],Ft=c.ag(new Float64Array(16));return Ye.properties.get("anchor")==="map"&&(c.b6(Ft,Ft,Pt.rollInRadians),c.b7(Ft,Ft,-Pt.pitchInRadians),c.b6(Ft,Ft,Pt.bearingInRadians),c.b7(Ft,Ft,Pt.center.lat*Math.PI/180),c.bz(Ft,Ft,-Pt.center.lng*Math.PI/180)),c.c5(lt,lt,Ft),lt})(ie,H.transform),we=xe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Te=K.properties.get("atmosphere-blend")*we.projectionTransition;if(Te===0)return;const ge=pu(xe.worldSize,xe.center.lat),ke=xe.inverseProjectionMatrix,Ze=new Float64Array(4);Ze[3]=1,c.aw(Ze,Ze,xe.modelViewProjectionMatrix),Ze[0]/=Ze[3],Ze[1]/=Ze[3],Ze[2]/=Ze[3],Ze[3]=1,c.aw(Ze,Ze,ke),Ze[0]/=Ze[3],Ze[1]/=Ze[3],Ze[2]/=Ze[3],Ze[3]=1;const je=((Ye,Pt,xt,lt,Ft)=>({u_sun_pos:Ye,u_atmosphere_blend:Pt,u_globe_position:xt,u_globe_radius:lt,u_inv_proj_matrix:Ft}))(ye,Te,[Ze[0],Ze[1],Ze[2]],ge,ke),He=$s(ce,K);fe.draw(ce,he.TRIANGLES,me,Dr.disabled,Xr.alphaBlended,er.disabled,je,null,null,"atmosphere",He.vertexBuffer,He.indexBuffer,He.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const H=(function(K,ie){let ce=null;const he=Object.values(K._layers).flatMap((ye=>ye.source&&!ye.isHidden(ie)?[K.sourceCaches[ye.source]]:[])),fe=he.filter((ye=>ye.getSource().type==="vector")),me=he.filter((ye=>ye.getSource().type!=="vector")),xe=ye=>{(!ce||ce.getSource().maxzoom<ye.getSource().maxzoom)&&(ce=ye)};return fe.forEach((ye=>xe(ye))),ce||me.forEach((ye=>xe(ye))),ce})(this.style,this.transform.zoom);H&&(function(K,ie,ce){for(let he=0;he<ce.length;he++)uo(K,ie,ce[he])})(this,H,H.getVisibleCoordinates())}this.options.showPadding&&(function(H){const K=H.transform.padding;Uf(H,H.transform.height-(K.top||0),3,Fr),Uf(H,K.bottom||0,3,Hs),Dh(H,K.left||0,3,lo),Dh(H,H.transform.width-(K.right||0),3,Du);const ie=H.transform.centerPoint;(function(ce,he,fe,me){Gr(ce,he-1,fe-10,2,20,me),Gr(ce,he-10,fe-1,20,2,me)})(H,ie.x,H.transform.height-ie.y,os)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(t){if(!this.style||!this.style.map||!this.style.map.terrain)return;const u=this.terrainFacilitator.matrix,d=this.transform.modelViewProjectionMatrix;let _=this.terrainFacilitator.dirty;_||(_=t?!c.c8(u,d):!c.c9(u,d)),_||(_=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),_&&(c.ca(u,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(w,A){const I=w.context,k=I.gl,N=w.transform,B=Xr.unblended,W=new lr(k.LEQUAL,lr.ReadWrite,[0,1]),H=A.sourceCache.getRenderableTiles(),K=w.useProgram("terrainDepth");I.bindFramebuffer.set(A.getFramebuffer("depth").framebuffer),I.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),I.clear({color:c.bf.transparent,depth:1});for(const ie of H){const ce=A.getTerrainMesh(ie.tileID),he=A.getTerrainData(ie.tileID),fe=N.getProjectionData({overscaledTileID:ie.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),me={u_ele_delta:A.getMeshFrameDelta(N.zoom)};K.draw(I,k.TRIANGLES,W,Dr.disabled,B,er.backCCW,me,he,fe,"terrain",ce.vertexBuffer,ce.indexBuffer,ce.segments)}I.bindFramebuffer.set(null),I.viewport.set([0,0,w.width,w.height])})(this,this.style.map.terrain),(function(w,A){const I=w.context,k=I.gl,N=w.transform,B=Xr.unblended,W=new lr(k.LEQUAL,lr.ReadWrite,[0,1]),H=A.getCoordsTexture(),K=A.sourceCache.getRenderableTiles(),ie=w.useProgram("terrainCoords");I.bindFramebuffer.set(A.getFramebuffer("coords").framebuffer),I.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),I.clear({color:c.bf.transparent,depth:1}),A.coordsIndex=[];for(const ce of K){const he=A.getTerrainMesh(ce.tileID),fe=A.getTerrainData(ce.tileID);I.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,H.texture);const me={u_terrain_coords_id:(255-A.coordsIndex.length)/255,u_texture:0,u_ele_delta:A.getMeshFrameDelta(N.zoom)},xe=N.getProjectionData({overscaledTileID:ce.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ie.draw(I,k.TRIANGLES,W,Dr.disabled,B,er.backCCW,me,fe,xe,"terrain",he.vertexBuffer,he.indexBuffer,he.segments),A.coordsIndex.push(ce.tileID.key)}I.bindFramebuffer.set(null),I.viewport.set([0,0,w.width,w.height])})(this,this.style.map.terrain))}renderLayer(t,u,d,_,w){d.isHidden(this.transform.zoom)||(d.type==="background"||d.type==="custom"||(_||[]).length)&&(this.id=d.id,c.cb(d)?(function(A,I,k,N,B,W){if(A.renderPass!=="translucent")return;const{isRenderingToTexture:H}=W,K=Dr.disabled,ie=A.colorModeForRenderPass();(k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(ce,he,fe,me,xe,ye,we,Te,ge){const ke=he.transform,Ze=he.style.map.terrain,je=xe==="map",He=ye==="map";for(const Ye of ce){const Pt=me.getTile(Ye),xt=Pt.getBucket(fe);if(!xt||!xt.text||!xt.text.segments.get().length)continue;const lt=c.an(xt.textSizeData,ke.zoom),Ft=c.aC(Pt,1,he.transform.zoom),vr=Qr(je,he.transform,Ft),kr=fe.layout.get("icon-text-fit")!=="none"&&xt.hasIconData();if(lt){const hn=Math.pow(2,ke.zoom-Pt.tileID.overscaledZ),Wr=Ze?(Zr,rn)=>Ze.getElevation(Ye,Zr,rn):null;Mc(xt,je,He,ge,ke,vr,hn,lt,kr,c.aD(ke,Pt,we,Te),Ye.toUnwrapped(),Wr)}}})(N,A,k,I,k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),B),k.paint.get("icon-opacity").constantOr(1)!==0&&Fo(A,I,k,N,!1,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),k.layout.get("icon-rotation-alignment"),k.layout.get("icon-pitch-alignment"),k.layout.get("icon-keep-upright"),K,ie,H),k.paint.get("text-opacity").constantOr(1)!==0&&Fo(A,I,k,N,!0,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),k.layout.get("text-keep-upright"),K,ie,H),I.map.showCollisionBoxes&&(If(A,I,k,N,!0),If(A,I,k,N,!1))})(t,u,d,_,this.style.placement.variableOffsets,w):c.cc(d)?(function(A,I,k,N,B){if(A.renderPass!=="translucent")return;const{isRenderingToTexture:W}=B,H=k.paint.get("circle-opacity"),K=k.paint.get("circle-stroke-width"),ie=k.paint.get("circle-stroke-opacity"),ce=!k.layout.get("circle-sort-key").isConstant();if(H.constantOr(1)===0&&(K.constantOr(1)===0||ie.constantOr(1)===0))return;const he=A.context,fe=he.gl,me=A.transform,xe=A.getDepthModeForSublayer(0,lr.ReadOnly),ye=Dr.disabled,we=A.colorModeForRenderPass(),Te=[],ge=me.getCircleRadiusCorrection();for(let ke=0;ke<N.length;ke++){const Ze=N[ke],je=I.getTile(Ze),He=je.getBucket(k);if(!He)continue;const Ye=k.paint.get("circle-translate"),Pt=k.paint.get("circle-translate-anchor"),xt=c.aD(me,je,Ye,Pt),lt=He.programConfigurations.get(k.id),Ft=A.useProgram("circle",lt),vr=He.layoutVertexBuffer,kr=He.indexBuffer,hn=A.style.map.terrain&&A.style.map.terrain.getTerrainData(Ze),Wr={programConfiguration:lt,program:Ft,layoutVertexBuffer:vr,indexBuffer:kr,uniformValues:Zd(A,je,k,xt,ge),terrainData:hn,projectionData:me.getProjectionData({overscaledTileID:Ze,applyGlobeMatrix:!W,applyTerrainMatrix:!0})};if(ce){const Zr=He.segments.get();for(const rn of Zr)Te.push({segments:new c.aM([rn]),sortKey:rn.sortKey,state:Wr})}else Te.push({segments:He.segments,sortKey:0,state:Wr})}ce&&Te.sort(((ke,Ze)=>ke.sortKey-Ze.sortKey));for(const ke of Te){const{programConfiguration:Ze,program:je,layoutVertexBuffer:He,indexBuffer:Ye,uniformValues:Pt,terrainData:xt,projectionData:lt}=ke.state;je.draw(he,fe.TRIANGLES,xe,ye,we,er.backCCW,Pt,xt,lt,k.id,He,Ye,ke.segments,k.paint,A.transform.zoom,Ze)}})(t,u,d,_,w):c.cd(d)?(function(A,I,k,N,B){if(k.paint.get("heatmap-opacity")===0)return;const W=A.context,{isRenderingToTexture:H,isRenderingGlobe:K}=B;if(A.style.map.terrain){for(const ie of N){const ce=I.getTile(ie);I.hasRenderableParent(ie)||(A.renderPass==="offscreen"?Cu(A,ce,k,ie,K):A.renderPass==="translucent"&&Ui(A,k,ie,H,K))}W.viewport.set([0,0,A.width,A.height])}else A.renderPass==="offscreen"?(function(ie,ce,he,fe){const me=ie.context,xe=me.gl,ye=ie.transform,we=Dr.disabled,Te=new Xr([xe.ONE,xe.ONE],c.bf.transparent,[!0,!0,!0,!0]);(function(ge,ke,Ze){const je=ge.gl;ge.activeTexture.set(je.TEXTURE1),ge.viewport.set([0,0,ke.width/4,ke.height/4]);let He=Ze.heatmapFbos.get(c.c2);He?(je.bindTexture(je.TEXTURE_2D,He.colorAttachment.get()),ge.bindFramebuffer.set(He.framebuffer)):(He=La(ge,ke.width/4,ke.height/4),Ze.heatmapFbos.set(c.c2,He))})(me,ie,he),me.clear({color:c.bf.transparent});for(let ge=0;ge<fe.length;ge++){const ke=fe[ge];if(ce.hasRenderableParent(ke))continue;const Ze=ce.getTile(ke),je=Ze.getBucket(he);if(!je)continue;const He=je.programConfigurations.get(he.id),Ye=ie.useProgram("heatmap",He),Pt=ye.getProjectionData({overscaledTileID:ke,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),xt=ye.getCircleRadiusCorrection();Ye.draw(me,xe.TRIANGLES,lr.disabled,we,Te,er.backCCW,Yd(Ze,ye.zoom,he.paint.get("heatmap-intensity"),xt),null,Pt,he.id,je.layoutVertexBuffer,je.indexBuffer,je.segments,he.paint,ye.zoom,He)}me.viewport.set([0,0,ie.width,ie.height])})(A,I,k,N):A.renderPass==="translucent"&&(function(ie,ce){const he=ie.context,fe=he.gl;he.setColorMode(ie.colorModeForRenderPass());const me=ce.heatmapFbos.get(c.c2);me&&(he.activeTexture.set(fe.TEXTURE0),fe.bindTexture(fe.TEXTURE_2D,me.colorAttachment.get()),he.activeTexture.set(fe.TEXTURE1),oo(he,ce).bind(fe.LINEAR,fe.CLAMP_TO_EDGE),ie.useProgram("heatmapTexture").draw(he,fe.TRIANGLES,lr.disabled,Dr.disabled,ie.colorModeForRenderPass(),er.disabled,Af(ie,ce,0,1),null,null,ce.id,ie.viewportBuffer,ie.quadTriangleIndexBuffer,ie.viewportSegments,ce.paint,ie.transform.zoom))})(A,k)})(t,u,d,_,w):c.ce(d)?(function(A,I,k,N,B){if(A.renderPass!=="translucent")return;const{isRenderingToTexture:W}=B,H=k.paint.get("line-opacity"),K=k.paint.get("line-width");if(H.constantOr(1)===0||K.constantOr(1)===0)return;const ie=A.getDepthModeForSublayer(0,lr.ReadOnly),ce=A.colorModeForRenderPass(),he=k.paint.get("line-dasharray"),fe=k.paint.get("line-pattern"),me=fe.constantOr(1),xe=k.paint.get("line-gradient"),ye=k.getCrossfadeParameters(),we=me?"linePattern":he?"lineSDF":xe?"lineGradient":"line",Te=A.context,ge=Te.gl,ke=A.transform;let Ze=!0;for(const je of N){const He=I.getTile(je);if(me&&!He.patternsLoaded())continue;const Ye=He.getBucket(k);if(!Ye)continue;const Pt=Ye.programConfigurations.get(k.id),xt=A.context.program.get(),lt=A.useProgram(we,Pt),Ft=Ze||lt.program!==xt,vr=A.style.map.terrain&&A.style.map.terrain.getTerrainData(je),kr=fe.constantOr(null);if(kr&&He.imageAtlas){const Kr=He.imageAtlas,Yr=Kr.patternPositions[kr.to.toString()],Mr=Kr.patternPositions[kr.from.toString()];Yr&&Mr&&Pt.setConstantPatternPositions(Yr,Mr)}const hn=ke.getProjectionData({overscaledTileID:je,applyGlobeMatrix:!W,applyTerrainMatrix:!0}),Wr=ke.getPixelScale(),Zr=me?Df(A,He,k,Wr,ye):he?zs(A,He,k,Wr,he,ye):xe?gc(A,He,k,Wr,Ye.lineClipsArray.length):_h(A,He,k,Wr);if(me)Te.activeTexture.set(ge.TEXTURE0),He.imageAtlasTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),Pt.updatePaintBuffers(ye);else if(he&&(Ft||A.lineAtlas.dirty))Te.activeTexture.set(ge.TEXTURE0),A.lineAtlas.bind(Te);else if(xe){const Kr=Ye.gradients[k.id];let Yr=Kr.texture;if(k.gradientVersion!==Kr.version){let Mr=256;if(k.stepInterpolant){const ea=I.getSource().maxzoom,$n=je.canonical.z===ea?Math.ceil(1<<A.transform.maxZoom-je.canonical.z):1;Mr=c.ah(c.c3(Ye.maxLineLength/c.$*1024*$n),256,Te.maxTextureSize)}Kr.gradient=c.c4({expression:k.gradientExpression(),evaluationKey:"lineProgress",resolution:Mr,image:Kr.gradient||void 0,clips:Ye.lineClipsArray}),Kr.texture?Kr.texture.update(Kr.gradient):Kr.texture=new c.T(Te,Kr.gradient,ge.RGBA),Kr.version=k.gradientVersion,Yr=Kr.texture}Te.activeTexture.set(ge.TEXTURE0),Yr.bind(k.stepInterpolant?ge.NEAREST:ge.LINEAR,ge.CLAMP_TO_EDGE)}const rn=A.stencilModeForClipping(je);lt.draw(Te,ge.TRIANGLES,ie,rn,ce,er.disabled,Zr,vr,hn,k.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,k.paint,A.transform.zoom,Pt,Ye.layoutVertexBuffer2),Ze=!1}})(t,u,d,_,w):c.cf(d)?(function(A,I,k,N,B){const W=k.paint.get("fill-color"),H=k.paint.get("fill-opacity");if(H.constantOr(1)===0)return;const{isRenderingToTexture:K}=B,ie=A.colorModeForRenderPass(),ce=k.paint.get("fill-pattern"),he=A.opaquePassEnabledForLayer()&&!ce.constantOr(1)&&W.constantOr(c.bf.transparent).a===1&&H.constantOr(0)===1?"opaque":"translucent";if(A.renderPass===he){const fe=A.getDepthModeForSublayer(1,A.renderPass==="opaque"?lr.ReadWrite:lr.ReadOnly);Qa(A,I,k,N,fe,ie,!1,K)}if(A.renderPass==="translucent"&&k.paint.get("fill-antialias")){const fe=A.getDepthModeForSublayer(k.getPaintProperty("fill-outline-color")?2:0,lr.ReadOnly);Qa(A,I,k,N,fe,ie,!0,K)}})(t,u,d,_,w):c.cg(d)?(function(A,I,k,N,B){const W=k.paint.get("fill-extrusion-opacity");if(W===0)return;const{isRenderingToTexture:H}=B;if(A.renderPass==="translucent"){const K=new lr(A.context.gl.LEQUAL,lr.ReadWrite,A.depthRangeFor3D);if(W!==1||k.paint.get("fill-extrusion-pattern").constantOr(1))so(A,I,k,N,K,Dr.disabled,Xr.disabled,H),so(A,I,k,N,K,A.stencilModeFor3D(),A.colorModeForRenderPass(),H);else{const ie=A.colorModeForRenderPass();so(A,I,k,N,K,Dr.disabled,ie,H)}}})(t,u,d,_,w):c.ch(d)?(function(A,I,k,N,B){if(A.renderPass!=="offscreen"&&A.renderPass!=="translucent")return;const{isRenderingToTexture:W}=B,H=A.context,K=A.style.projection.useSubdivision,ie=A.getDepthModeForSublayer(0,lr.ReadOnly),ce=A.colorModeForRenderPass();if(A.renderPass==="offscreen")(function(he,fe,me,xe,ye,we,Te){const ge=he.context,ke=ge.gl;for(const Ze of me){const je=fe.getTile(Ze),He=je.dem;if(!He||!He.data||!je.needsHillshadePrepare)continue;const Ye=He.dim,Pt=He.stride,xt=He.getPixels();if(ge.activeTexture.set(ke.TEXTURE1),ge.pixelStoreUnpackPremultiplyAlpha.set(!1),je.demTexture=je.demTexture||he.getTileTexture(Pt),je.demTexture){const Ft=je.demTexture;Ft.update(xt,{premultiply:!1}),Ft.bind(ke.NEAREST,ke.CLAMP_TO_EDGE)}else je.demTexture=new c.T(ge,xt,ke.RGBA,{premultiply:!1}),je.demTexture.bind(ke.NEAREST,ke.CLAMP_TO_EDGE);ge.activeTexture.set(ke.TEXTURE0);let lt=je.fbo;if(!lt){const Ft=new c.T(ge,{width:Ye,height:Ye,data:null},ke.RGBA);Ft.bind(ke.LINEAR,ke.CLAMP_TO_EDGE),lt=je.fbo=ge.createFramebuffer(Ye,Ye,!0,!1),lt.colorAttachment.set(Ft.texture)}ge.bindFramebuffer.set(lt.framebuffer),ge.viewport.set([0,0,Ye,Ye]),he.useProgram("hillshadePrepare").draw(ge,ke.TRIANGLES,ye,we,Te,er.disabled,Cf(je.tileID,He),null,null,xe.id,he.rasterBoundsBuffer,he.quadTriangleIndexBuffer,he.rasterBoundsSegments),je.needsHillshadePrepare=!1}})(A,I,N,k,ie,Dr.disabled,ce),H.viewport.set([0,0,A.width,A.height]);else if(A.renderPass==="translucent")if(K){const[he,fe,me]=A.stencilConfigForOverlapTwoPass(N);Ch(A,I,k,me,he,ie,ce,!1,W),Ch(A,I,k,me,fe,ie,ce,!0,W)}else{const[he,fe]=A.getStencilConfigForOverlapAndUpdateStencilID(N);Ch(A,I,k,fe,he,ie,ce,!1,W)}})(t,u,d,_,w):c.ci(d)?(function(A,I,k,N,B){if(A.renderPass!=="translucent"||!N.length)return;const{isRenderingToTexture:W}=B,H=A.style.projection.useSubdivision,K=A.getDepthModeForSublayer(0,lr.ReadOnly),ie=A.colorModeForRenderPass();if(H){const[ce,he,fe]=A.stencilConfigForOverlapTwoPass(N);is(A,I,k,fe,ce,K,ie,!1,W),is(A,I,k,fe,he,K,ie,!0,W)}else{const[ce,he]=A.getStencilConfigForOverlapAndUpdateStencilID(N);is(A,I,k,he,ce,K,ie,!1,W)}})(t,u,d,_,w):c.cj(d)?(function(A,I,k,N,B){if(A.renderPass!=="translucent"||k.paint.get("raster-opacity")===0||!N.length)return;const{isRenderingToTexture:W}=B,H=I.getSource(),K=A.style.projection.useSubdivision;if(H instanceof Qn)aa(A,I,k,N,null,!1,!1,H.tileCoords,H.flippedWindingOrder,W);else if(K){const[ie,ce,he]=A.stencilConfigForOverlapTwoPass(N);aa(A,I,k,he,ie,!1,!0,Tc,!1,W),aa(A,I,k,he,ce,!0,!0,Tc,!1,W)}else{const[ie,ce]=A.getStencilConfigForOverlapAndUpdateStencilID(N);aa(A,I,k,ce,ie,!1,!0,Tc,!1,W)}})(t,u,d,_,w):c.ck(d)?(function(A,I,k,N,B){const W=k.paint.get("background-color"),H=k.paint.get("background-opacity");if(H===0)return;const{isRenderingToTexture:K}=B,ie=A.context,ce=ie.gl,he=A.style.projection,fe=A.transform,me=fe.tileSize,xe=k.paint.get("background-pattern");if(A.isPatternMissing(xe))return;const ye=!xe&&W.a===1&&H===1&&A.opaquePassEnabledForLayer()?"opaque":"translucent";if(A.renderPass!==ye)return;const we=Dr.disabled,Te=A.getDepthModeForSublayer(0,ye==="opaque"?lr.ReadWrite:lr.ReadOnly),ge=A.colorModeForRenderPass(),ke=A.useProgram(xe?"backgroundPattern":"background"),Ze=N||Oe(fe,{tileSize:me,terrain:A.style.map.terrain});xe&&(ie.activeTexture.set(ce.TEXTURE0),A.imageManager.bind(A.context));const je=k.getCrossfadeParameters();for(const He of Ze){const Ye=fe.getProjectionData({overscaledTileID:He,applyGlobeMatrix:!K,applyTerrainMatrix:!0}),Pt=xe?ep(H,A,xe,{tileID:He,tileSize:me},je):Jd(H,W),xt=A.style.map.terrain&&A.style.map.terrain.getTerrainData(He),lt=he.getMeshFromTileID(ie,He.canonical,!1,!0,"raster");ke.draw(ie,ce.TRIANGLES,Te,we,ge,er.backCCW,Pt,xt,Ye,k.id,lt.vertexBuffer,lt.indexBuffer,lt.segments)}})(t,0,d,_,w):c.cl(d)&&(function(A,I,k,N){const{isRenderingGlobe:B}=N,W=A.context,H=k.implementation,K=A.style.projection,ie=A.transform,ce=ie.getProjectionDataForCustomLayer(B),he={farZ:ie.farZ,nearZ:ie.nearZ,fov:ie.fov*Math.PI/180,modelViewProjectionMatrix:ie.modelViewProjectionMatrix,projectionMatrix:ie.projectionMatrix,shaderData:{variantName:K.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${K.shaderPreludeCode.vertexSource}`,define:K.shaderDefine},defaultProjectionData:ce},fe=H.renderingMode?H.renderingMode:"2d";if(A.renderPass==="offscreen"){const me=H.prerender;me&&(A.setCustomLayerDefaults(),W.setColorMode(A.colorModeForRenderPass()),me.call(H,W.gl,he),W.setDirty(),A.setBaseState())}else if(A.renderPass==="translucent"){A.setCustomLayerDefaults(),W.setColorMode(A.colorModeForRenderPass()),W.setStencilMode(Dr.disabled);const me=fe==="3d"?A.getDepthModeFor3D():A.getDepthModeForSublayer(0,lr.ReadOnly);W.setDepthMode(me),H.render(W.gl,he),W.setDirty(),A.setBaseState(),W.bindFramebuffer.set(null)}})(t,0,d,w))}saveTileTexture(t){const u=this._tileTextures[t.size[0]];u?u.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const u=this._tileTextures[t];return u&&u.length>0?u.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const u=this.imageManager.getPattern(t.from.toString()),d=this.imageManager.getPattern(t.to.toString());return!u||!d}useProgram(t,u,d=!1,_=[]){this.cache=this.cache||{};const w=!!this.style.map.terrain,A=this.style.projection,I=d?ao.projectionMercator:A.shaderPreludeCode,k=d?Jo:A.shaderDefine,N=t+(u?u.cacheKey:"")+`/${d?pl:A.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(w?"/terrain":"")+(_?`/${_.join("/")}`:"");return this.cache[N]||(this.cache[N]=new Pf(this.context,ao[t],u,Za[t],this._showOverdrawInspector,w,I,k,_)),this.cache[N]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new c.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:t,drawingBufferHeight:u}=this.context.gl;return this.width!==t||this.height!==u}}function ss(b,t){let u,d=!1,_=null,w=null;const A=()=>{_=null,d&&(b.apply(w,u),_=setTimeout(A,t),d=!1)};return(...I)=>(d=!0,w=this,u=I,_||A(),_)}class Xa{constructor(t){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let d;return u.split("&").map((_=>_.split("="))).forEach((_=>{_[0]===this._hashName&&(d=_)})),(d&&d[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(!this._isValidHash(u))return!1;const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:d,pitch:+(u[4]||0)}),!0},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,u)},this._removeHash=()=>{const u=this._getCurrentHash();if(u.length===0)return;const d=u.join("/");let _=d;_.split("&").length>0&&(_=_.split("&")[0]),this._hashName&&(_=`${this._hashName}=${d}`);let w=window.location.hash.replace(_,"");w.startsWith("#&")?w=w.slice(0,1)+w.slice(2):w==="#"&&(w="");let A=window.location.href.replace(/(#.+)?$/,w);A=A.replace("&&","&"),window.history.replaceState(window.history.state,null,A)},this._updateHash=ss(this._updateHashUnthrottled,300),this._hashName=t&&encodeURIComponent(t)}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(t){const u=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,_=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,_),A=Math.round(u.lng*w)/w,I=Math.round(u.lat*w)/w,k=this._map.getBearing(),N=this._map.getPitch();let B="";if(B+=t?`/${A}/${I}/${d}`:`${d}/${I}/${A}`,(k||N)&&(B+="/"+Math.round(10*k)/10),N&&(B+=`/${Math.round(N)}`),this._hashName){const W=this._hashName;let H=!1;const K=window.location.hash.slice(1).split("&").map((ie=>{const ce=ie.split("=")[0];return ce===W?(H=!0,`${ce}=${B}`):ie})).filter((ie=>ie));return H||K.push(`${W}=${B}`),`#${K.join("&")}`}return`#${B}`}_isValidHash(t){if(t.length<3||t.some(isNaN))return!1;try{new c.S(+t[2],+t[1])}catch{return!1}const u=+t[0],d=+(t[3]||0),_=+(t[4]||0);return u>=this._map.getMinZoom()&&u<=this._map.getMaxZoom()&&d>=-180&&d<=180&&_>=this._map.getMinPitch()&&_<=this._map.getMaxPitch()}}const yi={linearity:.3,easing:c.cm(0,0,.3,1)},Li=c.e({deceleration:2500,maxSpeed:1400},yi),Ec=c.e({deceleration:20,maxSpeed:1400},yi),Mh=c.e({deceleration:1e3,maxSpeed:360},yi),Tu=c.e({deceleration:1e3,maxSpeed:90},yi),Rc=c.e({deceleration:1e3,maxSpeed:360},yi);class Vs{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:z.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,u=z.now();for(;t.length>0&&u-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,roll:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)u.zoom+=w.zoomDelta||0,u.bearing+=w.bearingDelta||0,u.pitch+=w.pitchDelta||0,u.roll+=w.rollDelta||0,w.panDelta&&u.pan._add(w.panDelta),w.around&&(u.around=w.around),w.pinchAround&&(u.pinchAround=w.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(u.pan.mag()){const w=gi(u.pan.mag(),d,c.e({},Li,t||{})),A=u.pan.mult(w.amount/u.pan.mag()),I=this._map.cameraHelper.handlePanInertia(A,this._map.transform);_.center=I.easingCenter,_.offset=I.easingOffset,qn(_,w)}if(u.zoom){const w=gi(u.zoom,d,Ec);_.zoom=this._map.transform.zoom+w.amount,qn(_,w)}if(u.bearing){const w=gi(u.bearing,d,Mh);_.bearing=this._map.transform.bearing+c.ah(w.amount,-179,179),qn(_,w)}if(u.pitch){const w=gi(u.pitch,d,Tu);_.pitch=this._map.transform.pitch+w.amount,qn(_,w)}if(u.roll){const w=gi(u.roll,d,Rc);_.roll=this._map.transform.roll+c.ah(w.amount,-179,179),qn(_,w)}if(_.zoom||_.bearing){const w=u.pinchAround===void 0?u.around:u.pinchAround;_.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),c.e(_,{noMoveStart:!0})}}function qn(b,t){(!b.duration||b.duration<t.duration)&&(b.duration=t.duration,b.easing=t.easing)}function gi(b,t,u){const{maxSpeed:d,linearity:_,deceleration:w}=u,A=c.ah(b*_/(t/1e3),-d,d),I=Math.abs(A)/(w*_);return{easing:u.easing,duration:1e3*I,amount:A*(I/2)}}class Ka extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,u,d,_={}){d=d instanceof MouseEvent?d:new MouseEvent(t,d);const w=F.mousePos(u.getCanvas(),d),A=u.unproject(w);super(t,c.e({point:w,lngLat:A,originalEvent:d},_)),this._defaultPrevented=!1,this.target=u}}class Eu extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,u,d){const _=t==="touchend"?d.changedTouches:d.touches,w=F.touchPos(u.getCanvasContainer(),_),A=w.map((k=>u.unproject(k))),I=w.reduce(((k,N,B,W)=>k.add(N.div(W.length))),new c.P(0,0));super(t,{points:w,point:I,lngLats:A,lngLat:u.unproject(I),originalEvent:d}),this._defaultPrevented=!1}}class Of extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,u,d){super(t,{originalEvent:d}),this._defaultPrevented=!1}}class ap{constructor(t,u){this._map=t,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Of(t.type,this._map,t))}mousedown(t,u){return this._mousedownPos=u,this._firePreventable(new Ka(t.type,this._map,t))}mouseup(t){this._map.fire(new Ka(t.type,this._map,t))}click(t,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Ka(t.type,this._map,t))}dblclick(t){return this._firePreventable(new Ka(t.type,this._map,t))}mouseover(t){this._map.fire(new Ka(t.type,this._map,t))}mouseout(t){this._map.fire(new Ka(t.type,this._map,t))}touchstart(t){return this._firePreventable(new Eu(t.type,this._map,t))}touchmove(t){this._map.fire(new Eu(t.type,this._map,t))}touchend(t){this._map.fire(new Eu(t.type,this._map,t))}touchcancel(t){this._map.fire(new Eu(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Jn{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new Ka(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ka("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new Ka(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Gs{constructor(t){this._map=t}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(t){return this.transform.screenPointToLocation(c.P.convert(t),this._map.terrain)}}class Tl{constructor(t,u){this._map=t,this._tr=new Gs(t),this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,u){this.isEnabled()&&t.shiftKey&&t.button===0&&(F.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(t,u){if(!this._active)return;const d=u;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const _=this._startPos;this._lastPos=d,this._box||(this._box=F.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));const w=Math.min(_.x,d.x),A=Math.max(_.x,d.x),I=Math.min(_.y,d.y),k=Math.max(_.y,d.y);F.setTransform(this._box,`translate(${w}px,${I}px)`),this._box.style.width=A-w+"px",this._box.style.height=k-I+"px"}mouseupWindow(t,u){if(!this._active||t.button!==0)return;const d=this._startPos,_=u;if(this.reset(),F.suppressClick(),d.x!==_.x||d.y!==_.y)return this._map.fire(new c.l("boxzoomend",{originalEvent:t})),{cameraAnimation:w=>w.fitScreenCoordinates(d,_,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&t.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(F.remove(this._box),this._box=null),F.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,u){return this._map.fire(new c.l(t,{originalEvent:u}))}}function Ws(b,t){if(b.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${b.length}, points ${t.length}`);const u={};for(let d=0;d<b.length;d++)u[b[d].identifier]=t[d];return u}class Ru{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,u,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=t.timeStamp),d.length===this.numTouches&&(this.centroid=(function(_){const w=new c.P(0,0);for(const A of _)w._add(A);return w.div(_.length)})(u),this.touches=Ws(d,u)))}touchmove(t,u,d){if(this.aborted||!this.centroid)return;const _=Ws(d,u);for(const w in this.touches){const A=_[w];(!A||A.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(t,u,d){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class ls{constructor(t){this.singleTap=new Ru(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,u,d){this.singleTap.touchstart(t,u,d)}touchmove(t,u,d){this.singleTap.touchmove(t,u,d)}touchend(t,u,d){const _=this.singleTap.touchend(t,u,d);if(_){const w=t.timeStamp-this.lastTime<500,A=!this.lastTap||this.lastTap.dist(_)<30;if(w&&A||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class Da{constructor(t){this._tr=new Gs(t),this._zoomIn=new ls({numTouches:1,numTaps:2}),this._zoomOut=new ls({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,u,d){this._zoomIn.touchstart(t,u,d),this._zoomOut.touchstart(t,u,d)}touchmove(t,u,d){this._zoomIn.touchmove(t,u,d),this._zoomOut.touchmove(t,u,d)}touchend(t,u,d){const _=this._zoomIn.touchend(t,u,d),w=this._zoomOut.touchend(t,u,d),A=this._tr;return _?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:A.zoom+1,around:A.unproject(_)},{originalEvent:t})}):w?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:A.zoom-1,around:A.unproject(w)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ja{constructor(t){this._enabled=!!t.enable,this._moveStateManager=t.moveStateManager,this._clickTolerance=t.clickTolerance||1,this._moveFunction=t.move,this._activateOnStart=!!t.activateOnStart,t.assignEvents(this),this.reset()}reset(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}_move(...t){const u=this._moveFunction(...t);if(u.bearingDelta||u.pitchDelta||u.rollDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(t,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=Array.isArray(u)?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(t,u){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(t.preventDefault(),!this._moveStateManager.isValidMoveEvent(t))return void this.reset(t);const _=Array.isArray(u)?u[0]:u;return!this._moved&&_.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=_,this._move(d,_))}dragEnd(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&F.suppressClick(),this.reset(t))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Lf=0,co=2,El={[Lf]:1,[co]:2};class ho{constructor(t){this._correctEvent=t.checkCorrectEvent}startMove(t){const u=F.mouseButton(t);this._eventButton=u}endMove(t){delete this._eventButton}isValidStartEvent(t){return this._correctEvent(t)}isValidMoveEvent(t){return!(function(u,d){const _=El[d];return u.buttons===void 0||(u.buttons&_)!==_})(t,this._eventButton)}isValidEndEvent(t){return F.mouseButton(t)===this._eventButton}}class zf{constructor(){this._firstTouch=void 0}_isOneFingerTouch(t){return t.targetTouches.length===1}_isSameTouchEvent(t){return t.targetTouches[0].identifier===this._firstTouch}startMove(t){this._firstTouch=t.targetTouches[0].identifier}endMove(t){delete this._firstTouch}isValidStartEvent(t){return this._isOneFingerTouch(t)}isValidMoveEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}isValidEndEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}class Th{constructor(t=new ho({checkCorrectEvent:()=>!0}),u=new zf){this.mouseMoveStateManager=t,this.oneFingerTouchMoveStateManager=u}_executeRelevantHandler(t,u,d){return t instanceof MouseEvent?u(t):typeof TouchEvent<"u"&&t instanceof TouchEvent?d(t):void 0}startMove(t){this._executeRelevantHandler(t,(u=>this.mouseMoveStateManager.startMove(u)),(u=>this.oneFingerTouchMoveStateManager.startMove(u)))}endMove(t){this._executeRelevantHandler(t,(u=>this.mouseMoveStateManager.endMove(u)),(u=>this.oneFingerTouchMoveStateManager.endMove(u)))}isValidStartEvent(t){return this._executeRelevantHandler(t,(u=>this.mouseMoveStateManager.isValidStartEvent(u)),(u=>this.oneFingerTouchMoveStateManager.isValidStartEvent(u)))}isValidMoveEvent(t){return this._executeRelevantHandler(t,(u=>this.mouseMoveStateManager.isValidMoveEvent(u)),(u=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(u)))}isValidEndEvent(t){return this._executeRelevantHandler(t,(u=>this.mouseMoveStateManager.isValidEndEvent(u)),(u=>this.oneFingerTouchMoveStateManager.isValidEndEvent(u)))}}const Ic=b=>{b.mousedown=b.dragStart,b.mousemoveWindow=b.dragMove,b.mouseup=b.dragEnd,b.contextmenu=t=>{t.preventDefault()}};class Iu{constructor(t,u){this._clickTolerance=t.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0)}_shouldBePrevented(t){return t<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(t,u,d){return this._calculateTransform(t,u,d)}touchmove(t,u,d){if(this._active){if(!this._shouldBePrevented(d.length))return t.preventDefault(),this._calculateTransform(t,u,d);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",t)}}touchend(t,u,d){this._calculateTransform(t,u,d),this._active&&this._shouldBePrevented(d.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,u,d){d.length>0&&(this._active=!0);const _=Ws(d,u),w=new c.P(0,0),A=new c.P(0,0);let I=0;for(const N in _){const B=_[N],W=this._touches[N];W&&(w._add(B),A._add(B.sub(W)),I++,_[N]=B)}if(this._touches=_,this._shouldBePrevented(I)||!A.mag())return;const k=A.div(I);return this._sum._add(k),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(I),panDelta:k}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zs{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(t,u,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([u[0],u[1]]))}touchmove(t,u,d){if(!this._firstTwoTouches)return;t.preventDefault();const[_,w]=this._firstTwoTouches,A=ei(d,u,_),I=ei(d,u,w);if(!A||!I)return;const k=this._aroundCenter?null:A.add(I).div(2);return this._move([A,I],k,t)}touchend(t,u,d){if(!this._firstTwoTouches)return;const[_,w]=this._firstTwoTouches,A=ei(d,u,_),I=ei(d,u,w);A&&I||(this._active&&F.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&t.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function ei(b,t,u){for(let d=0;d<b.length;d++)if(b[d].identifier===u)return t[d]}function Rt(b,t){return Math.log(b/t)/Math.LN2}class Eh extends Zs{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,u){const d=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Rt(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Rt(this._distance,d),pinchAround:u}}}function Rl(b,t){return 180*b.angleWith(t)/Math.PI}class Rh extends Zs{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,u,d){const _=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Rl(this._vector,_),pinchAround:u}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const u=25/(Math.PI*this._minDiameter)*360,d=Rl(t,this._startVector);return Math.abs(d)<u}}function fo(b){return Math.abs(b.y)>Math.abs(b.x)}class Il extends Zs{constructor(t){super(),this._currentTouchCount=0,this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,u,d){super.touchstart(t,u,d),this._currentTouchCount=d.length}_start(t){this._lastPoints=t,fo(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,u,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const _=t[0].sub(this._lastPoints[0]),w=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(_,w,d.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(_.y+w.y)/2*-.5}):void 0}gestureBeginsVertically(t,u,d){if(this._valid!==void 0)return this._valid;const _=t.mag()>=2,w=u.mag()>=2;if(!_&&!w)return;if(!_||!w)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const A=t.y>0==u.y>0;return fo(t)&&fo(u)&&A}}const Ih={panStep:100,bearingStep:15,pitchStep:10};class fr{constructor(t){this._tr=new Gs(t);const u=Ih;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let u=0,d=0,_=0,w=0,A=0;switch(t.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:t.shiftKey?d=-1:(t.preventDefault(),w=-1);break;case 39:t.shiftKey?d=1:(t.preventDefault(),w=1);break;case 38:t.shiftKey?_=1:(t.preventDefault(),A=-1);break;case 40:t.shiftKey?_=-1:(t.preventDefault(),A=1);break;default:return}return this._rotationDisabled&&(d=0,_=0),{cameraAnimation:I=>{const k=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:kc,zoom:u?Math.round(k.zoom)+u*(t.shiftKey?2:1):k.zoom,bearing:k.bearing+d*this._bearingStep,pitch:k.pitch+_*this._pitchStep,offset:[-w*this._panStep,-A*this._panStep],center:k.center},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function kc(b){return b*(2-b)}const kh=4.000244140625,No=1/450;class us{constructor(t,u){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=t,this._tr=new Gs(t),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=No}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&t.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(t){return!!this._map.cooperativeGestures.isEnabled()&&!(t.ctrlKey||this._map.cooperativeGestures.isBypassed(t))}wheel(t){if(!this.isEnabled())return;if(this._shouldBePrevented(t))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",t);let u=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const d=z.now(),_=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,u!==0&&u%kh==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(_*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),t.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=t,this._delta-=u,this._active||this._start(t)),t.preventDefault()}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=F.mousePos(this._map.getCanvas(),t),d=this._tr;this._aroundPoint=this._aroundCenter?d.transform.locationToScreenPoint(c.S.convert(d.center)):u,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const t=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const I=t.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=I),typeof this._targetZoom=="number"&&(this._targetZoom+=I)}if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>kh?this._wheelZoomRate:this._defaultZoomRate;let k=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&k!==0&&(k=1/k);const N=typeof this._targetZoom!="number"?t.scale:c.af(this._targetZoom);this._targetZoom=t.getConstrained(t.getCameraLngLat(),c.ak(N*k)).zoom,this._type==="wheel"&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom!="number"?t.zoom:this._targetZoom,d=this._startZoom,_=this._easing;let w,A=!1;if(this._type==="wheel"&&d&&_){const I=z.now()-this._lastWheelEventTime,k=Math.min((I+5)/200,1),N=_(k);w=c.C.number(d,u,N),k<1?this._frameId||(this._frameId=!0):A=!0}else w=u,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=w,{noInertia:!0,needsRenderFrame:!A,zoomDelta:w-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let u=c.co;if(this._prevEase){const d=this._prevEase,_=(z.now()-d.start)/d.duration,w=d.easing(_+.01)-d.easing(_),A=.27/Math.sqrt(w*w+1e-4)*.01,I=Math.sqrt(.0729-A*A);u=c.cm(A,I,.25,1)}return this._prevEase={start:z.now(),duration:t,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class ku{constructor(t,u){this._clickZoom=t,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Uh{constructor(t){this._tr=new Gs(t),this.reset()}reset(){this._active=!1}dblclick(t,u){return t.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(t.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Uc{constructor(){this._tap=new ls({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(t,u,d){if(!this._swipePoint)if(this._tapTime){const _=u[0],w=t.timeStamp-this._tapTime<500,A=this._tapPoint.dist(_)<30;w&&A?d.length>0&&(this._swipePoint=_,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(t,u,d)}touchmove(t,u,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const _=u[0],w=_.y-this._swipePoint.y;return this._swipePoint=_,t.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(t,u,d)}touchend(t,u,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const _=this._tap.touchend(t,u,d);_&&(this._tapTime=t.timeStamp,this._tapPoint=_)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kl{constructor(t,u,d){this._el=t,this._mousePan=u,this._touchPan=d}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Uu{constructor(t,u,d,_){this._pitchWithRotate=t.pitchWithRotate,this._rollEnabled=t.rollEnabled,this._mouseRotate=u,this._mousePitch=d,this._mouseRoll=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Oh{constructor(t,u,d,_){this._el=t,this._touchZoom=u,this._touchRotate=d,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Ff{constructor(t,u){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=t,this._options=u,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const t=this._map.getCanvasContainer();t.classList.add("maplibregl-cooperative-gestures"),this._container=F.create("div","maplibregl-cooperative-gesture-screen",t);let u=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(u=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),_=document.createElement("div");_.className="maplibregl-desktop-message",_.textContent=u,this._container.appendChild(_);const w=document.createElement("div");w.className="maplibregl-mobile-message",w.textContent=d,this._container.appendChild(w),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(F.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(t){return t[this._bypassKey]}notifyGestureBlocked(t,u){this._enabled&&(this._map.fire(new c.l("cooperativegestureprevented",{gestureType:t,originalEvent:u})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const cs=b=>b.zoom||b.drag||b.roll||b.pitch||b.rotate;class po extends c.l{}function Hr(b){return b.panDelta&&b.panDelta.mag()||b.zoomDelta||b.bearingDelta||b.pitchDelta||b.rollDelta}class Nf{constructor(t,u){this.handleWindowEvent=_=>{this.handleEvent(_,`${_.type}Window`)},this.handleEvent=(_,w)=>{if(_.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const A=_.type==="renderFrame"?void 0:_,I={needsRenderFrame:!1},k={},N={};for(const{handlerName:H,handler:K,allowed:ie}of this._handlers){if(!K.isEnabled())continue;let ce;if(this._blockedByActive(N,ie,H))K.reset();else if(K[w||_.type]){if(c.cp(_,w||_.type)){const he=F.mousePos(this._map.getCanvas(),_);ce=K[w||_.type](_,he)}else if(c.cq(_,w||_.type)){const he=this._getMapTouches(_.touches),fe=F.touchPos(this._map.getCanvas(),he);ce=K[w||_.type](_,fe,he)}else c.cr(w||_.type)||(ce=K[w||_.type](_));this.mergeHandlerResult(I,k,ce,H,A),ce&&ce.needsRenderFrame&&this._triggerRenderFrame()}(ce||K.isActive())&&(N[H]=K)}const B={};for(const H in this._previousActiveHandlers)N[H]||(B[H]=A);this._previousActiveHandlers=N,(Object.keys(B).length||Hr(I))&&(this._changes.push([I,k,B]),this._triggerRenderFrame()),(Object.keys(N).length||Hr(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:W}=I;W&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],W(this._map))},this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Vs(t),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[_,w,A]of this._listeners)F.addEventListener(_,w,_===document?this.handleWindowEvent:this.handleEvent,A)}destroy(){for(const[t,u,d]of this._listeners)F.removeEventListener(t,u,t===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(t){const u=this._map,d=u.getCanvasContainer();this._add("mapEvent",new ap(u,t));const _=u.boxZoom=new Tl(u,t);this._add("boxZoom",_),t.interactive&&t.boxZoom&&_.enable();const w=u.cooperativeGestures=new Ff(u,t.cooperativeGestures);this._add("cooperativeGestures",w),t.cooperativeGestures&&w.enable();const A=new Da(u),I=new Uh(u);u.doubleClickZoom=new ku(I,A),this._add("tapZoom",A),this._add("clickZoom",I),t.interactive&&t.doubleClickZoom&&u.doubleClickZoom.enable();const k=new Uc;this._add("tapDragZoom",k);const N=u.touchPitch=new Il(u);this._add("touchPitch",N),t.interactive&&t.touchPitch&&u.touchPitch.enable(t.touchPitch);const B=()=>u.project(u.getCenter()),W=(function({enable:ye,clickTolerance:we,aroundCenter:Te=!0,minPixelCenterThreshold:ge=100,rotateDegreesPerPixelMoved:ke=.8},Ze){const je=new ho({checkCorrectEvent:He=>F.mouseButton(He)===0&&He.ctrlKey||F.mouseButton(He)===2&&!He.ctrlKey});return new Ja({clickTolerance:we,move:(He,Ye)=>{const Pt=Ze();if(Te&&Math.abs(Pt.y-He.y)>ge)return{bearingDelta:c.cn(new c.P(He.x,Ye.y),Ye,Pt)};let xt=(Ye.x-He.x)*ke;return Te&&Ye.y<Pt.y&&(xt=-xt),{bearingDelta:xt}},moveStateManager:je,enable:ye,assignEvents:Ic})})(t,B),H=(function({enable:ye,clickTolerance:we,pitchDegreesPerPixelMoved:Te=-.5}){const ge=new ho({checkCorrectEvent:ke=>F.mouseButton(ke)===0&&ke.ctrlKey||F.mouseButton(ke)===2});return new Ja({clickTolerance:we,move:(ke,Ze)=>({pitchDelta:(Ze.y-ke.y)*Te}),moveStateManager:ge,enable:ye,assignEvents:Ic})})(t),K=(function({enable:ye,clickTolerance:we,rollDegreesPerPixelMoved:Te=.3},ge){const ke=new ho({checkCorrectEvent:Ze=>F.mouseButton(Ze)===2&&Ze.ctrlKey});return new Ja({clickTolerance:we,move:(Ze,je)=>{const He=ge();let Ye=(je.x-Ze.x)*Te;return je.y<He.y&&(Ye=-Ye),{rollDelta:Ye}},moveStateManager:ke,enable:ye,assignEvents:Ic})})(t,B);u.dragRotate=new Uu(t,W,H,K),this._add("mouseRotate",W,["mousePitch"]),this._add("mousePitch",H,["mouseRotate","mouseRoll"]),this._add("mouseRoll",K,["mousePitch"]),t.interactive&&t.dragRotate&&u.dragRotate.enable();const ie=(function({enable:ye,clickTolerance:we}){const Te=new ho({checkCorrectEvent:ge=>F.mouseButton(ge)===0&&!ge.ctrlKey});return new Ja({clickTolerance:we,move:(ge,ke)=>({around:ke,panDelta:ke.sub(ge)}),activateOnStart:!0,moveStateManager:Te,enable:ye,assignEvents:Ic})})(t),ce=new Iu(t,u);u.dragPan=new kl(d,ie,ce),this._add("mousePan",ie),this._add("touchPan",ce,["touchZoom","touchRotate"]),t.interactive&&t.dragPan&&u.dragPan.enable(t.dragPan);const he=new Rh,fe=new Eh;u.touchZoomRotate=new Oh(d,fe,he,k),this._add("touchRotate",he,["touchPan","touchZoom"]),this._add("touchZoom",fe,["touchPan","touchRotate"]),t.interactive&&t.touchZoomRotate&&u.touchZoomRotate.enable(t.touchZoomRotate);const me=u.scrollZoom=new us(u,(()=>this._triggerRenderFrame()));this._add("scrollZoom",me,["mousePan"]),t.interactive&&t.scrollZoom&&u.scrollZoom.enable(t.scrollZoom);const xe=u.keyboard=new fr(u);this._add("keyboard",xe),t.interactive&&t.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new Jn(u))}_add(t,u,d){this._handlers.push({handlerName:t,handler:u,allowed:d}),this._handlersById[t]=u}stop(t){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!cs(this._eventsInProgress)||this.isZooming()}_blockedByActive(t,u,d){for(const _ in t)if(_!==d&&(!u||u.indexOf(_)<0))return!0;return!1}_getMapTouches(t){const u=[];for(const d of t)this._el.contains(d.target)&&u.push(d);return u}mergeHandlerResult(t,u,d,_,w){if(!d)return;c.e(t,d);const A={handlerName:_,originalEvent:d.originalEvent||w};d.zoomDelta!==void 0&&(u.zoom=A),d.panDelta!==void 0&&(u.drag=A),d.rollDelta!==void 0&&(u.roll=A),d.pitchDelta!==void 0&&(u.pitch=A),d.bearingDelta!==void 0&&(u.rotate=A)}_applyChanges(){const t={},u={},d={};for(const[_,w,A]of this._changes)_.panDelta&&(t.panDelta=(t.panDelta||new c.P(0,0))._add(_.panDelta)),_.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+_.pitchDelta),_.rollDelta&&(t.rollDelta=(t.rollDelta||0)+_.rollDelta),_.around!==void 0&&(t.around=_.around),_.pinchAround!==void 0&&(t.pinchAround=_.pinchAround),_.noInertia&&(t.noInertia=_.noInertia),c.e(u,w),c.e(d,A);this._updateMapTransform(t,u,d),this._changes=[]}_updateMapTransform(t,u,d){const _=this._map,w=_._getTransformForUpdate(),A=_.terrain;if(!(Hr(t)||A&&this._terrainMovement))return this._fireEvents(u,d,!0);_._stop(!0);let{panDelta:I,zoomDelta:k,bearingDelta:N,pitchDelta:B,rollDelta:W,around:H,pinchAround:K}=t;K!==void 0&&(H=K),H=H||_.transform.centerPoint,A&&!w.isPointOnMapSurface(H)&&(H=w.centerPoint);const ie={panDelta:I,zoomDelta:k,rollDelta:W,pitchDelta:B,bearingDelta:N,around:H};this._map.cameraHelper.useGlobeControls&&!w.isPointOnMapSurface(H)&&(H=w.centerPoint);const ce=H.distSqr(w.centerPoint)<.01?w.center:w.screenPointToLocation(I?H.sub(I):H);A?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ie,w),this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?w.setCenter(w.screenPointToLocation(w.centerPoint.sub(I))):this._map.cameraHelper.handleMapControlsPan(ie,w,ce):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(ie,w,ce))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ie,w),this._map.cameraHelper.handleMapControlsPan(ie,w,ce)),_._applyUpdatedTransform(w),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(u,d,!0)}_fireEvents(t,u,d){const _=cs(this._eventsInProgress),w=cs(t),A={};for(const W in t){const{originalEvent:H}=t[W];this._eventsInProgress[W]||(A[`${W}start`]=H),this._eventsInProgress[W]=t[W]}!_&&w&&this._fireEvent("movestart",w.originalEvent);for(const W in A)this._fireEvent(W,A[W]);w&&this._fireEvent("move",w.originalEvent);for(const W in t){const{originalEvent:H}=t[W];this._fireEvent(W,H)}const I={};let k;for(const W in this._eventsInProgress){const{handlerName:H,originalEvent:K}=this._eventsInProgress[W];this._handlersById[H].isActive()||(delete this._eventsInProgress[W],k=u[H]||K,I[`${W}end`]=k)}for(const W in I)this._fireEvent(W,I[W]);const N=cs(this._eventsInProgress),B=(_||w)&&!N;if(B&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const W=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&W.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(W)}if(d&&B){this._updatingCamera=!0;const W=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),H=K=>K!==0&&-this._bearingSnap<K&&K<this._bearingSnap;!W||!W.essential&&z.prefersReducedMotion?(this._map.fire(new c.l("moveend",{originalEvent:k})),H(this._map.getBearing())&&this._map.resetNorth()):(H(W.bearing||this._map.getBearing())&&(W.bearing=0),W.freezeElevation=!0,this._map.easeTo(W,{originalEvent:k})),this._updatingCamera=!1}}_fireEvent(t,u){this._map.fire(new c.l(t,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{delete this._frameId,this.handleEvent(new po("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Ou extends c.E{constructor(t,u,d){super(),this._renderFrameCallback=()=>{const _=Math.min((z.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(_)),_<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=d.bearingSnap,this.cameraHelper=u,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(t,u){t.apply(this.transform),this.transform=t,this.cameraHelper=u}getCenter(){return new c.S(this.transform.center.lng,this.transform.center.lat)}setCenter(t,u){return this.jumpTo({center:t},u)}getCenterElevation(){return this.transform.elevation}setCenterElevation(t,u){return this.jumpTo({elevation:t},u),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(t){this._centerClampedToGround=t}panBy(t,u,d){return t=c.P.convert(t).mult(-1),this.panTo(this.transform.center,c.e({offset:t},u),d)}panTo(t,u,d){return this.easeTo(c.e({center:t},u),d)}getZoom(){return this.transform.zoom}setZoom(t,u){return this.jumpTo({zoom:t},u),this}zoomTo(t,u,d){return this.easeTo(c.e({zoom:t},u),d)}zoomIn(t,u){return this.zoomTo(this.getZoom()+1,t,u),this}zoomOut(t,u){return this.zoomTo(this.getZoom()-1,t,u),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(t,u){return t!=this.transform.fov&&(this.transform.setFov(t),this.fire(new c.l("movestart",u)).fire(new c.l("move",u)).fire(new c.l("moveend",u))),this}getBearing(){return this.transform.bearing}setBearing(t,u){return this.jumpTo({bearing:t},u),this}getPadding(){return this.transform.padding}setPadding(t,u){return this.jumpTo({padding:t},u),this}rotateTo(t,u,d){return this.easeTo(c.e({bearing:t},u),d)}resetNorth(t,u){return this.rotateTo(0,c.e({duration:1e3},t),u),this}resetNorthPitch(t,u){return this.easeTo(c.e({bearing:0,pitch:0,roll:0,duration:1e3},t),u),this}snapToNorth(t,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,u):this}getPitch(){return this.transform.pitch}setPitch(t,u){return this.jumpTo({pitch:t},u),this}getRoll(){return this.transform.roll}setRoll(t,u){return this.jumpTo({roll:t},u),this}cameraForBounds(t,u){t=$t.convert(t).adjustAntiMeridian();const d=u&&u.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),d,u)}_cameraForBoxAndBearing(t,u,d,_){const w={top:0,bottom:0,right:0,left:0};if(typeof(_=c.e({padding:w,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){const N=_.padding;_.padding={top:N,bottom:N,right:N,left:N}}const A=c.e(w,_.padding);_.padding=A;const I=this.transform,k=new $t(t,u);return this.cameraHelper.cameraForBoxAndBearing(_,A,k,d,I)}fitBounds(t,u,d){return this._fitInternal(this.cameraForBounds(t,u),u,d)}fitScreenCoordinates(t,u,d,_,w){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(c.P.convert(t)),this.transform.screenPointToLocation(c.P.convert(u)),d,_),_,w)}_fitInternal(t,u,d){return t?(delete(u=c.e(t,u)).padding,u.linear?this.easeTo(u,d):this.flyTo(u,d)):this}jumpTo(t,u){this.stop();const d=this._getTransformForUpdate();let _=!1,w=!1,A=!1;const I=d.zoom;this.cameraHelper.handleJumpToCenterZoom(d,t);const k=d.zoom!==I;return"elevation"in t&&d.elevation!==+t.elevation&&d.setElevation(+t.elevation),"bearing"in t&&d.bearing!==+t.bearing&&(_=!0,d.setBearing(+t.bearing)),"pitch"in t&&d.pitch!==+t.pitch&&(w=!0,d.setPitch(+t.pitch)),"roll"in t&&d.roll!==+t.roll&&(A=!0,d.setRoll(+t.roll)),t.padding==null||d.isPaddingEqual(t.padding)||d.setPadding(t.padding),this._applyUpdatedTransform(d),this.fire(new c.l("movestart",u)).fire(new c.l("move",u)),k&&this.fire(new c.l("zoomstart",u)).fire(new c.l("zoom",u)).fire(new c.l("zoomend",u)),_&&this.fire(new c.l("rotatestart",u)).fire(new c.l("rotate",u)).fire(new c.l("rotateend",u)),w&&this.fire(new c.l("pitchstart",u)).fire(new c.l("pitch",u)).fire(new c.l("pitchend",u)),A&&this.fire(new c.l("rollstart",u)).fire(new c.l("roll",u)).fire(new c.l("rollend",u)),this.fire(new c.l("moveend",u))}calculateCameraOptionsFromTo(t,u,d,_=0){const w=c.a1.fromLngLat(t,u),A=c.a1.fromLngLat(d,_),I=A.x-w.x,k=A.y-w.y,N=A.z-w.z,B=Math.hypot(I,k,N);if(B===0)throw new Error("Can't calculate camera options with same From and To");const W=Math.hypot(I,k),H=c.ak(this.transform.cameraToCenterDistance/B/this.transform.tileSize),K=180*Math.atan2(I,-k)/Math.PI;let ie=180*Math.acos(W/B)/Math.PI;return ie=N<0?90-ie:90+ie,{center:A.toLngLat(),elevation:_,zoom:H,pitch:ie,bearing:K}}calculateCameraOptionsFromCameraLngLatAltRotation(t,u,d,_,w){const A=this.transform.calculateCenterFromCameraLngLatAlt(t,u,d,_);return{center:A.center,elevation:A.elevation,zoom:A.zoom,bearing:d,pitch:_,roll:w}}easeTo(t,u){this._stop(!1,t.easeId),((t=c.e({offset:[0,0],duration:500,easing:c.co},t)).animate===!1||!t.essential&&z.prefersReducedMotion)&&(t.duration=0);const d=this._getTransformForUpdate(),_=this.getBearing(),w=d.pitch,A=d.roll,I="bearing"in t?this._normalizeBearing(t.bearing,_):_,k="pitch"in t?+t.pitch:w,N="roll"in t?this._normalizeBearing(t.roll,A):A,B="padding"in t?t.padding:d.padding,W=c.P.convert(t.offset);let H,K;t.around&&(H=c.S.convert(t.around),K=d.locationToScreenPoint(H));const ie={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ce=this.cameraHelper.handleEaseTo(d,{bearing:I,pitch:k,roll:N,padding:B,around:H,aroundPoint:K,offsetAsPoint:W,offset:t.offset,zoom:t.zoom,center:t.center});return this._rotating=this._rotating||_!==I,this._pitching=this._pitching||k!==w,this._rolling=this._rolling||N!==A,this._padding=!d.isPaddingEqual(B),this._zooming=this._zooming||ce.isZooming,this._easeId=t.easeId,this._prepareEase(u,t.noMoveStart,ie),this.terrain&&this._prepareElevation(ce.elevationCenter),this._ease((he=>{ce.easeFunc(he),this.terrain&&!t.freezeElevation&&this._updateElevation(he),this._applyUpdatedTransform(d),this._fireMoveEvents(u)}),(he=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(u,he)}),t),this}_prepareEase(t,u,d={}){this._moving=!0,u||d.moving||this.fire(new c.l("movestart",t)),this._zooming&&!d.zooming&&this.fire(new c.l("zoomstart",t)),this._rotating&&!d.rotating&&this.fire(new c.l("rotatestart",t)),this._pitching&&!d.pitching&&this.fire(new c.l("pitchstart",t)),this._rolling&&!d.rolling&&this.fire(new c.l("rollstart",t))}_prepareElevation(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(t,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(t){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(t<1&&u!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=t*(d-(u-(d*t+this._elevationStart))/(1-t)),this._elevationTarget=u}this.transform.setElevation(c.C.number(this._elevationStart,this._elevationTarget,t))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(t){if(!this.terrain&&t.elevation>=0&&t.pitch<=90)return{};const u=t.getCameraLngLat(),d=t.getCameraAltitude(),_=this.terrain?this.terrain.getElevationForLngLatZoom(u,t.zoom):0;if(d<_){const w=this.calculateCameraOptionsFromTo(u,_,t.center,t.elevation);return{pitch:w.pitch,zoom:w.zoom}}return{}}_applyUpdatedTransform(t){const u=[];if(u.push((_=>this._elevateCameraIfInsideTerrain(_))),this.transformCameraUpdate&&u.push((_=>this.transformCameraUpdate(_))),!u.length)return;const d=t.clone();for(const _ of u){const w=d.clone(),{center:A,zoom:I,roll:k,pitch:N,bearing:B,elevation:W}=_(w);A&&w.setCenter(A),W!==void 0&&w.setElevation(W),I!==void 0&&w.setZoom(I),k!==void 0&&w.setRoll(k),N!==void 0&&w.setPitch(N),B!==void 0&&w.setBearing(B),d.apply(w)}this.transform.apply(d)}_fireMoveEvents(t){this.fire(new c.l("move",t)),this._zooming&&this.fire(new c.l("zoom",t)),this._rotating&&this.fire(new c.l("rotate",t)),this._pitching&&this.fire(new c.l("pitch",t)),this._rolling&&this.fire(new c.l("roll",t))}_afterEase(t,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const d=this._zooming,_=this._rotating,w=this._pitching,A=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,d&&this.fire(new c.l("zoomend",t)),_&&this.fire(new c.l("rotateend",t)),w&&this.fire(new c.l("pitchend",t)),A&&this.fire(new c.l("rollend",t)),this.fire(new c.l("moveend",t))}flyTo(t,u){if(!t.essential&&z.prefersReducedMotion){const Ye=c.Q(t,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Ye,u)}this.stop(),t=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.co},t);const d=this._getTransformForUpdate(),_=d.bearing,w=d.pitch,A=d.roll,I=d.padding,k="bearing"in t?this._normalizeBearing(t.bearing,_):_,N="pitch"in t?+t.pitch:w,B="roll"in t?this._normalizeBearing(t.roll,A):A,W="padding"in t?t.padding:d.padding,H=c.P.convert(t.offset);let K=d.centerPoint.add(H);const ie=d.screenPointToLocation(K),ce=this.cameraHelper.handleFlyTo(d,{bearing:k,pitch:N,roll:B,padding:W,locationAtOffset:ie,offsetAsPoint:H,center:t.center,minZoom:t.minZoom,zoom:t.zoom});let he=t.curve;const fe=Math.max(d.width,d.height),me=fe/ce.scaleOfZoom,xe=ce.pixelPathLength;typeof ce.scaleOfMinZoom=="number"&&(he=Math.sqrt(fe/ce.scaleOfMinZoom/xe*2));const ye=he*he;function we(Ye){const Pt=(me*me-fe*fe+(Ye?-1:1)*ye*ye*xe*xe)/(2*(Ye?me:fe)*ye*xe);return Math.log(Math.sqrt(Pt*Pt+1)-Pt)}function Te(Ye){return(Math.exp(Ye)-Math.exp(-Ye))/2}function ge(Ye){return(Math.exp(Ye)+Math.exp(-Ye))/2}const ke=we(!1);let Ze=function(Ye){return ge(ke)/ge(ke+he*Ye)},je=function(Ye){return fe*((ge(ke)*(Te(Pt=ke+he*Ye)/ge(Pt))-Te(ke))/ye)/xe;var Pt},He=(we(!0)-ke)/he;if(Math.abs(xe)<2e-6||!isFinite(He)){if(Math.abs(fe-me)<1e-6)return this.easeTo(t,u);const Ye=me<fe?-1:1;He=Math.abs(Math.log(me/fe))/he,je=()=>0,Ze=Pt=>Math.exp(Ye*he*Pt)}return t.duration="duration"in t?+t.duration:1e3*He/("screenSpeed"in t?+t.screenSpeed/he:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=_!==k,this._pitching=N!==w,this._rolling=B!==A,this._padding=!d.isPaddingEqual(W),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(ce.targetCenter),this._ease((Ye=>{const Pt=Ye*He,xt=1/Ze(Pt),lt=je(Pt);this._rotating&&d.setBearing(c.C.number(_,k,Ye)),this._pitching&&d.setPitch(c.C.number(w,N,Ye)),this._rolling&&d.setRoll(c.C.number(A,B,Ye)),this._padding&&(d.interpolatePadding(I,W,Ye),K=d.centerPoint.add(H)),ce.easeFunc(Ye,xt,lt,K),this.terrain&&!t.freezeElevation&&this._updateElevation(Ye),this._applyUpdatedTransform(d),this._fireMoveEvents(u)}),(()=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(u)}),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,u){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,u)}return t||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(t,u,d){d.animate===!1||d.duration===0?(t(1),u()):(this._easeStart=z.now(),this._easeOptions=d,this._onEaseFrame=t,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(t,u){t=c.aO(t,-180,180);const d=Math.abs(t-u);return Math.abs(t-360-u)<d&&(t-=360),Math.abs(t+360-u)<d&&(t+=360),t}queryTerrainElevation(t){return this.terrain?this.terrain.getElevationForLngLatZoom(c.S.convert(t),this.transform.tileZoom):null}}const mo={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class wr{constructor(t=mo){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=t}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options.compact,this._container=F.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=F.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=F.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){F.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,u){const d=this._map._getUIString(`AttributionControl.${u}`);t.title=d,t.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((_=>typeof _!="string"?"":_))):typeof this.options.customAttribution=="string"&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const u=this._map.style.sourceCaches;for(const _ in u){const w=u[_];if(w.used||w.usedForTerrain){const A=w.getSource();A.attribution&&t.indexOf(A.attribution)<0&&t.push(A.attribution)}}t=t.filter((_=>String(_).trim())),t.sort(((_,w)=>_.length-w.length)),t=t.filter(((_,w)=>{for(let A=w+1;A<t.length;A++)if(t[A].indexOf(_)>=0)return!1;return!0}));const d=t.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,t.length?(this._innerContainer.innerHTML=F.sanitize(d),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class $r{constructor(t={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const d=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=t}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=F.create("div","maplibregl-ctrl");const u=F.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){F.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Hn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const u=++this._id;return this._queue.push({callback:t,id:u,cancelled:!1}),u}remove(t){const u=this._currentlyRunning,d=u?this._queue.concat(u):this._queue;for(const _ of d)if(_.id===t)return void(_.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const d of u)if(!d.cancelled&&(d.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Lh=c.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class ti extends c.E{constructor(t){super(),this._lastTilesetChange=z.now(),this.sourceCache=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=t._source.tileSize*2**this.deltaZoom,t.usedForTerrain=!0,t.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(t,u){this.sourceCache.update(t,u),this._renderableTilesKeys=[];const d={};for(const _ of Oe(t,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))d[_.key]=!0,this._renderableTilesKeys.push(_.key),this._tiles[_.key]||(_.terrainRttPosMatrix32f=new Float64Array(16),c.bY(_.terrainRttPosMatrix32f,0,c.$,c.$,0,0,1),this._tiles[_.key]=new Ga(_,this.tileSize),this._lastTilesetChange=z.now());for(const _ in this._tiles)d[_]||delete this._tiles[_]}freeRtt(t){for(const u in this._tiles){const d=this._tiles[u];(!t||d.tileID.equals(t)||d.tileID.isChildOf(t)||t.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((t=>this.getTileByID(t)))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t,u){return u?this._getTerrainCoordsForTileRanges(t,u):this._getTerrainCoordsForRegularTile(t)}_getTerrainCoordsForRegularTile(t){const u={};for(const d of this._renderableTilesKeys){const _=this._tiles[d].tileID,w=t.clone(),A=c.ba();if(_.canonical.equals(t.canonical))c.bY(A,0,c.$,c.$,0,0,1);else if(_.canonical.isChildOf(t.canonical)){const I=_.canonical.z-t.canonical.z,k=_.canonical.x-(_.canonical.x>>I<<I),N=_.canonical.y-(_.canonical.y>>I<<I),B=c.$>>I;c.bY(A,0,B,B,0,0,1),c.M(A,A,[-k*B,-N*B,0])}else{if(!t.canonical.isChildOf(_.canonical))continue;{const I=t.canonical.z-_.canonical.z,k=t.canonical.x-(t.canonical.x>>I<<I),N=t.canonical.y-(t.canonical.y>>I<<I),B=c.$>>I;c.bY(A,0,c.$,c.$,0,0,1),c.M(A,A,[k*B,N*B,0]),c.N(A,A,[1/2**I,1/2**I,0])}}w.terrainRttPosMatrix32f=new Float32Array(A),u[d]=w}return u}_getTerrainCoordsForTileRanges(t,u){const d={};for(const _ of this._renderableTilesKeys){const w=this._tiles[_].tileID;if(!this._isWithinTileRanges(w,u))continue;const A=t.clone(),I=c.ba();if(w.canonical.z===t.canonical.z){const k=t.canonical.x-w.canonical.x,N=t.canonical.y-w.canonical.y;c.bY(I,0,c.$,c.$,0,0,1),c.M(I,I,[k*c.$,N*c.$,0])}else if(w.canonical.z>t.canonical.z){const k=w.canonical.z-t.canonical.z,N=w.canonical.x-(w.canonical.x>>k<<k),B=w.canonical.y-(w.canonical.y>>k<<k),W=t.canonical.x-(w.canonical.x>>k),H=t.canonical.y-(w.canonical.y>>k),K=c.$>>k;c.bY(I,0,K,K,0,0,1),c.M(I,I,[-N*K+W*c.$,-B*K+H*c.$,0])}else{const k=t.canonical.z-w.canonical.z,N=t.canonical.x-(t.canonical.x>>k<<k),B=t.canonical.y-(t.canonical.y>>k<<k),W=(t.canonical.x>>k)-w.canonical.x,H=(t.canonical.y>>k)-w.canonical.y,K=c.$<<k;c.bY(I,0,K,K,0,0,1),c.M(I,I,[N*c.$+W*K,B*c.$+H*K,0])}A.terrainRttPosMatrix32f=new Float32Array(I),d[_]=A}return d}getSourceTile(t,u){const d=this.sourceCache._source;let _=t.overscaledZ-this.deltaZoom;if(_>d.maxzoom&&(_=d.maxzoom),_<d.minzoom)return null;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(_).key);let w=this.sourceCache.getTileByID(this._sourceTileCache[t.key]);if((!w||!w.dem)&&u)for(;_>=d.minzoom&&(!w||!w.dem);)w=this.sourceCache.getTileByID(t.scaledTo(_--).key);return w}anyTilesAfterTime(t=Date.now()){return this._lastTilesetChange>=t}_isWithinTileRanges(t,u){return u[t.canonical.z]&&t.canonical.x>=u[t.canonical.z].minTileX&&t.canonical.x<=u[t.canonical.z].maxTileX&&t.canonical.y>=u[t.canonical.z].minTileY&&t.canonical.y<=u[t.canonical.z].maxTileY}}class jo{constructor(t,u,d){this._meshCache={},this.painter=t,this.sourceCache=new ti(u),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(t,u,d,_=c.$){var w;if(!(u>=0&&u<_&&d>=0&&d<_))return 0;const A=this.getTerrainData(t),I=(w=A.tile)===null||w===void 0?void 0:w.dem;if(!I)return 0;const k=c.cs([],[u/_*c.$,d/_*c.$],A.u_terrain_matrix),N=[k[0]*I.dim,k[1]*I.dim],B=Math.floor(N[0]),W=Math.floor(N[1]),H=N[0]-B,K=N[1]-W;return I.get(B,W)*(1-H)*(1-K)+I.get(B+1,W)*H*(1-K)+I.get(B,W+1)*(1-H)*K+I.get(B+1,W+1)*H*K}getElevationForLngLatZoom(t,u){if(!c.ct(u,t.wrap()))return 0;const{tileID:d,mercatorX:_,mercatorY:w}=this._getOverscaledTileIDFromLngLatZoom(t,u);return this.getElevation(d,_%c.$,w%c.$,c.$)}getElevation(t,u,d,_=c.$){return this.getDEMElevation(t,u,d,_)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){const _=this.painter.context,w=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new c.T(_,w,_.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new c.T(_,new c.R({width:1,height:1}),_.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.ag([])}const u=this.sourceCache.getSourceTile(t,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const _=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new c.T(_,u.dem.getPixels(),_.gl.RGBA,{premultiply:!1}),u.demTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const d=u&&u+u.tileID.key+t.key;if(d&&!this._demMatrixCache[d]){const _=this.sourceCache.sourceCache._source.maxzoom;let w=t.canonical.z-u.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=_?w=t.canonical.z-_:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const A=t.canonical.x-(t.canonical.x>>w<<w),I=t.canonical.y-(t.canonical.y>>w<<w),k=c.cu(new Float64Array(16),[1/(c.$<<w),1/(c.$<<w),0]);c.M(k,k,[A*c.$,I*c.$,0]),this._demMatrixCache[t.key]={matrix:k,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(t){const u=this.painter,d=u.width/devicePixelRatio,_=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===_||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new c.T(u.context,{width:d,height:_,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new c.T(u.context,{width:d,height:_,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(d,_,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,d,_))),this._fbo.colorAttachment.set(t==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const t=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let w=0,A=0;w<this._coordsTextureSize;w++)for(let I=0;I<this._coordsTextureSize;I++,A+=4)u[A+0]=255&I,u[A+1]=255&w,u[A+2]=I>>8<<4|w>>8,u[A+3]=0;const d=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),_=new c.T(t,d,t.gl.RGBA,{premultiply:!1});return _.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=_,_}pointCoordinate(t){this.painter.maybeDrawDepthAndCoords(!0);const u=new Uint8Array(4),d=this.painter.context,_=d.gl,w=Math.round(t.x*this.painter.pixelRatio/devicePixelRatio),A=Math.round(t.y*this.painter.pixelRatio/devicePixelRatio),I=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),_.readPixels(w,I-A-1,1,1,_.RGBA,_.UNSIGNED_BYTE,u),d.bindFramebuffer.set(null);const k=u[0]+(u[2]>>4<<8),N=u[1]+((15&u[2])<<8),B=this.coordsIndex[255-u[3]],W=B&&this.sourceCache.getTileByID(B);if(!W)return null;const H=this._coordsTextureSize,K=(1<<W.tileID.canonical.z)*H;return new c.a1((W.tileID.canonical.x*H+k)/K+W.tileID.wrap,(W.tileID.canonical.y*H+N)/K,this.getElevation(W.tileID,k,N,H))}depthAtPoint(t){const u=new Uint8Array(4),d=this.painter.context,_=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),_.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,_.RGBA,_.UNSIGNED_BYTE,u),d.bindFramebuffer.set(null),(u[0]/16777216+u[1]/65536+u[2]/256+u[3])/256}getTerrainMesh(t){var u;const d=((u=this.painter.style.projection)===null||u===void 0?void 0:u.transitionState)>0,_=d&&t.canonical.y===0,w=d&&t.canonical.y===(1<<t.canonical.z)-1,A=`m_${_?"n":""}_${w?"s":""}`;if(this._meshCache[A])return this._meshCache[A];const I=this.painter.context,k=new c.cv,N=new c.aN,B=this.meshSize,W=c.$/B,H=B*B;for(let ge=0;ge<=B;ge++)for(let ke=0;ke<=B;ke++)k.emplaceBack(ke*W,ge*W,0);for(let ge=0;ge<H;ge+=B+1)for(let ke=0;ke<B;ke++)N.emplaceBack(ke+ge,B+ke+ge+1,B+ke+ge+2),N.emplaceBack(ke+ge,B+ke+ge+2,ke+ge+1);const K=k.length,ie=K+(B+1),ce=(B+1)*B,he=_?c.bh:0,fe=_?0:1,me=w?c.bi:c.$,xe=w?0:1;for(let ge=0;ge<=B;ge++)k.emplaceBack(ge*W,he,fe);for(let ge=0;ge<=B;ge++)k.emplaceBack(ge*W,me,xe);for(let ge=0;ge<B;ge++)N.emplaceBack(ce+ge,ie+ge,ie+ge+1),N.emplaceBack(ce+ge,ie+ge+1,ce+ge+1),N.emplaceBack(0+ge,K+ge+1,K+ge),N.emplaceBack(0+ge,0+ge+1,K+ge+1);const ye=k.length,we=ye+2*(B+1);for(const ge of[0,1])for(let ke=0;ke<=B;ke++)for(const Ze of[0,1])k.emplaceBack(ge*c.$,ke*W,Ze);for(let ge=0;ge<2*B;ge+=2)N.emplaceBack(ye+ge,ye+ge+1,ye+ge+3),N.emplaceBack(ye+ge,ye+ge+3,ye+ge+2),N.emplaceBack(we+ge,we+ge+3,we+ge+1),N.emplaceBack(we+ge,we+ge+2,we+ge+3);const Te=new ks(I.createVertexBuffer(k,Lh.members),I.createIndexBuffer(N),c.aM.simpleSegment(0,0,k.length,N.length));return this._meshCache[A]=Te,Te}getMeshFrameDelta(t){return 2*Math.PI*c.bu/Math.pow(2,Math.max(t,0))/5}getMinTileElevationForLngLatZoom(t,u){var d;const{tileID:_}=this._getOverscaledTileIDFromLngLatZoom(t,u);return(d=this.getMinMaxElevation(_).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(t){const u=this.getTerrainData(t).tile,d={minElevation:null,maxElevation:null};return u&&u.dem&&(d.minElevation=u.dem.min*this.exaggeration,d.maxElevation=u.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(t,u){const d=c.a1.fromLngLat(t.wrap()),_=(1<<u)*c.$,w=d.x*_,A=d.y*_,I=Math.floor(w/c.$),k=Math.floor(A/c.$);return{tileID:new c.Z(u,0,u,I,k),mercatorX:w,mercatorY:A}}}class Lt{constructor(t,u,d){this._context=t,this._size=u,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const t of this._objects)t.texture.destroy(),t.fbo.destroy()}_createObject(t){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new c.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(d.texture),{id:t,fbo:u,texture:d,stamp:-1,inUse:!1}}getObjectForId(t){return this._objects[t]}useObject(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((u=>t.id!==u)),this._recentlyUsed.push(t.id)}stampObject(t){t.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const t=this._createObject(this._objects.length);return this._objects.push(t),t}freeObject(t){t.inUse=!1}freeAllObjects(){for(const t of this._objects)this.freeObject(t)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((t=>!t.inUse))===!1}}const Vt={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class hs{constructor(t,u){this.painter=t,this.terrain=u,this.pool=new Lt(t.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}prepareForRender(t,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=t._order.filter((d=>!t._layers[d].isHidden(u))),this._coordsAscending={};for(const d in t.sourceCaches){this._coordsAscending[d]={};const _=t.sourceCaches[d].getVisibleCoordinates(),w=t.sourceCaches[d].getSource(),A=w instanceof Qn?w.terrainTileRanges:null;for(const I of _){const k=this.terrain.sourceCache.getTerrainCoords(I,A);for(const N in k)this._coordsAscending[d][N]||(this._coordsAscending[d][N]=[]),this._coordsAscending[d][N].push(k[N])}}this._coordsAscendingStr={};for(const d of t._order){const _=t._layers[d],w=_.source;if(Vt[_.type]&&!this._coordsAscendingStr[w]){this._coordsAscendingStr[w]={};for(const A in this._coordsAscending[w])this._coordsAscendingStr[w][A]=this._coordsAscending[w][A].map((I=>I.key)).sort().join()}}for(const d of this._renderableTiles)for(const _ in this._coordsAscendingStr){const w=this._coordsAscendingStr[_][d.tileID.key];w&&w!==d.rttCoords[_]&&(d.rtt=[])}}renderLayer(t,u){if(t.isHidden(this.painter.transform.zoom))return!1;const d=Object.assign(Object.assign({},u),{isRenderingToTexture:!0}),_=t.type,w=this.painter,A=this._renderableLayerIds[this._renderableLayerIds.length-1]===t.id;if(Vt[_]&&(this._prevType&&Vt[this._prevType]||this._stacks.push([]),this._prevType=_,this._stacks[this._stacks.length-1].push(t.id),!A))return!0;if(Vt[this._prevType]||Vt[_]&&A){this._prevType=_;const I=this._stacks.length-1,k=this._stacks[I]||[];for(const N of this._renderableTiles){if(this.pool.isFull()&&(mi(this.painter,this.terrain,this._rttTiles,d),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(N),N.rtt[I]){const W=this.pool.getObjectForId(N.rtt[I].id);if(W.stamp===N.rtt[I].stamp){this.pool.useObject(W);continue}}const B=this.pool.getOrCreateFreeObject();this.pool.useObject(B),this.pool.stampObject(B),N.rtt[I]={id:B.id,stamp:B.stamp},w.context.bindFramebuffer.set(B.fbo.framebuffer),w.context.clear({color:c.bf.transparent,stencil:0}),w.currentStencilSource=void 0;for(let W=0;W<k.length;W++){const H=w.style._layers[k[W]],K=H.source?this._coordsAscending[H.source][N.tileID.key]:[N.tileID];w.context.viewport.set([0,0,B.fbo.width,B.fbo.height]),w._renderTileClippingMasks(H,K,!0),w.renderLayer(w,w.style.sourceCaches[H.source],H,K,d),H.source&&(N.rttCoords[H.source]=this._coordsAscendingStr[H.source][N.tileID.key])}}return mi(this.painter,this.terrain,this._rttTiles,d),this._rttTiles=[],this.pool.freeAllObjects(),Vt[_]}return!1}}const jf={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},xn=C,pa={hash:!1,interactive:!0,bearingSnap:7,attributionControl:mo,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},zh={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Qi{constructor(t,u,d=!1){this.mousedown=w=>{this.startMove(w,F.mousePos(this.element,w)),F.addEventListener(window,"mousemove",this.mousemove),F.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=w=>{this.move(w,F.mousePos(this.element,w))},this.mouseup=w=>{this._rotatePitchHandler.dragEnd(w),this.offTemp()},this.touchstart=w=>{w.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=F.touchPos(this.element,w.targetTouches)[0],this.startMove(w,this._startPos),F.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.addEventListener(window,"touchend",this.touchend))},this.touchmove=w=>{w.targetTouches.length!==1?this.reset():(this._lastPos=F.touchPos(this.element,w.targetTouches)[0],this.move(w,this._lastPos))},this.touchend=w=>{w.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=u;const _=new Th;this._rotatePitchHandler=new Ja({clickTolerance:3,move:(w,A)=>{const I=u.getBoundingClientRect(),k=new c.P((I.bottom-I.top)/2,(I.right-I.left)/2);return{bearingDelta:c.cn(new c.P(w.x,A.y),A,k),pitchDelta:d?-.5*(A.y-w.y):void 0}},moveStateManager:_,enable:!0,assignEvents:()=>{}}),this.map=t,F.addEventListener(u,"mousedown",this.mousedown),F.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),F.addEventListener(u,"touchcancel",this.reset)}startMove(t,u){this._rotatePitchHandler.dragStart(t,u),F.disableDrag()}move(t,u){const d=this.map,{bearingDelta:_,pitchDelta:w}=this._rotatePitchHandler.dragMove(t,u)||{};_&&d.setBearing(d.getBearing()+_),w&&d.setPitch(d.getPitch()+w)}off(){const t=this.element;F.removeEventListener(t,"mousedown",this.mousedown),F.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),F.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.removeEventListener(window,"touchend",this.touchend),F.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){F.enableDrag(),F.removeEventListener(window,"mousemove",this.mousemove),F.removeEventListener(window,"mouseup",this.mouseup),F.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.removeEventListener(window,"touchend",this.touchend)}}let Ys;function Lu(b,t,u,d=!1){if(d||!u.getCoveringTilesDetailsProvider().allowWorldCopies())return b?.wrap();const _=new c.S(b.lng,b.lat);if(b=new c.S(b.lng,b.lat),t){const w=new c.S(b.lng-360,b.lat),A=new c.S(b.lng+360,b.lat),I=u.locationToScreenPoint(b).distSqr(t);u.locationToScreenPoint(w).distSqr(t)<I?b=w:u.locationToScreenPoint(A).distSqr(t)<I&&(b=A)}for(;Math.abs(b.lng-u.center.lng)>180;){const w=u.locationToScreenPoint(b);if(w.x>=0&&w.y>=0&&w.x<=u.width&&w.y<=u.height)break;b.lng>u.center.lng?b.lng-=360:b.lng+=360}return b.lng!==_.lng&&u.isPointOnMapSurface(u.locationToScreenPoint(b))?b:_}const tn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Sn(b,t,u){const d=b.classList;for(const _ in tn)d.remove(`maplibregl-${u}-anchor-${_}`);d.add(`maplibregl-${u}-anchor-${t}`)}class zu extends c.E{constructor(t){if(super(),this._onKeyPress=u=>{const d=u.code,_=u.charCode||u.keyCode;d!=="Space"&&d!=="Enter"&&_!==32&&_!==13||this.togglePopup()},this._onMapClick=u=>{const d=u.originalEvent.target,_=this._element;this._popup&&(d===_||_.contains(d))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const d=this._map.loaded()&&!this._map.isMoving();(u?.type==="terrain"||u?.type==="render"&&!d)&&this._map.once("render",this._update),this._lngLat=Lu(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?w="rotateX(0deg)":this._pitchAlignment==="map"&&(w=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||u&&u.type!=="moveend"||(this._pos=this._pos.round()),F.setTransform(this._element,`${tn[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${_}`),z.frameAsync(new AbortController).then((()=>{this._updateOpacity(u&&u.type==="moveend")})).catch((()=>{}))},this._onMove=u=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.l("dragstart"))),this.fire(new c.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.l("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._subpixelPositioning=t&&t.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment!=="auto"?t.pitchAlignment:this._rotationAlignment,this.setOpacity(t?.opacity,t?.opacityWhenCovered),t&&t.element)this._element=t.element,this._offset=c.P.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=F.create("div");const u=F.createNS("http://www.w3.org/2000/svg","svg"),d=41,_=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${d}px`),u.setAttributeNS(null,"width",`${_}px`),u.setAttributeNS(null,"viewBox",`0 0 ${_} ${d}`);const w=F.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");const A=F.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"fill-rule","nonzero");const I=F.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const k=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const fe of k){const me=F.createNS("http://www.w3.org/2000/svg","ellipse");me.setAttributeNS(null,"opacity","0.04"),me.setAttributeNS(null,"cx","10.5"),me.setAttributeNS(null,"cy","5.80029008"),me.setAttributeNS(null,"rx",fe.rx),me.setAttributeNS(null,"ry",fe.ry),I.appendChild(me)}const N=F.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"fill",this._color);const B=F.createNS("http://www.w3.org/2000/svg","path");B.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),N.appendChild(B);const W=F.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"opacity","0.25"),W.setAttributeNS(null,"fill","#000000");const H=F.createNS("http://www.w3.org/2000/svg","path");H.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),W.appendChild(H);const K=F.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"transform","translate(6.0, 7.0)"),K.setAttributeNS(null,"fill","#FFFFFF");const ie=F.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ce=F.createNS("http://www.w3.org/2000/svg","circle");ce.setAttributeNS(null,"fill","#000000"),ce.setAttributeNS(null,"opacity","0.25"),ce.setAttributeNS(null,"cx","5.5"),ce.setAttributeNS(null,"cy","5.5"),ce.setAttributeNS(null,"r","5.4999962");const he=F.createNS("http://www.w3.org/2000/svg","circle");he.setAttributeNS(null,"fill","#FFFFFF"),he.setAttributeNS(null,"cx","5.5"),he.setAttributeNS(null,"cy","5.5"),he.setAttributeNS(null,"r","5.4999962"),ie.appendChild(ce),ie.appendChild(he),A.appendChild(I),A.appendChild(N),A.appendChild(W),A.appendChild(K),A.appendChild(ie),u.appendChild(A),u.setAttributeNS(null,"height",d*this._scale+"px"),u.setAttributeNS(null,"width",_*this._scale+"px"),this._element.appendChild(u),this._offset=c.P.convert(t&&t.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(u=>{u.preventDefault()})),this._element.addEventListener("mousedown",(u=>{u.preventDefault()})),Sn(this._element,this._anchor,"marker"),t&&t.className)for(const u of t.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(t){return this.remove(),this._map=t,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",t._getUIString("Marker.Title")),t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("terrain",this._update),t.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),F.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=c.S.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const _=Math.abs(13.5)/Math.SQRT2;t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=t,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(t){return this._subpixelPositioning=t,this}getPopup(){return this._popup}togglePopup(){const t=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:t?(t.isOpen()?t.remove():(t.setLngLat(this._lngLat),t.addTo(this._map)),this):this}_updateOpacity(t=!1){var u,d;const _=(u=this._map)===null||u===void 0?void 0:u.terrain,w=this._map.transform.isLocationOccluded(this._lngLat);if(!_||w){const K=w?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==K&&(this._element.style.opacity=K))}if(t)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const A=this._map,I=A.terrain.depthAtPoint(this._pos),k=A.terrain.getElevationForLngLatZoom(this._lngLat,A.transform.tileZoom);if(A.transform.lngLatToCameraDepth(this._lngLat,k)-I<.006)return void(this._element.style.opacity=this._opacity);const N=-this._offset.y/A.transform.pixelsPerMeter,B=Math.sin(A.getPitch()*Math.PI/180)*N,W=A.terrain.depthAtPoint(new c.P(this._pos.x,this._pos.y-this._offset.y)),H=A.transform.lngLatToCameraDepth(this._lngLat,k+B)-W>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&H&&this._popup.remove(),this._element.style.opacity=H?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(t){return this._offset=c.P.convert(t),this._update(),this}addClassName(t){this._element.classList.add(t)}removeClassName(t){this._element.classList.remove(t)}toggleClassName(t){return this._element.classList.toggle(t)}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&t!=="auto"?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(t,u){return(this._opacity===void 0||t===void 0&&u===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),t!==void 0&&(this._opacity=t),u!==void 0&&(this._opacityWhenCovered=u),this._map&&this._updateOpacity(!0),this}}const ma={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let cn=0,fs=!1;const Ul={maxWidth:100,unit:"metric"};function Ol(b,t,u){const d=u&&u.maxWidth||100,_=b._container.clientHeight/2,w=b._container.clientWidth/2,A=b.unproject([w-d/2,_]),I=b.unproject([w+d/2,_]),k=Math.round(b.project(I).x-b.project(A).x),N=Math.min(d,k,b._container.clientWidth),B=A.distanceTo(I);if(u&&u.unit==="imperial"){const W=3.2808*B;W>5280?yo(t,N,W/5280,b._getUIString("ScaleControl.Miles")):yo(t,N,W,b._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?yo(t,N,B/1852,b._getUIString("ScaleControl.NauticalMiles")):B>=1e3?yo(t,N,B/1e3,b._getUIString("ScaleControl.Kilometers")):yo(t,N,B,b._getUIString("ScaleControl.Meters"))}function yo(b,t,u,d){const _=(function(w){const A=Math.pow(10,`${Math.floor(w)}`.length-1);let I=w/A;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:(function(k){const N=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*N)/N})(I),A*I})(u);b.style.width=t*(_/u)+"px",b.innerHTML=`${_}&nbsp;${d}`}const go={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Fu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Nu(b){if(b){if(typeof b=="number"){const t=Math.round(Math.abs(b)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,b),"top-left":new c.P(t,t),"top-right":new c.P(-t,t),bottom:new c.P(0,-b),"bottom-left":new c.P(t,-t),"bottom-right":new c.P(-t,-t),left:new c.P(b,0),right:new c.P(-b,0)}}if(b instanceof c.P||Array.isArray(b)){const t=c.P.convert(b);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:c.P.convert(b.center||[0,0]),top:c.P.convert(b.top||[0,0]),"top-left":c.P.convert(b["top-left"]||[0,0]),"top-right":c.P.convert(b["top-right"]||[0,0]),bottom:c.P.convert(b.bottom||[0,0]),"bottom-left":c.P.convert(b["bottom-left"]||[0,0]),"bottom-right":c.P.convert(b["bottom-right"]||[0,0]),left:c.P.convert(b.left||[0,0]),right:c.P.convert(b.right||[0,0])}}return Nu(new c.P(0,0))}const Oc=C;g.AJAXError=c.cz,g.Event=c.l,g.Evented=c.E,g.LngLat=c.S,g.MercatorCoordinate=c.a1,g.Point=c.P,g.addProtocol=c.cA,g.config=c.a,g.removeProtocol=c.cB,g.AttributionControl=wr,g.BoxZoomHandler=Tl,g.CanvasSource=ba,g.CooperativeGesturesHandler=Ff,g.DoubleClickZoomHandler=ku,g.DragPanHandler=kl,g.DragRotateHandler=Uu,g.EdgeInsets=es,g.FullscreenControl=class extends c.E{constructor(b={}){super(),this._onFullscreenChange=()=>{var t;let u=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((t=u?.shadowRoot)===null||t===void 0)&&t.fullscreenElement;)u=u.shadowRoot.fullscreenElement;u===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,b&&b.container&&(b.container instanceof HTMLElement?this._container=b.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(b){return this._map=b,this._container||(this._container=this._map.getContainer()),this._controlContainer=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){F.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const b=this._fullscreenButton=F.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);F.create("span","maplibregl-ctrl-icon",b).setAttribute("aria-hidden","true"),b.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const b=this._getTitle();this._fullscreenButton.setAttribute("aria-label",b),this._fullscreenButton.title=b}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new c.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},g.GeoJSONSource=Nn,g.GeolocateControl=class extends c.E{constructor(b){super(),this._onSuccess=t=>{if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new c.l("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(t),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.l("geolocate",t)),this._finish()}},this._updateCamera=t=>{const u=new c.S(t.coords.longitude,t.coords.latitude),d=t.coords.accuracy,_=this._map.getBearing(),w=c.e({bearing:_},this.options.fitBoundsOptions),A=$t.fromLngLat(u,d);this._map.fitBounds(A,w,{geolocateSource:!0})},this._updateMarker=t=>{if(t){const u=new c.S(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=t.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=t=>{if(this._map){if(t.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(t.code===3&&fs)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.l("error",t)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=F.create("button","maplibregl-ctrl-geolocate",this._container),F.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=t=>{if(this._map){if(t===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=F.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new zu({element:this._dotElement}),this._circleElement=F.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new zu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(u=>{const d=u?.[0]instanceof ResizeObserverEntry;u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.l("trackuserlocationend")),this.fire(new c.l("userlocationlostfocus")))}))}},this.options=c.e({},ma,b)}onAdd(b){return this._map=b,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return c._(this,arguments,void 0,(function*(t=!1){if(Ys!==void 0&&!t)return Ys;if(window.navigator.permissions===void 0)return Ys=!!window.navigator.geolocation,Ys;try{Ys=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ys=!!window.navigator.geolocation}return Ys}))})().then((t=>this._finishSetupUI(t))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),F.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,cn=0,fs=!1}_isOutOfMapMaxBounds(b){const t=this._map.getMaxBounds(),u=b.coords;return t&&(u.longitude<t.getWest()||u.longitude>t.getEast()||u.latitude<t.getSouth()||u.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const b=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&b))return;const t=this._map.project(b),u=this._map.unproject([t.x+100,t.y]),d=b.distanceTo(u)/100,_=2*this._accuracy/d;this._circleElement.style.width=`${_.toFixed(2)}px`,this._circleElement.style.height=`${_.toFixed(2)}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":cn--,fs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.l("trackuserlocationstart")),this.fire(new c.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let b;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),cn++,cn>1?(b={maximumAge:6e5,timeout:0},fs=!0):(b=this.options.positionOptions,fs=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,b)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},g.GlobeControl=class{constructor(){this._toggleProjection=()=>{var b;const t=(b=this._map.getProjection())===null||b===void 0?void 0:b.type;this._map.setProjection(t!=="mercator"&&t?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var b;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((b=this._map.getProjection())===null||b===void 0?void 0:b.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(b){return this._map=b,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=F.create("button","maplibregl-ctrl-globe",this._container),F.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){F.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},g.Hash=Xa,g.ImageSource=Qn,g.KeyboardHandler=fr,g.LngLatBounds=$t,g.LogoControl=$r,g.Map=class extends Ou{constructor(b){var t,u;c.cw.mark(c.cx.create);const d=Object.assign(Object.assign(Object.assign({},pa),b),{canvasContextAttributes:Object.assign(Object.assign({},pa.canvasContextAttributes),b.canvasContextAttributes)});if(d.minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(d.maxPitch!=null&&d.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const _=new Nr,w=new Mn;if(d.minZoom!==void 0&&_.setMinZoom(d.minZoom),d.maxZoom!==void 0&&_.setMaxZoom(d.maxZoom),d.minPitch!==void 0&&_.setMinPitch(d.minPitch),d.maxPitch!==void 0&&_.setMaxPitch(d.maxPitch),d.renderWorldCopies!==void 0&&_.setRenderWorldCopies(d.renderWorldCopies),super(_,w,{bearingSnap:d.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Hn,this._controls=[],this._mapId=c.a7(),this._contextLost=I=>{I.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new c.l("webglcontextlost",{originalEvent:I}))},this._contextRestored=I=>{this._setupPainter(),this.resize(),this._update(),this.fire(new c.l("webglcontextrestored",{originalEvent:I}))},this._onMapScroll=I=>{if(I.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=d.interactive,this._maxTileCacheSize=d.maxTileCacheSize,this._maxTileCacheZoomLevels=d.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},d.canvasContextAttributes),this._trackResize=d.trackResize===!0,this._bearingSnap=d.bearingSnap,this._centerClampedToGround=d.centerClampedToGround,this._refreshExpiredTiles=d.refreshExpiredTiles===!0,this._fadeDuration=d.fadeDuration,this._crossSourceCollisions=d.crossSourceCollisions===!0,this._collectResourceTiming=d.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},jf),d.locale),this._clickTolerance=d.clickTolerance,this._overridePixelRatio=d.pixelRatio,this._maxCanvasSize=d.maxCanvasSize,this.transformCameraUpdate=d.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=d.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=_e.addThrottleControl((()=>this.isMoving())),this._requestManager=new ve(d.transformRequest),typeof d.container=="string"){if(this._container=document.getElementById(d.container),!this._container)throw new Error(`Container '${d.container}' not found.`)}else{if(!(d.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=d.container}if(d.maxBounds&&this.setMaxBounds(d.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let I=!1;const k=ss((N=>{this._trackResize&&!this._removed&&(this.resize(N),this.redraw())}),50);this._resizeObserver=new ResizeObserver((N=>{I?k(N):I=!0})),this._resizeObserver.observe(this._container)}this.handlers=new Nf(this,d),this._hash=d.hash&&new Xa(typeof d.hash=="string"&&d.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:d.center,elevation:d.elevation,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,roll:d.roll}),d.bounds&&(this.resize(),this.fitBounds(d.bounds,c.e({},d.fitBoundsOptions,{duration:0}))));const A=typeof d.style=="string"||((u=(t=d.style)===null||t===void 0?void 0:t.projection)===null||u===void 0?void 0:u.type)!=="globe";this.resize(null,A),this._localIdeographFontFamily=d.localIdeographFontFamily,this._validateStyle=d.validateStyle,d.style&&this.setStyle(d.style,{localIdeographFontFamily:d.localIdeographFontFamily}),d.attributionControl&&this.addControl(new wr(typeof d.attributionControl=="boolean"?void 0:d.attributionControl)),d.maplibreLogo&&this.addControl(new $r,d.logoPosition),this.on("style.load",(()=>{if(A||this._resizeTransform(),this.transform.unmodified){const I=c.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(I)}})),this.on("data",(I=>{this._update(I.dataType==="style"),this.fire(new c.l(`${I.dataType}data`,I))})),this.on("dataloading",(I=>{this.fire(new c.l(`${I.dataType}dataloading`,I))})),this.on("dataabort",(I=>{this.fire(new c.l("sourcedataabort",I))}))}_getMapId(){return this._mapId}setGlobalStateProperty(b,t){return this.style.setGlobalStateProperty(b,t),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(b,t){if(t===void 0&&(t=b.getDefaultPosition?b.getDefaultPosition():"top-right"),!b||!b.onAdd)return this.fire(new c.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=b.onAdd(this);this._controls.push(b);const d=this._controlPositions[t];return t.indexOf("bottom")!==-1?d.insertBefore(u,d.firstChild):d.appendChild(u),this}removeControl(b){if(!b||!b.onRemove)return this.fire(new c.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(b);return t>-1&&this._controls.splice(t,1),b.onRemove(this),this}hasControl(b){return this._controls.indexOf(b)>-1}coveringTiles(b){return Oe(this.transform,b)}calculateCameraOptionsFromTo(b,t,u,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(b,t,u,d)}resize(b,t=!0){const[u,d]=this._containerDimensions(),_=this._getClampedPixelRatio(u,d);if(this._resizeCanvas(u,d,_),this.painter.resize(u,d,_),this.painter.overLimit()){const A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];const I=this._getClampedPixelRatio(u,d);this._resizeCanvas(u,d,I),this.painter.resize(u,d,I)}this._resizeTransform(t);const w=!this._moving;return w&&(this.stop(),this.fire(new c.l("movestart",b)).fire(new c.l("move",b))),this.fire(new c.l("resize",b)),w&&this.fire(new c.l("moveend",b)),this}_resizeTransform(b=!0){var t;const[u,d]=this._containerDimensions();this.transform.resize(u,d,b),(t=this._requestedCameraState)===null||t===void 0||t.resize(u,d,b)}_getClampedPixelRatio(b,t){const{0:u,1:d}=this._maxCanvasSize,_=this.getPixelRatio(),w=b*_,A=t*_;return Math.min(w>u?u/w:1,A>d?d/A:1)*_}getPixelRatio(){var b;return(b=this._overridePixelRatio)!==null&&b!==void 0?b:devicePixelRatio}setPixelRatio(b){this._overridePixelRatio=b,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(b){return this.transform.setMaxBounds($t.convert(b)),this._update()}setMinZoom(b){if((b=b??-2)>=-2&&b<=this.transform.maxZoom)return this.transform.setMinZoom(b),this._update(),this.getZoom()<b&&this.setZoom(b),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(b){if((b=b??22)>=this.transform.minZoom)return this.transform.setMaxZoom(b),this._update(),this.getZoom()>b&&this.setZoom(b),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(b){if((b=b??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(b>=0&&b<=this.transform.maxPitch)return this.transform.setMinPitch(b),this._update(),this.getPitch()<b&&this.setPitch(b),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(b){if((b=b??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(b>=this.transform.minPitch)return this.transform.setMaxPitch(b),this._update(),this.getPitch()>b&&this.setPitch(b),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(b){return this.transform.setRenderWorldCopies(b),this._update()}project(b){return this.transform.locationToScreenPoint(c.S.convert(b),this.style&&this.terrain)}unproject(b){return this.transform.screenPointToLocation(c.P.convert(b),this.terrain)}isMoving(){var b;return this._moving||((b=this.handlers)===null||b===void 0?void 0:b.isMoving())}isZooming(){var b;return this._zooming||((b=this.handlers)===null||b===void 0?void 0:b.isZooming())}isRotating(){var b;return this._rotating||((b=this.handlers)===null||b===void 0?void 0:b.isRotating())}_createDelegatedListener(b,t,u){if(b==="mouseenter"||b==="mouseover"){let d=!1;return{layers:t,listener:u,delegates:{mousemove:w=>{const A=t.filter((k=>this.getLayer(k))),I=A.length!==0?this.queryRenderedFeatures(w.point,{layers:A}):[];I.length?d||(d=!0,u.call(this,new Ka(b,this,w.originalEvent,{features:I}))):d=!1},mouseout:()=>{d=!1}}}}if(b==="mouseleave"||b==="mouseout"){let d=!1;return{layers:t,listener:u,delegates:{mousemove:A=>{const I=t.filter((k=>this.getLayer(k)));(I.length!==0?this.queryRenderedFeatures(A.point,{layers:I}):[]).length?d=!0:d&&(d=!1,u.call(this,new Ka(b,this,A.originalEvent)))},mouseout:A=>{d&&(d=!1,u.call(this,new Ka(b,this,A.originalEvent)))}}}}{const d=_=>{const w=t.filter((I=>this.getLayer(I))),A=w.length!==0?this.queryRenderedFeatures(_.point,{layers:w}):[];A.length&&(_.features=A,u.call(this,_),delete _.features)};return{layers:t,listener:u,delegates:{[b]:d}}}}_saveDelegatedListener(b,t){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(t)}_removeDelegatedListener(b,t,u){if(!this._delegatedListeners||!this._delegatedListeners[b])return;const d=this._delegatedListeners[b];for(let _=0;_<d.length;_++){const w=d[_];if(w.listener===u&&w.layers.length===t.length&&w.layers.every((A=>t.includes(A)))){for(const A in w.delegates)this.off(A,w.delegates[A]);return void d.splice(_,1)}}}on(b,t,u){if(u===void 0)return super.on(b,t);const d=typeof t=="string"?[t]:t,_=this._createDelegatedListener(b,d,u);this._saveDelegatedListener(b,_);for(const w in _.delegates)this.on(w,_.delegates[w]);return{unsubscribe:()=>{this._removeDelegatedListener(b,d,u)}}}once(b,t,u){if(u===void 0)return super.once(b,t);const d=typeof t=="string"?[t]:t,_=this._createDelegatedListener(b,d,u);for(const w in _.delegates){const A=_.delegates[w];_.delegates[w]=(...I)=>{this._removeDelegatedListener(b,d,u),A(...I)}}this._saveDelegatedListener(b,_);for(const w in _.delegates)this.once(w,_.delegates[w]);return this}off(b,t,u){return u===void 0?super.off(b,t):(this._removeDelegatedListener(b,typeof t=="string"?[t]:t,u),this)}queryRenderedFeatures(b,t){if(!this.style)return[];let u;const d=b instanceof c.P||Array.isArray(b),_=d?b:[[0,0],[this.transform.width,this.transform.height]];if(t=t||(d?{}:b)||{},_ instanceof c.P||typeof _[0]=="number")u=[c.P.convert(_)];else{const w=c.P.convert(_[0]),A=c.P.convert(_[1]);u=[w,new c.P(A.x,w.y),A,new c.P(w.x,A.y),w]}return this.style.queryRenderedFeatures(u,t,this.transform)}querySourceFeatures(b,t){return this.style.querySourceFeatures(b,t)}setStyle(b,t){return(t=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},t)).diff!==!1&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&b?(this._diffStyle(b,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(b,t))}setTransformRequest(b){return this._requestManager.setTransformRequest(b),this}_getUIString(b){const t=this._locale[b];if(t==null)throw new Error(`Missing UI string '${b}'`);return t}_updateStyle(b,t){var u,d;if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(b,t)));const _=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!b)),b?(this.style=new Sf(this,t||{}),this.style.setEventedParent(this,{style:this.style}),typeof b=="string"?this.style.loadURL(b,t,_):this.style.loadJSON(b,t,_),this):((d=(u=this.style)===null||u===void 0?void 0:u.projection)===null||d===void 0||d.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Sf(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(b,t){if(typeof b=="string"){const u=this._requestManager.transformRequest(b,"Style");c.j(u,new AbortController).then((d=>{this._updateDiff(d.data,t)})).catch((d=>{d&&this.fire(new c.k(d))}))}else typeof b=="object"&&this._updateDiff(b,t)}_updateDiff(b,t){try{this.style.setState(b,t)&&this._update(!0)}catch(u){c.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(b,t)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(b,t){return this._lazyInitEmptyStyle(),this.style.addSource(b,t),this._update(!0)}isSourceLoaded(b){const t=this.style&&this.style.sourceCaches[b];if(t!==void 0)return t.loaded();this.fire(new c.k(new Error(`There is no source with ID '${b}'`)))}setTerrain(b){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),b){const t=this.style.sourceCaches[b.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${b.source}`);this.terrain===null&&t.reload();for(const u in this.style._layers){const d=this.style._layers[u];d.type==="hillshade"&&d.source===b.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),d.type==="color-relief"&&d.source===b.source&&c.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new jo(this.painter,t,b),this.painter.renderToTexture=new hs(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=u=>{var d;u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==b.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((d=u.source)===null||d===void 0?void 0:d.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new c.l("terrain",{terrain:b})),this}getTerrain(){var b,t;return(t=(b=this.terrain)===null||b===void 0?void 0:b.options)!==null&&t!==void 0?t:null}areTilesLoaded(){const b=this.style&&this.style.sourceCaches;for(const t in b){const u=b[t]._tiles;for(const d in u){const _=u[d];if(_.state!=="loaded"&&_.state!=="errored")return!1}}return!0}removeSource(b){return this.style.removeSource(b),this._update(!0)}getSource(b){return this.style.getSource(b)}setSourceTileLodParams(b,t,u){if(u){const d=this.getSource(u);if(!d)throw new Error(`There is no source with ID "${u}", cannot set LOD parameters`);d.calculateTileZoom=yt(Math.max(1,b),Math.max(1,t))}else for(const d in this.style.sourceCaches)this.style.sourceCaches[d].getSource().calculateTileZoom=yt(Math.max(1,b),Math.max(1,t));return this._update(!0),this}refreshTiles(b,t){const u=this.style.sourceCaches[b];if(!u)throw new Error(`There is no source cache with ID "${b}", cannot refresh tile`);t===void 0?u.reload(!0):u.refreshTiles(t.map((d=>new c.a4(d.z,d.x,d.y))))}addImage(b,t,u={}){const{pixelRatio:d=1,sdf:_=!1,stretchX:w,stretchY:A,content:I,textFitWidth:k,textFitHeight:N}=u;if(this._lazyInitEmptyStyle(),!(t instanceof HTMLImageElement||c.b(t))){if(t.width===void 0||t.height===void 0)return this.fire(new c.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:B,height:W,data:H}=t,K=t;return this.style.addImage(b,{data:new c.R({width:B,height:W},new Uint8Array(H)),pixelRatio:d,stretchX:w,stretchY:A,content:I,textFitWidth:k,textFitHeight:N,sdf:_,version:0,userImage:K}),K.onAdd&&K.onAdd(this,b),this}}{const{width:B,height:W,data:H}=z.getImageData(t);this.style.addImage(b,{data:new c.R({width:B,height:W},H),pixelRatio:d,stretchX:w,stretchY:A,content:I,textFitWidth:k,textFitHeight:N,sdf:_,version:0})}}updateImage(b,t){const u=this.style.getImage(b);if(!u)return this.fire(new c.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=t instanceof HTMLImageElement||c.b(t)?z.getImageData(t):t,{width:_,height:w,data:A}=d;if(_===void 0||w===void 0)return this.fire(new c.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==u.data.width||w!==u.data.height)return this.fire(new c.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(t instanceof HTMLImageElement||c.b(t));return u.data.replace(A,I),this.style.updateImage(b,u),this}getImage(b){return this.style.getImage(b)}hasImage(b){return b?!!this.style.getImage(b):(this.fire(new c.k(new Error("Missing required image id"))),!1)}removeImage(b){this.style.removeImage(b)}loadImage(b){return _e.getImage(this._requestManager.transformRequest(b,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(b,t){return this._lazyInitEmptyStyle(),this.style.addLayer(b,t),this._update(!0)}moveLayer(b,t){return this.style.moveLayer(b,t),this._update(!0)}removeLayer(b){return this.style.removeLayer(b),this._update(!0)}getLayer(b){return this.style.getLayer(b)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(b,t,u){return this.style.setLayerZoomRange(b,t,u),this._update(!0)}setFilter(b,t,u={}){return this.style.setFilter(b,t,u),this._update(!0)}getFilter(b){return this.style.getFilter(b)}setPaintProperty(b,t,u,d={}){return this.style.setPaintProperty(b,t,u,d),this._update(!0)}getPaintProperty(b,t){return this.style.getPaintProperty(b,t)}setLayoutProperty(b,t,u,d={}){return this.style.setLayoutProperty(b,t,u,d),this._update(!0)}getLayoutProperty(b,t){return this.style.getLayoutProperty(b,t)}setGlyphs(b,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(b,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(b,t,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(b,t,u,(d=>{d||this._update(!0)})),this}removeSprite(b){return this._lazyInitEmptyStyle(),this.style.removeSprite(b),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(b,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(b,t,(u=>{u||this._update(!0)})),this}setLight(b,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(b,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(b,t={}){return this._lazyInitEmptyStyle(),this.style.setSky(b,t),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(b,t){return this.style.setFeatureState(b,t),this._update()}removeFeatureState(b,t){return this.style.removeFeatureState(b,t),this._update()}getFeatureState(b){return this.style.getFeatureState(b)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let b=0,t=0;return this._container&&(b=this._container.clientWidth||400,t=this._container.clientHeight||300),[b,t]}_setupContainer(){const b=this._container;b.classList.add("maplibregl-map");const t=this._canvasContainer=F.create("div","maplibregl-canvas-container",b);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=F.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),d=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],d);const _=this._controlContainer=F.create("div","maplibregl-control-container",b),w=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((A=>{w[A]=F.create("div",`maplibregl-ctrl-${A} `,_)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(b,t,u){this._canvas.width=Math.floor(u*b),this._canvas.height=Math.floor(u*t),this._canvas.style.width=`${b}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const b=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let t=null;this._canvas.addEventListener("webglcontextcreationerror",(d=>{t={requestedAttributes:b},d&&(t.statusMessage=d.statusMessage,t.type=d.type)}),{once:!0});let u=null;if(u=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,b):this._canvas.getContext("webgl2",b)||this._canvas.getContext("webgl",b),!u){const d="Failed to initialize WebGL";throw t?(t.message=d,new Error(JSON.stringify(t))):new Error(d)}this.painter=new Mu(u,this.transform),V.testSupport(u)}migrateProjection(b,t){super.migrateProjection(b,t),this.painter.transform=b,this.fire(new c.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(b){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(b){return this._update(),this._renderTaskQueue.add(b)}_cancelRenderFrame(b){this._renderTaskQueue.remove(b)}_render(b){var t,u,d,_,w;const A=this._idleTriggered?this._fadeDuration:0,I=((t=this.style.projection)===null||t===void 0?void 0:t.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(b),this._removed)return;let k=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const W=this.transform.zoom,H=z.now();this.style.zoomHistory.update(W,H);const K=new c.F(W,{now:H,fadeDuration:A,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ie=K.crossFadingFactor();ie===1&&ie===this._crossFadingFactor||(k=!0,this._crossFadingFactor=ie),this.style.update(K)}const N=((u=this.style.projection)===null||u===void 0?void 0:u.transitionState)>0!==I;(d=this.style.projection)===null||d===void 0||d.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((_=this.style.projection)===null||_===void 0?void 0:_.transitionState,(w=this.style.projection)===null||w===void 0?void 0:w.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||N)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,A,this._crossSourceCollisions,N),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:A,showPadding:this.showPadding}),this.fire(new c.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.cw.mark(c.cx.load),this.fire(new c.l("load"))),this.style&&(this.style.hasTransitions()||k)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const B=this._sourcesDirty||this._styleDirty||this._placementDirty;return B||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.l("idle")),!this._loaded||this._fullyLoaded||B||(this._fullyLoaded=!0,c.cw.mark(c.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var b;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),_e.removeThrottleControl(this._imageQueueHandle),(b=this._resizeObserver)===null||b===void 0||b.disconnect();const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t?.loseContext&&t.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),F.remove(this._canvasContainer),F.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),c.cw.clearMetrics(),this._removed=!0,this.fire(new c.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,z.frame(this._frameRequest,(b=>{c.cw.frame(b),this._frameRequest=null;try{this._render(b)}catch(t){if(!c.cy(t)&&!(function(u){return u.message===Dc})(t))throw t}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())}get showPadding(){return!!this._showPadding}set showPadding(b){this._showPadding!==b&&(this._showPadding=b,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())}get repaint(){return!!this._repaint}set repaint(b){this._repaint!==b&&(this._repaint=b,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(b){this._vertices=b,this._update()}get version(){return xn}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(b){return this._lazyInitEmptyStyle(),this.style.setProjection(b),this._update(!0)}},g.MapMouseEvent=Ka,g.MapTouchEvent=Eu,g.MapWheelEvent=Of,g.Marker=zu,g.NavigationControl=class{constructor(b){this._updateZoomButtons=()=>{const t=this._map.getZoom(),u=t===this._map.getMaxZoom(),d=t===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(t,u)=>{const d=this._map._getUIString(`NavigationControl.${u}`);t.title=d,t.setAttribute("aria-label",d)},this.options=c.e({},zh,b),this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(t=>this._map.zoomIn({},{originalEvent:t}))),F.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(t=>this._map.zoomOut({},{originalEvent:t}))),F.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})),this._compassIcon=F.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(b){return this._map=b,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Qi(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){F.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(b,t){const u=F.create("button",b,this._container);return u.type="button",u.addEventListener("click",t),u}},g.Popup=class extends c.E{constructor(b){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&F.remove(this._content),this._container&&(F.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new c.l("close"))),this),this._onMouseUp=t=>{this._update(t.point)},this._onMouseMove=t=>{this._update(t.point)},this._onDrag=t=>{this._update(t.point)},this._update=t=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=F.create("div","maplibregl-popup",this._map.getContainer()),this._tip=F.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const A of this.options.className.split(" "))this._container.classList.add(A);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Lu(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!t)return;const u=this._flatPos=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&t?t:this._map.transform.locationToScreenPoint(this._lngLat));let d=this.options.anchor;const _=Nu(this.options.offset);if(!d){const A=this._container.offsetWidth,I=this._container.offsetHeight;let k;k=u.y+_.bottom.y<I?["top"]:u.y>this._map.transform.height-I?["bottom"]:[],u.x<A/2?k.push("left"):u.x>this._map.transform.width-A/2&&k.push("right"),d=k.length===0?"bottom":k.join("-")}let w=u.add(_[d]);this.options.subpixelPositioning||(w=w.round()),F.setTransform(this._container,`${tn[d]} translate(${w.x}px,${w.y}px)`),Sn(this._container,d,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(go),b)}addTo(b){return this._map&&this.remove(),this._map=b,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(b){return this._lngLat=c.S.convert(b),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(b){return this.setDOMContent(document.createTextNode(b))}setHTML(b){const t=document.createDocumentFragment(),u=document.createElement("body");let d;for(u.innerHTML=b;d=u.firstChild,d;)t.appendChild(d);return this.setDOMContent(t)}getMaxWidth(){var b;return(b=this._container)===null||b===void 0?void 0:b.style.maxWidth}setMaxWidth(b){return this.options.maxWidth=b,this._update(),this}setDOMContent(b){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=F.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(b),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(b){return this._container&&this._container.classList.add(b),this}removeClassName(b){return this._container&&this._container.classList.remove(b),this}setOffset(b){return this.options.offset=b,this._update(),this}toggleClassName(b){if(this._container)return this._container.classList.toggle(b)}setSubpixelPositioning(b){this.options.subpixelPositioning=b}_createCloseButton(){this.options.closeButton&&(this._closeButton=F.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const b=this._container.querySelector(Fu);b&&b.focus()}},g.RasterDEMTileSource=Lr,g.RasterTileSource=Rr,g.ScaleControl=class{constructor(b){this._onMove=()=>{Ol(this._map,this._container,this.options)},this.setUnit=t=>{this.options.unit=t,Ol(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Ul),b)}getDefaultPosition(){return"bottom-left"}onAdd(b){return this._map=b,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-scale",b.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){F.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},g.ScrollZoomHandler=us,g.Style=Sf,g.TerrainControl=class{constructor(b){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=b}onAdd(b){return this._map=b,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=F.create("button","maplibregl-ctrl-terrain",this._container),F.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){F.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},g.TwoFingersTouchPitchHandler=Il,g.TwoFingersTouchRotateHandler=Rh,g.TwoFingersTouchZoomHandler=Eh,g.TwoFingersTouchZoomRotateHandler=Oh,g.VectorTileSource=Sr,g.VideoSource=Va,g.addSourceType=(b,t)=>c._(void 0,void 0,void 0,(function*(){if(Mi(b))throw new Error(`A source type called "${b}" already exists.`);((u,d)=>{Gi[u]=d})(b,t)})),g.clearPrewarmedResources=function(){const b=gt;b&&(b.isPreloaded()&&b.numActive()===1?(b.release(Me),gt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},g.createTileMesh=_f,g.getMaxParallelImageRequests=function(){return c.a.MAX_PARALLEL_IMAGE_REQUESTS},g.getRTLTextPluginStatus=function(){return An().getRTLTextPluginStatus()},g.getVersion=function(){return Oc},g.getWorkerCount=function(){return et.workerCount},g.getWorkerUrl=function(){return c.a.WORKER_URL},g.importScriptInWorkers=function(b){return ar().broadcast("IS",b)},g.prewarm=function(){Zt().acquire(Me)},g.setMaxParallelImageRequests=function(b){c.a.MAX_PARALLEL_IMAGE_REQUESTS=b},g.setRTLTextPlugin=function(b,t){return An().setRTLTextPlugin(b,t)},g.setWorkerCount=function(b){et.workerCount=b},g.setWorkerUrl=function(b){c.a.WORKER_URL=b}}));var y=a;return y}))})(z0)),z0.exports}var T6=M6();const E6=iu(T6),R6={"bosnia-herzegovina":"bosnia and herzegovina","bosnia and herzegovina":"bosnia and herzegovina","bosnia and herz.":"bosnia and herzegovina","bosnia and herz":"bosnia and herzegovina",macedonia:"north macedonia","macedonia (fyrom)":"north macedonia","the former yugoslav republic of macedonia":"north macedonia","united states of america":"united states",usa:"united states","u s a":"united states",us:"united states",america:"united states","u.s.a.":"united states","u. s. a.":"united states","u. s. a. ":"united states",uk:"united kingdom","united kingdom of great britain and northern ireland":"united kingdom","great britain":"united kingdom",britain:"united kingdom","south korea":"korea republic of","korea republic of":"korea republic of","republic of korea":"korea republic of","korea south":"korea republic of","s korea":"korea republic of","ro korea":"korea republic of","korea, south":"korea republic of","north korea":"korea democratic peoples republic of","democratic peoples republic of korea":"korea democratic peoples republic of",dprk:"korea democratic peoples republic of",russia:"russian federation","russian federation":"russian federation","russian fed":"russian federation","russian federation (the)":"russian federation","ivory coast":"cote divoire","cote d ivoire":"cote divoire","cote divoire":"cote divoire",cotedivoire:"cote divoire","guinea bissau":"guinea bissau","guinea-bissau":"guinea bissau","republic of guinea bissau":"guinea bissau",belarus:"belarus",belorussia:"belarus",byelorussia:"belarus","republic of belarus":"belarus",eswatini:"eswatini","kingdom of eswatini":"eswatini",swaziland:"eswatini","kingdom of swaziland":"eswatini",czechia:"czech republic","czech republic":"czech republic",prc:"china","people s republic of china":"china","people s republic of china (china)":"china",china:"china",iran:"iran","islamic republic of iran":"iran","iran islamic republic of":"iran","syrian arab republic":"syria",syria:"syria","viet nam":"vietnam",vietnam:"vietnam",moldova:"moldova","republic of moldova":"moldova","moldova republic of":"moldova",bolivia:"bolivia","bolivia plurinational state of":"bolivia",vatican:"vatican city","vatican city":"vatican city","holy see":"vatican city",turkiye:"turkey",turkey:"turkey","cape verde":"cape verde","cabo verde":"cape verde","congo republic":"congo republic","congo democratic republic":"democratic republic of the congo","democratic republic of the congo":"democratic republic of the congo","dr congo":"democratic republic of the congo",slovakia:"slovakia","slovak republic":"slovakia","north macedonia":"north macedonia","republic of north macedonia":"north macedonia",uae:"united arab emirates","u a e":"united arab emirates",drc:"democratic republic of the congo",ukraine:"ukraine"};function R1(e){return e.toLowerCase().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}function I6(e){return e>=7.5?"#006400":e>=7.25?"#0A8C0A":e>=7?"#228B22":e>=6.75?"#2E8B57":e>=6.5?"#32CD32":e>=6.25?"#7CFC00":e>=6?"#ADFF2F":e>=5.75?"#DFFF00":e>=5.5?"#FFFF00":e>=5.25?"#FFEF00":e>=5?"#FFD700":e>=4.75?"#FFA500":e>=4.5?"#FF8C00":e>=4.25?"#FF7F50":e>=4?"#FF6347":e>=3.75?"#FF4500":e>=3.5?"#FF0000":e>=3.25?"#DC143C":e>=3?"#B22222":e>=2.75?"#A52A2A":e>=2.5?"#8B0000":e>=2.25?"#800000":(e>=1.5,"#4B0000")}class k6{container=null;onAdd(r){const a=document.createElement("div");a.className="maplibregl-ctrl maplibregl-ctrl-group simple-zoom-ctrl",a.style.position="absolute",a.style.right="0px",a.style.transform="translateY(350%)",a.style.display="flex",a.style.flexDirection="column",a.style.gap="6px",a.style.background="rgba(255,255,255,0.9)",a.style.borderRadius="6px",a.style.padding="6px",a.style.boxShadow="0 1px 6px rgba(0,0,0,0.15)",a.style.userSelect="none";const i=(g,c)=>{const C=document.createElement("button");return C.innerText=g,C.title=g,C.style.width="24px",C.style.height="24px",C.style.display="flex",C.style.alignItems="center",C.style.justifyContent="center",C.style.border="none",C.style.background="transparent",C.style.cursor="pointer",C.style.fontSize="22px",C.onpointerdown=M=>M.stopPropagation(),C.onclick=c,C},p=i("+",()=>r.easeTo({zoom:r.getZoom()+1})),y=i("",()=>r.easeTo({zoom:r.getZoom()-1}));return a.appendChild(p),a.appendChild(y),this.container=a,a}onRemove(){this.container?.parentNode?.removeChild(this.container),this.container=null}}function Tp(e){return e?e.toLowerCase().normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s]/g,"").replace(/\s+/g," ").trim():""}function U6({mapContainerRef:e,callback:r,countryStats:a=[]}){const i=Y.useRef(null),p=Y.useRef(null);return Y.useEffect(()=>{if(i.current)return;i.current=new E6.Map({container:e.current,style:"https://demotiles.maplibre.org/style.json",center:[43,43],zoom:3,attributionControl:!1}),i.current.addControl(new k6);const y={},g={},c={};for(const C of a)if(C?.Country_clean&&typeof C["Happiness (score 0-10)"]=="number"){const M=C.Country_clean;y[M]=C["Happiness (score 0-10)"],C.Country&&typeof C.Country=="string"&&(g[C.Country]=M,c[Tp(C.Country)]=M);const T=R1(C.Country_clean);g[T]||(g[T]=M,c[Tp(T)]=M)}return Object.entries(R6).forEach(([C,M])=>{if(y[M]!==void 0){const T=R1(C);g[T]=M,g[C]=M,c[Tp(T)]=M,c[Tp(C)]=M}}),i.current.on("load",()=>{const M=["match",["downcase",["coalesce",["get","NAME"],["get","ADMIN"],["get","NAME_EN"],["get","BRK_NAME"]]]],T="#d9d9d9",U=new Set;for(const[V,$]of Object.entries(g)){const G=y[$];if(typeof G=="number"&&!isNaN(G)){const Q=V.toLowerCase();U.has(Q)||(M.push(Q,I6(G)),U.add(Q))}}M.push(T);const z="countries-fill";if(i.current?.getLayer(z))p.current=z,i.current.setPaintProperty(z,"fill-color",M),i.current.setPaintProperty(z,"fill-opacity",1);else{const $=(i.current.getStyle().layers||[]).find(G=>/country|countries|admin|ne_10m_admin_0_countries/i.test(G.id));$&&(p.current=$.id,i.current.setPaintProperty($.id,"fill-color",M),i.current.setPaintProperty($.id,"fill-opacity",1))}i.current?.setPaintProperty("crimea-fill","fill-color","#FFA500")}),i.current?.on("click",C=>{if(i.current?.queryRenderedFeatures(C.point,{layers:["crimea-fill"]})?.length)return;const T=p.current??"countries-fill",U=i.current?.queryRenderedFeatures(C.point,{layers:[T]});if(U?.length){const z=U[0],F=z.properties?.NAME||z.properties?.name||"",V=Tp(F),$=c[V]??c[Tp(R1(F))];r($??V)}}),()=>{i.current?.remove(),i.current=null,p.current=null}},[a]),de.jsx("div",{ref:e,className:"w-full h-40 lg:h-130"})}function O6(e){const r=e+"CollectionProvider",[a,i]=Qy(r),[p,y]=a(r,{collectionRef:{current:null},itemMap:new Map}),g=$=>{const{scope:G,children:Q}=$,ee=Ra.useRef(null),ae=Ra.useRef(new Map).current;return de.jsx(p,{scope:G,itemMap:ae,collectionRef:ee,children:Q})};g.displayName=r;const c=e+"CollectionSlot",C=Oy(c),M=Ra.forwardRef(($,G)=>{const{scope:Q,children:ee}=$,ae=y(c,Q),_e=nu(G,ae.collectionRef);return de.jsx(C,{ref:_e,children:ee})});M.displayName=c;const T=e+"CollectionItemSlot",U="data-radix-collection-item",z=Oy(T),F=Ra.forwardRef(($,G)=>{const{scope:Q,children:ee,...ae}=$,_e=Ra.useRef(null),ve=nu(G,_e),Ae=y(T,Q);return Ra.useEffect(()=>(Ae.itemMap.set(_e,{ref:_e,...ae}),()=>void Ae.itemMap.delete(_e))),de.jsx(z,{[U]:"",ref:ve,children:ee})});F.displayName=T;function V($){const G=y(e+"CollectionConsumer",$);return Ra.useCallback(()=>{const ee=G.collectionRef.current;if(!ee)return[];const ae=Array.from(ee.querySelectorAll(`[${U}]`));return Array.from(G.itemMap.values()).sort((Ae,Ee)=>ae.indexOf(Ae.ref.current)-ae.indexOf(Ee.ref.current))},[G.collectionRef,G.itemMap])}return[{Provider:g,Slot:M,ItemSlot:F},V,i]}function rc(e,r,{checkForDefaultPrevented:a=!0}={}){return function(p){if(e?.(p),a===!1||!p.defaultPrevented)return r?.(p)}}var jp=globalThis?.document?Y.useLayoutEffect:()=>{},L6=dx[" useInsertionEffect ".trim().toString()]||jp;function Ev({prop:e,defaultProp:r,onChange:a=()=>{},caller:i}){const[p,y,g]=z6({defaultProp:r,onChange:a}),c=e!==void 0,C=c?e:p;{const T=Y.useRef(e!==void 0);Y.useEffect(()=>{const U=T.current;U!==c&&console.warn(`${i} is changing from ${U?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),T.current=c},[c,i])}const M=Y.useCallback(T=>{if(c){const U=F6(T)?T(e):T;U!==e&&g.current?.(U)}else y(T)},[c,e,y,g]);return[C,M]}function z6({defaultProp:e,onChange:r}){const[a,i]=Y.useState(e),p=Y.useRef(a),y=Y.useRef(r);return L6(()=>{y.current=r},[r]),Y.useEffect(()=>{p.current!==a&&(y.current?.(a),p.current=a)},[a,p]),[a,i,y]}function F6(e){return typeof e=="function"}function N6(e,r){return Y.useReducer((a,i)=>r[a][i]??a,e)}var Xy=e=>{const{present:r,children:a}=e,i=j6(r),p=typeof a=="function"?a({present:i.isPresent}):Y.Children.only(a),y=nu(i.ref,B6(p));return typeof a=="function"||i.isPresent?Y.cloneElement(p,{ref:y}):null};Xy.displayName="Presence";function j6(e){const[r,a]=Y.useState(),i=Y.useRef(null),p=Y.useRef(e),y=Y.useRef("none"),g=e?"mounted":"unmounted",[c,C]=N6(g,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Y.useEffect(()=>{const M=f0(i.current);y.current=c==="mounted"?M:"none"},[c]),jp(()=>{const M=i.current,T=p.current;if(T!==e){const z=y.current,F=f0(M);e?C("MOUNT"):F==="none"||M?.display==="none"?C("UNMOUNT"):C(T&&z!==F?"ANIMATION_OUT":"UNMOUNT"),p.current=e}},[e,C]),jp(()=>{if(r){let M;const T=r.ownerDocument.defaultView??window,U=F=>{const $=f0(i.current).includes(CSS.escape(F.animationName));if(F.target===r&&$&&(C("ANIMATION_END"),!p.current)){const G=r.style.animationFillMode;r.style.animationFillMode="forwards",M=T.setTimeout(()=>{r.style.animationFillMode==="forwards"&&(r.style.animationFillMode=G)})}},z=F=>{F.target===r&&(y.current=f0(i.current))};return r.addEventListener("animationstart",z),r.addEventListener("animationcancel",U),r.addEventListener("animationend",U),()=>{T.clearTimeout(M),r.removeEventListener("animationstart",z),r.removeEventListener("animationcancel",U),r.removeEventListener("animationend",U)}}else C("ANIMATION_END")},[r,C]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:Y.useCallback(M=>{i.current=M?getComputedStyle(M):null,a(M)},[])}}function f0(e){return e?.animationName||"none"}function B6(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,a=r&&"isReactWarning"in r&&r.isReactWarning;return a?e.ref:(r=Object.getOwnPropertyDescriptor(e,"ref")?.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a?e.props.ref:e.props.ref||e.ref)}var q6=dx[" useId ".trim().toString()]||(()=>{}),H6=0;function Iy(e){const[r,a]=Y.useState(q6());return jp(()=>{a(i=>i??String(H6++))},[e]),e||(r?`radix-${r}`:"")}var Rv="Collapsible",[$6,WC]=Qy(Rv),[V6,vx]=$6(Rv),ZC=Y.forwardRef((e,r)=>{const{__scopeCollapsible:a,open:i,defaultOpen:p,disabled:y,onOpenChange:g,...c}=e,[C,M]=Ev({prop:i,defaultProp:p??!1,onChange:g,caller:Rv});return de.jsx(V6,{scope:a,disabled:y,contentId:Iy(),open:C,onOpenToggle:Y.useCallback(()=>M(T=>!T),[M]),children:de.jsx(ro.div,{"data-state":bx(C),"data-disabled":y?"":void 0,...c,ref:r})})});ZC.displayName=Rv;var YC="CollapsibleTrigger",QC=Y.forwardRef((e,r)=>{const{__scopeCollapsible:a,...i}=e,p=vx(YC,a);return de.jsx(ro.button,{type:"button","aria-controls":p.contentId,"aria-expanded":p.open||!1,"data-state":bx(p.open),"data-disabled":p.disabled?"":void 0,disabled:p.disabled,...i,ref:r,onClick:rc(e.onClick,p.onOpenToggle)})});QC.displayName=YC;var _x="CollapsibleContent",XC=Y.forwardRef((e,r)=>{const{forceMount:a,...i}=e,p=vx(_x,e.__scopeCollapsible);return de.jsx(Xy,{present:a||p.open,children:({present:y})=>de.jsx(G6,{...i,ref:r,present:y})})});XC.displayName=_x;var G6=Y.forwardRef((e,r)=>{const{__scopeCollapsible:a,present:i,children:p,...y}=e,g=vx(_x,a),[c,C]=Y.useState(i),M=Y.useRef(null),T=nu(r,M),U=Y.useRef(0),z=U.current,F=Y.useRef(0),V=F.current,$=g.open||c,G=Y.useRef($),Q=Y.useRef(void 0);return Y.useEffect(()=>{const ee=requestAnimationFrame(()=>G.current=!1);return()=>cancelAnimationFrame(ee)},[]),jp(()=>{const ee=M.current;if(ee){Q.current=Q.current||{transitionDuration:ee.style.transitionDuration,animationName:ee.style.animationName},ee.style.transitionDuration="0s",ee.style.animationName="none";const ae=ee.getBoundingClientRect();U.current=ae.height,F.current=ae.width,G.current||(ee.style.transitionDuration=Q.current.transitionDuration,ee.style.animationName=Q.current.animationName),C(i)}},[g.open,i]),de.jsx(ro.div,{"data-state":bx(g.open),"data-disabled":g.disabled?"":void 0,id:g.contentId,hidden:!$,...y,ref:T,style:{"--radix-collapsible-content-height":z?`${z}px`:void 0,"--radix-collapsible-content-width":V?`${V}px`:void 0,...e.style},children:$&&p})});function bx(e){return e?"open":"closed"}var W6=ZC,Z6=QC,Y6=XC,Q6=Y.createContext(void 0);function X6(e){const r=Y.useContext(Q6);return e||r||"ltr"}var ou="Accordion",K6=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[xx,J6,eE]=O6(ou),[Iv]=Qy(ou,[eE,WC]),Sx=WC(),KC=Ra.forwardRef((e,r)=>{const{type:a,...i}=e,p=i,y=i;return de.jsx(xx.Provider,{scope:e.__scopeAccordion,children:a==="multiple"?de.jsx(aE,{...y,ref:r}):de.jsx(nE,{...p,ref:r})})});KC.displayName=ou;var[JC,tE]=Iv(ou),[e3,rE]=Iv(ou,{collapsible:!1}),nE=Ra.forwardRef((e,r)=>{const{value:a,defaultValue:i,onValueChange:p=()=>{},collapsible:y=!1,...g}=e,[c,C]=Ev({prop:a,defaultProp:i??"",onChange:p,caller:ou});return de.jsx(JC,{scope:e.__scopeAccordion,value:Ra.useMemo(()=>c?[c]:[],[c]),onItemOpen:C,onItemClose:Ra.useCallback(()=>y&&C(""),[y,C]),children:de.jsx(e3,{scope:e.__scopeAccordion,collapsible:y,children:de.jsx(t3,{...g,ref:r})})})}),aE=Ra.forwardRef((e,r)=>{const{value:a,defaultValue:i,onValueChange:p=()=>{},...y}=e,[g,c]=Ev({prop:a,defaultProp:i??[],onChange:p,caller:ou}),C=Ra.useCallback(T=>c((U=[])=>[...U,T]),[c]),M=Ra.useCallback(T=>c((U=[])=>U.filter(z=>z!==T)),[c]);return de.jsx(JC,{scope:e.__scopeAccordion,value:g,onItemOpen:C,onItemClose:M,children:de.jsx(e3,{scope:e.__scopeAccordion,collapsible:!0,children:de.jsx(t3,{...y,ref:r})})})}),[iE,kv]=Iv(ou),t3=Ra.forwardRef((e,r)=>{const{__scopeAccordion:a,disabled:i,dir:p,orientation:y="vertical",...g}=e,c=Ra.useRef(null),C=nu(c,r),M=J6(a),U=X6(p)==="ltr",z=rc(e.onKeyDown,F=>{if(!K6.includes(F.key))return;const V=F.target,$=M().filter(Fe=>!Fe.ref.current?.disabled),G=$.findIndex(Fe=>Fe.ref.current===V),Q=$.length;if(G===-1)return;F.preventDefault();let ee=G;const ae=0,_e=Q-1,ve=()=>{ee=G+1,ee>_e&&(ee=ae)},Ae=()=>{ee=G-1,ee<ae&&(ee=_e)};switch(F.key){case"Home":ee=ae;break;case"End":ee=_e;break;case"ArrowRight":y==="horizontal"&&(U?ve():Ae());break;case"ArrowDown":y==="vertical"&&ve();break;case"ArrowLeft":y==="horizontal"&&(U?Ae():ve());break;case"ArrowUp":y==="vertical"&&Ae();break}const Ee=ee%Q;$[Ee].ref.current?.focus()});return de.jsx(iE,{scope:a,disabled:i,direction:p,orientation:y,children:de.jsx(xx.Slot,{scope:a,children:de.jsx(ro.div,{...g,"data-orientation":y,ref:C,onKeyDown:i?void 0:z})})})}),H0="AccordionItem",[oE,wx]=Iv(H0),r3=Ra.forwardRef((e,r)=>{const{__scopeAccordion:a,value:i,...p}=e,y=kv(H0,a),g=tE(H0,a),c=Sx(a),C=Iy(),M=i&&g.value.includes(i)||!1,T=y.disabled||e.disabled;return de.jsx(oE,{scope:a,open:M,disabled:T,triggerId:C,children:de.jsx(W6,{"data-orientation":y.orientation,"data-state":l3(M),...c,...p,ref:r,disabled:T,open:M,onOpenChange:U=>{U?g.onItemOpen(i):g.onItemClose(i)}})})});r3.displayName=H0;var n3="AccordionHeader",a3=Ra.forwardRef((e,r)=>{const{__scopeAccordion:a,...i}=e,p=kv(ou,a),y=wx(n3,a);return de.jsx(ro.h3,{"data-orientation":p.orientation,"data-state":l3(y.open),"data-disabled":y.disabled?"":void 0,...i,ref:r})});a3.displayName=n3;var _b="AccordionTrigger",i3=Ra.forwardRef((e,r)=>{const{__scopeAccordion:a,...i}=e,p=kv(ou,a),y=wx(_b,a),g=rE(_b,a),c=Sx(a);return de.jsx(xx.ItemSlot,{scope:a,children:de.jsx(Z6,{"aria-disabled":y.open&&!g.collapsible||void 0,"data-orientation":p.orientation,id:y.triggerId,...c,...i,ref:r})})});i3.displayName=_b;var o3="AccordionContent",s3=Ra.forwardRef((e,r)=>{const{__scopeAccordion:a,...i}=e,p=kv(ou,a),y=wx(o3,a),g=Sx(a);return de.jsx(Y6,{role:"region","aria-labelledby":y.triggerId,"data-orientation":p.orientation,...g,...i,ref:r,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});s3.displayName=o3;function l3(e){return e?"open":"closed"}var sE=KC,lE=r3,uE=a3,cE=i3,hE=s3;/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dE=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,a,i)=>i?i.toUpperCase():a.toLowerCase()),CS=e=>{const r=dE(e);return r.charAt(0).toUpperCase()+r.slice(1)},u3=(...e)=>e.filter((r,a,i)=>!!r&&r.trim()!==""&&i.indexOf(r)===a).join(" ").trim(),pE=e=>{for(const r in e)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=Y.forwardRef(({color:e="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:p="",children:y,iconNode:g,...c},C)=>Y.createElement("svg",{ref:C,...mE,width:r,height:r,stroke:e,strokeWidth:i?Number(a)*24/Number(r):a,className:u3("lucide",p),...!y&&!pE(c)&&{"aria-hidden":"true"},...c},[...g.map(([M,T])=>Y.createElement(M,T)),...Array.isArray(y)?y:[y]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=(e,r)=>{const a=Y.forwardRef(({className:i,...p},y)=>Y.createElement(yE,{ref:y,iconNode:r,className:u3(`lucide-${fE(CS(e))}`,`lucide-${e}`,i),...p}));return a.displayName=CS(e),a};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],vE=c3("chevron-down",gE);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],bE=c3("x",_E);function xE({...e}){return de.jsx(sE,{"data-slot":"accordion",...e})}function d0({className:e,...r}){return de.jsx(lE,{"data-slot":"accordion-item",className:ha("border-b last:border-b-0",e),...r})}function p0({className:e,children:r,...a}){return de.jsx(uE,{className:"flex",children:de.jsxs(cE,{"data-slot":"accordion-trigger",className:ha("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",e),...a,children:[r,de.jsx(vE,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function m0({className:e,children:r,...a}){return de.jsx(hE,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...a,children:de.jsx("div",{className:ha("pt-0 pb-4",e),children:r})})}function SE(){return de.jsxs(xE,{type:"single",collapsible:!0,className:"w-full",defaultValue:"item-1",children:[de.jsxs(d0,{value:"item-1",children:[de.jsx(p0,{children:"What is this project?"}),de.jsxs(m0,{className:"flex flex-col gap-4 text-balance text-sm",children:[de.jsx("p",{children:"A data explorer that brings together many public datasets to help you understand what goes along with a countrys happiness score."}),de.jsxs("ul",{children:[de.jsxs("li",{children:[de.jsx("strong",{children:"What it contains:"})," happiness scores plus lots of supporting metrics (health, income, energy, population, emissions, food, etc.)."]}),de.jsxs("li",{children:[de.jsx("strong",{children:"What it shows:"})," for each metric you get the actual number, what wed expect given that countrys happiness, and how far the country is from that expectation."]}),de.jsxs("li",{children:[de.jsx("strong",{children:"Why useful:"})," quickly spot where a country is doing noticeably better or worse than peers with similar happiness levels."]}),de.jsxs("li",{children:[de.jsx("strong",{children:"Quick reminder:"})," these are comparisons and patterns  they dont prove cause and effect."]})]})]})]}),de.jsxs(d0,{value:"item-2",children:[de.jsx(p0,{children:"How to read the map"}),de.jsxs(m0,{className:"flex flex-col gap-4 text-balance",children:[de.jsx("p",{children:"The map is the main entry point  it colors countries by official happiness and helps you jump into each countrys details."}),de.jsxs("ul",{children:[de.jsxs("li",{children:[de.jsx("strong",{children:"Colors:"})," show happiness (greens = higher, reds = lower)."]}),de.jsxs("li",{children:[de.jsx("strong",{children:"Click:"})," opens the country profile with metric cards and comparisons."]}),de.jsxs("li",{children:[de.jsx("strong",{children:"Search & keyboard:"})," use the search box or press Enter to jump to a country."]}),de.jsxs("li",{children:[de.jsx("strong",{children:"Controls:"})," there are zoom controls to inspect small countries or regions."]})]})]})]}),de.jsxs(d0,{value:"item-3",children:[de.jsx(p0,{children:"Data tables"}),de.jsxs(m0,{className:"flex flex-col gap-4 text-balance",children:[de.jsx("p",{children:"Country pages give both a quick summary and deeper numbers so you can understand strengths, weaknesses and the full metric context."}),de.jsxs("ul",{children:[de.jsxs("li",{children:[de.jsx("strong",{children:"Metric cards:"})," actual value, expected value (based on similar-happiness countries), and the difference."]}),de.jsxs("li",{children:[de.jsx("strong",{children:"Context:"})," global average, top country and range for each metric so you can compare easily."]}),de.jsxs("li",{children:[de.jsx("strong",{children:"Highlights:"})," both the biggest positive deviations and the biggest negative ones are surfaced  but the page also lets you explore every metric, not just the top 3 lists."]}),de.jsxs("li",{children:[de.jsx("strong",{children:"Interpretation tip:"})," positive difference means the country is above expectation; negative means below. For some metrics (pollution, infant deaths) lower is better  interpret accordingly."]})]})]})]}),de.jsxs(d0,{value:"item-4",children:[de.jsx(p0,{children:"Data sources"}),de.jsxs(m0,{className:"flex flex-col gap-4 text-balance",children:[de.jsx("p",{children:"World Happiness Report 2024  jainaru/world-happiness-report-2024-yearly-updated (Kaggle)"}),de.jsx("p",{children:"Global Salary Data  zedataweaver/global-salary-data (Kaggle)"}),de.jsx("p",{children:"Most Polluted Cities and Countries (IQAir Index)  ramjasmaurya/most-polluted-cities-and-countries-iqair-index (Kaggle)"}),de.jsx("p",{children:"Countries Life Expectancy  amirhosseinmirzaie/countries-life-expectancy (Kaggle)"}),de.jsx("p",{children:"Netflix subscription fee in different countries  prasertk/netflix-subscription-price-in-different-countries (Kaggle)"}),de.jsx("p",{children:"Most Dangerous Countries for Women 2024  arpitsinghaiml/most-dangerous-countries-for-women-2024 (Kaggle)"}),de.jsx("p",{children:"Average Monthly Surface Temperature (19402024)  samithsachidanandan/average-monthly-surface-temperature-1940-2024 (Kaggle)"}),de.jsx("p",{children:"World Population Dataset  iamsouravbanerjee/world-population-dataset (Kaggle)"}),de.jsx("p",{children:"World Energy Consumption  pralabhpoudel/world-energy-consumption (Kaggle)"}),de.jsx("p",{children:"World Bank  World Development Indicators (Kaggle mirror)  nicolasgonzalezmunoz/world-bank-world-development-indicators (Kaggle)"}),de.jsx("p",{children:"World Food Production  rafsunahmad/world-food-production (Kaggle)"}),de.jsx("p",{children:"Petrol / Gas Prices Worldwide  zusmani/petrolgas-prices-worldwide (Kaggle)"}),de.jsx("p",{children:"CO2 Emissions Around the World  koustavghosh149/co2-emission-around-the-world (Kaggle)"}),de.jsx("p",{children:"Global Cost of Living (Numbeo scrape)  mvieira101/global-cost-of-living (Kaggle)"}),de.jsx("p",{children:"GDP Per Capita (all countries)  nitishabharathi/gdp-per-capita-all-countries (Kaggle)"}),de.jsx("p",{children:"Military Expenditure of Countries (19602019)  nitinsss/military-expenditure-of-countries-19602019 (Kaggle)"}),de.jsx("p",{children:"Countries by Intentional Homicide Rate  bilalwaseer/countries-by-intentional-homicide-rate (Kaggle)"}),de.jsx("p",{children:"Average Age of Countries  divyansh22/average-age-of-countries (Kaggle)"}),de.jsx("p",{children:"Inflation, 2022  meeratif/inflation-2022 (Kaggle)"})]})]})]})}function wE(e){return Object.prototype.toString.call(e)==="[object Object]"}function DS(e){return wE(e)||Array.isArray(e)}function PE(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Px(e,r){const a=Object.keys(e),i=Object.keys(r);if(a.length!==i.length)return!1;const p=JSON.stringify(Object.keys(e.breakpoints||{})),y=JSON.stringify(Object.keys(r.breakpoints||{}));return p!==y?!1:a.every(g=>{const c=e[g],C=r[g];return typeof c=="function"?`${c}`==`${C}`:!DS(c)||!DS(C)?c===C:Px(c,C)})}function MS(e){return e.concat().sort((r,a)=>r.name>a.name?1:-1).map(r=>r.options)}function AE(e,r){if(e.length!==r.length)return!1;const a=MS(e),i=MS(r);return a.every((p,y)=>{const g=i[y];return Px(p,g)})}function Ax(e){return typeof e=="number"}function bb(e){return typeof e=="string"}function Uv(e){return typeof e=="boolean"}function TS(e){return Object.prototype.toString.call(e)==="[object Object]"}function ca(e){return Math.abs(e)}function Cx(e){return Math.sign(e)}function ky(e,r){return ca(e-r)}function CE(e,r){if(e===0||r===0||ca(e)<=ca(r))return 0;const a=ky(ca(e),ca(r));return ca(a/e)}function DE(e){return Math.round(e*100)/100}function Ly(e){return zy(e).map(Number)}function ru(e){return e[Ky(e)]}function Ky(e){return Math.max(0,e.length-1)}function Dx(e,r){return r===Ky(e)}function ES(e,r=0){return Array.from(Array(e),(a,i)=>r+i)}function zy(e){return Object.keys(e)}function h3(e,r){return[e,r].reduce((a,i)=>(zy(i).forEach(p=>{const y=a[p],g=i[p],c=TS(y)&&TS(g);a[p]=c?h3(y,g):g}),a),{})}function xb(e,r){return typeof r.MouseEvent<"u"&&e instanceof r.MouseEvent}function ME(e,r){const a={start:i,center:p,end:y};function i(){return 0}function p(C){return y(C)/2}function y(C){return r-C}function g(C,M){return bb(e)?a[e](C):e(r,C,M)}return{measure:g}}function Fy(){let e=[];function r(p,y,g,c={passive:!0}){let C;if("addEventListener"in p)p.addEventListener(y,g,c),C=()=>p.removeEventListener(y,g,c);else{const M=p;M.addListener(g),C=()=>M.removeListener(g)}return e.push(C),i}function a(){e=e.filter(p=>p())}const i={add:r,clear:a};return i}function TE(e,r,a,i){const p=Fy(),y=1e3/60;let g=null,c=0,C=0;function M(){p.add(e,"visibilitychange",()=>{e.hidden&&V()})}function T(){F(),p.clear()}function U(G){if(!C)return;g||(g=G,a(),a());const Q=G-g;for(g=G,c+=Q;c>=y;)a(),c-=y;const ee=c/y;i(ee),C&&(C=r.requestAnimationFrame(U))}function z(){C||(C=r.requestAnimationFrame(U))}function F(){r.cancelAnimationFrame(C),g=null,c=0,C=0}function V(){g=null,c=0}return{init:M,destroy:T,start:z,stop:F,update:a,render:i}}function EE(e,r){const a=r==="rtl",i=e==="y",p=i?"y":"x",y=i?"x":"y",g=!i&&a?-1:1,c=T(),C=U();function M(V){const{height:$,width:G}=V;return i?$:G}function T(){return i?"top":a?"right":"left"}function U(){return i?"bottom":a?"left":"right"}function z(V){return V*g}return{scroll:p,cross:y,startEdge:c,endEdge:C,measureSize:M,direction:z}}function kd(e=0,r=0){const a=ca(e-r);function i(M){return M<e}function p(M){return M>r}function y(M){return i(M)||p(M)}function g(M){return y(M)?i(M)?e:r:M}function c(M){return a?M-a*Math.ceil((M-r)/a):M}return{length:a,max:r,min:e,constrain:g,reachedAny:y,reachedMax:p,reachedMin:i,removeOffset:c}}function f3(e,r,a){const{constrain:i}=kd(0,e),p=e+1;let y=g(r);function g(z){return a?ca((p+z)%p):i(z)}function c(){return y}function C(z){return y=g(z),U}function M(z){return T().set(c()+z)}function T(){return f3(e,c(),a)}const U={get:c,set:C,add:M,clone:T};return U}function RE(e,r,a,i,p,y,g,c,C,M,T,U,z,F,V,$,G,Q,ee){const{cross:ae,direction:_e}=e,ve=["INPUT","SELECT","TEXTAREA"],Ae={passive:!1},Ee=Fy(),Fe=Fy(),ht=kd(50,225).constrain(F.measure(20)),At={mouse:300,touch:400},ot={mouse:500,touch:600},ft=V?43:25;let rt=!1,It=0,Ut=0,Be=!1,ct=!1,nt=!1,Ct=!1;function Me($e){if(!ee)return;function $t(Sr){(Uv(ee)||ee($e,Sr))&&jt(Sr)}const Ot=r;Ee.add(Ot,"dragstart",Sr=>Sr.preventDefault(),Ae).add(Ot,"touchmove",()=>{},Ae).add(Ot,"touchend",()=>{}).add(Ot,"touchstart",$t).add(Ot,"mousedown",$t).add(Ot,"touchcancel",Jt).add(Ot,"contextmenu",Jt).add(Ot,"click",wt,!0)}function et(){Ee.clear(),Fe.clear()}function st(){const $e=Ct?a:r;Fe.add($e,"touchmove",ar,Ae).add($e,"touchend",Jt).add($e,"mousemove",ar,Ae).add($e,"mouseup",Jt)}function gt($e){const $t=$e.nodeName||"";return ve.includes($t)}function Et(){return(V?ot:At)[Ct?"mouse":"touch"]}function Zt($e,$t){const Ot=U.add(Cx($e)*-1),Sr=T.byDistance($e,!V).distance;return V||ca($e)<ht?Sr:G&&$t?Sr*.5:T.byIndex(Ot.get(),0).distance}function jt($e){const $t=xb($e,i);Ct=$t,nt=V&&$t&&!$e.buttons&&rt,rt=ky(p.get(),g.get())>=2,!($t&&$e.button!==0)&&(gt($e.target)||(Be=!0,y.pointerDown($e),M.useFriction(0).useDuration(0),p.set(g),st(),It=y.readPoint($e),Ut=y.readPoint($e,ae),z.emit("pointerDown")))}function ar($e){if(!xb($e,i)&&$e.touches.length>=2)return Jt($e);const Ot=y.readPoint($e),Sr=y.readPoint($e,ae),Rr=ky(Ot,It),Lr=ky(Sr,Ut);if(!ct&&!Ct&&(!$e.cancelable||(ct=Rr>Lr,!ct)))return Jt($e);const Nn=y.pointerMove($e);Rr>$&&(nt=!0),M.useFriction(.3).useDuration(.75),c.start(),p.add(_e(Nn)),$e.preventDefault()}function Jt($e){const Ot=T.byDistance(0,!1).index!==U.get(),Sr=y.pointerUp($e)*Et(),Rr=Zt(_e(Sr),Ot),Lr=CE(Sr,Rr),Nn=ft-10*Lr,Qn=Q+Lr/50;ct=!1,Be=!1,Fe.clear(),M.useDuration(Nn).useFriction(Qn),C.distance(Rr,!V),Ct=!1,z.emit("pointerUp")}function wt($e){nt&&($e.stopPropagation(),$e.preventDefault(),nt=!1)}function Gt(){return Be}return{init:Me,destroy:et,pointerDown:Gt}}function IE(e,r){let i,p;function y(U){return U.timeStamp}function g(U,z){const V=`client${(z||e.scroll)==="x"?"X":"Y"}`;return(xb(U,r)?U:U.touches[0])[V]}function c(U){return i=U,p=U,g(U)}function C(U){const z=g(U)-g(p),F=y(U)-y(i)>170;return p=U,F&&(i=U),z}function M(U){if(!i||!p)return 0;const z=g(p)-g(i),F=y(U)-y(i),V=y(U)-y(p)>170,$=z/F;return F&&!V&&ca($)>.1?$:0}return{pointerDown:c,pointerMove:C,pointerUp:M,readPoint:g}}function kE(){function e(a){const{offsetTop:i,offsetLeft:p,offsetWidth:y,offsetHeight:g}=a;return{top:i,right:p+y,bottom:i+g,left:p,width:y,height:g}}return{measure:e}}function UE(e){function r(i){return e*(i/100)}return{measure:r}}function OE(e,r,a,i,p,y,g){const c=[e].concat(i);let C,M,T=[],U=!1;function z(G){return p.measureSize(g.measure(G))}function F(G){if(!y)return;M=z(e),T=i.map(z);function Q(ee){for(const ae of ee){if(U)return;const _e=ae.target===e,ve=i.indexOf(ae.target),Ae=_e?M:T[ve],Ee=z(_e?e:i[ve]);if(ca(Ee-Ae)>=.5){G.reInit(),r.emit("resize");break}}}C=new ResizeObserver(ee=>{(Uv(y)||y(G,ee))&&Q(ee)}),a.requestAnimationFrame(()=>{c.forEach(ee=>C.observe(ee))})}function V(){U=!0,C&&C.disconnect()}return{init:F,destroy:V}}function LE(e,r,a,i,p,y){let g=0,c=0,C=p,M=y,T=e.get(),U=0;function z(){const Ae=i.get()-e.get(),Ee=!C;let Fe=0;return Ee?(g=0,a.set(i),e.set(i),Fe=Ae):(a.set(e),g+=Ae/C,g*=M,T+=g,e.add(g),Fe=T-U),c=Cx(Fe),U=T,ve}function F(){const Ae=i.get()-r.get();return ca(Ae)<.001}function V(){return C}function $(){return c}function G(){return g}function Q(){return ae(p)}function ee(){return _e(y)}function ae(Ae){return C=Ae,ve}function _e(Ae){return M=Ae,ve}const ve={direction:$,duration:V,velocity:G,seek:z,settled:F,useBaseFriction:ee,useBaseDuration:Q,useFriction:_e,useDuration:ae};return ve}function zE(e,r,a,i,p){const y=p.measure(10),g=p.measure(50),c=kd(.1,.99);let C=!1;function M(){return!(C||!e.reachedAny(a.get())||!e.reachedAny(r.get()))}function T(F){if(!M())return;const V=e.reachedMin(r.get())?"min":"max",$=ca(e[V]-r.get()),G=a.get()-r.get(),Q=c.constrain($/g);a.subtract(G*Q),!F&&ca(G)<y&&(a.set(e.constrain(a.get())),i.useDuration(25).useBaseFriction())}function U(F){C=!F}return{shouldConstrain:M,constrain:T,toggleActive:U}}function FE(e,r,a,i,p){const y=kd(-r+e,0),g=U(),c=T(),C=z();function M(V,$){return ky(V,$)<=1}function T(){const V=g[0],$=ru(g),G=g.lastIndexOf(V),Q=g.indexOf($)+1;return kd(G,Q)}function U(){return a.map((V,$)=>{const{min:G,max:Q}=y,ee=y.constrain(V),ae=!$,_e=Dx(a,$);return ae?Q:_e||M(G,ee)?G:M(Q,ee)?Q:ee}).map(V=>parseFloat(V.toFixed(3)))}function z(){if(r<=e+p)return[y.max];if(i==="keepSnaps")return g;const{min:V,max:$}=c;return g.slice(V,$)}return{snapsContained:C,scrollContainLimit:c}}function NE(e,r,a){const i=r[0],p=a?i-e:ru(r);return{limit:kd(p,i)}}function jE(e,r,a,i){const y=r.min+.1,g=r.max+.1,{reachedMin:c,reachedMax:C}=kd(y,g);function M(z){return z===1?C(a.get()):z===-1?c(a.get()):!1}function T(z){if(!M(z))return;const F=e*(z*-1);i.forEach(V=>V.add(F))}return{loop:T}}function BE(e){const{max:r,length:a}=e;function i(y){const g=y-r;return a?g/-a:0}return{get:i}}function qE(e,r,a,i,p){const{startEdge:y,endEdge:g}=e,{groupSlides:c}=p,C=U().map(r.measure),M=z(),T=F();function U(){return c(i).map($=>ru($)[g]-$[0][y]).map(ca)}function z(){return i.map($=>a[y]-$[y]).map($=>-ca($))}function F(){return c(M).map($=>$[0]).map(($,G)=>$+C[G])}return{snaps:M,snapsAligned:T}}function HE(e,r,a,i,p,y){const{groupSlides:g}=p,{min:c,max:C}=i,M=T();function T(){const z=g(y),F=!e||r==="keepSnaps";return a.length===1?[y]:F?z:z.slice(c,C).map((V,$,G)=>{const Q=!$,ee=Dx(G,$);if(Q){const ae=ru(G[0])+1;return ES(ae)}if(ee){const ae=Ky(y)-ru(G)[0]+1;return ES(ae,ru(G)[0])}return V})}return{slideRegistry:M}}function $E(e,r,a,i,p){const{reachedAny:y,removeOffset:g,constrain:c}=i;function C(V){return V.concat().sort(($,G)=>ca($)-ca(G))[0]}function M(V){const $=e?g(V):c(V),G=r.map((ee,ae)=>({diff:T(ee-$,0),index:ae})).sort((ee,ae)=>ca(ee.diff)-ca(ae.diff)),{index:Q}=G[0];return{index:Q,distance:$}}function T(V,$){const G=[V,V+a,V-a];if(!e)return V;if(!$)return C(G);const Q=G.filter(ee=>Cx(ee)===$);return Q.length?C(Q):ru(G)-a}function U(V,$){const G=r[V]-p.get(),Q=T(G,$);return{index:V,distance:Q}}function z(V,$){const G=p.get()+V,{index:Q,distance:ee}=M(G),ae=!e&&y(G);if(!$||ae)return{index:Q,distance:V};const _e=r[Q]-ee,ve=V+T(_e,0);return{index:Q,distance:ve}}return{byDistance:z,byIndex:U,shortcut:T}}function VE(e,r,a,i,p,y,g){function c(U){const z=U.distance,F=U.index!==r.get();y.add(z),z&&(i.duration()?e.start():(e.update(),e.render(1),e.update())),F&&(a.set(r.get()),r.set(U.index),g.emit("select"))}function C(U,z){const F=p.byDistance(U,z);c(F)}function M(U,z){const F=r.clone().set(U),V=p.byIndex(F.get(),z);c(V)}return{distance:C,index:M}}function GE(e,r,a,i,p,y,g,c){const C={passive:!0,capture:!0};let M=0;function T(F){if(!c)return;function V($){if(new Date().getTime()-M>10)return;g.emit("slideFocusStart"),e.scrollLeft=0;const ee=a.findIndex(ae=>ae.includes($));Ax(ee)&&(p.useDuration(0),i.index(ee,0),g.emit("slideFocus"))}y.add(document,"keydown",U,!1),r.forEach(($,G)=>{y.add($,"focus",Q=>{(Uv(c)||c(F,Q))&&V(G)},C)})}function U(F){F.code==="Tab"&&(M=new Date().getTime())}return{init:T}}function My(e){let r=e;function a(){return r}function i(C){r=g(C)}function p(C){r+=g(C)}function y(C){r-=g(C)}function g(C){return Ax(C)?C:C.get()}return{get:a,set:i,add:p,subtract:y}}function d3(e,r){const a=e.scroll==="x"?g:c,i=r.style;let p=null,y=!1;function g(z){return`translate3d(${z}px,0px,0px)`}function c(z){return`translate3d(0px,${z}px,0px)`}function C(z){if(y)return;const F=DE(e.direction(z));F!==p&&(i.transform=a(F),p=F)}function M(z){y=!z}function T(){y||(i.transform="",r.getAttribute("style")||r.removeAttribute("style"))}return{clear:T,to:C,toggleActive:M}}function WE(e,r,a,i,p,y,g,c,C){const T=Ly(p),U=Ly(p).reverse(),z=Q().concat(ee());function F(Ee,Fe){return Ee.reduce((ht,At)=>ht-p[At],Fe)}function V(Ee,Fe){return Ee.reduce((ht,At)=>F(ht,Fe)>0?ht.concat([At]):ht,[])}function $(Ee){return y.map((Fe,ht)=>({start:Fe-i[ht]+.5+Ee,end:Fe+r-.5+Ee}))}function G(Ee,Fe,ht){const At=$(Fe);return Ee.map(ot=>{const ft=ht?0:-a,rt=ht?a:0,It=ht?"end":"start",Ut=At[ot][It];return{index:ot,loopPoint:Ut,slideLocation:My(-1),translate:d3(e,C[ot]),target:()=>c.get()>Ut?ft:rt}})}function Q(){const Ee=g[0],Fe=V(U,Ee);return G(Fe,a,!1)}function ee(){const Ee=r-g[0]-1,Fe=V(T,Ee);return G(Fe,-a,!0)}function ae(){return z.every(({index:Ee})=>{const Fe=T.filter(ht=>ht!==Ee);return F(Fe,r)<=.1})}function _e(){z.forEach(Ee=>{const{target:Fe,translate:ht,slideLocation:At}=Ee,ot=Fe();ot!==At.get()&&(ht.to(ot),At.set(ot))})}function ve(){z.forEach(Ee=>Ee.translate.clear())}return{canLoop:ae,clear:ve,loop:_e,loopPoints:z}}function ZE(e,r,a){let i,p=!1;function y(C){if(!a)return;function M(T){for(const U of T)if(U.type==="childList"){C.reInit(),r.emit("slidesChanged");break}}i=new MutationObserver(T=>{p||(Uv(a)||a(C,T))&&M(T)}),i.observe(e,{childList:!0})}function g(){i&&i.disconnect(),p=!0}return{init:y,destroy:g}}function YE(e,r,a,i){const p={};let y=null,g=null,c,C=!1;function M(){c=new IntersectionObserver(V=>{C||(V.forEach($=>{const G=r.indexOf($.target);p[G]=$}),y=null,g=null,a.emit("slidesInView"))},{root:e.parentElement,threshold:i}),r.forEach(V=>c.observe(V))}function T(){c&&c.disconnect(),C=!0}function U(V){return zy(p).reduce(($,G)=>{const Q=parseInt(G),{isIntersecting:ee}=p[Q];return(V&&ee||!V&&!ee)&&$.push(Q),$},[])}function z(V=!0){if(V&&y)return y;if(!V&&g)return g;const $=U(V);return V&&(y=$),V||(g=$),$}return{init:M,destroy:T,get:z}}function QE(e,r,a,i,p,y){const{measureSize:g,startEdge:c,endEdge:C}=e,M=a[0]&&p,T=V(),U=$(),z=a.map(g),F=G();function V(){if(!M)return 0;const ee=a[0];return ca(r[c]-ee[c])}function $(){if(!M)return 0;const ee=y.getComputedStyle(ru(i));return parseFloat(ee.getPropertyValue(`margin-${C}`))}function G(){return a.map((ee,ae,_e)=>{const ve=!ae,Ae=Dx(_e,ae);return ve?z[ae]+T:Ae?z[ae]+U:_e[ae+1][c]-ee[c]}).map(ca)}return{slideSizes:z,slideSizesWithGaps:F,startGap:T,endGap:U}}function XE(e,r,a,i,p,y,g,c,C){const{startEdge:M,endEdge:T,direction:U}=e,z=Ax(a);function F(Q,ee){return Ly(Q).filter(ae=>ae%ee===0).map(ae=>Q.slice(ae,ae+ee))}function V(Q){return Q.length?Ly(Q).reduce((ee,ae,_e)=>{const ve=ru(ee)||0,Ae=ve===0,Ee=ae===Ky(Q),Fe=p[M]-y[ve][M],ht=p[M]-y[ae][T],At=!i&&Ae?U(g):0,ot=!i&&Ee?U(c):0,ft=ca(ht-ot-(Fe+At));return _e&&ft>r+C&&ee.push(ae),Ee&&ee.push(Q.length),ee},[]).map((ee,ae,_e)=>{const ve=Math.max(_e[ae-1]||0);return Q.slice(ve,ee)}):[]}function $(Q){return z?F(Q,a):V(Q)}return{groupSlides:$}}function KE(e,r,a,i,p,y,g){const{align:c,axis:C,direction:M,startIndex:T,loop:U,duration:z,dragFree:F,dragThreshold:V,inViewThreshold:$,slidesToScroll:G,skipSnaps:Q,containScroll:ee,watchResize:ae,watchSlides:_e,watchDrag:ve,watchFocus:Ae}=y,Ee=2,Fe=kE(),ht=Fe.measure(r),At=a.map(Fe.measure),ot=EE(C,M),ft=ot.measureSize(ht),rt=UE(ft),It=ME(c,ft),Ut=!U&&!!ee,Be=U||!!ee,{slideSizes:ct,slideSizesWithGaps:nt,startGap:Ct,endGap:Me}=QE(ot,ht,At,a,Be,p),et=XE(ot,ft,G,U,ht,At,Ct,Me,Ee),{snaps:st,snapsAligned:gt}=qE(ot,It,ht,At,et),Et=-ru(st)+ru(nt),{snapsContained:Zt,scrollContainLimit:jt}=FE(ft,Et,gt,ee,Ee),ar=Ut?Zt:gt,{limit:Jt}=NE(Et,ar,U),wt=f3(Ky(ar),T,U),Gt=wt.clone(),zt=Ly(a),$e=({dragHandler:re,scrollBody:ne,scrollBounds:le,options:{loop:be}})=>{be||le.constrain(re.pointerDown()),ne.seek()},$t=({scrollBody:re,translate:ne,location:le,offsetLocation:be,previousLocation:Pe,scrollLooper:Ie,slideLooper:Ve,dragHandler:Ue,animation:Je,eventHandler:yt,scrollBounds:it,options:{loop:kt}},Oe)=>{const ir=re.settled(),br=!it.shouldConstrain(),qt=kt?ir:ir&&br,or=qt&&!Ue.pointerDown();or&&Je.stop();const Br=le.get()*Oe+Pe.get()*(1-Oe);be.set(Br),kt&&(Ie.loop(re.direction()),Ve.loop()),ne.to(be.get()),or&&yt.emit("settle"),qt||yt.emit("scroll")},Ot=TE(i,p,()=>$e(Re),re=>$t(Re,re)),Sr=.68,Rr=ar[wt.get()],Lr=My(Rr),Nn=My(Rr),Qn=My(Rr),Va=My(Rr),ba=LE(Lr,Qn,Nn,Va,z,Sr),Gi=$E(U,ar,Et,Jt,Va),Mi=VE(Ot,wt,Gt,ba,Gi,Va,g),Do=BE(Jt),no=Fy(),fi=YE(r,a,g,$),{slideRegistry:An}=HE(Ut,ee,ar,jt,et,zt),Ga=GE(e,a,An,Mi,ba,no,g,Ae),Re={ownerDocument:i,ownerWindow:p,eventHandler:g,containerRect:ht,slideRects:At,animation:Ot,axis:ot,dragHandler:RE(ot,e,i,p,Va,IE(ot,p),Lr,Ot,Mi,ba,Gi,wt,g,rt,F,V,Q,Sr,ve),eventStore:no,percentOfView:rt,index:wt,indexPrevious:Gt,limit:Jt,location:Lr,offsetLocation:Qn,previousLocation:Nn,options:y,resizeHandler:OE(r,g,p,a,ot,ae,Fe),scrollBody:ba,scrollBounds:zE(Jt,Qn,Va,ba,rt),scrollLooper:jE(Et,Jt,Qn,[Lr,Qn,Nn,Va]),scrollProgress:Do,scrollSnapList:ar.map(Do.get),scrollSnaps:ar,scrollTarget:Gi,scrollTo:Mi,slideLooper:WE(ot,ft,Et,ct,nt,st,ar,Qn,a),slideFocus:Ga,slidesHandler:ZE(r,g,_e),slidesInView:fi,slideIndexes:zt,slideRegistry:An,slidesToScroll:et,target:Va,translate:d3(ot,r)};return Re}function JE(){let e={},r;function a(M){r=M}function i(M){return e[M]||[]}function p(M){return i(M).forEach(T=>T(r,M)),C}function y(M,T){return e[M]=i(M).concat([T]),C}function g(M,T){return e[M]=i(M).filter(U=>U!==T),C}function c(){e={}}const C={init:a,emit:p,off:g,on:y,clear:c};return C}const eR={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function tR(e){function r(y,g){return h3(y,g||{})}function a(y){const g=y.breakpoints||{},c=zy(g).filter(C=>e.matchMedia(C).matches).map(C=>g[C]).reduce((C,M)=>r(C,M),{});return r(y,c)}function i(y){return y.map(g=>zy(g.breakpoints||{})).reduce((g,c)=>g.concat(c),[]).map(e.matchMedia)}return{mergeOptions:r,optionsAtMedia:a,optionsMediaQueries:i}}function rR(e){let r=[];function a(y,g){return r=g.filter(({options:c})=>e.optionsAtMedia(c).active!==!1),r.forEach(c=>c.init(y,e)),g.reduce((c,C)=>Object.assign(c,{[C.name]:C}),{})}function i(){r=r.filter(y=>y.destroy())}return{init:a,destroy:i}}function $0(e,r,a){const i=e.ownerDocument,p=i.defaultView,y=tR(p),g=rR(y),c=Fy(),C=JE(),{mergeOptions:M,optionsAtMedia:T,optionsMediaQueries:U}=y,{on:z,off:F,emit:V}=C,$=ot;let G=!1,Q,ee=M(eR,$0.globalOptions),ae=M(ee),_e=[],ve,Ae,Ee;function Fe(){const{container:zt,slides:$e}=ae;Ae=(bb(zt)?e.querySelector(zt):zt)||e.children[0];const Ot=bb($e)?Ae.querySelectorAll($e):$e;Ee=[].slice.call(Ot||Ae.children)}function ht(zt){const $e=KE(e,Ae,Ee,i,p,zt,C);if(zt.loop&&!$e.slideLooper.canLoop()){const $t=Object.assign({},zt,{loop:!1});return ht($t)}return $e}function At(zt,$e){G||(ee=M(ee,zt),ae=T(ee),_e=$e||_e,Fe(),Q=ht(ae),U([ee,..._e.map(({options:$t})=>$t)]).forEach($t=>c.add($t,"change",ot)),ae.active&&(Q.translate.to(Q.location.get()),Q.animation.init(),Q.slidesInView.init(),Q.slideFocus.init(Gt),Q.eventHandler.init(Gt),Q.resizeHandler.init(Gt),Q.slidesHandler.init(Gt),Q.options.loop&&Q.slideLooper.loop(),Ae.offsetParent&&Ee.length&&Q.dragHandler.init(Gt),ve=g.init(Gt,_e)))}function ot(zt,$e){const $t=et();ft(),At(M({startIndex:$t},zt),$e),C.emit("reInit")}function ft(){Q.dragHandler.destroy(),Q.eventStore.clear(),Q.translate.clear(),Q.slideLooper.clear(),Q.resizeHandler.destroy(),Q.slidesHandler.destroy(),Q.slidesInView.destroy(),Q.animation.destroy(),g.destroy(),c.clear()}function rt(){G||(G=!0,c.clear(),ft(),C.emit("destroy"),C.clear())}function It(zt,$e,$t){!ae.active||G||(Q.scrollBody.useBaseFriction().useDuration($e===!0?0:ae.duration),Q.scrollTo.index(zt,$t||0))}function Ut(zt){const $e=Q.index.add(1).get();It($e,zt,-1)}function Be(zt){const $e=Q.index.add(-1).get();It($e,zt,1)}function ct(){return Q.index.add(1).get()!==et()}function nt(){return Q.index.add(-1).get()!==et()}function Ct(){return Q.scrollSnapList}function Me(){return Q.scrollProgress.get(Q.offsetLocation.get())}function et(){return Q.index.get()}function st(){return Q.indexPrevious.get()}function gt(){return Q.slidesInView.get()}function Et(){return Q.slidesInView.get(!1)}function Zt(){return ve}function jt(){return Q}function ar(){return e}function Jt(){return Ae}function wt(){return Ee}const Gt={canScrollNext:ct,canScrollPrev:nt,containerNode:Jt,internalEngine:jt,destroy:rt,off:F,on:z,emit:V,plugins:Zt,previousScrollSnap:st,reInit:$,rootNode:ar,scrollNext:Ut,scrollPrev:Be,scrollProgress:Me,scrollSnapList:Ct,scrollTo:It,selectedScrollSnap:et,slideNodes:wt,slidesInView:gt,slidesNotInView:Et};return At(r,a),setTimeout(()=>C.emit("init"),0),Gt}$0.globalOptions=void 0;function Mx(e={},r=[]){const a=Y.useRef(e),i=Y.useRef(r),[p,y]=Y.useState(),[g,c]=Y.useState(),C=Y.useCallback(()=>{p&&p.reInit(a.current,i.current)},[p]);return Y.useEffect(()=>{Px(a.current,e)||(a.current=e,C())},[e,C]),Y.useEffect(()=>{AE(i.current,r)||(i.current=r,C())},[r,C]),Y.useEffect(()=>{if(PE()&&g){$0.globalOptions=Mx.globalOptions;const M=$0(g,a.current,i.current);return y(M),()=>M.destroy()}else y(void 0)},[g,y]),[c,p]}Mx.globalOptions=void 0;const p3=Y.createContext(null);function m3(){const e=Y.useContext(p3);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}function nR({orientation:e="horizontal",opts:r,setApi:a,plugins:i,className:p,children:y,...g}){const[c,C]=Mx({...r,axis:e==="horizontal"?"x":"y"},i),[M,T]=Y.useState(!1),[U,z]=Y.useState(!1),F=Y.useCallback(Q=>{Q&&(T(Q.canScrollPrev()),z(Q.canScrollNext()))},[]),V=Y.useCallback(()=>{C?.scrollPrev()},[C]),$=Y.useCallback(()=>{C?.scrollNext()},[C]),G=Y.useCallback(Q=>{Q.key==="ArrowLeft"?(Q.preventDefault(),V()):Q.key==="ArrowRight"&&(Q.preventDefault(),$())},[V,$]);return Y.useEffect(()=>{!C||!a||a(C)},[C,a]),Y.useEffect(()=>{if(C)return F(C),C.on("reInit",F),C.on("select",F),()=>{C?.off("select",F)}},[C,F]),de.jsx(p3.Provider,{value:{carouselRef:c,api:C,opts:r,orientation:e||(r?.axis==="y"?"vertical":"horizontal"),scrollPrev:V,scrollNext:$,canScrollPrev:M,canScrollNext:U},children:de.jsx("div",{onKeyDownCapture:G,className:ha("relative",p),role:"region","aria-roledescription":"carousel","data-slot":"carousel",...g,children:y})})}function aR({className:e,...r}){const{carouselRef:a,orientation:i}=m3();return de.jsx("div",{ref:a,className:"overflow-hidden","data-slot":"carousel-content",children:de.jsx("div",{className:ha("flex",i==="horizontal"?"-ml-4":"-mt-4 flex-col",e),...r})})}function iR({className:e,...r}){const{orientation:a}=m3();return de.jsx("div",{role:"group","aria-roledescription":"slide","data-slot":"carousel-item",className:ha("min-w-0 shrink-0 grow-0 basis-full",a==="horizontal"?"pl-4":"pt-4",e),...r})}function oR({className:e,...r}){return de.jsx("div",{"data-slot":"card",className:ha("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function sR({className:e,...r}){return de.jsx("div",{"data-slot":"card-header",className:ha("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function lR({className:e,...r}){return de.jsx("div",{"data-slot":"card-title",className:ha("leading-none font-semibold",e),...r})}function uR({className:e,...r}){return de.jsx("div",{"data-slot":"card-content",className:ha("px-6",e),...r})}const cR=[{metric:"Median Salary (USD/year)",weight_signed:.6558076975,weight_magnitude:.6558076975},{metric:"Average Salary (USD/year)",weight_signed:.6523718342,weight_magnitude:.6523718342},{metric:"Lowest Salary (USD/year)",weight_signed:.6485308062,weight_magnitude:.6485308062},{metric:"Highest Salary (USD/year)",weight_signed:.652181275,weight_magnitude:.652181275},{metric:"IQAir_AQI (AQI index)",weight_signed:-.473119728,weight_magnitude:.473119728},{metric:"Infant Survival Rate (per 1000 births)",weight_signed:.2322032702,weight_magnitude:.2322032702},{metric:"Alcohol Consumption Rate (liters per capita per year)",weight_signed:.5697201294,weight_magnitude:.5697201294},{metric:"Life Expectancy (years)",weight_signed:.7416090513,weight_magnitude:.7416090513},{metric:"Netflix",weight_signed:.68233766,weight_magnitude:.68233766},{metric:"Women Safety Index (score 0-1)",weight_signed:.7713289613,weight_magnitude:.7713289613},{metric:"Average Winter Temperature (C)",weight_signed:-.4293739779,weight_magnitude:.4293739779},{metric:"Average Summer Temperature (C)",weight_signed:-.4283984286,weight_magnitude:.4283984286},{metric:"Population (people)",weight_signed:-.0219677181,weight_magnitude:.0219677181},{metric:"Energy Per Capita (kWh per capita)",weight_signed:.5801967755,weight_magnitude:.5801967755},{metric:"% of Power from Fossil Fuels (%)",weight_signed:-.1362477334,weight_magnitude:.1362477334},{metric:"% of Power from Nuclear (%)",weight_signed:.2760217511,weight_magnitude:.2760217511},{metric:"% of Power from Renewables (%)",weight_signed:.0225333231,weight_magnitude:.0225333231},{metric:"% of Agricultural Land (%)",weight_signed:-.2509434126,weight_magnitude:.2509434126},{metric:"% of Forest Land (%)",weight_signed:.1552674975,weight_magnitude:.1552674975},{metric:"Territory (sq km)",weight_signed:.1241759612,weight_magnitude:.1241759612},{metric:"Average Rainfall (mm/year)",weight_signed:.0560770183,weight_magnitude:.0560770183},{metric:"Corruption (std score)",weight_signed:.0494015891,weight_magnitude:.0494015891},{metric:"Wheat Production (tonnes)",weight_signed:.0991311381,weight_magnitude:.0991311381},{metric:"Rye Production (tonnes)",weight_signed:-.0566746652,weight_magnitude:.0566746652},{metric:"Potatoes Production (tonnes)",weight_signed:-.1034607974,weight_magnitude:.1034607974},{metric:"Meat, Chicken Production (tonnes)",weight_signed:.0025616182,weight_magnitude:.0025616182},{metric:"Avocados Production (tonnes)",weight_signed:-.0224689248,weight_magnitude:.0224689248},{metric:"Petrol Price (USD/liter)",weight_signed:.4486226673,weight_magnitude:.4486226673},{metric:"Daily Oil Consumption (barrels/day)",weight_signed:.1522584044,weight_magnitude:.1522584044},{metric:"CO2 Emissions (tonnes per capita)",weight_signed:.5727786876,weight_magnitude:.5727786876},{metric:"Price per Square Meter to Buy Apartment in City Centre (USD/sqm)",weight_signed:.0116504384,weight_magnitude:.0116504384},{metric:"Fitness Club, Monthly Fee for 1 Adult (USD/month)",weight_signed:.1494452699,weight_magnitude:.1494452699},{metric:"Internet (60 Mbps or More, Unlimited Data, Cable/ADSL) (USD/month)",weight_signed:-.3850210632,weight_magnitude:.3850210632},{metric:"Coke/Pepsi (0.33 liter bottle, in restaurants) (USD/bottle)",weight_signed:.4883880713,weight_magnitude:.4883880713},{metric:"Meal for 2 People, Mid-range Restaurant, Three-course (USD/meal)",weight_signed:.6293410799,weight_magnitude:.6293410799},{metric:"GDP Per Capita (USD/year)",weight_signed:.6913383494,weight_magnitude:.6913383494},{metric:"Military Expenditure (USD/year)",weight_signed:.1428679802,weight_magnitude:.1428679802},{metric:"Yearly Homicide Rate (% per 100,000 people) (per 100,000 people)",weight_signed:-.1431878775,weight_magnitude:.1431878775},{metric:"Average Age (years)",weight_signed:.7032851312,weight_magnitude:.7032851312},{metric:"Inflation Rate (year, %)",weight_signed:-.2963979455,weight_magnitude:.2963979455}];var I1={},k1={},RS;function hR(){return RS||(RS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return a==="__proto__"}e.isUnsafeProperty=r})(k1)),k1}var U1={},IS;function y3(){return IS||(IS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){switch(typeof a){case"number":case"symbol":return!1;case"string":return a.includes(".")||a.includes("[")||a.includes("]")}}e.isDeepKey=r})(U1)),U1}var O1={},kS;function g3(){return kS||(kS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return typeof a=="string"||typeof a=="symbol"?a:Object.is(a?.valueOf?.(),-0)?"-0":String(a)}e.toKey=r})(O1)),O1}var L1={},US;function Tx(){return US||(US=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){const i=[],p=a.length;if(p===0)return i;let y=0,g="",c="",C=!1;for(a.charCodeAt(0)===46&&(i.push(""),y++);y<p;){const M=a[y];c?M==="\\"&&y+1<p?(y++,g+=a[y]):M===c?c="":g+=M:C?M==='"'||M==="'"?c=M:M==="]"?(C=!1,i.push(g),g=""):g+=M:M==="["?(C=!0,g&&(i.push(g),g="")):M==="."?g&&(i.push(g),g=""):g+=M,y++}return g&&i.push(g),i}e.toPath=r})(L1)),L1}var OS;function Ex(){return OS||(OS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=hR(),a=y3(),i=g3(),p=Tx();function y(c,C,M){if(c==null)return M;switch(typeof C){case"string":{if(r.isUnsafeProperty(C))return M;const T=c[C];return T===void 0?a.isDeepKey(C)?y(c,p.toPath(C),M):M:T}case"number":case"symbol":{typeof C=="number"&&(C=i.toKey(C));const T=c[C];return T===void 0?M:T}default:{if(Array.isArray(C))return g(c,C,M);if(Object.is(C?.valueOf(),-0)?C="-0":C=String(C),r.isUnsafeProperty(C))return M;const T=c[C];return T===void 0?M:T}}}function g(c,C,M){if(C.length===0)return M;let T=c;for(let U=0;U<C.length;U++){if(T==null||r.isUnsafeProperty(C[U]))return M;T=T[C[U]]}return T===void 0?M:T}e.get=y})(I1)),I1}var z1,LS;function fR(){return LS||(LS=1,z1=Ex().get),z1}var dR=fR();const Bp=iu(dR);var F1={exports:{}},Pn={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zS;function pR(){if(zS)return Pn;zS=1;var e=60103,r=60106,a=60107,i=60108,p=60114,y=60109,g=60110,c=60112,C=60113,M=60120,T=60115,U=60116,z=60121,F=60122,V=60117,$=60129,G=60131;if(typeof Symbol=="function"&&Symbol.for){var Q=Symbol.for;e=Q("react.element"),r=Q("react.portal"),a=Q("react.fragment"),i=Q("react.strict_mode"),p=Q("react.profiler"),y=Q("react.provider"),g=Q("react.context"),c=Q("react.forward_ref"),C=Q("react.suspense"),M=Q("react.suspense_list"),T=Q("react.memo"),U=Q("react.lazy"),z=Q("react.block"),F=Q("react.server.block"),V=Q("react.fundamental"),$=Q("react.debug_trace_mode"),G=Q("react.legacy_hidden")}function ee(rt){if(typeof rt=="object"&&rt!==null){var It=rt.$$typeof;switch(It){case e:switch(rt=rt.type,rt){case a:case p:case i:case C:case M:return rt;default:switch(rt=rt&&rt.$$typeof,rt){case g:case c:case U:case T:case y:return rt;default:return It}}case r:return It}}}var ae=y,_e=e,ve=c,Ae=a,Ee=U,Fe=T,ht=r,At=p,ot=i,ft=C;return Pn.ContextConsumer=g,Pn.ContextProvider=ae,Pn.Element=_e,Pn.ForwardRef=ve,Pn.Fragment=Ae,Pn.Lazy=Ee,Pn.Memo=Fe,Pn.Portal=ht,Pn.Profiler=At,Pn.StrictMode=ot,Pn.Suspense=ft,Pn.isAsyncMode=function(){return!1},Pn.isConcurrentMode=function(){return!1},Pn.isContextConsumer=function(rt){return ee(rt)===g},Pn.isContextProvider=function(rt){return ee(rt)===y},Pn.isElement=function(rt){return typeof rt=="object"&&rt!==null&&rt.$$typeof===e},Pn.isForwardRef=function(rt){return ee(rt)===c},Pn.isFragment=function(rt){return ee(rt)===a},Pn.isLazy=function(rt){return ee(rt)===U},Pn.isMemo=function(rt){return ee(rt)===T},Pn.isPortal=function(rt){return ee(rt)===r},Pn.isProfiler=function(rt){return ee(rt)===p},Pn.isStrictMode=function(rt){return ee(rt)===i},Pn.isSuspense=function(rt){return ee(rt)===C},Pn.isValidElementType=function(rt){return typeof rt=="string"||typeof rt=="function"||rt===a||rt===p||rt===$||rt===i||rt===C||rt===M||rt===G||typeof rt=="object"&&rt!==null&&(rt.$$typeof===U||rt.$$typeof===T||rt.$$typeof===y||rt.$$typeof===g||rt.$$typeof===c||rt.$$typeof===V||rt.$$typeof===z||rt[0]===F)},Pn.typeOf=ee,Pn}var FS;function mR(){return FS||(FS=1,F1.exports=pR()),F1.exports}var yR=mR(),Ds=e=>e===0?0:e>0?1:-1,ol=e=>typeof e=="number"&&e!=+e,Cd=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Pr=e=>(typeof e=="number"||e instanceof Number)&&!ol(e),ac=e=>Pr(e)||typeof e=="string",gR=0,Ny=e=>{var r=++gR;return"".concat(e||"").concat(r)},au=function(r,a){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Pr(r)&&typeof r!="string")return i;var y;if(Cd(r)){if(a==null)return i;var g=r.indexOf("%");y=a*parseFloat(r.slice(0,g))/100}else y=+r;return ol(y)&&(y=i),p&&a!=null&&y>a&&(y=a),y},v3=e=>{if(!Array.isArray(e))return!1;for(var r=e.length,a={},i=0;i<r;i++)if(!a[e[i]])a[e[i]]=!0;else return!0;return!1};function wo(e,r,a){return Pr(e)&&Pr(r)?e+a*(r-e):r}function vR(e,r,a){if(!(!e||!e.length))return e.find(i=>i&&(typeof r=="function"?r(i):Bp(i,r))===a)}var wi=e=>e===null||typeof e>"u",Jy=e=>wi(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),_R=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Rx(e){if(typeof e!="string")return!1;var r=_R;return r.includes(e)}var bR=["viewBox","children"],NS=["points","pathLength"],N1={svg:bR,polygon:NS,polyline:NS},xR=(e,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(Y.isValidElement(e)&&(a=e.props),typeof a!="object"&&typeof a!="function")return null;var i={};return Object.keys(a).forEach(p=>{Rx(p)&&(i[p]=(y=>a[p](a,y)))}),i},SR=(e,r,a)=>i=>(e(r,a,i),null),Ix=(e,r,a)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var i=null;return Object.keys(e).forEach(p=>{var y=e[p];Rx(p)&&typeof y=="function"&&(i||(i={}),i[p]=SR(y,r,a))}),i},wR=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function _3(e){if(typeof e!="string")return!1;var r=wR;return r.includes(e)}function eg(e){var r=Object.entries(e).filter(a=>{var[i]=a;return _3(i)});return Object.fromEntries(r)}var jS=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",BS=null,j1=null,b3=e=>{if(e===BS&&Array.isArray(j1))return j1;var r=[];return Y.Children.forEach(e,a=>{wi(a)||(yR.isFragment(a)?r=r.concat(b3(a.props.children)):r.push(a))}),j1=r,BS=e,r};function PR(e,r){var a=[],i=[];return Array.isArray(r)?i=r.map(p=>jS(p)):i=[jS(r)],b3(e).forEach(p=>{var y=Bp(p,"type.displayName")||Bp(p,"type.name");i.indexOf(y)!==-1&&a.push(p)}),a}var AR=(e,r,a,i)=>{var p;if(typeof r=="symbol"||typeof r=="number")return!0;var y=(p=i&&N1?.[i])!==null&&p!==void 0?p:[],g=r.startsWith("data-"),c=typeof e!="function"&&(!!i&&y.includes(r)||_3(r)),C=!!a&&Rx(r);return g||c||C},Vi=(e,r,a)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(Y.isValidElement(e)&&(i=e.props),typeof i!="object"&&typeof i!="function")return null;var p={};return Object.keys(i).forEach(y=>{var g;AR((g=i)===null||g===void 0?void 0:g[y],y,r,a)&&(p[y]=i[y])}),p},CR=["children","width","height","viewBox","className","style","title","desc"];function Sb(){return Sb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Sb.apply(null,arguments)}function DR(e,r){if(e==null)return{};var a,i,p=MR(e,r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(i=0;i<y.length;i++)a=y[i],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(p[a]=e[a])}return p}function MR(e,r){if(e==null)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(r.indexOf(i)!==-1)continue;a[i]=e[i]}return a}var x3=Y.forwardRef((e,r)=>{var{children:a,width:i,height:p,viewBox:y,className:g,style:c,title:C,desc:M}=e,T=DR(e,CR),U=y||{width:i,height:p,x:0,y:0},z=In("recharts-surface",g);return Y.createElement("svg",Sb({},Vi(T,!0,"svg"),{className:z,width:i,height:p,style:c,viewBox:"".concat(U.x," ").concat(U.y," ").concat(U.width," ").concat(U.height),ref:r}),Y.createElement("title",null,C),Y.createElement("desc",null,M),a)}),TR=["children","className"];function wb(){return wb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},wb.apply(null,arguments)}function ER(e,r){if(e==null)return{};var a,i,p=RR(e,r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(i=0;i<y.length;i++)a=y[i],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(p[a]=e[a])}return p}function RR(e,r){if(e==null)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(r.indexOf(i)!==-1)continue;a[i]=e[i]}return a}var ff=Y.forwardRef((e,r)=>{var{children:a,className:i}=e,p=ER(e,TR),y=In("recharts-layer",i);return Y.createElement("g",wb({className:y},Vi(p,!0),{ref:r}),a)}),IR=Y.createContext(null);function Fn(e){return function(){return e}}const S3=Math.cos,V0=Math.sin,su=Math.sqrt,G0=Math.PI,Ov=2*G0,Pb=Math.PI,Ab=2*Pb,wd=1e-6,kR=Ab-wd;function w3(e){this._+=e[0];for(let r=1,a=e.length;r<a;++r)this._+=arguments[r]+e[r]}function UR(e){let r=Math.floor(e);if(!(r>=0))throw new Error(`invalid digits: ${e}`);if(r>15)return w3;const a=10**r;return function(i){this._+=i[0];for(let p=1,y=i.length;p<y;++p)this._+=Math.round(arguments[p]*a)/a+i[p]}}class OR{constructor(r){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=r==null?w3:UR(r)}moveTo(r,a){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(r,a){this._append`L${this._x1=+r},${this._y1=+a}`}quadraticCurveTo(r,a,i,p){this._append`Q${+r},${+a},${this._x1=+i},${this._y1=+p}`}bezierCurveTo(r,a,i,p,y,g){this._append`C${+r},${+a},${+i},${+p},${this._x1=+y},${this._y1=+g}`}arcTo(r,a,i,p,y){if(r=+r,a=+a,i=+i,p=+p,y=+y,y<0)throw new Error(`negative radius: ${y}`);let g=this._x1,c=this._y1,C=i-r,M=p-a,T=g-r,U=c-a,z=T*T+U*U;if(this._x1===null)this._append`M${this._x1=r},${this._y1=a}`;else if(z>wd)if(!(Math.abs(U*C-M*T)>wd)||!y)this._append`L${this._x1=r},${this._y1=a}`;else{let F=i-g,V=p-c,$=C*C+M*M,G=F*F+V*V,Q=Math.sqrt($),ee=Math.sqrt(z),ae=y*Math.tan((Pb-Math.acos(($+z-G)/(2*Q*ee)))/2),_e=ae/ee,ve=ae/Q;Math.abs(_e-1)>wd&&this._append`L${r+_e*T},${a+_e*U}`,this._append`A${y},${y},0,0,${+(U*F>T*V)},${this._x1=r+ve*C},${this._y1=a+ve*M}`}}arc(r,a,i,p,y,g){if(r=+r,a=+a,i=+i,g=!!g,i<0)throw new Error(`negative radius: ${i}`);let c=i*Math.cos(p),C=i*Math.sin(p),M=r+c,T=a+C,U=1^g,z=g?p-y:y-p;this._x1===null?this._append`M${M},${T}`:(Math.abs(this._x1-M)>wd||Math.abs(this._y1-T)>wd)&&this._append`L${M},${T}`,i&&(z<0&&(z=z%Ab+Ab),z>kR?this._append`A${i},${i},0,1,${U},${r-c},${a-C}A${i},${i},0,1,${U},${this._x1=M},${this._y1=T}`:z>wd&&this._append`A${i},${i},0,${+(z>=Pb)},${U},${this._x1=r+i*Math.cos(y)},${this._y1=a+i*Math.sin(y)}`)}rect(r,a,i,p){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+a}h${i=+i}v${+p}h${-i}Z`}toString(){return this._}}function kx(e){let r=3;return e.digits=function(a){if(!arguments.length)return r;if(a==null)r=null;else{const i=Math.floor(a);if(!(i>=0))throw new RangeError(`invalid digits: ${a}`);r=i}return e},()=>new OR(r)}function Ux(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function P3(e){this._context=e}P3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;default:this._context.lineTo(e,r);break}}};function Lv(e){return new P3(e)}function A3(e){return e[0]}function C3(e){return e[1]}function D3(e,r){var a=Fn(!0),i=null,p=Lv,y=null,g=kx(c);e=typeof e=="function"?e:e===void 0?A3:Fn(e),r=typeof r=="function"?r:r===void 0?C3:Fn(r);function c(C){var M,T=(C=Ux(C)).length,U,z=!1,F;for(i==null&&(y=p(F=g())),M=0;M<=T;++M)!(M<T&&a(U=C[M],M,C))===z&&((z=!z)?y.lineStart():y.lineEnd()),z&&y.point(+e(U,M,C),+r(U,M,C));if(F)return y=null,F+""||null}return c.x=function(C){return arguments.length?(e=typeof C=="function"?C:Fn(+C),c):e},c.y=function(C){return arguments.length?(r=typeof C=="function"?C:Fn(+C),c):r},c.defined=function(C){return arguments.length?(a=typeof C=="function"?C:Fn(!!C),c):a},c.curve=function(C){return arguments.length?(p=C,i!=null&&(y=p(i)),c):p},c.context=function(C){return arguments.length?(C==null?i=y=null:y=p(i=C),c):i},c}function y0(e,r,a){var i=null,p=Fn(!0),y=null,g=Lv,c=null,C=kx(M);e=typeof e=="function"?e:e===void 0?A3:Fn(+e),r=typeof r=="function"?r:Fn(r===void 0?0:+r),a=typeof a=="function"?a:a===void 0?C3:Fn(+a);function M(U){var z,F,V,$=(U=Ux(U)).length,G,Q=!1,ee,ae=new Array($),_e=new Array($);for(y==null&&(c=g(ee=C())),z=0;z<=$;++z){if(!(z<$&&p(G=U[z],z,U))===Q)if(Q=!Q)F=z,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),V=z-1;V>=F;--V)c.point(ae[V],_e[V]);c.lineEnd(),c.areaEnd()}Q&&(ae[z]=+e(G,z,U),_e[z]=+r(G,z,U),c.point(i?+i(G,z,U):ae[z],a?+a(G,z,U):_e[z]))}if(ee)return c=null,ee+""||null}function T(){return D3().defined(p).curve(g).context(y)}return M.x=function(U){return arguments.length?(e=typeof U=="function"?U:Fn(+U),i=null,M):e},M.x0=function(U){return arguments.length?(e=typeof U=="function"?U:Fn(+U),M):e},M.x1=function(U){return arguments.length?(i=U==null?null:typeof U=="function"?U:Fn(+U),M):i},M.y=function(U){return arguments.length?(r=typeof U=="function"?U:Fn(+U),a=null,M):r},M.y0=function(U){return arguments.length?(r=typeof U=="function"?U:Fn(+U),M):r},M.y1=function(U){return arguments.length?(a=U==null?null:typeof U=="function"?U:Fn(+U),M):a},M.lineX0=M.lineY0=function(){return T().x(e).y(r)},M.lineY1=function(){return T().x(e).y(a)},M.lineX1=function(){return T().x(i).y(r)},M.defined=function(U){return arguments.length?(p=typeof U=="function"?U:Fn(!!U),M):p},M.curve=function(U){return arguments.length?(g=U,y!=null&&(c=g(y)),M):g},M.context=function(U){return arguments.length?(U==null?y=c=null:c=g(y=U),M):y},M}class M3{constructor(r,a){this._context=r,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(r,a){switch(r=+r,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+r)/2,this._y0,this._x0,a,r,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,r,this._y0,r,a);break}}this._x0=r,this._y0=a}}function LR(e){return new M3(e,!0)}function zR(e){return new M3(e,!1)}const Ox={draw(e,r){const a=su(r/G0);e.moveTo(a,0),e.arc(0,0,a,0,Ov)}},FR={draw(e,r){const a=su(r/5)/2;e.moveTo(-3*a,-a),e.lineTo(-a,-a),e.lineTo(-a,-3*a),e.lineTo(a,-3*a),e.lineTo(a,-a),e.lineTo(3*a,-a),e.lineTo(3*a,a),e.lineTo(a,a),e.lineTo(a,3*a),e.lineTo(-a,3*a),e.lineTo(-a,a),e.lineTo(-3*a,a),e.closePath()}},T3=su(1/3),NR=T3*2,jR={draw(e,r){const a=su(r/NR),i=a*T3;e.moveTo(0,-a),e.lineTo(i,0),e.lineTo(0,a),e.lineTo(-i,0),e.closePath()}},BR={draw(e,r){const a=su(r),i=-a/2;e.rect(i,i,a,a)}},qR=.8908130915292852,E3=V0(G0/10)/V0(7*G0/10),HR=V0(Ov/10)*E3,$R=-S3(Ov/10)*E3,VR={draw(e,r){const a=su(r*qR),i=HR*a,p=$R*a;e.moveTo(0,-a),e.lineTo(i,p);for(let y=1;y<5;++y){const g=Ov*y/5,c=S3(g),C=V0(g);e.lineTo(C*a,-c*a),e.lineTo(c*i-C*p,C*i+c*p)}e.closePath()}},B1=su(3),GR={draw(e,r){const a=-su(r/(B1*3));e.moveTo(0,a*2),e.lineTo(-B1*a,-a),e.lineTo(B1*a,-a),e.closePath()}},tl=-.5,rl=su(3)/2,Cb=1/su(12),WR=(Cb/2+1)*3,ZR={draw(e,r){const a=su(r/WR),i=a/2,p=a*Cb,y=i,g=a*Cb+a,c=-y,C=g;e.moveTo(i,p),e.lineTo(y,g),e.lineTo(c,C),e.lineTo(tl*i-rl*p,rl*i+tl*p),e.lineTo(tl*y-rl*g,rl*y+tl*g),e.lineTo(tl*c-rl*C,rl*c+tl*C),e.lineTo(tl*i+rl*p,tl*p-rl*i),e.lineTo(tl*y+rl*g,tl*g-rl*y),e.lineTo(tl*c+rl*C,tl*C-rl*c),e.closePath()}};function YR(e,r){let a=null,i=kx(p);e=typeof e=="function"?e:Fn(e||Ox),r=typeof r=="function"?r:Fn(r===void 0?64:+r);function p(){let y;if(a||(a=y=i()),e.apply(this,arguments).draw(a,+r.apply(this,arguments)),y)return a=null,y+""||null}return p.type=function(y){return arguments.length?(e=typeof y=="function"?y:Fn(y),p):e},p.size=function(y){return arguments.length?(r=typeof y=="function"?y:Fn(+y),p):r},p.context=function(y){return arguments.length?(a=y??null,p):a},p}function W0(){}function Z0(e,r,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+r)/6,(e._y0+4*e._y1+a)/6)}function R3(e){this._context=e}R3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Z0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Z0(this,e,r);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};function QR(e){return new R3(e)}function I3(e){this._context=e}I3.prototype={areaStart:W0,areaEnd:W0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._x2=e,this._y2=r;break;case 1:this._point=2,this._x3=e,this._y3=r;break;case 2:this._point=3,this._x4=e,this._y4=r,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+r)/6);break;default:Z0(this,e,r);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};function XR(e){return new I3(e)}function k3(e){this._context=e}k3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(a,i):this._context.moveTo(a,i);break;case 3:this._point=4;default:Z0(this,e,r);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};function KR(e){return new k3(e)}function U3(e){this._context=e}U3.prototype={areaStart:W0,areaEnd:W0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,r){e=+e,r=+r,this._point?this._context.lineTo(e,r):(this._point=1,this._context.moveTo(e,r))}};function JR(e){return new U3(e)}function qS(e){return e<0?-1:1}function HS(e,r,a){var i=e._x1-e._x0,p=r-e._x1,y=(e._y1-e._y0)/(i||p<0&&-0),g=(a-e._y1)/(p||i<0&&-0),c=(y*p+g*i)/(i+p);return(qS(y)+qS(g))*Math.min(Math.abs(y),Math.abs(g),.5*Math.abs(c))||0}function $S(e,r){var a=e._x1-e._x0;return a?(3*(e._y1-e._y0)/a-r)/2:r}function q1(e,r,a){var i=e._x0,p=e._y0,y=e._x1,g=e._y1,c=(y-i)/3;e._context.bezierCurveTo(i+c,p+c*r,y-c,g-c*a,y,g)}function Y0(e){this._context=e}Y0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:q1(this,this._t0,$S(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){var a=NaN;if(e=+e,r=+r,!(e===this._x1&&r===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;break;case 2:this._point=3,q1(this,$S(this,a=HS(this,e,r)),a);break;default:q1(this,this._t0,a=HS(this,e,r));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r,this._t0=a}}};function O3(e){this._context=new L3(e)}(O3.prototype=Object.create(Y0.prototype)).point=function(e,r){Y0.prototype.point.call(this,r,e)};function L3(e){this._context=e}L3.prototype={moveTo:function(e,r){this._context.moveTo(r,e)},closePath:function(){this._context.closePath()},lineTo:function(e,r){this._context.lineTo(r,e)},bezierCurveTo:function(e,r,a,i,p,y){this._context.bezierCurveTo(r,e,i,a,y,p)}};function eI(e){return new Y0(e)}function tI(e){return new O3(e)}function z3(e){this._context=e}z3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,r=this._y,a=e.length;if(a)if(this._line?this._context.lineTo(e[0],r[0]):this._context.moveTo(e[0],r[0]),a===2)this._context.lineTo(e[1],r[1]);else for(var i=VS(e),p=VS(r),y=0,g=1;g<a;++y,++g)this._context.bezierCurveTo(i[0][y],p[0][y],i[1][y],p[1][y],e[g],r[g]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,r){this._x.push(+e),this._y.push(+r)}};function VS(e){var r,a=e.length-1,i,p=new Array(a),y=new Array(a),g=new Array(a);for(p[0]=0,y[0]=2,g[0]=e[0]+2*e[1],r=1;r<a-1;++r)p[r]=1,y[r]=4,g[r]=4*e[r]+2*e[r+1];for(p[a-1]=2,y[a-1]=7,g[a-1]=8*e[a-1]+e[a],r=1;r<a;++r)i=p[r]/y[r-1],y[r]-=i,g[r]-=i*g[r-1];for(p[a-1]=g[a-1]/y[a-1],r=a-2;r>=0;--r)p[r]=(g[r]-p[r+1])/y[r];for(y[a-1]=(e[a]+p[a-1])/2,r=0;r<a-1;++r)y[r]=2*e[r+1]-p[r+1];return[p,y]}function rI(e){return new z3(e)}function zv(e,r){this._context=e,this._t=r}zv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(e,r);else{var a=this._x*(1-this._t)+e*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,r)}break}}this._x=e,this._y=r}};function nI(e){return new zv(e,.5)}function aI(e){return new zv(e,0)}function iI(e){return new zv(e,1)}function qp(e,r){if((g=e.length)>1)for(var a=1,i,p,y=e[r[0]],g,c=y.length;a<g;++a)for(p=y,y=e[r[a]],i=0;i<c;++i)y[i][1]+=y[i][0]=isNaN(p[i][1])?p[i][0]:p[i][1]}function Db(e){for(var r=e.length,a=new Array(r);--r>=0;)a[r]=r;return a}function oI(e,r){return e[r]}function sI(e){const r=[];return r.key=e,r}function lI(){var e=Fn([]),r=Db,a=qp,i=oI;function p(y){var g=Array.from(e.apply(this,arguments),sI),c,C=g.length,M=-1,T;for(const U of y)for(c=0,++M;c<C;++c)(g[c][M]=[0,+i(U,g[c].key,M,y)]).data=U;for(c=0,T=Ux(r(g));c<C;++c)g[T[c]].index=c;return a(g,T),g}return p.keys=function(y){return arguments.length?(e=typeof y=="function"?y:Fn(Array.from(y)),p):e},p.value=function(y){return arguments.length?(i=typeof y=="function"?y:Fn(+y),p):i},p.order=function(y){return arguments.length?(r=y==null?Db:typeof y=="function"?y:Fn(Array.from(y)),p):r},p.offset=function(y){return arguments.length?(a=y??qp,p):a},p}function uI(e,r){if((i=e.length)>0){for(var a,i,p=0,y=e[0].length,g;p<y;++p){for(g=a=0;a<i;++a)g+=e[a][p][1]||0;if(g)for(a=0;a<i;++a)e[a][p][1]/=g}qp(e,r)}}function cI(e,r){if((p=e.length)>0){for(var a=0,i=e[r[0]],p,y=i.length;a<y;++a){for(var g=0,c=0;g<p;++g)c+=e[g][a][1]||0;i[a][1]+=i[a][0]=-c/2}qp(e,r)}}function hI(e,r){if(!(!((g=e.length)>0)||!((y=(p=e[r[0]]).length)>0))){for(var a=0,i=1,p,y,g;i<y;++i){for(var c=0,C=0,M=0;c<g;++c){for(var T=e[r[c]],U=T[i][1]||0,z=T[i-1][1]||0,F=(U-z)/2,V=0;V<c;++V){var $=e[r[V]],G=$[i][1]||0,Q=$[i-1][1]||0;F+=G-Q}C+=U,M+=F*U}p[i-1][1]+=p[i-1][0]=a,C&&(a-=M/C)}p[i-1][1]+=p[i-1][0]=a,qp(e,r)}}var fI=["type","size","sizeType"];function Mb(){return Mb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Mb.apply(null,arguments)}function GS(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function WS(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?GS(Object(a),!0).forEach(function(i){dI(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):GS(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function dI(e,r,a){return(r=pI(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function pI(e){var r=mI(e,"string");return typeof r=="symbol"?r:r+""}function mI(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function yI(e,r){if(e==null)return{};var a,i,p=gI(e,r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(i=0;i<y.length;i++)a=y[i],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(p[a]=e[a])}return p}function gI(e,r){if(e==null)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(r.indexOf(i)!==-1)continue;a[i]=e[i]}return a}var F3={symbolCircle:Ox,symbolCross:FR,symbolDiamond:jR,symbolSquare:BR,symbolStar:VR,symbolTriangle:GR,symbolWye:ZR},vI=Math.PI/180,_I=e=>{var r="symbol".concat(Jy(e));return F3[r]||Ox},bI=(e,r,a)=>{if(r==="area")return e;switch(a){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*vI;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.tan(i)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},xI=(e,r)=>{F3["symbol".concat(Jy(e))]=r},N3=e=>{var{type:r="circle",size:a=64,sizeType:i="area"}=e,p=yI(e,fI),y=WS(WS({},p),{},{type:r,size:a,sizeType:i}),g="circle";typeof r=="string"&&(g=r);var c=()=>{var z=_I(g),F=YR().type(z).size(bI(a,i,g));return F()},{className:C,cx:M,cy:T}=y,U=Vi(y,!0);return M===+M&&T===+T&&a===+a?Y.createElement("path",Mb({},U,{className:In("recharts-symbols",C),transform:"translate(".concat(M,", ").concat(T,")"),d:c()})):null};N3.registerSymbol=xI;var H1={},$1={},ZS;function SI(){return ZS||(ZS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a,i){const p=new Map;for(let y=0;y<a.length;y++){const g=a[y],c=i(g);p.has(c)||p.set(c,g)}return Array.from(p.values())}e.uniqBy=r})($1)),$1}var V1={},YS;function j3(){return YS||(YS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return a}e.identity=r})(V1)),V1}var G1={},W1={},Z1={},QS;function wI(){return QS||(QS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return Number.isSafeInteger(a)&&a>=0}e.isLength=r})(Z1)),Z1}var XS;function Lx(){return XS||(XS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=wI();function a(i){return i!=null&&typeof i!="function"&&r.isLength(i.length)}e.isArrayLike=a})(W1)),W1}var Y1={},KS;function PI(){return KS||(KS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return typeof a=="object"&&a!==null}e.isObjectLike=r})(Y1)),Y1}var JS;function AI(){return JS||(JS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=Lx(),a=PI();function i(p){return a.isObjectLike(p)&&r.isArrayLike(p)}e.isArrayLikeObject=i})(G1)),G1}var Q1={},X1={},ew;function CI(){return ew||(ew=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=Ex();function a(i){return function(p){return r.get(p,i)}}e.property=a})(X1)),X1}var K1={},J1={},e_={},t_={},tw;function B3(){return tw||(tw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return a!==null&&(typeof a=="object"||typeof a=="function")}e.isObject=r})(t_)),t_}var r_={},rw;function q3(){return rw||(rw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return a==null||typeof a!="object"&&typeof a!="function"}e.isPrimitive=r})(r_)),r_}var n_={},nw;function H3(){return nw||(nw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a,i){return a===i||Number.isNaN(a)&&Number.isNaN(i)}e.eq=r})(n_)),n_}var aw;function DI(){return aw||(aw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=zx(),a=B3(),i=q3(),p=H3();function y(U,z,F){return typeof F!="function"?r.isMatch(U,z):g(U,z,function V($,G,Q,ee,ae,_e){const ve=F($,G,Q,ee,ae,_e);return ve!==void 0?!!ve:g($,G,V,_e)},new Map)}function g(U,z,F,V){if(z===U)return!0;switch(typeof z){case"object":return c(U,z,F,V);case"function":return Object.keys(z).length>0?g(U,{...z},F,V):p.eq(U,z);default:return a.isObject(U)?typeof z=="string"?z==="":!0:p.eq(U,z)}}function c(U,z,F,V){if(z==null)return!0;if(Array.isArray(z))return M(U,z,F,V);if(z instanceof Map)return C(U,z,F,V);if(z instanceof Set)return T(U,z,F,V);const $=Object.keys(z);if(U==null)return $.length===0;if($.length===0)return!0;if(V&&V.has(z))return V.get(z)===U;V&&V.set(z,U);try{for(let G=0;G<$.length;G++){const Q=$[G];if(!i.isPrimitive(U)&&!(Q in U)||z[Q]===void 0&&U[Q]!==void 0||z[Q]===null&&U[Q]!==null||!F(U[Q],z[Q],Q,U,z,V))return!1}return!0}finally{V&&V.delete(z)}}function C(U,z,F,V){if(z.size===0)return!0;if(!(U instanceof Map))return!1;for(const[$,G]of z.entries()){const Q=U.get($);if(F(Q,G,$,U,z,V)===!1)return!1}return!0}function M(U,z,F,V){if(z.length===0)return!0;if(!Array.isArray(U))return!1;const $=new Set;for(let G=0;G<z.length;G++){const Q=z[G];let ee=!1;for(let ae=0;ae<U.length;ae++){if($.has(ae))continue;const _e=U[ae];let ve=!1;if(F(_e,Q,G,U,z,V)&&(ve=!0),ve){$.add(ae),ee=!0;break}}if(!ee)return!1}return!0}function T(U,z,F,V){return z.size===0?!0:U instanceof Set?M([...U],[...z],F,V):!1}e.isMatchWith=y,e.isSetMatch=T})(e_)),e_}var iw;function zx(){return iw||(iw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=DI();function a(i,p){return r.isMatchWith(i,p,()=>{})}e.isMatch=a})(J1)),J1}var a_={},i_={},o_={},ow;function MI(){return ow||(ow=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return Object.getOwnPropertySymbols(a).filter(i=>Object.prototype.propertyIsEnumerable.call(a,i))}e.getSymbols=r})(o_)),o_}var s_={},sw;function $3(){return sw||(sw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return a==null?a===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(a)}e.getTag=r})(s_)),s_}var l_={},lw;function V3(){return lw||(lw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r="[object RegExp]",a="[object String]",i="[object Number]",p="[object Boolean]",y="[object Arguments]",g="[object Symbol]",c="[object Date]",C="[object Map]",M="[object Set]",T="[object Array]",U="[object Function]",z="[object ArrayBuffer]",F="[object Object]",V="[object Error]",$="[object DataView]",G="[object Uint8Array]",Q="[object Uint8ClampedArray]",ee="[object Uint16Array]",ae="[object Uint32Array]",_e="[object BigUint64Array]",ve="[object Int8Array]",Ae="[object Int16Array]",Ee="[object Int32Array]",Fe="[object BigInt64Array]",ht="[object Float32Array]",At="[object Float64Array]";e.argumentsTag=y,e.arrayBufferTag=z,e.arrayTag=T,e.bigInt64ArrayTag=Fe,e.bigUint64ArrayTag=_e,e.booleanTag=p,e.dataViewTag=$,e.dateTag=c,e.errorTag=V,e.float32ArrayTag=ht,e.float64ArrayTag=At,e.functionTag=U,e.int16ArrayTag=Ae,e.int32ArrayTag=Ee,e.int8ArrayTag=ve,e.mapTag=C,e.numberTag=i,e.objectTag=F,e.regexpTag=r,e.setTag=M,e.stringTag=a,e.symbolTag=g,e.uint16ArrayTag=ee,e.uint32ArrayTag=ae,e.uint8ArrayTag=G,e.uint8ClampedArrayTag=Q})(l_)),l_}var u_={},uw;function TI(){return uw||(uw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}e.isTypedArray=r})(u_)),u_}var cw;function G3(){return cw||(cw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=MI(),a=$3(),i=V3(),p=q3(),y=TI();function g(T,U){return c(T,void 0,T,new Map,U)}function c(T,U,z,F=new Map,V=void 0){const $=V?.(T,U,z,F);if($!==void 0)return $;if(p.isPrimitive(T))return T;if(F.has(T))return F.get(T);if(Array.isArray(T)){const G=new Array(T.length);F.set(T,G);for(let Q=0;Q<T.length;Q++)G[Q]=c(T[Q],Q,z,F,V);return Object.hasOwn(T,"index")&&(G.index=T.index),Object.hasOwn(T,"input")&&(G.input=T.input),G}if(T instanceof Date)return new Date(T.getTime());if(T instanceof RegExp){const G=new RegExp(T.source,T.flags);return G.lastIndex=T.lastIndex,G}if(T instanceof Map){const G=new Map;F.set(T,G);for(const[Q,ee]of T)G.set(Q,c(ee,Q,z,F,V));return G}if(T instanceof Set){const G=new Set;F.set(T,G);for(const Q of T)G.add(c(Q,void 0,z,F,V));return G}if(typeof Buffer<"u"&&Buffer.isBuffer(T))return T.subarray();if(y.isTypedArray(T)){const G=new(Object.getPrototypeOf(T)).constructor(T.length);F.set(T,G);for(let Q=0;Q<T.length;Q++)G[Q]=c(T[Q],Q,z,F,V);return G}if(T instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&T instanceof SharedArrayBuffer)return T.slice(0);if(T instanceof DataView){const G=new DataView(T.buffer.slice(0),T.byteOffset,T.byteLength);return F.set(T,G),C(G,T,z,F,V),G}if(typeof File<"u"&&T instanceof File){const G=new File([T],T.name,{type:T.type});return F.set(T,G),C(G,T,z,F,V),G}if(T instanceof Blob){const G=new Blob([T],{type:T.type});return F.set(T,G),C(G,T,z,F,V),G}if(T instanceof Error){const G=new T.constructor;return F.set(T,G),G.message=T.message,G.name=T.name,G.stack=T.stack,G.cause=T.cause,C(G,T,z,F,V),G}if(typeof T=="object"&&M(T)){const G=Object.create(Object.getPrototypeOf(T));return F.set(T,G),C(G,T,z,F,V),G}return T}function C(T,U,z=T,F,V){const $=[...Object.keys(U),...r.getSymbols(U)];for(let G=0;G<$.length;G++){const Q=$[G],ee=Object.getOwnPropertyDescriptor(T,Q);(ee==null||ee.writable)&&(T[Q]=c(U[Q],Q,z,F,V))}}function M(T){switch(a.getTag(T)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=g,e.cloneDeepWithImpl=c,e.copyProperties=C})(i_)),i_}var hw;function EI(){return hw||(hw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=G3();function a(i){return r.cloneDeepWithImpl(i,void 0,i,new Map,void 0)}e.cloneDeep=a})(a_)),a_}var fw;function RI(){return fw||(fw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=zx(),a=EI();function i(p){return p=a.cloneDeep(p),y=>r.isMatch(y,p)}e.matches=i})(K1)),K1}var c_={},h_={},f_={},dw;function II(){return dw||(dw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=G3(),a=V3();function i(p,y){return r.cloneDeepWith(p,(g,c,C,M)=>{const T=y?.(g,c,C,M);if(T!==void 0)return T;if(typeof p=="object")switch(Object.prototype.toString.call(p)){case a.numberTag:case a.stringTag:case a.booleanTag:{const U=new p.constructor(p?.valueOf());return r.copyProperties(U,p),U}case a.argumentsTag:{const U={};return r.copyProperties(U,p),U.length=p.length,U[Symbol.iterator]=p[Symbol.iterator],U}default:return}})}e.cloneDeepWith=i})(f_)),f_}var pw;function kI(){return pw||(pw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=II();function a(i){return r.cloneDeepWith(i)}e.cloneDeep=a})(h_)),h_}var d_={},p_={},mw;function W3(){return mw||(mw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=/^(?:0|[1-9]\d*)$/;function a(i,p=Number.MAX_SAFE_INTEGER){switch(typeof i){case"number":return Number.isInteger(i)&&i>=0&&i<p;case"symbol":return!1;case"string":return r.test(i)}}e.isIndex=a})(p_)),p_}var m_={},yw;function UI(){return yw||(yw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=$3();function a(i){return i!==null&&typeof i=="object"&&r.getTag(i)==="[object Arguments]"}e.isArguments=a})(m_)),m_}var gw;function OI(){return gw||(gw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=y3(),a=W3(),i=UI(),p=Tx();function y(g,c){let C;if(Array.isArray(c)?C=c:typeof c=="string"&&r.isDeepKey(c)&&g?.[c]==null?C=p.toPath(c):C=[c],C.length===0)return!1;let M=g;for(let T=0;T<C.length;T++){const U=C[T];if((M==null||!Object.hasOwn(M,U))&&!((Array.isArray(M)||i.isArguments(M))&&a.isIndex(U)&&U<M.length))return!1;M=M[U]}return!0}e.has=y})(d_)),d_}var vw;function LI(){return vw||(vw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=zx(),a=g3(),i=kI(),p=Ex(),y=OI();function g(c,C){switch(typeof c){case"object":{Object.is(c?.valueOf(),-0)&&(c="-0");break}case"number":{c=a.toKey(c);break}}return C=i.cloneDeep(C),function(M){const T=p.get(M,c);return T===void 0?y.has(M,c):C===void 0?T===void 0:r.isMatch(T,C)}}e.matchesProperty=g})(c_)),c_}var _w;function zI(){return _w||(_w=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=j3(),a=CI(),i=RI(),p=LI();function y(g){if(g==null)return r.identity;switch(typeof g){case"function":return g;case"object":return Array.isArray(g)&&g.length===2?p.matchesProperty(g[0],g[1]):i.matches(g);case"string":case"symbol":case"number":return a.property(g)}}e.iteratee=y})(Q1)),Q1}var bw;function FI(){return bw||(bw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=SI(),a=j3(),i=AI(),p=zI();function y(g,c=a.identity){return i.isArrayLikeObject(g)?r.uniqBy(Array.from(g),p.iteratee(c)):[]}e.uniqBy=y})(H1)),H1}var y_,xw;function NI(){return xw||(xw=1,y_=FI().uniqBy),y_}var jI=NI();const Sw=iu(jI);function BI(e,r,a){return r===!0?Sw(e,a):typeof r=="function"?Sw(e,r):e}var g_={exports:{}},v_={},__={exports:{}},b_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ww;function qI(){if(ww)return b_;ww=1;var e=Kp();function r(U,z){return U===z&&(U!==0||1/U===1/z)||U!==U&&z!==z}var a=typeof Object.is=="function"?Object.is:r,i=e.useState,p=e.useEffect,y=e.useLayoutEffect,g=e.useDebugValue;function c(U,z){var F=z(),V=i({inst:{value:F,getSnapshot:z}}),$=V[0].inst,G=V[1];return y(function(){$.value=F,$.getSnapshot=z,C($)&&G({inst:$})},[U,F,z]),p(function(){return C($)&&G({inst:$}),U(function(){C($)&&G({inst:$})})},[U]),g(F),F}function C(U){var z=U.getSnapshot;U=U.value;try{var F=z();return!a(U,F)}catch{return!0}}function M(U,z){return z()}var T=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?M:c;return b_.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:T,b_}var Pw;function HI(){return Pw||(Pw=1,__.exports=qI()),__.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aw;function $I(){if(Aw)return v_;Aw=1;var e=Kp(),r=HI();function a(M,T){return M===T&&(M!==0||1/M===1/T)||M!==M&&T!==T}var i=typeof Object.is=="function"?Object.is:a,p=r.useSyncExternalStore,y=e.useRef,g=e.useEffect,c=e.useMemo,C=e.useDebugValue;return v_.useSyncExternalStoreWithSelector=function(M,T,U,z,F){var V=y(null);if(V.current===null){var $={hasValue:!1,value:null};V.current=$}else $=V.current;V=c(function(){function Q(Ae){if(!ee){if(ee=!0,ae=Ae,Ae=z(Ae),F!==void 0&&$.hasValue){var Ee=$.value;if(F(Ee,Ae))return _e=Ee}return _e=Ae}if(Ee=_e,i(ae,Ae))return Ee;var Fe=z(Ae);return F!==void 0&&F(Ee,Fe)?(ae=Ae,Ee):(ae=Ae,_e=Fe)}var ee=!1,ae,_e,ve=U===void 0?null:U;return[function(){return Q(T())},ve===null?void 0:function(){return Q(ve())}]},[T,U,z,F]);var G=p(M,V[0],V[1]);return g(function(){$.hasValue=!0,$.value=G},[G]),C(G),G},v_}var Cw;function VI(){return Cw||(Cw=1,g_.exports=$I()),g_.exports}var GI=VI(),Fx=Y.createContext(null),WI=e=>e,Pi=()=>{var e=Y.useContext(Fx);return e?e.store.dispatch:WI},F0=()=>{},ZI=()=>F0,YI=(e,r)=>e===r;function pr(e){var r=Y.useContext(Fx);return GI.useSyncExternalStoreWithSelector(r?r.subscription.addNestedSub:ZI,r?r.store.getState:F0,r?r.store.getState:F0,r?e:F0,YI)}function QI(e,r=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(r)}function XI(e,r=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(r)}function KI(e,r="expected all items to be functions, instead received the following types: "){if(!e.every(a=>typeof a=="function")){const a=e.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${r}[${a}]`)}}var Dw=e=>Array.isArray(e)?e:[e];function JI(e){const r=Array.isArray(e[0])?e[0]:e;return KI(r,"createSelector expects all input-selectors to be functions, but received the following types: "),r}function e8(e,r){const a=[],{length:i}=e;for(let p=0;p<i;p++)a.push(e[p].apply(null,r));return a}var t8=class{constructor(e){this.value=e}deref(){return this.value}},r8=typeof WeakRef<"u"?WeakRef:t8,n8=0,Mw=1;function g0(){return{s:n8,v:void 0,o:null,p:null}}function Z3(e,r={}){let a=g0();const{resultEqualityCheck:i}=r;let p,y=0;function g(){let c=a;const{length:C}=arguments;for(let U=0,z=C;U<z;U++){const F=arguments[U];if(typeof F=="function"||typeof F=="object"&&F!==null){let V=c.o;V===null&&(c.o=V=new WeakMap);const $=V.get(F);$===void 0?(c=g0(),V.set(F,c)):c=$}else{let V=c.p;V===null&&(c.p=V=new Map);const $=V.get(F);$===void 0?(c=g0(),V.set(F,c)):c=$}}const M=c;let T;if(c.s===Mw)T=c.v;else if(T=e.apply(null,arguments),y++,i){const U=p?.deref?.()??p;U!=null&&i(U,T)&&(T=U,y!==0&&y--),p=typeof T=="object"&&T!==null||typeof T=="function"?new r8(T):T}return M.s=Mw,M.v=T,T}return g.clearCache=()=>{a=g0(),g.resetResultsCount()},g.resultsCount=()=>y,g.resetResultsCount=()=>{y=0},g}function a8(e,...r){const a=typeof e=="function"?{memoize:e,memoizeOptions:r}:e,i=(...p)=>{let y=0,g=0,c,C={},M=p.pop();typeof M=="object"&&(C=M,M=p.pop()),QI(M,`createSelector expects an output function after the inputs, but received: [${typeof M}]`);const T={...a,...C},{memoize:U,memoizeOptions:z=[],argsMemoize:F=Z3,argsMemoizeOptions:V=[]}=T,$=Dw(z),G=Dw(V),Q=JI(p),ee=U(function(){return y++,M.apply(null,arguments)},...$),ae=F(function(){g++;const ve=e8(Q,arguments);return c=ee.apply(null,ve),c},...G);return Object.assign(ae,{resultFunc:M,memoizedResultFunc:ee,dependencies:Q,dependencyRecomputations:()=>g,resetDependencyRecomputations:()=>{g=0},lastResult:()=>c,recomputations:()=>y,resetRecomputations:()=>{y=0},memoize:U,argsMemoize:F})};return Object.assign(i,{withTypes:()=>i}),i}var at=a8(Z3),i8=Object.assign((e,r=at)=>{XI(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const a=Object.keys(e),i=a.map(y=>e[y]);return r(i,(...y)=>y.reduce((g,c,C)=>(g[a[C]]=c,g),{}))},{withTypes:()=>i8}),x_={},S_={},w_={},Tw;function o8(){return Tw||(Tw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(i){return typeof i=="symbol"?1:i===null?2:i===void 0?3:i!==i?4:0}const a=(i,p,y)=>{if(i!==p){const g=r(i),c=r(p);if(g===c&&g===0){if(i<p)return y==="desc"?1:-1;if(i>p)return y==="desc"?-1:1}return y==="desc"?c-g:g-c}return 0};e.compareValues=a})(w_)),w_}var P_={},A_={},Ew;function Y3(){return Ew||(Ew=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return typeof a=="symbol"||a instanceof Symbol}e.isSymbol=r})(A_)),A_}var Rw;function s8(){return Rw||(Rw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=Y3(),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function p(y,g){return Array.isArray(y)?!1:typeof y=="number"||typeof y=="boolean"||y==null||r.isSymbol(y)?!0:typeof y=="string"&&(i.test(y)||!a.test(y))||g!=null&&Object.hasOwn(g,y)}e.isKey=p})(P_)),P_}var Iw;function l8(){return Iw||(Iw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=o8(),a=s8(),i=Tx();function p(y,g,c,C){if(y==null)return[];c=C?void 0:c,Array.isArray(y)||(y=Object.values(y)),Array.isArray(g)||(g=g==null?[null]:[g]),g.length===0&&(g=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(F=>String(F));const M=(F,V)=>{let $=F;for(let G=0;G<V.length&&$!=null;++G)$=$[V[G]];return $},T=(F,V)=>V==null||F==null?V:typeof F=="object"&&"key"in F?Object.hasOwn(V,F.key)?V[F.key]:M(V,F.path):typeof F=="function"?F(V):Array.isArray(F)?M(V,F):typeof V=="object"?V[F]:V,U=g.map(F=>(Array.isArray(F)&&F.length===1&&(F=F[0]),F==null||typeof F=="function"||Array.isArray(F)||a.isKey(F)?F:{key:F,path:i.toPath(F)}));return y.map(F=>({original:F,criteria:U.map(V=>T(V,F))})).slice().sort((F,V)=>{for(let $=0;$<U.length;$++){const G=r.compareValues(F.criteria[$],V.criteria[$],c[$]);if(G!==0)return G}return 0}).map(F=>F.original)}e.orderBy=p})(S_)),S_}var C_={},kw;function u8(){return kw||(kw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a,i=1){const p=[],y=Math.floor(i),g=(c,C)=>{for(let M=0;M<c.length;M++){const T=c[M];Array.isArray(T)&&C<y?g(T,C+1):p.push(T)}};return g(a,0),p}e.flatten=r})(C_)),C_}var D_={},Uw;function Q3(){return Uw||(Uw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=W3(),a=Lx(),i=B3(),p=H3();function y(g,c,C){return i.isObject(C)&&(typeof c=="number"&&a.isArrayLike(C)&&r.isIndex(c)&&c<C.length||typeof c=="string"&&c in C)?p.eq(C[c],g):!1}e.isIterateeCall=y})(D_)),D_}var Ow;function c8(){return Ow||(Ow=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=l8(),a=u8(),i=Q3();function p(y,...g){const c=g.length;return c>1&&i.isIterateeCall(y,g[0],g[1])?g=[]:c>2&&i.isIterateeCall(g[0],g[1],g[2])&&(g=[g[0]]),r.orderBy(y,a.flatten(g),["asc"])}e.sortBy=p})(x_)),x_}var M_,Lw;function h8(){return Lw||(Lw=1,M_=c8().sortBy),M_}var f8=h8();const Fv=iu(f8);var X3=e=>e.legend.settings,d8=e=>e.legend.size,p8=e=>e.legend.payload;at([p8,X3],(e,r)=>{var{itemSorter:a}=r,i=e.flat(1);return a?Fv(i,a):i});var v0=1;function m8(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[r,a]=Y.useState({height:0,left:0,top:0,width:0}),i=Y.useCallback(p=>{if(p!=null){var y=p.getBoundingClientRect(),g={height:y.height,left:y.left,top:y.top,width:y.width};(Math.abs(g.height-r.height)>v0||Math.abs(g.left-r.left)>v0||Math.abs(g.top-r.top)>v0||Math.abs(g.width-r.width)>v0)&&a({height:g.height,left:g.left,top:g.top,width:g.width})}},[r.width,r.height,r.top,r.left,...e]);return[r,i]}function qi(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var y8=typeof Symbol=="function"&&Symbol.observable||"@@observable",zw=y8,T_=()=>Math.random().toString(36).substring(7).split("").join("."),g8={INIT:`@@redux/INIT${T_()}`,REPLACE:`@@redux/REPLACE${T_()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${T_()}`},Q0=g8;function Nx(e){if(typeof e!="object"||e===null)return!1;let r=e;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r||Object.getPrototypeOf(e)===null}function K3(e,r,a){if(typeof e!="function")throw new Error(qi(2));if(typeof r=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(qi(0));if(typeof r=="function"&&typeof a>"u"&&(a=r,r=void 0),typeof a<"u"){if(typeof a!="function")throw new Error(qi(1));return a(K3)(e,r)}let i=e,p=r,y=new Map,g=y,c=0,C=!1;function M(){g===y&&(g=new Map,y.forEach((G,Q)=>{g.set(Q,G)}))}function T(){if(C)throw new Error(qi(3));return p}function U(G){if(typeof G!="function")throw new Error(qi(4));if(C)throw new Error(qi(5));let Q=!0;M();const ee=c++;return g.set(ee,G),function(){if(Q){if(C)throw new Error(qi(6));Q=!1,M(),g.delete(ee),y=null}}}function z(G){if(!Nx(G))throw new Error(qi(7));if(typeof G.type>"u")throw new Error(qi(8));if(typeof G.type!="string")throw new Error(qi(17));if(C)throw new Error(qi(9));try{C=!0,p=i(p,G)}finally{C=!1}return(y=g).forEach(ee=>{ee()}),G}function F(G){if(typeof G!="function")throw new Error(qi(10));i=G,z({type:Q0.REPLACE})}function V(){const G=U;return{subscribe(Q){if(typeof Q!="object"||Q===null)throw new Error(qi(11));function ee(){const _e=Q;_e.next&&_e.next(T())}return ee(),{unsubscribe:G(ee)}},[zw](){return this}}}return z({type:Q0.INIT}),{dispatch:z,subscribe:U,getState:T,replaceReducer:F,[zw]:V}}function v8(e){Object.keys(e).forEach(r=>{const a=e[r];if(typeof a(void 0,{type:Q0.INIT})>"u")throw new Error(qi(12));if(typeof a(void 0,{type:Q0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(qi(13))})}function J3(e){const r=Object.keys(e),a={};for(let y=0;y<r.length;y++){const g=r[y];typeof e[g]=="function"&&(a[g]=e[g])}const i=Object.keys(a);let p;try{v8(a)}catch(y){p=y}return function(g={},c){if(p)throw p;let C=!1;const M={};for(let T=0;T<i.length;T++){const U=i[T],z=a[U],F=g[U],V=z(F,c);if(typeof V>"u")throw c&&c.type,new Error(qi(14));M[U]=V,C=C||V!==F}return C=C||i.length!==Object.keys(g).length,C?M:g}}function X0(...e){return e.length===0?r=>r:e.length===1?e[0]:e.reduce((r,a)=>(...i)=>r(a(...i)))}function _8(...e){return r=>(a,i)=>{const p=r(a,i);let y=()=>{throw new Error(qi(15))};const g={getState:p.getState,dispatch:(C,...M)=>y(C,...M)},c=e.map(C=>C(g));return y=X0(...c)(p.dispatch),{...p,dispatch:y}}}function eD(e){return Nx(e)&&"type"in e&&typeof e.type=="string"}var tD=Symbol.for("immer-nothing"),Fw=Symbol.for("immer-draftable"),Ts=Symbol.for("immer-state");function eu(e,...r){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Hp=Object.getPrototypeOf;function Ud(e){return!!e&&!!e[Ts]}function ah(e){return e?rD(e)||Array.isArray(e)||!!e[Fw]||!!e.constructor?.[Fw]||tg(e)||jv(e):!1}var b8=Object.prototype.constructor.toString();function rD(e){if(!e||typeof e!="object")return!1;const r=Hp(e);if(r===null)return!0;const a=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return a===Object?!0:typeof a=="function"&&Function.toString.call(a)===b8}function K0(e,r){Nv(e)===0?Reflect.ownKeys(e).forEach(a=>{r(a,e[a],e)}):e.forEach((a,i)=>r(i,a,e))}function Nv(e){const r=e[Ts];return r?r.type_:Array.isArray(e)?1:tg(e)?2:jv(e)?3:0}function Tb(e,r){return Nv(e)===2?e.has(r):Object.prototype.hasOwnProperty.call(e,r)}function nD(e,r,a){const i=Nv(e);i===2?e.set(r,a):i===3?e.add(a):e[r]=a}function x8(e,r){return e===r?e!==0||1/e===1/r:e!==e&&r!==r}function tg(e){return e instanceof Map}function jv(e){return e instanceof Set}function Pd(e){return e.copy_||e.base_}function Eb(e,r){if(tg(e))return new Map(e);if(jv(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const a=rD(e);if(r===!0||r==="class_only"&&!a){const i=Object.getOwnPropertyDescriptors(e);delete i[Ts];let p=Reflect.ownKeys(i);for(let y=0;y<p.length;y++){const g=p[y],c=i[g];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(i[g]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[g]})}return Object.create(Hp(e),i)}else{const i=Hp(e);if(i!==null&&a)return{...e};const p=Object.create(i);return Object.assign(p,e)}}function jx(e,r=!1){return Bv(e)||Ud(e)||!ah(e)||(Nv(e)>1&&Object.defineProperties(e,{set:{value:_0},add:{value:_0},clear:{value:_0},delete:{value:_0}}),Object.freeze(e),r&&Object.values(e).forEach(a=>jx(a,!0))),e}function _0(){eu(2)}function Bv(e){return Object.isFrozen(e)}var S8={};function Od(e){const r=S8[e];return r||eu(0,e),r}var jy;function aD(){return jy}function w8(e,r){return{drafts_:[],parent_:e,immer_:r,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Nw(e,r){r&&(Od("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=r)}function Rb(e){Ib(e),e.drafts_.forEach(P8),e.drafts_=null}function Ib(e){e===jy&&(jy=e.parent_)}function jw(e){return jy=w8(jy,e)}function P8(e){const r=e[Ts];r.type_===0||r.type_===1?r.revoke_():r.revoked_=!0}function Bw(e,r){r.unfinalizedDrafts_=r.drafts_.length;const a=r.drafts_[0];return e!==void 0&&e!==a?(a[Ts].modified_&&(Rb(r),eu(4)),ah(e)&&(e=J0(r,e),r.parent_||ev(r,e)),r.patches_&&Od("Patches").generateReplacementPatches_(a[Ts].base_,e,r.patches_,r.inversePatches_)):e=J0(r,a,[]),Rb(r),r.patches_&&r.patchListener_(r.patches_,r.inversePatches_),e!==tD?e:void 0}function J0(e,r,a){if(Bv(r))return r;const i=r[Ts];if(!i)return K0(r,(p,y)=>qw(e,i,r,p,y,a)),r;if(i.scope_!==e)return r;if(!i.modified_)return ev(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const p=i.copy_;let y=p,g=!1;i.type_===3&&(y=new Set(p),p.clear(),g=!0),K0(y,(c,C)=>qw(e,i,p,c,C,a,g)),ev(e,p,!1),a&&e.patches_&&Od("Patches").generatePatches_(i,a,e.patches_,e.inversePatches_)}return i.copy_}function qw(e,r,a,i,p,y,g){if(Ud(p)){const c=y&&r&&r.type_!==3&&!Tb(r.assigned_,i)?y.concat(i):void 0,C=J0(e,p,c);if(nD(a,i,C),Ud(C))e.canAutoFreeze_=!1;else return}else g&&a.add(p);if(ah(p)&&!Bv(p)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;J0(e,p),(!r||!r.scope_.parent_)&&typeof i!="symbol"&&(tg(a)?a.has(i):Object.prototype.propertyIsEnumerable.call(a,i))&&ev(e,p)}}function ev(e,r,a=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&jx(r,a)}function A8(e,r){const a=Array.isArray(e),i={type_:a?1:0,scope_:r?r.scope_:aD(),modified_:!1,finalized_:!1,assigned_:{},parent_:r,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let p=i,y=Bx;a&&(p=[i],y=By);const{revoke:g,proxy:c}=Proxy.revocable(p,y);return i.draft_=c,i.revoke_=g,c}var Bx={get(e,r){if(r===Ts)return e;const a=Pd(e);if(!Tb(a,r))return C8(e,a,r);const i=a[r];return e.finalized_||!ah(i)?i:i===E_(e.base_,r)?(R_(e),e.copy_[r]=Ub(i,e)):i},has(e,r){return r in Pd(e)},ownKeys(e){return Reflect.ownKeys(Pd(e))},set(e,r,a){const i=iD(Pd(e),r);if(i?.set)return i.set.call(e.draft_,a),!0;if(!e.modified_){const p=E_(Pd(e),r),y=p?.[Ts];if(y&&y.base_===a)return e.copy_[r]=a,e.assigned_[r]=!1,!0;if(x8(a,p)&&(a!==void 0||Tb(e.base_,r)))return!0;R_(e),kb(e)}return e.copy_[r]===a&&(a!==void 0||r in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[r])||(e.copy_[r]=a,e.assigned_[r]=!0),!0},deleteProperty(e,r){return E_(e.base_,r)!==void 0||r in e.base_?(e.assigned_[r]=!1,R_(e),kb(e)):delete e.assigned_[r],e.copy_&&delete e.copy_[r],!0},getOwnPropertyDescriptor(e,r){const a=Pd(e),i=Reflect.getOwnPropertyDescriptor(a,r);return i&&{writable:!0,configurable:e.type_!==1||r!=="length",enumerable:i.enumerable,value:a[r]}},defineProperty(){eu(11)},getPrototypeOf(e){return Hp(e.base_)},setPrototypeOf(){eu(12)}},By={};K0(Bx,(e,r)=>{By[e]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}});By.deleteProperty=function(e,r){return By.set.call(this,e,r,void 0)};By.set=function(e,r,a){return Bx.set.call(this,e[0],r,a,e[0])};function E_(e,r){const a=e[Ts];return(a?Pd(a):e)[r]}function C8(e,r,a){const i=iD(r,a);return i?"value"in i?i.value:i.get?.call(e.draft_):void 0}function iD(e,r){if(!(r in e))return;let a=Hp(e);for(;a;){const i=Object.getOwnPropertyDescriptor(a,r);if(i)return i;a=Hp(a)}}function kb(e){e.modified_||(e.modified_=!0,e.parent_&&kb(e.parent_))}function R_(e){e.copy_||(e.copy_=Eb(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var D8=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(r,a,i)=>{if(typeof r=="function"&&typeof a!="function"){const y=a;a=r;const g=this;return function(C=y,...M){return g.produce(C,T=>a.call(this,T,...M))}}typeof a!="function"&&eu(6),i!==void 0&&typeof i!="function"&&eu(7);let p;if(ah(r)){const y=jw(this),g=Ub(r,void 0);let c=!0;try{p=a(g),c=!1}finally{c?Rb(y):Ib(y)}return Nw(y,i),Bw(p,y)}else if(!r||typeof r!="object"){if(p=a(r),p===void 0&&(p=r),p===tD&&(p=void 0),this.autoFreeze_&&jx(p,!0),i){const y=[],g=[];Od("Patches").generateReplacementPatches_(r,p,y,g),i(y,g)}return p}else eu(1,r)},this.produceWithPatches=(r,a)=>{if(typeof r=="function")return(g,...c)=>this.produceWithPatches(g,C=>r(C,...c));let i,p;return[this.produce(r,a,(g,c)=>{i=g,p=c}),i,p]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ah(e)||eu(8),Ud(e)&&(e=rh(e));const r=jw(this),a=Ub(e,void 0);return a[Ts].isManual_=!0,Ib(r),a}finishDraft(e,r){const a=e&&e[Ts];(!a||!a.isManual_)&&eu(9);const{scope_:i}=a;return Nw(i,r),Bw(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,r){let a;for(a=r.length-1;a>=0;a--){const p=r[a];if(p.path.length===0&&p.op==="replace"){e=p.value;break}}a>-1&&(r=r.slice(a+1));const i=Od("Patches").applyPatches_;return Ud(e)?i(e,r):this.produce(e,p=>i(p,r))}};function Ub(e,r){const a=tg(e)?Od("MapSet").proxyMap_(e,r):jv(e)?Od("MapSet").proxySet_(e,r):A8(e,r);return(r?r.scope_:aD()).drafts_.push(a),a}function rh(e){return Ud(e)||eu(10,e),oD(e)}function oD(e){if(!ah(e)||Bv(e))return e;const r=e[Ts];let a;if(r){if(!r.modified_)return r.base_;r.finalized_=!0,a=Eb(e,r.scope_.immer_.useStrictShallowCopy_)}else a=Eb(e,!0);return K0(a,(i,p)=>{nD(a,i,oD(p))}),r&&(r.finalized_=!1),a}var M8=new D8,sD=M8.produce;function lD(e){return({dispatch:a,getState:i})=>p=>y=>typeof y=="function"?y(a,i,e):p(y)}var T8=lD(),E8=lD,R8=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?X0:X0.apply(null,arguments)};function sl(e,r){function a(...i){if(r){let p=r(...i);if(!p)throw new Error(Ms(0));return{type:e,payload:p.payload,..."meta"in p&&{meta:p.meta},..."error"in p&&{error:p.error}}}return{type:e,payload:i[0]}}return a.toString=()=>`${e}`,a.type=e,a.match=i=>eD(i)&&i.type===e,a}var uD=class Ty extends Array{constructor(...r){super(...r),Object.setPrototypeOf(this,Ty.prototype)}static get[Symbol.species](){return Ty}concat(...r){return super.concat.apply(this,r)}prepend(...r){return r.length===1&&Array.isArray(r[0])?new Ty(...r[0].concat(this)):new Ty(...r.concat(this))}};function Hw(e){return ah(e)?sD(e,()=>{}):e}function b0(e,r,a){return e.has(r)?e.get(r):e.set(r,a(r)).get(r)}function I8(e){return typeof e=="boolean"}var k8=()=>function(r){const{thunk:a=!0,immutableCheck:i=!0,serializableCheck:p=!0,actionCreatorCheck:y=!0}=r??{};let g=new uD;return a&&(I8(a)?g.push(T8):g.push(E8(a.extraArgument))),g},U8="RTK_autoBatch",$w=e=>r=>{setTimeout(r,e)},O8=(e={type:"raf"})=>r=>(...a)=>{const i=r(...a);let p=!0,y=!1,g=!1;const c=new Set,C=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:$w(10):e.type==="callback"?e.queueNotification:$w(e.timeout),M=()=>{g=!1,y&&(y=!1,c.forEach(T=>T()))};return Object.assign({},i,{subscribe(T){const U=()=>p&&T(),z=i.subscribe(U);return c.add(T),()=>{z(),c.delete(T)}},dispatch(T){try{return p=!T?.meta?.[U8],y=!p,y&&(g||(g=!0,C(M))),i.dispatch(T)}finally{p=!0}}})},L8=e=>function(a){const{autoBatch:i=!0}=a??{};let p=new uD(e);return i&&p.push(O8(typeof i=="object"?i:void 0)),p};function z8(e){const r=k8(),{reducer:a=void 0,middleware:i,devTools:p=!0,preloadedState:y=void 0,enhancers:g=void 0}=e||{};let c;if(typeof a=="function")c=a;else if(Nx(a))c=J3(a);else throw new Error(Ms(1));let C;typeof i=="function"?C=i(r):C=r();let M=X0;p&&(M=R8({trace:!1,...typeof p=="object"&&p}));const T=_8(...C),U=L8(T);let z=typeof g=="function"?g(U):U();const F=M(...z);return K3(c,y,F)}function cD(e){const r={},a=[];let i;const p={addCase(y,g){const c=typeof y=="string"?y:y.type;if(!c)throw new Error(Ms(28));if(c in r)throw new Error(Ms(29));return r[c]=g,p},addAsyncThunk(y,g){return g.pending&&(r[y.pending.type]=g.pending),g.rejected&&(r[y.rejected.type]=g.rejected),g.fulfilled&&(r[y.fulfilled.type]=g.fulfilled),g.settled&&a.push({matcher:y.settled,reducer:g.settled}),p},addMatcher(y,g){return a.push({matcher:y,reducer:g}),p},addDefaultCase(y){return i=y,p}};return e(p),[r,a,i]}function F8(e){return typeof e=="function"}function N8(e,r){let[a,i,p]=cD(r),y;if(F8(e))y=()=>Hw(e());else{const c=Hw(e);y=()=>c}function g(c=y(),C){let M=[a[C.type],...i.filter(({matcher:T})=>T(C)).map(({reducer:T})=>T)];return M.filter(T=>!!T).length===0&&(M=[p]),M.reduce((T,U)=>{if(U)if(Ud(T)){const F=U(T,C);return F===void 0?T:F}else{if(ah(T))return sD(T,z=>U(z,C));{const z=U(T,C);if(z===void 0){if(T===null)return T;throw Error("A case reducer on a non-draftable value must not return undefined")}return z}}return T},c)}return g.getInitialState=y,g}var j8="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",B8=(e=21)=>{let r="",a=e;for(;a--;)r+=j8[Math.random()*64|0];return r},q8=Symbol.for("rtk-slice-createasyncthunk");function H8(e,r){return`${e}/${r}`}function $8({creators:e}={}){const r=e?.asyncThunk?.[q8];return function(i){const{name:p,reducerPath:y=p}=i;if(!p)throw new Error(Ms(11));const g=(typeof i.reducers=="function"?i.reducers(G8()):i.reducers)||{},c=Object.keys(g),C={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},M={addCase(ae,_e){const ve=typeof ae=="string"?ae:ae.type;if(!ve)throw new Error(Ms(12));if(ve in C.sliceCaseReducersByType)throw new Error(Ms(13));return C.sliceCaseReducersByType[ve]=_e,M},addMatcher(ae,_e){return C.sliceMatchers.push({matcher:ae,reducer:_e}),M},exposeAction(ae,_e){return C.actionCreators[ae]=_e,M},exposeCaseReducer(ae,_e){return C.sliceCaseReducersByName[ae]=_e,M}};c.forEach(ae=>{const _e=g[ae],ve={reducerName:ae,type:H8(p,ae),createNotation:typeof i.reducers=="function"};Z8(_e)?Q8(ve,_e,M,r):W8(ve,_e,M)});function T(){const[ae={},_e=[],ve=void 0]=typeof i.extraReducers=="function"?cD(i.extraReducers):[i.extraReducers],Ae={...ae,...C.sliceCaseReducersByType};return N8(i.initialState,Ee=>{for(let Fe in Ae)Ee.addCase(Fe,Ae[Fe]);for(let Fe of C.sliceMatchers)Ee.addMatcher(Fe.matcher,Fe.reducer);for(let Fe of _e)Ee.addMatcher(Fe.matcher,Fe.reducer);ve&&Ee.addDefaultCase(ve)})}const U=ae=>ae,z=new Map,F=new WeakMap;let V;function $(ae,_e){return V||(V=T()),V(ae,_e)}function G(){return V||(V=T()),V.getInitialState()}function Q(ae,_e=!1){function ve(Ee){let Fe=Ee[ae];return typeof Fe>"u"&&_e&&(Fe=b0(F,ve,G)),Fe}function Ae(Ee=U){const Fe=b0(z,_e,()=>new WeakMap);return b0(Fe,Ee,()=>{const ht={};for(const[At,ot]of Object.entries(i.selectors??{}))ht[At]=V8(ot,Ee,()=>b0(F,Ee,G),_e);return ht})}return{reducerPath:ae,getSelectors:Ae,get selectors(){return Ae(ve)},selectSlice:ve}}const ee={name:p,reducer:$,actions:C.actionCreators,caseReducers:C.sliceCaseReducersByName,getInitialState:G,...Q(y),injectInto(ae,{reducerPath:_e,...ve}={}){const Ae=_e??y;return ae.inject({reducerPath:Ae,reducer:$},ve),{...ee,...Q(Ae,!0)}}};return ee}}function V8(e,r,a,i){function p(y,...g){let c=r(y);return typeof c>"u"&&i&&(c=a()),e(c,...g)}return p.unwrapped=e,p}var Rs=$8();function G8(){function e(r,a){return{_reducerDefinitionType:"asyncThunk",payloadCreator:r,...a}}return e.withTypes=()=>e,{reducer(r){return Object.assign({[r.name](...a){return r(...a)}}[r.name],{_reducerDefinitionType:"reducer"})},preparedReducer(r,a){return{_reducerDefinitionType:"reducerWithPrepare",prepare:r,reducer:a}},asyncThunk:e}}function W8({type:e,reducerName:r,createNotation:a},i,p){let y,g;if("reducer"in i){if(a&&!Y8(i))throw new Error(Ms(17));y=i.reducer,g=i.prepare}else y=i;p.addCase(e,y).exposeCaseReducer(r,y).exposeAction(r,g?sl(e,g):sl(e))}function Z8(e){return e._reducerDefinitionType==="asyncThunk"}function Y8(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Q8({type:e,reducerName:r},a,i,p){if(!p)throw new Error(Ms(18));const{payloadCreator:y,fulfilled:g,pending:c,rejected:C,settled:M,options:T}=a,U=p(e,y,T);i.exposeAction(r,U),g&&i.addCase(U.fulfilled,g),c&&i.addCase(U.pending,c),C&&i.addCase(U.rejected,C),M&&i.addMatcher(U.settled,M),i.exposeCaseReducer(r,{fulfilled:g||x0,pending:c||x0,rejected:C||x0,settled:M||x0})}function x0(){}var X8="task",hD="listener",fD="completed",qx="cancelled",K8=`task-${qx}`,J8=`task-${fD}`,Ob=`${hD}-${qx}`,e7=`${hD}-${fD}`,qv=class{constructor(e){this.code=e,this.message=`${X8} ${qx} (reason: ${e})`}name="TaskAbortError";message},Hx=(e,r)=>{if(typeof e!="function")throw new TypeError(Ms(32))},tv=()=>{},dD=(e,r=tv)=>(e.catch(r),e),pD=(e,r)=>(e.addEventListener("abort",r,{once:!0}),()=>e.removeEventListener("abort",r)),Td=(e,r)=>{const a=e.signal;a.aborted||("reason"in a||Object.defineProperty(a,"reason",{enumerable:!0,value:r,configurable:!0,writable:!0}),e.abort(r))},Ed=e=>{if(e.aborted){const{reason:r}=e;throw new qv(r)}};function mD(e,r){let a=tv;return new Promise((i,p)=>{const y=()=>p(new qv(e.reason));if(e.aborted){y();return}a=pD(e,y),r.finally(()=>a()).then(i,p)}).finally(()=>{a=tv})}var t7=async(e,r)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(a){return{status:a instanceof qv?"cancelled":"rejected",error:a}}finally{r?.()}},rv=e=>r=>dD(mD(e,r).then(a=>(Ed(e),a))),yD=e=>{const r=rv(e);return a=>r(new Promise(i=>setTimeout(i,a)))},{assign:zp}=Object,Vw={},Hv="listenerMiddleware",r7=(e,r)=>{const a=i=>pD(e,()=>Td(i,e.reason));return(i,p)=>{Hx(i);const y=new AbortController;a(y);const g=t7(async()=>{Ed(e),Ed(y.signal);const c=await i({pause:rv(y.signal),delay:yD(y.signal),signal:y.signal});return Ed(y.signal),c},()=>Td(y,J8));return p?.autoJoin&&r.push(g.catch(tv)),{result:rv(e)(g),cancel(){Td(y,K8)}}}},n7=(e,r)=>{const a=async(i,p)=>{Ed(r);let y=()=>{};const c=[new Promise((C,M)=>{let T=e({predicate:i,effect:(U,z)=>{z.unsubscribe(),C([U,z.getState(),z.getOriginalState()])}});y=()=>{T(),M()}})];p!=null&&c.push(new Promise(C=>setTimeout(C,p,null)));try{const C=await mD(r,Promise.race(c));return Ed(r),C}finally{y()}};return(i,p)=>dD(a(i,p))},gD=e=>{let{type:r,actionCreator:a,matcher:i,predicate:p,effect:y}=e;if(r)p=sl(r).match;else if(a)r=a.type,p=a.match;else if(i)p=i;else if(!p)throw new Error(Ms(21));return Hx(y),{predicate:p,type:r,effect:y}},vD=zp(e=>{const{type:r,predicate:a,effect:i}=gD(e);return{id:B8(),effect:i,type:r,predicate:a,pending:new Set,unsubscribe:()=>{throw new Error(Ms(22))}}},{withTypes:()=>vD}),Gw=(e,r)=>{const{type:a,effect:i,predicate:p}=gD(r);return Array.from(e.values()).find(y=>(typeof a=="string"?y.type===a:y.predicate===p)&&y.effect===i)},Lb=e=>{e.pending.forEach(r=>{Td(r,Ob)})},a7=e=>()=>{e.forEach(Lb),e.clear()},Ww=(e,r,a)=>{try{e(r,a)}catch(i){setTimeout(()=>{throw i},0)}},_D=zp(sl(`${Hv}/add`),{withTypes:()=>_D}),i7=sl(`${Hv}/removeAll`),bD=zp(sl(`${Hv}/remove`),{withTypes:()=>bD}),o7=(...e)=>{console.error(`${Hv}/error`,...e)},rg=(e={})=>{const r=new Map,{extra:a,onError:i=o7}=e;Hx(i);const p=T=>(T.unsubscribe=()=>r.delete(T.id),r.set(T.id,T),U=>{T.unsubscribe(),U?.cancelActive&&Lb(T)}),y=T=>{const U=Gw(r,T)??vD(T);return p(U)};zp(y,{withTypes:()=>y});const g=T=>{const U=Gw(r,T);return U&&(U.unsubscribe(),T.cancelActive&&Lb(U)),!!U};zp(g,{withTypes:()=>g});const c=async(T,U,z,F)=>{const V=new AbortController,$=n7(y,V.signal),G=[];try{T.pending.add(V),await Promise.resolve(T.effect(U,zp({},z,{getOriginalState:F,condition:(Q,ee)=>$(Q,ee).then(Boolean),take:$,delay:yD(V.signal),pause:rv(V.signal),extra:a,signal:V.signal,fork:r7(V.signal,G),unsubscribe:T.unsubscribe,subscribe:()=>{r.set(T.id,T)},cancelActiveListeners:()=>{T.pending.forEach((Q,ee,ae)=>{Q!==V&&(Td(Q,Ob),ae.delete(Q))})},cancel:()=>{Td(V,Ob),T.pending.delete(V)},throwIfCancelled:()=>{Ed(V.signal)}})))}catch(Q){Q instanceof qv||Ww(i,Q,{raisedBy:"effect"})}finally{await Promise.all(G),Td(V,e7),T.pending.delete(V)}},C=a7(r);return{middleware:T=>U=>z=>{if(!eD(z))return U(z);if(_D.match(z))return y(z.payload);if(i7.match(z)){C();return}if(bD.match(z))return g(z.payload);let F=T.getState();const V=()=>{if(F===Vw)throw new Error(Ms(23));return F};let $;try{if($=U(z),r.size>0){const G=T.getState(),Q=Array.from(r.values());for(const ee of Q){let ae=!1;try{ae=ee.predicate(z,G,F)}catch(_e){ae=!1,Ww(i,_e,{raisedBy:"predicate"})}ae&&c(ee,z,T,V)}}}finally{F=Vw}return $},startListening:y,stopListening:g,clearListeners:C}};function Ms(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var s7={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},xD=Rs({name:"chartLayout",initialState:s7,reducers:{setLayout(e,r){e.layoutType=r.payload},setChartSize(e,r){e.width=r.payload.width,e.height=r.payload.height},setMargin(e,r){var a,i,p,y;e.margin.top=(a=r.payload.top)!==null&&a!==void 0?a:0,e.margin.right=(i=r.payload.right)!==null&&i!==void 0?i:0,e.margin.bottom=(p=r.payload.bottom)!==null&&p!==void 0?p:0,e.margin.left=(y=r.payload.left)!==null&&y!==void 0?y:0},setScale(e,r){e.scale=r.payload}}}),{setMargin:l7,setLayout:u7,setChartSize:c7,setScale:h7}=xD.actions,f7=xD.reducer;function Zw(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function Yw(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Zw(Object(a),!0).forEach(function(i){d7(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Zw(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function d7(e,r,a){return(r=p7(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function p7(e){var r=m7(e,"string");return typeof r=="symbol"?r:r+""}function m7(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var nv=Math.PI/180,y7=e=>e*180/Math.PI,$i=(e,r,a,i)=>({x:e+Math.cos(-nv*i)*a,y:r+Math.sin(-nv*i)*a}),g7=function(r,a){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(r-(i.left||0)-(i.right||0)),Math.abs(a-(i.top||0)-(i.bottom||0)))/2},v7=(e,r)=>{var{x:a,y:i}=e,{x:p,y}=r;return Math.sqrt((a-p)**2+(i-y)**2)},_7=(e,r)=>{var{x:a,y:i}=e,{cx:p,cy:y}=r,g=v7({x:a,y:i},{x:p,y});if(g<=0)return{radius:g,angle:0};var c=(a-p)/g,C=Math.acos(c);return i>y&&(C=2*Math.PI-C),{radius:g,angle:y7(C),angleInRadian:C}},b7=e=>{var{startAngle:r,endAngle:a}=e,i=Math.floor(r/360),p=Math.floor(a/360),y=Math.min(i,p);return{startAngle:r-y*360,endAngle:a-y*360}},x7=(e,r)=>{var{startAngle:a,endAngle:i}=r,p=Math.floor(a/360),y=Math.floor(i/360),g=Math.min(p,y);return e+g*360},S7=(e,r)=>{var{x:a,y:i}=e,{radius:p,angle:y}=_7({x:a,y:i},r),{innerRadius:g,outerRadius:c}=r;if(p<g||p>c||p===0)return null;var{startAngle:C,endAngle:M}=b7(r),T=y,U;if(C<=M){for(;T>M;)T-=360;for(;T<C;)T+=360;U=T>=C&&T<=M}else{for(;T>C;)T-=360;for(;T<M;)T+=360;U=T>=M&&T<=C}return U?Yw(Yw({},r),{},{radius:p,angle:x7(T,r)}):null};function SD(e,r,a){return Array.isArray(e)&&e&&r+a!==0?e.slice(r,a+1):e}function Qw(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function al(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Qw(Object(a),!0).forEach(function(i){w7(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qw(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function w7(e,r,a){return(r=P7(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function P7(e){var r=A7(e,"string");return typeof r=="symbol"?r:r+""}function A7(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Co(e,r,a){return wi(e)||wi(r)?a:ac(r)?Bp(e,r,a):typeof r=="function"?r(e):a}var C7=(e,r,a,i,p)=>{var y,g=-1,c=(y=r?.length)!==null&&y!==void 0?y:0;if(c<=1||e==null)return 0;if(i==="angleAxis"&&p!=null&&Math.abs(Math.abs(p[1]-p[0])-360)<=1e-6)for(var C=0;C<c;C++){var M=C>0?a[C-1].coordinate:a[c-1].coordinate,T=a[C].coordinate,U=C>=c-1?a[0].coordinate:a[C+1].coordinate,z=void 0;if(Ds(T-M)!==Ds(U-T)){var F=[];if(Ds(U-T)===Ds(p[1]-p[0])){z=U;var V=T+p[1]-p[0];F[0]=Math.min(V,(V+M)/2),F[1]=Math.max(V,(V+M)/2)}else{z=M;var $=U+p[1]-p[0];F[0]=Math.min(T,($+T)/2),F[1]=Math.max(T,($+T)/2)}var G=[Math.min(T,(z+T)/2),Math.max(T,(z+T)/2)];if(e>G[0]&&e<=G[1]||e>=F[0]&&e<=F[1]){({index:g}=a[C]);break}}else{var Q=Math.min(M,U),ee=Math.max(M,U);if(e>(Q+T)/2&&e<=(ee+T)/2){({index:g}=a[C]);break}}}else if(r){for(var ae=0;ae<c;ae++)if(ae===0&&e<=(r[ae].coordinate+r[ae+1].coordinate)/2||ae>0&&ae<c-1&&e>(r[ae].coordinate+r[ae-1].coordinate)/2&&e<=(r[ae].coordinate+r[ae+1].coordinate)/2||ae===c-1&&e>(r[ae].coordinate+r[ae-1].coordinate)/2){({index:g}=r[ae]);break}}return g},D7=(e,r,a)=>{if(r&&a){var{width:i,height:p}=a,{align:y,verticalAlign:g,layout:c}=r;if((c==="vertical"||c==="horizontal"&&g==="middle")&&y!=="center"&&Pr(e[y]))return al(al({},e),{},{[y]:e[y]+(i||0)});if((c==="horizontal"||c==="vertical"&&y==="center")&&g!=="middle"&&Pr(e[g]))return al(al({},e),{},{[g]:e[g]+(p||0)})}return e},Nd=(e,r)=>e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis",Xw=1e-4,M7=e=>{var r=e.domain();if(!(!r||r.length<=2)){var a=r.length,i=e.range(),p=Math.min(i[0],i[1])-Xw,y=Math.max(i[0],i[1])+Xw,g=e(r[0]),c=e(r[a-1]);(g<p||g>y||c<p||c>y)&&e.domain([r[0],r[a-1]])}},T7=(e,r)=>{if(!r||r.length!==2||!Pr(r[0])||!Pr(r[1]))return e;var a=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),p=[e[0],e[1]];return(!Pr(e[0])||e[0]<a)&&(p[0]=a),(!Pr(e[1])||e[1]>i)&&(p[1]=i),p[0]>i&&(p[0]=i),p[1]<a&&(p[1]=a),p},E7=e=>{var r=e.length;if(!(r<=0))for(var a=0,i=e[0].length;a<i;++a)for(var p=0,y=0,g=0;g<r;++g){var c=ol(e[g][a][1])?e[g][a][0]:e[g][a][1];c>=0?(e[g][a][0]=p,e[g][a][1]=p+c,p=e[g][a][1]):(e[g][a][0]=y,e[g][a][1]=y+c,y=e[g][a][1])}},R7=e=>{var r=e.length;if(!(r<=0))for(var a=0,i=e[0].length;a<i;++a)for(var p=0,y=0;y<r;++y){var g=ol(e[y][a][1])?e[y][a][0]:e[y][a][1];g>=0?(e[y][a][0]=p,e[y][a][1]=p+g,p=e[y][a][1]):(e[y][a][0]=0,e[y][a][1]=0)}},I7={sign:E7,expand:uI,none:qp,silhouette:cI,wiggle:hI,positive:R7},k7=(e,r,a)=>{var i=I7[a],p=lI().keys(r).value((y,g)=>+Co(y,g,0)).order(Db).offset(i);return p(e)};function U7(e){return e==null?void 0:String(e)}var Kw=e=>{var{axis:r,ticks:a,offset:i,bandSize:p,entry:y,index:g}=e;if(r.type==="category")return a[g]?a[g].coordinate+i:null;var c=Co(y,r.dataKey,r.scale.domain()[g]);return wi(c)?null:r.scale(c)-p/2+i},O7=e=>{var{numericAxis:r}=e,a=r.scale.domain();if(r.type==="number"){var i=Math.min(a[0],a[1]),p=Math.max(a[0],a[1]);return i<=0&&p>=0?0:p<0?p:i}return a[0]},L7=e=>{var r=e.flat(2).filter(Pr);return[Math.min(...r),Math.max(...r)]},z7=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],F7=(e,r,a)=>{if(e!=null)return z7(Object.keys(e).reduce((i,p)=>{var y=e[p],{stackedData:g}=y,c=g.reduce((C,M)=>{var T=SD(M,r,a),U=L7(T);return[Math.min(C[0],U[0]),Math.max(C[1],U[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]))},Jw=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,eP=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,$x=(e,r,a)=>{if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!a||i>0)return i}if(e&&r&&r.length>=2){for(var p=Fv(r,T=>T.coordinate),y=1/0,g=1,c=p.length;g<c;g++){var C=p[g],M=p[g-1];y=Math.min((C.coordinate||0)-(M.coordinate||0),y)}return y===1/0?0:y}return a?void 0:0};function tP(e){var{tooltipEntrySettings:r,dataKey:a,payload:i,value:p,name:y}=e;return al(al({},r),{},{dataKey:a,payload:i,value:p,name:y})}function wD(e,r){if(e)return String(e);if(typeof r=="string")return r}function N7(e,r,a,i,p){if(a==="horizontal"||a==="vertical"){var y=e>=p.left&&e<=p.left+p.width&&r>=p.top&&r<=p.top+p.height;return y?{x:e,y:r}:null}return i?S7({x:e,y:r},i):null}var j7=(e,r,a,i)=>{var p=r.find(M=>M&&M.index===a);if(p){if(e==="horizontal")return{x:p.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:p.coordinate};if(e==="centric"){var y=p.coordinate,{radius:g}=i;return al(al(al({},i),$i(i.cx,i.cy,g,y)),{},{angle:y,radius:g})}var c=p.coordinate,{angle:C}=i;return al(al(al({},i),$i(i.cx,i.cy,c,C)),{},{angle:C,radius:c})}return{x:0,y:0}},B7=(e,r)=>r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius,lh=e=>e.layout.width,uh=e=>e.layout.height,q7=e=>e.layout.scale,PD=e=>e.layout.margin,$v=at(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Vv=at(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),H7="data-recharts-item-index",$7="data-recharts-item-data-key",ng=60;function rP(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function S0(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?rP(Object(a),!0).forEach(function(i){V7(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rP(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function V7(e,r,a){return(r=G7(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function G7(e){var r=W7(e,"string");return typeof r=="symbol"?r:r+""}function W7(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Z7=e=>e.brush.height;function Y7(e){var r=Vv(e);return r.reduce((a,i)=>{if(i.orientation==="left"&&!i.mirror&&!i.hide){var p=typeof i.width=="number"?i.width:ng;return a+p}return a},0)}function Q7(e){var r=Vv(e);return r.reduce((a,i)=>{if(i.orientation==="right"&&!i.mirror&&!i.hide){var p=typeof i.width=="number"?i.width:ng;return a+p}return a},0)}function X7(e){var r=$v(e);return r.reduce((a,i)=>i.orientation==="top"&&!i.mirror&&!i.hide?a+i.height:a,0)}function K7(e){var r=$v(e);return r.reduce((a,i)=>i.orientation==="bottom"&&!i.mirror&&!i.hide?a+i.height:a,0)}var Ai=at([lh,uh,PD,Z7,Y7,Q7,X7,K7,X3,d8],(e,r,a,i,p,y,g,c,C,M)=>{var T={left:(a.left||0)+p,right:(a.right||0)+y},U={top:(a.top||0)+g,bottom:(a.bottom||0)+c},z=S0(S0({},U),T),F=z.bottom;z.bottom+=i,z=D7(z,C,M);var V=e-z.left-z.right,$=r-z.top-z.bottom;return S0(S0({brushBottom:F},z),{},{width:Math.max(V,0),height:Math.max($,0)})}),J7=at(Ai,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Vx=at(lh,uh,(e,r)=>({x:0,y:0,width:e,height:r})),e9=Y.createContext(null),lu=()=>Y.useContext(e9)!=null,Gv=e=>e.brush,Wv=at([Gv,Ai,PD],(e,r,a)=>({height:e.height,x:Pr(e.x)?e.x:r.left,y:Pr(e.y)?e.y:r.top+r.height+r.brushBottom-(a?.bottom||0),width:Pr(e.width)?e.width:r.width})),Gx=()=>{var e,r=lu(),a=pr(J7),i=pr(Wv),p=(e=pr(Gv))===null||e===void 0?void 0:e.padding;return!r||!i||!p?a:{width:i.width-p.left-p.right,height:i.height-p.top-p.bottom,x:p.left,y:p.top}},t9={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},r9=()=>{var e;return(e=pr(Ai))!==null&&e!==void 0?e:t9},n9=()=>pr(lh),a9=()=>pr(uh),bn=e=>e.layout.layoutType,Wx=()=>pr(bn),i9={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},AD=Rs({name:"legend",initialState:i9,reducers:{setLegendSize(e,r){e.size.width=r.payload.width,e.size.height=r.payload.height},setLegendSettings(e,r){e.settings.align=r.payload.align,e.settings.layout=r.payload.layout,e.settings.verticalAlign=r.payload.verticalAlign,e.settings.itemSorter=r.payload.itemSorter},addLegendPayload(e,r){e.payload.push(r.payload)},removeLegendPayload(e,r){var a=rh(e).payload.indexOf(r.payload);a>-1&&e.payload.splice(a,1)}}}),{setLegendSize:tG,setLegendSettings:rG,addLegendPayload:o9,removeLegendPayload:s9}=AD.actions,l9=AD.reducer;function zb(){return zb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},zb.apply(null,arguments)}function nP(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function I_(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?nP(Object(a),!0).forEach(function(i){u9(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nP(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function u9(e,r,a){return(r=c9(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function c9(e){var r=h9(e,"string");return typeof r=="symbol"?r:r+""}function h9(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function f9(e){return Array.isArray(e)&&ac(e[0])&&ac(e[1])?e.join(" ~ "):e}var d9=e=>{var{separator:r=" : ",contentStyle:a={},itemStyle:i={},labelStyle:p={},payload:y,formatter:g,itemSorter:c,wrapperClassName:C,labelClassName:M,label:T,labelFormatter:U,accessibilityLayer:z=!1}=e,F=()=>{if(y&&y.length){var ve={padding:0,margin:0},Ae=(c?Fv(y,c):y).map((Ee,Fe)=>{if(Ee.type==="none")return null;var ht=Ee.formatter||g||f9,{value:At,name:ot}=Ee,ft=At,rt=ot;if(ht){var It=ht(At,ot,Ee,Fe,y);if(Array.isArray(It))[ft,rt]=It;else if(It!=null)ft=It;else return null}var Ut=I_({display:"block",paddingTop:4,paddingBottom:4,color:Ee.color||"#000"},i);return Y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Fe),style:Ut},ac(rt)?Y.createElement("span",{className:"recharts-tooltip-item-name"},rt):null,ac(rt)?Y.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Y.createElement("span",{className:"recharts-tooltip-item-value"},ft),Y.createElement("span",{className:"recharts-tooltip-item-unit"},Ee.unit||""))});return Y.createElement("ul",{className:"recharts-tooltip-item-list",style:ve},Ae)}return null},V=I_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),$=I_({margin:0},p),G=!wi(T),Q=G?T:"",ee=In("recharts-default-tooltip",C),ae=In("recharts-tooltip-label",M);G&&U&&y!==void 0&&y!==null&&(Q=U(T,y));var _e=z?{role:"status","aria-live":"assertive"}:{};return Y.createElement("div",zb({className:ee,style:V},_e),Y.createElement("p",{className:ae,style:$},Y.isValidElement(Q)?Q:"".concat(Q)),F())},by="recharts-tooltip-wrapper",p9={visibility:"hidden"};function m9(e){var{coordinate:r,translateX:a,translateY:i}=e;return In(by,{["".concat(by,"-right")]:Pr(a)&&r&&Pr(r.x)&&a>=r.x,["".concat(by,"-left")]:Pr(a)&&r&&Pr(r.x)&&a<r.x,["".concat(by,"-bottom")]:Pr(i)&&r&&Pr(r.y)&&i>=r.y,["".concat(by,"-top")]:Pr(i)&&r&&Pr(r.y)&&i<r.y})}function aP(e){var{allowEscapeViewBox:r,coordinate:a,key:i,offsetTopLeft:p,position:y,reverseDirection:g,tooltipDimension:c,viewBox:C,viewBoxDimension:M}=e;if(y&&Pr(y[i]))return y[i];var T=a[i]-c-(p>0?p:0),U=a[i]+p;if(r[i])return g[i]?T:U;var z=C[i];if(z==null)return 0;if(g[i]){var F=T,V=z;return F<V?Math.max(U,z):Math.max(T,z)}if(M==null)return 0;var $=U+c,G=z+M;return $>G?Math.max(T,z):Math.max(U,z)}function y9(e){var{translateX:r,translateY:a,useTranslate3d:i}=e;return{transform:i?"translate3d(".concat(r,"px, ").concat(a,"px, 0)"):"translate(".concat(r,"px, ").concat(a,"px)")}}function g9(e){var{allowEscapeViewBox:r,coordinate:a,offsetTopLeft:i,position:p,reverseDirection:y,tooltipBox:g,useTranslate3d:c,viewBox:C}=e,M,T,U;return g.height>0&&g.width>0&&a?(T=aP({allowEscapeViewBox:r,coordinate:a,key:"x",offsetTopLeft:i,position:p,reverseDirection:y,tooltipDimension:g.width,viewBox:C,viewBoxDimension:C.width}),U=aP({allowEscapeViewBox:r,coordinate:a,key:"y",offsetTopLeft:i,position:p,reverseDirection:y,tooltipDimension:g.height,viewBox:C,viewBoxDimension:C.height}),M=y9({translateX:T,translateY:U,useTranslate3d:c})):M=p9,{cssProperties:M,cssClasses:m9({translateX:T,translateY:U,coordinate:a})}}function iP(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function w0(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?iP(Object(a),!0).forEach(function(i){Fb(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):iP(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function Fb(e,r,a){return(r=v9(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function v9(e){var r=_9(e,"string");return typeof r=="symbol"?r:r+""}function _9(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}class b9 extends Y.PureComponent{constructor(){super(...arguments),Fb(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Fb(this,"handleKeyDown",r=>{if(r.key==="Escape"){var a,i,p,y;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==null&&a!==void 0?a:0,y:(p=(y=this.props.coordinate)===null||y===void 0?void 0:y.y)!==null&&p!==void 0?p:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var r,a;this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:r,allowEscapeViewBox:a,animationDuration:i,animationEasing:p,children:y,coordinate:g,hasPayload:c,isAnimationActive:C,offset:M,position:T,reverseDirection:U,useTranslate3d:z,viewBox:F,wrapperStyle:V,lastBoundingBox:$,innerRef:G,hasPortalFromProps:Q}=this.props,{cssClasses:ee,cssProperties:ae}=g9({allowEscapeViewBox:a,coordinate:g,offsetTopLeft:M,position:T,reverseDirection:U,tooltipBox:{height:$.height,width:$.width},useTranslate3d:z,viewBox:F}),_e=Q?{}:w0(w0({transition:C&&r?"transform ".concat(i,"ms ").concat(p):void 0},ae),{},{pointerEvents:"none",visibility:!this.state.dismissed&&r&&c?"visible":"hidden",position:"absolute",top:0,left:0}),ve=w0(w0({},_e),{},{visibility:!this.state.dismissed&&r&&c?"visible":"hidden"},V);return Y.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:ee,style:ve,ref:G},y)}}var x9=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),tm={devToolsEnabled:!1,isSsr:x9()},CD=()=>pr(e=>e.rootProps.accessibilityLayer);function Es(e){return Number.isFinite(e)}function av(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Nb(){return Nb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Nb.apply(null,arguments)}function oP(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function sP(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?oP(Object(a),!0).forEach(function(i){S9(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oP(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function S9(e,r,a){return(r=w9(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function w9(e){var r=P9(e,"string");return typeof r=="symbol"?r:r+""}function P9(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var lP={curveBasisClosed:XR,curveBasisOpen:KR,curveBasis:QR,curveBumpX:LR,curveBumpY:zR,curveLinearClosed:JR,curveLinear:Lv,curveMonotoneX:eI,curveMonotoneY:tI,curveNatural:rI,curveStep:nI,curveStepAfter:iI,curveStepBefore:aI},P0=e=>Es(e.x)&&Es(e.y),xy=e=>e.x,Sy=e=>e.y,A9=(e,r)=>{if(typeof e=="function")return e;var a="curve".concat(Jy(e));return(a==="curveMonotone"||a==="curveBump")&&r?lP["".concat(a).concat(r==="vertical"?"Y":"X")]:lP[a]||Lv},C9=e=>{var{type:r="linear",points:a=[],baseLine:i,layout:p,connectNulls:y=!1}=e,g=A9(r,p),c=y?a.filter(P0):a,C;if(Array.isArray(i)){var M=y?i.filter(U=>P0(U)):i,T=c.map((U,z)=>sP(sP({},U),{},{base:M[z]}));return p==="vertical"?C=y0().y(Sy).x1(xy).x0(U=>U.base.x):C=y0().x(xy).y1(Sy).y0(U=>U.base.y),C.defined(P0).curve(g),C(T)}return p==="vertical"&&Pr(i)?C=y0().y(Sy).x1(xy).x0(i):Pr(i)?C=y0().x(xy).y1(Sy).y0(i):C=D3().x(xy).y(Sy),C.defined(P0).curve(g),C(c)},D9=e=>{var{className:r,points:a,path:i,pathRef:p}=e;if((!a||!a.length)&&!i)return null;var y=a&&a.length?C9(e):i;return Y.createElement("path",Nb({},eg(e),xR(e),{className:In("recharts-curve",r),d:y===null?void 0:y,ref:p}))},M9=["x","y","top","left","width","height","className"];function jb(){return jb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},jb.apply(null,arguments)}function uP(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function T9(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?uP(Object(a),!0).forEach(function(i){E9(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):uP(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function E9(e,r,a){return(r=R9(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function R9(e){var r=I9(e,"string");return typeof r=="symbol"?r:r+""}function I9(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function k9(e,r){if(e==null)return{};var a,i,p=U9(e,r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(i=0;i<y.length;i++)a=y[i],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(p[a]=e[a])}return p}function U9(e,r){if(e==null)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(r.indexOf(i)!==-1)continue;a[i]=e[i]}return a}var O9=(e,r,a,i,p,y)=>"M".concat(e,",").concat(p,"v").concat(i,"M").concat(y,",").concat(r,"h").concat(a),L9=e=>{var{x:r=0,y:a=0,top:i=0,left:p=0,width:y=0,height:g=0,className:c}=e,C=k9(e,M9),M=T9({x:r,y:a,top:i,left:p,width:y,height:g},C);return!Pr(r)||!Pr(a)||!Pr(y)||!Pr(g)||!Pr(i)||!Pr(p)?null:Y.createElement("path",jb({},Vi(M,!0),{className:In("recharts-cross",c),d:O9(r,a,y,g,i,p)}))};function z9(e,r,a,i){var p=i/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?r.x-p:a.left+.5,y:e==="horizontal"?a.top+.5:r.y-p,width:e==="horizontal"?i:a.width-1,height:e==="horizontal"?a.height-1:i}}function cP(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function F9(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?cP(Object(a),!0).forEach(function(i){N9(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):cP(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function N9(e,r,a){return(r=j9(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function j9(e){var r=B9(e,"string");return typeof r=="symbol"?r:r+""}function B9(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function uu(e,r){var a=F9({},e),i=r,p=Object.keys(r),y=p.reduce((g,c)=>(g[c]===void 0&&i[c]!==void 0&&(g[c]=i[c]),g),a);return y}function q9(){}function hP(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function fP(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?hP(Object(a),!0).forEach(function(i){H9(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):hP(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function H9(e,r,a){return(r=$9(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function $9(e){var r=V9(e,"string");return typeof r=="symbol"?r:r+""}function V9(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var G9=e=>e.replace(/([A-Z])/g,r=>"-".concat(r.toLowerCase())),DD=(e,r,a)=>e.map(i=>"".concat(G9(i)," ").concat(r,"ms ").concat(a)).join(","),W9=(e,r)=>[Object.keys(e),Object.keys(r)].reduce((a,i)=>a.filter(p=>i.includes(p))),qy=(e,r)=>Object.keys(r).reduce((a,i)=>fP(fP({},a),{},{[i]:e(i,r[i])}),{});function dP(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function Hi(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?dP(Object(a),!0).forEach(function(i){Z9(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dP(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function Z9(e,r,a){return(r=Y9(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function Y9(e){var r=Q9(e,"string");return typeof r=="symbol"?r:r+""}function Q9(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var iv=(e,r,a)=>e+(r-e)*a,Bb=e=>{var{from:r,to:a}=e;return r!==a},MD=(e,r,a)=>{var i=qy((p,y)=>{if(Bb(y)){var[g,c]=e(y.from,y.to,y.velocity);return Hi(Hi({},y),{},{from:g,velocity:c})}return y},r);return a<1?qy((p,y)=>Bb(y)?Hi(Hi({},y),{},{velocity:iv(y.velocity,i[p].velocity,a),from:iv(y.from,i[p].from,a)}):y,r):MD(e,i,a-1)};function X9(e,r,a,i,p,y){var g,c=i.reduce((z,F)=>Hi(Hi({},z),{},{[F]:{from:e[F],velocity:0,to:r[F]}}),{}),C=()=>qy((z,F)=>F.from,c),M=()=>!Object.values(c).filter(Bb).length,T=null,U=z=>{g||(g=z);var F=z-g,V=F/a.dt;c=MD(a,c,V),p(Hi(Hi(Hi({},e),r),C())),g=z,M()||(T=y.setTimeout(U))};return()=>(T=y.setTimeout(U),()=>{T()})}function K9(e,r,a,i,p,y,g){var c=null,C=p.reduce((U,z)=>Hi(Hi({},U),{},{[z]:[e[z],r[z]]}),{}),M,T=U=>{M||(M=U);var z=(U-M)/i,F=qy(($,G)=>iv(...G,a(z)),C);if(y(Hi(Hi(Hi({},e),r),F)),z<1)c=g.setTimeout(T);else{var V=qy(($,G)=>iv(...G,a(1)),C);y(Hi(Hi(Hi({},e),r),V))}};return()=>(c=g.setTimeout(T),()=>{c()})}const J9=(e,r,a,i,p,y)=>{var g=W9(e,r);return a.isStepper===!0?X9(e,r,a,g,p,y):K9(e,r,a,i,g,p,y)};var ov=1e-4,TD=(e,r)=>[0,3*e,3*r-6*e,3*e-3*r+1],ED=(e,r)=>e.map((a,i)=>a*r**i).reduce((a,i)=>a+i),pP=(e,r)=>a=>{var i=TD(e,r);return ED(i,a)},ek=(e,r)=>a=>{var i=TD(e,r),p=[...i.map((y,g)=>y*g).slice(1),0];return ED(p,a)},mP=function(){for(var r,a,i,p,y=arguments.length,g=new Array(y),c=0;c<y;c++)g[c]=arguments[c];if(g.length===1)switch(g[0]){case"linear":[r,i,a,p]=[0,0,1,1];break;case"ease":[r,i,a,p]=[.25,.1,.25,1];break;case"ease-in":[r,i,a,p]=[.42,0,1,1];break;case"ease-out":[r,i,a,p]=[.42,0,.58,1];break;case"ease-in-out":[r,i,a,p]=[0,0,.58,1];break;default:{var C=g[0].split("(");C[0]==="cubic-bezier"&&C[1].split(")")[0].split(",").length===4&&([r,i,a,p]=C[1].split(")")[0].split(",").map(V=>parseFloat(V)))}}else g.length===4&&([r,i,a,p]=g);var M=pP(r,a),T=pP(i,p),U=ek(r,a),z=V=>V>1?1:V<0?0:V,F=V=>{for(var $=V>1?1:V,G=$,Q=0;Q<8;++Q){var ee=M(G)-$,ae=U(G);if(Math.abs(ee-$)<ov||ae<ov)return T(G);G=z(G-ee/ae)}return T(G)};return F.isStepper=!1,F},tk=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:a=100,damping:i=8,dt:p=17}=r,y=(g,c,C)=>{var M=-(g-c)*a,T=C*i,U=C+(M-T)*p/1e3,z=C*p/1e3+g;return Math.abs(z-c)<ov&&Math.abs(U)<ov?[c,0]:[z,U]};return y.isStepper=!0,y.dt=p,y},rk=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return mP(e);case"spring":return tk();default:if(e.split("(")[0]==="cubic-bezier")return mP(e)}return typeof e=="function"?e:null};function nk(e){var r,a=()=>null,i=!1,p=null,y=g=>{if(!i){if(Array.isArray(g)){if(!g.length)return;var c=g,[C,...M]=c;if(typeof C=="number"){p=e.setTimeout(y.bind(null,M),C);return}y(C),p=e.setTimeout(y.bind(null,M));return}typeof g=="string"&&(r=g,a(r)),typeof g=="object"&&(r=g,a(r)),typeof g=="function"&&g()}};return{stop:()=>{i=!0},start:g=>{i=!1,p&&(p(),p=null),y(g)},subscribe:g=>(a=g,()=>{a=()=>null}),getTimeoutController:()=>e}}class ak{setTimeout(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=performance.now(),p=null,y=g=>{g-i>=a?r(g):typeof requestAnimationFrame=="function"&&(p=requestAnimationFrame(y))};return p=requestAnimationFrame(y),()=>{cancelAnimationFrame(p)}}}function ik(){return nk(new ak)}var ok=Y.createContext(ik);function sk(e,r){var a=Y.useContext(ok);return Y.useMemo(()=>r??a(e),[e,r,a])}var lk={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},yP={t:0},k_={t:1};function Zx(e){var r=uu(e,lk),{isActive:a,canBegin:i,duration:p,easing:y,begin:g,onAnimationEnd:c,onAnimationStart:C,children:M}=r,T=sk(r.animationId,r.animationManager),[U,z]=Y.useState(a?yP:k_),F=Y.useRef(null);return Y.useEffect(()=>{a||z(k_)},[a]),Y.useEffect(()=>{if(!a||!i)return q9;var V=J9(yP,k_,rk(y),p,z,T.getTimeoutController()),$=()=>{F.current=V()};return T.start([C,g,$,p,c]),()=>{T.stop(),F.current&&F.current(),c()}},[a,i,p,y,g,C,c,T]),M(U.t)}function Yx(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",a=Y.useRef(Ny(r)),i=Y.useRef(e);return i.current!==e&&(a.current=Ny(r),i.current=e),a.current}function gP(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function vP(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?gP(Object(a),!0).forEach(function(i){uk(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gP(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function uk(e,r,a){return(r=ck(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function ck(e){var r=hk(e,"string");return typeof r=="symbol"?r:r+""}function hk(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function sv(){return sv=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},sv.apply(null,arguments)}var _P=(e,r,a,i,p)=>{var y=Math.min(Math.abs(a)/2,Math.abs(i)/2),g=i>=0?1:-1,c=a>=0?1:-1,C=i>=0&&a>=0||i<0&&a<0?1:0,M;if(y>0&&p instanceof Array){for(var T=[0,0,0,0],U=0,z=4;U<z;U++)T[U]=p[U]>y?y:p[U];M="M".concat(e,",").concat(r+g*T[0]),T[0]>0&&(M+="A ".concat(T[0],",").concat(T[0],",0,0,").concat(C,",").concat(e+c*T[0],",").concat(r)),M+="L ".concat(e+a-c*T[1],",").concat(r),T[1]>0&&(M+="A ".concat(T[1],",").concat(T[1],",0,0,").concat(C,`,
        `).concat(e+a,",").concat(r+g*T[1])),M+="L ".concat(e+a,",").concat(r+i-g*T[2]),T[2]>0&&(M+="A ".concat(T[2],",").concat(T[2],",0,0,").concat(C,`,
        `).concat(e+a-c*T[2],",").concat(r+i)),M+="L ".concat(e+c*T[3],",").concat(r+i),T[3]>0&&(M+="A ".concat(T[3],",").concat(T[3],",0,0,").concat(C,`,
        `).concat(e,",").concat(r+i-g*T[3])),M+="Z"}else if(y>0&&p===+p&&p>0){var F=Math.min(y,p);M="M ".concat(e,",").concat(r+g*F,`
            A `).concat(F,",").concat(F,",0,0,").concat(C,",").concat(e+c*F,",").concat(r,`
            L `).concat(e+a-c*F,",").concat(r,`
            A `).concat(F,",").concat(F,",0,0,").concat(C,",").concat(e+a,",").concat(r+g*F,`
            L `).concat(e+a,",").concat(r+i-g*F,`
            A `).concat(F,",").concat(F,",0,0,").concat(C,",").concat(e+a-c*F,",").concat(r+i,`
            L `).concat(e+c*F,",").concat(r+i,`
            A `).concat(F,",").concat(F,",0,0,").concat(C,",").concat(e,",").concat(r+i-g*F," Z")}else M="M ".concat(e,",").concat(r," h ").concat(a," v ").concat(i," h ").concat(-a," Z");return M},fk={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},RD=e=>{var r=uu(e,fk),a=Y.useRef(null),[i,p]=Y.useState(-1);Y.useEffect(()=>{if(a.current&&a.current.getTotalLength)try{var It=a.current.getTotalLength();It&&p(It)}catch{}},[]);var{x:y,y:g,width:c,height:C,radius:M,className:T}=r,{animationEasing:U,animationDuration:z,animationBegin:F,isAnimationActive:V,isUpdateAnimationActive:$}=r,G=Y.useRef(c),Q=Y.useRef(C),ee=Y.useRef(y),ae=Y.useRef(g),_e=Y.useMemo(()=>({x:y,y:g,width:c,height:C,radius:M}),[y,g,c,C,M]),ve=Yx(_e,"rectangle-");if(y!==+y||g!==+g||c!==+c||C!==+C||c===0||C===0)return null;var Ae=In("recharts-rectangle",T);if(!$)return Y.createElement("path",sv({},Vi(r,!0),{className:Ae,d:_P(y,g,c,C,M)}));var Ee=G.current,Fe=Q.current,ht=ee.current,At=ae.current,ot="0px ".concat(i===-1?1:i,"px"),ft="".concat(i,"px 0px"),rt=DD(["strokeDasharray"],z,typeof U=="string"?U:void 0);return Y.createElement(Zx,{animationId:ve,key:ve,canBegin:i>0,duration:z,easing:U,isActive:$,begin:F},It=>{var Ut=wo(Ee,c,It),Be=wo(Fe,C,It),ct=wo(ht,y,It),nt=wo(At,g,It);a.current&&(G.current=Ut,Q.current=Be,ee.current=ct,ae.current=nt);var Ct;return V?It>0?Ct={transition:rt,strokeDasharray:ft}:Ct={strokeDasharray:ot}:Ct={strokeDasharray:ft},Y.createElement("path",sv({},Vi(r,!0),{className:Ae,d:_P(ct,nt,Ut,Be,M),ref:a,style:vP(vP({},Ct),r.style)}))})};function ID(e){var{cx:r,cy:a,radius:i,startAngle:p,endAngle:y}=e,g=$i(r,a,i,p),c=$i(r,a,i,y);return{points:[g,c],cx:r,cy:a,radius:i,startAngle:p,endAngle:y}}function qb(){return qb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},qb.apply(null,arguments)}var dk=(e,r)=>{var a=Ds(r-e),i=Math.min(Math.abs(r-e),359.999);return a*i},A0=e=>{var{cx:r,cy:a,radius:i,angle:p,sign:y,isExternal:g,cornerRadius:c,cornerIsExternal:C}=e,M=c*(g?1:-1)+i,T=Math.asin(c/M)/nv,U=C?p:p+y*T,z=$i(r,a,M,U),F=$i(r,a,i,U),V=C?p-y*T:p,$=$i(r,a,M*Math.cos(T*nv),V);return{center:z,circleTangency:F,lineTangency:$,theta:T}},kD=e=>{var{cx:r,cy:a,innerRadius:i,outerRadius:p,startAngle:y,endAngle:g}=e,c=dk(y,g),C=y+c,M=$i(r,a,p,y),T=$i(r,a,p,C),U="M ".concat(M.x,",").concat(M.y,`
    A `).concat(p,",").concat(p,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(y>C),`,
    `).concat(T.x,",").concat(T.y,`
  `);if(i>0){var z=$i(r,a,i,y),F=$i(r,a,i,C);U+="L ".concat(F.x,",").concat(F.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(y<=C),`,
            `).concat(z.x,",").concat(z.y," Z")}else U+="L ".concat(r,",").concat(a," Z");return U},pk=e=>{var{cx:r,cy:a,innerRadius:i,outerRadius:p,cornerRadius:y,forceCornerRadius:g,cornerIsExternal:c,startAngle:C,endAngle:M}=e,T=Ds(M-C),{circleTangency:U,lineTangency:z,theta:F}=A0({cx:r,cy:a,radius:p,angle:C,sign:T,cornerRadius:y,cornerIsExternal:c}),{circleTangency:V,lineTangency:$,theta:G}=A0({cx:r,cy:a,radius:p,angle:M,sign:-T,cornerRadius:y,cornerIsExternal:c}),Q=c?Math.abs(C-M):Math.abs(C-M)-F-G;if(Q<0)return g?"M ".concat(z.x,",").concat(z.y,`
        a`).concat(y,",").concat(y,",0,0,1,").concat(y*2,`,0
        a`).concat(y,",").concat(y,",0,0,1,").concat(-y*2,`,0
      `):kD({cx:r,cy:a,innerRadius:i,outerRadius:p,startAngle:C,endAngle:M});var ee="M ".concat(z.x,",").concat(z.y,`
    A`).concat(y,",").concat(y,",0,0,").concat(+(T<0),",").concat(U.x,",").concat(U.y,`
    A`).concat(p,",").concat(p,",0,").concat(+(Q>180),",").concat(+(T<0),",").concat(V.x,",").concat(V.y,`
    A`).concat(y,",").concat(y,",0,0,").concat(+(T<0),",").concat($.x,",").concat($.y,`
  `);if(i>0){var{circleTangency:ae,lineTangency:_e,theta:ve}=A0({cx:r,cy:a,radius:i,angle:C,sign:T,isExternal:!0,cornerRadius:y,cornerIsExternal:c}),{circleTangency:Ae,lineTangency:Ee,theta:Fe}=A0({cx:r,cy:a,radius:i,angle:M,sign:-T,isExternal:!0,cornerRadius:y,cornerIsExternal:c}),ht=c?Math.abs(C-M):Math.abs(C-M)-ve-Fe;if(ht<0&&y===0)return"".concat(ee,"L").concat(r,",").concat(a,"Z");ee+="L".concat(Ee.x,",").concat(Ee.y,`
      A`).concat(y,",").concat(y,",0,0,").concat(+(T<0),",").concat(Ae.x,",").concat(Ae.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(ht>180),",").concat(+(T>0),",").concat(ae.x,",").concat(ae.y,`
      A`).concat(y,",").concat(y,",0,0,").concat(+(T<0),",").concat(_e.x,",").concat(_e.y,"Z")}else ee+="L".concat(r,",").concat(a,"Z");return ee},mk={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},UD=e=>{var r=uu(e,mk),{cx:a,cy:i,innerRadius:p,outerRadius:y,cornerRadius:g,forceCornerRadius:c,cornerIsExternal:C,startAngle:M,endAngle:T,className:U}=r;if(y<p||M===T)return null;var z=In("recharts-sector",U),F=y-p,V=au(g,F,0,!0),$;return V>0&&Math.abs(M-T)<360?$=pk({cx:a,cy:i,innerRadius:p,outerRadius:y,cornerRadius:Math.min(V,F/2),forceCornerRadius:c,cornerIsExternal:C,startAngle:M,endAngle:T}):$=kD({cx:a,cy:i,innerRadius:p,outerRadius:y,startAngle:M,endAngle:T}),Y.createElement("path",qb({},Vi(r,!0),{className:z,d:$}))};function yk(e,r,a){var i,p,y,g;if(e==="horizontal")i=r.x,y=i,p=a.top,g=a.top+a.height;else if(e==="vertical")p=r.y,g=p,i=a.left,y=a.left+a.width;else if(r.cx!=null&&r.cy!=null)if(e==="centric"){var{cx:c,cy:C,innerRadius:M,outerRadius:T,angle:U}=r,z=$i(c,C,M,U),F=$i(c,C,T,U);i=z.x,p=z.y,y=F.x,g=F.y}else return ID(r);return[{x:i,y:p},{x:y,y:g}]}var U_={},O_={},L_={},bP;function gk(){return bP||(bP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=Y3();function a(i){return r.isSymbol(i)?NaN:Number(i)}e.toNumber=a})(L_)),L_}var xP;function vk(){return xP||(xP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=gk();function a(i){return i?(i=r.toNumber(i),i===1/0||i===-1/0?(i<0?-1:1)*Number.MAX_VALUE:i===i?i:0):i===0?i:0}e.toFinite=a})(O_)),O_}var SP;function _k(){return SP||(SP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=Q3(),a=vk();function i(p,y,g){g&&typeof g!="number"&&r.isIterateeCall(p,y,g)&&(y=g=void 0),p=a.toFinite(p),y===void 0?(y=p,p=0):y=a.toFinite(y),g=g===void 0?p<y?1:-1:a.toFinite(g);const c=Math.max(Math.ceil((y-p)/(g||1)),0),C=new Array(c);for(let M=0;M<c;M++)C[M]=p,p+=g;return C}e.range=i})(U_)),U_}var z_,wP;function bk(){return wP||(wP=1,z_=_k().range),z_}var xk=bk();const OD=iu(xk);function hf(e,r){return e==null||r==null?NaN:e<r?-1:e>r?1:e>=r?0:NaN}function Sk(e,r){return e==null||r==null?NaN:r<e?-1:r>e?1:r>=e?0:NaN}function Qx(e){let r,a,i;e.length!==2?(r=hf,a=(c,C)=>hf(e(c),C),i=(c,C)=>e(c)-C):(r=e===hf||e===Sk?e:wk,a=e,i=e);function p(c,C,M=0,T=c.length){if(M<T){if(r(C,C)!==0)return T;do{const U=M+T>>>1;a(c[U],C)<0?M=U+1:T=U}while(M<T)}return M}function y(c,C,M=0,T=c.length){if(M<T){if(r(C,C)!==0)return T;do{const U=M+T>>>1;a(c[U],C)<=0?M=U+1:T=U}while(M<T)}return M}function g(c,C,M=0,T=c.length){const U=p(c,C,M,T-1);return U>M&&i(c[U-1],C)>-i(c[U],C)?U-1:U}return{left:p,center:g,right:y}}function wk(){return 0}function LD(e){return e===null?NaN:+e}function*Pk(e,r){for(let a of e)a!=null&&(a=+a)>=a&&(yield a)}const Ak=Qx(hf),ag=Ak.right;Qx(LD).center;class PP extends Map{constructor(r,a=Mk){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),r!=null)for(const[i,p]of r)this.set(i,p)}get(r){return super.get(AP(this,r))}has(r){return super.has(AP(this,r))}set(r,a){return super.set(Ck(this,r),a)}delete(r){return super.delete(Dk(this,r))}}function AP({_intern:e,_key:r},a){const i=r(a);return e.has(i)?e.get(i):a}function Ck({_intern:e,_key:r},a){const i=r(a);return e.has(i)?e.get(i):(e.set(i,a),a)}function Dk({_intern:e,_key:r},a){const i=r(a);return e.has(i)&&(a=e.get(i),e.delete(i)),a}function Mk(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Tk(e=hf){if(e===hf)return zD;if(typeof e!="function")throw new TypeError("compare is not a function");return(r,a)=>{const i=e(r,a);return i||i===0?i:(e(a,a)===0)-(e(r,r)===0)}}function zD(e,r){return(e==null||!(e>=e))-(r==null||!(r>=r))||(e<r?-1:e>r?1:0)}const Ek=Math.sqrt(50),Rk=Math.sqrt(10),Ik=Math.sqrt(2);function lv(e,r,a){const i=(r-e)/Math.max(0,a),p=Math.floor(Math.log10(i)),y=i/Math.pow(10,p),g=y>=Ek?10:y>=Rk?5:y>=Ik?2:1;let c,C,M;return p<0?(M=Math.pow(10,-p)/g,c=Math.round(e*M),C=Math.round(r*M),c/M<e&&++c,C/M>r&&--C,M=-M):(M=Math.pow(10,p)*g,c=Math.round(e/M),C=Math.round(r/M),c*M<e&&++c,C*M>r&&--C),C<c&&.5<=a&&a<2?lv(e,r,a*2):[c,C,M]}function Hb(e,r,a){if(r=+r,e=+e,a=+a,!(a>0))return[];if(e===r)return[e];const i=r<e,[p,y,g]=i?lv(r,e,a):lv(e,r,a);if(!(y>=p))return[];const c=y-p+1,C=new Array(c);if(i)if(g<0)for(let M=0;M<c;++M)C[M]=(y-M)/-g;else for(let M=0;M<c;++M)C[M]=(y-M)*g;else if(g<0)for(let M=0;M<c;++M)C[M]=(p+M)/-g;else for(let M=0;M<c;++M)C[M]=(p+M)*g;return C}function $b(e,r,a){return r=+r,e=+e,a=+a,lv(e,r,a)[2]}function Vb(e,r,a){r=+r,e=+e,a=+a;const i=r<e,p=i?$b(r,e,a):$b(e,r,a);return(i?-1:1)*(p<0?1/-p:p)}function CP(e,r){let a;for(const i of e)i!=null&&(a<i||a===void 0&&i>=i)&&(a=i);return a}function DP(e,r){let a;for(const i of e)i!=null&&(a>i||a===void 0&&i>=i)&&(a=i);return a}function FD(e,r,a=0,i=1/0,p){if(r=Math.floor(r),a=Math.floor(Math.max(0,a)),i=Math.floor(Math.min(e.length-1,i)),!(a<=r&&r<=i))return e;for(p=p===void 0?zD:Tk(p);i>a;){if(i-a>600){const C=i-a+1,M=r-a+1,T=Math.log(C),U=.5*Math.exp(2*T/3),z=.5*Math.sqrt(T*U*(C-U)/C)*(M-C/2<0?-1:1),F=Math.max(a,Math.floor(r-M*U/C+z)),V=Math.min(i,Math.floor(r+(C-M)*U/C+z));FD(e,r,F,V,p)}const y=e[r];let g=a,c=i;for(wy(e,a,r),p(e[i],y)>0&&wy(e,a,i);g<c;){for(wy(e,g,c),++g,--c;p(e[g],y)<0;)++g;for(;p(e[c],y)>0;)--c}p(e[a],y)===0?wy(e,a,c):(++c,wy(e,c,i)),c<=r&&(a=c+1),r<=c&&(i=c-1)}return e}function wy(e,r,a){const i=e[r];e[r]=e[a],e[a]=i}function kk(e,r,a){if(e=Float64Array.from(Pk(e)),!(!(i=e.length)||isNaN(r=+r))){if(r<=0||i<2)return DP(e);if(r>=1)return CP(e);var i,p=(i-1)*r,y=Math.floor(p),g=CP(FD(e,y).subarray(0,y+1)),c=DP(e.subarray(y+1));return g+(c-g)*(p-y)}}function Uk(e,r,a=LD){if(!(!(i=e.length)||isNaN(r=+r))){if(r<=0||i<2)return+a(e[0],0,e);if(r>=1)return+a(e[i-1],i-1,e);var i,p=(i-1)*r,y=Math.floor(p),g=+a(e[y],y,e),c=+a(e[y+1],y+1,e);return g+(c-g)*(p-y)}}function Ok(e,r,a){e=+e,r=+r,a=(p=arguments.length)<2?(r=e,e=0,1):p<3?1:+a;for(var i=-1,p=Math.max(0,Math.ceil((r-e)/a))|0,y=new Array(p);++i<p;)y[i]=e+i*a;return y}function ul(e,r){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(r).domain(e);break}return this}function ch(e,r){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}const Gb=Symbol("implicit");function Xx(){var e=new PP,r=[],a=[],i=Gb;function p(y){let g=e.get(y);if(g===void 0){if(i!==Gb)return i;e.set(y,g=r.push(y)-1)}return a[g%a.length]}return p.domain=function(y){if(!arguments.length)return r.slice();r=[],e=new PP;for(const g of y)e.has(g)||e.set(g,r.push(g)-1);return p},p.range=function(y){return arguments.length?(a=Array.from(y),p):a.slice()},p.unknown=function(y){return arguments.length?(i=y,p):i},p.copy=function(){return Xx(r,a).unknown(i)},ul.apply(p,arguments),p}function Kx(){var e=Xx().unknown(void 0),r=e.domain,a=e.range,i=0,p=1,y,g,c=!1,C=0,M=0,T=.5;delete e.unknown;function U(){var z=r().length,F=p<i,V=F?p:i,$=F?i:p;y=($-V)/Math.max(1,z-C+M*2),c&&(y=Math.floor(y)),V+=($-V-y*(z-C))*T,g=y*(1-C),c&&(V=Math.round(V),g=Math.round(g));var G=Ok(z).map(function(Q){return V+y*Q});return a(F?G.reverse():G)}return e.domain=function(z){return arguments.length?(r(z),U()):r()},e.range=function(z){return arguments.length?([i,p]=z,i=+i,p=+p,U()):[i,p]},e.rangeRound=function(z){return[i,p]=z,i=+i,p=+p,c=!0,U()},e.bandwidth=function(){return g},e.step=function(){return y},e.round=function(z){return arguments.length?(c=!!z,U()):c},e.padding=function(z){return arguments.length?(C=Math.min(1,M=+z),U()):C},e.paddingInner=function(z){return arguments.length?(C=Math.min(1,z),U()):C},e.paddingOuter=function(z){return arguments.length?(M=+z,U()):M},e.align=function(z){return arguments.length?(T=Math.max(0,Math.min(1,z)),U()):T},e.copy=function(){return Kx(r(),[i,p]).round(c).paddingInner(C).paddingOuter(M).align(T)},ul.apply(U(),arguments)}function ND(e){var r=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return ND(r())},e}function Lk(){return ND(Kx.apply(null,arguments).paddingInner(1))}function Jx(e,r,a){e.prototype=r.prototype=a,a.constructor=e}function jD(e,r){var a=Object.create(e.prototype);for(var i in r)a[i]=r[i];return a}function ig(){}var Hy=.7,uv=1/Hy,Fp="\\s*([+-]?\\d+)\\s*",$y="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zk=/^#([0-9a-f]{3,8})$/,Fk=new RegExp(`^rgb\\(${Fp},${Fp},${Fp}\\)$`),Nk=new RegExp(`^rgb\\(${nc},${nc},${nc}\\)$`),jk=new RegExp(`^rgba\\(${Fp},${Fp},${Fp},${$y}\\)$`),Bk=new RegExp(`^rgba\\(${nc},${nc},${nc},${$y}\\)$`),qk=new RegExp(`^hsl\\(${$y},${nc},${nc}\\)$`),Hk=new RegExp(`^hsla\\(${$y},${nc},${nc},${$y}\\)$`),MP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Jx(ig,Vy,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:TP,formatHex:TP,formatHex8:$k,formatHsl:Vk,formatRgb:EP,toString:EP});function TP(){return this.rgb().formatHex()}function $k(){return this.rgb().formatHex8()}function Vk(){return BD(this).formatHsl()}function EP(){return this.rgb().formatRgb()}function Vy(e){var r,a;return e=(e+"").trim().toLowerCase(),(r=zk.exec(e))?(a=r[1].length,r=parseInt(r[1],16),a===6?RP(r):a===3?new Yo(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):a===8?C0(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):a===4?C0(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=Fk.exec(e))?new Yo(r[1],r[2],r[3],1):(r=Nk.exec(e))?new Yo(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=jk.exec(e))?C0(r[1],r[2],r[3],r[4]):(r=Bk.exec(e))?C0(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=qk.exec(e))?UP(r[1],r[2]/100,r[3]/100,1):(r=Hk.exec(e))?UP(r[1],r[2]/100,r[3]/100,r[4]):MP.hasOwnProperty(e)?RP(MP[e]):e==="transparent"?new Yo(NaN,NaN,NaN,0):null}function RP(e){return new Yo(e>>16&255,e>>8&255,e&255,1)}function C0(e,r,a,i){return i<=0&&(e=r=a=NaN),new Yo(e,r,a,i)}function Gk(e){return e instanceof ig||(e=Vy(e)),e?(e=e.rgb(),new Yo(e.r,e.g,e.b,e.opacity)):new Yo}function Wb(e,r,a,i){return arguments.length===1?Gk(e):new Yo(e,r,a,i??1)}function Yo(e,r,a,i){this.r=+e,this.g=+r,this.b=+a,this.opacity=+i}Jx(Yo,Wb,jD(ig,{brighter(e){return e=e==null?uv:Math.pow(uv,e),new Yo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Hy:Math.pow(Hy,e),new Yo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Yo(Rd(this.r),Rd(this.g),Rd(this.b),cv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:IP,formatHex:IP,formatHex8:Wk,formatRgb:kP,toString:kP}));function IP(){return`#${Dd(this.r)}${Dd(this.g)}${Dd(this.b)}`}function Wk(){return`#${Dd(this.r)}${Dd(this.g)}${Dd(this.b)}${Dd((isNaN(this.opacity)?1:this.opacity)*255)}`}function kP(){const e=cv(this.opacity);return`${e===1?"rgb(":"rgba("}${Rd(this.r)}, ${Rd(this.g)}, ${Rd(this.b)}${e===1?")":`, ${e})`}`}function cv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Rd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Dd(e){return e=Rd(e),(e<16?"0":"")+e.toString(16)}function UP(e,r,a,i){return i<=0?e=r=a=NaN:a<=0||a>=1?e=r=NaN:r<=0&&(e=NaN),new tu(e,r,a,i)}function BD(e){if(e instanceof tu)return new tu(e.h,e.s,e.l,e.opacity);if(e instanceof ig||(e=Vy(e)),!e)return new tu;if(e instanceof tu)return e;e=e.rgb();var r=e.r/255,a=e.g/255,i=e.b/255,p=Math.min(r,a,i),y=Math.max(r,a,i),g=NaN,c=y-p,C=(y+p)/2;return c?(r===y?g=(a-i)/c+(a<i)*6:a===y?g=(i-r)/c+2:g=(r-a)/c+4,c/=C<.5?y+p:2-y-p,g*=60):c=C>0&&C<1?0:g,new tu(g,c,C,e.opacity)}function Zk(e,r,a,i){return arguments.length===1?BD(e):new tu(e,r,a,i??1)}function tu(e,r,a,i){this.h=+e,this.s=+r,this.l=+a,this.opacity=+i}Jx(tu,Zk,jD(ig,{brighter(e){return e=e==null?uv:Math.pow(uv,e),new tu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hy:Math.pow(Hy,e),new tu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,r=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,i=a+(a<.5?a:1-a)*r,p=2*a-i;return new Yo(F_(e>=240?e-240:e+120,p,i),F_(e,p,i),F_(e<120?e+240:e-120,p,i),this.opacity)},clamp(){return new tu(OP(this.h),D0(this.s),D0(this.l),cv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=cv(this.opacity);return`${e===1?"hsl(":"hsla("}${OP(this.h)}, ${D0(this.s)*100}%, ${D0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function OP(e){return e=(e||0)%360,e<0?e+360:e}function D0(e){return Math.max(0,Math.min(1,e||0))}function F_(e,r,a){return(e<60?r+(a-r)*e/60:e<180?a:e<240?r+(a-r)*(240-e)/60:r)*255}const e2=e=>()=>e;function Yk(e,r){return function(a){return e+a*r}}function Qk(e,r,a){return e=Math.pow(e,a),r=Math.pow(r,a)-e,a=1/a,function(i){return Math.pow(e+i*r,a)}}function Xk(e){return(e=+e)==1?qD:function(r,a){return a-r?Qk(r,a,e):e2(isNaN(r)?a:r)}}function qD(e,r){var a=r-e;return a?Yk(e,a):e2(isNaN(e)?r:e)}const LP=(function e(r){var a=Xk(r);function i(p,y){var g=a((p=Wb(p)).r,(y=Wb(y)).r),c=a(p.g,y.g),C=a(p.b,y.b),M=qD(p.opacity,y.opacity);return function(T){return p.r=g(T),p.g=c(T),p.b=C(T),p.opacity=M(T),p+""}}return i.gamma=e,i})(1);function Kk(e,r){r||(r=[]);var a=e?Math.min(r.length,e.length):0,i=r.slice(),p;return function(y){for(p=0;p<a;++p)i[p]=e[p]*(1-y)+r[p]*y;return i}}function Jk(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function eU(e,r){var a=r?r.length:0,i=e?Math.min(a,e.length):0,p=new Array(i),y=new Array(a),g;for(g=0;g<i;++g)p[g]=rm(e[g],r[g]);for(;g<a;++g)y[g]=r[g];return function(c){for(g=0;g<i;++g)y[g]=p[g](c);return y}}function tU(e,r){var a=new Date;return e=+e,r=+r,function(i){return a.setTime(e*(1-i)+r*i),a}}function hv(e,r){return e=+e,r=+r,function(a){return e*(1-a)+r*a}}function rU(e,r){var a={},i={},p;(e===null||typeof e!="object")&&(e={}),(r===null||typeof r!="object")&&(r={});for(p in r)p in e?a[p]=rm(e[p],r[p]):i[p]=r[p];return function(y){for(p in a)i[p]=a[p](y);return i}}var Zb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,N_=new RegExp(Zb.source,"g");function nU(e){return function(){return e}}function aU(e){return function(r){return e(r)+""}}function iU(e,r){var a=Zb.lastIndex=N_.lastIndex=0,i,p,y,g=-1,c=[],C=[];for(e=e+"",r=r+"";(i=Zb.exec(e))&&(p=N_.exec(r));)(y=p.index)>a&&(y=r.slice(a,y),c[g]?c[g]+=y:c[++g]=y),(i=i[0])===(p=p[0])?c[g]?c[g]+=p:c[++g]=p:(c[++g]=null,C.push({i:g,x:hv(i,p)})),a=N_.lastIndex;return a<r.length&&(y=r.slice(a),c[g]?c[g]+=y:c[++g]=y),c.length<2?C[0]?aU(C[0].x):nU(r):(r=C.length,function(M){for(var T=0,U;T<r;++T)c[(U=C[T]).i]=U.x(M);return c.join("")})}function rm(e,r){var a=typeof r,i;return r==null||a==="boolean"?e2(r):(a==="number"?hv:a==="string"?(i=Vy(r))?(r=i,LP):iU:r instanceof Vy?LP:r instanceof Date?tU:Jk(r)?Kk:Array.isArray(r)?eU:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?rU:hv)(e,r)}function t2(e,r){return e=+e,r=+r,function(a){return Math.round(e*(1-a)+r*a)}}function oU(e,r){r===void 0&&(r=e,e=rm);for(var a=0,i=r.length-1,p=r[0],y=new Array(i<0?0:i);a<i;)y[a]=e(p,p=r[++a]);return function(g){var c=Math.max(0,Math.min(i-1,Math.floor(g*=i)));return y[c](g-c)}}function sU(e){return function(){return e}}function fv(e){return+e}var zP=[0,1];function Ao(e){return e}function Yb(e,r){return(r-=e=+e)?function(a){return(a-e)/r}:sU(isNaN(r)?NaN:.5)}function lU(e,r){var a;return e>r&&(a=e,e=r,r=a),function(i){return Math.max(e,Math.min(r,i))}}function uU(e,r,a){var i=e[0],p=e[1],y=r[0],g=r[1];return p<i?(i=Yb(p,i),y=a(g,y)):(i=Yb(i,p),y=a(y,g)),function(c){return y(i(c))}}function cU(e,r,a){var i=Math.min(e.length,r.length)-1,p=new Array(i),y=new Array(i),g=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),r=r.slice().reverse());++g<i;)p[g]=Yb(e[g],e[g+1]),y[g]=a(r[g],r[g+1]);return function(c){var C=ag(e,c,1,i)-1;return y[C](p[C](c))}}function og(e,r){return r.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Zv(){var e=zP,r=zP,a=rm,i,p,y,g=Ao,c,C,M;function T(){var z=Math.min(e.length,r.length);return g!==Ao&&(g=lU(e[0],e[z-1])),c=z>2?cU:uU,C=M=null,U}function U(z){return z==null||isNaN(z=+z)?y:(C||(C=c(e.map(i),r,a)))(i(g(z)))}return U.invert=function(z){return g(p((M||(M=c(r,e.map(i),hv)))(z)))},U.domain=function(z){return arguments.length?(e=Array.from(z,fv),T()):e.slice()},U.range=function(z){return arguments.length?(r=Array.from(z),T()):r.slice()},U.rangeRound=function(z){return r=Array.from(z),a=t2,T()},U.clamp=function(z){return arguments.length?(g=z?!0:Ao,T()):g!==Ao},U.interpolate=function(z){return arguments.length?(a=z,T()):a},U.unknown=function(z){return arguments.length?(y=z,U):y},function(z,F){return i=z,p=F,T()}}function r2(){return Zv()(Ao,Ao)}function hU(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function dv(e,r){if((a=(e=r?e.toExponential(r-1):e.toExponential()).indexOf("e"))<0)return null;var a,i=e.slice(0,a);return[i.length>1?i[0]+i.slice(2):i,+e.slice(a+1)]}function $p(e){return e=dv(Math.abs(e)),e?e[1]:NaN}function fU(e,r){return function(a,i){for(var p=a.length,y=[],g=0,c=e[0],C=0;p>0&&c>0&&(C+c+1>i&&(c=Math.max(1,i-C)),y.push(a.substring(p-=c,p+c)),!((C+=c+1)>i));)c=e[g=(g+1)%e.length];return y.reverse().join(r)}}function dU(e){return function(r){return r.replace(/[0-9]/g,function(a){return e[+a]})}}var pU=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Gy(e){if(!(r=pU.exec(e)))throw new Error("invalid format: "+e);var r;return new n2({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}Gy.prototype=n2.prototype;function n2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}n2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function mU(e){e:for(var r=e.length,a=1,i=-1,p;a<r;++a)switch(e[a]){case".":i=p=a;break;case"0":i===0&&(i=a),p=a;break;default:if(!+e[a])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(p+1):e}var HD;function yU(e,r){var a=dv(e,r);if(!a)return e+"";var i=a[0],p=a[1],y=p-(HD=Math.max(-8,Math.min(8,Math.floor(p/3)))*3)+1,g=i.length;return y===g?i:y>g?i+new Array(y-g+1).join("0"):y>0?i.slice(0,y)+"."+i.slice(y):"0."+new Array(1-y).join("0")+dv(e,Math.max(0,r+y-1))[0]}function FP(e,r){var a=dv(e,r);if(!a)return e+"";var i=a[0],p=a[1];return p<0?"0."+new Array(-p).join("0")+i:i.length>p+1?i.slice(0,p+1)+"."+i.slice(p+1):i+new Array(p-i.length+2).join("0")}const NP={"%":(e,r)=>(e*100).toFixed(r),b:e=>Math.round(e).toString(2),c:e=>e+"",d:hU,e:(e,r)=>e.toExponential(r),f:(e,r)=>e.toFixed(r),g:(e,r)=>e.toPrecision(r),o:e=>Math.round(e).toString(8),p:(e,r)=>FP(e*100,r),r:FP,s:yU,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function jP(e){return e}var BP=Array.prototype.map,qP=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function gU(e){var r=e.grouping===void 0||e.thousands===void 0?jP:fU(BP.call(e.grouping,Number),e.thousands+""),a=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",p=e.decimal===void 0?".":e.decimal+"",y=e.numerals===void 0?jP:dU(BP.call(e.numerals,String)),g=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",C=e.nan===void 0?"NaN":e.nan+"";function M(U){U=Gy(U);var z=U.fill,F=U.align,V=U.sign,$=U.symbol,G=U.zero,Q=U.width,ee=U.comma,ae=U.precision,_e=U.trim,ve=U.type;ve==="n"?(ee=!0,ve="g"):NP[ve]||(ae===void 0&&(ae=12),_e=!0,ve="g"),(G||z==="0"&&F==="=")&&(G=!0,z="0",F="=");var Ae=$==="$"?a:$==="#"&&/[boxX]/.test(ve)?"0"+ve.toLowerCase():"",Ee=$==="$"?i:/[%p]/.test(ve)?g:"",Fe=NP[ve],ht=/[defgprs%]/.test(ve);ae=ae===void 0?6:/[gprs]/.test(ve)?Math.max(1,Math.min(21,ae)):Math.max(0,Math.min(20,ae));function At(ot){var ft=Ae,rt=Ee,It,Ut,Be;if(ve==="c")rt=Fe(ot)+rt,ot="";else{ot=+ot;var ct=ot<0||1/ot<0;if(ot=isNaN(ot)?C:Fe(Math.abs(ot),ae),_e&&(ot=mU(ot)),ct&&+ot==0&&V!=="+"&&(ct=!1),ft=(ct?V==="("?V:c:V==="-"||V==="("?"":V)+ft,rt=(ve==="s"?qP[8+HD/3]:"")+rt+(ct&&V==="("?")":""),ht){for(It=-1,Ut=ot.length;++It<Ut;)if(Be=ot.charCodeAt(It),48>Be||Be>57){rt=(Be===46?p+ot.slice(It+1):ot.slice(It))+rt,ot=ot.slice(0,It);break}}}ee&&!G&&(ot=r(ot,1/0));var nt=ft.length+ot.length+rt.length,Ct=nt<Q?new Array(Q-nt+1).join(z):"";switch(ee&&G&&(ot=r(Ct+ot,Ct.length?Q-rt.length:1/0),Ct=""),F){case"<":ot=ft+ot+rt+Ct;break;case"=":ot=ft+Ct+ot+rt;break;case"^":ot=Ct.slice(0,nt=Ct.length>>1)+ft+ot+rt+Ct.slice(nt);break;default:ot=Ct+ft+ot+rt;break}return y(ot)}return At.toString=function(){return U+""},At}function T(U,z){var F=M((U=Gy(U),U.type="f",U)),V=Math.max(-8,Math.min(8,Math.floor($p(z)/3)))*3,$=Math.pow(10,-V),G=qP[8+V/3];return function(Q){return F($*Q)+G}}return{format:M,formatPrefix:T}}var M0,a2,$D;vU({thousands:",",grouping:[3],currency:["$",""]});function vU(e){return M0=gU(e),a2=M0.format,$D=M0.formatPrefix,M0}function _U(e){return Math.max(0,-$p(Math.abs(e)))}function bU(e,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($p(r)/3)))*3-$p(Math.abs(e)))}function xU(e,r){return e=Math.abs(e),r=Math.abs(r)-e,Math.max(0,$p(r)-$p(e))+1}function VD(e,r,a,i){var p=Vb(e,r,a),y;switch(i=Gy(i??",f"),i.type){case"s":{var g=Math.max(Math.abs(e),Math.abs(r));return i.precision==null&&!isNaN(y=bU(p,g))&&(i.precision=y),$D(i,g)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(y=xU(p,Math.max(Math.abs(e),Math.abs(r))))&&(i.precision=y-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(y=_U(p))&&(i.precision=y-(i.type==="%")*2);break}}return a2(i)}function pf(e){var r=e.domain;return e.ticks=function(a){var i=r();return Hb(i[0],i[i.length-1],a??10)},e.tickFormat=function(a,i){var p=r();return VD(p[0],p[p.length-1],a??10,i)},e.nice=function(a){a==null&&(a=10);var i=r(),p=0,y=i.length-1,g=i[p],c=i[y],C,M,T=10;for(c<g&&(M=g,g=c,c=M,M=p,p=y,y=M);T-- >0;){if(M=$b(g,c,a),M===C)return i[p]=g,i[y]=c,r(i);if(M>0)g=Math.floor(g/M)*M,c=Math.ceil(c/M)*M;else if(M<0)g=Math.ceil(g*M)/M,c=Math.floor(c*M)/M;else break;C=M}return e},e}function GD(){var e=r2();return e.copy=function(){return og(e,GD())},ul.apply(e,arguments),pf(e)}function WD(e){var r;function a(i){return i==null||isNaN(i=+i)?r:i}return a.invert=a,a.domain=a.range=function(i){return arguments.length?(e=Array.from(i,fv),a):e.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return WD(e).unknown(r)},e=arguments.length?Array.from(e,fv):[0,1],pf(a)}function ZD(e,r){e=e.slice();var a=0,i=e.length-1,p=e[a],y=e[i],g;return y<p&&(g=a,a=i,i=g,g=p,p=y,y=g),e[a]=r.floor(p),e[i]=r.ceil(y),e}function HP(e){return Math.log(e)}function $P(e){return Math.exp(e)}function SU(e){return-Math.log(-e)}function wU(e){return-Math.exp(-e)}function PU(e){return isFinite(e)?+("1e"+e):e<0?0:e}function AU(e){return e===10?PU:e===Math.E?Math.exp:r=>Math.pow(e,r)}function CU(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),r=>Math.log(r)/e)}function VP(e){return(r,a)=>-e(-r,a)}function i2(e){const r=e(HP,$P),a=r.domain;let i=10,p,y;function g(){return p=CU(i),y=AU(i),a()[0]<0?(p=VP(p),y=VP(y),e(SU,wU)):e(HP,$P),r}return r.base=function(c){return arguments.length?(i=+c,g()):i},r.domain=function(c){return arguments.length?(a(c),g()):a()},r.ticks=c=>{const C=a();let M=C[0],T=C[C.length-1];const U=T<M;U&&([M,T]=[T,M]);let z=p(M),F=p(T),V,$;const G=c==null?10:+c;let Q=[];if(!(i%1)&&F-z<G){if(z=Math.floor(z),F=Math.ceil(F),M>0){for(;z<=F;++z)for(V=1;V<i;++V)if($=z<0?V/y(-z):V*y(z),!($<M)){if($>T)break;Q.push($)}}else for(;z<=F;++z)for(V=i-1;V>=1;--V)if($=z>0?V/y(-z):V*y(z),!($<M)){if($>T)break;Q.push($)}Q.length*2<G&&(Q=Hb(M,T,G))}else Q=Hb(z,F,Math.min(F-z,G)).map(y);return U?Q.reverse():Q},r.tickFormat=(c,C)=>{if(c==null&&(c=10),C==null&&(C=i===10?"s":","),typeof C!="function"&&(!(i%1)&&(C=Gy(C)).precision==null&&(C.trim=!0),C=a2(C)),c===1/0)return C;const M=Math.max(1,i*c/r.ticks().length);return T=>{let U=T/y(Math.round(p(T)));return U*i<i-.5&&(U*=i),U<=M?C(T):""}},r.nice=()=>a(ZD(a(),{floor:c=>y(Math.floor(p(c))),ceil:c=>y(Math.ceil(p(c)))})),r}function YD(){const e=i2(Zv()).domain([1,10]);return e.copy=()=>og(e,YD()).base(e.base()),ul.apply(e,arguments),e}function GP(e){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/e))}}function WP(e){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*e}}function o2(e){var r=1,a=e(GP(r),WP(r));return a.constant=function(i){return arguments.length?e(GP(r=+i),WP(r)):r},pf(a)}function QD(){var e=o2(Zv());return e.copy=function(){return og(e,QD()).constant(e.constant())},ul.apply(e,arguments)}function ZP(e){return function(r){return r<0?-Math.pow(-r,e):Math.pow(r,e)}}function DU(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function MU(e){return e<0?-e*e:e*e}function s2(e){var r=e(Ao,Ao),a=1;function i(){return a===1?e(Ao,Ao):a===.5?e(DU,MU):e(ZP(a),ZP(1/a))}return r.exponent=function(p){return arguments.length?(a=+p,i()):a},pf(r)}function l2(){var e=s2(Zv());return e.copy=function(){return og(e,l2()).exponent(e.exponent())},ul.apply(e,arguments),e}function TU(){return l2.apply(null,arguments).exponent(.5)}function YP(e){return Math.sign(e)*e*e}function EU(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function XD(){var e=r2(),r=[0,1],a=!1,i;function p(y){var g=EU(e(y));return isNaN(g)?i:a?Math.round(g):g}return p.invert=function(y){return e.invert(YP(y))},p.domain=function(y){return arguments.length?(e.domain(y),p):e.domain()},p.range=function(y){return arguments.length?(e.range((r=Array.from(y,fv)).map(YP)),p):r.slice()},p.rangeRound=function(y){return p.range(y).round(!0)},p.round=function(y){return arguments.length?(a=!!y,p):a},p.clamp=function(y){return arguments.length?(e.clamp(y),p):e.clamp()},p.unknown=function(y){return arguments.length?(i=y,p):i},p.copy=function(){return XD(e.domain(),r).round(a).clamp(e.clamp()).unknown(i)},ul.apply(p,arguments),pf(p)}function KD(){var e=[],r=[],a=[],i;function p(){var g=0,c=Math.max(1,r.length);for(a=new Array(c-1);++g<c;)a[g-1]=Uk(e,g/c);return y}function y(g){return g==null||isNaN(g=+g)?i:r[ag(a,g)]}return y.invertExtent=function(g){var c=r.indexOf(g);return c<0?[NaN,NaN]:[c>0?a[c-1]:e[0],c<a.length?a[c]:e[e.length-1]]},y.domain=function(g){if(!arguments.length)return e.slice();e=[];for(let c of g)c!=null&&!isNaN(c=+c)&&e.push(c);return e.sort(hf),p()},y.range=function(g){return arguments.length?(r=Array.from(g),p()):r.slice()},y.unknown=function(g){return arguments.length?(i=g,y):i},y.quantiles=function(){return a.slice()},y.copy=function(){return KD().domain(e).range(r).unknown(i)},ul.apply(y,arguments)}function JD(){var e=0,r=1,a=1,i=[.5],p=[0,1],y;function g(C){return C!=null&&C<=C?p[ag(i,C,0,a)]:y}function c(){var C=-1;for(i=new Array(a);++C<a;)i[C]=((C+1)*r-(C-a)*e)/(a+1);return g}return g.domain=function(C){return arguments.length?([e,r]=C,e=+e,r=+r,c()):[e,r]},g.range=function(C){return arguments.length?(a=(p=Array.from(C)).length-1,c()):p.slice()},g.invertExtent=function(C){var M=p.indexOf(C);return M<0?[NaN,NaN]:M<1?[e,i[0]]:M>=a?[i[a-1],r]:[i[M-1],i[M]]},g.unknown=function(C){return arguments.length&&(y=C),g},g.thresholds=function(){return i.slice()},g.copy=function(){return JD().domain([e,r]).range(p).unknown(y)},ul.apply(pf(g),arguments)}function eM(){var e=[.5],r=[0,1],a,i=1;function p(y){return y!=null&&y<=y?r[ag(e,y,0,i)]:a}return p.domain=function(y){return arguments.length?(e=Array.from(y),i=Math.min(e.length,r.length-1),p):e.slice()},p.range=function(y){return arguments.length?(r=Array.from(y),i=Math.min(e.length,r.length-1),p):r.slice()},p.invertExtent=function(y){var g=r.indexOf(y);return[e[g-1],e[g]]},p.unknown=function(y){return arguments.length?(a=y,p):a},p.copy=function(){return eM().domain(e).range(r).unknown(a)},ul.apply(p,arguments)}const j_=new Date,B_=new Date;function ci(e,r,a,i){function p(y){return e(y=arguments.length===0?new Date:new Date(+y)),y}return p.floor=y=>(e(y=new Date(+y)),y),p.ceil=y=>(e(y=new Date(y-1)),r(y,1),e(y),y),p.round=y=>{const g=p(y),c=p.ceil(y);return y-g<c-y?g:c},p.offset=(y,g)=>(r(y=new Date(+y),g==null?1:Math.floor(g)),y),p.range=(y,g,c)=>{const C=[];if(y=p.ceil(y),c=c==null?1:Math.floor(c),!(y<g)||!(c>0))return C;let M;do C.push(M=new Date(+y)),r(y,c),e(y);while(M<y&&y<g);return C},p.filter=y=>ci(g=>{if(g>=g)for(;e(g),!y(g);)g.setTime(g-1)},(g,c)=>{if(g>=g)if(c<0)for(;++c<=0;)for(;r(g,-1),!y(g););else for(;--c>=0;)for(;r(g,1),!y(g););}),a&&(p.count=(y,g)=>(j_.setTime(+y),B_.setTime(+g),e(j_),e(B_),Math.floor(a(j_,B_))),p.every=y=>(y=Math.floor(y),!isFinite(y)||!(y>0)?null:y>1?p.filter(i?g=>i(g)%y===0:g=>p.count(0,g)%y===0):p)),p}const pv=ci(()=>{},(e,r)=>{e.setTime(+e+r)},(e,r)=>r-e);pv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ci(r=>{r.setTime(Math.floor(r/e)*e)},(r,a)=>{r.setTime(+r+a*e)},(r,a)=>(a-r)/e):pv);pv.range;const eh=1e3,il=eh*60,th=il*60,ih=th*24,u2=ih*7,QP=ih*30,q_=ih*365,Md=ci(e=>{e.setTime(e-e.getMilliseconds())},(e,r)=>{e.setTime(+e+r*eh)},(e,r)=>(r-e)/eh,e=>e.getUTCSeconds());Md.range;const c2=ci(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*eh)},(e,r)=>{e.setTime(+e+r*il)},(e,r)=>(r-e)/il,e=>e.getMinutes());c2.range;const h2=ci(e=>{e.setUTCSeconds(0,0)},(e,r)=>{e.setTime(+e+r*il)},(e,r)=>(r-e)/il,e=>e.getUTCMinutes());h2.range;const f2=ci(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*eh-e.getMinutes()*il)},(e,r)=>{e.setTime(+e+r*th)},(e,r)=>(r-e)/th,e=>e.getHours());f2.range;const d2=ci(e=>{e.setUTCMinutes(0,0,0)},(e,r)=>{e.setTime(+e+r*th)},(e,r)=>(r-e)/th,e=>e.getUTCHours());d2.range;const sg=ci(e=>e.setHours(0,0,0,0),(e,r)=>e.setDate(e.getDate()+r),(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*il)/ih,e=>e.getDate()-1);sg.range;const Yv=ci(e=>{e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r)},(e,r)=>(r-e)/ih,e=>e.getUTCDate()-1);Yv.range;const tM=ci(e=>{e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r)},(e,r)=>(r-e)/ih,e=>Math.floor(e/ih));tM.range;function jd(e){return ci(r=>{r.setDate(r.getDate()-(r.getDay()+7-e)%7),r.setHours(0,0,0,0)},(r,a)=>{r.setDate(r.getDate()+a*7)},(r,a)=>(a-r-(a.getTimezoneOffset()-r.getTimezoneOffset())*il)/u2)}const Qv=jd(0),mv=jd(1),RU=jd(2),IU=jd(3),Vp=jd(4),kU=jd(5),UU=jd(6);Qv.range;mv.range;RU.range;IU.range;Vp.range;kU.range;UU.range;function Bd(e){return ci(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-e)%7),r.setUTCHours(0,0,0,0)},(r,a)=>{r.setUTCDate(r.getUTCDate()+a*7)},(r,a)=>(a-r)/u2)}const Xv=Bd(0),yv=Bd(1),OU=Bd(2),LU=Bd(3),Gp=Bd(4),zU=Bd(5),FU=Bd(6);Xv.range;yv.range;OU.range;LU.range;Gp.range;zU.range;FU.range;const p2=ci(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,r)=>{e.setMonth(e.getMonth()+r)},(e,r)=>r.getMonth()-e.getMonth()+(r.getFullYear()-e.getFullYear())*12,e=>e.getMonth());p2.range;const m2=ci(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCMonth(e.getUTCMonth()+r)},(e,r)=>r.getUTCMonth()-e.getUTCMonth()+(r.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());m2.range;const oh=ci(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r)},(e,r)=>r.getFullYear()-e.getFullYear(),e=>e.getFullYear());oh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ci(r=>{r.setFullYear(Math.floor(r.getFullYear()/e)*e),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,a)=>{r.setFullYear(r.getFullYear()+a*e)});oh.range;const sh=ci(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r)},(e,r)=>r.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());sh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ci(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/e)*e),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,a)=>{r.setUTCFullYear(r.getUTCFullYear()+a*e)});sh.range;function rM(e,r,a,i,p,y){const g=[[Md,1,eh],[Md,5,5*eh],[Md,15,15*eh],[Md,30,30*eh],[y,1,il],[y,5,5*il],[y,15,15*il],[y,30,30*il],[p,1,th],[p,3,3*th],[p,6,6*th],[p,12,12*th],[i,1,ih],[i,2,2*ih],[a,1,u2],[r,1,QP],[r,3,3*QP],[e,1,q_]];function c(M,T,U){const z=T<M;z&&([M,T]=[T,M]);const F=U&&typeof U.range=="function"?U:C(M,T,U),V=F?F.range(M,+T+1):[];return z?V.reverse():V}function C(M,T,U){const z=Math.abs(T-M)/U,F=Qx(([,,G])=>G).right(g,z);if(F===g.length)return e.every(Vb(M/q_,T/q_,U));if(F===0)return pv.every(Math.max(Vb(M,T,U),1));const[V,$]=g[z/g[F-1][2]<g[F][2]/z?F-1:F];return V.every($)}return[c,C]}const[NU,jU]=rM(sh,m2,Xv,tM,d2,h2),[BU,qU]=rM(oh,p2,Qv,sg,f2,c2);function H_(e){if(0<=e.y&&e.y<100){var r=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return r.setFullYear(e.y),r}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function $_(e){if(0<=e.y&&e.y<100){var r=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return r.setUTCFullYear(e.y),r}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Py(e,r,a){return{y:e,m:r,d:a,H:0,M:0,S:0,L:0}}function HU(e){var r=e.dateTime,a=e.date,i=e.time,p=e.periods,y=e.days,g=e.shortDays,c=e.months,C=e.shortMonths,M=Ay(p),T=Cy(p),U=Ay(y),z=Cy(y),F=Ay(g),V=Cy(g),$=Ay(c),G=Cy(c),Q=Ay(C),ee=Cy(C),ae={a:ct,A:nt,b:Ct,B:Me,c:null,d:rA,e:rA,f:fO,g:SO,G:PO,H:uO,I:cO,j:hO,L:nM,m:dO,M:pO,p:et,q:st,Q:iA,s:oA,S:mO,u:yO,U:gO,V:vO,w:_O,W:bO,x:null,X:null,y:xO,Y:wO,Z:AO,"%":aA},_e={a:gt,A:Et,b:Zt,B:jt,c:null,d:nA,e:nA,f:TO,g:NO,G:BO,H:CO,I:DO,j:MO,L:iM,m:EO,M:RO,p:ar,q:Jt,Q:iA,s:oA,S:IO,u:kO,U:UO,V:OO,w:LO,W:zO,x:null,X:null,y:FO,Y:jO,Z:qO,"%":aA},ve={a:At,A:ot,b:ft,B:rt,c:It,d:eA,e:eA,f:iO,g:JP,G:KP,H:tA,I:tA,j:tO,L:aO,m:eO,M:rO,p:ht,q:JU,Q:sO,s:lO,S:nO,u:ZU,U:YU,V:QU,w:WU,W:XU,x:Ut,X:Be,y:JP,Y:KP,Z:KU,"%":oO};ae.x=Ae(a,ae),ae.X=Ae(i,ae),ae.c=Ae(r,ae),_e.x=Ae(a,_e),_e.X=Ae(i,_e),_e.c=Ae(r,_e);function Ae(wt,Gt){return function(zt){var $e=[],$t=-1,Ot=0,Sr=wt.length,Rr,Lr,Nn;for(zt instanceof Date||(zt=new Date(+zt));++$t<Sr;)wt.charCodeAt($t)===37&&($e.push(wt.slice(Ot,$t)),(Lr=XP[Rr=wt.charAt(++$t)])!=null?Rr=wt.charAt(++$t):Lr=Rr==="e"?" ":"0",(Nn=Gt[Rr])&&(Rr=Nn(zt,Lr)),$e.push(Rr),Ot=$t+1);return $e.push(wt.slice(Ot,$t)),$e.join("")}}function Ee(wt,Gt){return function(zt){var $e=Py(1900,void 0,1),$t=Fe($e,wt,zt+="",0),Ot,Sr;if($t!=zt.length)return null;if("Q"in $e)return new Date($e.Q);if("s"in $e)return new Date($e.s*1e3+("L"in $e?$e.L:0));if(Gt&&!("Z"in $e)&&($e.Z=0),"p"in $e&&($e.H=$e.H%12+$e.p*12),$e.m===void 0&&($e.m="q"in $e?$e.q:0),"V"in $e){if($e.V<1||$e.V>53)return null;"w"in $e||($e.w=1),"Z"in $e?(Ot=$_(Py($e.y,0,1)),Sr=Ot.getUTCDay(),Ot=Sr>4||Sr===0?yv.ceil(Ot):yv(Ot),Ot=Yv.offset(Ot,($e.V-1)*7),$e.y=Ot.getUTCFullYear(),$e.m=Ot.getUTCMonth(),$e.d=Ot.getUTCDate()+($e.w+6)%7):(Ot=H_(Py($e.y,0,1)),Sr=Ot.getDay(),Ot=Sr>4||Sr===0?mv.ceil(Ot):mv(Ot),Ot=sg.offset(Ot,($e.V-1)*7),$e.y=Ot.getFullYear(),$e.m=Ot.getMonth(),$e.d=Ot.getDate()+($e.w+6)%7)}else("W"in $e||"U"in $e)&&("w"in $e||($e.w="u"in $e?$e.u%7:"W"in $e?1:0),Sr="Z"in $e?$_(Py($e.y,0,1)).getUTCDay():H_(Py($e.y,0,1)).getDay(),$e.m=0,$e.d="W"in $e?($e.w+6)%7+$e.W*7-(Sr+5)%7:$e.w+$e.U*7-(Sr+6)%7);return"Z"in $e?($e.H+=$e.Z/100|0,$e.M+=$e.Z%100,$_($e)):H_($e)}}function Fe(wt,Gt,zt,$e){for(var $t=0,Ot=Gt.length,Sr=zt.length,Rr,Lr;$t<Ot;){if($e>=Sr)return-1;if(Rr=Gt.charCodeAt($t++),Rr===37){if(Rr=Gt.charAt($t++),Lr=ve[Rr in XP?Gt.charAt($t++):Rr],!Lr||($e=Lr(wt,zt,$e))<0)return-1}else if(Rr!=zt.charCodeAt($e++))return-1}return $e}function ht(wt,Gt,zt){var $e=M.exec(Gt.slice(zt));return $e?(wt.p=T.get($e[0].toLowerCase()),zt+$e[0].length):-1}function At(wt,Gt,zt){var $e=F.exec(Gt.slice(zt));return $e?(wt.w=V.get($e[0].toLowerCase()),zt+$e[0].length):-1}function ot(wt,Gt,zt){var $e=U.exec(Gt.slice(zt));return $e?(wt.w=z.get($e[0].toLowerCase()),zt+$e[0].length):-1}function ft(wt,Gt,zt){var $e=Q.exec(Gt.slice(zt));return $e?(wt.m=ee.get($e[0].toLowerCase()),zt+$e[0].length):-1}function rt(wt,Gt,zt){var $e=$.exec(Gt.slice(zt));return $e?(wt.m=G.get($e[0].toLowerCase()),zt+$e[0].length):-1}function It(wt,Gt,zt){return Fe(wt,r,Gt,zt)}function Ut(wt,Gt,zt){return Fe(wt,a,Gt,zt)}function Be(wt,Gt,zt){return Fe(wt,i,Gt,zt)}function ct(wt){return g[wt.getDay()]}function nt(wt){return y[wt.getDay()]}function Ct(wt){return C[wt.getMonth()]}function Me(wt){return c[wt.getMonth()]}function et(wt){return p[+(wt.getHours()>=12)]}function st(wt){return 1+~~(wt.getMonth()/3)}function gt(wt){return g[wt.getUTCDay()]}function Et(wt){return y[wt.getUTCDay()]}function Zt(wt){return C[wt.getUTCMonth()]}function jt(wt){return c[wt.getUTCMonth()]}function ar(wt){return p[+(wt.getUTCHours()>=12)]}function Jt(wt){return 1+~~(wt.getUTCMonth()/3)}return{format:function(wt){var Gt=Ae(wt+="",ae);return Gt.toString=function(){return wt},Gt},parse:function(wt){var Gt=Ee(wt+="",!1);return Gt.toString=function(){return wt},Gt},utcFormat:function(wt){var Gt=Ae(wt+="",_e);return Gt.toString=function(){return wt},Gt},utcParse:function(wt){var Gt=Ee(wt+="",!0);return Gt.toString=function(){return wt},Gt}}}var XP={"-":"",_:" ",0:"0"},Ci=/^\s*\d+/,$U=/^%/,VU=/[\\^$*+?|[\]().{}]/g;function en(e,r,a){var i=e<0?"-":"",p=(i?-e:e)+"",y=p.length;return i+(y<a?new Array(a-y+1).join(r)+p:p)}function GU(e){return e.replace(VU,"\\$&")}function Ay(e){return new RegExp("^(?:"+e.map(GU).join("|")+")","i")}function Cy(e){return new Map(e.map((r,a)=>[r.toLowerCase(),a]))}function WU(e,r,a){var i=Ci.exec(r.slice(a,a+1));return i?(e.w=+i[0],a+i[0].length):-1}function ZU(e,r,a){var i=Ci.exec(r.slice(a,a+1));return i?(e.u=+i[0],a+i[0].length):-1}function YU(e,r,a){var i=Ci.exec(r.slice(a,a+2));return i?(e.U=+i[0],a+i[0].length):-1}function QU(e,r,a){var i=Ci.exec(r.slice(a,a+2));return i?(e.V=+i[0],a+i[0].length):-1}function XU(e,r,a){var i=Ci.exec(r.slice(a,a+2));return i?(e.W=+i[0],a+i[0].length):-1}function KP(e,r,a){var i=Ci.exec(r.slice(a,a+4));return i?(e.y=+i[0],a+i[0].length):-1}function JP(e,r,a){var i=Ci.exec(r.slice(a,a+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),a+i[0].length):-1}function KU(e,r,a){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(a,a+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),a+i[0].length):-1}function JU(e,r,a){var i=Ci.exec(r.slice(a,a+1));return i?(e.q=i[0]*3-3,a+i[0].length):-1}function eO(e,r,a){var i=Ci.exec(r.slice(a,a+2));return i?(e.m=i[0]-1,a+i[0].length):-1}function eA(e,r,a){var i=Ci.exec(r.slice(a,a+2));return i?(e.d=+i[0],a+i[0].length):-1}function tO(e,r,a){var i=Ci.exec(r.slice(a,a+3));return i?(e.m=0,e.d=+i[0],a+i[0].length):-1}function tA(e,r,a){var i=Ci.exec(r.slice(a,a+2));return i?(e.H=+i[0],a+i[0].length):-1}function rO(e,r,a){var i=Ci.exec(r.slice(a,a+2));return i?(e.M=+i[0],a+i[0].length):-1}function nO(e,r,a){var i=Ci.exec(r.slice(a,a+2));return i?(e.S=+i[0],a+i[0].length):-1}function aO(e,r,a){var i=Ci.exec(r.slice(a,a+3));return i?(e.L=+i[0],a+i[0].length):-1}function iO(e,r,a){var i=Ci.exec(r.slice(a,a+6));return i?(e.L=Math.floor(i[0]/1e3),a+i[0].length):-1}function oO(e,r,a){var i=$U.exec(r.slice(a,a+1));return i?a+i[0].length:-1}function sO(e,r,a){var i=Ci.exec(r.slice(a));return i?(e.Q=+i[0],a+i[0].length):-1}function lO(e,r,a){var i=Ci.exec(r.slice(a));return i?(e.s=+i[0],a+i[0].length):-1}function rA(e,r){return en(e.getDate(),r,2)}function uO(e,r){return en(e.getHours(),r,2)}function cO(e,r){return en(e.getHours()%12||12,r,2)}function hO(e,r){return en(1+sg.count(oh(e),e),r,3)}function nM(e,r){return en(e.getMilliseconds(),r,3)}function fO(e,r){return nM(e,r)+"000"}function dO(e,r){return en(e.getMonth()+1,r,2)}function pO(e,r){return en(e.getMinutes(),r,2)}function mO(e,r){return en(e.getSeconds(),r,2)}function yO(e){var r=e.getDay();return r===0?7:r}function gO(e,r){return en(Qv.count(oh(e)-1,e),r,2)}function aM(e){var r=e.getDay();return r>=4||r===0?Vp(e):Vp.ceil(e)}function vO(e,r){return e=aM(e),en(Vp.count(oh(e),e)+(oh(e).getDay()===4),r,2)}function _O(e){return e.getDay()}function bO(e,r){return en(mv.count(oh(e)-1,e),r,2)}function xO(e,r){return en(e.getFullYear()%100,r,2)}function SO(e,r){return e=aM(e),en(e.getFullYear()%100,r,2)}function wO(e,r){return en(e.getFullYear()%1e4,r,4)}function PO(e,r){var a=e.getDay();return e=a>=4||a===0?Vp(e):Vp.ceil(e),en(e.getFullYear()%1e4,r,4)}function AO(e){var r=e.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+en(r/60|0,"0",2)+en(r%60,"0",2)}function nA(e,r){return en(e.getUTCDate(),r,2)}function CO(e,r){return en(e.getUTCHours(),r,2)}function DO(e,r){return en(e.getUTCHours()%12||12,r,2)}function MO(e,r){return en(1+Yv.count(sh(e),e),r,3)}function iM(e,r){return en(e.getUTCMilliseconds(),r,3)}function TO(e,r){return iM(e,r)+"000"}function EO(e,r){return en(e.getUTCMonth()+1,r,2)}function RO(e,r){return en(e.getUTCMinutes(),r,2)}function IO(e,r){return en(e.getUTCSeconds(),r,2)}function kO(e){var r=e.getUTCDay();return r===0?7:r}function UO(e,r){return en(Xv.count(sh(e)-1,e),r,2)}function oM(e){var r=e.getUTCDay();return r>=4||r===0?Gp(e):Gp.ceil(e)}function OO(e,r){return e=oM(e),en(Gp.count(sh(e),e)+(sh(e).getUTCDay()===4),r,2)}function LO(e){return e.getUTCDay()}function zO(e,r){return en(yv.count(sh(e)-1,e),r,2)}function FO(e,r){return en(e.getUTCFullYear()%100,r,2)}function NO(e,r){return e=oM(e),en(e.getUTCFullYear()%100,r,2)}function jO(e,r){return en(e.getUTCFullYear()%1e4,r,4)}function BO(e,r){var a=e.getUTCDay();return e=a>=4||a===0?Gp(e):Gp.ceil(e),en(e.getUTCFullYear()%1e4,r,4)}function qO(){return"+0000"}function aA(){return"%"}function iA(e){return+e}function oA(e){return Math.floor(+e/1e3)}var Ep,sM,lM;HO({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function HO(e){return Ep=HU(e),sM=Ep.format,Ep.parse,lM=Ep.utcFormat,Ep.utcParse,Ep}function $O(e){return new Date(e)}function VO(e){return e instanceof Date?+e:+new Date(+e)}function y2(e,r,a,i,p,y,g,c,C,M){var T=r2(),U=T.invert,z=T.domain,F=M(".%L"),V=M(":%S"),$=M("%I:%M"),G=M("%I %p"),Q=M("%a %d"),ee=M("%b %d"),ae=M("%B"),_e=M("%Y");function ve(Ae){return(C(Ae)<Ae?F:c(Ae)<Ae?V:g(Ae)<Ae?$:y(Ae)<Ae?G:i(Ae)<Ae?p(Ae)<Ae?Q:ee:a(Ae)<Ae?ae:_e)(Ae)}return T.invert=function(Ae){return new Date(U(Ae))},T.domain=function(Ae){return arguments.length?z(Array.from(Ae,VO)):z().map($O)},T.ticks=function(Ae){var Ee=z();return e(Ee[0],Ee[Ee.length-1],Ae??10)},T.tickFormat=function(Ae,Ee){return Ee==null?ve:M(Ee)},T.nice=function(Ae){var Ee=z();return(!Ae||typeof Ae.range!="function")&&(Ae=r(Ee[0],Ee[Ee.length-1],Ae??10)),Ae?z(ZD(Ee,Ae)):T},T.copy=function(){return og(T,y2(e,r,a,i,p,y,g,c,C,M))},T}function GO(){return ul.apply(y2(BU,qU,oh,p2,Qv,sg,f2,c2,Md,sM).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function WO(){return ul.apply(y2(NU,jU,sh,m2,Xv,Yv,d2,h2,Md,lM).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Kv(){var e=0,r=1,a,i,p,y,g=Ao,c=!1,C;function M(U){return U==null||isNaN(U=+U)?C:g(p===0?.5:(U=(y(U)-a)*p,c?Math.max(0,Math.min(1,U)):U))}M.domain=function(U){return arguments.length?([e,r]=U,a=y(e=+e),i=y(r=+r),p=a===i?0:1/(i-a),M):[e,r]},M.clamp=function(U){return arguments.length?(c=!!U,M):c},M.interpolator=function(U){return arguments.length?(g=U,M):g};function T(U){return function(z){var F,V;return arguments.length?([F,V]=z,g=U(F,V),M):[g(0),g(1)]}}return M.range=T(rm),M.rangeRound=T(t2),M.unknown=function(U){return arguments.length?(C=U,M):C},function(U){return y=U,a=U(e),i=U(r),p=a===i?0:1/(i-a),M}}function mf(e,r){return r.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function uM(){var e=pf(Kv()(Ao));return e.copy=function(){return mf(e,uM())},ch.apply(e,arguments)}function cM(){var e=i2(Kv()).domain([1,10]);return e.copy=function(){return mf(e,cM()).base(e.base())},ch.apply(e,arguments)}function hM(){var e=o2(Kv());return e.copy=function(){return mf(e,hM()).constant(e.constant())},ch.apply(e,arguments)}function g2(){var e=s2(Kv());return e.copy=function(){return mf(e,g2()).exponent(e.exponent())},ch.apply(e,arguments)}function ZO(){return g2.apply(null,arguments).exponent(.5)}function fM(){var e=[],r=Ao;function a(i){if(i!=null&&!isNaN(i=+i))return r((ag(e,i,1)-1)/(e.length-1))}return a.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let p of i)p!=null&&!isNaN(p=+p)&&e.push(p);return e.sort(hf),a},a.interpolator=function(i){return arguments.length?(r=i,a):r},a.range=function(){return e.map((i,p)=>r(p/(e.length-1)))},a.quantiles=function(i){return Array.from({length:i+1},(p,y)=>kk(e,y/i))},a.copy=function(){return fM(r).domain(e)},ch.apply(a,arguments)}function Jv(){var e=0,r=.5,a=1,i=1,p,y,g,c,C,M=Ao,T,U=!1,z;function F($){return isNaN($=+$)?z:($=.5+(($=+T($))-y)*(i*$<i*y?c:C),M(U?Math.max(0,Math.min(1,$)):$))}F.domain=function($){return arguments.length?([e,r,a]=$,p=T(e=+e),y=T(r=+r),g=T(a=+a),c=p===y?0:.5/(y-p),C=y===g?0:.5/(g-y),i=y<p?-1:1,F):[e,r,a]},F.clamp=function($){return arguments.length?(U=!!$,F):U},F.interpolator=function($){return arguments.length?(M=$,F):M};function V($){return function(G){var Q,ee,ae;return arguments.length?([Q,ee,ae]=G,M=oU($,[Q,ee,ae]),F):[M(0),M(.5),M(1)]}}return F.range=V(rm),F.rangeRound=V(t2),F.unknown=function($){return arguments.length?(z=$,F):z},function($){return T=$,p=$(e),y=$(r),g=$(a),c=p===y?0:.5/(y-p),C=y===g?0:.5/(g-y),i=y<p?-1:1,F}}function dM(){var e=pf(Jv()(Ao));return e.copy=function(){return mf(e,dM())},ch.apply(e,arguments)}function pM(){var e=i2(Jv()).domain([.1,1,10]);return e.copy=function(){return mf(e,pM()).base(e.base())},ch.apply(e,arguments)}function mM(){var e=o2(Jv());return e.copy=function(){return mf(e,mM()).constant(e.constant())},ch.apply(e,arguments)}function v2(){var e=s2(Jv());return e.copy=function(){return mf(e,v2()).exponent(e.exponent())},ch.apply(e,arguments)}function YO(){return v2.apply(null,arguments).exponent(.5)}const Ey=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Kx,scaleDiverging:dM,scaleDivergingLog:pM,scaleDivergingPow:v2,scaleDivergingSqrt:YO,scaleDivergingSymlog:mM,scaleIdentity:WD,scaleImplicit:Gb,scaleLinear:GD,scaleLog:YD,scaleOrdinal:Xx,scalePoint:Lk,scalePow:l2,scaleQuantile:KD,scaleQuantize:JD,scaleRadial:XD,scaleSequential:uM,scaleSequentialLog:cM,scaleSequentialPow:g2,scaleSequentialQuantile:fM,scaleSequentialSqrt:ZO,scaleSequentialSymlog:hM,scaleSqrt:TU,scaleSymlog:QD,scaleThreshold:eM,scaleTime:GO,scaleUtc:WO,tickFormat:VD},Symbol.toStringTag,{value:"Module"}));var yf=e=>e.chartData,QO=at([yf],e=>{var r=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:r,dataStartIndex:0}}),_2=(e,r,a,i)=>i?QO(e):yf(e);function Wp(e){if(Array.isArray(e)&&e.length===2){var[r,a]=e;if(Es(r)&&Es(a))return!0}return!1}function sA(e,r,a){return a?e:[Math.min(e[0],r[0]),Math.max(e[1],r[1])]}function XO(e,r){if(r&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[a,i]=e,p,y;if(Es(a))p=a;else if(typeof a=="function")return;if(Es(i))y=i;else if(typeof i=="function")return;var g=[p,y];if(Wp(g))return g}}function KO(e,r,a){if(!(!a&&r==null)){if(typeof e=="function"&&r!=null)try{var i=e(r,a);if(Wp(i))return sA(i,r,a)}catch{}if(Array.isArray(e)&&e.length===2){var[p,y]=e,g,c;if(p==="auto")r!=null&&(g=Math.min(...r));else if(Pr(p))g=p;else if(typeof p=="function")try{r!=null&&(g=p(r?.[0]))}catch{}else if(typeof p=="string"&&Jw.test(p)){var C=Jw.exec(p);if(C==null||r==null)g=void 0;else{var M=+C[1];g=r[0]-M}}else g=r?.[0];if(y==="auto")r!=null&&(c=Math.max(...r));else if(Pr(y))c=y;else if(typeof y=="function")try{r!=null&&(c=y(r?.[1]))}catch{}else if(typeof y=="string"&&eP.test(y)){var T=eP.exec(y);if(T==null||r==null)c=void 0;else{var U=+T[1];c=r[1]+U}}else c=r?.[1];var z=[g,c];if(Wp(z))return r==null?z:sA(z,r,a)}}}var nm=1e9,JO={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},x2,ta=!0,ll="[DecimalError] ",Id=ll+"Invalid argument: ",b2=ll+"Exponent out of range: ",am=Math.floor,Ad=Math.pow,eL=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Cs,Si=1e7,Yn=7,yM=9007199254740991,gv=am(yM/Yn),Yt={};Yt.absoluteValue=Yt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Yt.comparedTo=Yt.cmp=function(e){var r,a,i,p,y=this;if(e=new y.constructor(e),y.s!==e.s)return y.s||-e.s;if(y.e!==e.e)return y.e>e.e^y.s<0?1:-1;for(i=y.d.length,p=e.d.length,r=0,a=i<p?i:p;r<a;++r)if(y.d[r]!==e.d[r])return y.d[r]>e.d[r]^y.s<0?1:-1;return i===p?0:i>p^y.s<0?1:-1};Yt.decimalPlaces=Yt.dp=function(){var e=this,r=e.d.length-1,a=(r-e.e)*Yn;if(r=e.d[r],r)for(;r%10==0;r/=10)a--;return a<0?0:a};Yt.dividedBy=Yt.div=function(e){return nh(this,new this.constructor(e))};Yt.dividedToIntegerBy=Yt.idiv=function(e){var r=this,a=r.constructor;return Rn(nh(r,new a(e),0,1),a.precision)};Yt.equals=Yt.eq=function(e){return!this.cmp(e)};Yt.exponent=function(){return Ha(this)};Yt.greaterThan=Yt.gt=function(e){return this.cmp(e)>0};Yt.greaterThanOrEqualTo=Yt.gte=function(e){return this.cmp(e)>=0};Yt.isInteger=Yt.isint=function(){return this.e>this.d.length-2};Yt.isNegative=Yt.isneg=function(){return this.s<0};Yt.isPositive=Yt.ispos=function(){return this.s>0};Yt.isZero=function(){return this.s===0};Yt.lessThan=Yt.lt=function(e){return this.cmp(e)<0};Yt.lessThanOrEqualTo=Yt.lte=function(e){return this.cmp(e)<1};Yt.logarithm=Yt.log=function(e){var r,a=this,i=a.constructor,p=i.precision,y=p+5;if(e===void 0)e=new i(10);else if(e=new i(e),e.s<1||e.eq(Cs))throw Error(ll+"NaN");if(a.s<1)throw Error(ll+(a.s?"NaN":"-Infinity"));return a.eq(Cs)?new i(0):(ta=!1,r=nh(Wy(a,y),Wy(e,y),y),ta=!0,Rn(r,p))};Yt.minus=Yt.sub=function(e){var r=this;return e=new r.constructor(e),r.s==e.s?_M(r,e):gM(r,(e.s=-e.s,e))};Yt.modulo=Yt.mod=function(e){var r,a=this,i=a.constructor,p=i.precision;if(e=new i(e),!e.s)throw Error(ll+"NaN");return a.s?(ta=!1,r=nh(a,e,0,1).times(e),ta=!0,a.minus(r)):Rn(new i(a),p)};Yt.naturalExponential=Yt.exp=function(){return vM(this)};Yt.naturalLogarithm=Yt.ln=function(){return Wy(this)};Yt.negated=Yt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Yt.plus=Yt.add=function(e){var r=this;return e=new r.constructor(e),r.s==e.s?gM(r,e):_M(r,(e.s=-e.s,e))};Yt.precision=Yt.sd=function(e){var r,a,i,p=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Id+e);if(r=Ha(p)+1,i=p.d.length-1,a=i*Yn+1,i=p.d[i],i){for(;i%10==0;i/=10)a--;for(i=p.d[0];i>=10;i/=10)a++}return e&&r>a?r:a};Yt.squareRoot=Yt.sqrt=function(){var e,r,a,i,p,y,g,c=this,C=c.constructor;if(c.s<1){if(!c.s)return new C(0);throw Error(ll+"NaN")}for(e=Ha(c),ta=!1,p=Math.sqrt(+c),p==0||p==1/0?(r=tc(c.d),(r.length+e)%2==0&&(r+="0"),p=Math.sqrt(r),e=am((e+1)/2)-(e<0||e%2),p==1/0?r="5e"+e:(r=p.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),i=new C(r)):i=new C(p.toString()),a=C.precision,p=g=a+3;;)if(y=i,i=y.plus(nh(c,y,g+2)).times(.5),tc(y.d).slice(0,g)===(r=tc(i.d)).slice(0,g)){if(r=r.slice(g-3,g+1),p==g&&r=="4999"){if(Rn(y,a+1,0),y.times(y).eq(c)){i=y;break}}else if(r!="9999")break;g+=4}return ta=!0,Rn(i,a)};Yt.times=Yt.mul=function(e){var r,a,i,p,y,g,c,C,M,T=this,U=T.constructor,z=T.d,F=(e=new U(e)).d;if(!T.s||!e.s)return new U(0);for(e.s*=T.s,a=T.e+e.e,C=z.length,M=F.length,C<M&&(y=z,z=F,F=y,g=C,C=M,M=g),y=[],g=C+M,i=g;i--;)y.push(0);for(i=M;--i>=0;){for(r=0,p=C+i;p>i;)c=y[p]+F[i]*z[p-i-1]+r,y[p--]=c%Si|0,r=c/Si|0;y[p]=(y[p]+r)%Si|0}for(;!y[--g];)y.pop();return r?++a:y.shift(),e.d=y,e.e=a,ta?Rn(e,U.precision):e};Yt.toDecimalPlaces=Yt.todp=function(e,r){var a=this,i=a.constructor;return a=new i(a),e===void 0?a:(ic(e,0,nm),r===void 0?r=i.rounding:ic(r,0,8),Rn(a,e+Ha(a)+1,r))};Yt.toExponential=function(e,r){var a,i=this,p=i.constructor;return e===void 0?a=Ld(i,!0):(ic(e,0,nm),r===void 0?r=p.rounding:ic(r,0,8),i=Rn(new p(i),e+1,r),a=Ld(i,!0,e+1)),a};Yt.toFixed=function(e,r){var a,i,p=this,y=p.constructor;return e===void 0?Ld(p):(ic(e,0,nm),r===void 0?r=y.rounding:ic(r,0,8),i=Rn(new y(p),e+Ha(p)+1,r),a=Ld(i.abs(),!1,e+Ha(i)+1),p.isneg()&&!p.isZero()?"-"+a:a)};Yt.toInteger=Yt.toint=function(){var e=this,r=e.constructor;return Rn(new r(e),Ha(e)+1,r.rounding)};Yt.toNumber=function(){return+this};Yt.toPower=Yt.pow=function(e){var r,a,i,p,y,g,c=this,C=c.constructor,M=12,T=+(e=new C(e));if(!e.s)return new C(Cs);if(c=new C(c),!c.s){if(e.s<1)throw Error(ll+"Infinity");return c}if(c.eq(Cs))return c;if(i=C.precision,e.eq(Cs))return Rn(c,i);if(r=e.e,a=e.d.length-1,g=r>=a,y=c.s,g){if((a=T<0?-T:T)<=yM){for(p=new C(Cs),r=Math.ceil(i/Yn+4),ta=!1;a%2&&(p=p.times(c),uA(p.d,r)),a=am(a/2),a!==0;)c=c.times(c),uA(c.d,r);return ta=!0,e.s<0?new C(Cs).div(p):Rn(p,i)}}else if(y<0)throw Error(ll+"NaN");return y=y<0&&e.d[Math.max(r,a)]&1?-1:1,c.s=1,ta=!1,p=e.times(Wy(c,i+M)),ta=!0,p=vM(p),p.s=y,p};Yt.toPrecision=function(e,r){var a,i,p=this,y=p.constructor;return e===void 0?(a=Ha(p),i=Ld(p,a<=y.toExpNeg||a>=y.toExpPos)):(ic(e,1,nm),r===void 0?r=y.rounding:ic(r,0,8),p=Rn(new y(p),e,r),a=Ha(p),i=Ld(p,e<=a||a<=y.toExpNeg,e)),i};Yt.toSignificantDigits=Yt.tosd=function(e,r){var a=this,i=a.constructor;return e===void 0?(e=i.precision,r=i.rounding):(ic(e,1,nm),r===void 0?r=i.rounding:ic(r,0,8)),Rn(new i(a),e,r)};Yt.toString=Yt.valueOf=Yt.val=Yt.toJSON=Yt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,r=Ha(e),a=e.constructor;return Ld(e,r<=a.toExpNeg||r>=a.toExpPos)};function gM(e,r){var a,i,p,y,g,c,C,M,T=e.constructor,U=T.precision;if(!e.s||!r.s)return r.s||(r=new T(e)),ta?Rn(r,U):r;if(C=e.d,M=r.d,g=e.e,p=r.e,C=C.slice(),y=g-p,y){for(y<0?(i=C,y=-y,c=M.length):(i=M,p=g,c=C.length),g=Math.ceil(U/Yn),c=g>c?g+1:c+1,y>c&&(y=c,i.length=1),i.reverse();y--;)i.push(0);i.reverse()}for(c=C.length,y=M.length,c-y<0&&(y=c,i=M,M=C,C=i),a=0;y;)a=(C[--y]=C[y]+M[y]+a)/Si|0,C[y]%=Si;for(a&&(C.unshift(a),++p),c=C.length;C[--c]==0;)C.pop();return r.d=C,r.e=p,ta?Rn(r,U):r}function ic(e,r,a){if(e!==~~e||e<r||e>a)throw Error(Id+e)}function tc(e){var r,a,i,p=e.length-1,y="",g=e[0];if(p>0){for(y+=g,r=1;r<p;r++)i=e[r]+"",a=Yn-i.length,a&&(y+=lf(a)),y+=i;g=e[r],i=g+"",a=Yn-i.length,a&&(y+=lf(a))}else if(g===0)return"0";for(;g%10===0;)g/=10;return y+g}var nh=(function(){function e(i,p){var y,g=0,c=i.length;for(i=i.slice();c--;)y=i[c]*p+g,i[c]=y%Si|0,g=y/Si|0;return g&&i.unshift(g),i}function r(i,p,y,g){var c,C;if(y!=g)C=y>g?1:-1;else for(c=C=0;c<y;c++)if(i[c]!=p[c]){C=i[c]>p[c]?1:-1;break}return C}function a(i,p,y){for(var g=0;y--;)i[y]-=g,g=i[y]<p[y]?1:0,i[y]=g*Si+i[y]-p[y];for(;!i[0]&&i.length>1;)i.shift()}return function(i,p,y,g){var c,C,M,T,U,z,F,V,$,G,Q,ee,ae,_e,ve,Ae,Ee,Fe,ht=i.constructor,At=i.s==p.s?1:-1,ot=i.d,ft=p.d;if(!i.s)return new ht(i);if(!p.s)throw Error(ll+"Division by zero");for(C=i.e-p.e,Ee=ft.length,ve=ot.length,F=new ht(At),V=F.d=[],M=0;ft[M]==(ot[M]||0);)++M;if(ft[M]>(ot[M]||0)&&--C,y==null?ee=y=ht.precision:g?ee=y+(Ha(i)-Ha(p))+1:ee=y,ee<0)return new ht(0);if(ee=ee/Yn+2|0,M=0,Ee==1)for(T=0,ft=ft[0],ee++;(M<ve||T)&&ee--;M++)ae=T*Si+(ot[M]||0),V[M]=ae/ft|0,T=ae%ft|0;else{for(T=Si/(ft[0]+1)|0,T>1&&(ft=e(ft,T),ot=e(ot,T),Ee=ft.length,ve=ot.length),_e=Ee,$=ot.slice(0,Ee),G=$.length;G<Ee;)$[G++]=0;Fe=ft.slice(),Fe.unshift(0),Ae=ft[0],ft[1]>=Si/2&&++Ae;do T=0,c=r(ft,$,Ee,G),c<0?(Q=$[0],Ee!=G&&(Q=Q*Si+($[1]||0)),T=Q/Ae|0,T>1?(T>=Si&&(T=Si-1),U=e(ft,T),z=U.length,G=$.length,c=r(U,$,z,G),c==1&&(T--,a(U,Ee<z?Fe:ft,z))):(T==0&&(c=T=1),U=ft.slice()),z=U.length,z<G&&U.unshift(0),a($,U,G),c==-1&&(G=$.length,c=r(ft,$,Ee,G),c<1&&(T++,a($,Ee<G?Fe:ft,G))),G=$.length):c===0&&(T++,$=[0]),V[M++]=T,c&&$[0]?$[G++]=ot[_e]||0:($=[ot[_e]],G=1);while((_e++<ve||$[0]!==void 0)&&ee--)}return V[0]||V.shift(),F.e=C,Rn(F,g?y+Ha(F)+1:y)}})();function vM(e,r){var a,i,p,y,g,c,C=0,M=0,T=e.constructor,U=T.precision;if(Ha(e)>16)throw Error(b2+Ha(e));if(!e.s)return new T(Cs);for(ta=!1,c=U,g=new T(.03125);e.abs().gte(.1);)e=e.times(g),M+=5;for(i=Math.log(Ad(2,M))/Math.LN10*2+5|0,c+=i,a=p=y=new T(Cs),T.precision=c;;){if(p=Rn(p.times(e),c),a=a.times(++C),g=y.plus(nh(p,a,c)),tc(g.d).slice(0,c)===tc(y.d).slice(0,c)){for(;M--;)y=Rn(y.times(y),c);return T.precision=U,r==null?(ta=!0,Rn(y,U)):y}y=g}}function Ha(e){for(var r=e.e*Yn,a=e.d[0];a>=10;a/=10)r++;return r}function V_(e,r,a){if(r>e.LN10.sd())throw ta=!0,a&&(e.precision=a),Error(ll+"LN10 precision limit exceeded");return Rn(new e(e.LN10),r)}function lf(e){for(var r="";e--;)r+="0";return r}function Wy(e,r){var a,i,p,y,g,c,C,M,T,U=1,z=10,F=e,V=F.d,$=F.constructor,G=$.precision;if(F.s<1)throw Error(ll+(F.s?"NaN":"-Infinity"));if(F.eq(Cs))return new $(0);if(r==null?(ta=!1,M=G):M=r,F.eq(10))return r==null&&(ta=!0),V_($,M);if(M+=z,$.precision=M,a=tc(V),i=a.charAt(0),y=Ha(F),Math.abs(y)<15e14){for(;i<7&&i!=1||i==1&&a.charAt(1)>3;)F=F.times(e),a=tc(F.d),i=a.charAt(0),U++;y=Ha(F),i>1?(F=new $("0."+a),y++):F=new $(i+"."+a.slice(1))}else return C=V_($,M+2,G).times(y+""),F=Wy(new $(i+"."+a.slice(1)),M-z).plus(C),$.precision=G,r==null?(ta=!0,Rn(F,G)):F;for(c=g=F=nh(F.minus(Cs),F.plus(Cs),M),T=Rn(F.times(F),M),p=3;;){if(g=Rn(g.times(T),M),C=c.plus(nh(g,new $(p),M)),tc(C.d).slice(0,M)===tc(c.d).slice(0,M))return c=c.times(2),y!==0&&(c=c.plus(V_($,M+2,G).times(y+""))),c=nh(c,new $(U),M),$.precision=G,r==null?(ta=!0,Rn(c,G)):c;c=C,p+=2}}function lA(e,r){var a,i,p;for((a=r.indexOf("."))>-1&&(r=r.replace(".","")),(i=r.search(/e/i))>0?(a<0&&(a=i),a+=+r.slice(i+1),r=r.substring(0,i)):a<0&&(a=r.length),i=0;r.charCodeAt(i)===48;)++i;for(p=r.length;r.charCodeAt(p-1)===48;)--p;if(r=r.slice(i,p),r){if(p-=i,a=a-i-1,e.e=am(a/Yn),e.d=[],i=(a+1)%Yn,a<0&&(i+=Yn),i<p){for(i&&e.d.push(+r.slice(0,i)),p-=Yn;i<p;)e.d.push(+r.slice(i,i+=Yn));r=r.slice(i),i=Yn-r.length}else i-=p;for(;i--;)r+="0";if(e.d.push(+r),ta&&(e.e>gv||e.e<-gv))throw Error(b2+a)}else e.s=0,e.e=0,e.d=[0];return e}function Rn(e,r,a){var i,p,y,g,c,C,M,T,U=e.d;for(g=1,y=U[0];y>=10;y/=10)g++;if(i=r-g,i<0)i+=Yn,p=r,M=U[T=0];else{if(T=Math.ceil((i+1)/Yn),y=U.length,T>=y)return e;for(M=y=U[T],g=1;y>=10;y/=10)g++;i%=Yn,p=i-Yn+g}if(a!==void 0&&(y=Ad(10,g-p-1),c=M/y%10|0,C=r<0||U[T+1]!==void 0||M%y,C=a<4?(c||C)&&(a==0||a==(e.s<0?3:2)):c>5||c==5&&(a==4||C||a==6&&(i>0?p>0?M/Ad(10,g-p):0:U[T-1])%10&1||a==(e.s<0?8:7))),r<1||!U[0])return C?(y=Ha(e),U.length=1,r=r-y-1,U[0]=Ad(10,(Yn-r%Yn)%Yn),e.e=am(-r/Yn)||0):(U.length=1,U[0]=e.e=e.s=0),e;if(i==0?(U.length=T,y=1,T--):(U.length=T+1,y=Ad(10,Yn-i),U[T]=p>0?(M/Ad(10,g-p)%Ad(10,p)|0)*y:0),C)for(;;)if(T==0){(U[0]+=y)==Si&&(U[0]=1,++e.e);break}else{if(U[T]+=y,U[T]!=Si)break;U[T--]=0,y=1}for(i=U.length;U[--i]===0;)U.pop();if(ta&&(e.e>gv||e.e<-gv))throw Error(b2+Ha(e));return e}function _M(e,r){var a,i,p,y,g,c,C,M,T,U,z=e.constructor,F=z.precision;if(!e.s||!r.s)return r.s?r.s=-r.s:r=new z(e),ta?Rn(r,F):r;if(C=e.d,U=r.d,i=r.e,M=e.e,C=C.slice(),g=M-i,g){for(T=g<0,T?(a=C,g=-g,c=U.length):(a=U,i=M,c=C.length),p=Math.max(Math.ceil(F/Yn),c)+2,g>p&&(g=p,a.length=1),a.reverse(),p=g;p--;)a.push(0);a.reverse()}else{for(p=C.length,c=U.length,T=p<c,T&&(c=p),p=0;p<c;p++)if(C[p]!=U[p]){T=C[p]<U[p];break}g=0}for(T&&(a=C,C=U,U=a,r.s=-r.s),c=C.length,p=U.length-c;p>0;--p)C[c++]=0;for(p=U.length;p>g;){if(C[--p]<U[p]){for(y=p;y&&C[--y]===0;)C[y]=Si-1;--C[y],C[p]+=Si}C[p]-=U[p]}for(;C[--c]===0;)C.pop();for(;C[0]===0;C.shift())--i;return C[0]?(r.d=C,r.e=i,ta?Rn(r,F):r):new z(0)}function Ld(e,r,a){var i,p=Ha(e),y=tc(e.d),g=y.length;return r?(a&&(i=a-g)>0?y=y.charAt(0)+"."+y.slice(1)+lf(i):g>1&&(y=y.charAt(0)+"."+y.slice(1)),y=y+(p<0?"e":"e+")+p):p<0?(y="0."+lf(-p-1)+y,a&&(i=a-g)>0&&(y+=lf(i))):p>=g?(y+=lf(p+1-g),a&&(i=a-p-1)>0&&(y=y+"."+lf(i))):((i=p+1)<g&&(y=y.slice(0,i)+"."+y.slice(i)),a&&(i=a-g)>0&&(p+1===g&&(y+="."),y+=lf(i))),e.s<0?"-"+y:y}function uA(e,r){if(e.length>r)return e.length=r,!0}function bM(e){var r,a,i;function p(y){var g=this;if(!(g instanceof p))return new p(y);if(g.constructor=p,y instanceof p){g.s=y.s,g.e=y.e,g.d=(y=y.d)?y.slice():y;return}if(typeof y=="number"){if(y*0!==0)throw Error(Id+y);if(y>0)g.s=1;else if(y<0)y=-y,g.s=-1;else{g.s=0,g.e=0,g.d=[0];return}if(y===~~y&&y<1e7){g.e=0,g.d=[y];return}return lA(g,y.toString())}else if(typeof y!="string")throw Error(Id+y);if(y.charCodeAt(0)===45?(y=y.slice(1),g.s=-1):g.s=1,eL.test(y))lA(g,y);else throw Error(Id+y)}if(p.prototype=Yt,p.ROUND_UP=0,p.ROUND_DOWN=1,p.ROUND_CEIL=2,p.ROUND_FLOOR=3,p.ROUND_HALF_UP=4,p.ROUND_HALF_DOWN=5,p.ROUND_HALF_EVEN=6,p.ROUND_HALF_CEIL=7,p.ROUND_HALF_FLOOR=8,p.clone=bM,p.config=p.set=tL,e===void 0&&(e={}),e)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<i.length;)e.hasOwnProperty(a=i[r++])||(e[a]=this[a]);return p.config(e),p}function tL(e){if(!e||typeof e!="object")throw Error(ll+"Object expected");var r,a,i,p=["precision",1,nm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(r=0;r<p.length;r+=3)if((i=e[a=p[r]])!==void 0)if(am(i)===i&&i>=p[r+1]&&i<=p[r+2])this[a]=i;else throw Error(Id+a+": "+i);if((i=e[a="LN10"])!==void 0)if(i==Math.LN10)this[a]=new this(i);else throw Error(Id+a+": "+i);return this}var x2=bM(JO);Cs=new x2(1);const _n=x2;var rL=e=>e,xM={},SM=e=>e===xM,cA=e=>function r(){return arguments.length===0||arguments.length===1&&SM(arguments.length<=0?void 0:arguments[0])?r:e(...arguments)},wM=(e,r)=>e===1?r:cA(function(){for(var a=arguments.length,i=new Array(a),p=0;p<a;p++)i[p]=arguments[p];var y=i.filter(g=>g!==xM).length;return y>=e?r(...i):wM(e-y,cA(function(){for(var g=arguments.length,c=new Array(g),C=0;C<g;C++)c[C]=arguments[C];var M=i.map(T=>SM(T)?c.shift():T);return r(...M,...c)}))}),e1=e=>wM(e.length,e),Qb=(e,r)=>{for(var a=[],i=e;i<r;++i)a[i-e]=i;return a},nL=e1((e,r)=>Array.isArray(r)?r.map(e):Object.keys(r).map(a=>r[a]).map(e)),aL=function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];if(!a.length)return rL;var p=a.reverse(),y=p[0],g=p.slice(1);return function(){return g.reduce((c,C)=>C(c),y(...arguments))}},Xb=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),PM=e=>{var r=null,a=null;return function(){for(var i=arguments.length,p=new Array(i),y=0;y<i;y++)p[y]=arguments[y];return r&&p.every((g,c)=>{var C;return g===((C=r)===null||C===void 0?void 0:C[c])})||(r=p,a=e(...p)),a}};function AM(e){var r;return e===0?r=1:r=Math.floor(new _n(e).abs().log(10).toNumber())+1,r}function CM(e,r,a){for(var i=new _n(e),p=0,y=[];i.lt(r)&&p<1e5;)y.push(i.toNumber()),i=i.add(a),p++;return y}e1((e,r,a)=>{var i=+e,p=+r;return i+a*(p-i)});e1((e,r,a)=>{var i=r-+e;return i=i||1/0,(a-e)/i});e1((e,r,a)=>{var i=r-+e;return i=i||1/0,Math.max(0,Math.min(1,(a-e)/i))});var DM=e=>{var[r,a]=e,[i,p]=[r,a];return r>a&&([i,p]=[a,r]),[i,p]},MM=(e,r,a)=>{if(e.lte(0))return new _n(0);var i=AM(e.toNumber()),p=new _n(10).pow(i),y=e.div(p),g=i!==1?.05:.1,c=new _n(Math.ceil(y.div(g).toNumber())).add(a).mul(g),C=c.mul(p);return r?new _n(C.toNumber()):new _n(Math.ceil(C.toNumber()))},iL=(e,r,a)=>{var i=new _n(1),p=new _n(e);if(!p.isint()&&a){var y=Math.abs(e);y<1?(i=new _n(10).pow(AM(e)-1),p=new _n(Math.floor(p.div(i).toNumber())).mul(i)):y>1&&(p=new _n(Math.floor(e)))}else e===0?p=new _n(Math.floor((r-1)/2)):a||(p=new _n(Math.floor(e)));var g=Math.floor((r-1)/2),c=aL(nL(C=>p.add(new _n(C-g).mul(i)).toNumber()),Qb);return c(0,r)},TM=function(r,a,i,p){var y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((a-r)/(i-1)))return{step:new _n(0),tickMin:new _n(0),tickMax:new _n(0)};var g=MM(new _n(a).sub(r).div(i-1),p,y),c;r<=0&&a>=0?c=new _n(0):(c=new _n(r).add(a).div(2),c=c.sub(new _n(c).mod(g)));var C=Math.ceil(c.sub(r).div(g).toNumber()),M=Math.ceil(new _n(a).sub(c).div(g).toNumber()),T=C+M+1;return T>i?TM(r,a,i,p,y+1):(T<i&&(M=a>0?M+(i-T):M,C=a>0?C:C+(i-T)),{step:g,tickMin:c.sub(new _n(C).mul(g)),tickMax:c.add(new _n(M).mul(g))})};function oL(e){var[r,a]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,y=Math.max(i,2),[g,c]=DM([r,a]);if(g===-1/0||c===1/0){var C=c===1/0?[g,...Qb(0,i-1).map(()=>1/0)]:[...Qb(0,i-1).map(()=>-1/0),c];return r>a?Xb(C):C}if(g===c)return iL(g,i,p);var{step:M,tickMin:T,tickMax:U}=TM(g,c,y,p,0),z=CM(T,U.add(new _n(.1).mul(M)),M);return r>a?Xb(z):z}function sL(e,r){var[a,i]=e,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[y,g]=DM([a,i]);if(y===-1/0||g===1/0)return[a,i];if(y===g)return[y];var c=Math.max(r,2),C=MM(new _n(g).sub(y).div(c-1),p,0),M=[...CM(new _n(y),new _n(g),C),g];return p===!1&&(M=M.map(T=>Math.round(T))),a>i?Xb(M):M}var lL=PM(oL),uL=PM(sL),EM=e=>e.rootProps.maxBarSize,cL=e=>e.rootProps.barGap,RM=e=>e.rootProps.barCategoryGap,hL=e=>e.rootProps.barSize,t1=e=>e.rootProps.stackOffset,S2=e=>e.options.chartName,w2=e=>e.rootProps.syncId,IM=e=>e.rootProps.syncMethod,P2=e=>e.options.eventEmitter,Kc={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},As={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},r1=(e,r)=>{if(!(!e||!r))return e!=null&&e.reversed?[r[1],r[0]]:r},fL={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Kc.angleAxisId,includeHidden:!1,name:void 0,reversed:Kc.reversed,scale:Kc.scale,tick:Kc.tick,tickCount:void 0,ticks:void 0,type:Kc.type,unit:void 0},dL={allowDataOverflow:As.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:As.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:As.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:As.scale,tick:As.tick,tickCount:As.tickCount,ticks:void 0,type:As.type,unit:void 0},pL={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Kc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Kc.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Kc.scale,tick:Kc.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},mL={allowDataOverflow:As.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:As.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:As.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:As.scale,tick:As.tick,tickCount:As.tickCount,ticks:void 0,type:"category",unit:void 0},A2=(e,r)=>e.polarAxis.angleAxis[r]!=null?e.polarAxis.angleAxis[r]:e.layout.layoutType==="radial"?pL:fL,C2=(e,r)=>e.polarAxis.radiusAxis[r]!=null?e.polarAxis.radiusAxis[r]:e.layout.layoutType==="radial"?mL:dL,n1=e=>e.polarOptions,D2=at([lh,uh,Ai],g7),kM=at([n1,D2],(e,r)=>{if(e!=null)return au(e.innerRadius,r,0)}),UM=at([n1,D2],(e,r)=>{if(e!=null)return au(e.outerRadius,r,r*.8)}),yL=e=>{if(e==null)return[0,0];var{startAngle:r,endAngle:a}=e;return[r,a]},OM=at([n1],yL);at([A2,OM],r1);var LM=at([D2,kM,UM],(e,r,a)=>{if(!(e==null||r==null||a==null))return[r,a]});at([C2,LM],r1);var zM=at([bn,n1,kM,UM,lh,uh],(e,r,a,i,p,y)=>{if(!(e!=="centric"&&e!=="radial"||r==null||a==null||i==null)){var{cx:g,cy:c,startAngle:C,endAngle:M}=r;return{cx:au(g,p,p/2),cy:au(c,y,y/2),innerRadius:a,outerRadius:i,startAngle:C,endAngle:M,clockWise:!1}}}),$a=(e,r)=>r,a1=(e,r,a)=>a;function M2(e){return e?.id}var hi=e=>{var r=bn(e);return r==="horizontal"?"xAxis":r==="vertical"?"yAxis":r==="centric"?"angleAxis":"radiusAxis"},im=e=>e.tooltip.settings.axisId,Di=e=>{var r=hi(e),a=im(e);return lg(e,r,a)},FM=at([Di],e=>e?.dataKey);function NM(e,r,a){var{chartData:i=[]}=r,{allowDuplicatedCategory:p,dataKey:y}=a,g=new Map;return e.forEach(c=>{var C,M=(C=c.data)!==null&&C!==void 0?C:i;if(!(M==null||M.length===0)){var T=M2(c);M.forEach((U,z)=>{var F=y==null||p?z:String(Co(U,y,null)),V=Co(U,c.dataKey,0),$;g.has(F)?$=g.get(F):$={},Object.assign($,{[T]:V}),g.set(F,$)})}}),Array.from(g.values())}function i1(e){return e.stackId!=null&&e.dataKey!=null}function hA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function vv(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?hA(Object(a),!0).forEach(function(i){gL(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):hA(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function gL(e,r,a){return(r=vL(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function vL(e){var r=_L(e,"string");return typeof r=="symbol"?r:r+""}function _L(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Kb=[0,"auto"],ws={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},jM=(e,r)=>e.cartesianAxis.xAxis[r],hh=(e,r)=>{var a=jM(e,r);return a??ws},Ps={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Kb,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:ng},BM=(e,r)=>e.cartesianAxis.yAxis[r],fh=(e,r)=>{var a=BM(e,r);return a??Ps},bL={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},T2=(e,r)=>{var a=e.cartesianAxis.zAxis[r];return a??bL},Qo=(e,r,a)=>{switch(r){case"xAxis":return hh(e,a);case"yAxis":return fh(e,a);case"zAxis":return T2(e,a);case"angleAxis":return A2(e,a);case"radiusAxis":return C2(e,a);default:throw new Error("Unexpected axis type: ".concat(r))}},xL=(e,r,a)=>{switch(r){case"xAxis":return hh(e,a);case"yAxis":return fh(e,a);default:throw new Error("Unexpected axis type: ".concat(r))}},lg=(e,r,a)=>{switch(r){case"xAxis":return hh(e,a);case"yAxis":return fh(e,a);case"angleAxis":return A2(e,a);case"radiusAxis":return C2(e,a);default:throw new Error("Unexpected axis type: ".concat(r))}},qM=e=>e.graphicalItems.cartesianItems.some(r=>r.type==="bar")||e.graphicalItems.polarItems.some(r=>r.type==="radialBar");function HM(e,r){return a=>{switch(e){case"xAxis":return"xAxisId"in a&&a.xAxisId===r;case"yAxis":return"yAxisId"in a&&a.yAxisId===r;case"zAxis":return"zAxisId"in a&&a.zAxisId===r;case"angleAxis":return"angleAxisId"in a&&a.angleAxisId===r;case"radiusAxis":return"radiusAxisId"in a&&a.radiusAxisId===r;default:return!1}}}var E2=e=>e.graphicalItems.cartesianItems,SL=at([$a,a1],HM),$M=(e,r,a)=>e.filter(a).filter(i=>r?.includeHidden===!0?!0:!i.hide),ug=at([E2,Qo,SL],$M),VM=at([ug],e=>e.filter(r=>r.type==="area"||r.type==="bar").filter(i1)),GM=e=>e.filter(r=>!("stackId"in r)||r.stackId===void 0),WM=at([ug],GM),ZM=e=>e.map(r=>r.data).filter(Boolean).flat(1),wL=at([ug],ZM),YM=(e,r)=>{var{chartData:a=[],dataStartIndex:i,dataEndIndex:p}=r;return e.length>0?e:a.slice(i,p+1)},R2=at([wL,_2],YM),QM=(e,r,a)=>r?.dataKey!=null?e.map(i=>({value:Co(i,r.dataKey)})):a.length>0?a.map(i=>i.dataKey).flatMap(i=>e.map(p=>({value:Co(p,i)}))):e.map(i=>({value:i})),o1=at([R2,Qo,ug],QM);function XM(e,r){switch(e){case"xAxis":return r.direction==="x";case"yAxis":return r.direction==="y";default:return!1}}function qd(e){return e.filter(r=>ac(r)||r instanceof Date).map(Number).filter(r=>ol(r)===!1)}function PL(e,r,a){return!a||typeof r!="number"||ol(r)?[]:a.length?qd(a.flatMap(i=>{var p=Co(e,i.dataKey),y,g;if(Array.isArray(p)?[y,g]=p:y=g=p,!(!Es(y)||!Es(g)))return[r-y,r+g]})):[]}var AL=at([VM,_2,Di],NM),KM=(e,r,a)=>{var i={},p=r.reduce((y,g)=>(g.stackId==null||(y[g.stackId]==null&&(y[g.stackId]=[]),y[g.stackId].push(g)),y),i);return Object.fromEntries(Object.entries(p).map(y=>{var[g,c]=y,C=c.map(M2);return[g,{stackedData:k7(e,C,a),graphicalItems:c}]}))},Jb=at([AL,VM,t1],KM),JM=(e,r,a)=>{var{dataStartIndex:i,dataEndIndex:p}=r;if(a!=="zAxis"){var y=F7(e,i,p);if(!(y!=null&&y[0]===0&&y[1]===0))return y}},CL=at([Jb,yf,$a],JM),eT=(e,r,a,i,p)=>a.length>0?e.flatMap(y=>a.flatMap(g=>{var c,C,M=(c=i[g.id])===null||c===void 0?void 0:c.filter(U=>XM(p,U)),T=Co(y,(C=r.dataKey)!==null&&C!==void 0?C:g.dataKey);return{value:T,errorDomain:PL(y,T,M)}})).filter(Boolean):r?.dataKey!=null?e.map(y=>({value:Co(y,r.dataKey),errorDomain:[]})):e.map(y=>({value:y,errorDomain:[]})),s1=e=>e.errorBars,tT=(e,r,a)=>e.flatMap(i=>r[i.id]).filter(Boolean).filter(i=>XM(a,i));at([WM,s1,$a],tT);var DL=at([R2,Qo,WM,s1,$a],eT);function ML(e){var{value:r}=e;if(ac(r)||r instanceof Date)return r}var fA=e=>{var r=e.flatMap(i=>[i.value,i.errorDomain]).flat(1),a=qd(r);if(a.length!==0)return[Math.min(...a),Math.max(...a)]},TL=(e,r,a)=>{var i=e.map(ML).filter(p=>p!=null);return a&&(r.dataKey==null||r.allowDuplicatedCategory&&v3(i))?OD(0,e.length):r.allowDuplicatedCategory?i:Array.from(new Set(i))},I2=e=>{var r;if(e==null||!("domain"in e))return Kb;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var a=qd(e.ticks);return[Math.min(...a),Math.max(...a)]}if(e.type==="category")return e.ticks.map(String)}return(r=e?.domain)!==null&&r!==void 0?r:Kb},_v=function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var p=a.filter(Boolean);if(p.length!==0){var y=p.flat(),g=Math.min(...y),c=Math.max(...y);return[g,c]}},rT=e=>e.referenceElements.dots,om=(e,r,a)=>e.filter(i=>i.ifOverflow==="extendDomain").filter(i=>r==="xAxis"?i.xAxisId===a:i.yAxisId===a),EL=at([rT,$a,a1],om),nT=e=>e.referenceElements.areas,RL=at([nT,$a,a1],om),aT=e=>e.referenceElements.lines,IL=at([aT,$a,a1],om),iT=(e,r)=>{var a=qd(e.map(i=>r==="xAxis"?i.x:i.y));if(a.length!==0)return[Math.min(...a),Math.max(...a)]},kL=at(EL,$a,iT),oT=(e,r)=>{var a=qd(e.flatMap(i=>[r==="xAxis"?i.x1:i.y1,r==="xAxis"?i.x2:i.y2]));if(a.length!==0)return[Math.min(...a),Math.max(...a)]},UL=at([RL,$a],oT),sT=(e,r)=>{var a=qd(e.map(i=>r==="xAxis"?i.x:i.y));if(a.length!==0)return[Math.min(...a),Math.max(...a)]},OL=at(IL,$a,sT),LL=at(kL,OL,UL,(e,r,a)=>_v(e,a,r)),zL=at([Qo],I2),lT=(e,r,a,i,p,y,g)=>{var c=XO(r,e.allowDataOverflow);if(c!=null)return c;var C=y==="vertical"&&g==="xAxis"||y==="horizontal"&&g==="yAxis",M=C?_v(a,p,fA(i)):_v(p,fA(i));return KO(r,M,e.allowDataOverflow)},FL=at([Qo,zL,CL,DL,LL,bn,$a],lT),NL=[0,1],uT=(e,r,a,i,p,y,g)=>{if(!((e==null||a==null||a.length===0)&&g===void 0)){var{dataKey:c,type:C}=e,M=Nd(r,y);return M&&c==null?OD(0,a.length):C==="category"?TL(i,e,M):p==="expand"?NL:g}},k2=at([Qo,bn,R2,o1,t1,$a,FL],uT),cT=(e,r,a,i,p)=>{if(e!=null){var{scale:y,type:g}=e;if(y==="auto")return r==="radial"&&p==="radiusAxis"?"band":r==="radial"&&p==="angleAxis"?"linear":g==="category"&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!a)?"point":g==="category"?"band":"linear";if(typeof y=="string"){var c="scale".concat(Jy(y));return c in Ey?c:"point"}}},cg=at([Qo,bn,qM,S2,$a],cT);function jL(e){if(e!=null){if(e in Ey)return Ey[e]();var r="scale".concat(Jy(e));if(r in Ey)return Ey[r]()}}function U2(e,r,a,i){if(!(a==null||i==null)){if(typeof e.scale=="function")return e.scale.copy().domain(a).range(i);var p=jL(r);if(p!=null){var y=p.domain(a).range(i);return M7(y),y}}}var hT=(e,r,a)=>{var i=I2(r);if(!(a!=="auto"&&a!=="linear")){if(r!=null&&r.tickCount&&Array.isArray(i)&&(i[0]==="auto"||i[1]==="auto")&&Wp(e))return lL(e,r.tickCount,r.allowDecimals);if(r!=null&&r.tickCount&&r.type==="number"&&Wp(e))return uL(e,r.tickCount,r.allowDecimals)}},O2=at([k2,lg,cg],hT),fT=(e,r,a,i)=>{if(i!=="angleAxis"&&e?.type==="number"&&Wp(r)&&Array.isArray(a)&&a.length>0){var p=r[0],y=a[0],g=r[1],c=a[a.length-1];return[Math.min(p,y),Math.max(g,c)]}return r},BL=at([Qo,k2,O2,$a],fT),qL=at(o1,Qo,(e,r)=>{if(!(!r||r.type!=="number")){var a=1/0,i=Array.from(qd(e.map(c=>c.value))).sort((c,C)=>c-C);if(i.length<2)return 1/0;var p=i[i.length-1]-i[0];if(p===0)return 1/0;for(var y=0;y<i.length-1;y++){var g=i[y+1]-i[y];a=Math.min(a,g)}return a/p}}),dT=at(qL,bn,RM,Ai,(e,r,a,i)=>i,(e,r,a,i,p)=>{if(!Es(e))return 0;var y=r==="vertical"?i.height:i.width;if(p==="gap")return e*y/2;if(p==="no-gap"){var g=au(a,e*y),c=e*y/2;return c-g-(c-g)/y*g}return 0}),HL=(e,r)=>{var a=hh(e,r);return a==null||typeof a.padding!="string"?0:dT(e,"xAxis",r,a.padding)},$L=(e,r)=>{var a=fh(e,r);return a==null||typeof a.padding!="string"?0:dT(e,"yAxis",r,a.padding)},VL=at(hh,HL,(e,r)=>{var a,i;if(e==null)return{left:0,right:0};var{padding:p}=e;return typeof p=="string"?{left:r,right:r}:{left:((a=p.left)!==null&&a!==void 0?a:0)+r,right:((i=p.right)!==null&&i!==void 0?i:0)+r}}),GL=at(fh,$L,(e,r)=>{var a,i;if(e==null)return{top:0,bottom:0};var{padding:p}=e;return typeof p=="string"?{top:r,bottom:r}:{top:((a=p.top)!==null&&a!==void 0?a:0)+r,bottom:((i=p.bottom)!==null&&i!==void 0?i:0)+r}}),WL=at([Ai,VL,Wv,Gv,(e,r,a)=>a],(e,r,a,i,p)=>{var{padding:y}=i;return p?[y.left,a.width-y.right]:[e.left+r.left,e.left+e.width-r.right]}),ZL=at([Ai,bn,GL,Wv,Gv,(e,r,a)=>a],(e,r,a,i,p,y)=>{var{padding:g}=p;return y?[i.height-g.bottom,g.top]:r==="horizontal"?[e.top+e.height-a.bottom,e.top+a.top]:[e.top+a.top,e.top+e.height-a.bottom]}),hg=(e,r,a,i)=>{var p;switch(r){case"xAxis":return WL(e,a,i);case"yAxis":return ZL(e,a,i);case"zAxis":return(p=T2(e,a))===null||p===void 0?void 0:p.range;case"angleAxis":return OM(e);case"radiusAxis":return LM(e,a);default:return}},pT=at([Qo,hg],r1),sm=at([Qo,cg,BL,pT],U2);at([ug,s1,$a],tT);function mT(e,r){return e.id<r.id?-1:e.id>r.id?1:0}var l1=(e,r)=>r,u1=(e,r,a)=>a,YL=at($v,l1,u1,(e,r,a)=>e.filter(i=>i.orientation===r).filter(i=>i.mirror===a).sort(mT)),QL=at(Vv,l1,u1,(e,r,a)=>e.filter(i=>i.orientation===r).filter(i=>i.mirror===a).sort(mT)),yT=(e,r)=>({width:e.width,height:r.height}),XL=(e,r)=>{var a=typeof r.width=="number"?r.width:ng;return{width:a,height:e.height}},gT=at(Ai,hh,yT),KL=(e,r,a)=>{switch(r){case"top":return e.top;case"bottom":return a-e.bottom;default:return 0}},JL=(e,r,a)=>{switch(r){case"left":return e.left;case"right":return a-e.right;default:return 0}},ez=at(uh,Ai,YL,l1,u1,(e,r,a,i,p)=>{var y={},g;return a.forEach(c=>{var C=yT(r,c);g==null&&(g=KL(r,i,e));var M=i==="top"&&!p||i==="bottom"&&p;y[c.id]=g-Number(M)*C.height,g+=(M?-1:1)*C.height}),y}),tz=at(lh,Ai,QL,l1,u1,(e,r,a,i,p)=>{var y={},g;return a.forEach(c=>{var C=XL(r,c);g==null&&(g=JL(r,i,e));var M=i==="left"&&!p||i==="right"&&p;y[c.id]=g-Number(M)*C.width,g+=(M?-1:1)*C.width}),y}),rz=(e,r)=>{var a=hh(e,r);if(a!=null)return ez(e,a.orientation,a.mirror)},nz=at([Ai,hh,rz,(e,r)=>r],(e,r,a,i)=>{if(r!=null){var p=a?.[i];return p==null?{x:e.left,y:0}:{x:e.left,y:p}}}),az=(e,r)=>{var a=fh(e,r);if(a!=null)return tz(e,a.orientation,a.mirror)},iz=at([Ai,fh,az,(e,r)=>r],(e,r,a,i)=>{if(r!=null){var p=a?.[i];return p==null?{x:0,y:e.top}:{x:p,y:e.top}}}),vT=at(Ai,fh,(e,r)=>{var a=typeof r.width=="number"?r.width:ng;return{width:a,height:e.height}}),dA=(e,r,a)=>{switch(r){case"xAxis":return gT(e,a).width;case"yAxis":return vT(e,a).height;default:return}},_T=(e,r,a,i)=>{if(a!=null){var{allowDuplicatedCategory:p,type:y,dataKey:g}=a,c=Nd(e,i),C=r.map(M=>M.value);if(g&&c&&y==="category"&&p&&v3(C))return C}},L2=at([bn,o1,Qo,$a],_T),bT=(e,r,a,i)=>{if(!(a==null||a.dataKey==null)){var{type:p,scale:y}=a,g=Nd(e,i);if(g&&(p==="number"||y!=="auto"))return r.map(c=>c.value)}},z2=at([bn,o1,lg,$a],bT);at([bn,xL,cg,sm,L2,z2,hg,O2,$a],(e,r,a,i,p,y,g,c,C)=>{if(r==null)return null;var M=Nd(e,C);return{angle:r.angle,interval:r.interval,minTickGap:r.minTickGap,orientation:r.orientation,tick:r.tick,tickCount:r.tickCount,tickFormatter:r.tickFormatter,ticks:r.ticks,type:r.type,unit:r.unit,axisType:C,categoricalDomain:y,duplicateDomain:p,isCategorical:M,niceTicks:c,range:g,realScaleType:a,scale:i}});var oz=(e,r,a,i,p,y,g,c,C)=>{if(!(r==null||i==null)){var M=Nd(e,C),{type:T,ticks:U,tickCount:z}=r,F=a==="scaleBand"&&typeof i.bandwidth=="function"?i.bandwidth()/2:2,V=T==="category"&&i.bandwidth?i.bandwidth()/F:0;V=C==="angleAxis"&&y!=null&&y.length>=2?Ds(y[0]-y[1])*2*V:V;var $=U||p;if($){var G=$.map((Q,ee)=>{var ae=g?g.indexOf(Q):Q;return{index:ee,coordinate:i(ae)+V,value:Q,offset:V}});return G.filter(Q=>!ol(Q.coordinate))}return M&&c?c.map((Q,ee)=>({coordinate:i(Q)+V,value:Q,index:ee,offset:V})):i.ticks?i.ticks(z).map(Q=>({coordinate:i(Q)+V,value:Q,offset:V})):i.domain().map((Q,ee)=>({coordinate:i(Q)+V,value:g?g[Q]:Q,index:ee,offset:V}))}},xT=at([bn,lg,cg,sm,O2,hg,L2,z2,$a],oz),sz=(e,r,a,i,p,y,g)=>{if(!(r==null||a==null||i==null||i[0]===i[1])){var c=Nd(e,g),{tickCount:C}=r,M=0;return M=g==="angleAxis"&&i?.length>=2?Ds(i[0]-i[1])*2*M:M,c&&y?y.map((T,U)=>({coordinate:a(T)+M,value:T,index:U,offset:M})):a.ticks?a.ticks(C).map(T=>({coordinate:a(T)+M,value:T,offset:M})):a.domain().map((T,U)=>({coordinate:a(T)+M,value:p?p[T]:T,index:U,offset:M}))}},Zp=at([bn,lg,sm,hg,L2,z2,$a],sz),Yp=at(Qo,sm,(e,r)=>{if(!(e==null||r==null))return vv(vv({},e),{},{scale:r})}),lz=at([Qo,cg,k2,pT],U2);at((e,r,a)=>T2(e,a),lz,(e,r)=>{if(!(e==null||r==null))return vv(vv({},e),{},{scale:r})});var uz=at([bn,$v,Vv],(e,r,a)=>{switch(e){case"horizontal":return r.some(i=>i.reversed)?"right-to-left":"left-to-right";case"vertical":return a.some(i=>i.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),ST=e=>e.options.defaultTooltipEventType,wT=e=>e.options.validateTooltipEventTypes;function PT(e,r,a){if(e==null)return r;var i=e?"axis":"item";return a==null?r:a.includes(i)?i:r}function F2(e,r){var a=ST(e),i=wT(e);return PT(r,a,i)}function cz(e){return pr(r=>F2(r,e))}var AT=(e,r)=>{var a,i=Number(r);if(!(ol(i)||r==null))return i>=0?e==null||(a=e[i])===null||a===void 0?void 0:a.value:void 0},hz=e=>e.tooltip.settings,cf={active:!1,index:null,dataKey:void 0,coordinate:void 0},fz={itemInteraction:{click:cf,hover:cf},axisInteraction:{click:cf,hover:cf},keyboardInteraction:cf,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},CT=Rs({name:"tooltip",initialState:fz,reducers:{addTooltipEntrySettings(e,r){e.tooltipItemPayloads.push(r.payload)},removeTooltipEntrySettings(e,r){var a=rh(e).tooltipItemPayloads.indexOf(r.payload);a>-1&&e.tooltipItemPayloads.splice(a,1)},setTooltipSettingsState(e,r){e.settings=r.payload},setActiveMouseOverItemIndex(e,r){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=r.payload.activeIndex,e.itemInteraction.hover.dataKey=r.payload.activeDataKey,e.itemInteraction.hover.coordinate=r.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,r){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=r.payload.activeIndex,e.itemInteraction.click.dataKey=r.payload.activeDataKey,e.itemInteraction.click.coordinate=r.payload.activeCoordinate},setMouseOverAxisIndex(e,r){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=r.payload.activeIndex,e.axisInteraction.hover.dataKey=r.payload.activeDataKey,e.axisInteraction.hover.coordinate=r.payload.activeCoordinate},setMouseClickAxisIndex(e,r){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=r.payload.activeIndex,e.axisInteraction.click.dataKey=r.payload.activeDataKey,e.axisInteraction.click.coordinate=r.payload.activeCoordinate},setSyncInteraction(e,r){e.syncInteraction=r.payload},setKeyboardInteraction(e,r){e.keyboardInteraction.active=r.payload.active,e.keyboardInteraction.index=r.payload.activeIndex,e.keyboardInteraction.coordinate=r.payload.activeCoordinate,e.keyboardInteraction.dataKey=r.payload.activeDataKey}}}),{addTooltipEntrySettings:dz,removeTooltipEntrySettings:pz,setTooltipSettingsState:mz,setActiveMouseOverItemIndex:DT,mouseLeaveItem:yz,mouseLeaveChart:MT,setActiveClickItemIndex:gz,setMouseOverAxisIndex:TT,setMouseClickAxisIndex:vz,setSyncInteraction:ex,setKeyboardInteraction:tx}=CT.actions,_z=CT.reducer;function pA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function T0(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?pA(Object(a),!0).forEach(function(i){bz(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pA(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function bz(e,r,a){return(r=xz(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function xz(e){var r=Sz(e,"string");return typeof r=="symbol"?r:r+""}function Sz(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function wz(e,r,a){return r==="axis"?a==="click"?e.axisInteraction.click:e.axisInteraction.hover:a==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Pz(e){return e.index!=null}var ET=(e,r,a,i)=>{if(r==null)return cf;var p=wz(e,r,a);if(p==null)return cf;if(p.active)return p;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var y=e.settings.active===!0;if(Pz(p)){if(y)return T0(T0({},p),{},{active:!0})}else if(i!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:i};return T0(T0({},cf),{},{coordinate:p.coordinate})},N2=(e,r)=>{var a=e?.index;if(a==null)return null;var i=Number(a);if(!Es(i))return a;var p=0,y=1/0;return r.length>0&&(y=r.length-1),String(Math.max(p,Math.min(i,y)))},RT=(e,r,a,i,p,y,g,c)=>{if(!(y==null||c==null)){var C=g[0],M=C==null?void 0:c(C.positions,y);if(M!=null)return M;var T=p?.[Number(y)];if(T)switch(a){case"horizontal":return{x:T.coordinate,y:(i.top+r)/2};default:return{x:(i.left+e)/2,y:T.coordinate}}}},IT=(e,r,a,i)=>{if(r==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var p;return a==="hover"?p=e.itemInteraction.hover.dataKey:p=e.itemInteraction.click.dataKey,p==null&&i!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(y=>{var g;return((g=y.settings)===null||g===void 0?void 0:g.dataKey)===p})},fg=e=>e.options.tooltipPayloadSearcher,lm=e=>e.tooltip;function mA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function yA(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?mA(Object(a),!0).forEach(function(i){Az(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mA(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function Az(e,r,a){return(r=Cz(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function Cz(e){var r=Dz(e,"string");return typeof r=="symbol"?r:r+""}function Dz(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Mz(e,r){return e??r}var kT=(e,r,a,i,p,y,g)=>{if(!(r==null||y==null)){var{chartData:c,computedData:C,dataStartIndex:M,dataEndIndex:T}=a,U=[];return e.reduce((z,F)=>{var V,{dataDefinedOnItem:$,settings:G}=F,Q=Mz($,c),ee=Array.isArray(Q)?SD(Q,M,T):Q,ae=(V=G?.dataKey)!==null&&V!==void 0?V:i,_e=G?.nameKey,ve;if(i&&Array.isArray(ee)&&!Array.isArray(ee[0])&&g==="axis"?ve=vR(ee,i,p):ve=y(ee,r,C,_e),Array.isArray(ve))ve.forEach(Ee=>{var Fe=yA(yA({},G),{},{name:Ee.name,unit:Ee.unit,color:void 0,fill:void 0});z.push(tP({tooltipEntrySettings:Fe,dataKey:Ee.dataKey,payload:Ee.payload,value:Co(Ee.payload,Ee.dataKey),name:Ee.name}))});else{var Ae;z.push(tP({tooltipEntrySettings:G,dataKey:ae,payload:ve,value:Co(ve,ae),name:(Ae=Co(ve,_e))!==null&&Ae!==void 0?Ae:G?.name}))}return z},U)}},j2=at([Di,bn,qM,S2,hi],cT),Tz=at([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,r)=>[...e,...r]),Ez=at([hi,im],HM),dg=at([Tz,Di,Ez],$M),Rz=at([dg],e=>e.filter(i1)),Iz=at([dg],ZM),um=at([Iz,yf],YM),kz=at([Rz,yf,Di],NM),B2=at([um,Di,dg],QM),Uz=at([Di],I2),Oz=at([dg],e=>e.filter(i1)),Lz=at([kz,Oz,t1],KM),zz=at([Lz,yf,hi],JM),Fz=at([dg],GM),Nz=at([um,Di,Fz,s1,hi],eT),jz=at([rT,hi,im],om),Bz=at([jz,hi],iT),qz=at([nT,hi,im],om),Hz=at([qz,hi],oT),$z=at([aT,hi,im],om),Vz=at([$z,hi],sT),Gz=at([Bz,Vz,Hz],_v),Wz=at([Di,Uz,zz,Nz,Gz,bn,hi],lT),UT=at([Di,bn,um,B2,t1,hi,Wz],uT),Zz=at([UT,Di,j2],hT),Yz=at([Di,UT,Zz,hi],fT),OT=e=>{var r=hi(e),a=im(e),i=!1;return hg(e,r,a,i)},LT=at([Di,OT],r1),zT=at([Di,j2,Yz,LT],U2),Qz=at([bn,B2,Di,hi],_T),Xz=at([bn,B2,Di,hi],bT),Kz=(e,r,a,i,p,y,g,c)=>{if(r){var{type:C}=r,M=Nd(e,c);if(i){var T=a==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,U=C==="category"&&i.bandwidth?i.bandwidth()/T:0;return U=c==="angleAxis"&&p!=null&&p?.length>=2?Ds(p[0]-p[1])*2*U:U,M&&g?g.map((z,F)=>({coordinate:i(z)+U,value:z,index:F,offset:U})):i.domain().map((z,F)=>({coordinate:i(z)+U,value:y?y[z]:z,index:F,offset:U}))}}},dh=at([bn,Di,j2,zT,OT,Qz,Xz,hi],Kz),q2=at([ST,wT,hz],(e,r,a)=>PT(a.shared,e,r)),FT=e=>e.tooltip.settings.trigger,H2=e=>e.tooltip.settings.defaultIndex,c1=at([lm,q2,FT,H2],ET),Qp=at([c1,um],N2),NT=at([dh,Qp],AT),jT=at([c1],e=>{if(e)return e.dataKey}),BT=at([lm,q2,FT,H2],IT),Jz=at([lh,uh,bn,Ai,dh,H2,BT,fg],RT),eF=at([c1,Jz],(e,r)=>e!=null&&e.coordinate?e.coordinate:r),tF=at([c1],e=>e.active),rF=at([BT,Qp,yf,FM,NT,fg,q2],kT);at([rF],e=>{if(e!=null){var r=e.map(a=>a.payload).filter(a=>a!=null);return Array.from(new Set(r))}});function gA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function vA(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?gA(Object(a),!0).forEach(function(i){nF(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gA(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function nF(e,r,a){return(r=aF(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function aF(e){var r=iF(e,"string");return typeof r=="symbol"?r:r+""}function iF(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var oF=()=>pr(Di),sF=()=>{var e=oF(),r=pr(dh),a=pr(zT);return $x(vA(vA({},e),{},{scale:a}),r)},lF=()=>pr(S2),$2=(e,r)=>r,qT=(e,r,a)=>a,V2=(e,r,a,i)=>i,uF=at(dh,e=>Fv(e,r=>r.coordinate)),G2=at([lm,$2,qT,V2],ET),HT=at([G2,um],N2),cF=(e,r,a)=>{if(r!=null){var i=lm(e);return r==="axis"?a==="hover"?i.axisInteraction.hover.dataKey:i.axisInteraction.click.dataKey:a==="hover"?i.itemInteraction.hover.dataKey:i.itemInteraction.click.dataKey}},$T=at([lm,$2,qT,V2],IT),bv=at([lh,uh,bn,Ai,dh,V2,$T,fg],RT),hF=at([G2,bv],(e,r)=>{var a;return(a=e.coordinate)!==null&&a!==void 0?a:r}),VT=at(dh,HT,AT),fF=at([$T,HT,yf,FM,VT,fg,$2],kT),dF=at([G2],e=>({isActive:e.active,activeIndex:e.index})),pF=(e,r,a,i,p,y,g,c)=>{if(!(!e||!r||!i||!p||!y)){var C=N7(e.chartX,e.chartY,r,a,c);if(C){var M=B7(C,r),T=C7(M,g,y,i,p),U=j7(r,y,T,C);return{activeIndex:String(T),activeCoordinate:U}}}};function rx(){return rx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},rx.apply(null,arguments)}function _A(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function E0(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?_A(Object(a),!0).forEach(function(i){mF(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_A(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function mF(e,r,a){return(r=yF(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function yF(e){var r=gF(e,"string");return typeof r=="symbol"?r:r+""}function gF(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function vF(e){var{coordinate:r,payload:a,index:i,offset:p,tooltipAxisBandSize:y,layout:g,cursor:c,tooltipEventType:C,chartName:M}=e,T=r,U=a,z=i;if(!c||!T||M!=="ScatterChart"&&C!=="axis")return null;var F,V;if(M==="ScatterChart")F=T,V=L9;else if(M==="BarChart")F=z9(g,T,p,y),V=RD;else if(g==="radial"){var{cx:$,cy:G,radius:Q,startAngle:ee,endAngle:ae}=ID(T);F={cx:$,cy:G,startAngle:ee,endAngle:ae,innerRadius:Q,outerRadius:Q},V=UD}else F={points:yk(g,T,p)},V=D9;var _e=typeof c=="object"&&"className"in c?c.className:void 0,ve=E0(E0(E0(E0({stroke:"#ccc",pointerEvents:"none"},p),F),Vi(c,!1)),{},{payload:U,payloadIndex:z,className:In("recharts-tooltip-cursor",_e)});return Y.isValidElement(c)?Y.cloneElement(c,ve):Y.createElement(V,ve)}function _F(e){var r=sF(),a=r9(),i=Wx(),p=lF();return Y.createElement(vF,rx({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:a,layout:i,tooltipAxisBandSize:r,chartName:p}))}var GT=Y.createContext(null),bF=()=>Y.useContext(GT),G_={exports:{}},bA;function xF(){return bA||(bA=1,(function(e){var r=Object.prototype.hasOwnProperty,a="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(a=!1));function p(C,M,T){this.fn=C,this.context=M,this.once=T||!1}function y(C,M,T,U,z){if(typeof T!="function")throw new TypeError("The listener must be a function");var F=new p(T,U||C,z),V=a?a+M:M;return C._events[V]?C._events[V].fn?C._events[V]=[C._events[V],F]:C._events[V].push(F):(C._events[V]=F,C._eventsCount++),C}function g(C,M){--C._eventsCount===0?C._events=new i:delete C._events[M]}function c(){this._events=new i,this._eventsCount=0}c.prototype.eventNames=function(){var M=[],T,U;if(this._eventsCount===0)return M;for(U in T=this._events)r.call(T,U)&&M.push(a?U.slice(1):U);return Object.getOwnPropertySymbols?M.concat(Object.getOwnPropertySymbols(T)):M},c.prototype.listeners=function(M){var T=a?a+M:M,U=this._events[T];if(!U)return[];if(U.fn)return[U.fn];for(var z=0,F=U.length,V=new Array(F);z<F;z++)V[z]=U[z].fn;return V},c.prototype.listenerCount=function(M){var T=a?a+M:M,U=this._events[T];return U?U.fn?1:U.length:0},c.prototype.emit=function(M,T,U,z,F,V){var $=a?a+M:M;if(!this._events[$])return!1;var G=this._events[$],Q=arguments.length,ee,ae;if(G.fn){switch(G.once&&this.removeListener(M,G.fn,void 0,!0),Q){case 1:return G.fn.call(G.context),!0;case 2:return G.fn.call(G.context,T),!0;case 3:return G.fn.call(G.context,T,U),!0;case 4:return G.fn.call(G.context,T,U,z),!0;case 5:return G.fn.call(G.context,T,U,z,F),!0;case 6:return G.fn.call(G.context,T,U,z,F,V),!0}for(ae=1,ee=new Array(Q-1);ae<Q;ae++)ee[ae-1]=arguments[ae];G.fn.apply(G.context,ee)}else{var _e=G.length,ve;for(ae=0;ae<_e;ae++)switch(G[ae].once&&this.removeListener(M,G[ae].fn,void 0,!0),Q){case 1:G[ae].fn.call(G[ae].context);break;case 2:G[ae].fn.call(G[ae].context,T);break;case 3:G[ae].fn.call(G[ae].context,T,U);break;case 4:G[ae].fn.call(G[ae].context,T,U,z);break;default:if(!ee)for(ve=1,ee=new Array(Q-1);ve<Q;ve++)ee[ve-1]=arguments[ve];G[ae].fn.apply(G[ae].context,ee)}}return!0},c.prototype.on=function(M,T,U){return y(this,M,T,U,!1)},c.prototype.once=function(M,T,U){return y(this,M,T,U,!0)},c.prototype.removeListener=function(M,T,U,z){var F=a?a+M:M;if(!this._events[F])return this;if(!T)return g(this,F),this;var V=this._events[F];if(V.fn)V.fn===T&&(!z||V.once)&&(!U||V.context===U)&&g(this,F);else{for(var $=0,G=[],Q=V.length;$<Q;$++)(V[$].fn!==T||z&&!V[$].once||U&&V[$].context!==U)&&G.push(V[$]);G.length?this._events[F]=G.length===1?G[0]:G:g(this,F)}return this},c.prototype.removeAllListeners=function(M){var T;return M?(T=a?a+M:M,this._events[T]&&g(this,T)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=a,c.EventEmitter=c,e.exports=c})(G_)),G_.exports}var SF=xF();const wF=iu(SF);var Zy=new wF,nx="recharts.syncEvent.tooltip",xA="recharts.syncEvent.brush";function PF(e,r){if(r){var a=Number.parseInt(r,10);if(!ol(a))return e?.[a]}}var AF={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},WT=Rs({name:"options",initialState:AF,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),CF=WT.reducer,{createEventEmitter:DF}=WT.actions;function MF(e){return e.tooltip.syncInteraction}var TF={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},ZT=Rs({name:"chartData",initialState:TF,reducers:{setChartData(e,r){if(e.chartData=r.payload,r.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}r.payload.length>0&&e.dataEndIndex!==r.payload.length-1&&(e.dataEndIndex=r.payload.length-1)},setComputedData(e,r){e.computedData=r.payload},setDataStartEndIndexes(e,r){var{startIndex:a,endIndex:i}=r.payload;a!=null&&(e.dataStartIndex=a),i!=null&&(e.dataEndIndex=i)}}}),{setChartData:SA,setDataStartEndIndexes:EF,setComputedData:nG}=ZT.actions,RF=ZT.reducer,IF=["x","y"];function wA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function Sd(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?wA(Object(a),!0).forEach(function(i){kF(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wA(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function kF(e,r,a){return(r=UF(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function UF(e){var r=OF(e,"string");return typeof r=="symbol"?r:r+""}function OF(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function LF(e,r){if(e==null)return{};var a,i,p=zF(e,r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(i=0;i<y.length;i++)a=y[i],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(p[a]=e[a])}return p}function zF(e,r){if(e==null)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(r.indexOf(i)!==-1)continue;a[i]=e[i]}return a}var YT=()=>{};function FF(){var e=pr(w2),r=pr(P2),a=Pi(),i=pr(IM),p=pr(dh),y=Wx(),g=Gx(),c=pr(C=>C.rootProps.className);Y.useEffect(()=>{if(e==null)return YT;var C=(M,T,U)=>{if(r!==U&&e===M){if(i==="index"){var z;if(g&&T!==null&&T!==void 0&&(z=T.payload)!==null&&z!==void 0&&z.coordinate){var F=T.payload.coordinate,{x:V,y:$}=F,G=LF(F,IF),Q=Sd(Sd(Sd({},G),typeof V=="number"&&{x:Math.max(g.x,Math.min(V,g.x+g.width))}),typeof $=="number"&&{y:Math.max(g.y,Math.min($,g.y+g.height))}),ee=Sd(Sd({},T),{},{payload:Sd(Sd({},T.payload),{},{coordinate:Q})});a(ee)}else a(T);return}if(p!=null){var ae;if(typeof i=="function"){var _e={activeTooltipIndex:T.payload.index==null?void 0:Number(T.payload.index),isTooltipActive:T.payload.active,activeIndex:T.payload.index==null?void 0:Number(T.payload.index),activeLabel:T.payload.label,activeDataKey:T.payload.dataKey,activeCoordinate:T.payload.coordinate},ve=i(p,_e);ae=p[ve]}else i==="value"&&(ae=p.find(rt=>String(rt.value)===T.payload.label));var{coordinate:Ae}=T.payload;if(ae==null||T.payload.active===!1||Ae==null||g==null){a(ex({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:Ee,y:Fe}=Ae,ht=Math.min(Ee,g.x+g.width),At=Math.min(Fe,g.y+g.height),ot={x:y==="horizontal"?ae.coordinate:ht,y:y==="horizontal"?At:ae.coordinate},ft=ex({active:T.payload.active,coordinate:ot,dataKey:T.payload.dataKey,index:String(ae.index),label:T.payload.label});a(ft)}}};return Zy.on(nx,C),()=>{Zy.off(nx,C)}},[c,a,r,e,i,p,y,g])}function NF(){var e=pr(w2),r=pr(P2),a=Pi();Y.useEffect(()=>{if(e==null)return YT;var i=(p,y,g)=>{r!==g&&e===p&&a(EF(y))};return Zy.on(xA,i),()=>{Zy.off(xA,i)}},[a,r,e])}function jF(){var e=Pi();Y.useEffect(()=>{e(DF())},[e]),FF(),NF()}function BF(e,r,a,i,p,y){var g=pr(z=>cF(z,e,r)),c=pr(P2),C=pr(w2),M=pr(IM),T=pr(MF),U=T?.active;Y.useEffect(()=>{if(!U&&C!=null&&c!=null){var z=ex({active:y,coordinate:a,dataKey:g,index:p,label:typeof i=="number"?String(i):i});Zy.emit(nx,C,z,c)}},[U,a,g,p,i,c,C,M,y])}function PA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function AA(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?PA(Object(a),!0).forEach(function(i){qF(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):PA(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function qF(e,r,a){return(r=HF(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function HF(e){var r=$F(e,"string");return typeof r=="symbol"?r:r+""}function $F(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function VF(e){return e.dataKey}function GF(e,r){return Y.isValidElement(e)?Y.cloneElement(e,r):typeof e=="function"?Y.createElement(e,r):Y.createElement(d9,r)}var CA=[],WF={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!tm.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function ZF(e){var r=uu(e,WF),{active:a,allowEscapeViewBox:i,animationDuration:p,animationEasing:y,content:g,filterNull:c,isAnimationActive:C,offset:M,payloadUniqBy:T,position:U,reverseDirection:z,useTranslate3d:F,wrapperStyle:V,cursor:$,shared:G,trigger:Q,defaultIndex:ee,portal:ae,axisId:_e}=r,ve=Pi(),Ae=typeof ee=="number"?String(ee):ee;Y.useEffect(()=>{ve(mz({shared:G,trigger:Q,axisId:_e,active:a,defaultIndex:Ae}))},[ve,G,Q,_e,a,Ae]);var Ee=Gx(),Fe=CD(),ht=cz(G),{activeIndex:At,isActive:ot}=pr(Zt=>dF(Zt,ht,Q,Ae)),ft=pr(Zt=>fF(Zt,ht,Q,Ae)),rt=pr(Zt=>VT(Zt,ht,Q,Ae)),It=pr(Zt=>hF(Zt,ht,Q,Ae)),Ut=ft,Be=bF(),ct=a??ot,[nt,Ct]=m8([Ut,ct]),Me=ht==="axis"?rt:void 0;BF(ht,Q,It,Me,At,ct);var et=ae??Be;if(et==null)return null;var st=Ut??CA;ct||(st=CA),c&&st.length&&(st=BI(Ut.filter(Zt=>Zt.value!=null&&(Zt.hide!==!0||r.includeHidden)),T,VF));var gt=st.length>0,Et=Y.createElement(b9,{allowEscapeViewBox:i,animationDuration:p,animationEasing:y,isAnimationActive:C,active:ct,coordinate:It,hasPayload:gt,offset:M,position:U,reverseDirection:z,useTranslate3d:F,viewBox:Ee,wrapperStyle:V,lastBoundingBox:nt,innerRef:Ct,hasPortalFromProps:!!ae},GF(g,AA(AA({},r),{},{payload:st,label:Me,active:ct,coordinate:It,accessibilityLayer:Fe})));return Y.createElement(Y.Fragment,null,px.createPortal(Et,et),ct&&Y.createElement(_F,{cursor:$,tooltipEventType:ht,coordinate:It,payload:Ut,index:At}))}var W_={},Z_={},Y_={},DA;function YF(){return DA||(DA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a,i,{signal:p,edges:y}={}){let g,c=null;const C=y!=null&&y.includes("leading"),M=y==null||y.includes("trailing"),T=()=>{c!==null&&(a.apply(g,c),g=void 0,c=null)},U=()=>{M&&T(),$()};let z=null;const F=()=>{z!=null&&clearTimeout(z),z=setTimeout(()=>{z=null,U()},i)},V=()=>{z!==null&&(clearTimeout(z),z=null)},$=()=>{V(),g=void 0,c=null},G=()=>{T()},Q=function(...ee){if(p?.aborted)return;g=this,c=ee;const ae=z==null;F(),C&&ae&&T()};return Q.schedule=F,Q.cancel=$,Q.flush=G,p?.addEventListener("abort",$,{once:!0}),Q}e.debounce=r})(Y_)),Y_}var MA;function QF(){return MA||(MA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=YF();function a(i,p=0,y={}){typeof y!="object"&&(y={});const{leading:g=!1,trailing:c=!0,maxWait:C}=y,M=Array(2);g&&(M[0]="leading"),c&&(M[1]="trailing");let T,U=null;const z=r.debounce(function(...$){T=i.apply(this,$),U=null},p,{edges:M}),F=function(...$){return C!=null&&(U===null&&(U=Date.now()),Date.now()-U>=C)?(T=i.apply(this,$),U=Date.now(),z.cancel(),z.schedule(),T):(z.apply(this,$),T)},V=()=>(z.flush(),T);return F.cancel=z.cancel,F.flush=V,F}e.debounce=a})(Z_)),Z_}var TA;function XF(){return TA||(TA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=QF();function a(i,p=0,y={}){const{leading:g=!0,trailing:c=!0}=y;return r.debounce(i,p,{leading:g,maxWait:p,trailing:c})}e.throttle=a})(W_)),W_}var Q_,EA;function KF(){return EA||(EA=1,Q_=XF().throttle),Q_}var JF=KF();const eN=iu(JF);var X_=function(r,a){for(var i=arguments.length,p=new Array(i>2?i-2:0),y=2;y<i;y++)p[y-2]=arguments[y]};function RA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function K_(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?RA(Object(a),!0).forEach(function(i){tN(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):RA(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function tN(e,r,a){return(r=rN(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function rN(e){var r=nN(e,"string");return typeof r=="symbol"?r:r+""}function nN(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var aN=Y.forwardRef((e,r)=>{var{aspect:a,initialDimension:i={width:-1,height:-1},width:p="100%",height:y="100%",minWidth:g=0,minHeight:c,maxHeight:C,children:M,debounce:T=0,id:U,className:z,onResize:F,style:V={}}=e,$=Y.useRef(null),G=Y.useRef();G.current=F,Y.useImperativeHandle(r,()=>$.current);var[Q,ee]=Y.useState({containerWidth:i.width,containerHeight:i.height}),ae=Y.useCallback((ve,Ae)=>{ee(Ee=>{var Fe=Math.round(ve),ht=Math.round(Ae);return Ee.containerWidth===Fe&&Ee.containerHeight===ht?Ee:{containerWidth:Fe,containerHeight:ht}})},[]);Y.useEffect(()=>{var ve=ht=>{var At,{width:ot,height:ft}=ht[0].contentRect;ae(ot,ft),(At=G.current)===null||At===void 0||At.call(G,ot,ft)};T>0&&(ve=eN(ve,T,{trailing:!0,leading:!1}));var Ae=new ResizeObserver(ve),{width:Ee,height:Fe}=$.current.getBoundingClientRect();return ae(Ee,Fe),Ae.observe($.current),()=>{Ae.disconnect()}},[ae,T]);var _e=Y.useMemo(()=>{var{containerWidth:ve,containerHeight:Ae}=Q;if(ve<0||Ae<0)return null;X_(Cd(p)||Cd(y),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,p,y),X_(!a||a>0,"The aspect(%s) must be greater than zero.",a);var Ee=Cd(p)?ve:p,Fe=Cd(y)?Ae:y;return a&&a>0&&(Ee?Fe=Ee/a:Fe&&(Ee=Fe*a),C&&Fe>C&&(Fe=C)),X_(Ee>0||Fe>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Ee,Fe,p,y,g,c,a),Y.Children.map(M,ht=>Y.cloneElement(ht,{width:Ee,height:Fe,style:K_({width:Ee,height:Fe},ht.props.style)}))},[a,M,y,C,c,g,Q,p]);return Y.createElement("div",{id:U?"".concat(U):void 0,className:In("recharts-responsive-container",z),style:K_(K_({},V),{},{width:p,height:y,minWidth:g,minHeight:c,maxHeight:C}),ref:$},Y.createElement("div",{style:{width:0,height:0,overflow:"visible"}},_e))}),W2=e=>null;W2.displayName="Cell";function iN(e,r,a){return(r=oN(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function oN(e){var r=sN(e,"string");return typeof r=="symbol"?r:r+""}function sN(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}class lN{constructor(r){iN(this,"cache",new Map),this.maxSize=r}get(r){var a=this.cache.get(r);return a!==void 0&&(this.cache.delete(r),this.cache.set(r,a)),a}set(r,a){if(this.cache.has(r))this.cache.delete(r);else if(this.cache.size>=this.maxSize){var i=this.cache.keys().next().value;this.cache.delete(i)}this.cache.set(r,a)}clear(){this.cache.clear()}size(){return this.cache.size}}function IA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function uN(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?IA(Object(a),!0).forEach(function(i){cN(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):IA(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function cN(e,r,a){return(r=hN(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function hN(e){var r=fN(e,"string");return typeof r=="symbol"?r:r+""}function fN(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var dN={cacheSize:2e3,enableCache:!0},QT=uN({},dN),kA=new lN(QT.cacheSize),pN={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},UA="recharts_measurement_span";function mN(e,r){var a=r.fontSize||"",i=r.fontFamily||"",p=r.fontWeight||"",y=r.fontStyle||"",g=r.letterSpacing||"",c=r.textTransform||"";return"".concat(e,"|").concat(a,"|").concat(i,"|").concat(p,"|").concat(y,"|").concat(g,"|").concat(c)}var OA=(e,r)=>{try{var a=document.getElementById(UA);a||(a=document.createElement("span"),a.setAttribute("id",UA),a.setAttribute("aria-hidden","true"),document.body.appendChild(a)),Object.assign(a.style,pN,r),a.textContent="".concat(e);var i=a.getBoundingClientRect();return{width:i.width,height:i.height}}catch{return{width:0,height:0}}},Uy=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r==null||tm.isSsr)return{width:0,height:0};if(!QT.enableCache)return OA(r,a);var i=mN(r,a),p=kA.get(i);if(p)return p;var y=OA(r,a);return kA.set(i,y),y},LA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,yN=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,gN=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,XT={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},vN=Object.keys(XT),Lp="NaN";function _N(e,r){return e*XT[r]}class Zo{static parse(r){var a,[,i,p]=(a=gN.exec(r))!==null&&a!==void 0?a:[];return new Zo(parseFloat(i),p??"")}constructor(r,a){this.num=r,this.unit=a,this.num=r,this.unit=a,ol(r)&&(this.unit=""),a!==""&&!yN.test(a)&&(this.num=NaN,this.unit=""),vN.includes(a)&&(this.num=_N(r,a),this.unit="px")}add(r){return this.unit!==r.unit?new Zo(NaN,""):new Zo(this.num+r.num,this.unit)}subtract(r){return this.unit!==r.unit?new Zo(NaN,""):new Zo(this.num-r.num,this.unit)}multiply(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new Zo(NaN,""):new Zo(this.num*r.num,this.unit||r.unit)}divide(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new Zo(NaN,""):new Zo(this.num/r.num,this.unit||r.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ol(this.num)}}function KT(e){if(e.includes(Lp))return Lp;for(var r=e;r.includes("*")||r.includes("/");){var a,[,i,p,y]=(a=LA.exec(r))!==null&&a!==void 0?a:[],g=Zo.parse(i??""),c=Zo.parse(y??""),C=p==="*"?g.multiply(c):g.divide(c);if(C.isNaN())return Lp;r=r.replace(LA,C.toString())}for(;r.includes("+")||/.-\d+(?:\.\d+)?/.test(r);){var M,[,T,U,z]=(M=zA.exec(r))!==null&&M!==void 0?M:[],F=Zo.parse(T??""),V=Zo.parse(z??""),$=U==="+"?F.add(V):F.subtract(V);if($.isNaN())return Lp;r=r.replace(zA,$.toString())}return r}var FA=/\(([^()]*)\)/;function bN(e){for(var r=e,a;(a=FA.exec(r))!=null;){var[,i]=a;r=r.replace(FA,KT(i))}return r}function xN(e){var r=e.replace(/\s+/g,"");return r=bN(r),r=KT(r),r}function SN(e){try{return xN(e)}catch{return Lp}}function J_(e){var r=SN(e.slice(5,-1));return r===Lp?"":r}var wN=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],PN=["dx","dy","angle","className","breakAll"];function ax(){return ax=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},ax.apply(null,arguments)}function NA(e,r){if(e==null)return{};var a,i,p=AN(e,r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(i=0;i<y.length;i++)a=y[i],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(p[a]=e[a])}return p}function AN(e,r){if(e==null)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(r.indexOf(i)!==-1)continue;a[i]=e[i]}return a}var JT=/[ \f\n\r\t\v\u2028\u2029]+/,e5=e=>{var{children:r,breakAll:a,style:i}=e;try{var p=[];wi(r)||(a?p=r.toString().split(""):p=r.toString().split(JT));var y=p.map(c=>({word:c,width:Uy(c,i).width})),g=a?0:Uy("",i).width;return{wordsWithComputedWidth:y,spaceWidth:g}}catch{return null}},CN=(e,r,a,i,p)=>{var{maxLines:y,children:g,style:c,breakAll:C}=e,M=Pr(y),T=g,U=function(){var ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ot.reduce((ft,rt)=>{var{word:It,width:Ut}=rt,Be=ft[ft.length-1];if(Be&&(i==null||p||Be.width+Ut+a<Number(i)))Be.words.push(It),Be.width+=Ut+a;else{var ct={words:[It],width:Ut};ft.push(ct)}return ft},[])},z=U(r),F=At=>At.reduce((ot,ft)=>ot.width>ft.width?ot:ft);if(!M||p)return z;var V=z.length>y||F(z).width>Number(i);if(!V)return z;for(var $="",G=At=>{var ot=T.slice(0,At),ft=e5({breakAll:C,style:c,children:ot+$}).wordsWithComputedWidth,rt=U(ft),It=rt.length>y||F(rt).width>Number(i);return[It,rt]},Q=0,ee=T.length-1,ae=0,_e;Q<=ee&&ae<=T.length-1;){var ve=Math.floor((Q+ee)/2),Ae=ve-1,[Ee,Fe]=G(Ae),[ht]=G(ve);if(!Ee&&!ht&&(Q=ve+1),Ee&&ht&&(ee=ve-1),!Ee&&ht){_e=Fe;break}ae++}return _e||z},jA=e=>{var r=wi(e)?[]:e.toString().split(JT);return[{words:r}]},DN=e=>{var{width:r,scaleToFit:a,children:i,style:p,breakAll:y,maxLines:g}=e;if((r||a)&&!tm.isSsr){var c,C,M=e5({breakAll:y,children:i,style:p});if(M){var{wordsWithComputedWidth:T,spaceWidth:U}=M;c=T,C=U}else return jA(i);return CN({breakAll:y,children:i,maxLines:g,style:p},c,C,r,a)}return jA(i)},BA="#808080",Z2=Y.forwardRef((e,r)=>{var{x:a=0,y:i=0,lineHeight:p="1em",capHeight:y="0.71em",scaleToFit:g=!1,textAnchor:c="start",verticalAnchor:C="end",fill:M=BA}=e,T=NA(e,wN),U=Y.useMemo(()=>DN({breakAll:T.breakAll,children:T.children,maxLines:T.maxLines,scaleToFit:g,style:T.style,width:T.width}),[T.breakAll,T.children,T.maxLines,g,T.style,T.width]),{dx:z,dy:F,angle:V,className:$,breakAll:G}=T,Q=NA(T,PN);if(!ac(a)||!ac(i)||U.length===0)return null;var ee=a+(Pr(z)?z:0),ae=i+(Pr(F)?F:0),_e;switch(C){case"start":_e=J_("calc(".concat(y,")"));break;case"middle":_e=J_("calc(".concat((U.length-1)/2," * -").concat(p," + (").concat(y," / 2))"));break;default:_e=J_("calc(".concat(U.length-1," * -").concat(p,")"));break}var ve=[];if(g){var Ae=U[0].width,{width:Ee}=T;ve.push("scale(".concat(Pr(Ee)?Ee/Ae:1,")"))}return V&&ve.push("rotate(".concat(V,", ").concat(ee,", ").concat(ae,")")),ve.length&&(Q.transform=ve.join(" ")),Y.createElement("text",ax({},Vi(Q,!0),{ref:r,x:ee,y:ae,className:In("recharts-text",$),textAnchor:c,fill:M.includes("url")?BA:M}),U.map((Fe,ht)=>{var At=Fe.words.join(G?"":" ");return Y.createElement("tspan",{x:ee,dy:ht===0?_e:p,key:"".concat(At,"-").concat(ht)},At)}))});Z2.displayName="Text";var MN=["labelRef"];function TN(e,r){if(e==null)return{};var a,i,p=EN(e,r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(i=0;i<y.length;i++)a=y[i],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(p[a]=e[a])}return p}function EN(e,r){if(e==null)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(r.indexOf(i)!==-1)continue;a[i]=e[i]}return a}function qA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function Ea(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?qA(Object(a),!0).forEach(function(i){RN(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qA(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function RN(e,r,a){return(r=IN(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function IN(e){var r=kN(e,"string");return typeof r=="symbol"?r:r+""}function kN(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Jc(){return Jc=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Jc.apply(null,arguments)}var t5=Y.createContext(null),UN=e=>{var{x:r,y:a,width:i,height:p,children:y}=e,g=Y.useMemo(()=>({x:r,y:a,width:i,height:p}),[r,a,i,p]);return Y.createElement(t5.Provider,{value:g},y)},r5=()=>{var e=Y.useContext(t5),r=Gx();return e||r},ON=Y.createContext(null),LN=()=>{var e=Y.useContext(ON),r=pr(zM);return e||r},zN=e=>{var{value:r,formatter:a}=e,i=wi(e.children)?r:e.children;return typeof a=="function"?a(i):i},Y2=e=>e!=null&&typeof e=="function",FN=(e,r)=>{var a=Ds(r-e),i=Math.min(Math.abs(r-e),360);return a*i},NN=(e,r,a,i,p)=>{var{offset:y,className:g}=e,{cx:c,cy:C,innerRadius:M,outerRadius:T,startAngle:U,endAngle:z,clockWise:F}=p,V=(M+T)/2,$=FN(U,z),G=$>=0?1:-1,Q,ee;switch(r){case"insideStart":Q=U+G*y,ee=F;break;case"insideEnd":Q=z-G*y,ee=!F;break;case"end":Q=z+G*y,ee=F;break;default:throw new Error("Unsupported position ".concat(r))}ee=$<=0?ee:!ee;var ae=$i(c,C,V,Q),_e=$i(c,C,V,Q+(ee?1:-1)*359),ve="M".concat(ae.x,",").concat(ae.y,`
    A`).concat(V,",").concat(V,",0,1,").concat(ee?0:1,`,
    `).concat(_e.x,",").concat(_e.y),Ae=wi(e.id)?Ny("recharts-radial-line-"):e.id;return Y.createElement("text",Jc({},i,{dominantBaseline:"central",className:In("recharts-radial-bar-label",g)}),Y.createElement("defs",null,Y.createElement("path",{id:Ae,d:ve})),Y.createElement("textPath",{xlinkHref:"#".concat(Ae)},a))},jN=(e,r,a)=>{var{cx:i,cy:p,innerRadius:y,outerRadius:g,startAngle:c,endAngle:C}=e,M=(c+C)/2;if(a==="outside"){var{x:T,y:U}=$i(i,p,g+r,M);return{x:T,y:U,textAnchor:T>=i?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:i,y:p,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:i,y:p,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:i,y:p,textAnchor:"middle",verticalAnchor:"end"};var z=(y+g)/2,{x:F,y:V}=$i(i,p,z,M);return{x:F,y:V,textAnchor:"middle",verticalAnchor:"middle"}},n5=e=>"cx"in e&&Pr(e.cx),BN=(e,r)=>{var{parentViewBox:a,offset:i,position:p}=e,y;a!=null&&!n5(a)&&(y=a);var{x:g,y:c,width:C,height:M}=r,T=M>=0?1:-1,U=T*i,z=T>0?"end":"start",F=T>0?"start":"end",V=C>=0?1:-1,$=V*i,G=V>0?"end":"start",Q=V>0?"start":"end";if(p==="top"){var ee={x:g+C/2,y:c-T*i,textAnchor:"middle",verticalAnchor:z};return Ea(Ea({},ee),y?{height:Math.max(c-y.y,0),width:C}:{})}if(p==="bottom"){var ae={x:g+C/2,y:c+M+U,textAnchor:"middle",verticalAnchor:F};return Ea(Ea({},ae),y?{height:Math.max(y.y+y.height-(c+M),0),width:C}:{})}if(p==="left"){var _e={x:g-$,y:c+M/2,textAnchor:G,verticalAnchor:"middle"};return Ea(Ea({},_e),y?{width:Math.max(_e.x-y.x,0),height:M}:{})}if(p==="right"){var ve={x:g+C+$,y:c+M/2,textAnchor:Q,verticalAnchor:"middle"};return Ea(Ea({},ve),y?{width:Math.max(y.x+y.width-ve.x,0),height:M}:{})}var Ae=y?{width:C,height:M}:{};return p==="insideLeft"?Ea({x:g+$,y:c+M/2,textAnchor:Q,verticalAnchor:"middle"},Ae):p==="insideRight"?Ea({x:g+C-$,y:c+M/2,textAnchor:G,verticalAnchor:"middle"},Ae):p==="insideTop"?Ea({x:g+C/2,y:c+U,textAnchor:"middle",verticalAnchor:F},Ae):p==="insideBottom"?Ea({x:g+C/2,y:c+M-U,textAnchor:"middle",verticalAnchor:z},Ae):p==="insideTopLeft"?Ea({x:g+$,y:c+U,textAnchor:Q,verticalAnchor:F},Ae):p==="insideTopRight"?Ea({x:g+C-$,y:c+U,textAnchor:G,verticalAnchor:F},Ae):p==="insideBottomLeft"?Ea({x:g+$,y:c+M-U,textAnchor:Q,verticalAnchor:z},Ae):p==="insideBottomRight"?Ea({x:g+C-$,y:c+M-U,textAnchor:G,verticalAnchor:z},Ae):p&&typeof p=="object"&&(Pr(p.x)||Cd(p.x))&&(Pr(p.y)||Cd(p.y))?Ea({x:g+au(p.x,C),y:c+au(p.y,M),textAnchor:"end",verticalAnchor:"end"},Ae):Ea({x:g+C/2,y:c+M/2,textAnchor:"middle",verticalAnchor:"middle"},Ae)},qN={offset:5};function uf(e){var r=uu(e,qN),{viewBox:a,position:i,value:p,children:y,content:g,className:c="",textBreakAll:C,labelRef:M}=r,T=LN(),U=r5(),z=i==="center"?U:T??U,F=a||z;if(!F||wi(p)&&wi(y)&&!Y.isValidElement(g)&&typeof g!="function")return null;var V=Ea(Ea({},r),{},{viewBox:F});if(Y.isValidElement(g)){var{labelRef:$}=V,G=TN(V,MN);return Y.cloneElement(g,G)}var Q;if(typeof g=="function"){if(Q=Y.createElement(g,V),Y.isValidElement(Q))return Q}else Q=zN(r);var ee=n5(F),ae=Vi(r,!0);if(ee&&(i==="insideStart"||i==="insideEnd"||i==="end"))return NN(r,i,Q,ae,F);var _e=ee?jN(F,r.offset,r.position):BN(r,F);return Y.createElement(Z2,Jc({ref:M,className:In("recharts-label",c)},ae,_e,{breakAll:C}),Q)}uf.displayName="Label";var HN=(e,r,a)=>{if(!e)return null;var i={viewBox:r,labelRef:a};return e===!0?Y.createElement(uf,Jc({key:"label-implicit"},i)):ac(e)?Y.createElement(uf,Jc({key:"label-implicit",value:e},i)):Y.isValidElement(e)?e.type===uf?Y.cloneElement(e,Ea({key:"label-implicit"},i)):Y.createElement(uf,Jc({key:"label-implicit",content:e},i)):Y2(e)?Y.createElement(uf,Jc({key:"label-implicit",content:e},i)):e&&typeof e=="object"?Y.createElement(uf,Jc({},e,{key:"label-implicit"},i)):null};function $N(e){var{label:r}=e,a=r5();return HN(r,a)||null}var eb={},tb={},HA;function VN(){return HA||(HA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return a[a.length-1]}e.last=r})(tb)),tb}var rb={},$A;function GN(){return $A||($A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return Array.isArray(a)?a:Array.from(a)}e.toArray=r})(rb)),rb}var VA;function WN(){return VA||(VA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=VN(),a=GN(),i=Lx();function p(y){if(i.isArrayLike(y))return r.last(a.toArray(y))}e.last=p})(eb)),eb}var nb,GA;function ZN(){return GA||(GA=1,nb=WN().last),nb}var YN=ZN();const QN=iu(YN);var XN=["valueAccessor"],KN=["dataKey","clockWise","id","textBreakAll"];function xv(){return xv=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},xv.apply(null,arguments)}function WA(e,r){if(e==null)return{};var a,i,p=JN(e,r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(i=0;i<y.length;i++)a=y[i],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(p[a]=e[a])}return p}function JN(e,r){if(e==null)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(r.indexOf(i)!==-1)continue;a[i]=e[i]}return a}var ej=e=>Array.isArray(e.value)?QN(e.value):e.value,a5=Y.createContext(void 0),tj=a5.Provider,i5=Y.createContext(void 0);i5.Provider;function rj(){return Y.useContext(a5)}function nj(){return Y.useContext(i5)}function N0(e){var{valueAccessor:r=ej}=e,a=WA(e,XN),{dataKey:i,clockWise:p,id:y,textBreakAll:g}=a,c=WA(a,KN),C=rj(),M=nj(),T=C||M;return!T||!T.length?null:Y.createElement(ff,{className:"recharts-label-list"},T.map((U,z)=>{var F,V=wi(i)?r(U,z):Co(U&&U.payload,i),$=wi(y)?{}:{id:"".concat(y,"-").concat(z)};return Y.createElement(uf,xv({},Vi(U,!0),c,$,{fill:(F=a.fill)!==null&&F!==void 0?F:U.fill,parentViewBox:U.parentViewBox,value:V,textBreakAll:g,viewBox:U.viewBox,key:"label-".concat(z),index:z}))}))}N0.displayName="LabelList";function aj(e){var{label:r}=e;return r?r===!0?Y.createElement(N0,{key:"labelList-implicit"}):Y.isValidElement(r)||Y2(r)?Y.createElement(N0,{key:"labelList-implicit",content:r}):typeof r=="object"?Y.createElement(N0,xv({key:"labelList-implicit"},r,{type:String(r.type)})):null:null}var ij={radiusAxis:{},angleAxis:{}},o5=Rs({name:"polarAxis",initialState:ij,reducers:{addRadiusAxis(e,r){e.radiusAxis[r.payload.id]=r.payload},removeRadiusAxis(e,r){delete e.radiusAxis[r.payload.id]},addAngleAxis(e,r){e.angleAxis[r.payload.id]=r.payload},removeAngleAxis(e,r){delete e.angleAxis[r.payload.id]}}}),{addRadiusAxis:aG,removeRadiusAxis:iG,addAngleAxis:oG,removeAngleAxis:sG}=o5.actions,oj=o5.reducer,ab={},ZA;function sj(){return ZA||(ZA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){if(typeof a!="object"||a==null)return!1;if(Object.getPrototypeOf(a)===null)return!0;if(Object.prototype.toString.call(a)!=="[object Object]"){const p=a[Symbol.toStringTag];return p==null||!Object.getOwnPropertyDescriptor(a,Symbol.toStringTag)?.writable?!1:a.toString()===`[object ${p}]`}let i=a;for(;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(a)===i}e.isPlainObject=r})(ab)),ab}var ib,YA;function lj(){return YA||(YA=1,ib=sj().isPlainObject),ib}var uj=lj();const cj=iu(uj);function QA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function XA(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?QA(Object(a),!0).forEach(function(i){hj(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):QA(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function hj(e,r,a){return(r=fj(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function fj(e){var r=dj(e,"string");return typeof r=="symbol"?r:r+""}function dj(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Sv(){return Sv=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Sv.apply(null,arguments)}var KA=(e,r,a,i,p)=>{var y=a-i,g;return g="M ".concat(e,",").concat(r),g+="L ".concat(e+a,",").concat(r),g+="L ".concat(e+a-y/2,",").concat(r+p),g+="L ".concat(e+a-y/2-i,",").concat(r+p),g+="L ".concat(e,",").concat(r," Z"),g},pj={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},mj=e=>{var r=uu(e,pj),{x:a,y:i,upperWidth:p,lowerWidth:y,height:g,className:c}=r,{animationEasing:C,animationDuration:M,animationBegin:T,isUpdateAnimationActive:U}=r,z=Y.useRef(),[F,V]=Y.useState(-1),$=Y.useRef(p),G=Y.useRef(y),Q=Y.useRef(g),ee=Y.useRef(a),ae=Y.useRef(i),_e=Yx(e,"trapezoid-");if(Y.useEffect(()=>{if(z.current&&z.current.getTotalLength)try{var It=z.current.getTotalLength();It&&V(It)}catch{}},[]),a!==+a||i!==+i||p!==+p||y!==+y||g!==+g||p===0&&y===0||g===0)return null;var ve=In("recharts-trapezoid",c);if(!U)return Y.createElement("g",null,Y.createElement("path",Sv({},Vi(r,!0),{className:ve,d:KA(a,i,p,y,g)})));var Ae=$.current,Ee=G.current,Fe=Q.current,ht=ee.current,At=ae.current,ot="0px ".concat(F===-1?1:F,"px"),ft="".concat(F,"px 0px"),rt=DD(["strokeDasharray"],M,C);return Y.createElement(Zx,{animationId:_e,key:_e,canBegin:F>0,duration:M,easing:C,isActive:U,begin:T},It=>{var Ut=wo(Ae,p,It),Be=wo(Ee,y,It),ct=wo(Fe,g,It),nt=wo(ht,a,It),Ct=wo(At,i,It);z.current&&($.current=Ut,G.current=Be,Q.current=ct,ee.current=nt,ae.current=Ct);var Me=It>0?{transition:rt,strokeDasharray:ft}:{strokeDasharray:ot};return Y.createElement("path",Sv({},Vi(r,!0),{className:ve,d:KA(nt,Ct,Ut,Be,ct),ref:z,style:XA(XA({},Me),r.style)}))})},yj=["option","shapeType","propTransformer","activeClassName","isActive"];function gj(e,r){if(e==null)return{};var a,i,p=vj(e,r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(i=0;i<y.length;i++)a=y[i],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(p[a]=e[a])}return p}function vj(e,r){if(e==null)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(r.indexOf(i)!==-1)continue;a[i]=e[i]}return a}function JA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function wv(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?JA(Object(a),!0).forEach(function(i){_j(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):JA(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function _j(e,r,a){return(r=bj(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function bj(e){var r=xj(e,"string");return typeof r=="symbol"?r:r+""}function xj(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Sj(e,r){return wv(wv({},r),e)}function wj(e,r){return e==="symbols"}function eC(e){var{shapeType:r,elementProps:a}=e;switch(r){case"rectangle":return Y.createElement(RD,a);case"trapezoid":return Y.createElement(mj,a);case"sector":return Y.createElement(UD,a);case"symbols":if(wj(r))return Y.createElement(N3,a);break;default:return null}}function Pj(e){return Y.isValidElement(e)?e.props:e}function Aj(e){var{option:r,shapeType:a,propTransformer:i=Sj,activeClassName:p="recharts-active-shape",isActive:y}=e,g=gj(e,yj),c;if(Y.isValidElement(r))c=Y.cloneElement(r,wv(wv({},g),Pj(r)));else if(typeof r=="function")c=r(g);else if(cj(r)&&typeof r!="boolean"){var C=i(r,g);c=Y.createElement(eC,{shapeType:a,elementProps:C})}else{var M=g;c=Y.createElement(eC,{shapeType:a,elementProps:M})}return y?Y.createElement(ff,{className:p},c):c}var s5=(e,r)=>{var a=Pi();return(i,p)=>y=>{e?.(i,p,y),a(DT({activeIndex:String(p),activeDataKey:r,activeCoordinate:i.tooltipPosition}))}},l5=e=>{var r=Pi();return(a,i)=>p=>{e?.(a,i,p),r(yz())}},u5=(e,r)=>{var a=Pi();return(i,p)=>y=>{e?.(i,p,y),a(gz({activeIndex:String(p),activeDataKey:r,activeCoordinate:i.tooltipPosition}))}};function Cj(e){var{fn:r,args:a}=e,i=Pi(),p=lu();return Y.useEffect(()=>{if(!p){var y=r(a);return i(dz(y)),()=>{i(pz(y))}}},[r,a,i,p]),null}var Dj=()=>{};function Mj(e){var{legendPayload:r}=e,a=Pi(),i=lu();return Y.useEffect(()=>i?Dj:(a(o9(r)),()=>{a(s9(r))}),[a,i,r]),null}var ob,Tj=()=>{var[e]=Y.useState(()=>Ny("uid-"));return e},Ej=(ob=dx.useId)!==null&&ob!==void 0?ob:Tj;function Rj(e,r){var a=Ej();return r||(e?"".concat(e,"-").concat(a):a)}var Ij=Y.createContext(void 0),kj=e=>{var{id:r,type:a,children:i}=e,p=Rj("recharts-".concat(a),r);return Y.createElement(Ij.Provider,{value:p},i(p))},Uj={cartesianItems:[],polarItems:[]},c5=Rs({name:"graphicalItems",initialState:Uj,reducers:{addCartesianGraphicalItem(e,r){e.cartesianItems.push(r.payload)},replaceCartesianGraphicalItem(e,r){var{prev:a,next:i}=r.payload,p=rh(e).cartesianItems.indexOf(a);p>-1&&(e.cartesianItems[p]=i)},removeCartesianGraphicalItem(e,r){var a=rh(e).cartesianItems.indexOf(r.payload);a>-1&&e.cartesianItems.splice(a,1)},addPolarGraphicalItem(e,r){e.polarItems.push(r.payload)},removePolarGraphicalItem(e,r){var a=rh(e).polarItems.indexOf(r.payload);a>-1&&e.polarItems.splice(a,1)}}}),{addCartesianGraphicalItem:Oj,replaceCartesianGraphicalItem:Lj,removeCartesianGraphicalItem:zj,addPolarGraphicalItem:lG,removePolarGraphicalItem:uG}=c5.actions,Fj=c5.reducer;function Nj(e){var r=Pi(),a=Y.useRef(null);return Y.useEffect(()=>{a.current===null?r(Oj(e)):a.current!==e&&r(Lj({prev:a.current,next:e})),a.current=e},[r,e]),Y.useEffect(()=>()=>{a.current&&(r(zj(a.current)),a.current=null)},[r]),null}function tC(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function rC(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?tC(Object(a),!0).forEach(function(i){jj(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tC(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function jj(e,r,a){return(r=Bj(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function Bj(e){var r=qj(e,"string");return typeof r=="symbol"?r:r+""}function qj(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Hj={xAxis:{},yAxis:{},zAxis:{}},h5=Rs({name:"cartesianAxis",initialState:Hj,reducers:{addXAxis(e,r){e.xAxis[r.payload.id]=r.payload},removeXAxis(e,r){delete e.xAxis[r.payload.id]},addYAxis(e,r){e.yAxis[r.payload.id]=r.payload},removeYAxis(e,r){delete e.yAxis[r.payload.id]},addZAxis(e,r){e.zAxis[r.payload.id]=r.payload},removeZAxis(e,r){delete e.zAxis[r.payload.id]},updateYAxisWidth(e,r){var{id:a,width:i}=r.payload;e.yAxis[a]&&(e.yAxis[a]=rC(rC({},e.yAxis[a]),{},{width:i}))}}}),{addXAxis:$j,removeXAxis:Vj,addYAxis:Gj,removeYAxis:Wj,addZAxis:cG,removeZAxis:hG,updateYAxisWidth:Zj}=h5.actions,Yj=h5.reducer,Qj=at([Ai],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),Xj=at([Qj,lh,uh],(e,r,a)=>{if(!(!e||r==null||a==null))return{x:e.left,y:e.top,width:Math.max(0,r-e.left-e.right),height:Math.max(0,a-e.top-e.bottom)}}),f5=()=>pr(Xj),Kj="Invariant failed";function Jj(e,r){throw new Error(Kj)}var eB=["x","y"];function ix(){return ix=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},ix.apply(null,arguments)}function nC(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function Dy(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?nC(Object(a),!0).forEach(function(i){tB(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nC(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function tB(e,r,a){return(r=rB(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function rB(e){var r=nB(e,"string");return typeof r=="symbol"?r:r+""}function nB(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function aB(e,r){if(e==null)return{};var a,i,p=iB(e,r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(i=0;i<y.length;i++)a=y[i],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(p[a]=e[a])}return p}function iB(e,r){if(e==null)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(r.indexOf(i)!==-1)continue;a[i]=e[i]}return a}function oB(e,r){var{x:a,y:i}=e,p=aB(e,eB),y="".concat(a),g=parseInt(y,10),c="".concat(i),C=parseInt(c,10),M="".concat(r.height||p.height),T=parseInt(M,10),U="".concat(r.width||p.width),z=parseInt(U,10);return Dy(Dy(Dy(Dy(Dy({},r),p),g?{x:g}:{}),C?{y:C}:{}),{},{height:T,width:z,name:r.name,radius:r.radius})}function Q2(e){return Y.createElement(Aj,ix({shapeType:"rectangle",propTransformer:oB,activeClassName:"recharts-active-bar"},e))}var sB=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(i,p)=>{if(Pr(r))return r;var y=Pr(i)||wi(i);return y?r(i,p):(y||Jj(),a)}},lB={},d5=Rs({name:"errorBars",initialState:lB,reducers:{addErrorBar:(e,r)=>{var{itemId:a,errorBar:i}=r.payload;e[a]||(e[a]=[]),e[a].push(i)},replaceErrorBar:(e,r)=>{var{itemId:a,prev:i,next:p}=r.payload;e[a]&&(e[a]=e[a].map(y=>y.dataKey===i.dataKey&&y.direction===i.direction?p:y))},removeErrorBar:(e,r)=>{var{itemId:a,errorBar:i}=r.payload;e[a]&&(e[a]=e[a].filter(p=>p.dataKey!==i.dataKey||p.direction!==i.direction))}}}),{addErrorBar:fG,replaceErrorBar:dG,removeErrorBar:pG}=d5.actions,uB=d5.reducer,cB=["children"];function hB(e,r){if(e==null)return{};var a,i,p=fB(e,r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(i=0;i<y.length;i++)a=y[i],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(p[a]=e[a])}return p}function fB(e,r){if(e==null)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(r.indexOf(i)!==-1)continue;a[i]=e[i]}return a}var dB={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},pB=Y.createContext(dB);function mB(e){var{children:r}=e,a=hB(e,cB);return Y.createElement(pB.Provider,{value:a},r)}function p5(e,r){var a,i,p=pr(M=>hh(M,e)),y=pr(M=>fh(M,r)),g=(a=p?.allowDataOverflow)!==null&&a!==void 0?a:ws.allowDataOverflow,c=(i=y?.allowDataOverflow)!==null&&i!==void 0?i:Ps.allowDataOverflow,C=g||c;return{needClip:C,needClipX:g,needClipY:c}}function yB(e){var{xAxisId:r,yAxisId:a,clipPathId:i}=e,p=f5(),{needClipX:y,needClipY:g,needClip:c}=p5(r,a);if(!c)return null;var{x:C,y:M,width:T,height:U}=p;return Y.createElement("clipPath",{id:"clipPath-".concat(i)},Y.createElement("rect",{x:y?C:C-T/2,y:g?M:M-U/2,width:y?T:T*2,height:g?U:U*2}))}var gB=["onMouseEnter","onMouseLeave","onClick"],vB=["value","background","tooltipPosition"],_B=["id"],bB=["onMouseEnter","onClick","onMouseLeave"];function df(){return df=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},df.apply(null,arguments)}function aC(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function Po(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?aC(Object(a),!0).forEach(function(i){xB(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):aC(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function xB(e,r,a){return(r=SB(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function SB(e){var r=wB(e,"string");return typeof r=="symbol"?r:r+""}function wB(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Pv(e,r){if(e==null)return{};var a,i,p=PB(e,r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(i=0;i<y.length;i++)a=y[i],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(p[a]=e[a])}return p}function PB(e,r){if(e==null)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(r.indexOf(i)!==-1)continue;a[i]=e[i]}return a}var AB=e=>{var{dataKey:r,name:a,fill:i,legendType:p,hide:y}=e;return[{inactive:y,dataKey:r,type:p,color:i,value:wD(a,r),payload:e}]};function CB(e){var{dataKey:r,stroke:a,strokeWidth:i,fill:p,name:y,hide:g,unit:c}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:i,fill:p,dataKey:r,nameKey:void 0,name:wD(y,r),hide:g,type:e.tooltipType,color:e.fill,unit:c}}}function DB(e){var r=pr(Qp),{data:a,dataKey:i,background:p,allOtherBarProps:y}=e,{onMouseEnter:g,onMouseLeave:c,onClick:C}=y,M=Pv(y,gB),T=s5(g,i),U=l5(c),z=u5(C,i);if(!p||a==null)return null;var F=Vi(p,!1);return Y.createElement(Y.Fragment,null,a.map((V,$)=>{var{value:G,background:Q,tooltipPosition:ee}=V,ae=Pv(V,vB);if(!Q)return null;var _e=T(V,$),ve=U(V,$),Ae=z(V,$),Ee=Po(Po(Po(Po(Po({option:p,isActive:String($)===r},ae),{},{fill:"#eee"},Q),F),Ix(M,V,$)),{},{onMouseEnter:_e,onMouseLeave:ve,onClick:Ae,dataKey:i,index:$,className:"recharts-bar-background-rectangle"});return Y.createElement(Q2,df({key:"background-bar-".concat(Ee.index)},Ee))}))}function MB(e){var{showLabels:r,children:a,rects:i}=e,p=i?.map(y=>{var g={x:y.x,y:y.y,width:y.width,height:y.height};return Po(Po({},g),{},{value:y.value,payload:y.payload,parentViewBox:y.parentViewBox,viewBox:g,fill:y.fill})});return Y.createElement(tj,{value:r?p:void 0},a)}function TB(e){var{shape:r,activeBar:a,baseProps:i,entry:p,index:y,dataKey:g}=e,c=pr(Qp),C=pr(jT),M=a&&String(y)===c&&(C==null||g===C),T=M?a:r;return Y.createElement(Q2,df({},i,p,{isActive:M,option:T,index:y,dataKey:g}))}function EB(e){var{shape:r,baseProps:a,entry:i,index:p,dataKey:y}=e;return Y.createElement(Q2,df({},a,i,{isActive:!1,option:r,index:p,dataKey:y}))}function RB(e){var{data:r,props:a}=e,i=eg(a),{id:p}=i,y=Pv(i,_B),{shape:g,dataKey:c,activeBar:C}=a,{onMouseEnter:M,onClick:T,onMouseLeave:U}=a,z=Pv(a,bB),F=s5(M,c),V=l5(U),$=u5(T,c);return r?Y.createElement(Y.Fragment,null,r.map((G,Q)=>Y.createElement(ff,df({className:"recharts-bar-rectangle"},Ix(z,G,Q),{onMouseEnter:F(G,Q),onMouseLeave:V(G,Q),onClick:$(G,Q),key:"rectangle-".concat(G?.x,"-").concat(G?.y,"-").concat(G?.value,"-").concat(Q)}),C?Y.createElement(TB,{shape:g,activeBar:C,baseProps:y,entry:G,index:Q,dataKey:c}):Y.createElement(EB,{shape:g,baseProps:y,entry:G,index:Q,dataKey:c})))):null}function IB(e){var{props:r,previousRectanglesRef:a}=e,{data:i,layout:p,isAnimationActive:y,animationBegin:g,animationDuration:c,animationEasing:C,onAnimationEnd:M,onAnimationStart:T}=r,U=a.current,z=Yx(r,"recharts-bar-"),[F,V]=Y.useState(!1),$=!F,G=Y.useCallback(()=>{typeof M=="function"&&M(),V(!1)},[M]),Q=Y.useCallback(()=>{typeof T=="function"&&T(),V(!0)},[T]);return Y.createElement(MB,{showLabels:$,rects:i},Y.createElement(Zx,{animationId:z,begin:g,duration:c,isActive:y,easing:C,onAnimationEnd:G,onAnimationStart:Q,key:z},ee=>{var ae=ee===1?i:i?.map((_e,ve)=>{var Ae=U&&U[ve];if(Ae)return Po(Po({},_e),{},{x:wo(Ae.x,_e.x,ee),y:wo(Ae.y,_e.y,ee),width:wo(Ae.width,_e.width,ee),height:wo(Ae.height,_e.height,ee)});if(p==="horizontal"){var Ee=wo(0,_e.height,ee);return Po(Po({},_e),{},{y:_e.y+_e.height-Ee,height:Ee})}var Fe=wo(0,_e.width,ee);return Po(Po({},_e),{},{width:Fe})});return ee>0&&(a.current=ae??null),ae==null?null:Y.createElement(ff,null,Y.createElement(RB,{props:r,data:ae}))}),Y.createElement(aj,{label:r.label}),r.children)}function kB(e){var r=Y.useRef(null);return Y.createElement(IB,{previousRectanglesRef:r,props:e})}var m5=0,UB=(e,r)=>{var a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:Co(e,r)}};class OB extends Y.PureComponent{render(){var{hide:r,data:a,dataKey:i,className:p,xAxisId:y,yAxisId:g,needClip:c,background:C,id:M}=this.props;if(r||a==null)return null;var T=In("recharts-bar",p),U=M;return Y.createElement(ff,{className:T,id:M},c&&Y.createElement("defs",null,Y.createElement(yB,{clipPathId:U,xAxisId:y,yAxisId:g})),Y.createElement(ff,{className:"recharts-bar-rectangles",clipPath:c?"url(#clipPath-".concat(U,")"):void 0},Y.createElement(DB,{data:a,dataKey:i,background:C,allOtherBarProps:this.props}),Y.createElement(kB,this.props)))}}var LB={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!tm.isSsr,legendType:"rect",minPointSize:m5,xAxisId:0,yAxisId:0};function zB(e){var{xAxisId:r,yAxisId:a,hide:i,legendType:p,minPointSize:y,activeBar:g,animationBegin:c,animationDuration:C,animationEasing:M,isAnimationActive:T}=e,{needClip:U}=p5(r,a),z=Wx(),F=lu(),V=PR(e.children,W2),$=pr(ee=>hq(ee,r,a,F,e.id,V));if(z!=="vertical"&&z!=="horizontal")return null;var G,Q=$?.[0];return Q==null||Q.height==null||Q.width==null?G=0:G=z==="vertical"?Q.height/2:Q.width/2,Y.createElement(mB,{xAxisId:r,yAxisId:a,data:$,dataPointFormatter:UB,errorBarOffset:G},Y.createElement(OB,df({},e,{layout:z,needClip:U,data:$,xAxisId:r,yAxisId:a,hide:i,legendType:p,minPointSize:y,activeBar:g,animationBegin:c,animationDuration:C,animationEasing:M,isAnimationActive:T})))}function FB(e){var{layout:r,barSettings:{dataKey:a,minPointSize:i},pos:p,bandSize:y,xAxis:g,yAxis:c,xAxisTicks:C,yAxisTicks:M,stackedData:T,displayedData:U,offset:z,cells:F,parentViewBox:V}=e,$=r==="horizontal"?c:g,G=T?$.scale.domain():null,Q=O7({numericAxis:$});return U.map((ee,ae)=>{var _e,ve,Ae,Ee,Fe,ht;T?_e=T7(T[ae],G):(_e=Co(ee,a),Array.isArray(_e)||(_e=[Q,_e]));var At=sB(i,m5)(_e[1],ae);if(r==="horizontal"){var ot,[ft,rt]=[c.scale(_e[0]),c.scale(_e[1])];ve=Kw({axis:g,ticks:C,bandSize:y,offset:p.offset,entry:ee,index:ae}),Ae=(ot=rt??ft)!==null&&ot!==void 0?ot:void 0,Ee=p.size;var It=ft-rt;if(Fe=ol(It)?0:It,ht={x:ve,y:z.top,width:Ee,height:z.height},Math.abs(At)>0&&Math.abs(Fe)<Math.abs(At)){var Ut=Ds(Fe||At)*(Math.abs(At)-Math.abs(Fe));Ae-=Ut,Fe+=Ut}}else{var[Be,ct]=[g.scale(_e[0]),g.scale(_e[1])];if(ve=Be,Ae=Kw({axis:c,ticks:M,bandSize:y,offset:p.offset,entry:ee,index:ae}),Ee=ct-Be,Fe=p.size,ht={x:z.left,y:Ae,width:z.width,height:Fe},Math.abs(At)>0&&Math.abs(Ee)<Math.abs(At)){var nt=Ds(Ee||At)*(Math.abs(At)-Math.abs(Ee));Ee+=nt}}if(ve==null||Ae==null||Ee==null||Fe==null)return null;var Ct=Po(Po({},ee),{},{x:ve,y:Ae,width:Ee,height:Fe,value:T?_e:_e[1],payload:ee,background:ht,tooltipPosition:{x:ve+Ee/2,y:Ae+Fe/2},parentViewBox:V},F&&F[ae]&&F[ae].props);return Ct}).filter(Boolean)}function NB(e){var r=uu(e,LB),a=lu();return Y.createElement(kj,{id:r.id,type:"bar"},i=>Y.createElement(Y.Fragment,null,Y.createElement(Mj,{legendPayload:AB(r)}),Y.createElement(Cj,{fn:CB,args:r}),Y.createElement(Nj,{type:"bar",id:i,data:void 0,xAxisId:r.xAxisId,yAxisId:r.yAxisId,zAxisId:0,dataKey:r.dataKey,stackId:U7(r.stackId),hide:r.hide,barSize:r.barSize,minPointSize:r.minPointSize,maxBarSize:r.maxBarSize,isPanorama:a}),Y.createElement(zB,df({},r,{id:i}))))}var y5=Y.memo(NB);y5.displayName="Bar";function iC(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function R0(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?iC(Object(a),!0).forEach(function(i){jB(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):iC(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function jB(e,r,a){return(r=BB(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function BB(e){var r=qB(e,"string");return typeof r=="symbol"?r:r+""}function qB(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var HB=(e,r)=>r,$B=(e,r,a)=>a,VB=(e,r,a,i)=>i,GB=(e,r,a,i,p)=>p,pg=at([E2,GB],(e,r)=>e.filter(a=>a.type==="bar").find(a=>a.id===r)),WB=at([pg],e=>e?.maxBarSize),ZB=(e,r,a,i,p,y)=>y,oC=(e,r,a)=>{var i=a??e;if(!wi(i))return au(i,r,0)},YB=at([bn,E2,HB,$B,VB],(e,r,a,i,p)=>r.filter(y=>e==="horizontal"?y.xAxisId===a:y.yAxisId===i).filter(y=>y.isPanorama===p).filter(y=>y.hide===!1).filter(y=>y.type==="bar")),QB=(e,r,a,i)=>{var p=bn(e);return p==="horizontal"?Jb(e,"yAxis",a,i):Jb(e,"xAxis",r,i)},XB=(e,r,a)=>{var i=bn(e);return i==="horizontal"?dA(e,"xAxis",r):dA(e,"yAxis",a)},KB=(e,r,a)=>{var i={},p=e.filter(i1),y=e.filter(M=>M.stackId==null),g=p.reduce((M,T)=>(M[T.stackId]||(M[T.stackId]=[]),M[T.stackId].push(T),M),i),c=Object.entries(g).map(M=>{var[T,U]=M,z=U.map(V=>V.dataKey),F=oC(r,a,U[0].barSize);return{stackId:T,dataKeys:z,barSize:F}}),C=y.map(M=>{var T=[M.dataKey].filter(z=>z!=null),U=oC(r,a,M.barSize);return{stackId:void 0,dataKeys:T,barSize:U}});return[...c,...C]},JB=at([YB,hL,XB],KB),eq=(e,r,a,i,p)=>{var y,g,c=pg(e,r,a,i,p);if(c!=null){var C=bn(e),M=EM(e),{maxBarSize:T}=c,U=wi(T)?M:T,z,F;return C==="horizontal"?(z=Yp(e,"xAxis",r,i),F=Zp(e,"xAxis",r,i)):(z=Yp(e,"yAxis",a,i),F=Zp(e,"yAxis",a,i)),(y=(g=$x(z,F,!0))!==null&&g!==void 0?g:U)!==null&&y!==void 0?y:0}},g5=(e,r,a,i)=>{var p=bn(e),y,g;return p==="horizontal"?(y=Yp(e,"xAxis",r,i),g=Zp(e,"xAxis",r,i)):(y=Yp(e,"yAxis",a,i),g=Zp(e,"yAxis",a,i)),$x(y,g)};function tq(e,r,a,i,p){var y=i.length;if(!(y<1)){var g=au(e,a,0,!0),c,C=[];if(Es(i[0].barSize)){var M=!1,T=a/y,U=i.reduce((Q,ee)=>Q+(ee.barSize||0),0);U+=(y-1)*g,U>=a&&(U-=(y-1)*g,g=0),U>=a&&T>0&&(M=!0,T*=.9,U=y*T);var z=(a-U)/2>>0,F={offset:z-g,size:0};c=i.reduce((Q,ee)=>{var ae,_e={stackId:ee.stackId,dataKeys:ee.dataKeys,position:{offset:F.offset+F.size+g,size:M?T:(ae=ee.barSize)!==null&&ae!==void 0?ae:0}},ve=[...Q,_e];return F=ve[ve.length-1].position,ve},C)}else{var V=au(r,a,0,!0);a-2*V-(y-1)*g<=0&&(g=0);var $=(a-2*V-(y-1)*g)/y;$>1&&($>>=0);var G=Es(p)?Math.min($,p):$;c=i.reduce((Q,ee,ae)=>[...Q,{stackId:ee.stackId,dataKeys:ee.dataKeys,position:{offset:V+($+g)*ae+($-G)/2,size:G}}],C)}return c}}var rq=(e,r,a,i,p,y,g)=>{var c=wi(g)?r:g,C=tq(a,i,p!==y?p:y,e,c);return p!==y&&C!=null&&(C=C.map(M=>R0(R0({},M),{},{position:R0(R0({},M.position),{},{offset:M.position.offset-p/2})}))),C},nq=at([JB,EM,cL,RM,eq,g5,WB],rq),aq=(e,r,a,i)=>Yp(e,"xAxis",r,i),iq=(e,r,a,i)=>Yp(e,"yAxis",a,i),oq=(e,r,a,i)=>Zp(e,"xAxis",r,i),sq=(e,r,a,i)=>Zp(e,"yAxis",a,i),lq=at([nq,pg],(e,r)=>{if(!(e==null||r==null)){var a=e.find(i=>i.stackId===r.stackId&&r.dataKey!=null&&i.dataKeys.includes(r.dataKey));if(a!=null)return a.position}}),uq=(e,r)=>{var a=M2(r);if(!(!e||a==null||r==null)){var{stackId:i}=r;if(i!=null){var p=e[i];if(p){var{stackedData:y}=p;if(y)return y.find(g=>g.key===a)}}}},cq=at([QB,pg],uq),hq=at([Ai,Vx,aq,iq,oq,sq,lq,bn,_2,g5,cq,pg,ZB],(e,r,a,i,p,y,g,c,C,M,T,U,z)=>{var{chartData:F,dataStartIndex:V,dataEndIndex:$}=C;if(!(U==null||g==null||r==null||c!=="horizontal"&&c!=="vertical"||a==null||i==null||p==null||y==null||M==null)){var{data:G}=U,Q;if(G!=null&&G.length>0?Q=G:Q=F?.slice(V,$+1),Q!=null)return FB({layout:c,barSettings:U,pos:g,parentViewBox:r,bandSize:M,xAxis:a,yAxis:i,xAxisTicks:p,yAxisTicks:y,stackedData:T,displayedData:Q,offset:e,cells:z})}}),fq=e=>{var{chartData:r}=e,a=Pi(),i=lu();return Y.useEffect(()=>i?()=>{}:(a(SA(r)),()=>{a(SA(void 0))}),[r,a,i]),null},sC={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},v5=Rs({name:"brush",initialState:sC,reducers:{setBrushSettings(e,r){return r.payload==null?sC:r.payload}}}),{setBrushSettings:mG}=v5.actions,dq=v5.reducer;function pq(e,r,a){return(r=mq(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function mq(e){var r=yq(e,"string");return typeof r=="symbol"?r:r+""}function yq(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}class X2{static create(r){return new X2(r)}constructor(r){this.scale=r}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(r){var{bandAware:a,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var p=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+p}case"end":{var y=this.bandwidth?this.bandwidth():0;return this.scale(r)+y}default:return this.scale(r)}if(a){var g=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+g}return this.scale(r)}}isInRange(r){var a=this.range(),i=a[0],p=a[a.length-1];return i<=p?r>=i&&r<=p:r>=p&&r<=i}}pq(X2,"EPS",1e-4);function gq(e){return(e%180+180)%180}var vq=function(r){var{width:a,height:i}=r,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=gq(p),g=y*Math.PI/180,c=Math.atan(i/a),C=g>c&&g<Math.PI-c?i/Math.sin(g):a/Math.cos(g);return Math.abs(C)},_q={dots:[],areas:[],lines:[]},_5=Rs({name:"referenceElements",initialState:_q,reducers:{addDot:(e,r)=>{e.dots.push(r.payload)},removeDot:(e,r)=>{var a=rh(e).dots.findIndex(i=>i===r.payload);a!==-1&&e.dots.splice(a,1)},addArea:(e,r)=>{e.areas.push(r.payload)},removeArea:(e,r)=>{var a=rh(e).areas.findIndex(i=>i===r.payload);a!==-1&&e.areas.splice(a,1)},addLine:(e,r)=>{e.lines.push(r.payload)},removeLine:(e,r)=>{var a=rh(e).lines.findIndex(i=>i===r.payload);a!==-1&&e.lines.splice(a,1)}}}),{addDot:yG,removeDot:gG,addArea:vG,removeArea:_G,addLine:bG,removeLine:xG}=_5.actions,bq=_5.reducer,xq=Y.createContext(void 0),Sq=e=>{var{children:r}=e,[a]=Y.useState("".concat(Ny("recharts"),"-clip")),i=f5();if(i==null)return null;var{x:p,y,width:g,height:c}=i;return Y.createElement(xq.Provider,{value:a},Y.createElement("defs",null,Y.createElement("clipPath",{id:a},Y.createElement("rect",{x:p,y,height:c,width:g}))),r)};function Xp(e,r){for(var a in e)if({}.hasOwnProperty.call(e,a)&&(!{}.hasOwnProperty.call(r,a)||e[a]!==r[a]))return!1;for(var i in r)if({}.hasOwnProperty.call(r,i)&&!{}.hasOwnProperty.call(e,i))return!1;return!0}function b5(e,r,a){if(r<1)return[];if(r===1&&a===void 0)return e;for(var i=[],p=0;p<e.length;p+=r)i.push(e[p]);return i}function wq(e,r,a){var i={width:e.width+r.width,height:e.height+r.height};return vq(i,a)}function Pq(e,r,a){var i=a==="width",{x:p,y,width:g,height:c}=e;return r===1?{start:i?p:y,end:i?p+g:y+c}:{start:i?p+g:y+c,end:i?p:y}}function Av(e,r,a,i,p){if(e*r<e*i||e*r>e*p)return!1;var y=a();return e*(r-e*y/2-i)>=0&&e*(r+e*y/2-p)<=0}function Aq(e,r){return b5(e,r+1)}function Cq(e,r,a,i,p){for(var y=(i||[]).slice(),{start:g,end:c}=r,C=0,M=1,T=g,U=function(){var V=i?.[C];if(V===void 0)return{v:b5(i,M)};var $=C,G,Q=()=>(G===void 0&&(G=a(V,$)),G),ee=V.coordinate,ae=C===0||Av(e,ee,Q,T,c);ae||(C=0,T=g,M+=1),ae&&(T=ee+e*(Q()/2+p),C+=M)},z;M<=y.length;)if(z=U(),z)return z.v;return[]}function lC(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function to(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?lC(Object(a),!0).forEach(function(i){Dq(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lC(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function Dq(e,r,a){return(r=Mq(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function Mq(e){var r=Tq(e,"string");return typeof r=="symbol"?r:r+""}function Tq(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Eq(e,r,a,i,p){for(var y=(i||[]).slice(),g=y.length,{start:c}=r,{end:C}=r,M=function(z){var F=y[z],V,$=()=>(V===void 0&&(V=a(F,z)),V);if(z===g-1){var G=e*(F.coordinate+e*$()/2-C);y[z]=F=to(to({},F),{},{tickCoord:G>0?F.coordinate-G*e:F.coordinate})}else y[z]=F=to(to({},F),{},{tickCoord:F.coordinate});var Q=Av(e,F.tickCoord,$,c,C);Q&&(C=F.tickCoord-e*($()/2+p),y[z]=to(to({},F),{},{isShow:!0}))},T=g-1;T>=0;T--)M(T);return y}function Rq(e,r,a,i,p,y){var g=(i||[]).slice(),c=g.length,{start:C,end:M}=r;if(y){var T=i[c-1],U=a(T,c-1),z=e*(T.coordinate+e*U/2-M);g[c-1]=T=to(to({},T),{},{tickCoord:z>0?T.coordinate-z*e:T.coordinate});var F=Av(e,T.tickCoord,()=>U,C,M);F&&(M=T.tickCoord-e*(U/2+p),g[c-1]=to(to({},T),{},{isShow:!0}))}for(var V=y?c-1:c,$=function(ee){var ae=g[ee],_e,ve=()=>(_e===void 0&&(_e=a(ae,ee)),_e);if(ee===0){var Ae=e*(ae.coordinate-e*ve()/2-C);g[ee]=ae=to(to({},ae),{},{tickCoord:Ae<0?ae.coordinate-Ae*e:ae.coordinate})}else g[ee]=ae=to(to({},ae),{},{tickCoord:ae.coordinate});var Ee=Av(e,ae.tickCoord,ve,C,M);Ee&&(C=ae.tickCoord+e*(ve()/2+p),g[ee]=to(to({},ae),{},{isShow:!0}))},G=0;G<V;G++)$(G);return g}function Iq(e,r,a){var{tick:i,ticks:p,viewBox:y,minTickGap:g,orientation:c,interval:C,tickFormatter:M,unit:T,angle:U}=e;if(!p||!p.length||!i)return[];if(Pr(C)||tm.isSsr){var z;return(z=Aq(p,Pr(C)?C:0))!==null&&z!==void 0?z:[]}var F=[],V=c==="top"||c==="bottom"?"width":"height",$=T&&V==="width"?Uy(T,{fontSize:r,letterSpacing:a}):{width:0,height:0},G=(ae,_e)=>{var ve=typeof M=="function"?M(ae.value,_e):ae.value;return V==="width"?wq(Uy(ve,{fontSize:r,letterSpacing:a}),$,U):Uy(ve,{fontSize:r,letterSpacing:a})[V]},Q=p.length>=2?Ds(p[1].coordinate-p[0].coordinate):1,ee=Pq(y,Q,V);return C==="equidistantPreserveStart"?Cq(Q,ee,G,p,g):(C==="preserveStart"||C==="preserveStartEnd"?F=Rq(Q,ee,G,p,g,C==="preserveStartEnd"):F=Eq(Q,ee,G,p,g),F.filter(ae=>ae.isShow))}var kq=e=>{var{ticks:r,label:a,labelGapWithTick:i=5,tickSize:p=0,tickMargin:y=0}=e,g=0;if(r){r.forEach(T=>{if(T){var U=T.getBoundingClientRect();U.width>g&&(g=U.width)}});var c=a?a.getBoundingClientRect().width:0,C=p+y,M=g+C+c+(a?i:0);return Math.round(M)}return 0},Uq=["axisLine","width","height","className","hide","ticks"],Oq=["viewBox"],Lq=["viewBox"];function ox(e,r){if(e==null)return{};var a,i,p=zq(e,r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(i=0;i<y.length;i++)a=y[i],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(p[a]=e[a])}return p}function zq(e,r){if(e==null)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(r.indexOf(i)!==-1)continue;a[i]=e[i]}return a}function zd(){return zd=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},zd.apply(null,arguments)}function uC(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function ui(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?uC(Object(a),!0).forEach(function(i){Fq(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):uC(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function Fq(e,r,a){return(r=Nq(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function Nq(e){var r=jq(e,"string");return typeof r=="symbol"?r:r+""}function jq(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Bq={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function qq(e){var{x:r,y:a,width:i,height:p,orientation:y,mirror:g,axisLine:c,otherSvgProps:C}=e;if(!c)return null;var M=ui(ui(ui({},C),Vi(c,!1)),{},{fill:"none"});if(y==="top"||y==="bottom"){var T=+(y==="top"&&!g||y==="bottom"&&g);M=ui(ui({},M),{},{x1:r,y1:a+T*p,x2:r+i,y2:a+T*p})}else{var U=+(y==="left"&&!g||y==="right"&&g);M=ui(ui({},M),{},{x1:r+U*i,y1:a,x2:r+U*i,y2:a+p})}return Y.createElement("line",zd({},M,{className:In("recharts-cartesian-axis-line",Bp(c,"className"))}))}function Hq(e,r,a,i,p,y,g,c,C){var M,T,U,z,F,V,$=c?-1:1,G=e.tickSize||g,Q=Pr(e.tickCoord)?e.tickCoord:e.coordinate;switch(y){case"top":M=T=e.coordinate,z=a+ +!c*p,U=z-$*G,V=U-$*C,F=Q;break;case"left":U=z=e.coordinate,T=r+ +!c*i,M=T-$*G,F=M-$*C,V=Q;break;case"right":U=z=e.coordinate,T=r+ +c*i,M=T+$*G,F=M+$*C,V=Q;break;default:M=T=e.coordinate,z=a+ +c*p,U=z+$*G,V=U+$*C,F=Q;break}return{line:{x1:M,y1:U,x2:T,y2:z},tick:{x:F,y:V}}}function $q(e,r){switch(e){case"left":return r?"start":"end";case"right":return r?"end":"start";default:return"middle"}}function Vq(e,r){switch(e){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}function Gq(e){var{option:r,tickProps:a,value:i}=e,p,y=In(a.className,"recharts-cartesian-axis-tick-value");if(Y.isValidElement(r))p=Y.cloneElement(r,ui(ui({},a),{},{className:y}));else if(typeof r=="function")p=r(ui(ui({},a),{},{className:y}));else{var g="recharts-cartesian-axis-tick-value";typeof r!="boolean"&&(g=In(g,r?.className)),p=Y.createElement(Z2,zd({},a,{className:g}),i)}return p}function Wq(e){var{ticks:r=[],tick:a,tickLine:i,stroke:p,tickFormatter:y,unit:g,padding:c,tickTextProps:C,orientation:M,mirror:T,x:U,y:z,width:F,height:V,tickSize:$,tickMargin:G,fontSize:Q,letterSpacing:ee,getTicksConfig:ae,events:_e}=e,ve=Iq(ui(ui({},ae),{},{ticks:r}),Q,ee),Ae=$q(M,T),Ee=Vq(M,T),Fe=eg(ae),ht=Vi(a,!1),At=ui(ui({},Fe),{},{fill:"none"},Vi(i,!1)),ot=ve.map((ft,rt)=>{var{line:It,tick:Ut}=Hq(ft,U,z,F,V,M,$,T,G),Be=ui(ui(ui(ui({textAnchor:Ae,verticalAnchor:Ee},Fe),{},{stroke:"none",fill:p},ht),Ut),{},{index:rt,payload:ft,visibleTicksCount:ve.length,tickFormatter:y,padding:c},C);return Y.createElement(ff,zd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(ft.value,"-").concat(ft.coordinate,"-").concat(ft.tickCoord)},Ix(_e,ft,rt)),i&&Y.createElement("line",zd({},At,It,{className:In("recharts-cartesian-axis-tick-line",Bp(i,"className"))})),a&&Y.createElement(Gq,{option:a,tickProps:Be,value:"".concat(typeof y=="function"?y(ft.value,rt):ft.value).concat(g||"")}))});return ot.length>0?Y.createElement("g",{className:"recharts-cartesian-axis-ticks"},ot):null}var Zq=Y.forwardRef((e,r)=>{var{axisLine:a,width:i,height:p,className:y,hide:g,ticks:c}=e,C=ox(e,Uq),[M,T]=Y.useState(""),[U,z]=Y.useState(""),F=Y.useRef([]);Y.useImperativeHandle(r,()=>({getCalculatedWidth:()=>{var $;return kq({ticks:F.current,label:($=e.labelRef)===null||$===void 0?void 0:$.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var V=Y.useCallback($=>{if($){var G=$.getElementsByClassName("recharts-cartesian-axis-tick-value");F.current=Array.from(G);var Q=G[0];if(Q){var ee=window.getComputedStyle(Q),ae=ee.fontSize,_e=ee.letterSpacing;(ae!==M||_e!==U)&&(T(ae),z(_e))}}},[M,U]);return g||i!=null&&i<=0||p!=null&&p<=0?null:Y.createElement(ff,{className:In("recharts-cartesian-axis",y),ref:V},Y.createElement(qq,{x:e.x,y:e.y,width:i,height:p,orientation:e.orientation,mirror:e.mirror,axisLine:a,otherSvgProps:eg(e)}),Y.createElement(Wq,{ticks:c,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:M,letterSpacing:U,getTicksConfig:e,events:C}),Y.createElement(UN,{x:e.x,y:e.y,width:e.width,height:e.height},Y.createElement($N,{label:e.label}),e.children))}),Yq=Y.memo(Zq,(e,r)=>{var{viewBox:a}=e,i=ox(e,Oq),{viewBox:p}=r,y=ox(r,Lq);return Xp(a,p)&&Xp(i,y)}),K2=Y.forwardRef((e,r)=>{var a=uu(e,Bq);return Y.createElement(Yq,zd({},a,{ref:r}))});K2.displayName="CartesianAxis";var Qq=["dangerouslySetInnerHTML","ticks"],Xq=["id"],Kq=["domain"],Jq=["domain"];function sx(){return sx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},sx.apply(null,arguments)}function Cv(e,r){if(e==null)return{};var a,i,p=eH(e,r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(i=0;i<y.length;i++)a=y[i],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(p[a]=e[a])}return p}function eH(e,r){if(e==null)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(r.indexOf(i)!==-1)continue;a[i]=e[i]}return a}function tH(e){var r=Pi();return Y.useEffect(()=>(r($j(e)),()=>{r(Vj(e))}),[e,r]),null}var rH=e=>{var{xAxisId:r,className:a}=e,i=pr(Vx),p=lu(),y="xAxis",g=pr(G=>sm(G,y,r,p)),c=pr(G=>xT(G,y,r,p)),C=pr(G=>gT(G,r)),M=pr(G=>nz(G,r)),T=pr(G=>jM(G,r));if(C==null||M==null||T==null)return null;var{dangerouslySetInnerHTML:U,ticks:z}=e,F=Cv(e,Qq),{id:V}=T,$=Cv(T,Xq);return Y.createElement(K2,sx({},F,$,{scale:g,x:M.x,y:M.y,width:C.width,height:C.height,className:In("recharts-".concat(y," ").concat(y),a),viewBox:i,ticks:c}))},nH={allowDataOverflow:ws.allowDataOverflow,allowDecimals:ws.allowDecimals,allowDuplicatedCategory:ws.allowDuplicatedCategory,height:ws.height,hide:!1,mirror:ws.mirror,orientation:ws.orientation,padding:ws.padding,reversed:ws.reversed,scale:ws.scale,tickCount:ws.tickCount,type:ws.type,xAxisId:0},aH=e=>{var r,a,i,p,y,g=uu(e,nH);return Y.createElement(Y.Fragment,null,Y.createElement(tH,{interval:(r=g.interval)!==null&&r!==void 0?r:"preserveEnd",id:g.xAxisId,scale:g.scale,type:g.type,padding:g.padding,allowDataOverflow:g.allowDataOverflow,domain:g.domain,dataKey:g.dataKey,allowDuplicatedCategory:g.allowDuplicatedCategory,allowDecimals:g.allowDecimals,tickCount:g.tickCount,includeHidden:(a=g.includeHidden)!==null&&a!==void 0?a:!1,reversed:g.reversed,ticks:g.ticks,height:g.height,orientation:g.orientation,mirror:g.mirror,hide:g.hide,unit:g.unit,name:g.name,angle:(i=g.angle)!==null&&i!==void 0?i:0,minTickGap:(p=g.minTickGap)!==null&&p!==void 0?p:5,tick:(y=g.tick)!==null&&y!==void 0?y:!0,tickFormatter:g.tickFormatter}),Y.createElement(rH,g))},iH=(e,r)=>{var{domain:a}=e,i=Cv(e,Kq),{domain:p}=r,y=Cv(r,Jq);return Xp(i,y)?Array.isArray(a)&&a.length===2&&Array.isArray(p)&&p.length===2?a[0]===p[0]&&a[1]===p[1]:Xp({domain:a},{domain:p}):!1},x5=Y.memo(aH,iH);x5.displayName="XAxis";var oH=["dangerouslySetInnerHTML","ticks"],sH=["id"],lH=["domain"],uH=["domain"];function lx(){return lx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},lx.apply(null,arguments)}function Dv(e,r){if(e==null)return{};var a,i,p=cH(e,r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(i=0;i<y.length;i++)a=y[i],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(p[a]=e[a])}return p}function cH(e,r){if(e==null)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(r.indexOf(i)!==-1)continue;a[i]=e[i]}return a}function hH(e){var r=Pi();return Y.useEffect(()=>(r(Gj(e)),()=>{r(Wj(e))}),[e,r]),null}var fH=e=>{var{yAxisId:r,className:a,width:i,label:p}=e,y=Y.useRef(null),g=Y.useRef(null),c=pr(Vx),C=lu(),M=Pi(),T="yAxis",U=pr(ve=>sm(ve,T,r,C)),z=pr(ve=>vT(ve,r)),F=pr(ve=>iz(ve,r)),V=pr(ve=>xT(ve,T,r,C)),$=pr(ve=>BM(ve,r));if(Y.useLayoutEffect(()=>{if(!(i!=="auto"||!z||Y2(p)||Y.isValidElement(p)||$==null)){var ve=y.current;if(ve){var Ae=ve.getCalculatedWidth();Math.round(z.width)!==Math.round(Ae)&&M(Zj({id:r,width:Ae}))}}},[V,z,M,p,r,i,$]),z==null||F==null||$==null)return null;var{dangerouslySetInnerHTML:G,ticks:Q}=e,ee=Dv(e,oH),{id:ae}=$,_e=Dv($,sH);return Y.createElement(K2,lx({},ee,_e,{ref:y,labelRef:g,scale:U,x:F.x,y:F.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:z.width,height:z.height,className:In("recharts-".concat(T," ").concat(T),a),viewBox:c,ticks:V}))},dH={allowDataOverflow:Ps.allowDataOverflow,allowDecimals:Ps.allowDecimals,allowDuplicatedCategory:Ps.allowDuplicatedCategory,hide:!1,mirror:Ps.mirror,orientation:Ps.orientation,padding:Ps.padding,reversed:Ps.reversed,scale:Ps.scale,tickCount:Ps.tickCount,type:Ps.type,width:Ps.width,yAxisId:0},pH=e=>{var r,a,i,p,y,g=uu(e,dH);return Y.createElement(Y.Fragment,null,Y.createElement(hH,{interval:(r=g.interval)!==null&&r!==void 0?r:"preserveEnd",id:g.yAxisId,scale:g.scale,type:g.type,domain:g.domain,allowDataOverflow:g.allowDataOverflow,dataKey:g.dataKey,allowDuplicatedCategory:g.allowDuplicatedCategory,allowDecimals:g.allowDecimals,tickCount:g.tickCount,padding:g.padding,includeHidden:(a=g.includeHidden)!==null&&a!==void 0?a:!1,reversed:g.reversed,ticks:g.ticks,width:g.width,orientation:g.orientation,mirror:g.mirror,hide:g.hide,unit:g.unit,name:g.name,angle:(i=g.angle)!==null&&i!==void 0?i:0,minTickGap:(p=g.minTickGap)!==null&&p!==void 0?p:5,tick:(y=g.tick)!==null&&y!==void 0?y:!0,tickFormatter:g.tickFormatter}),Y.createElement(fH,g))},mH=(e,r)=>{var{domain:a}=e,i=Dv(e,lH),{domain:p}=r,y=Dv(r,uH);return Xp(i,y)?Array.isArray(a)&&a.length===2&&Array.isArray(p)&&p.length===2?a[0]===p[0]&&a[1]===p[1]:Xp({domain:a},{domain:p}):!1},S5=Y.memo(pH,mH);S5.displayName="YAxis";var sb={exports:{}},lb={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cC;function yH(){if(cC)return lb;cC=1;var e=Kp();function r(C,M){return C===M&&(C!==0||1/C===1/M)||C!==C&&M!==M}var a=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,p=e.useRef,y=e.useEffect,g=e.useMemo,c=e.useDebugValue;return lb.useSyncExternalStoreWithSelector=function(C,M,T,U,z){var F=p(null);if(F.current===null){var V={hasValue:!1,value:null};F.current=V}else V=F.current;F=g(function(){function G(ve){if(!Q){if(Q=!0,ee=ve,ve=U(ve),z!==void 0&&V.hasValue){var Ae=V.value;if(z(Ae,ve))return ae=Ae}return ae=ve}if(Ae=ae,a(ee,ve))return Ae;var Ee=U(ve);return z!==void 0&&z(Ae,Ee)?(ee=ve,Ae):(ee=ve,ae=Ee)}var Q=!1,ee,ae,_e=T===void 0?null:T;return[function(){return G(M())},_e===null?void 0:function(){return G(_e())}]},[M,T,U,z]);var $=i(C,F[0],F[1]);return y(function(){V.hasValue=!0,V.value=$},[$]),c($),$},lb}var hC;function gH(){return hC||(hC=1,sb.exports=yH()),sb.exports}gH();function vH(e){e()}function _H(){let e=null,r=null;return{clear(){e=null,r=null},notify(){vH(()=>{let a=e;for(;a;)a.callback(),a=a.next})},get(){const a=[];let i=e;for(;i;)a.push(i),i=i.next;return a},subscribe(a){let i=!0;const p=r={callback:a,next:null,prev:r};return p.prev?p.prev.next=p:e=p,function(){!i||e===null||(i=!1,p.next?p.next.prev=p.prev:r=p.prev,p.prev?p.prev.next=p.next:e=p.next)}}}}var fC={notify(){},get:()=>[]};function bH(e,r){let a,i=fC,p=0,y=!1;function g($){T();const G=i.subscribe($);let Q=!1;return()=>{Q||(Q=!0,G(),U())}}function c(){i.notify()}function C(){V.onStateChange&&V.onStateChange()}function M(){return y}function T(){p++,a||(a=e.subscribe(C),i=_H())}function U(){p--,a&&p===0&&(a(),a=void 0,i.clear(),i=fC)}function z(){y||(y=!0,T())}function F(){y&&(y=!1,U())}const V={addNestedSub:g,notifyNestedSubs:c,handleChangeWrapper:C,isSubscribed:M,trySubscribe:z,tryUnsubscribe:F,getListeners:()=>i};return V}var xH=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SH=xH(),wH=()=>typeof navigator<"u"&&navigator.product==="ReactNative",PH=wH(),AH=()=>SH||PH?Y.useLayoutEffect:Y.useEffect,CH=AH(),DH=Symbol.for("react-redux-context"),MH=typeof globalThis<"u"?globalThis:{};function TH(){if(!Y.createContext)return{};const e=MH[DH]??=new Map;let r=e.get(Y.createContext);return r||(r=Y.createContext(null),e.set(Y.createContext,r)),r}var EH=TH();function RH(e){const{children:r,context:a,serverState:i,store:p}=e,y=Y.useMemo(()=>{const C=bH(p);return{store:p,subscription:C,getServerState:i?()=>i:void 0}},[p,i]),g=Y.useMemo(()=>p.getState(),[p]);CH(()=>{const{subscription:C}=y;return C.onStateChange=C.notifyNestedSubs,C.trySubscribe(),g!==p.getState()&&C.notifyNestedSubs(),()=>{C.tryUnsubscribe(),C.onStateChange=void 0}},[y,g]);const c=a||EH;return Y.createElement(c.Provider,{value:y},r)}var IH=RH,kH=(e,r)=>r,J2=at([kH,bn,zM,hi,LT,dh,uF,Ai],pF),eS=e=>{var r=e.currentTarget.getBoundingClientRect(),a=r.width/e.currentTarget.offsetWidth,i=r.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-r.left)/a),chartY:Math.round((e.clientY-r.top)/i)}},w5=sl("mouseClick"),P5=rg();P5.startListening({actionCreator:w5,effect:(e,r)=>{var a=e.payload,i=J2(r.getState(),eS(a));i?.activeIndex!=null&&r.dispatch(vz({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}});var ux=sl("mouseMove"),A5=rg();A5.startListening({actionCreator:ux,effect:(e,r)=>{var a=e.payload,i=r.getState(),p=F2(i,i.tooltip.settings.shared),y=J2(i,eS(a));p==="axis"&&(y?.activeIndex!=null?r.dispatch(TT({activeIndex:y.activeIndex,activeDataKey:void 0,activeCoordinate:y.activeCoordinate})):r.dispatch(MT()))}});var dC={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},C5=Rs({name:"rootProps",initialState:dC,reducers:{updateOptions:(e,r)=>{var a;e.accessibilityLayer=r.payload.accessibilityLayer,e.barCategoryGap=r.payload.barCategoryGap,e.barGap=(a=r.payload.barGap)!==null&&a!==void 0?a:dC.barGap,e.barSize=r.payload.barSize,e.maxBarSize=r.payload.maxBarSize,e.stackOffset=r.payload.stackOffset,e.syncId=r.payload.syncId,e.syncMethod=r.payload.syncMethod,e.className=r.payload.className}}}),UH=C5.reducer,{updateOptions:OH}=C5.actions,D5=Rs({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,r)=>r.payload}}),{updatePolarOptions:SG}=D5.actions,LH=D5.reducer,M5=sl("keyDown"),T5=sl("focus"),tS=rg();tS.startListening({actionCreator:M5,effect:(e,r)=>{var a=r.getState(),i=a.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:p}=a.tooltip,y=e.payload;if(!(y!=="ArrowRight"&&y!=="ArrowLeft"&&y!=="Enter")){var g=Number(N2(p,um(a))),c=dh(a);if(y==="Enter"){var C=bv(a,"axis","hover",String(p.index));r.dispatch(tx({active:!p.active,activeIndex:p.index,activeDataKey:p.dataKey,activeCoordinate:C}));return}var M=uz(a),T=M==="left-to-right"?1:-1,U=y==="ArrowRight"?1:-1,z=g+U*T;if(!(c==null||z>=c.length||z<0)){var F=bv(a,"axis","hover",String(z));r.dispatch(tx({active:!0,activeIndex:z.toString(),activeDataKey:void 0,activeCoordinate:F}))}}}}});tS.startListening({actionCreator:T5,effect:(e,r)=>{var a=r.getState(),i=a.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:p}=a.tooltip;if(!p.active&&p.index==null){var y="0",g=bv(a,"axis","hover",String(y));r.dispatch(tx({activeDataKey:void 0,active:!0,activeIndex:y,activeCoordinate:g}))}}}});var nl=sl("externalEvent"),E5=rg();E5.startListening({actionCreator:nl,effect:(e,r)=>{if(e.payload.handler!=null){var a=r.getState(),i={activeCoordinate:eF(a),activeDataKey:jT(a),activeIndex:Qp(a),activeLabel:NT(a),activeTooltipIndex:Qp(a),isTooltipActive:tF(a)};e.payload.handler(i,e.payload.reactEvent)}}});var zH=at([lm],e=>e.tooltipItemPayloads),FH=at([zH,fg,(e,r,a)=>r,(e,r,a)=>a],(e,r,a,i)=>{var p=e.find(c=>c.settings.dataKey===i);if(p!=null){var{positions:y}=p;if(y!=null){var g=r(y,a);return g}}}),R5=sl("touchMove"),I5=rg();I5.startListening({actionCreator:R5,effect:(e,r)=>{var a=e.payload,i=r.getState(),p=F2(i,i.tooltip.settings.shared);if(p==="axis"){var y=J2(i,eS({clientX:a.touches[0].clientX,clientY:a.touches[0].clientY,currentTarget:a.currentTarget}));y?.activeIndex!=null&&r.dispatch(TT({activeIndex:y.activeIndex,activeDataKey:void 0,activeCoordinate:y.activeCoordinate}))}else if(p==="item"){var g,c=a.touches[0],C=document.elementFromPoint(c.clientX,c.clientY);if(!C||!C.getAttribute)return;var M=C.getAttribute(H7),T=(g=C.getAttribute($7))!==null&&g!==void 0?g:void 0,U=FH(r.getState(),M,T);r.dispatch(DT({activeDataKey:T,activeIndex:M,activeCoordinate:U}))}}});var NH=J3({brush:dq,cartesianAxis:Yj,chartData:RF,errorBars:uB,graphicalItems:Fj,layout:f7,legend:l9,options:CF,polarAxis:oj,polarOptions:LH,referenceElements:bq,rootProps:UH,tooltip:_z}),jH=function(r){return z8({reducer:NH,preloadedState:r,middleware:a=>a({serializableCheck:!1}).concat([P5.middleware,A5.middleware,tS.middleware,E5.middleware,I5.middleware]),devTools:tm.devToolsEnabled})};function BH(e){var{preloadedState:r,children:a,reduxStoreName:i}=e,p=lu(),y=Y.useRef(null);if(p)return a;y.current==null&&(y.current=jH(r));var g=Fx;return Y.createElement(IH,{context:g,store:y.current},a)}function qH(e){var{layout:r,width:a,height:i,margin:p}=e,y=Pi(),g=lu();return Y.useEffect(()=>{g||(y(u7(r)),y(c7({width:a,height:i})),y(l7(p)))},[y,g,r,a,i,p]),null}function HH(e){var r=Pi();return Y.useEffect(()=>{r(OH(e))},[r,e]),null}var $H=["children"];function VH(e,r){if(e==null)return{};var a,i,p=GH(e,r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(i=0;i<y.length;i++)a=y[i],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(p[a]=e[a])}return p}function GH(e,r){if(e==null)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(r.indexOf(i)!==-1)continue;a[i]=e[i]}return a}function Mv(){return Mv=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Mv.apply(null,arguments)}var WH={width:"100%",height:"100%"},ZH=Y.forwardRef((e,r)=>{var a=n9(),i=a9(),p=CD();if(!av(a)||!av(i))return null;var{children:y,otherAttributes:g,title:c,desc:C}=e,M,T;return typeof g.tabIndex=="number"?M=g.tabIndex:M=p?0:void 0,typeof g.role=="string"?T=g.role:T=p?"application":void 0,Y.createElement(x3,Mv({},g,{title:c,desc:C,role:T,tabIndex:M,width:a,height:i,style:WH,ref:r}),y)}),YH=e=>{var{children:r}=e,a=pr(Wv);if(!a)return null;var{width:i,height:p,y,x:g}=a;return Y.createElement(x3,{width:i,height:p,x:g,y},r)},pC=Y.forwardRef((e,r)=>{var{children:a}=e,i=VH(e,$H),p=lu();return p?Y.createElement(YH,null,a):Y.createElement(ZH,Mv({ref:r},i),a)});function QH(){var e=Pi(),[r,a]=Y.useState(null),i=pr(q7);return Y.useEffect(()=>{if(r!=null){var p=r.getBoundingClientRect(),y=p.width/r.offsetWidth;Es(y)&&y!==i&&e(h7(y))}},[r,e,i]),a}function mC(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),a.push.apply(a,i)}return a}function XH(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?mC(Object(a),!0).forEach(function(i){KH(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mC(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function KH(e,r,a){return(r=JH(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function JH(e){var r=e$(e,"string");return typeof r=="symbol"?r:r+""}function e$(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var t$=Y.forwardRef((e,r)=>{var{children:a,className:i,height:p,onClick:y,onContextMenu:g,onDoubleClick:c,onMouseDown:C,onMouseEnter:M,onMouseLeave:T,onMouseMove:U,onMouseUp:z,onTouchEnd:F,onTouchMove:V,onTouchStart:$,style:G,width:Q}=e,ee=Pi(),[ae,_e]=Y.useState(null),[ve,Ae]=Y.useState(null);jF();var Ee=QH(),Fe=Y.useCallback(st=>{Ee(st),typeof r=="function"&&r(st),_e(st),Ae(st)},[Ee,r,_e,Ae]),ht=Y.useCallback(st=>{ee(w5(st)),ee(nl({handler:y,reactEvent:st}))},[ee,y]),At=Y.useCallback(st=>{ee(ux(st)),ee(nl({handler:M,reactEvent:st}))},[ee,M]),ot=Y.useCallback(st=>{ee(MT()),ee(nl({handler:T,reactEvent:st}))},[ee,T]),ft=Y.useCallback(st=>{ee(ux(st)),ee(nl({handler:U,reactEvent:st}))},[ee,U]),rt=Y.useCallback(()=>{ee(T5())},[ee]),It=Y.useCallback(st=>{ee(M5(st.key))},[ee]),Ut=Y.useCallback(st=>{ee(nl({handler:g,reactEvent:st}))},[ee,g]),Be=Y.useCallback(st=>{ee(nl({handler:c,reactEvent:st}))},[ee,c]),ct=Y.useCallback(st=>{ee(nl({handler:C,reactEvent:st}))},[ee,C]),nt=Y.useCallback(st=>{ee(nl({handler:z,reactEvent:st}))},[ee,z]),Ct=Y.useCallback(st=>{ee(nl({handler:$,reactEvent:st}))},[ee,$]),Me=Y.useCallback(st=>{ee(R5(st)),ee(nl({handler:V,reactEvent:st}))},[ee,V]),et=Y.useCallback(st=>{ee(nl({handler:F,reactEvent:st}))},[ee,F]);return Y.createElement(GT.Provider,{value:ae},Y.createElement(IR.Provider,{value:ve},Y.createElement("div",{className:In("recharts-wrapper",i),style:XH({position:"relative",cursor:"default",width:Q,height:p},G),onClick:ht,onContextMenu:Ut,onDoubleClick:Be,onFocus:rt,onKeyDown:It,onMouseDown:ct,onMouseEnter:At,onMouseLeave:ot,onMouseMove:ft,onMouseUp:nt,onTouchEnd:et,onTouchMove:Me,onTouchStart:Ct,ref:Fe},a)))}),r$=["children","className","width","height","style","compact","title","desc"];function n$(e,r){if(e==null)return{};var a,i,p=a$(e,r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(i=0;i<y.length;i++)a=y[i],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(p[a]=e[a])}return p}function a$(e,r){if(e==null)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(r.indexOf(i)!==-1)continue;a[i]=e[i]}return a}var i$=Y.forwardRef((e,r)=>{var{children:a,className:i,width:p,height:y,style:g,compact:c,title:C,desc:M}=e,T=n$(e,r$),U=eg(T);return c?Y.createElement(pC,{otherAttributes:U,title:C,desc:M},a):Y.createElement(t$,{className:i,style:g,width:p,height:y,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},Y.createElement(pC,{otherAttributes:U,title:C,desc:M,ref:r},Y.createElement(Sq,null,a)))}),o$=["width","height"];function cx(){return cx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},cx.apply(null,arguments)}function s$(e,r){if(e==null)return{};var a,i,p=l$(e,r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(i=0;i<y.length;i++)a=y[i],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(p[a]=e[a])}return p}function l$(e,r){if(e==null)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(r.indexOf(i)!==-1)continue;a[i]=e[i]}return a}var u$={top:5,right:5,bottom:5,left:5},c$={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:u$,reverseStackOrder:!1,syncMethod:"index"},h$=Y.forwardRef(function(r,a){var i,p=uu(r.categoricalChartProps,c$),{width:y,height:g}=p,c=s$(p,o$);if(!av(y)||!av(g))return null;var{chartName:C,defaultTooltipEventType:M,validateTooltipEventTypes:T,tooltipPayloadSearcher:U,categoricalChartProps:z}=r,F={chartName:C,defaultTooltipEventType:M,validateTooltipEventTypes:T,tooltipPayloadSearcher:U,eventEmitter:void 0};return Y.createElement(BH,{preloadedState:{options:F},reduxStoreName:(i=z.id)!==null&&i!==void 0?i:C},Y.createElement(fq,{chartData:z.data}),Y.createElement(qH,{width:y,height:g,layout:p.layout,margin:p.margin}),Y.createElement(HH,{accessibilityLayer:p.accessibilityLayer,barCategoryGap:p.barCategoryGap,maxBarSize:p.maxBarSize,stackOffset:p.stackOffset,barGap:p.barGap,barSize:p.barSize,syncId:p.syncId,syncMethod:p.syncMethod,className:p.className}),Y.createElement(i$,cx({},c,{width:y,height:g,ref:a})))}),f$=["axis","item"],d$=Y.forwardRef((e,r)=>Y.createElement(h$,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:f$,tooltipPayloadSearcher:PF,categoricalChartProps:e,ref:r}));function I0(e){return typeof e=="string"?e.toLowerCase().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "):""}function p$({country:e,metric:r,expected:a,actual:i,average:p,top:y}){const g=[{name:I0(e),value:i},{name:"Expected",value:a},{name:"Average",value:p},{name:`Top: ${I0(y.country)}`,value:y.value}],c=["#8884d8","#006994","#ffc658","#ff7300"];return de.jsxs("div",{className:"w-full h-80",children:[de.jsx(aN,{children:de.jsxs(d$,{data:g,children:[de.jsx(x5,{dataKey:"name",tick:{fontSize:10}}),de.jsx(S5,{tick:{fontSize:10}}),de.jsx(ZF,{}),de.jsx(y5,{dataKey:"value",fill:"#8884d8",children:g.map((C,M)=>de.jsx(W2,{fill:c[M%c.length]},`cell-${M} ${C}`))})]})}),i&&a&&y.country&&de.jsxs("p",{className:"text-xs mt-2 text-center",children:[I0(e),"'s' ",r," is ",i,", which is"," ",((i-a)/a*100).toFixed(1),"% from expected. Highest is ",I0(y.country)," at ",y.value,"."]})]})}function m$(e){return e.toLowerCase().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}function y$({flash:e=!1,countryName:r,countryMetrics:a,absoluteStatistics:i}){const[p,y]=Y.useState(),[g,c]=Y.useState(1),[C,M]=Y.useState(""),[T,U]=Y.useState(0),z=Y.useMemo(()=>i.filter(Q=>String(Q.metricName).toLowerCase()!=="happiness (score 0-10)"&&Q.currentCountryMetric!==null&&Q.currentCountryMetric!==0&&Q.currentCountryMetric!==void 0),[i]),F=Y.useMemo(()=>{const Q=new Map;return cR.forEach(ee=>Q.set(ee.metric.toLowerCase(),ee.weight_signed)),Q},[]),V=Q=>{if(!z||z.length===0){y(void 0),M("");return}const ee=(Q%z.length+z.length)%z.length,ae=z[ee];y(ae);const _e=F.get(String(ae.metricName).toLowerCase())??0;M(`${ae.metricName} has the correlation to happiness of ${Math.round(_e*100)}%`)};Y.useEffect(()=>{if(!z||z.length===0){c(1),U(0),y(void 0),M("");return}c(z.length);const Q=Math.min(T,z.length-1);U(Q),V(Q)},[z]);const $=()=>{U(Q=>{if(!z||z.length===0)return 0;const ee=z.length,ae=(Q-1+ee)%ee;return V(ae),ae})},G=()=>{U(Q=>{if(!z||z.length===0)return 0;const ee=z.length,ae=(Q+1)%ee;return V(ae),ae})};return de.jsxs("div",{className:"w-full flex flex-col justify-center items-center",children:[de.jsx(nR,{opts:{loop:!0},children:de.jsx(aR,{children:de.jsx(iR,{children:de.jsx("div",{className:"p-1",children:de.jsxs(oR,{className:`lg:w-150 h-130 lg:h-120 bg-accent transition-transform-colors duration-300 ${e?"scale-90 bg-primary":""}`,children:[de.jsx(sR,{children:de.jsx(lR,{children:a?`${C}`:""})}),de.jsx(uR,{className:"flex flex-col items-center justify-center p-4 max-h-100",children:a&&p?de.jsx(p$,{country:r,metric:p?.metricName,expected:p?.expectedForHappinessValue,actual:p?.currentCountryMetric,average:p?.averageValue,top:{country:p?.highestCountryName,value:p?.highestValue}}):de.jsx("div",{className:"text-center",children:r?de.jsxs("p",{children:["No data for ",m$(r)]}):de.jsx("p",{children:"Click on the map to see happiness data!"})})})]})})},T)})}),de.jsxs("div",{className:"flex gap-2 mt-3 justify-center",children:[de.jsx("button",{onClick:$,"aria-label":"Previous metric",className:"px-3 py-1 border rounded",children:""}),de.jsx("div",{className:"flex items-center px-2 text-sm",children:a?`${T+1} / ${g}`:""}),de.jsx("button",{onClick:G,"aria-label":"Next metric",className:"px-3 py-1 border rounded",children:""})]})]})}function Yy(e){const r=Y.useRef(e);return Y.useEffect(()=>{r.current=e}),Y.useMemo(()=>(...a)=>r.current?.(...a),[])}function g$(e,r=globalThis?.document){const a=Yy(e);Y.useEffect(()=>{const i=p=>{p.key==="Escape"&&a(p)};return r.addEventListener("keydown",i,{capture:!0}),()=>r.removeEventListener("keydown",i,{capture:!0})},[a,r])}var v$="DismissableLayer",hx="dismissableLayer.update",_$="dismissableLayer.pointerDownOutside",b$="dismissableLayer.focusOutside",yC,k5=Y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),U5=Y.forwardRef((e,r)=>{const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:i,onPointerDownOutside:p,onFocusOutside:y,onInteractOutside:g,onDismiss:c,...C}=e,M=Y.useContext(k5),[T,U]=Y.useState(null),z=T?.ownerDocument??globalThis?.document,[,F]=Y.useState({}),V=nu(r,Ee=>U(Ee)),$=Array.from(M.layers),[G]=[...M.layersWithOutsidePointerEventsDisabled].slice(-1),Q=$.indexOf(G),ee=T?$.indexOf(T):-1,ae=M.layersWithOutsidePointerEventsDisabled.size>0,_e=ee>=Q,ve=w$(Ee=>{const Fe=Ee.target,ht=[...M.branches].some(At=>At.contains(Fe));!_e||ht||(p?.(Ee),g?.(Ee),Ee.defaultPrevented||c?.())},z),Ae=P$(Ee=>{const Fe=Ee.target;[...M.branches].some(At=>At.contains(Fe))||(y?.(Ee),g?.(Ee),Ee.defaultPrevented||c?.())},z);return g$(Ee=>{ee===M.layers.size-1&&(i?.(Ee),!Ee.defaultPrevented&&c&&(Ee.preventDefault(),c()))},z),Y.useEffect(()=>{if(T)return a&&(M.layersWithOutsidePointerEventsDisabled.size===0&&(yC=z.body.style.pointerEvents,z.body.style.pointerEvents="none"),M.layersWithOutsidePointerEventsDisabled.add(T)),M.layers.add(T),gC(),()=>{a&&M.layersWithOutsidePointerEventsDisabled.size===1&&(z.body.style.pointerEvents=yC)}},[T,z,a,M]),Y.useEffect(()=>()=>{T&&(M.layers.delete(T),M.layersWithOutsidePointerEventsDisabled.delete(T),gC())},[T,M]),Y.useEffect(()=>{const Ee=()=>F({});return document.addEventListener(hx,Ee),()=>document.removeEventListener(hx,Ee)},[]),de.jsx(ro.div,{...C,ref:V,style:{pointerEvents:ae?_e?"auto":"none":void 0,...e.style},onFocusCapture:rc(e.onFocusCapture,Ae.onFocusCapture),onBlurCapture:rc(e.onBlurCapture,Ae.onBlurCapture),onPointerDownCapture:rc(e.onPointerDownCapture,ve.onPointerDownCapture)})});U5.displayName=v$;var x$="DismissableLayerBranch",S$=Y.forwardRef((e,r)=>{const a=Y.useContext(k5),i=Y.useRef(null),p=nu(r,i);return Y.useEffect(()=>{const y=i.current;if(y)return a.branches.add(y),()=>{a.branches.delete(y)}},[a.branches]),de.jsx(ro.div,{...e,ref:p})});S$.displayName=x$;function w$(e,r=globalThis?.document){const a=Yy(e),i=Y.useRef(!1),p=Y.useRef(()=>{});return Y.useEffect(()=>{const y=c=>{if(c.target&&!i.current){let C=function(){O5(_$,a,M,{discrete:!0})};const M={originalEvent:c};c.pointerType==="touch"?(r.removeEventListener("click",p.current),p.current=C,r.addEventListener("click",p.current,{once:!0})):C()}else r.removeEventListener("click",p.current);i.current=!1},g=window.setTimeout(()=>{r.addEventListener("pointerdown",y)},0);return()=>{window.clearTimeout(g),r.removeEventListener("pointerdown",y),r.removeEventListener("click",p.current)}},[r,a]),{onPointerDownCapture:()=>i.current=!0}}function P$(e,r=globalThis?.document){const a=Yy(e),i=Y.useRef(!1);return Y.useEffect(()=>{const p=y=>{y.target&&!i.current&&O5(b$,a,{originalEvent:y},{discrete:!1})};return r.addEventListener("focusin",p),()=>r.removeEventListener("focusin",p)},[r,a]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function gC(){const e=new CustomEvent(hx);document.dispatchEvent(e)}function O5(e,r,a,{discrete:i}){const p=a.originalEvent.target,y=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:a});r&&p.addEventListener(e,r,{once:!0}),i?U4(p,y):p.dispatchEvent(y)}var ub="focusScope.autoFocusOnMount",cb="focusScope.autoFocusOnUnmount",vC={bubbles:!1,cancelable:!0},A$="FocusScope",L5=Y.forwardRef((e,r)=>{const{loop:a=!1,trapped:i=!1,onMountAutoFocus:p,onUnmountAutoFocus:y,...g}=e,[c,C]=Y.useState(null),M=Yy(p),T=Yy(y),U=Y.useRef(null),z=nu(r,$=>C($)),F=Y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;Y.useEffect(()=>{if(i){let $=function(ae){if(F.paused||!c)return;const _e=ae.target;c.contains(_e)?U.current=_e:sf(U.current,{select:!0})},G=function(ae){if(F.paused||!c)return;const _e=ae.relatedTarget;_e!==null&&(c.contains(_e)||sf(U.current,{select:!0}))},Q=function(ae){if(document.activeElement===document.body)for(const ve of ae)ve.removedNodes.length>0&&sf(c)};document.addEventListener("focusin",$),document.addEventListener("focusout",G);const ee=new MutationObserver(Q);return c&&ee.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",$),document.removeEventListener("focusout",G),ee.disconnect()}}},[i,c,F.paused]),Y.useEffect(()=>{if(c){bC.add(F);const $=document.activeElement;if(!c.contains($)){const Q=new CustomEvent(ub,vC);c.addEventListener(ub,M),c.dispatchEvent(Q),Q.defaultPrevented||(C$(R$(z5(c)),{select:!0}),document.activeElement===$&&sf(c))}return()=>{c.removeEventListener(ub,M),setTimeout(()=>{const Q=new CustomEvent(cb,vC);c.addEventListener(cb,T),c.dispatchEvent(Q),Q.defaultPrevented||sf($??document.body,{select:!0}),c.removeEventListener(cb,T),bC.remove(F)},0)}}},[c,M,T,F]);const V=Y.useCallback($=>{if(!a&&!i||F.paused)return;const G=$.key==="Tab"&&!$.altKey&&!$.ctrlKey&&!$.metaKey,Q=document.activeElement;if(G&&Q){const ee=$.currentTarget,[ae,_e]=D$(ee);ae&&_e?!$.shiftKey&&Q===_e?($.preventDefault(),a&&sf(ae,{select:!0})):$.shiftKey&&Q===ae&&($.preventDefault(),a&&sf(_e,{select:!0})):Q===ee&&$.preventDefault()}},[a,i,F.paused]);return de.jsx(ro.div,{tabIndex:-1,...g,ref:z,onKeyDown:V})});L5.displayName=A$;function C$(e,{select:r=!1}={}){const a=document.activeElement;for(const i of e)if(sf(i,{select:r}),document.activeElement!==a)return}function D$(e){const r=z5(e),a=_C(r,e),i=_C(r.reverse(),e);return[a,i]}function z5(e){const r=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const p=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||p?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)r.push(a.currentNode);return r}function _C(e,r){for(const a of e)if(!M$(a,{upTo:r}))return a}function M$(e,{upTo:r}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(r!==void 0&&e===r)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function T$(e){return e instanceof HTMLInputElement&&"select"in e}function sf(e,{select:r=!1}={}){if(e&&e.focus){const a=document.activeElement;e.focus({preventScroll:!0}),e!==a&&T$(e)&&r&&e.select()}}var bC=E$();function E$(){let e=[];return{add(r){const a=e[0];r!==a&&a?.pause(),e=xC(e,r),e.unshift(r)},remove(r){e=xC(e,r),e[0]?.resume()}}}function xC(e,r){const a=[...e],i=a.indexOf(r);return i!==-1&&a.splice(i,1),a}function R$(e){return e.filter(r=>r.tagName!=="A")}var I$="Portal",F5=Y.forwardRef((e,r)=>{const{container:a,...i}=e,[p,y]=Y.useState(!1);jp(()=>y(!0),[]);const g=a||p&&globalThis?.document?.body;return g?C4.createPortal(de.jsx(ro.div,{...i,ref:r}),g):null});F5.displayName=I$;var hb=0;function k$(){Y.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??SC()),document.body.insertAdjacentElement("beforeend",e[1]??SC()),hb++,()=>{hb===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),hb--}},[])}function SC(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ec=function(){return ec=Object.assign||function(r){for(var a,i=1,p=arguments.length;i<p;i++){a=arguments[i];for(var y in a)Object.prototype.hasOwnProperty.call(a,y)&&(r[y]=a[y])}return r},ec.apply(this,arguments)};function N5(e,r){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&r.indexOf(i)<0&&(a[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,i=Object.getOwnPropertySymbols(e);p<i.length;p++)r.indexOf(i[p])<0&&Object.prototype.propertyIsEnumerable.call(e,i[p])&&(a[i[p]]=e[i[p]]);return a}function U$(e,r,a){if(a||arguments.length===2)for(var i=0,p=r.length,y;i<p;i++)(y||!(i in r))&&(y||(y=Array.prototype.slice.call(r,0,i)),y[i]=r[i]);return e.concat(y||Array.prototype.slice.call(r))}var j0="right-scroll-bar-position",B0="width-before-scroll-bar",O$="with-scroll-bars-hidden",L$="--removed-body-scroll-bar-size";function fb(e,r){return typeof e=="function"?e(r):e&&(e.current=r),e}function z$(e,r){var a=Y.useState(function(){return{value:e,callback:r,facade:{get current(){return a.value},set current(i){var p=a.value;p!==i&&(a.value=i,a.callback(i,p))}}}})[0];return a.callback=r,a.facade}var F$=typeof window<"u"?Y.useLayoutEffect:Y.useEffect,wC=new WeakMap;function N$(e,r){var a=z$(null,function(i){return e.forEach(function(p){return fb(p,i)})});return F$(function(){var i=wC.get(a);if(i){var p=new Set(i),y=new Set(e),g=a.current;p.forEach(function(c){y.has(c)||fb(c,null)}),y.forEach(function(c){p.has(c)||fb(c,g)})}wC.set(a,e)},[e]),a}function j$(e){return e}function B$(e,r){r===void 0&&(r=j$);var a=[],i=!1,p={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return a.length?a[a.length-1]:e},useMedium:function(y){var g=r(y,i);return a.push(g),function(){a=a.filter(function(c){return c!==g})}},assignSyncMedium:function(y){for(i=!0;a.length;){var g=a;a=[],g.forEach(y)}a={push:function(c){return y(c)},filter:function(){return a}}},assignMedium:function(y){i=!0;var g=[];if(a.length){var c=a;a=[],c.forEach(y),g=a}var C=function(){var T=g;g=[],T.forEach(y)},M=function(){return Promise.resolve().then(C)};M(),a={push:function(T){g.push(T),M()},filter:function(T){return g=g.filter(T),a}}}};return p}function q$(e){e===void 0&&(e={});var r=B$(null);return r.options=ec({async:!0,ssr:!1},e),r}var j5=function(e){var r=e.sideCar,a=N5(e,["sideCar"]);if(!r)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=r.read();if(!i)throw new Error("Sidecar medium not found");return Y.createElement(i,ec({},a))};j5.isSideCarExport=!0;function H$(e,r){return e.useMedium(r),j5}var B5=q$(),db=function(){},h1=Y.forwardRef(function(e,r){var a=Y.useRef(null),i=Y.useState({onScrollCapture:db,onWheelCapture:db,onTouchMoveCapture:db}),p=i[0],y=i[1],g=e.forwardProps,c=e.children,C=e.className,M=e.removeScrollBar,T=e.enabled,U=e.shards,z=e.sideCar,F=e.noRelative,V=e.noIsolation,$=e.inert,G=e.allowPinchZoom,Q=e.as,ee=Q===void 0?"div":Q,ae=e.gapMode,_e=N5(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),ve=z,Ae=N$([a,r]),Ee=ec(ec({},_e),p);return Y.createElement(Y.Fragment,null,T&&Y.createElement(ve,{sideCar:B5,removeScrollBar:M,shards:U,noRelative:F,noIsolation:V,inert:$,setCallbacks:y,allowPinchZoom:!!G,lockRef:a,gapMode:ae}),g?Y.cloneElement(Y.Children.only(c),ec(ec({},Ee),{ref:Ae})):Y.createElement(ee,ec({},Ee,{className:C,ref:Ae}),c))});h1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};h1.classNames={fullWidth:B0,zeroRight:j0};var $$=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function V$(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var r=$$();return r&&e.setAttribute("nonce",r),e}function G$(e,r){e.styleSheet?e.styleSheet.cssText=r:e.appendChild(document.createTextNode(r))}function W$(e){var r=document.head||document.getElementsByTagName("head")[0];r.appendChild(e)}var Z$=function(){var e=0,r=null;return{add:function(a){e==0&&(r=V$())&&(G$(r,a),W$(r)),e++},remove:function(){e--,!e&&r&&(r.parentNode&&r.parentNode.removeChild(r),r=null)}}},Y$=function(){var e=Z$();return function(r,a){Y.useEffect(function(){return e.add(r),function(){e.remove()}},[r&&a])}},q5=function(){var e=Y$(),r=function(a){var i=a.styles,p=a.dynamic;return e(i,p),null};return r},Q$={left:0,top:0,right:0,gap:0},pb=function(e){return parseInt(e||"",10)||0},X$=function(e){var r=window.getComputedStyle(document.body),a=r[e==="padding"?"paddingLeft":"marginLeft"],i=r[e==="padding"?"paddingTop":"marginTop"],p=r[e==="padding"?"paddingRight":"marginRight"];return[pb(a),pb(i),pb(p)]},K$=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Q$;var r=X$(e),a=document.documentElement.clientWidth,i=window.innerWidth;return{left:r[0],top:r[1],right:r[2],gap:Math.max(0,i-a+r[2]-r[0])}},J$=q5(),Np="data-scroll-locked",eV=function(e,r,a,i){var p=e.left,y=e.top,g=e.right,c=e.gap;return a===void 0&&(a="margin"),`
  .`.concat(O$,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(c,"px ").concat(i,`;
  }
  body[`).concat(Np,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([r&&"position: relative ".concat(i,";"),a==="margin"&&`
    padding-left: `.concat(p,`px;
    padding-top: `).concat(y,`px;
    padding-right: `).concat(g,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(i,`;
    `),a==="padding"&&"padding-right: ".concat(c,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(j0,` {
    right: `).concat(c,"px ").concat(i,`;
  }
  
  .`).concat(B0,` {
    margin-right: `).concat(c,"px ").concat(i,`;
  }
  
  .`).concat(j0," .").concat(j0,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(B0," .").concat(B0,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Np,`] {
    `).concat(L$,": ").concat(c,`px;
  }
`)},PC=function(){var e=parseInt(document.body.getAttribute(Np)||"0",10);return isFinite(e)?e:0},tV=function(){Y.useEffect(function(){return document.body.setAttribute(Np,(PC()+1).toString()),function(){var e=PC()-1;e<=0?document.body.removeAttribute(Np):document.body.setAttribute(Np,e.toString())}},[])},rV=function(e){var r=e.noRelative,a=e.noImportant,i=e.gapMode,p=i===void 0?"margin":i;tV();var y=Y.useMemo(function(){return K$(p)},[p]);return Y.createElement(J$,{styles:eV(y,!r,p,a?"":"!important")})},fx=!1;if(typeof window<"u")try{var k0=Object.defineProperty({},"passive",{get:function(){return fx=!0,!0}});window.addEventListener("test",k0,k0),window.removeEventListener("test",k0,k0)}catch{fx=!1}var Rp=fx?{passive:!1}:!1,nV=function(e){return e.tagName==="TEXTAREA"},H5=function(e,r){if(!(e instanceof Element))return!1;var a=window.getComputedStyle(e);return a[r]!=="hidden"&&!(a.overflowY===a.overflowX&&!nV(e)&&a[r]==="visible")},aV=function(e){return H5(e,"overflowY")},iV=function(e){return H5(e,"overflowX")},AC=function(e,r){var a=r.ownerDocument,i=r;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var p=$5(e,i);if(p){var y=V5(e,i),g=y[1],c=y[2];if(g>c)return!0}i=i.parentNode}while(i&&i!==a.body);return!1},oV=function(e){var r=e.scrollTop,a=e.scrollHeight,i=e.clientHeight;return[r,a,i]},sV=function(e){var r=e.scrollLeft,a=e.scrollWidth,i=e.clientWidth;return[r,a,i]},$5=function(e,r){return e==="v"?aV(r):iV(r)},V5=function(e,r){return e==="v"?oV(r):sV(r)},lV=function(e,r){return e==="h"&&r==="rtl"?-1:1},uV=function(e,r,a,i,p){var y=lV(e,window.getComputedStyle(r).direction),g=y*i,c=a.target,C=r.contains(c),M=!1,T=g>0,U=0,z=0;do{if(!c)break;var F=V5(e,c),V=F[0],$=F[1],G=F[2],Q=$-G-y*V;(V||Q)&&$5(e,c)&&(U+=Q,z+=V);var ee=c.parentNode;c=ee&&ee.nodeType===Node.DOCUMENT_FRAGMENT_NODE?ee.host:ee}while(!C&&c!==document.body||C&&(r.contains(c)||r===c));return(T&&Math.abs(U)<1||!T&&Math.abs(z)<1)&&(M=!0),M},U0=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},CC=function(e){return[e.deltaX,e.deltaY]},DC=function(e){return e&&"current"in e?e.current:e},cV=function(e,r){return e[0]===r[0]&&e[1]===r[1]},hV=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},fV=0,Ip=[];function dV(e){var r=Y.useRef([]),a=Y.useRef([0,0]),i=Y.useRef(),p=Y.useState(fV++)[0],y=Y.useState(q5)[0],g=Y.useRef(e);Y.useEffect(function(){g.current=e},[e]),Y.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(p));var $=U$([e.lockRef.current],(e.shards||[]).map(DC),!0).filter(Boolean);return $.forEach(function(G){return G.classList.add("allow-interactivity-".concat(p))}),function(){document.body.classList.remove("block-interactivity-".concat(p)),$.forEach(function(G){return G.classList.remove("allow-interactivity-".concat(p))})}}},[e.inert,e.lockRef.current,e.shards]);var c=Y.useCallback(function($,G){if("touches"in $&&$.touches.length===2||$.type==="wheel"&&$.ctrlKey)return!g.current.allowPinchZoom;var Q=U0($),ee=a.current,ae="deltaX"in $?$.deltaX:ee[0]-Q[0],_e="deltaY"in $?$.deltaY:ee[1]-Q[1],ve,Ae=$.target,Ee=Math.abs(ae)>Math.abs(_e)?"h":"v";if("touches"in $&&Ee==="h"&&Ae.type==="range")return!1;var Fe=AC(Ee,Ae);if(!Fe)return!0;if(Fe?ve=Ee:(ve=Ee==="v"?"h":"v",Fe=AC(Ee,Ae)),!Fe)return!1;if(!i.current&&"changedTouches"in $&&(ae||_e)&&(i.current=ve),!ve)return!0;var ht=i.current||ve;return uV(ht,G,$,ht==="h"?ae:_e)},[]),C=Y.useCallback(function($){var G=$;if(!(!Ip.length||Ip[Ip.length-1]!==y)){var Q="deltaY"in G?CC(G):U0(G),ee=r.current.filter(function(ve){return ve.name===G.type&&(ve.target===G.target||G.target===ve.shadowParent)&&cV(ve.delta,Q)})[0];if(ee&&ee.should){G.cancelable&&G.preventDefault();return}if(!ee){var ae=(g.current.shards||[]).map(DC).filter(Boolean).filter(function(ve){return ve.contains(G.target)}),_e=ae.length>0?c(G,ae[0]):!g.current.noIsolation;_e&&G.cancelable&&G.preventDefault()}}},[]),M=Y.useCallback(function($,G,Q,ee){var ae={name:$,delta:G,target:Q,should:ee,shadowParent:pV(Q)};r.current.push(ae),setTimeout(function(){r.current=r.current.filter(function(_e){return _e!==ae})},1)},[]),T=Y.useCallback(function($){a.current=U0($),i.current=void 0},[]),U=Y.useCallback(function($){M($.type,CC($),$.target,c($,e.lockRef.current))},[]),z=Y.useCallback(function($){M($.type,U0($),$.target,c($,e.lockRef.current))},[]);Y.useEffect(function(){return Ip.push(y),e.setCallbacks({onScrollCapture:U,onWheelCapture:U,onTouchMoveCapture:z}),document.addEventListener("wheel",C,Rp),document.addEventListener("touchmove",C,Rp),document.addEventListener("touchstart",T,Rp),function(){Ip=Ip.filter(function($){return $!==y}),document.removeEventListener("wheel",C,Rp),document.removeEventListener("touchmove",C,Rp),document.removeEventListener("touchstart",T,Rp)}},[]);var F=e.removeScrollBar,V=e.inert;return Y.createElement(Y.Fragment,null,V?Y.createElement(y,{styles:hV(p)}):null,F?Y.createElement(rV,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function pV(e){for(var r=null;e!==null;)e instanceof ShadowRoot&&(r=e.host,e=e.host),e=e.parentNode;return r}const mV=H$(B5,dV);var G5=Y.forwardRef(function(e,r){return Y.createElement(h1,ec({},e,{ref:r,sideCar:mV}))});G5.classNames=h1.classNames;var yV=function(e){if(typeof document>"u")return null;var r=Array.isArray(e)?e[0]:e;return r.ownerDocument.body},kp=new WeakMap,O0=new WeakMap,L0={},mb=0,W5=function(e){return e&&(e.host||W5(e.parentNode))},gV=function(e,r){return r.map(function(a){if(e.contains(a))return a;var i=W5(a);return i&&e.contains(i)?i:(console.error("aria-hidden",a,"in not contained inside",e,". Doing nothing"),null)}).filter(function(a){return!!a})},vV=function(e,r,a,i){var p=gV(r,Array.isArray(e)?e:[e]);L0[a]||(L0[a]=new WeakMap);var y=L0[a],g=[],c=new Set,C=new Set(p),M=function(U){!U||c.has(U)||(c.add(U),M(U.parentNode))};p.forEach(M);var T=function(U){!U||C.has(U)||Array.prototype.forEach.call(U.children,function(z){if(c.has(z))T(z);else try{var F=z.getAttribute(i),V=F!==null&&F!=="false",$=(kp.get(z)||0)+1,G=(y.get(z)||0)+1;kp.set(z,$),y.set(z,G),g.push(z),$===1&&V&&O0.set(z,!0),G===1&&z.setAttribute(a,"true"),V||z.setAttribute(i,"true")}catch(Q){console.error("aria-hidden: cannot operate on ",z,Q)}})};return T(r),c.clear(),mb++,function(){g.forEach(function(U){var z=kp.get(U)-1,F=y.get(U)-1;kp.set(U,z),y.set(U,F),z||(O0.has(U)||U.removeAttribute(i),O0.delete(U)),F||U.removeAttribute(a)}),mb--,mb||(kp=new WeakMap,kp=new WeakMap,O0=new WeakMap,L0={})}},_V=function(e,r,a){a===void 0&&(a="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),p=yV(e);return p?(i.push.apply(i,Array.from(p.querySelectorAll("[aria-live], script"))),vV(i,p,a,"aria-hidden")):function(){return null}},f1="Dialog",[Z5]=Qy(f1),[bV,cu]=Z5(f1),Y5=e=>{const{__scopeDialog:r,children:a,open:i,defaultOpen:p,onOpenChange:y,modal:g=!0}=e,c=Y.useRef(null),C=Y.useRef(null),[M,T]=Ev({prop:i,defaultProp:p??!1,onChange:y,caller:f1});return de.jsx(bV,{scope:r,triggerRef:c,contentRef:C,contentId:Iy(),titleId:Iy(),descriptionId:Iy(),open:M,onOpenChange:T,onOpenToggle:Y.useCallback(()=>T(U=>!U),[T]),modal:g,children:a})};Y5.displayName=f1;var Q5="DialogTrigger",X5=Y.forwardRef((e,r)=>{const{__scopeDialog:a,...i}=e,p=cu(Q5,a),y=nu(r,p.triggerRef);return de.jsx(ro.button,{type:"button","aria-haspopup":"dialog","aria-expanded":p.open,"aria-controls":p.contentId,"data-state":aS(p.open),...i,ref:y,onClick:rc(e.onClick,p.onOpenToggle)})});X5.displayName=Q5;var rS="DialogPortal",[xV,K5]=Z5(rS,{forceMount:void 0}),J5=e=>{const{__scopeDialog:r,forceMount:a,children:i,container:p}=e,y=cu(rS,r);return de.jsx(xV,{scope:r,forceMount:a,children:Y.Children.map(i,g=>de.jsx(Xy,{present:a||y.open,children:de.jsx(F5,{asChild:!0,container:p,children:g})}))})};J5.displayName=rS;var Tv="DialogOverlay",e4=Y.forwardRef((e,r)=>{const a=K5(Tv,e.__scopeDialog),{forceMount:i=a.forceMount,...p}=e,y=cu(Tv,e.__scopeDialog);return y.modal?de.jsx(Xy,{present:i||y.open,children:de.jsx(wV,{...p,ref:r})}):null});e4.displayName=Tv;var SV=Oy("DialogOverlay.RemoveScroll"),wV=Y.forwardRef((e,r)=>{const{__scopeDialog:a,...i}=e,p=cu(Tv,a);return de.jsx(G5,{as:SV,allowPinchZoom:!0,shards:[p.contentRef],children:de.jsx(ro.div,{"data-state":aS(p.open),...i,ref:r,style:{pointerEvents:"auto",...i.style}})})}),Fd="DialogContent",t4=Y.forwardRef((e,r)=>{const a=K5(Fd,e.__scopeDialog),{forceMount:i=a.forceMount,...p}=e,y=cu(Fd,e.__scopeDialog);return de.jsx(Xy,{present:i||y.open,children:y.modal?de.jsx(PV,{...p,ref:r}):de.jsx(AV,{...p,ref:r})})});t4.displayName=Fd;var PV=Y.forwardRef((e,r)=>{const a=cu(Fd,e.__scopeDialog),i=Y.useRef(null),p=nu(r,a.contentRef,i);return Y.useEffect(()=>{const y=i.current;if(y)return _V(y)},[]),de.jsx(r4,{...e,ref:p,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:rc(e.onCloseAutoFocus,y=>{y.preventDefault(),a.triggerRef.current?.focus()}),onPointerDownOutside:rc(e.onPointerDownOutside,y=>{const g=y.detail.originalEvent,c=g.button===0&&g.ctrlKey===!0;(g.button===2||c)&&y.preventDefault()}),onFocusOutside:rc(e.onFocusOutside,y=>y.preventDefault())})}),AV=Y.forwardRef((e,r)=>{const a=cu(Fd,e.__scopeDialog),i=Y.useRef(!1),p=Y.useRef(!1);return de.jsx(r4,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:y=>{e.onCloseAutoFocus?.(y),y.defaultPrevented||(i.current||a.triggerRef.current?.focus(),y.preventDefault()),i.current=!1,p.current=!1},onInteractOutside:y=>{e.onInteractOutside?.(y),y.defaultPrevented||(i.current=!0,y.detail.originalEvent.type==="pointerdown"&&(p.current=!0));const g=y.target;a.triggerRef.current?.contains(g)&&y.preventDefault(),y.detail.originalEvent.type==="focusin"&&p.current&&y.preventDefault()}})}),r4=Y.forwardRef((e,r)=>{const{__scopeDialog:a,trapFocus:i,onOpenAutoFocus:p,onCloseAutoFocus:y,...g}=e,c=cu(Fd,a),C=Y.useRef(null),M=nu(r,C);return k$(),de.jsxs(de.Fragment,{children:[de.jsx(L5,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:p,onUnmountAutoFocus:y,children:de.jsx(U5,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":aS(c.open),...g,ref:M,onDismiss:()=>c.onOpenChange(!1)})}),de.jsxs(de.Fragment,{children:[de.jsx(DV,{titleId:c.titleId}),de.jsx(TV,{contentRef:C,descriptionId:c.descriptionId})]})]})}),nS="DialogTitle",CV=Y.forwardRef((e,r)=>{const{__scopeDialog:a,...i}=e,p=cu(nS,a);return de.jsx(ro.h2,{id:p.titleId,...i,ref:r})});CV.displayName=nS;var n4="DialogDescription",a4=Y.forwardRef((e,r)=>{const{__scopeDialog:a,...i}=e,p=cu(n4,a);return de.jsx(ro.p,{id:p.descriptionId,...i,ref:r})});a4.displayName=n4;var i4="DialogClose",o4=Y.forwardRef((e,r)=>{const{__scopeDialog:a,...i}=e,p=cu(i4,a);return de.jsx(ro.button,{type:"button",...i,ref:r,onClick:rc(e.onClick,()=>p.onOpenChange(!1))})});o4.displayName=i4;function aS(e){return e?"open":"closed"}var s4="DialogTitleWarning",[wG,l4]=P4(s4,{contentName:Fd,titleName:nS,docsSlug:"dialog"}),DV=({titleId:e})=>{const r=l4(s4),a=`\`${r.contentName}\` requires a \`${r.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${r.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${r.docsSlug}`;return Y.useEffect(()=>{e&&(document.getElementById(e)||console.error(a))},[a,e]),null},MV="DialogDescriptionWarning",TV=({contentRef:e,descriptionId:r})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${l4(MV).contentName}}.`;return Y.useEffect(()=>{const p=e.current?.getAttribute("aria-describedby");r&&p&&(document.getElementById(r)||console.warn(i))},[i,e,r]),null},EV=Y5,RV=X5,IV=J5,kV=e4,UV=t4,OV=a4,LV=o4;function zV({...e}){return de.jsx(EV,{"data-slot":"dialog",...e})}function FV({...e}){return de.jsx(RV,{"data-slot":"dialog-trigger",...e})}function NV({...e}){return de.jsx(IV,{"data-slot":"dialog-portal",...e})}function jV({className:e,...r}){return de.jsx(kV,{"data-slot":"dialog-overlay",className:ha("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...r})}function BV({className:e,children:r,showCloseButton:a=!0,...i}){return de.jsxs(NV,{"data-slot":"dialog-portal",children:[de.jsx(jV,{}),de.jsxs(UV,{"data-slot":"dialog-content",className:ha("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...i,children:[r,a&&de.jsxs(LV,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[de.jsx(bE,{}),de.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function qV({className:e,...r}){return de.jsx("div",{"data-slot":"dialog-header",className:ha("flex flex-col gap-2 text-center sm:text-left",e),...r})}function HV({className:e,...r}){return de.jsx(OV,{"data-slot":"dialog-description",className:ha("text-muted-foreground text-sm",e),...r})}function $V({className:e,...r}){return de.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:de.jsx("table",{"data-slot":"table",className:ha("w-full caption-bottom text-sm",e),...r})})}function VV({className:e,...r}){return de.jsx("thead",{"data-slot":"table-header",className:ha("[&_tr]:border-b",e),...r})}function GV({className:e,...r}){return de.jsx("tbody",{"data-slot":"table-body",className:ha("[&_tr:last-child]:border-0",e),...r})}function MC({className:e,...r}){return de.jsx("tr",{"data-slot":"table-row",className:ha("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...r})}function Up({className:e,...r}){return de.jsx("th",{"data-slot":"table-head",className:ha("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}function Op({className:e,...r}){return de.jsx("td",{"data-slot":"table-cell",className:ha("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}function WV(e){return e.toLowerCase().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}function ZV({country:e,rows:r}){return de.jsxs($V,{children:[de.jsx(VV,{children:de.jsxs(MC,{children:[de.jsx(Up,{children:"Metric"}),de.jsx(Up,{children:WV(e)}),de.jsx(Up,{children:"Average"}),de.jsx(Up,{children:"Top"}),de.jsx(Up,{children:"Expected"}),de.jsx(Up,{children:"Over/Under Expected"})]})}),de.jsx(GV,{children:r.map((a,i)=>{const p=a.metric.toLowerCase().includes("happiness"),y=!p&&a.expected!==0?(a.actual-a.expected)/a.expected*100:0;return de.jsxs(MC,{children:[de.jsx(Op,{children:a.metric}),de.jsx(Op,{children:a.actual.toFixed(2)}),de.jsx(Op,{children:a.average.toFixed(2)}),de.jsx(Op,{children:a.top.toFixed(2)}),de.jsx(Op,{children:p?"--":a.expected.toFixed(2)}),de.jsx(Op,{children:p?"--":y.toFixed(1)+"%"})]},i)})})]})}function YV({Country:e,AllCountries:r,disabled:a=!1,flash:i=!1}){const p=Y.useMemo(()=>!e||!r||r.length===0?[]:r.filter(y=>String(y.metricName).toLowerCase()!=="happiness").map(y=>{const g=typeof y.currentCountryMetric=="number"?y.currentCountryMetric:NaN,c=typeof y.expectedForHappinessValue=="number"?y.expectedForHappinessValue:NaN,C=typeof y.averageValue=="number"?y.averageValue:NaN,M=typeof y.highestValue=="number"?y.highestValue:NaN,T=typeof y.lowestValue=="number"?y.lowestValue:NaN;return{metric:y.metricName,actual:g,expected:c,average:C,top:M,bottom:T}}),[e,r]);return de.jsxs(zV,{children:[a?de.jsx(Ry,{className:`w-full ${i?"disabled:!text-primary disabled:!bg-primary":"disabled:!text-accent disabled:!bg-accent"} disabled:opacity-100`,type:"button",disabled:!0,children:"Data Table"}):de.jsx(FV,{asChild:!0,children:de.jsx(Ry,{className:`w-20 ${i?"text-primary":""}`,type:"button",children:"Data Table"})}),de.jsx(BV,{className:"[&>button:last-child]:hidden w-full max-w-6xl md:max-w-4xl sm:max-w-3xl max-h-[80vh] overflow-y-auto",children:de.jsx(qV,{children:de.jsx(HV,{children:de.jsx(ZV,{country:e?e.Country_clean:"",rows:p})})})})]})}function QV(e,r){const a=e.map(i=>i[r]).filter(i=>typeof i=="number"&&!isNaN(i));return a.length===0?{min:0,max:0}:{min:Math.min(...a),max:Math.max(...a)}}function XV(e,r,a){const p=e.map(ee=>({h:ee["Happiness (score 0-10)"],m:ee[a]})).filter(ee=>typeof ee.h=="number"&&typeof ee.m=="number"&&!isNaN(ee.h));if(p.length===0)return NaN;const y=p.length,g=p.map(ee=>ee.h).slice().sort((ee,ae)=>ee-ae),c=new Map,C=Array.from(new Set(g));for(const ee of C){const ae=g.indexOf(ee),_e=g.lastIndexOf(ee),ve=(ae+_e)/2,Ae=y===1?.5:ve/(y-1);c.set(ee,Ae)}const M=p.map(ee=>({r:c.get(ee.h),m:ee.m})),T=M.reduce((ee,ae)=>ee+ae.r,0)/y,U=M.reduce((ee,ae)=>ee+ae.m,0)/y;let z=0,F=0;for(const ee of M){const ae=ee.r-T;z+=ae*(ee.m-U),F+=ae*ae}if(F<1e-6)return U;const V=z/F,$=U-V*T;let G=c.get(r);if(G===void 0)if(y===1)G=.5;else if(r<=g[0])G=0;else if(r>=g[y-1])G=1;else{let ee=g.findIndex(ae=>ae>=r);if(ee===-1&&(ee=y-1),ee===0)G=0;else{const ae=g[ee-1],_e=g[ee],ve=c.get(ae),Ae=c.get(_e),Ee=(r-ae)/(_e-ae);G=ve+Ee*(Ae-ve)}}return $+V*G}function KV(e){return e.toLowerCase().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}function JV(){const[e,r]=Y.useState(!0),[a,i]=Y.useState(""),[p,y]=Y.useState([]),[g,c]=Y.useState(""),[C,M]=Y.useState(null),[T,U]=Y.useState(!1),z=Y.useRef(null),F=Y.useRef(null);return Y.useEffect(()=>{let V=[];for(const $ in Ju[0]){const G=$;typeof Ju[0][G]=="number"&&V.push({metricName:$})}if(V.forEach($=>{let G=0;Ju.forEach(Q=>{const ee=Q[$.metricName];typeof ee=="number"&&(G+=ee,($.highestValue===void 0||ee>$.highestValue)&&($.highestValue=ee,$.highestCountryName=Q.Country_clean),($.lowestValue===void 0||ee<$.lowestValue)&&($.lowestValue=ee,$.lowestCountryName=Q.Country_clean))}),$.averageValue=G/Ju.length}),a){const $=Ju.find(G=>G.Country_clean===a)||null;if(M($),U(!0),window.clearTimeout(F.current??void 0),F.current=window.setTimeout(()=>U(!1),400),$){for(const G in $){const Q=G;typeof $[Q]=="number"&&QV(Ju,Q)}V.forEach(G=>{const Q=$[G.metricName];typeof Q=="number"&&!isNaN(Q)&&(G.currentCountryMetric=Q,G.expectedForHappinessValue=XV(Ju,$["Happiness (score 0-10)"],G.metricName))})}}return console.log(V[12]),y(V),()=>{window.clearTimeout(F.current??void 0)}},[a]),de.jsxs("div",{className:"myMainContainer container w-full min-h-screen flex flex-col bg-primary-foreground font-display relative",children:[de.jsxs("div",{className:"myHeader bg-primary text-primary-foreground flex flex-row justify-between items-center gap-4 p-3 w-full h-12",children:[de.jsxs("div",{className:"flex flex-row justify-start items-center gap-2",children:[de.jsx("a",{href:"",target:"_blank",children:de.jsx("img",{src:w4,className:"logo h-10",alt:"Vite logo"})}),de.jsx("h1",{children:"Happiness Data"})]}),de.jsxs("div",{className:"flex w-full max-w-sm items-center gap-2",children:[de.jsx(Ry,{type:"button",variant:"outline",className:e?"bg-secondary text-white border border-secondary":"bg-primary text-gray-700 border border-gray-300",onClick:()=>r(!0),children:"Map"}),de.jsx(Ry,{type:"button",variant:"outline",className:e?"bg-primary text-gray-700 border border-gray-300":"bg-secondary text-white border border-secondary",onClick:()=>r(!1),children:"About"}),de.jsx(C6,{type:"email",placeholder:"Find a country",value:g,onChange:V=>c(V.target.value),onKeyDown:V=>{if(V.key==="Enter"){const $=Ju.find(G=>G.Country_clean.toLowerCase()===g.toLowerCase());i($?$.Country_clean:g),c("")}},className:"placeholder:text-white placeholder:opacity-100"}),de.jsx(Ry,{type:"button",variant:"outline",className:"bg-primary",onClick:()=>{const V=Ju.find($=>$.Country_clean.toLowerCase()===g.toLowerCase());V&&(i(V.Country_clean),c(""))},children:"Search"})]})]}),e?de.jsxs("div",{className:"myMainContentContainer flex-1 flex flex-col lg:flex-row w-full h-full justify-center items-center",children:[de.jsx("div",{className:"p-5 w-full lg:w-auto flex-1 h-full rounded-full max-h-full",children:de.jsx("div",{className:"card flex flex-col justify-center items-center gap-4 relative rounded-full h-full max-h-full",ref:z,children:de.jsx(U6,{mapContainerRef:z,callback:i,countryStats:Ju})})}),de.jsxs("div",{className:"flex flex-col justify-center items-center gap-5 p-5",children:[C?de.jsxs("div",{className:"flex flex-row justify-center items-center gap-3 w-full h-20 lg:h-12",children:[de.jsxs("div",{className:"flex-1 flex flex-col",children:[de.jsxs("div",{children:[KV(a)," has the happiness rate of"," ",de.jsx("span",{className:"font-bold text-primary",children:C?.["Happiness (score 0-10)"]})]}),de.jsx(w6,{value:(C?.["Happiness (score 0-10)"]??0)*10})]}),de.jsx("div",{children:de.jsx(YV,{Country:C,AllCountries:p,disabled:!C,flash:T})})]}):de.jsx("div",{className:"h-12"}),de.jsx(y$,{flash:T,countryName:a,countryMetrics:C,absoluteStatistics:p})]})]}):de.jsx("div",{className:"w-full h-full flex justify-center items-center",children:de.jsxs("div",{className:"w-2/3 m-5",children:[de.jsx("h1",{className:"font-bold text-primary text-2xl",children:'How "Expected" and "% Away from Expected" Work'}),de.jsx("h2",{className:"font-bold text-accent text-xl",children:"1. What the project is doing"}),de.jsxs("p",{children:["It combines many datasets (happiness, health, economy, etc.) into one table for each country. For every metric (like salaries, CO, life expectancy), it estimates what value wed"," ",de.jsx("strong",{children:"expect"})," a country to have based on its happiness score. It then compares the countrys ",de.jsx("em",{children:"actual"})," number to that ",de.jsx("em",{children:"expected"})," number, and shows the difference as a percentage."]}),de.jsx("h2",{className:"font-bold text-accent text-xl mt-3",children:"2. How expected value is found"}),de.jsxs("ul",{children:[de.jsx("li",{children:"Line up all countries by happiness score (lowest to highest)."}),de.jsx("li",{children:"Turn happiness scores into percentiles (like bottom 10%, top 50%, etc.)."}),de.jsx("li",{children:"Draw a simple trend line between happiness percentiles and metric values."}),de.jsx("li",{children:"For a country, check where its happiness falls on that line  that gives the expected metric value."})]}),de.jsxs("div",{className:"highlight",children:[de.jsx("strong",{children:"In short:"})," Expected value = what most countries with similar happiness tend to have for that metric."]}),de.jsx("h2",{className:"font-bold text-accent text-xl mt-3",children:"3. How % away from expected is calculated"}),de.jsx("p",{children:"Formula:"}),de.jsx("i",{children:"(Actual  Expected)  Expected  100"}),de.jsxs("ul",{children:[de.jsxs("li",{children:[de.jsx("strong",{children:"Positive %"}),"  the country has"," ",de.jsx("em",{children:"more than expected"}),"."]}),de.jsxs("li",{children:[de.jsx("strong",{children:"Negative %"}),"  the country has"," ",de.jsx("em",{children:"less than expected"}),"."]})]}),de.jsxs("p",{children:[de.jsx("em",{children:"Example:"})," Expected life expectancy = 75 years, Actual = 80 years  +6.7% (better than expected)."]}),de.jsx("h2",{className:"font-bold text-accent text-xl mt-3",children:"4. How to read it"}),de.jsxs("ul",{children:[de.jsxs("li",{children:[de.jsx("strong",{children:"Strengths"}),": actual ",">"," expected by a good margin."]}),de.jsxs("li",{children:[de.jsx("strong",{children:"Weaknesses"}),": actual ","<"," expected."]}),de.jsx("li",{children:"5%  basically on track."}),de.jsx("li",{children:"20% or more  clear strength or weakness."})]}),de.jsx("h2",{className:"font-bold text-accent text-xl mt-3",children:"5. Things to be careful about"}),de.jsxs("ul",{children:[de.jsxs("li",{children:[de.jsx("strong",{children:"Not cause and effect"}),": higher or lower than expected doesnt prove it caused happiness."]}),de.jsxs("li",{children:[de.jsx("strong",{children:"Direction matters"}),": higher is good for income, bad for pollution."]})]}),de.jsxs("div",{className:"highlight",children:[" In plain English:",de.jsxs("ul",{children:[de.jsxs("li",{children:["Expected = what a countrys number ",de.jsx("em",{children:"should"})," look like given its happiness score, based on world patterns."]}),de.jsx("li",{children:"% away from expected = how much higher or lower the country actually is compared to that expectation."}),de.jsx("li",{children:"Positive = above expected, Negative = below expected."})]}),de.jsx("h2",{className:"font-bold text-accent text-xl mt-3",children:"6. FAQ"})]}),de.jsx(SE,{})]})})]})}function eG(){return de.jsx(JV,{})}S4.createRoot(document.getElementById("root")).render(de.jsx(Y.StrictMode,{children:de.jsx(eG,{})}));
