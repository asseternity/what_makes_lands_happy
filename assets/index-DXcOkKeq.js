function d4(e,r){for(var i=0;i<r.length;i++){const a=r[i];if(typeof a!="string"&&!Array.isArray(a)){for(const p in a)if(p!=="default"&&!(p in e)){const g=Object.getOwnPropertyDescriptor(a,p);g&&Object.defineProperty(e,p,g.get?g:{enumerable:!0,get:()=>a[p]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))a(p);new MutationObserver(p=>{for(const g of p)if(g.type==="childList")for(const y of g.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&a(y)}).observe(document,{childList:!0,subtree:!0});function i(p){const g={};return p.integrity&&(g.integrity=p.integrity),p.referrerPolicy&&(g.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?g.credentials="include":p.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function a(p){if(p.ep)return;p.ep=!0;const g=i(p);fetch(p.href,g)}})();function au(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var w_={exports:{}},yg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o2;function p4(){if(o2)return yg;o2=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(a,p,g){var y=null;if(g!==void 0&&(y=""+g),p.key!==void 0&&(y=""+p.key),"key"in p){g={};for(var c in p)c!=="key"&&(g[c]=p[c])}else g=p;return p=g.ref,{$$typeof:e,type:a,key:y,ref:p!==void 0?p:null,props:g}}return yg.Fragment=r,yg.jsx=i,yg.jsxs=i,yg}var s2;function m4(){return s2||(s2=1,w_.exports=p4()),w_.exports}var Ne=m4(),S_={exports:{}},Mr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l2;function g4(){if(l2)return Mr;l2=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),y=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),k=Symbol.iterator;function N(Te){return Te===null||typeof Te!="object"?null:(Te=k&&Te[k]||Te["@@iterator"],typeof Te=="function"?Te:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,H={};function W(Te,et,st){this.props=Te,this.context=et,this.refs=H,this.updater=st||j}W.prototype.isReactComponent={},W.prototype.setState=function(Te,et){if(typeof Te!="object"&&typeof Te!="function"&&Te!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Te,et,"setState")},W.prototype.forceUpdate=function(Te){this.updater.enqueueForceUpdate(this,Te,"forceUpdate")};function K(){}K.prototype=W.prototype;function ee(Te,et,st){this.props=Te,this.context=et,this.refs=H,this.updater=st||j}var ie=ee.prototype=new K;ie.constructor=ee,q(ie,W.prototype),ie.isPureReactComponent=!0;var ve=Array.isArray,ye={H:null,A:null,T:null,S:null,V:null},Pe=Object.prototype.hasOwnProperty;function Me(Te,et,st,yt,Rt,Zt){return st=Zt.ref,{$$typeof:e,type:Te,key:et,ref:st!==void 0?st:null,props:Zt}}function je(Te,et){return Me(Te.type,et,void 0,void 0,void 0,Te.props)}function ht(Te){return typeof Te=="object"&&Te!==null&&Te.$$typeof===e}function At(Te){var et={"=":"=0",":":"=2"};return"$"+Te.replace(/[=:]/g,function(st){return et[st]})}var ot=/\/+/g;function ft(Te,et){return typeof Te=="object"&&Te!==null&&Te.key!=null?At(""+Te.key):et.toString(36)}function rt(){}function It(Te){switch(Te.status){case"fulfilled":return Te.value;case"rejected":throw Te.reason;default:switch(typeof Te.status=="string"?Te.then(rt,rt):(Te.status="pending",Te.then(function(et){Te.status==="pending"&&(Te.status="fulfilled",Te.value=et)},function(et){Te.status==="pending"&&(Te.status="rejected",Te.reason=et)})),Te.status){case"fulfilled":return Te.value;case"rejected":throw Te.reason}}throw Te}function kt(Te,et,st,yt,Rt){var Zt=typeof Te;(Zt==="undefined"||Zt==="boolean")&&(Te=null);var Ft=!1;if(Te===null)Ft=!0;else switch(Zt){case"bigint":case"string":case"number":Ft=!0;break;case"object":switch(Te.$$typeof){case e:case r:Ft=!0;break;case M:return Ft=Te._init,kt(Ft(Te._payload),et,st,yt,Rt)}}if(Ft)return Rt=Rt(Te),Ft=yt===""?"."+ft(Te,0):yt,ve(Rt)?(st="",Ft!=null&&(st=Ft.replace(ot,"$&/")+"/"),kt(Rt,et,st,"",function(St){return St})):Rt!=null&&(ht(Rt)&&(Rt=je(Rt,st+(Rt.key==null||Te&&Te.key===Rt.key?"":(""+Rt.key).replace(ot,"$&/")+"/")+Ft)),et.push(Rt)),1;Ft=0;var ir=yt===""?".":yt+":";if(ve(Te))for(var Jt=0;Jt<Te.length;Jt++)yt=Te[Jt],Zt=ir+ft(yt,Jt),Ft+=kt(yt,et,st,Zt,Rt);else if(Jt=N(Te),typeof Jt=="function")for(Te=Jt.call(Te),Jt=0;!(yt=Te.next()).done;)yt=yt.value,Zt=ir+ft(yt,Jt++),Ft+=kt(yt,et,st,Zt,Rt);else if(Zt==="object"){if(typeof Te.then=="function")return kt(It(Te),et,st,yt,Rt);throw et=String(Te),Error("Objects are not valid as a React child (found: "+(et==="[object Object]"?"object with keys {"+Object.keys(Te).join(", ")+"}":et)+"). If you meant to render a collection of children, use an array instead.")}return Ft}function Ue(Te,et,st){if(Te==null)return Te;var yt=[],Rt=0;return kt(Te,yt,"","",function(Zt){return et.call(st,Zt,Rt++)}),yt}function ct(Te){if(Te._status===-1){var et=Te._result;et=et(),et.then(function(st){(Te._status===0||Te._status===-1)&&(Te._status=1,Te._result=st)},function(st){(Te._status===0||Te._status===-1)&&(Te._status=2,Te._result=st)}),Te._status===-1&&(Te._status=0,Te._result=et)}if(Te._status===1)return Te._result.default;throw Te._result}var nt=typeof reportError=="function"?reportError:function(Te){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var et=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Te=="object"&&Te!==null&&typeof Te.message=="string"?String(Te.message):String(Te),error:Te});if(!window.dispatchEvent(et))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Te);return}console.error(Te)};function Ct(){}return Mr.Children={map:Ue,forEach:function(Te,et,st){Ue(Te,function(){et.apply(this,arguments)},st)},count:function(Te){var et=0;return Ue(Te,function(){et++}),et},toArray:function(Te){return Ue(Te,function(et){return et})||[]},only:function(Te){if(!ht(Te))throw Error("React.Children.only expected to receive a single React element child.");return Te}},Mr.Component=W,Mr.Fragment=i,Mr.Profiler=p,Mr.PureComponent=ee,Mr.StrictMode=a,Mr.Suspense=C,Mr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ye,Mr.__COMPILER_RUNTIME={__proto__:null,c:function(Te){return ye.H.useMemoCache(Te)}},Mr.cache=function(Te){return function(){return Te.apply(null,arguments)}},Mr.cloneElement=function(Te,et,st){if(Te==null)throw Error("The argument must be a React element, but you passed "+Te+".");var yt=q({},Te.props),Rt=Te.key,Zt=void 0;if(et!=null)for(Ft in et.ref!==void 0&&(Zt=void 0),et.key!==void 0&&(Rt=""+et.key),et)!Pe.call(et,Ft)||Ft==="key"||Ft==="__self"||Ft==="__source"||Ft==="ref"&&et.ref===void 0||(yt[Ft]=et[Ft]);var Ft=arguments.length-2;if(Ft===1)yt.children=st;else if(1<Ft){for(var ir=Array(Ft),Jt=0;Jt<Ft;Jt++)ir[Jt]=arguments[Jt+2];yt.children=ir}return Me(Te.type,Rt,void 0,void 0,Zt,yt)},Mr.createContext=function(Te){return Te={$$typeof:y,_currentValue:Te,_currentValue2:Te,_threadCount:0,Provider:null,Consumer:null},Te.Provider=Te,Te.Consumer={$$typeof:g,_context:Te},Te},Mr.createElement=function(Te,et,st){var yt,Rt={},Zt=null;if(et!=null)for(yt in et.key!==void 0&&(Zt=""+et.key),et)Pe.call(et,yt)&&yt!=="key"&&yt!=="__self"&&yt!=="__source"&&(Rt[yt]=et[yt]);var Ft=arguments.length-2;if(Ft===1)Rt.children=st;else if(1<Ft){for(var ir=Array(Ft),Jt=0;Jt<Ft;Jt++)ir[Jt]=arguments[Jt+2];Rt.children=ir}if(Te&&Te.defaultProps)for(yt in Ft=Te.defaultProps,Ft)Rt[yt]===void 0&&(Rt[yt]=Ft[yt]);return Me(Te,Zt,void 0,void 0,null,Rt)},Mr.createRef=function(){return{current:null}},Mr.forwardRef=function(Te){return{$$typeof:c,render:Te}},Mr.isValidElement=ht,Mr.lazy=function(Te){return{$$typeof:M,_payload:{_status:-1,_result:Te},_init:ct}},Mr.memo=function(Te,et){return{$$typeof:E,type:Te,compare:et===void 0?null:et}},Mr.startTransition=function(Te){var et=ye.T,st={};ye.T=st;try{var yt=Te(),Rt=ye.S;Rt!==null&&Rt(st,yt),typeof yt=="object"&&yt!==null&&typeof yt.then=="function"&&yt.then(Ct,nt)}catch(Zt){nt(Zt)}finally{ye.T=et}},Mr.unstable_useCacheRefresh=function(){return ye.H.useCacheRefresh()},Mr.use=function(Te){return ye.H.use(Te)},Mr.useActionState=function(Te,et,st){return ye.H.useActionState(Te,et,st)},Mr.useCallback=function(Te,et){return ye.H.useCallback(Te,et)},Mr.useContext=function(Te){return ye.H.useContext(Te)},Mr.useDebugValue=function(){},Mr.useDeferredValue=function(Te,et){return ye.H.useDeferredValue(Te,et)},Mr.useEffect=function(Te,et,st){var yt=ye.H;if(typeof st=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return yt.useEffect(Te,et)},Mr.useId=function(){return ye.H.useId()},Mr.useImperativeHandle=function(Te,et,st){return ye.H.useImperativeHandle(Te,et,st)},Mr.useInsertionEffect=function(Te,et){return ye.H.useInsertionEffect(Te,et)},Mr.useLayoutEffect=function(Te,et){return ye.H.useLayoutEffect(Te,et)},Mr.useMemo=function(Te,et){return ye.H.useMemo(Te,et)},Mr.useOptimistic=function(Te,et){return ye.H.useOptimistic(Te,et)},Mr.useReducer=function(Te,et,st){return ye.H.useReducer(Te,et,st)},Mr.useRef=function(Te){return ye.H.useRef(Te)},Mr.useState=function(Te){return ye.H.useState(Te)},Mr.useSyncExternalStore=function(Te,et,st){return ye.H.useSyncExternalStore(Te,et,st)},Mr.useTransition=function(){return ye.H.useTransition()},Mr.version="19.1.1",Mr}var u2;function Qp(){return u2||(u2=1,S_.exports=g4()),S_.exports}var X=Qp();const Di=au(X),dx=d4({__proto__:null,default:Di},[X]);var P_={exports:{}},vg={},A_={exports:{}},C_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c2;function y4(){return c2||(c2=1,(function(e){function r(Ue,ct){var nt=Ue.length;Ue.push(ct);e:for(;0<nt;){var Ct=nt-1>>>1,Te=Ue[Ct];if(0<p(Te,ct))Ue[Ct]=ct,Ue[nt]=Te,nt=Ct;else break e}}function i(Ue){return Ue.length===0?null:Ue[0]}function a(Ue){if(Ue.length===0)return null;var ct=Ue[0],nt=Ue.pop();if(nt!==ct){Ue[0]=nt;e:for(var Ct=0,Te=Ue.length,et=Te>>>1;Ct<et;){var st=2*(Ct+1)-1,yt=Ue[st],Rt=st+1,Zt=Ue[Rt];if(0>p(yt,nt))Rt<Te&&0>p(Zt,yt)?(Ue[Ct]=Zt,Ue[Rt]=nt,Ct=Rt):(Ue[Ct]=yt,Ue[st]=nt,Ct=st);else if(Rt<Te&&0>p(Zt,nt))Ue[Ct]=Zt,Ue[Rt]=nt,Ct=Rt;else break e}}return ct}function p(Ue,ct){var nt=Ue.sortIndex-ct.sortIndex;return nt!==0?nt:Ue.id-ct.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var g=performance;e.unstable_now=function(){return g.now()}}else{var y=Date,c=y.now();e.unstable_now=function(){return y.now()-c}}var C=[],E=[],M=1,k=null,N=3,j=!1,q=!1,H=!1,W=!1,K=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;function ve(Ue){for(var ct=i(E);ct!==null;){if(ct.callback===null)a(E);else if(ct.startTime<=Ue)a(E),ct.sortIndex=ct.expirationTime,r(C,ct);else break;ct=i(E)}}function ye(Ue){if(H=!1,ve(Ue),!q)if(i(C)!==null)q=!0,Pe||(Pe=!0,ft());else{var ct=i(E);ct!==null&&kt(ye,ct.startTime-Ue)}}var Pe=!1,Me=-1,je=5,ht=-1;function At(){return W?!0:!(e.unstable_now()-ht<je)}function ot(){if(W=!1,Pe){var Ue=e.unstable_now();ht=Ue;var ct=!0;try{e:{q=!1,H&&(H=!1,ee(Me),Me=-1),j=!0;var nt=N;try{t:{for(ve(Ue),k=i(C);k!==null&&!(k.expirationTime>Ue&&At());){var Ct=k.callback;if(typeof Ct=="function"){k.callback=null,N=k.priorityLevel;var Te=Ct(k.expirationTime<=Ue);if(Ue=e.unstable_now(),typeof Te=="function"){k.callback=Te,ve(Ue),ct=!0;break t}k===i(C)&&a(C),ve(Ue)}else a(C);k=i(C)}if(k!==null)ct=!0;else{var et=i(E);et!==null&&kt(ye,et.startTime-Ue),ct=!1}}break e}finally{k=null,N=nt,j=!1}ct=void 0}}finally{ct?ft():Pe=!1}}}var ft;if(typeof ie=="function")ft=function(){ie(ot)};else if(typeof MessageChannel<"u"){var rt=new MessageChannel,It=rt.port2;rt.port1.onmessage=ot,ft=function(){It.postMessage(null)}}else ft=function(){K(ot,0)};function kt(Ue,ct){Me=K(function(){Ue(e.unstable_now())},ct)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ue){Ue.callback=null},e.unstable_forceFrameRate=function(Ue){0>Ue||125<Ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):je=0<Ue?Math.floor(1e3/Ue):5},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_next=function(Ue){switch(N){case 1:case 2:case 3:var ct=3;break;default:ct=N}var nt=N;N=ct;try{return Ue()}finally{N=nt}},e.unstable_requestPaint=function(){W=!0},e.unstable_runWithPriority=function(Ue,ct){switch(Ue){case 1:case 2:case 3:case 4:case 5:break;default:Ue=3}var nt=N;N=Ue;try{return ct()}finally{N=nt}},e.unstable_scheduleCallback=function(Ue,ct,nt){var Ct=e.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?Ct+nt:Ct):nt=Ct,Ue){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=nt+Te,Ue={id:M++,callback:ct,priorityLevel:Ue,startTime:nt,expirationTime:Te,sortIndex:-1},nt>Ct?(Ue.sortIndex=nt,r(E,Ue),i(C)===null&&Ue===i(E)&&(H?(ee(Me),Me=-1):H=!0,kt(ye,nt-Ct))):(Ue.sortIndex=Te,r(C,Ue),q||j||(q=!0,Pe||(Pe=!0,ft()))),Ue},e.unstable_shouldYield=At,e.unstable_wrapCallback=function(Ue){var ct=N;return function(){var nt=N;N=ct;try{return Ue.apply(this,arguments)}finally{N=nt}}}})(C_)),C_}var h2;function v4(){return h2||(h2=1,A_.exports=y4()),A_.exports}var T_={exports:{}},eo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f2;function _4(){if(f2)return eo;f2=1;var e=Qp();function r(C){var E="https://react.dev/errors/"+C;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var M=2;M<arguments.length;M++)E+="&args[]="+encodeURIComponent(arguments[M])}return"Minified React error #"+C+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},p=Symbol.for("react.portal");function g(C,E,M){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:k==null?null:""+k,children:C,containerInfo:E,implementation:M}}var y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(C,E){if(C==="font")return"";if(typeof E=="string")return E==="use-credentials"?E:""}return eo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,eo.createPortal=function(C,E){var M=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E||E.nodeType!==1&&E.nodeType!==9&&E.nodeType!==11)throw Error(r(299));return g(C,E,null,M)},eo.flushSync=function(C){var E=y.T,M=a.p;try{if(y.T=null,a.p=2,C)return C()}finally{y.T=E,a.p=M,a.d.f()}},eo.preconnect=function(C,E){typeof C=="string"&&(E?(E=E.crossOrigin,E=typeof E=="string"?E==="use-credentials"?E:"":void 0):E=null,a.d.C(C,E))},eo.prefetchDNS=function(C){typeof C=="string"&&a.d.D(C)},eo.preinit=function(C,E){if(typeof C=="string"&&E&&typeof E.as=="string"){var M=E.as,k=c(M,E.crossOrigin),N=typeof E.integrity=="string"?E.integrity:void 0,j=typeof E.fetchPriority=="string"?E.fetchPriority:void 0;M==="style"?a.d.S(C,typeof E.precedence=="string"?E.precedence:void 0,{crossOrigin:k,integrity:N,fetchPriority:j}):M==="script"&&a.d.X(C,{crossOrigin:k,integrity:N,fetchPriority:j,nonce:typeof E.nonce=="string"?E.nonce:void 0})}},eo.preinitModule=function(C,E){if(typeof C=="string")if(typeof E=="object"&&E!==null){if(E.as==null||E.as==="script"){var M=c(E.as,E.crossOrigin);a.d.M(C,{crossOrigin:M,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0})}}else E==null&&a.d.M(C)},eo.preload=function(C,E){if(typeof C=="string"&&typeof E=="object"&&E!==null&&typeof E.as=="string"){var M=E.as,k=c(M,E.crossOrigin);a.d.L(C,M,{crossOrigin:k,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0,type:typeof E.type=="string"?E.type:void 0,fetchPriority:typeof E.fetchPriority=="string"?E.fetchPriority:void 0,referrerPolicy:typeof E.referrerPolicy=="string"?E.referrerPolicy:void 0,imageSrcSet:typeof E.imageSrcSet=="string"?E.imageSrcSet:void 0,imageSizes:typeof E.imageSizes=="string"?E.imageSizes:void 0,media:typeof E.media=="string"?E.media:void 0})}},eo.preloadModule=function(C,E){if(typeof C=="string")if(E){var M=c(E.as,E.crossOrigin);a.d.m(C,{as:typeof E.as=="string"&&E.as!=="script"?E.as:void 0,crossOrigin:M,integrity:typeof E.integrity=="string"?E.integrity:void 0})}else a.d.m(C)},eo.requestFormReset=function(C){a.d.r(C)},eo.unstable_batchedUpdates=function(C,E){return C(E)},eo.useFormState=function(C,E,M){return y.H.useFormState(C,E,M)},eo.useFormStatus=function(){return y.H.useHostTransitionStatus()},eo.version="19.1.1",eo}var d2;function MC(){if(d2)return T_.exports;d2=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),T_.exports=_4(),T_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p2;function b4(){if(p2)return vg;p2=1;var e=v4(),r=Qp(),i=MC();function a(o){var h="https://react.dev/errors/"+o;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+o+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function p(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function g(o){var h=o,m=o;if(o.alternate)for(;h.return;)h=h.return;else{o=h;do h=o,(h.flags&4098)!==0&&(m=h.return),o=h.return;while(o)}return h.tag===3?m:null}function y(o){if(o.tag===13){var h=o.memoizedState;if(h===null&&(o=o.alternate,o!==null&&(h=o.memoizedState)),h!==null)return h.dehydrated}return null}function c(o){if(g(o)!==o)throw Error(a(188))}function C(o){var h=o.alternate;if(!h){if(h=g(o),h===null)throw Error(a(188));return h!==o?null:o}for(var m=o,x=h;;){var R=m.return;if(R===null)break;var z=R.alternate;if(z===null){if(x=R.return,x!==null){m=x;continue}break}if(R.child===z.child){for(z=R.child;z;){if(z===m)return c(R),o;if(z===x)return c(R),h;z=z.sibling}throw Error(a(188))}if(m.return!==x.return)m=R,x=z;else{for(var Y=!1,se=R.child;se;){if(se===m){Y=!0,m=R,x=z;break}if(se===x){Y=!0,x=R,m=z;break}se=se.sibling}if(!Y){for(se=z.child;se;){if(se===m){Y=!0,m=z,x=R;break}if(se===x){Y=!0,x=z,m=R;break}se=se.sibling}if(!Y)throw Error(a(189))}}if(m.alternate!==x)throw Error(a(190))}if(m.tag!==3)throw Error(a(188));return m.stateNode.current===m?o:h}function E(o){var h=o.tag;if(h===5||h===26||h===27||h===6)return o;for(o=o.child;o!==null;){if(h=E(o),h!==null)return h;o=o.sibling}return null}var M=Object.assign,k=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),K=Symbol.for("react.provider"),ee=Symbol.for("react.consumer"),ie=Symbol.for("react.context"),ve=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),Pe=Symbol.for("react.suspense_list"),Me=Symbol.for("react.memo"),je=Symbol.for("react.lazy"),ht=Symbol.for("react.activity"),At=Symbol.for("react.memo_cache_sentinel"),ot=Symbol.iterator;function ft(o){return o===null||typeof o!="object"?null:(o=ot&&o[ot]||o["@@iterator"],typeof o=="function"?o:null)}var rt=Symbol.for("react.client.reference");function It(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===rt?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case q:return"Fragment";case W:return"Profiler";case H:return"StrictMode";case ye:return"Suspense";case Pe:return"SuspenseList";case ht:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case j:return"Portal";case ie:return(o.displayName||"Context")+".Provider";case ee:return(o._context.displayName||"Context")+".Consumer";case ve:var h=o.render;return o=o.displayName,o||(o=h.displayName||h.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Me:return h=o.displayName||null,h!==null?h:It(o.type)||"Memo";case je:h=o._payload,o=o._init;try{return It(o(h))}catch{}}return null}var kt=Array.isArray,Ue=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt={pending:!1,data:null,method:null,action:null},Ct=[],Te=-1;function et(o){return{current:o}}function st(o){0>Te||(o.current=Ct[Te],Ct[Te]=null,Te--)}function yt(o,h){Te++,Ct[Te]=o.current,o.current=h}var Rt=et(null),Zt=et(null),Ft=et(null),ir=et(null);function Jt(o,h){switch(yt(Ft,h),yt(Zt,o),yt(Rt,null),h.nodeType){case 9:case 11:o=(o=h.documentElement)&&(o=o.namespaceURI)?Zc(o):0;break;default:if(o=h.tagName,h=h.namespaceURI)h=Zc(h),o=Jh(h,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}st(Rt),yt(Rt,o)}function St(){st(Rt),st(Zt),st(Ft)}function Gt(o){o.memoizedState!==null&&yt(ir,o);var h=Rt.current,m=Jh(h,o.type);h!==m&&(yt(Zt,o),yt(Rt,m))}function Nt(o){Zt.current===o&&(st(Rt),st(Zt)),ir.current===o&&(st(ir),$._currentValue=nt)}var He=Object.prototype.hasOwnProperty,Ht=e.unstable_scheduleCallback,Lt=e.unstable_cancelCallback,wr=e.unstable_shouldYield,Dr=e.unstable_requestPaint,zr=e.unstable_now,Bn=e.unstable_getCurrentPriorityLevel,Kn=e.unstable_ImmediatePriority,qi=e.unstable_UserBlockingPriority,bi=e.unstable_NormalPriority,Ga=e.unstable_LowPriority,Ea=e.unstable_IdlePriority,To=e.log,no=e.unstable_setDisableYieldValue,fa=null,An=null;function Gi(o){if(typeof To=="function"&&no(o),An&&typeof An.setStrictMode=="function")try{An.setStrictMode(fa,o)}catch{}}var Re=Math.clz32?Math.clz32:le,re=Math.log,ne=Math.LN2;function le(o){return o>>>=0,o===0?32:31-(re(o)/ne|0)|0}var _e=256,Se=4194304;function De(o){var h=o&42;if(h!==0)return h;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function qe(o,h,m){var x=o.pendingLanes;if(x===0)return 0;var R=0,z=o.suspendedLanes,Y=o.pingedLanes;o=o.warmLanes;var se=x&134217727;return se!==0?(x=se&~z,x!==0?R=De(x):(Y&=se,Y!==0?R=De(Y):m||(m=se&~o,m!==0&&(R=De(m))))):(se=x&~z,se!==0?R=De(se):Y!==0?R=De(Y):m||(m=x&~o,m!==0&&(R=De(m)))),R===0?0:h!==0&&h!==R&&(h&z)===0&&(z=R&-R,m=h&-h,z>=m||z===32&&(m&4194048)!==0)?h:R}function Oe(o,h){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&h)===0}function Je(o,h){switch(o){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gt(){var o=_e;return _e<<=1,(_e&4194048)===0&&(_e=256),o}function at(){var o=Se;return Se<<=1,(Se&62914560)===0&&(Se=4194304),o}function Ot(o){for(var h=[],m=0;31>m;m++)h.push(o);return h}function ke(o,h){o.pendingLanes|=h,h!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function ar(o,h,m,x,R,z){var Y=o.pendingLanes;o.pendingLanes=m,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=m,o.entangledLanes&=m,o.errorRecoveryDisabledLanes&=m,o.shellSuspendCounter=0;var se=o.entanglements,Ae=o.expirationTimes,We=o.hiddenUpdates;for(m=Y&~m;0<m;){var ut=31-Re(m),mt=1<<ut;se[ut]=0,Ae[ut]=-1;var Ke=We[ut];if(Ke!==null)for(We[ut]=null,ut=0;ut<Ke.length;ut++){var Qe=Ke[ut];Qe!==null&&(Qe.lane&=-536870913)}m&=~mt}x!==0&&br(o,x,0),z!==0&&R===0&&o.tag!==0&&(o.suspendedLanes|=z&~(Y&~h))}function br(o,h,m){o.pendingLanes|=h,o.suspendedLanes&=~h;var x=31-Re(h);o.entangledLanes|=h,o.entanglements[x]=o.entanglements[x]|1073741824|m&4194090}function $t(o,h){var m=o.entangledLanes|=h;for(o=o.entanglements;m;){var x=31-Re(m),R=1<<x;R&h|o[x]&h&&(o[x]|=h),m&=~R}}function or(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Ur(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Yn(){var o=ct.p;return o!==0?o:(o=window.event,o===void 0?32:Et(o.type))}function ri(o,h){var m=ct.p;try{return ct.p=o,h()}finally{ct.p=m}}var Kr=Math.random().toString(36).slice(2),tr="__reactFiber$"+Kr,sr="__reactProps$"+Kr,pn="__reactContainer$"+Kr,vt="__reactEvents$"+Kr,Ii="__reactListeners$"+Kr,Cn="__reactHandles$"+Kr,Yo="__reactResources$"+Kr,Eo="__reactMarker$"+Kr;function Mt(o){delete o[tr],delete o[sr],delete o[vt],delete o[Ii],delete o[Cn]}function mr(o){var h=o[tr];if(h)return h;for(var m=o.parentNode;m;){if(h=m[pn]||m[tr]){if(m=h.alternate,h.child!==null||m!==null&&m.child!==null)for(o=dg(o);o!==null;){if(m=o[tr])return m;o=dg(o)}return h}o=m,m=o.parentNode}return null}function cr(o){if(o=o[tr]||o[pn]){var h=o.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return o}return null}function Fn(o){var h=o.tag;if(h===5||h===26||h===27||h===6)return o.stateNode;throw Error(a(33))}function Wa(o){var h=o[Yo];return h||(h=o[Yo]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function mn(o){o[Eo]=!0}var gr=new Set,oc={};function da(o,h){Qo(o,h),Qo(o+"Capture",h)}function Qo(o,h){for(oc[o]=h,o=0;o<h.length;o++)gr.add(h[o])}var Mo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cl={},Tn={};function ph(o){return He.call(Tn,o)?!0:He.call(cl,o)?!1:Mo.test(o)?Tn[o]=!0:(cl[o]=!0,!1)}function xi(o,h,m){if(ph(h))if(m===null)o.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":o.removeAttribute(h);return;case"boolean":var x=h.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){o.removeAttribute(h);return}}o.setAttribute(h,""+m)}}function $r(o,h,m){if(m===null)o.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttribute(h,""+m)}}function Ro(o,h,m,x){if(x===null)o.removeAttribute(m);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(m);return}o.setAttributeNS(h,m,""+x)}}var hl,mh;function Ma(o){if(hl===void 0)try{throw Error()}catch(m){var h=m.stack.trim().match(/\n( *(at )?)/);hl=h&&h[1]||"",mh=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hl+o+mh}var Do=!1;function sc(o,h){if(!o||Do)return"";Do=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(h){var mt=function(){throw Error()};if(Object.defineProperty(mt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(mt,[])}catch(Qe){var Ke=Qe}Reflect.construct(o,[],mt)}else{try{mt.call()}catch(Qe){Ke=Qe}o.call(mt.prototype)}}else{try{throw Error()}catch(Qe){Ke=Qe}(mt=o())&&typeof mt.catch=="function"&&mt.catch(function(){})}}catch(Qe){if(Qe&&Ke&&typeof Qe.stack=="string")return[Qe.stack,Ke.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var z=x.DetermineComponentFrameRoot(),Y=z[0],se=z[1];if(Y&&se){var Ae=Y.split(`
`),We=se.split(`
`);for(R=x=0;x<Ae.length&&!Ae[x].includes("DetermineComponentFrameRoot");)x++;for(;R<We.length&&!We[R].includes("DetermineComponentFrameRoot");)R++;if(x===Ae.length||R===We.length)for(x=Ae.length-1,R=We.length-1;1<=x&&0<=R&&Ae[x]!==We[R];)R--;for(;1<=x&&0<=R;x--,R--)if(Ae[x]!==We[R]){if(x!==1||R!==1)do if(x--,R--,0>R||Ae[x]!==We[R]){var ut=`
`+Ae[x].replace(" at new "," at ");return o.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",o.displayName)),ut}while(1<=x&&0<=R);break}}}finally{Do=!1,Error.prepareStackTrace=m}return(m=o?o.displayName||o.name:"")?Ma(m):""}function Vd(o){switch(o.tag){case 26:case 27:case 5:return Ma(o.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 15:return sc(o.type,!1);case 11:return sc(o.type.render,!1);case 1:return sc(o.type,!0);case 31:return Ma("Activity");default:return""}}function yf(o){try{var h="";do h+=Vd(o),o=o.return;while(o);return h}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function wi(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function vf(o){var h=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function cm(o){var h=vf(o)?"checked":"value",m=Object.getOwnPropertyDescriptor(o.constructor.prototype,h),x=""+o[h];if(!o.hasOwnProperty(h)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var R=m.get,z=m.set;return Object.defineProperty(o,h,{configurable:!0,get:function(){return R.call(this)},set:function(Y){x=""+Y,z.call(this,Y)}}),Object.defineProperty(o,h,{enumerable:m.enumerable}),{getValue:function(){return x},setValue:function(Y){x=""+Y},stopTracking:function(){o._valueTracker=null,delete o[h]}}}}function gh(o){o._valueTracker||(o._valueTracker=cm(o))}function Hd(o){if(!o)return!1;var h=o._valueTracker;if(!h)return!0;var m=h.getValue(),x="";return o&&(x=vf(o)?o.checked?"true":"false":o.value),o=x,o!==m?(h.setValue(o),!0):!1}function hu(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var fu=/[\n"\\]/g;function pa(o){return o.replace(fu,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function lc(o,h,m,x,R,z,Y,se){o.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?o.type=Y:o.removeAttribute("type"),h!=null?Y==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+wi(h)):o.value!==""+wi(h)&&(o.value=""+wi(h)):Y!=="submit"&&Y!=="reset"||o.removeAttribute("value"),h!=null?uc(o,Y,wi(h)):m!=null?uc(o,Y,wi(m)):x!=null&&o.removeAttribute("value"),R==null&&z!=null&&(o.defaultChecked=!!z),R!=null&&(o.checked=R&&typeof R!="function"&&typeof R!="symbol"),se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"?o.name=""+wi(se):o.removeAttribute("name")}function fl(o,h,m,x,R,z,Y,se){if(z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(o.type=z),h!=null||m!=null){if(!(z!=="submit"&&z!=="reset"||h!=null))return;m=m!=null?""+wi(m):"",h=h!=null?""+wi(h):m,se||h===o.value||(o.value=h),o.defaultValue=h}x=x??R,x=typeof x!="function"&&typeof x!="symbol"&&!!x,o.checked=se?o.checked:!!x,o.defaultChecked=!!x,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(o.name=Y)}function uc(o,h,m){h==="number"&&hu(o.ownerDocument)===o||o.defaultValue===""+m||(o.defaultValue=""+m)}function Is(o,h,m,x){if(o=o.options,h){h={};for(var R=0;R<m.length;R++)h["$"+m[R]]=!0;for(m=0;m<o.length;m++)R=h.hasOwnProperty("$"+o[m].value),o[m].selected!==R&&(o[m].selected=R),R&&x&&(o[m].defaultSelected=!0)}else{for(m=""+wi(m),h=null,R=0;R<o.length;R++){if(o[R].value===m){o[R].selected=!0,x&&(o[R].defaultSelected=!0);return}h!==null||o[R].disabled||(h=o[R])}h!==null&&(h.selected=!0)}}function qd(o,h,m){if(h!=null&&(h=""+wi(h),h!==o.value&&(o.value=h),m==null)){o.defaultValue!==h&&(o.defaultValue=h);return}o.defaultValue=m!=null?""+wi(m):""}function dl(o,h,m,x){if(h==null){if(x!=null){if(m!=null)throw Error(a(92));if(kt(x)){if(1<x.length)throw Error(a(93));x=x[0]}m=x}m==null&&(m=""),h=m}m=wi(h),o.defaultValue=m,x=o.textContent,x===m&&x!==""&&x!==null&&(o.value=x)}function Io(o,h){if(h){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=h;return}}o.textContent=h}var io=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xr(o,h,m){var x=h.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?x?o.setProperty(h,""):h==="float"?o.cssFloat="":o[h]="":x?o.setProperty(h,m):typeof m!="number"||m===0||io.has(h)?h==="float"?o.cssFloat=m:o[h]=(""+m).trim():o[h]=m+"px"}function Os(o,h,m){if(h!=null&&typeof h!="object")throw Error(a(62));if(o=o.style,m!=null){for(var x in m)!m.hasOwnProperty(x)||h!=null&&h.hasOwnProperty(x)||(x.indexOf("--")===0?o.setProperty(x,""):x==="float"?o.cssFloat="":o[x]="");for(var R in h)x=h[R],h.hasOwnProperty(R)&&m[R]!==x&&xr(o,R,x)}else for(var z in h)h.hasOwnProperty(z)&&xr(o,z,h[z])}function Oo(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _r(o){return pl.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var es=null;function du(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var ts=null,Qn=null;function ni(o){var h=cr(o);if(h&&(o=h.stateNode)){var m=o[sr]||null;e:switch(o=h.stateNode,h.type){case"input":if(lc(o,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),h=m.name,m.type==="radio"&&h!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+pa(""+h)+'"][type="radio"]'),h=0;h<m.length;h++){var x=m[h];if(x!==o&&x.form===o.form){var R=x[sr]||null;if(!R)throw Error(a(90));lc(x,R.value,R.defaultValue,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name)}}for(h=0;h<m.length;h++)x=m[h],x.form===o.form&&Hd(x)}break e;case"textarea":qd(o,m.value,m.defaultValue);break e;case"select":h=m.value,h!=null&&Is(o,!!m.multiple,h,!1)}}}var Si=!1;function Un(o,h,m){if(Si)return o(h,m);Si=!0;try{var x=o(h);return x}finally{if(Si=!1,(ts!==null||Qn!==null)&&(od(),ts&&(h=ts,o=Qn,Qn=ts=null,ni(h),o)))for(h=0;h<o.length;h++)ni(o[h])}}function Br(o,h){var m=o.stateNode;if(m===null)return null;var x=m[sr]||null;if(x===null)return null;m=x[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(o=o.type,x=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!x;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(a(231,h,typeof m));return m}var ko=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pi=!1;if(ko)try{var Ai={};Object.defineProperty(Ai,"passive",{get:function(){Pi=!0}}),window.addEventListener("test",Ai,Ai),window.removeEventListener("test",Ai,Ai)}catch{Pi=!1}var En=null,Yr=null,Lo=null;function er(){if(Lo)return Lo;var o,h=Yr,m=h.length,x,R="value"in En?En.value:En.textContent,z=R.length;for(o=0;o<m&&h[o]===R[o];o++);var Y=m-o;for(x=1;x<=Y&&h[m-x]===R[z-x];x++);return Lo=R.slice(o,1<x?1-x:void 0)}function lr(o){var h=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&h===13&&(o=13)):o=h,o===10&&(o=13),32<=o||o===13?o:0}function Za(){return!0}function Tr(){return!1}function un(o){function h(m,x,R,z,Y){this._reactName=m,this._targetInst=R,this.type=x,this.nativeEvent=z,this.target=Y,this.currentTarget=null;for(var se in o)o.hasOwnProperty(se)&&(m=o[se],this[se]=m?m(z):z[se]);return this.isDefaultPrevented=(z.defaultPrevented!=null?z.defaultPrevented:z.returnValue===!1)?Za:Tr,this.isPropagationStopped=Tr,this}return M(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Za)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Za)},persist:function(){},isPersistent:Za}),h}var Oi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ra=un(Oi),ks=M({},Oi,{view:0,detail:0}),_f=un(ks),Ls,ml,zs,gl=M({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_l,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==zs&&(zs&&o.type==="mousemove"?(Ls=o.screenX-zs.screenX,ml=o.screenY-zs.screenY):ml=Ls=0,zs=o),Ls)},movementY:function(o){return"movementY"in o?o.movementY:ml}}),cc=un(gl),ao=M({},gl,{dataTransfer:0}),fi=un(ao),pu=M({},ks,{relatedTarget:0}),yl=un(pu),vl=M({},Oi,{animationName:0,elapsedTime:0,pseudoElement:0}),On=un(vl),Gd=M({},Oi,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),hc=un(Gd),bf=M({},Oi,{data:0}),Wd=un(bf),mu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ci={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zo(o){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(o):(o=fc[o])?!!h[o]:!1}function _l(){return zo}var dc=M({},ks,{key:function(o){if(o.key){var h=mu[o.key]||o.key;if(h!=="Unidentified")return h}return o.type==="keypress"?(o=lr(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Ci[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_l,charCode:function(o){return o.type==="keypress"?lr(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?lr(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),pc=un(dc),ki=M({},gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xf=un(ki),yh=M({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_l}),hm=un(yh),wf=M({},Oi,{propertyName:0,elapsedTime:0,pseudoElement:0}),fm=un(wf),dm=M({},gl,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),vh=un(dm),Sf=M({},Oi,{newState:0,oldState:0}),bl=un(Sf),Pf=[9,13,27,32],gu=ko&&"CompositionEvent"in window,Wi=null;ko&&"documentMode"in document&&(Wi=document.documentMode);var pm=ko&&"TextEvent"in window&&!Wi,mc=ko&&(!gu||Wi&&8<Wi&&11>=Wi),yu=" ",vu=!1;function Zd(o,h){switch(o){case"keyup":return Pf.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gc(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var _u=!1;function xl(o,h){switch(o){case"compositionend":return gc(h);case"keypress":return h.which!==32?null:(vu=!0,yu);case"textInput":return o=h.data,o===yu&&vu?null:o;default:return null}}function Xd(o,h){if(_u)return o==="compositionend"||!gu&&Zd(o,h)?(o=er(),Lo=Yr=En=null,_u=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return mc&&h.locale!=="ko"?null:h.data;default:return null}}var Af={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kd(o){var h=o&&o.nodeName&&o.nodeName.toLowerCase();return h==="input"?!!Af[o.type]:h==="textarea"}function Cf(o,h,m,x){ts?Qn?Qn.push(x):Qn=[x]:ts=x,h=xp(h,"onChange"),0<h.length&&(m=new Ra("onChange","change",null,m,x),o.push({event:m,listeners:h}))}var wl=null,bu=null;function _h(o){ig(o,0)}function yc(o){var h=Fn(o);if(Hd(h))return o}function Tf(o,h){if(o==="change")return h}var Ns=!1;if(ko){var vc;if(ko){var _c="oninput"in document;if(!_c){var xu=document.createElement("div");xu.setAttribute("oninput","return;"),_c=typeof xu.oninput=="function"}vc=_c}else vc=!1;Ns=vc&&(!document.documentMode||9<document.documentMode)}function Yd(){wl&&(wl.detachEvent("onpropertychange",wu),bu=wl=null)}function wu(o){if(o.propertyName==="value"&&yc(bu)){var h=[];Cf(h,bu,o,du(o)),Un(_h,h)}}function Qd(o,h,m){o==="focusin"?(Yd(),wl=h,bu=m,wl.attachEvent("onpropertychange",wu)):o==="focusout"&&Yd()}function mm(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return yc(bu)}function Jd(o,h){if(o==="click")return yc(h)}function ep(o,h){if(o==="input"||o==="change")return yc(h)}function Ef(o,h){return o===h&&(o!==0||1/o===1/h)||o!==o&&h!==h}var Zi=typeof Object.is=="function"?Object.is:Ef;function Su(o,h){if(Zi(o,h))return!0;if(typeof o!="object"||o===null||typeof h!="object"||h===null)return!1;var m=Object.keys(o),x=Object.keys(h);if(m.length!==x.length)return!1;for(x=0;x<m.length;x++){var R=m[x];if(!He.call(h,R)||!Zi(o[R],h[R]))return!1}return!0}function bc(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function No(o,h){var m=bc(o);o=0;for(var x;m;){if(m.nodeType===3){if(x=o+m.textContent.length,o<=h&&x>=h)return{node:m,offset:h-o};o=x}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=bc(m)}}function Ir(o,h){return o&&h?o===h?!0:o&&o.nodeType===3?!1:h&&h.nodeType===3?Ir(o,h.parentNode):"contains"in o?o.contains(h):o.compareDocumentPosition?!!(o.compareDocumentPosition(h)&16):!1:!1}function bh(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var h=hu(o.document);h instanceof o.HTMLIFrameElement;){try{var m=typeof h.contentWindow.location.href=="string"}catch{m=!1}if(m)o=h.contentWindow;else break;h=hu(o.document)}return h}function xc(o){var h=o&&o.nodeName&&o.nodeName.toLowerCase();return h&&(h==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||h==="textarea"||o.contentEditable==="true")}var tp=ko&&"documentMode"in document&&11>=document.documentMode,js=null,rs=null,Sl=null,Mf=!1;function rp(o,h,m){var x=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Mf||js==null||js!==hu(x)||(x=js,"selectionStart"in x&&xc(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Sl&&Su(Sl,x)||(Sl=x,x=xp(rs,"onSelect"),0<x.length&&(h=new Ra("onSelect","select",null,h,m),o.push({event:h,listeners:x}),h.target=js)))}function Pl(o,h){var m={};return m[o.toLowerCase()]=h.toLowerCase(),m["Webkit"+o]="webkit"+h,m["Moz"+o]="moz"+h,m}var Pu={animationend:Pl("Animation","AnimationEnd"),animationiteration:Pl("Animation","AnimationIteration"),animationstart:Pl("Animation","AnimationStart"),transitionrun:Pl("Transition","TransitionRun"),transitionstart:Pl("Transition","TransitionStart"),transitioncancel:Pl("Transition","TransitionCancel"),transitionend:Pl("Transition","TransitionEnd")},xh={},np={};ko&&(np=document.createElement("div").style,"AnimationEvent"in window||(delete Pu.animationend.animation,delete Pu.animationiteration.animation,delete Pu.animationstart.animation),"TransitionEvent"in window||delete Pu.transitionend.transition);function Bs(o){if(xh[o])return xh[o];if(!Pu[o])return o;var h=Pu[o],m;for(m in h)if(h.hasOwnProperty(m)&&m in np)return xh[o]=h[m];return o}var wc=Bs("animationend"),Sc=Bs("animationiteration"),Pc=Bs("animationstart"),Rf=Bs("transitionrun"),Al=Bs("transitionstart"),Ac=Bs("transitioncancel"),Cl=Bs("transitionend"),Da=new Map,wh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wh.push("scrollEnd");function Xa(o,h){Da.set(o,h),da(h,[o])}var Sh=new WeakMap;function di(o,h){if(typeof o=="object"&&o!==null){var m=Sh.get(o);return m!==void 0?m:(h={value:o,source:h,stack:yf(h)},Sh.set(o,h),h)}return{value:o,source:h,stack:yf(h)}}var Xi=[],ns=0,Tl=0;function El(){for(var o=ns,h=Tl=ns=0;h<o;){var m=Xi[h];Xi[h++]=null;var x=Xi[h];Xi[h++]=null;var R=Xi[h];Xi[h++]=null;var z=Xi[h];if(Xi[h++]=null,x!==null&&R!==null){var Y=x.pending;Y===null?R.next=R:(R.next=Y.next,Y.next=R),x.pending=R}z!==0&&Df(m,R,z)}}function Cc(o,h,m,x){Xi[ns++]=o,Xi[ns++]=h,Xi[ns++]=m,Xi[ns++]=x,Tl|=x,o.lanes|=x,o=o.alternate,o!==null&&(o.lanes|=x)}function Fs(o,h,m,x){return Cc(o,h,m,x),Au(o)}function Ia(o,h){return Cc(o,null,null,h),Au(o)}function Df(o,h,m){o.lanes|=m;var x=o.alternate;x!==null&&(x.lanes|=m);for(var R=!1,z=o.return;z!==null;)z.childLanes|=m,x=z.alternate,x!==null&&(x.childLanes|=m),z.tag===22&&(o=z.stateNode,o===null||o._visibility&1||(R=!0)),o=z,z=z.return;return o.tag===3?(z=o.stateNode,R&&h!==null&&(R=31-Re(m),o=z.hiddenUpdates,x=o[R],x===null?o[R]=[h]:x.push(h),h.lane=m|536870912),z):null}function Au(o){if(50<ad)throw ad=0,Fm=null,Error(a(185));for(var h=o.return;h!==null;)o=h,h=o.return;return o.tag===3?o.stateNode:null}var yr={};function Tc(o,h,m,x){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oa(o,h,m,x){return new Tc(o,h,m,x)}function Ph(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Li(o,h){var m=o.alternate;return m===null?(m=Oa(o.tag,h,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=h,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&65011712,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,h=o.dependencies,m.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m.refCleanup=o.refCleanup,m}function If(o,h){o.flags&=65011714;var m=o.alternate;return m===null?(o.childLanes=0,o.lanes=h,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=m.childLanes,o.lanes=m.lanes,o.child=m.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=m.memoizedProps,o.memoizedState=m.memoizedState,o.updateQueue=m.updateQueue,o.type=m.type,h=m.dependencies,o.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),o}function Ah(o,h,m,x,R,z){var Y=0;if(x=o,typeof o=="function")Ph(o)&&(Y=1);else if(typeof o=="string")Y=n(o,m,Rt.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case ht:return o=Oa(31,m,h,R),o.elementType=ht,o.lanes=z,o;case q:return Us(m.children,R,z,h);case H:Y=8,R|=24;break;case W:return o=Oa(12,m,h,R|2),o.elementType=W,o.lanes=z,o;case ye:return o=Oa(13,m,h,R),o.elementType=ye,o.lanes=z,o;case Pe:return o=Oa(19,m,h,R),o.elementType=Pe,o.lanes=z,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case K:case ie:Y=10;break e;case ee:Y=9;break e;case ve:Y=11;break e;case Me:Y=14;break e;case je:Y=16,x=null;break e}Y=29,m=Error(a(130,o===null?"null":typeof o,"")),x=null}return h=Oa(Y,m,h,R),h.elementType=o,h.type=x,h.lanes=z,h}function Us(o,h,m,x){return o=Oa(7,o,x,h),o.lanes=m,o}function Of(o,h,m){return o=Oa(6,o,null,h),o.lanes=m,o}function Ec(o,h,m){return h=Oa(4,o.children!==null?o.children:[],o.key,h),h.lanes=m,h.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},h}var is=[],jo=0,$s=null,Cu=0,ka=[],zi=0,oo=null,La=1,Ki="";function so(o,h){is[jo++]=Cu,is[jo++]=$s,$s=o,Cu=h}function Ch(o,h,m){ka[zi++]=La,ka[zi++]=Ki,ka[zi++]=oo,oo=o;var x=La;o=Ki;var R=32-Re(x)-1;x&=~(1<<R),m+=1;var z=32-Re(h)+R;if(30<z){var Y=R-R%5;z=(x&(1<<Y)-1).toString(32),x>>=Y,R-=Y,La=1<<32-Re(h)+R|m<<R|x,Ki=z+o}else La=1<<z|m<<R|x,Ki=o}function as(o){o.return!==null&&(so(o,1),Ch(o,1,0))}function Mc(o){for(;o===$s;)$s=is[--jo],is[jo]=null,Cu=is[--jo],is[jo]=null;for(;o===oo;)oo=ka[--zi],ka[zi]=null,Ki=ka[--zi],ka[zi]=null,La=ka[--zi],ka[zi]=null}var ii=null,gn=null,jr=!1,Vs=null,lo=!1,Tu=Error(a(519));function os(o){var h=Error(a(418,""));throw Hs(di(h,o)),Tu}function kf(o){var h=o.stateNode,m=o.type,x=o.memoizedProps;switch(h[tr]=o,h[sr]=x,m){case"dialog":kr("cancel",h),kr("close",h);break;case"iframe":case"object":case"embed":kr("load",h);break;case"video":case"audio":for(m=0;m<Qh.length;m++)kr(Qh[m],h);break;case"source":kr("error",h);break;case"img":case"image":case"link":kr("error",h),kr("load",h);break;case"details":kr("toggle",h);break;case"input":kr("invalid",h),fl(h,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0),gh(h);break;case"select":kr("invalid",h);break;case"textarea":kr("invalid",h),dl(h,x.value,x.defaultValue,x.children),gh(h)}m=x.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||h.textContent===""+m||x.suppressHydrationWarning===!0||ug(h.textContent,m)?(x.popover!=null&&(kr("beforetoggle",h),kr("toggle",h)),x.onScroll!=null&&kr("scroll",h),x.onScrollEnd!=null&&kr("scrollend",h),x.onClick!=null&&(h.onclick=dd),h=!0):h=!1,h||os(o)}function Th(o){for(ii=o.return;ii;)switch(ii.tag){case 5:case 13:lo=!1;return;case 27:case 3:lo=!0;return;default:ii=ii.return}}function Gr(o){if(o!==ii)return!1;if(!jr)return Th(o),jr=!0,!1;var h=o.tag,m;if((m=h!==3&&h!==27)&&((m=h===5)&&(m=o.type,m=!(m!=="form"&&m!=="button")||Xl(o.type,o.memoizedProps)),m=!m),m&&gn&&os(o),Th(o),h===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(a(317));e:{for(o=o.nextSibling,h=0;o;){if(o.nodeType===8)if(m=o.data,m==="/$"){if(h===0){gn=Wo(o.nextSibling);break e}h--}else m!=="$"&&m!=="$!"&&m!=="$?"||h++;o=o.nextSibling}gn=null}}else h===27?(h=gn,Kl(o.type)?(o=ef,ef=null,gn=o):gn=h):gn=ii?Wo(o.stateNode.nextSibling):null;return!0}function uo(){gn=ii=null,jr=!1}function ma(){var o=Vs;return o!==null&&(Na===null?Na=o:Na.push.apply(Na,o),Vs=null),o}function Hs(o){Vs===null?Vs=[o]:Vs.push(o)}var Eu=et(null),ss=null,Yi=null;function ga(o,h,m){yt(Eu,h._currentValue),h._currentValue=m}function za(o){o._currentValue=Eu.current,st(Eu)}function Rc(o,h,m){for(;o!==null;){var x=o.alternate;if((o.childLanes&h)!==h?(o.childLanes|=h,x!==null&&(x.childLanes|=h)):x!==null&&(x.childLanes&h)!==h&&(x.childLanes|=h),o===m)break;o=o.return}}function Eh(o,h,m,x){var R=o.child;for(R!==null&&(R.return=o);R!==null;){var z=R.dependencies;if(z!==null){var Y=R.child;z=z.firstContext;e:for(;z!==null;){var se=z;z=R;for(var Ae=0;Ae<h.length;Ae++)if(se.context===h[Ae]){z.lanes|=m,se=z.alternate,se!==null&&(se.lanes|=m),Rc(z.return,m,o),x||(Y=null);break e}z=se.next}}else if(R.tag===18){if(Y=R.return,Y===null)throw Error(a(341));Y.lanes|=m,z=Y.alternate,z!==null&&(z.lanes|=m),Rc(Y,m,o),Y=null}else Y=R.child;if(Y!==null)Y.return=R;else for(Y=R;Y!==null;){if(Y===o){Y=null;break}if(R=Y.sibling,R!==null){R.return=Y.return,Y=R;break}Y=Y.return}R=Y}}function Mu(o,h,m,x){o=null;for(var R=h,z=!1;R!==null;){if(!z){if((R.flags&524288)!==0)z=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var Y=R.alternate;if(Y===null)throw Error(a(387));if(Y=Y.memoizedProps,Y!==null){var se=R.type;Zi(R.pendingProps.value,Y.value)||(o!==null?o.push(se):o=[se])}}else if(R===ir.current){if(Y=R.alternate,Y===null)throw Error(a(387));Y.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(o!==null?o.push($):o=[$])}R=R.return}o!==null&&Eh(h,o,m,x),h.flags|=262144}function Dc(o){for(o=o.firstContext;o!==null;){if(!Zi(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function qs(o){ss=o,Yi=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function $n(o){return Qi(ss,o)}function ya(o,h){return ss===null&&qs(o),Qi(o,h)}function Qi(o,h){var m=h._currentValue;if(h={context:h,memoizedValue:m,next:null},Yi===null){if(o===null)throw Error(a(308));Yi=h,o.dependencies={lanes:0,firstContext:h},o.flags|=524288}else Yi=Yi.next=h;return m}var Ru=typeof AbortController<"u"?AbortController:function(){var o=[],h=this.signal={aborted:!1,addEventListener:function(m,x){o.push(x)}};this.abort=function(){h.aborted=!0,o.forEach(function(m){return m()})}},Lf=e.unstable_scheduleCallback,ip=e.unstable_NormalPriority,Jn={$$typeof:ie,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gs(){return{controller:new Ru,data:new Map,refCount:0}}function Ml(o){o.refCount--,o.refCount===0&&Lf(ip,function(){o.controller.abort()})}var Ws=null,Du=0,ls=0,Ti=null;function Ji(o,h){if(Ws===null){var m=Ws=[];Du=0,ls=cd(),Ti={status:"pending",value:void 0,then:function(x){m.push(x)}}}return Du++,h.then(zf,zf),h}function zf(){if(--Du===0&&Ws!==null){Ti!==null&&(Ti.status="fulfilled");var o=Ws;Ws=null,ls=0,Ti=null;for(var h=0;h<o.length;h++)(0,o[h])()}}function co(o,h){var m=[],x={status:"pending",value:null,reason:null,then:function(R){m.push(R)}};return o.then(function(){x.status="fulfilled",x.value=h;for(var R=0;R<m.length;R++)(0,m[R])(h)},function(R){for(x.status="rejected",x.reason=R,R=0;R<m.length;R++)(0,m[R])(void 0)}),x}var Rl=Ue.S;Ue.S=function(o,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&Ji(o,h),Rl!==null&&Rl(o,h)};var ho=et(null);function Nf(){var o=ho.current;return o!==null?o:fn.pooledCache}function Mh(o,h){h===null?yt(ho,ho.current):yt(ho,h.pool)}function Ic(){var o=Nf();return o===null?null:{parent:Jn._currentValue,pool:o}}var Iu=Error(a(460)),Zs=Error(a(474)),ea=Error(a(542)),Dt={then:function(){}};function Rh(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Dl(){}function Dh(o,h,m){switch(m=o[m],m===void 0?o.push(h):m!==h&&(h.then(Dl,Dl),h=m),h.status){case"fulfilled":return h.value;case"rejected":throw o=h.reason,Ih(o),o;default:if(typeof h.status=="string")h.then(Dl,Dl);else{if(o=fn,o!==null&&100<o.shellSuspendCounter)throw Error(a(482));o=h,o.status="pending",o.then(function(x){if(h.status==="pending"){var R=h;R.status="fulfilled",R.value=x}},function(x){if(h.status==="pending"){var R=h;R.status="rejected",R.reason=x}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw o=h.reason,Ih(o),o}throw fo=h,Iu}}var fo=null;function Il(){if(fo===null)throw Error(a(459));var o=fo;return fo=null,o}function Ih(o){if(o===Iu||o===ea)throw Error(a(483))}var fr=!1;function Oc(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Oh(o,h){o=o.updateQueue,h.updateQueue===o&&(h.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Bo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function us(o,h,m){var x=o.updateQueue;if(x===null)return null;if(x=x.shared,(nn&2)!==0){var R=x.pending;return R===null?h.next=h:(h.next=R.next,R.next=h),x.pending=h,h=Au(o),Df(o,null,m),h}return Cc(o,x,h,m),Au(o)}function Ou(o,h,m){if(h=h.updateQueue,h!==null&&(h=h.shared,(m&4194048)!==0)){var x=h.lanes;x&=o.pendingLanes,m|=x,h.lanes=m,$t(o,m)}}function kh(o,h){var m=o.updateQueue,x=o.alternate;if(x!==null&&(x=x.updateQueue,m===x)){var R=null,z=null;if(m=m.firstBaseUpdate,m!==null){do{var Y={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};z===null?R=z=Y:z=z.next=Y,m=m.next}while(m!==null);z===null?R=z=h:z=z.next=h}else R=z=h;m={baseState:x.baseState,firstBaseUpdate:R,lastBaseUpdate:z,shared:x.shared,callbacks:x.callbacks},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=h:o.next=h,m.lastBaseUpdate=h}var kc=!1;function Ol(){if(kc){var o=Ti;if(o!==null)throw o}}function ku(o,h,m,x){kc=!1;var R=o.updateQueue;fr=!1;var z=R.firstBaseUpdate,Y=R.lastBaseUpdate,se=R.shared.pending;if(se!==null){R.shared.pending=null;var Ae=se,We=Ae.next;Ae.next=null,Y===null?z=We:Y.next=We,Y=Ae;var ut=o.alternate;ut!==null&&(ut=ut.updateQueue,se=ut.lastBaseUpdate,se!==Y&&(se===null?ut.firstBaseUpdate=We:se.next=We,ut.lastBaseUpdate=Ae))}if(z!==null){var mt=R.baseState;Y=0,ut=We=Ae=null,se=z;do{var Ke=se.lane&-536870913,Qe=Ke!==se.lane;if(Qe?(Nr&Ke)===Ke:(x&Ke)===Ke){Ke!==0&&Ke===ls&&(kc=!0),ut!==null&&(ut=ut.next={lane:0,tag:se.tag,payload:se.payload,callback:null,next:null});e:{var dr=o,ur=se;Ke=h;var ln=m;switch(ur.tag){case 1:if(dr=ur.payload,typeof dr=="function"){mt=dr.call(ln,mt,Ke);break e}mt=dr;break e;case 3:dr.flags=dr.flags&-65537|128;case 0:if(dr=ur.payload,Ke=typeof dr=="function"?dr.call(ln,mt,Ke):dr,Ke==null)break e;mt=M({},mt,Ke);break e;case 2:fr=!0}}Ke=se.callback,Ke!==null&&(o.flags|=64,Qe&&(o.flags|=8192),Qe=R.callbacks,Qe===null?R.callbacks=[Ke]:Qe.push(Ke))}else Qe={lane:Ke,tag:se.tag,payload:se.payload,callback:se.callback,next:null},ut===null?(We=ut=Qe,Ae=mt):ut=ut.next=Qe,Y|=Ke;if(se=se.next,se===null){if(se=R.shared.pending,se===null)break;Qe=se,se=Qe.next,Qe.next=null,R.lastBaseUpdate=Qe,R.shared.pending=null}}while(!0);ut===null&&(Ae=mt),R.baseState=Ae,R.firstBaseUpdate=We,R.lastBaseUpdate=ut,z===null&&(R.shared.lanes=0),Hl|=Y,o.lanes=Y,o.memoizedState=mt}}function Lh(o,h){if(typeof o!="function")throw Error(a(191,o));o.call(h)}function jf(o,h){var m=o.callbacks;if(m!==null)for(o.callbacks=null,o=0;o<m.length;o++)Lh(m[o],h)}var cs=et(null),po=et(0);function Vr(o,h){o=Vl,yt(po,o),yt(cs,h),Vl=o|h.baseLanes}function Bf(){yt(po,Vl),yt(cs,cs.current)}function Lu(){Vl=po.current,st(cs),st(po)}var mo=0,Sr=null,Hr=null,Vn=null,zh=!1,ta=!1,Fo=!1,zt=0,qt=0,hs=null,Ff=0;function xn(){throw Error(a(321))}function pi(o,h){if(h===null)return!1;for(var m=0;m<h.length&&m<o.length;m++)if(!Zi(o[m],h[m]))return!1;return!0}function Nh(o,h,m,x,R,z){return mo=z,Sr=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Ue.H=o===null||o.memoizedState===null?Uo:$o,Fo=!1,z=m(x,R),Fo=!1,ta&&(z=Xs(h,m,x,R)),Ka(o),z}function Ka(o){Ue.H=gi;var h=Hr!==null&&Hr.next!==null;if(mo=0,Vn=Hr=Sr=null,zh=!1,qt=0,hs=null,h)throw Error(a(300));o===null||qn||(o=o.dependencies,o!==null&&Dc(o)&&(qn=!0))}function Xs(o,h,m,x){Sr=o;var R=0;do{if(ta&&(hs=null),qt=0,ta=!1,25<=R)throw Error(a(301));if(R+=1,Vn=Hr=null,o.updateQueue!=null){var z=o.updateQueue;z.lastEffect=null,z.events=null,z.stores=null,z.memoCache!=null&&(z.memoCache.index=0)}Ue.H=Qs,z=h(m,x)}while(ta);return z}function zu(){var o=Ue.H,h=o.useState()[0];return h=typeof h.then=="function"?kl(h):h,o=o.useState()[0],(Hr!==null?Hr.memoizedState:null)!==o&&(Sr.flags|=1024),h}function tn(){var o=zt!==0;return zt=0,o}function wn(o,h,m){h.updateQueue=o.updateQueue,h.flags&=-2053,o.lanes&=~m}function Nu(o){if(zh){for(o=o.memoizedState;o!==null;){var h=o.queue;h!==null&&(h.pending=null),o=o.next}zh=!1}mo=0,Vn=Hr=Sr=null,ta=!1,qt=zt=0,hs=null}function mi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?Sr.memoizedState=Vn=o:Vn=Vn.next=o,Vn}function cn(){if(Hr===null){var o=Sr.alternate;o=o!==null?o.memoizedState:null}else o=Hr.next;var h=Vn===null?Sr.memoizedState:Vn.next;if(h!==null)Vn=h,Hr=o;else{if(o===null)throw Sr.alternate===null?Error(a(467)):Error(a(310));Hr=o,o={memoizedState:Hr.memoizedState,baseState:Hr.baseState,baseQueue:Hr.baseQueue,queue:Hr.queue,next:null},Vn===null?Sr.memoizedState=Vn=o:Vn=Vn.next=o}return Vn}function fs(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kl(o){var h=qt;return qt+=1,hs===null&&(hs=[]),o=Dh(hs,o,h),h=Sr,(Vn===null?h.memoizedState:Vn.next)===null&&(h=h.alternate,Ue.H=h===null||h.memoizedState===null?Uo:$o),o}function Ll(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return kl(o);if(o.$$typeof===ie)return $n(o)}throw Error(a(438,String(o)))}function go(o){var h=null,m=Sr.updateQueue;if(m!==null&&(h=m.memoCache),h==null){var x=Sr.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(h={data:x.data.map(function(R){return R.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),m===null&&(m=fs(),Sr.updateQueue=m),m.memoCache=h,m=h.data[h.index],m===void 0)for(m=h.data[h.index]=Array(o),x=0;x<o;x++)m[x]=At;return h.index++,m}function yo(o,h){return typeof h=="function"?h(o):h}function ju(o){var h=cn();return Bu(h,Hr,o)}function Bu(o,h,m){var x=o.queue;if(x===null)throw Error(a(311));x.lastRenderedReducer=m;var R=o.baseQueue,z=x.pending;if(z!==null){if(R!==null){var Y=R.next;R.next=z.next,z.next=Y}h.baseQueue=R=z,x.pending=null}if(z=o.baseState,R===null)o.memoizedState=z;else{h=R.next;var se=Y=null,Ae=null,We=h,ut=!1;do{var mt=We.lane&-536870913;if(mt!==We.lane?(Nr&mt)===mt:(mo&mt)===mt){var Ke=We.revertLane;if(Ke===0)Ae!==null&&(Ae=Ae.next={lane:0,revertLane:0,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null}),mt===ls&&(ut=!0);else if((mo&Ke)===Ke){We=We.next,Ke===ls&&(ut=!0);continue}else mt={lane:0,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},Ae===null?(se=Ae=mt,Y=z):Ae=Ae.next=mt,Sr.lanes|=Ke,Hl|=Ke;mt=We.action,Fo&&m(z,mt),z=We.hasEagerState?We.eagerState:m(z,mt)}else Ke={lane:mt,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},Ae===null?(se=Ae=Ke,Y=z):Ae=Ae.next=Ke,Sr.lanes|=mt,Hl|=mt;We=We.next}while(We!==null&&We!==h);if(Ae===null?Y=z:Ae.next=se,!Zi(z,o.memoizedState)&&(qn=!0,ut&&(m=Ti,m!==null)))throw m;o.memoizedState=z,o.baseState=Y,o.baseQueue=Ae,x.lastRenderedState=z}return R===null&&(x.lanes=0),[o.memoizedState,x.dispatch]}function Lc(o){var h=cn(),m=h.queue;if(m===null)throw Error(a(311));m.lastRenderedReducer=o;var x=m.dispatch,R=m.pending,z=h.memoizedState;if(R!==null){m.pending=null;var Y=R=R.next;do z=o(z,Y.action),Y=Y.next;while(Y!==R);Zi(z,h.memoizedState)||(qn=!0),h.memoizedState=z,h.baseQueue===null&&(h.baseState=z),m.lastRenderedState=z}return[z,x]}function b(o,h,m){var x=Sr,R=cn(),z=jr;if(z){if(m===void 0)throw Error(a(407));m=m()}else m=h();var Y=!Zi((Hr||R).memoizedState,m);Y&&(R.memoizedState=m,qn=!0),R=R.queue;var se=d.bind(null,x,R,o);if(Ie(2048,8,se,[o]),R.getSnapshot!==h||Y||Vn!==null&&Vn.memoizedState.tag&1){if(x.flags|=2048,me(9,we(),u.bind(null,x,R,m,h),null),fn===null)throw Error(a(349));z||(mo&124)!==0||t(x,h,m)}return m}function t(o,h,m){o.flags|=16384,o={getSnapshot:h,value:m},h=Sr.updateQueue,h===null?(h=fs(),Sr.updateQueue=h,h.stores=[o]):(m=h.stores,m===null?h.stores=[o]:m.push(o))}function u(o,h,m,x){h.value=m,h.getSnapshot=x,_(h)&&S(o)}function d(o,h,m){return m(function(){_(h)&&S(o)})}function _(o){var h=o.getSnapshot;o=o.value;try{var m=h();return!Zi(o,m)}catch{return!0}}function S(o){var h=Ia(o,2);h!==null&&ja(h,o,2)}function A(o){var h=mi();if(typeof o=="function"){var m=o;if(o=m(),Fo){Gi(!0);try{m()}finally{Gi(!1)}}}return h.memoizedState=h.baseState=o,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yo,lastRenderedState:o},h}function I(o,h,m,x){return o.baseState=m,Bu(o,Hr,typeof x=="function"?x:yo)}function O(o,h,m,x,R){if(Ys(o))throw Error(a(485));if(o=h.action,o!==null){var z={payload:R,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){z.listeners.push(Y)}};Ue.T!==null?m(!0):z.isTransition=!1,x(z),m=h.pending,m===null?(z.next=h.pending=z,B(h,z)):(z.next=m.next,h.pending=m.next=z)}}function B(o,h){var m=h.action,x=h.payload,R=o.state;if(h.isTransition){var z=Ue.T,Y={};Ue.T=Y;try{var se=m(R,x),Ae=Ue.S;Ae!==null&&Ae(Y,se),U(o,h,se)}catch(We){V(o,h,We)}finally{Ue.T=z}}else try{z=m(R,x),U(o,h,z)}catch(We){V(o,h,We)}}function U(o,h,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(x){G(o,h,x)},function(x){return V(o,h,x)}):G(o,h,m)}function G(o,h,m){h.status="fulfilled",h.value=m,Q(h),o.state=m,h=o.pending,h!==null&&(m=h.next,m===h?o.pending=null:(m=m.next,h.next=m,B(o,m)))}function V(o,h,m){var x=o.pending;if(o.pending=null,x!==null){x=x.next;do h.status="rejected",h.reason=m,Q(h),h=h.next;while(h!==x)}o.action=null}function Q(o){o=o.listeners;for(var h=0;h<o.length;h++)(0,o[h])()}function ae(o,h){return h}function ce(o,h){if(jr){var m=fn.formState;if(m!==null){e:{var x=Sr;if(jr){if(gn){t:{for(var R=gn,z=lo;R.nodeType!==8;){if(!z){R=null;break t}if(R=Wo(R.nextSibling),R===null){R=null;break t}}z=R.data,R=z==="F!"||z==="F"?R:null}if(R){gn=Wo(R.nextSibling),x=R.data==="F!";break e}}os(x)}x=!1}x&&(h=m[0])}}return m=mi(),m.memoizedState=m.baseState=h,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ae,lastRenderedState:h},m.queue=x,m=ds.bind(null,Sr,x),x.dispatch=m,x=A(!1),z=ps.bind(null,Sr,!1,x.queue),x=mi(),R={state:h,dispatch:null,action:o,pending:null},x.queue=R,m=O.bind(null,Sr,R,z,m),R.dispatch=m,x.memoizedState=o,[h,m,!1]}function he(o){var h=cn();return fe(h,Hr,o)}function fe(o,h,m){if(h=Bu(o,h,ae)[0],o=ju(yo)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var x=kl(h)}catch(Y){throw Y===Iu?ea:Y}else x=h;h=cn();var R=h.queue,z=R.dispatch;return m!==h.memoizedState&&(Sr.flags|=2048,me(9,we(),pe.bind(null,R,m),null)),[x,z,o]}function pe(o,h){o.action=h}function be(o){var h=cn(),m=Hr;if(m!==null)return fe(h,m,o);cn(),h=h.memoizedState,m=cn();var x=m.queue.dispatch;return m.memoizedState=o,[h,x,!1]}function me(o,h,m,x){return o={tag:o,create:m,deps:x,inst:h,next:null},h=Sr.updateQueue,h===null&&(h=fs(),Sr.updateQueue=h),m=h.lastEffect,m===null?h.lastEffect=o.next=o:(x=m.next,m.next=o,o.next=x,h.lastEffect=o),o}function we(){return{destroy:void 0,resource:void 0}}function Ee(){return cn().memoizedState}function ge(o,h,m,x){var R=mi();x=x===void 0?null:x,Sr.flags|=o,R.memoizedState=me(1|h,we(),m,x)}function Ie(o,h,m,x){var R=cn();x=x===void 0?null:x;var z=R.memoizedState.inst;Hr!==null&&x!==null&&pi(x,Hr.memoizedState.deps)?R.memoizedState=me(h,z,m,x):(Sr.flags|=o,R.memoizedState=me(1|h,z,m,x))}function Ze(o,h){ge(8390656,8,o,h)}function Fe(o,h){Ie(2048,8,o,h)}function Ve(o,h){return Ie(4,2,o,h)}function Xe(o,h){return Ie(4,4,o,h)}function Pt(o,h){if(typeof h=="function"){o=o();var m=h(o);return function(){typeof m=="function"?m():h(null)}}if(h!=null)return o=o(),h.current=o,function(){h.current=null}}function xt(o,h,m){m=m!=null?m.concat([o]):null,Ie(4,4,Pt.bind(null,h,o),m)}function lt(){}function jt(o,h){var m=cn();h=h===void 0?null:h;var x=m.memoizedState;return h!==null&&pi(h,x[1])?x[0]:(m.memoizedState=[o,h],o)}function vr(o,h){var m=cn();h=h===void 0?null:h;var x=m.memoizedState;if(h!==null&&pi(h,x[1]))return x[0];if(x=o(),Fo){Gi(!0);try{o()}finally{Gi(!1)}}return m.memoizedState=[x,h],x}function Or(o,h,m){return m===void 0||(mo&1073741824)!==0?o.memoizedState=h:(o.memoizedState=m,o=oi(),Sr.lanes|=o,Hl|=o,m)}function hn(o,h,m,x){return Zi(m,h)?m:cs.current!==null?(o=Or(o,m,x),Zi(o,h)||(qn=!0),o):(mo&42)===0?(qn=!0,o.memoizedState=m):(o=oi(),Sr.lanes|=o,Hl|=o,h)}function Wr(o,h,m,x,R){var z=ct.p;ct.p=z!==0&&8>z?z:8;var Y=Ue.T,se={};Ue.T=se,ps(o,!1,h,m);try{var Ae=R(),We=Ue.S;if(We!==null&&We(se,Ae),Ae!==null&&typeof Ae=="object"&&typeof Ae.then=="function"){var ut=co(Ae,x);na(o,h,ut,sa(o))}else na(o,h,x,sa(o))}catch(mt){na(o,h,{then:function(){},status:"rejected",reason:mt},sa())}finally{ct.p=z,Ue.T=Y}}function Zr(){}function rn(o,h,m,x){if(o.tag!==5)throw Error(a(476));var R=Qr(o).queue;Wr(o,R,h,nt,m===null?Zr:function(){return Xr(o),m(x)})}function Qr(o){var h=o.memoizedState;if(h!==null)return h;h={memoizedState:nt,baseState:nt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yo,lastRenderedState:nt},next:null};var m={};return h.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yo,lastRenderedState:m},next:null},o.memoizedState=h,o=o.alternate,o!==null&&(o.memoizedState=h),h}function Xr(o){var h=Qr(o).next.queue;na(o,h,{},sa())}function Er(){return $n($)}function ei(){return cn().memoizedState}function Hn(){return cn().memoizedState}function ra(o){for(var h=o.return;h!==null;){switch(h.tag){case 24:case 3:var m=sa();o=Bo(m);var x=us(h,o,m);x!==null&&(ja(x,h,m),Ou(x,h,m)),h={cache:Gs()},o.payload=h;return}h=h.return}}function Ks(o,h,m){var x=sa();m={lane:x,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Ys(o)?zc(h,m):(m=Fs(o,h,m,x),m!==null&&(ja(m,o,x),ms(m,h,x)))}function ds(o,h,m){var x=sa();na(o,h,m,x)}function na(o,h,m,x){var R={lane:x,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Ys(o))zc(h,R);else{var z=o.alternate;if(o.lanes===0&&(z===null||z.lanes===0)&&(z=h.lastRenderedReducer,z!==null))try{var Y=h.lastRenderedState,se=z(Y,m);if(R.hasEagerState=!0,R.eagerState=se,Zi(se,Y))return Cc(o,h,R,0),fn===null&&El(),!1}catch{}finally{}if(m=Fs(o,h,R,x),m!==null)return ja(m,o,x),ms(m,h,x),!0}return!1}function ps(o,h,m,x){if(x={lane:2,revertLane:cd(),action:x,hasEagerState:!1,eagerState:null,next:null},Ys(o)){if(h)throw Error(a(479))}else h=Fs(o,m,x,2),h!==null&&ja(h,o,2)}function Ys(o){var h=o.alternate;return o===Sr||h!==null&&h===Sr}function zc(o,h){ta=zh=!0;var m=o.pending;m===null?h.next=h:(h.next=m.next,m.next=h),o.pending=h}function ms(o,h,m){if((m&4194048)!==0){var x=h.lanes;x&=o.pendingLanes,m|=x,h.lanes=m,$t(o,m)}}var gi={readContext:$n,use:Ll,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useLayoutEffect:xn,useInsertionEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useSyncExternalStore:xn,useId:xn,useHostTransitionStatus:xn,useFormState:xn,useActionState:xn,useOptimistic:xn,useMemoCache:xn,useCacheRefresh:xn},Uo={readContext:$n,use:Ll,useCallback:function(o,h){return mi().memoizedState=[o,h===void 0?null:h],o},useContext:$n,useEffect:Ze,useImperativeHandle:function(o,h,m){m=m!=null?m.concat([o]):null,ge(4194308,4,Pt.bind(null,h,o),m)},useLayoutEffect:function(o,h){return ge(4194308,4,o,h)},useInsertionEffect:function(o,h){ge(4,2,o,h)},useMemo:function(o,h){var m=mi();h=h===void 0?null:h;var x=o();if(Fo){Gi(!0);try{o()}finally{Gi(!1)}}return m.memoizedState=[x,h],x},useReducer:function(o,h,m){var x=mi();if(m!==void 0){var R=m(h);if(Fo){Gi(!0);try{m(h)}finally{Gi(!1)}}}else R=h;return x.memoizedState=x.baseState=R,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:R},x.queue=o,o=o.dispatch=Ks.bind(null,Sr,o),[x.memoizedState,o]},useRef:function(o){var h=mi();return o={current:o},h.memoizedState=o},useState:function(o){o=A(o);var h=o.queue,m=ds.bind(null,Sr,h);return h.dispatch=m,[o.memoizedState,m]},useDebugValue:lt,useDeferredValue:function(o,h){var m=mi();return Or(m,o,h)},useTransition:function(){var o=A(!1);return o=Wr.bind(null,Sr,o.queue,!0,!1),mi().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,h,m){var x=Sr,R=mi();if(jr){if(m===void 0)throw Error(a(407));m=m()}else{if(m=h(),fn===null)throw Error(a(349));(Nr&124)!==0||t(x,h,m)}R.memoizedState=m;var z={value:m,getSnapshot:h};return R.queue=z,Ze(d.bind(null,x,z,o),[o]),x.flags|=2048,me(9,we(),u.bind(null,x,z,m,h),null),m},useId:function(){var o=mi(),h=fn.identifierPrefix;if(jr){var m=Ki,x=La;m=(x&~(1<<32-Re(x)-1)).toString(32)+m,h=""+h+"R"+m,m=zt++,0<m&&(h+="H"+m.toString(32)),h+=""}else m=Ff++,h=""+h+"r"+m.toString(32)+"";return o.memoizedState=h},useHostTransitionStatus:Er,useFormState:ce,useActionState:ce,useOptimistic:function(o){var h=mi();h.memoizedState=h.baseState=o;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=m,h=ps.bind(null,Sr,!0,m),m.dispatch=h,[o,h]},useMemoCache:go,useCacheRefresh:function(){return mi().memoizedState=ra.bind(null,Sr)}},$o={readContext:$n,use:Ll,useCallback:jt,useContext:$n,useEffect:Fe,useImperativeHandle:xt,useInsertionEffect:Ve,useLayoutEffect:Xe,useMemo:vr,useReducer:ju,useRef:Ee,useState:function(){return ju(yo)},useDebugValue:lt,useDeferredValue:function(o,h){var m=cn();return hn(m,Hr.memoizedState,o,h)},useTransition:function(){var o=ju(yo)[0],h=cn().memoizedState;return[typeof o=="boolean"?o:kl(o),h]},useSyncExternalStore:b,useId:ei,useHostTransitionStatus:Er,useFormState:he,useActionState:he,useOptimistic:function(o,h){var m=cn();return I(m,Hr,o,h)},useMemoCache:go,useCacheRefresh:Hn},Qs={readContext:$n,use:Ll,useCallback:jt,useContext:$n,useEffect:Fe,useImperativeHandle:xt,useInsertionEffect:Ve,useLayoutEffect:Xe,useMemo:vr,useReducer:Lc,useRef:Ee,useState:function(){return Lc(yo)},useDebugValue:lt,useDeferredValue:function(o,h){var m=cn();return Hr===null?Or(m,o,h):hn(m,Hr.memoizedState,o,h)},useTransition:function(){var o=Lc(yo)[0],h=cn().memoizedState;return[typeof o=="boolean"?o:kl(o),h]},useSyncExternalStore:b,useId:ei,useHostTransitionStatus:Er,useFormState:be,useActionState:be,useOptimistic:function(o,h){var m=cn();return Hr!==null?I(m,Hr,o,h):(m.baseState=o,[o,m.queue.dispatch])},useMemoCache:go,useCacheRefresh:Hn},Fr=null,yn=0;function Ni(o){var h=yn;return yn+=1,Fr===null&&(Fr=[]),Dh(Fr,o,h)}function Mn(o,h){h=h.props.ref,o.ref=h!==void 0?h:null}function jh(o,h){throw h.$$typeof===k?Error(a(525)):(o=Object.prototype.toString.call(h),Error(a(31,o==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":o)))}function Bh(o){var h=o._init;return h(o._payload)}function Fu(o){function h(Be,ze){if(o){var $e=Be.deletions;$e===null?(Be.deletions=[ze],Be.flags|=16):$e.push(ze)}}function m(Be,ze){if(!o)return null;for(;ze!==null;)h(Be,ze),ze=ze.sibling;return null}function x(Be){for(var ze=new Map;Be!==null;)Be.key!==null?ze.set(Be.key,Be):ze.set(Be.index,Be),Be=Be.sibling;return ze}function R(Be,ze){return Be=Li(Be,ze),Be.index=0,Be.sibling=null,Be}function z(Be,ze,$e){return Be.index=$e,o?($e=Be.alternate,$e!==null?($e=$e.index,$e<ze?(Be.flags|=67108866,ze):$e):(Be.flags|=67108866,ze)):(Be.flags|=1048576,ze)}function Y(Be){return o&&Be.alternate===null&&(Be.flags|=67108866),Be}function se(Be,ze,$e,pt){return ze===null||ze.tag!==6?(ze=Of($e,Be.mode,pt),ze.return=Be,ze):(ze=R(ze,$e),ze.return=Be,ze)}function Ae(Be,ze,$e,pt){var Wt=$e.type;return Wt===q?ut(Be,ze,$e.props.children,pt,$e.key):ze!==null&&(ze.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===je&&Bh(Wt)===ze.type)?(ze=R(ze,$e.props),Mn(ze,$e),ze.return=Be,ze):(ze=Ah($e.type,$e.key,$e.props,null,Be.mode,pt),Mn(ze,$e),ze.return=Be,ze)}function We(Be,ze,$e,pt){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==$e.containerInfo||ze.stateNode.implementation!==$e.implementation?(ze=Ec($e,Be.mode,pt),ze.return=Be,ze):(ze=R(ze,$e.children||[]),ze.return=Be,ze)}function ut(Be,ze,$e,pt,Wt){return ze===null||ze.tag!==7?(ze=Us($e,Be.mode,pt,Wt),ze.return=Be,ze):(ze=R(ze,$e),ze.return=Be,ze)}function mt(Be,ze,$e){if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return ze=Of(""+ze,Be.mode,$e),ze.return=Be,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case N:return $e=Ah(ze.type,ze.key,ze.props,null,Be.mode,$e),Mn($e,ze),$e.return=Be,$e;case j:return ze=Ec(ze,Be.mode,$e),ze.return=Be,ze;case je:var pt=ze._init;return ze=pt(ze._payload),mt(Be,ze,$e)}if(kt(ze)||ft(ze))return ze=Us(ze,Be.mode,$e,null),ze.return=Be,ze;if(typeof ze.then=="function")return mt(Be,Ni(ze),$e);if(ze.$$typeof===ie)return mt(Be,ya(Be,ze),$e);jh(Be,ze)}return null}function Ke(Be,ze,$e,pt){var Wt=ze!==null?ze.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return Wt!==null?null:se(Be,ze,""+$e,pt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case N:return $e.key===Wt?Ae(Be,ze,$e,pt):null;case j:return $e.key===Wt?We(Be,ze,$e,pt):null;case je:return Wt=$e._init,$e=Wt($e._payload),Ke(Be,ze,$e,pt)}if(kt($e)||ft($e))return Wt!==null?null:ut(Be,ze,$e,pt,null);if(typeof $e.then=="function")return Ke(Be,ze,Ni($e),pt);if($e.$$typeof===ie)return Ke(Be,ze,ya(Be,$e),pt);jh(Be,$e)}return null}function Qe(Be,ze,$e,pt,Wt){if(typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint")return Be=Be.get($e)||null,se(ze,Be,""+pt,Wt);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case N:return Be=Be.get(pt.key===null?$e:pt.key)||null,Ae(ze,Be,pt,Wt);case j:return Be=Be.get(pt.key===null?$e:pt.key)||null,We(ze,Be,pt,Wt);case je:var Rr=pt._init;return pt=Rr(pt._payload),Qe(Be,ze,$e,pt,Wt)}if(kt(pt)||ft(pt))return Be=Be.get($e)||null,ut(ze,Be,pt,Wt,null);if(typeof pt.then=="function")return Qe(Be,ze,$e,Ni(pt),Wt);if(pt.$$typeof===ie)return Qe(Be,ze,$e,ya(ze,pt),Wt);jh(ze,pt)}return null}function dr(Be,ze,$e,pt){for(var Wt=null,Rr=null,nr=ze,hr=ze=0,$i=null;nr!==null&&hr<$e.length;hr++){nr.index>hr?($i=nr,nr=null):$i=nr.sibling;var qr=Ke(Be,nr,$e[hr],pt);if(qr===null){nr===null&&(nr=$i);break}o&&nr&&qr.alternate===null&&h(Be,nr),ze=z(qr,ze,hr),Rr===null?Wt=qr:Rr.sibling=qr,Rr=qr,nr=$i}if(hr===$e.length)return m(Be,nr),jr&&so(Be,hr),Wt;if(nr===null){for(;hr<$e.length;hr++)nr=mt(Be,$e[hr],pt),nr!==null&&(ze=z(nr,ze,hr),Rr===null?Wt=nr:Rr.sibling=nr,Rr=nr);return jr&&so(Be,hr),Wt}for(nr=x(nr);hr<$e.length;hr++)$i=Qe(nr,Be,hr,$e[hr],pt),$i!==null&&(o&&$i.alternate!==null&&nr.delete($i.key===null?hr:$i.key),ze=z($i,ze,hr),Rr===null?Wt=$i:Rr.sibling=$i,Rr=$i);return o&&nr.forEach(function(Yu){return h(Be,Yu)}),jr&&so(Be,hr),Wt}function ur(Be,ze,$e,pt){if($e==null)throw Error(a(151));for(var Wt=null,Rr=null,nr=ze,hr=ze=0,$i=null,qr=$e.next();nr!==null&&!qr.done;hr++,qr=$e.next()){nr.index>hr?($i=nr,nr=null):$i=nr.sibling;var Yu=Ke(Be,nr,qr.value,pt);if(Yu===null){nr===null&&(nr=$i);break}o&&nr&&Yu.alternate===null&&h(Be,nr),ze=z(Yu,ze,hr),Rr===null?Wt=Yu:Rr.sibling=Yu,Rr=Yu,nr=$i}if(qr.done)return m(Be,nr),jr&&so(Be,hr),Wt;if(nr===null){for(;!qr.done;hr++,qr=$e.next())qr=mt(Be,qr.value,pt),qr!==null&&(ze=z(qr,ze,hr),Rr===null?Wt=qr:Rr.sibling=qr,Rr=qr);return jr&&so(Be,hr),Wt}for(nr=x(nr);!qr.done;hr++,qr=$e.next())qr=Qe(nr,Be,hr,qr.value,pt),qr!==null&&(o&&qr.alternate!==null&&nr.delete(qr.key===null?hr:qr.key),ze=z(qr,ze,hr),Rr===null?Wt=qr:Rr.sibling=qr,Rr=qr);return o&&nr.forEach(function(x_){return h(Be,x_)}),jr&&so(Be,hr),Wt}function ln(Be,ze,$e,pt){if(typeof $e=="object"&&$e!==null&&$e.type===q&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case N:e:{for(var Wt=$e.key;ze!==null;){if(ze.key===Wt){if(Wt=$e.type,Wt===q){if(ze.tag===7){m(Be,ze.sibling),pt=R(ze,$e.props.children),pt.return=Be,Be=pt;break e}}else if(ze.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===je&&Bh(Wt)===ze.type){m(Be,ze.sibling),pt=R(ze,$e.props),Mn(pt,$e),pt.return=Be,Be=pt;break e}m(Be,ze);break}else h(Be,ze);ze=ze.sibling}$e.type===q?(pt=Us($e.props.children,Be.mode,pt,$e.key),pt.return=Be,Be=pt):(pt=Ah($e.type,$e.key,$e.props,null,Be.mode,pt),Mn(pt,$e),pt.return=Be,Be=pt)}return Y(Be);case j:e:{for(Wt=$e.key;ze!==null;){if(ze.key===Wt)if(ze.tag===4&&ze.stateNode.containerInfo===$e.containerInfo&&ze.stateNode.implementation===$e.implementation){m(Be,ze.sibling),pt=R(ze,$e.children||[]),pt.return=Be,Be=pt;break e}else{m(Be,ze);break}else h(Be,ze);ze=ze.sibling}pt=Ec($e,Be.mode,pt),pt.return=Be,Be=pt}return Y(Be);case je:return Wt=$e._init,$e=Wt($e._payload),ln(Be,ze,$e,pt)}if(kt($e))return dr(Be,ze,$e,pt);if(ft($e)){if(Wt=ft($e),typeof Wt!="function")throw Error(a(150));return $e=Wt.call($e),ur(Be,ze,$e,pt)}if(typeof $e.then=="function")return ln(Be,ze,Ni($e),pt);if($e.$$typeof===ie)return ln(Be,ze,ya(Be,$e),pt);jh(Be,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint"?($e=""+$e,ze!==null&&ze.tag===6?(m(Be,ze.sibling),pt=R(ze,$e),pt.return=Be,Be=pt):(m(Be,ze),pt=Of($e,Be.mode,pt),pt.return=Be,Be=pt),Y(Be)):m(Be,ze)}return function(Be,ze,$e,pt){try{yn=0;var Wt=ln(Be,ze,$e,pt);return Fr=null,Wt}catch(nr){if(nr===Iu||nr===ea)throw nr;var Rr=Oa(29,nr,null,Be.mode);return Rr.lanes=pt,Rr.return=Be,Rr}finally{}}}var vo=Fu(!0),Vo=Fu(!1),kn=et(null),Rn=null;function Ho(o){var h=o.alternate;yt(Ln,Ln.current&1),yt(kn,o),Rn===null&&(h===null||cs.current!==null||h.memoizedState!==null)&&(Rn=o)}function gs(o){if(o.tag===22){if(yt(Ln,Ln.current),yt(kn,o),Rn===null){var h=o.alternate;h!==null&&h.memoizedState!==null&&(Rn=o)}}else ys()}function ys(){yt(Ln,Ln.current),yt(kn,kn.current)}function Ya(o){st(kn),Rn===o&&(Rn=null),st(Ln)}var Ln=et(0);function zl(o){for(var h=o;h!==null;){if(h.tag===13){var m=h.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||fg(m)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function Nl(o,h,m,x){h=o.memoizedState,m=m(x,h),m=m==null?h:M({},h,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var jl={enqueueSetState:function(o,h,m){o=o._reactInternals;var x=sa(),R=Bo(x);R.payload=h,m!=null&&(R.callback=m),h=us(o,R,x),h!==null&&(ja(h,o,x),Ou(h,o,x))},enqueueReplaceState:function(o,h,m){o=o._reactInternals;var x=sa(),R=Bo(x);R.tag=1,R.payload=h,m!=null&&(R.callback=m),h=us(o,R,x),h!==null&&(ja(h,o,x),Ou(h,o,x))},enqueueForceUpdate:function(o,h){o=o._reactInternals;var m=sa(),x=Bo(m);x.tag=2,h!=null&&(x.callback=h),h=us(o,x,m),h!==null&&(ja(h,o,m),Ou(h,o,m))}};function gm(o,h,m,x,R,z,Y){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(x,z,Y):h.prototype&&h.prototype.isPureReactComponent?!Su(m,x)||!Su(R,z):!0}function py(o,h,m,x){o=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,x),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,x),h.state!==o&&jl.enqueueReplaceState(h,h.state,null)}function Bl(o,h){var m=h;if("ref"in h){m={};for(var x in h)x!=="ref"&&(m[x]=h[x])}if(o=o.defaultProps){m===h&&(m=M({},m));for(var R in o)m[R]===void 0&&(m[R]=o[R])}return m}var Uf=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function $f(o){Uf(o)}function ym(o){console.error(o)}function my(o){Uf(o)}function Fh(o,h){try{var m=o.onUncaughtError;m(h.value,{componentStack:h.stack})}catch(x){setTimeout(function(){throw x})}}function gy(o,h,m){try{var x=o.onCaughtError;x(m.value,{componentStack:m.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function Vf(o,h,m){return m=Bo(m),m.tag=3,m.payload={element:null},m.callback=function(){Fh(o,h)},m}function vm(o){return o=Bo(o),o.tag=3,o}function _m(o,h,m,x){var R=m.type.getDerivedStateFromError;if(typeof R=="function"){var z=x.value;o.payload=function(){return R(z)},o.callback=function(){gy(h,m,x)}}var Y=m.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(o.callback=function(){gy(h,m,x),typeof R!="function"&&($u===null?$u=new Set([this]):$u.add(this));var se=x.stack;this.componentDidCatch(x.value,{componentStack:se!==null?se:""})})}function Uh(o,h,m,x,R){if(m.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(h=m.alternate,h!==null&&Mu(h,m,R,!0),m=kn.current,m!==null){switch(m.tag){case 13:return Rn===null?qm():m.alternate===null&&Sn===0&&(Sn=3),m.flags&=-257,m.flags|=65536,m.lanes=R,x===Dt?m.flags|=16384:(h=m.updateQueue,h===null?m.updateQueue=new Set([x]):h.add(x),Xm(o,x,R)),!1;case 22:return m.flags|=65536,x===Dt?m.flags|=16384:(h=m.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([x])},m.updateQueue=h):(m=h.retryQueue,m===null?h.retryQueue=new Set([x]):m.add(x)),Xm(o,x,R)),!1}throw Error(a(435,m.tag))}return Xm(o,x,R),qm(),!1}if(jr)return h=kn.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=R,x!==Tu&&(o=Error(a(422),{cause:x}),Hs(di(o,m)))):(x!==Tu&&(h=Error(a(423),{cause:x}),Hs(di(h,m))),o=o.current.alternate,o.flags|=65536,R&=-R,o.lanes|=R,x=di(x,m),R=Vf(o.stateNode,x,R),kh(o,R),Sn!==4&&(Sn=2)),!1;var z=Error(a(520),{cause:x});if(z=di(z,m),td===null?td=[z]:td.push(z),Sn!==4&&(Sn=2),h===null)return!0;x=di(x,m),m=h;do{switch(m.tag){case 3:return m.flags|=65536,o=R&-R,m.lanes|=o,o=Vf(m.stateNode,x,o),kh(m,o),!1;case 1:if(h=m.type,z=m.stateNode,(m.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&($u===null||!$u.has(z))))return m.flags|=65536,R&=-R,m.lanes|=R,R=vm(R),_m(R,o,m,x),kh(m,R),!1}m=m.return}while(m!==null);return!1}var yy=Error(a(461)),qn=!1;function yi(o,h,m,x){h.child=o===null?Vo(h,null,m,x):vo(h,o.child,m,x)}function Hf(o,h,m,x,R){m=m.render;var z=h.ref;if("ref"in x){var Y={};for(var se in x)se!=="ref"&&(Y[se]=x[se])}else Y=x;return qs(h),x=Nh(o,h,m,Y,z,R),se=tn(),o!==null&&!qn?(wn(o,h,R),vs(o,h,R)):(jr&&se&&as(h),h.flags|=1,yi(o,h,x,R),h.child)}function vy(o,h,m,x,R){if(o===null){var z=m.type;return typeof z=="function"&&!Ph(z)&&z.defaultProps===void 0&&m.compare===null?(h.tag=15,h.type=z,_y(o,h,z,x,R)):(o=Ah(m.type,null,x,h,h.mode,R),o.ref=h.ref,o.return=h,h.child=o)}if(z=o.child,!Pm(o,R)){var Y=z.memoizedProps;if(m=m.compare,m=m!==null?m:Su,m(Y,x)&&o.ref===h.ref)return vs(o,h,R)}return h.flags|=1,o=Li(z,x),o.ref=h.ref,o.return=h,h.child=o}function _y(o,h,m,x,R){if(o!==null){var z=o.memoizedProps;if(Su(z,x)&&o.ref===h.ref)if(qn=!1,h.pendingProps=x=z,Pm(o,R))(o.flags&131072)!==0&&(qn=!0);else return h.lanes=o.lanes,vs(o,h,R)}return Gf(o,h,m,x,R)}function by(o,h,m){var x=h.pendingProps,R=x.children,z=o!==null?o.memoizedState:null;if(x.mode==="hidden"){if((h.flags&128)!==0){if(x=z!==null?z.baseLanes|m:m,o!==null){for(R=h.child=o.child,z=0;R!==null;)z=z|R.lanes|R.childLanes,R=R.sibling;h.childLanes=z&~x}else h.childLanes=0,h.child=null;return xy(o,h,x,m)}if((m&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},o!==null&&Mh(h,z!==null?z.cachePool:null),z!==null?Vr(h,z):Bf(),gs(h);else return h.lanes=h.childLanes=536870912,xy(o,h,z!==null?z.baseLanes|m:m,m)}else z!==null?(Mh(h,z.cachePool),Vr(h,z),ys(),h.memoizedState=null):(o!==null&&Mh(h,null),Bf(),ys());return yi(o,h,R,m),h.child}function xy(o,h,m,x){var R=Nf();return R=R===null?null:{parent:Jn._currentValue,pool:R},h.memoizedState={baseLanes:m,cachePool:R},o!==null&&Mh(h,null),Bf(),gs(h),o!==null&&Mu(o,h,x,!0),null}function qf(o,h){var m=h.ref;if(m===null)o!==null&&o.ref!==null&&(h.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(a(284));(o===null||o.ref!==m)&&(h.flags|=4194816)}}function Gf(o,h,m,x,R){return qs(h),m=Nh(o,h,m,x,void 0,R),x=tn(),o!==null&&!qn?(wn(o,h,R),vs(o,h,R)):(jr&&x&&as(h),h.flags|=1,yi(o,h,m,R),h.child)}function bm(o,h,m,x,R,z){return qs(h),h.updateQueue=null,m=Xs(h,x,m,R),Ka(o),x=tn(),o!==null&&!qn?(wn(o,h,z),vs(o,h,z)):(jr&&x&&as(h),h.flags|=1,yi(o,h,m,z),h.child)}function xm(o,h,m,x,R){if(qs(h),h.stateNode===null){var z=yr,Y=m.contextType;typeof Y=="object"&&Y!==null&&(z=$n(Y)),z=new m(x,z),h.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,z.updater=jl,h.stateNode=z,z._reactInternals=h,z=h.stateNode,z.props=x,z.state=h.memoizedState,z.refs={},Oc(h),Y=m.contextType,z.context=typeof Y=="object"&&Y!==null?$n(Y):yr,z.state=h.memoizedState,Y=m.getDerivedStateFromProps,typeof Y=="function"&&(Nl(h,m,Y,x),z.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(Y=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),Y!==z.state&&jl.enqueueReplaceState(z,z.state,null),ku(h,x,z,R),Ol(),z.state=h.memoizedState),typeof z.componentDidMount=="function"&&(h.flags|=4194308),x=!0}else if(o===null){z=h.stateNode;var se=h.memoizedProps,Ae=Bl(m,se);z.props=Ae;var We=z.context,ut=m.contextType;Y=yr,typeof ut=="object"&&ut!==null&&(Y=$n(ut));var mt=m.getDerivedStateFromProps;ut=typeof mt=="function"||typeof z.getSnapshotBeforeUpdate=="function",se=h.pendingProps!==se,ut||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(se||We!==Y)&&py(h,z,x,Y),fr=!1;var Ke=h.memoizedState;z.state=Ke,ku(h,x,z,R),Ol(),We=h.memoizedState,se||Ke!==We||fr?(typeof mt=="function"&&(Nl(h,m,mt,x),We=h.memoizedState),(Ae=fr||gm(h,m,Ae,x,Ke,We,Y))?(ut||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(h.flags|=4194308)):(typeof z.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=x,h.memoizedState=We),z.props=x,z.state=We,z.context=Y,x=Ae):(typeof z.componentDidMount=="function"&&(h.flags|=4194308),x=!1)}else{z=h.stateNode,Oh(o,h),Y=h.memoizedProps,ut=Bl(m,Y),z.props=ut,mt=h.pendingProps,Ke=z.context,We=m.contextType,Ae=yr,typeof We=="object"&&We!==null&&(Ae=$n(We)),se=m.getDerivedStateFromProps,(We=typeof se=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(Y!==mt||Ke!==Ae)&&py(h,z,x,Ae),fr=!1,Ke=h.memoizedState,z.state=Ke,ku(h,x,z,R),Ol();var Qe=h.memoizedState;Y!==mt||Ke!==Qe||fr||o!==null&&o.dependencies!==null&&Dc(o.dependencies)?(typeof se=="function"&&(Nl(h,m,se,x),Qe=h.memoizedState),(ut=fr||gm(h,m,ut,x,Ke,Qe,Ae)||o!==null&&o.dependencies!==null&&Dc(o.dependencies))?(We||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(x,Qe,Ae),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(x,Qe,Ae)),typeof z.componentDidUpdate=="function"&&(h.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof z.componentDidUpdate!="function"||Y===o.memoizedProps&&Ke===o.memoizedState||(h.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Y===o.memoizedProps&&Ke===o.memoizedState||(h.flags|=1024),h.memoizedProps=x,h.memoizedState=Qe),z.props=x,z.state=Qe,z.context=Ae,x=ut):(typeof z.componentDidUpdate!="function"||Y===o.memoizedProps&&Ke===o.memoizedState||(h.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Y===o.memoizedProps&&Ke===o.memoizedState||(h.flags|=1024),x=!1)}return z=x,qf(o,h),x=(h.flags&128)!==0,z||x?(z=h.stateNode,m=x&&typeof m.getDerivedStateFromError!="function"?null:z.render(),h.flags|=1,o!==null&&x?(h.child=vo(h,o.child,null,R),h.child=vo(h,null,m,R)):yi(o,h,m,R),h.memoizedState=z.state,o=h.child):o=vs(o,h,R),o}function wy(o,h,m,x){return uo(),h.flags|=256,yi(o,h,m,x),h.child}var wm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ap(o){return{baseLanes:o,cachePool:Ic()}}function op(o,h,m){return o=o!==null?o.childLanes&~m:0,h&&(o|=Go),o}function Sy(o,h,m){var x=h.pendingProps,R=!1,z=(h.flags&128)!==0,Y;if((Y=z)||(Y=o!==null&&o.memoizedState===null?!1:(Ln.current&2)!==0),Y&&(R=!0,h.flags&=-129),Y=(h.flags&32)!==0,h.flags&=-33,o===null){if(jr){if(R?Ho(h):ys(),jr){var se=gn,Ae;if(Ae=se){e:{for(Ae=se,se=lo;Ae.nodeType!==8;){if(!se){se=null;break e}if(Ae=Wo(Ae.nextSibling),Ae===null){se=null;break e}}se=Ae}se!==null?(h.memoizedState={dehydrated:se,treeContext:oo!==null?{id:La,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},Ae=Oa(18,null,null,0),Ae.stateNode=se,Ae.return=h,h.child=Ae,ii=h,gn=null,Ae=!0):Ae=!1}Ae||os(h)}if(se=h.memoizedState,se!==null&&(se=se.dehydrated,se!==null))return fg(se)?h.lanes=32:h.lanes=536870912,null;Ya(h)}return se=x.children,x=x.fallback,R?(ys(),R=h.mode,se=Zf({mode:"hidden",children:se},R),x=Us(x,R,m,null),se.return=h,x.return=h,se.sibling=x,h.child=se,R=h.child,R.memoizedState=ap(m),R.childLanes=op(o,Y,m),h.memoizedState=wm,x):(Ho(h),Wf(h,se))}if(Ae=o.memoizedState,Ae!==null&&(se=Ae.dehydrated,se!==null)){if(z)h.flags&256?(Ho(h),h.flags&=-257,h=Xf(o,h,m)):h.memoizedState!==null?(ys(),h.child=o.child,h.flags|=128,h=null):(ys(),R=x.fallback,se=h.mode,x=Zf({mode:"visible",children:x.children},se),R=Us(R,se,m,null),R.flags|=2,x.return=h,R.return=h,x.sibling=R,h.child=x,vo(h,o.child,null,m),x=h.child,x.memoizedState=ap(m),x.childLanes=op(o,Y,m),h.memoizedState=wm,h=R);else if(Ho(h),fg(se)){if(Y=se.nextSibling&&se.nextSibling.dataset,Y)var We=Y.dgst;Y=We,x=Error(a(419)),x.stack="",x.digest=Y,Hs({value:x,source:null,stack:null}),h=Xf(o,h,m)}else if(qn||Mu(o,h,m,!1),Y=(m&o.childLanes)!==0,qn||Y){if(Y=fn,Y!==null&&(x=m&-m,x=(x&42)!==0?1:or(x),x=(x&(Y.suspendedLanes|m))!==0?0:x,x!==0&&x!==Ae.retryLane))throw Ae.retryLane=x,Ia(o,x),ja(Y,o,x),yy;se.data==="$?"||qm(),h=Xf(o,h,m)}else se.data==="$?"?(h.flags|=192,h.child=o.child,h=null):(o=Ae.treeContext,gn=Wo(se.nextSibling),ii=h,jr=!0,Vs=null,lo=!1,o!==null&&(ka[zi++]=La,ka[zi++]=Ki,ka[zi++]=oo,La=o.id,Ki=o.overflow,oo=h),h=Wf(h,x.children),h.flags|=4096);return h}return R?(ys(),R=x.fallback,se=h.mode,Ae=o.child,We=Ae.sibling,x=Li(Ae,{mode:"hidden",children:x.children}),x.subtreeFlags=Ae.subtreeFlags&65011712,We!==null?R=Li(We,R):(R=Us(R,se,m,null),R.flags|=2),R.return=h,x.return=h,x.sibling=R,h.child=x,x=R,R=h.child,se=o.child.memoizedState,se===null?se=ap(m):(Ae=se.cachePool,Ae!==null?(We=Jn._currentValue,Ae=Ae.parent!==We?{parent:We,pool:We}:Ae):Ae=Ic(),se={baseLanes:se.baseLanes|m,cachePool:Ae}),R.memoizedState=se,R.childLanes=op(o,Y,m),h.memoizedState=wm,x):(Ho(h),m=o.child,o=m.sibling,m=Li(m,{mode:"visible",children:x.children}),m.return=h,m.sibling=null,o!==null&&(Y=h.deletions,Y===null?(h.deletions=[o],h.flags|=16):Y.push(o)),h.child=m,h.memoizedState=null,m)}function Wf(o,h){return h=Zf({mode:"visible",children:h},o.mode),h.return=o,o.child=h}function Zf(o,h){return o=Oa(22,o,null,h),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Xf(o,h,m){return vo(h,o.child,null,m),o=Wf(h,h.pendingProps.children),o.flags|=2,h.memoizedState=null,o}function $h(o,h,m){o.lanes|=h;var x=o.alternate;x!==null&&(x.lanes|=h),Rc(o.return,h,m)}function ia(o,h,m,x,R){var z=o.memoizedState;z===null?o.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:x,tail:m,tailMode:R}:(z.isBackwards=h,z.rendering=null,z.renderingStartTime=0,z.last=x,z.tail=m,z.tailMode=R)}function Sm(o,h,m){var x=h.pendingProps,R=x.revealOrder,z=x.tail;if(yi(o,h,x.children,m),x=Ln.current,(x&2)!==0)x=x&1|2,h.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=h.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&$h(o,m,h);else if(o.tag===19)$h(o,m,h);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===h)break e;for(;o.sibling===null;){if(o.return===null||o.return===h)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}x&=1}switch(yt(Ln,x),R){case"forwards":for(m=h.child,R=null;m!==null;)o=m.alternate,o!==null&&zl(o)===null&&(R=m),m=m.sibling;m=R,m===null?(R=h.child,h.child=null):(R=m.sibling,m.sibling=null),ia(h,!1,R,m,z);break;case"backwards":for(m=null,R=h.child,h.child=null;R!==null;){if(o=R.alternate,o!==null&&zl(o)===null){h.child=R;break}o=R.sibling,R.sibling=m,m=R,R=o}ia(h,!0,m,null,z);break;case"together":ia(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function vs(o,h,m){if(o!==null&&(h.dependencies=o.dependencies),Hl|=h.lanes,(m&h.childLanes)===0)if(o!==null){if(Mu(o,h,m,!1),(m&h.childLanes)===0)return null}else return null;if(o!==null&&h.child!==o.child)throw Error(a(153));if(h.child!==null){for(o=h.child,m=Li(o,o.pendingProps),h.child=m,m.return=h;o.sibling!==null;)o=o.sibling,m=m.sibling=Li(o,o.pendingProps),m.return=h;m.sibling=null}return h.child}function Pm(o,h){return(o.lanes&h)!==0?!0:(o=o.dependencies,!!(o!==null&&Dc(o)))}function Py(o,h,m){switch(h.tag){case 3:Jt(h,h.stateNode.containerInfo),ga(h,Jn,o.memoizedState.cache),uo();break;case 27:case 5:Gt(h);break;case 4:Jt(h,h.stateNode.containerInfo);break;case 10:ga(h,h.type,h.memoizedProps.value);break;case 13:var x=h.memoizedState;if(x!==null)return x.dehydrated!==null?(Ho(h),h.flags|=128,null):(m&h.child.childLanes)!==0?Sy(o,h,m):(Ho(h),o=vs(o,h,m),o!==null?o.sibling:null);Ho(h);break;case 19:var R=(o.flags&128)!==0;if(x=(m&h.childLanes)!==0,x||(Mu(o,h,m,!1),x=(m&h.childLanes)!==0),R){if(x)return Sm(o,h,m);h.flags|=128}if(R=h.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),yt(Ln,Ln.current),x)break;return null;case 22:case 23:return h.lanes=0,by(o,h,m);case 24:ga(h,Jn,o.memoizedState.cache)}return vs(o,h,m)}function Ay(o,h,m){if(o!==null)if(o.memoizedProps!==h.pendingProps)qn=!0;else{if(!Pm(o,m)&&(h.flags&128)===0)return qn=!1,Py(o,h,m);qn=(o.flags&131072)!==0}else qn=!1,jr&&(h.flags&1048576)!==0&&Ch(h,Cu,h.index);switch(h.lanes=0,h.tag){case 16:e:{o=h.pendingProps;var x=h.elementType,R=x._init;if(x=R(x._payload),h.type=x,typeof x=="function")Ph(x)?(o=Bl(x,o),h.tag=1,h=xm(null,h,x,o,m)):(h.tag=0,h=Gf(null,h,x,o,m));else{if(x!=null){if(R=x.$$typeof,R===ve){h.tag=11,h=Hf(null,h,x,o,m);break e}else if(R===Me){h.tag=14,h=vy(null,h,x,o,m);break e}}throw h=It(x)||x,Error(a(306,h,""))}}return h;case 0:return Gf(o,h,h.type,h.pendingProps,m);case 1:return x=h.type,R=Bl(x,h.pendingProps),xm(o,h,x,R,m);case 3:e:{if(Jt(h,h.stateNode.containerInfo),o===null)throw Error(a(387));x=h.pendingProps;var z=h.memoizedState;R=z.element,Oh(o,h),ku(h,x,null,m);var Y=h.memoizedState;if(x=Y.cache,ga(h,Jn,x),x!==z.cache&&Eh(h,[Jn],m,!0),Ol(),x=Y.element,z.isDehydrated)if(z={element:x,isDehydrated:!1,cache:Y.cache},h.updateQueue.baseState=z,h.memoizedState=z,h.flags&256){h=wy(o,h,x,m);break e}else if(x!==R){R=di(Error(a(424)),h),Hs(R),h=wy(o,h,x,m);break e}else{switch(o=h.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(gn=Wo(o.firstChild),ii=h,jr=!0,Vs=null,lo=!0,m=Vo(h,null,x,m),h.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(uo(),x===R){h=vs(o,h,m);break e}yi(o,h,x,m)}h=h.child}return h;case 26:return qf(o,h),o===null?(m=Tp(h.type,null,h.pendingProps,null))?h.memoizedState=m:jr||(m=h.type,o=h.pendingProps,x=va(Ft.current).createElement(m),x[tr]=h,x[sr]=o,si(x,m,o),mn(x),h.stateNode=x):h.memoizedState=Tp(h.type,o.memoizedProps,h.pendingProps,o.memoizedState),null;case 27:return Gt(h),o===null&&jr&&(x=h.stateNode=md(h.type,h.pendingProps,Ft.current),ii=h,lo=!0,R=gn,Kl(h.type)?(ef=R,gn=Wo(x.firstChild)):gn=R),yi(o,h,h.pendingProps.children,m),qf(o,h),o===null&&(h.flags|=4194304),h.child;case 5:return o===null&&jr&&((R=x=gn)&&(x=e0(x,h.type,h.pendingProps,lo),x!==null?(h.stateNode=x,ii=h,gn=Wo(x.firstChild),lo=!1,R=!0):R=!1),R||os(h)),Gt(h),R=h.type,z=h.pendingProps,Y=o!==null?o.memoizedProps:null,x=z.children,Xl(R,z)?x=null:Y!==null&&Xl(R,Y)&&(h.flags|=32),h.memoizedState!==null&&(R=Nh(o,h,zu,null,null,m),$._currentValue=R),qf(o,h),yi(o,h,x,m),h.child;case 6:return o===null&&jr&&((o=m=gn)&&(m=v_(m,h.pendingProps,lo),m!==null?(h.stateNode=m,ii=h,gn=null,o=!0):o=!1),o||os(h)),null;case 13:return Sy(o,h,m);case 4:return Jt(h,h.stateNode.containerInfo),x=h.pendingProps,o===null?h.child=vo(h,null,x,m):yi(o,h,x,m),h.child;case 11:return Hf(o,h,h.type,h.pendingProps,m);case 7:return yi(o,h,h.pendingProps,m),h.child;case 8:return yi(o,h,h.pendingProps.children,m),h.child;case 12:return yi(o,h,h.pendingProps.children,m),h.child;case 10:return x=h.pendingProps,ga(h,h.type,x.value),yi(o,h,x.children,m),h.child;case 9:return R=h.type._context,x=h.pendingProps.children,qs(h),R=$n(R),x=x(R),h.flags|=1,yi(o,h,x,m),h.child;case 14:return vy(o,h,h.type,h.pendingProps,m);case 15:return _y(o,h,h.type,h.pendingProps,m);case 19:return Sm(o,h,m);case 31:return x=h.pendingProps,m=h.mode,x={mode:x.mode,children:x.children},o===null?(m=Zf(x,m),m.ref=h.ref,h.child=m,m.return=h,h=m):(m=Li(o.child,x),m.ref=h.ref,h.child=m,m.return=h,h=m),h;case 22:return by(o,h,m);case 24:return qs(h),x=$n(Jn),o===null?(R=Nf(),R===null&&(R=fn,z=Gs(),R.pooledCache=z,z.refCount++,z!==null&&(R.pooledCacheLanes|=m),R=z),h.memoizedState={parent:x,cache:R},Oc(h),ga(h,Jn,R)):((o.lanes&m)!==0&&(Oh(o,h),ku(h,null,null,m),Ol()),R=o.memoizedState,z=h.memoizedState,R.parent!==x?(R={parent:x,cache:x},h.memoizedState=R,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=R),ga(h,Jn,x)):(x=z.cache,ga(h,Jn,x),x!==R.cache&&Eh(h,[Jn],m,!0))),yi(o,h,h.pendingProps.children,m),h.child;case 29:throw h.pendingProps}throw Error(a(156,h.tag))}function Fl(o){o.flags|=4}function Am(o,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!s(h)){if(h=kn.current,h!==null&&((Nr&4194048)===Nr?Rn!==null:(Nr&62914560)!==Nr&&(Nr&536870912)===0||h!==Rn))throw fo=Dt,Zs;o.flags|=8192}}function sp(o,h){h!==null&&(o.flags|=4),o.flags&16384&&(h=o.tag!==22?at():536870912,o.lanes|=h,qh|=h)}function Nc(o,h){if(!jr)switch(o.tailMode){case"hidden":h=o.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?h||o.tail===null?o.tail=null:o.tail.sibling=null:x.sibling=null}}function zn(o){var h=o.alternate!==null&&o.alternate.child===o.child,m=0,x=0;if(h)for(var R=o.child;R!==null;)m|=R.lanes|R.childLanes,x|=R.subtreeFlags&65011712,x|=R.flags&65011712,R.return=o,R=R.sibling;else for(R=o.child;R!==null;)m|=R.lanes|R.childLanes,x|=R.subtreeFlags,x|=R.flags,R.return=o,R=R.sibling;return o.subtreeFlags|=x,o.childLanes=m,h}function Cy(o,h,m){var x=h.pendingProps;switch(Mc(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(h),null;case 1:return zn(h),null;case 3:return m=h.stateNode,x=null,o!==null&&(x=o.memoizedState.cache),h.memoizedState.cache!==x&&(h.flags|=2048),za(Jn),St(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(Gr(h)?Fl(h):o===null||o.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,ma())),zn(h),null;case 26:return m=h.memoizedState,o===null?(Fl(h),m!==null?(zn(h),Am(h,m)):(zn(h),h.flags&=-16777217)):m?m!==o.memoizedState?(Fl(h),zn(h),Am(h,m)):(zn(h),h.flags&=-16777217):(o.memoizedProps!==x&&Fl(h),zn(h),h.flags&=-16777217),null;case 27:Nt(h),m=Ft.current;var R=h.type;if(o!==null&&h.stateNode!=null)o.memoizedProps!==x&&Fl(h);else{if(!x){if(h.stateNode===null)throw Error(a(166));return zn(h),null}o=Rt.current,Gr(h)?kf(h):(o=md(R,x,m),h.stateNode=o,Fl(h))}return zn(h),null;case 5:if(Nt(h),m=h.type,o!==null&&h.stateNode!=null)o.memoizedProps!==x&&Fl(h);else{if(!x){if(h.stateNode===null)throw Error(a(166));return zn(h),null}if(o=Rt.current,Gr(h))kf(h);else{switch(R=va(Ft.current),o){case 1:o=R.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:o=R.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":o=R.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":o=R.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":o=R.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof x.is=="string"?R.createElement("select",{is:x.is}):R.createElement("select"),x.multiple?o.multiple=!0:x.size&&(o.size=x.size);break;default:o=typeof x.is=="string"?R.createElement(m,{is:x.is}):R.createElement(m)}}o[tr]=h,o[sr]=x;e:for(R=h.child;R!==null;){if(R.tag===5||R.tag===6)o.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===h)break e;for(;R.sibling===null;){if(R.return===null||R.return===h)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}h.stateNode=o;e:switch(si(o,m,x),m){case"button":case"input":case"select":case"textarea":o=!!x.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Fl(h)}}return zn(h),h.flags&=-16777217,null;case 6:if(o&&h.stateNode!=null)o.memoizedProps!==x&&Fl(h);else{if(typeof x!="string"&&h.stateNode===null)throw Error(a(166));if(o=Ft.current,Gr(h)){if(o=h.stateNode,m=h.memoizedProps,x=null,R=ii,R!==null)switch(R.tag){case 27:case 5:x=R.memoizedProps}o[tr]=h,o=!!(o.nodeValue===m||x!==null&&x.suppressHydrationWarning===!0||ug(o.nodeValue,m)),o||os(h)}else o=va(o).createTextNode(x),o[tr]=h,h.stateNode=o}return zn(h),null;case 13:if(x=h.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(R=Gr(h),x!==null&&x.dehydrated!==null){if(o===null){if(!R)throw Error(a(318));if(R=h.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(a(317));R[tr]=h}else uo(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;zn(h),R=!1}else R=ma(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=R),R=!0;if(!R)return h.flags&256?(Ya(h),h):(Ya(h),null)}if(Ya(h),(h.flags&128)!==0)return h.lanes=m,h;if(m=x!==null,o=o!==null&&o.memoizedState!==null,m){x=h.child,R=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(R=x.alternate.memoizedState.cachePool.pool);var z=null;x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(z=x.memoizedState.cachePool.pool),z!==R&&(x.flags|=2048)}return m!==o&&m&&(h.child.flags|=8192),sp(h,h.updateQueue),zn(h),null;case 4:return St(),o===null&&og(h.stateNode.containerInfo),zn(h),null;case 10:return za(h.type),zn(h),null;case 19:if(st(Ln),R=h.memoizedState,R===null)return zn(h),null;if(x=(h.flags&128)!==0,z=R.rendering,z===null)if(x)Nc(R,!1);else{if(Sn!==0||o!==null&&(o.flags&128)!==0)for(o=h.child;o!==null;){if(z=zl(o),z!==null){for(h.flags|=128,Nc(R,!1),o=z.updateQueue,h.updateQueue=o,sp(h,o),h.subtreeFlags=0,o=m,m=h.child;m!==null;)If(m,o),m=m.sibling;return yt(Ln,Ln.current&1|2),h.child}o=o.sibling}R.tail!==null&&zr()>nd&&(h.flags|=128,x=!0,Nc(R,!1),h.lanes=4194304)}else{if(!x)if(o=zl(z),o!==null){if(h.flags|=128,x=!0,o=o.updateQueue,h.updateQueue=o,sp(h,o),Nc(R,!0),R.tail===null&&R.tailMode==="hidden"&&!z.alternate&&!jr)return zn(h),null}else 2*zr()-R.renderingStartTime>nd&&m!==536870912&&(h.flags|=128,x=!0,Nc(R,!1),h.lanes=4194304);R.isBackwards?(z.sibling=h.child,h.child=z):(o=R.last,o!==null?o.sibling=z:h.child=z,R.last=z)}return R.tail!==null?(h=R.tail,R.rendering=h,R.tail=h.sibling,R.renderingStartTime=zr(),h.sibling=null,o=Ln.current,yt(Ln,x?o&1|2:o&1),h):(zn(h),null);case 22:case 23:return Ya(h),Lu(),x=h.memoizedState!==null,o!==null?o.memoizedState!==null!==x&&(h.flags|=8192):x&&(h.flags|=8192),x?(m&536870912)!==0&&(h.flags&128)===0&&(zn(h),h.subtreeFlags&6&&(h.flags|=8192)):zn(h),m=h.updateQueue,m!==null&&sp(h,m.retryQueue),m=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),x=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(x=h.memoizedState.cachePool.pool),x!==m&&(h.flags|=2048),o!==null&&st(ho),null;case 24:return m=null,o!==null&&(m=o.memoizedState.cache),h.memoizedState.cache!==m&&(h.flags|=2048),za(Jn),zn(h),null;case 25:return null;case 30:return null}throw Error(a(156,h.tag))}function f_(o,h){switch(Mc(h),h.tag){case 1:return o=h.flags,o&65536?(h.flags=o&-65537|128,h):null;case 3:return za(Jn),St(),o=h.flags,(o&65536)!==0&&(o&128)===0?(h.flags=o&-65537|128,h):null;case 26:case 27:case 5:return Nt(h),null;case 13:if(Ya(h),o=h.memoizedState,o!==null&&o.dehydrated!==null){if(h.alternate===null)throw Error(a(340));uo()}return o=h.flags,o&65536?(h.flags=o&-65537|128,h):null;case 19:return st(Ln),null;case 4:return St(),null;case 10:return za(h.type),null;case 22:case 23:return Ya(h),Lu(),o!==null&&st(ho),o=h.flags,o&65536?(h.flags=o&-65537|128,h):null;case 24:return za(Jn),null;case 25:return null;default:return null}}function Ty(o,h){switch(Mc(h),h.tag){case 3:za(Jn),St();break;case 26:case 27:case 5:Nt(h);break;case 4:St();break;case 13:Ya(h);break;case 19:st(Ln);break;case 10:za(h.type);break;case 22:case 23:Ya(h),Lu(),o!==null&&st(ho);break;case 24:za(Jn)}}function Kf(o,h){try{var m=h.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var R=x.next;m=R;do{if((m.tag&o)===o){x=void 0;var z=m.create,Y=m.inst;x=z(),Y.destroy=x}m=m.next}while(m!==R)}}catch(se){dn(h,h.return,se)}}function Js(o,h,m){try{var x=h.updateQueue,R=x!==null?x.lastEffect:null;if(R!==null){var z=R.next;x=z;do{if((x.tag&o)===o){var Y=x.inst,se=Y.destroy;if(se!==void 0){Y.destroy=void 0,R=h;var Ae=m,We=se;try{We()}catch(ut){dn(R,Ae,ut)}}}x=x.next}while(x!==z)}}catch(ut){dn(h,h.return,ut)}}function lp(o){var h=o.updateQueue;if(h!==null){var m=o.stateNode;try{jf(h,m)}catch(x){dn(o,o.return,x)}}}function Cm(o,h,m){m.props=Bl(o.type,o.memoizedProps),m.state=o.memoizedState;try{m.componentWillUnmount()}catch(x){dn(o,h,x)}}function _s(o,h){try{var m=o.ref;if(m!==null){switch(o.tag){case 26:case 27:case 5:var x=o.stateNode;break;case 30:x=o.stateNode;break;default:x=o.stateNode}typeof m=="function"?o.refCleanup=m(x):m.current=x}}catch(R){dn(o,h,R)}}function Qa(o,h){var m=o.ref,x=o.refCleanup;if(m!==null)if(typeof x=="function")try{x()}catch(R){dn(o,h,R)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(R){dn(o,h,R)}else m.current=null}function Ey(o){var h=o.type,m=o.memoizedProps,x=o.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":m.autoFocus&&x.focus();break e;case"img":m.src?x.src=m.src:m.srcSet&&(x.srcset=m.srcSet)}}catch(R){dn(o,o.return,R)}}function Tm(o,h,m){try{var x=o.stateNode;Xy(x,o.type,m,h),x[sr]=h}catch(R){dn(o,o.return,R)}}function My(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Kl(o.type)||o.tag===4}function Em(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||My(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Kl(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Mm(o,h,m){var x=o.tag;if(x===5||x===6)o=o.stateNode,h?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(o,h):(h=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,h.appendChild(o),m=m._reactRootContainer,m!=null||h.onclick!==null||(h.onclick=dd));else if(x!==4&&(x===27&&Kl(o.type)&&(m=o.stateNode,h=null),o=o.child,o!==null))for(Mm(o,h,m),o=o.sibling;o!==null;)Mm(o,h,m),o=o.sibling}function up(o,h,m){var x=o.tag;if(x===5||x===6)o=o.stateNode,h?m.insertBefore(o,h):m.appendChild(o);else if(x!==4&&(x===27&&Kl(o.type)&&(m=o.stateNode),o=o.child,o!==null))for(up(o,h,m),o=o.sibling;o!==null;)up(o,h,m),o=o.sibling}function Ry(o){var h=o.stateNode,m=o.memoizedProps;try{for(var x=o.type,R=h.attributes;R.length;)h.removeAttributeNode(R[0]);si(h,x,m),h[tr]=o,h[sr]=m}catch(z){dn(o,o.return,z)}}var bs=!1,ai=!1,cp=!1,Vh=typeof WeakSet=="function"?WeakSet:Set,ji=null;function Gn(o,h){if(o=o.containerInfo,pd=xe,o=bh(o),xc(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var x=m.getSelection&&m.getSelection();if(x&&x.rangeCount!==0){m=x.anchorNode;var R=x.anchorOffset,z=x.focusNode;x=x.focusOffset;try{m.nodeType,z.nodeType}catch{m=null;break e}var Y=0,se=-1,Ae=-1,We=0,ut=0,mt=o,Ke=null;t:for(;;){for(var Qe;mt!==m||R!==0&&mt.nodeType!==3||(se=Y+R),mt!==z||x!==0&&mt.nodeType!==3||(Ae=Y+x),mt.nodeType===3&&(Y+=mt.nodeValue.length),(Qe=mt.firstChild)!==null;)Ke=mt,mt=Qe;for(;;){if(mt===o)break t;if(Ke===m&&++We===R&&(se=Y),Ke===z&&++ut===x&&(Ae=Y),(Qe=mt.nextSibling)!==null)break;mt=Ke,Ke=mt.parentNode}mt=Qe}m=se===-1||Ae===-1?null:{start:se,end:Ae}}else m=null}m=m||{start:0,end:0}}else m=null;for(Sp={focusedElem:o,selectionRange:m},xe=!1,ji=h;ji!==null;)if(h=ji,o=h.child,(h.subtreeFlags&1024)!==0&&o!==null)o.return=h,ji=o;else for(;ji!==null;){switch(h=ji,z=h.alternate,o=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&z!==null){o=void 0,m=h,R=z.memoizedProps,z=z.memoizedState,x=m.stateNode;try{var dr=Bl(m.type,R,m.elementType===m.type);o=x.getSnapshotBeforeUpdate(dr,z),x.__reactInternalSnapshotBeforeUpdate=o}catch(ur){dn(m,m.return,ur)}}break;case 3:if((o&1024)!==0){if(o=h.stateNode.containerInfo,m=o.nodeType,m===9)Ap(o);else if(m===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Ap(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(a(163))}if(o=h.sibling,o!==null){o.return=h.return,ji=o;break}ji=h.return}}function jc(o,h,m){var x=m.flags;switch(m.tag){case 0:case 11:case 15:Ul(o,m),x&4&&Kf(5,m);break;case 1:if(Ul(o,m),x&4)if(o=m.stateNode,h===null)try{o.componentDidMount()}catch(Y){dn(m,m.return,Y)}else{var R=Bl(m.type,h.memoizedProps);h=h.memoizedState;try{o.componentDidUpdate(R,h,o.__reactInternalSnapshotBeforeUpdate)}catch(Y){dn(m,m.return,Y)}}x&64&&lp(m),x&512&&_s(m,m.return);break;case 3:if(Ul(o,m),x&64&&(o=m.updateQueue,o!==null)){if(h=null,m.child!==null)switch(m.child.tag){case 27:case 5:h=m.child.stateNode;break;case 1:h=m.child.stateNode}try{jf(o,h)}catch(Y){dn(m,m.return,Y)}}break;case 27:h===null&&x&4&&Ry(m);case 26:case 5:Ul(o,m),h===null&&x&4&&Ey(m),x&512&&_s(m,m.return);break;case 12:Ul(o,m);break;case 13:Ul(o,m),x&4&&Im(o,m),x&64&&(o=m.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(m=Ym.bind(null,m),t0(o,m))));break;case 22:if(x=m.memoizedState!==null||bs,!x){h=h!==null&&h.memoizedState!==null||ai,R=bs;var z=ai;bs=x,(ai=h)&&!z?Uu(o,m,(m.subtreeFlags&8772)!==0):Ul(o,m),bs=R,ai=z}break;case 30:break;default:Ul(o,m)}}function Rm(o){var h=o.alternate;h!==null&&(o.alternate=null,Rm(h)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(h=o.stateNode,h!==null&&Mt(h)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var vn=null,aa=!1;function _o(o,h,m){for(m=m.child;m!==null;)Dm(o,h,m),m=m.sibling}function Dm(o,h,m){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(fa,m)}catch{}switch(m.tag){case 26:ai||Qa(m,h),_o(o,h,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:ai||Qa(m,h);var x=vn,R=aa;Kl(m.type)&&(vn=m.stateNode,aa=!1),_o(o,h,m),Wu(m.stateNode),vn=x,aa=R;break;case 5:ai||Qa(m,h);case 6:if(x=vn,R=aa,vn=null,_o(o,h,m),vn=x,aa=R,vn!==null)if(aa)try{(vn.nodeType===9?vn.body:vn.nodeName==="HTML"?vn.ownerDocument.body:vn).removeChild(m.stateNode)}catch(z){dn(m,h,z)}else try{vn.removeChild(m.stateNode)}catch(z){dn(m,h,z)}break;case 18:vn!==null&&(aa?(o=vn,hg(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,m.stateNode),Zn(o)):hg(vn,m.stateNode));break;case 4:x=vn,R=aa,vn=m.stateNode.containerInfo,aa=!0,_o(o,h,m),vn=x,aa=R;break;case 0:case 11:case 14:case 15:ai||Js(2,m,h),ai||Js(4,m,h),_o(o,h,m);break;case 1:ai||(Qa(m,h),x=m.stateNode,typeof x.componentWillUnmount=="function"&&Cm(m,h,x)),_o(o,h,m);break;case 21:_o(o,h,m);break;case 22:ai=(x=ai)||m.memoizedState!==null,_o(o,h,m),ai=x;break;default:_o(o,h,m)}}function Im(o,h){if(h.memoizedState===null&&(o=h.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Zn(o)}catch(m){dn(h,h.return,m)}}function Yf(o){switch(o.tag){case 13:case 19:var h=o.stateNode;return h===null&&(h=o.stateNode=new Vh),h;case 22:return o=o.stateNode,h=o._retryCache,h===null&&(h=o._retryCache=new Vh),h;default:throw Error(a(435,o.tag))}}function Qf(o,h){var m=Yf(o);h.forEach(function(x){var R=Qm.bind(null,o,x);m.has(x)||(m.add(x),x.then(R,R))})}function Bi(o,h){var m=h.deletions;if(m!==null)for(var x=0;x<m.length;x++){var R=m[x],z=o,Y=h,se=Y;e:for(;se!==null;){switch(se.tag){case 27:if(Kl(se.type)){vn=se.stateNode,aa=!1;break e}break;case 5:vn=se.stateNode,aa=!1;break e;case 3:case 4:vn=se.stateNode.containerInfo,aa=!0;break e}se=se.return}if(vn===null)throw Error(a(160));Dm(z,Y,R),vn=null,aa=!1,z=R.alternate,z!==null&&(z.return=null),R.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)Bc(h,o),h=h.sibling}var Ja=null;function Bc(o,h){var m=o.alternate,x=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Bi(h,o),oa(o),x&4&&(Js(3,o,o.return),Kf(3,o),Js(5,o,o.return));break;case 1:Bi(h,o),oa(o),x&512&&(ai||m===null||Qa(m,m.return)),x&64&&bs&&(o=o.updateQueue,o!==null&&(x=o.callbacks,x!==null&&(m=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=m===null?x:m.concat(x))));break;case 26:var R=Ja;if(Bi(h,o),oa(o),x&512&&(ai||m===null||Qa(m,m.return)),x&4){var z=m!==null?m.memoizedState:null;if(x=o.memoizedState,m===null)if(x===null)if(o.stateNode===null){e:{x=o.type,m=o.memoizedProps,R=R.ownerDocument||R;t:switch(x){case"title":z=R.getElementsByTagName("title")[0],(!z||z[Eo]||z[tr]||z.namespaceURI==="http://www.w3.org/2000/svg"||z.hasAttribute("itemprop"))&&(z=R.createElement(x),R.head.insertBefore(z,R.querySelector("head > title"))),si(z,x,m),z[tr]=o,mn(z),x=z;break e;case"link":var Y=s0("link","href",R).get(x+(m.href||""));if(Y){for(var se=0;se<Y.length;se++)if(z=Y[se],z.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&z.getAttribute("rel")===(m.rel==null?null:m.rel)&&z.getAttribute("title")===(m.title==null?null:m.title)&&z.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){Y.splice(se,1);break t}}z=R.createElement(x),si(z,x,m),R.head.appendChild(z);break;case"meta":if(Y=s0("meta","content",R).get(x+(m.content||""))){for(se=0;se<Y.length;se++)if(z=Y[se],z.getAttribute("content")===(m.content==null?null:""+m.content)&&z.getAttribute("name")===(m.name==null?null:m.name)&&z.getAttribute("property")===(m.property==null?null:m.property)&&z.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&z.getAttribute("charset")===(m.charSet==null?null:m.charSet)){Y.splice(se,1);break t}}z=R.createElement(x),si(z,x,m),R.head.appendChild(z);break;default:throw Error(a(468,x))}z[tr]=o,mn(z),x=z}o.stateNode=x}else l(R,o.type,o.stateNode);else o.stateNode=gd(R,x,o.memoizedProps);else z!==x?(z===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):z.count--,x===null?l(R,o.type,o.stateNode):gd(R,x,o.memoizedProps)):x===null&&o.stateNode!==null&&Tm(o,o.memoizedProps,m.memoizedProps)}break;case 27:Bi(h,o),oa(o),x&512&&(ai||m===null||Qa(m,m.return)),m!==null&&x&4&&Tm(o,o.memoizedProps,m.memoizedProps);break;case 5:if(Bi(h,o),oa(o),x&512&&(ai||m===null||Qa(m,m.return)),o.flags&32){R=o.stateNode;try{Io(R,"")}catch(Qe){dn(o,o.return,Qe)}}x&4&&o.stateNode!=null&&(R=o.memoizedProps,Tm(o,R,m!==null?m.memoizedProps:R)),x&1024&&(cp=!0);break;case 6:if(Bi(h,o),oa(o),x&4){if(o.stateNode===null)throw Error(a(162));x=o.memoizedProps,m=o.stateNode;try{m.nodeValue=x}catch(Qe){dn(o,o.return,Qe)}}break;case 3:if(af=null,R=Ja,Ja=Cp(h.containerInfo),Bi(h,o),Ja=R,oa(o),x&4&&m!==null&&m.memoizedState.isDehydrated)try{Zn(h.containerInfo)}catch(Qe){dn(o,o.return,Qe)}cp&&(cp=!1,Dy(o));break;case 4:x=Ja,Ja=Cp(o.stateNode.containerInfo),Bi(h,o),oa(o),Ja=x;break;case 12:Bi(h,o),oa(o);break;case 13:Bi(h,o),oa(o),o.child.flags&8192&&o.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(dp=zr()),x&4&&(x=o.updateQueue,x!==null&&(o.updateQueue=null,Qf(o,x)));break;case 22:R=o.memoizedState!==null;var Ae=m!==null&&m.memoizedState!==null,We=bs,ut=ai;if(bs=We||R,ai=ut||Ae,Bi(h,o),ai=ut,bs=We,oa(o),x&8192)e:for(h=o.stateNode,h._visibility=R?h._visibility&-2:h._visibility|1,R&&(m===null||Ae||bs||ai||bo(o)),m=null,h=o;;){if(h.tag===5||h.tag===26){if(m===null){Ae=m=h;try{if(z=Ae.stateNode,R)Y=z.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{se=Ae.stateNode;var mt=Ae.memoizedProps.style,Ke=mt!=null&&mt.hasOwnProperty("display")?mt.display:null;se.style.display=Ke==null||typeof Ke=="boolean"?"":(""+Ke).trim()}}catch(Qe){dn(Ae,Ae.return,Qe)}}}else if(h.tag===6){if(m===null){Ae=h;try{Ae.stateNode.nodeValue=R?"":Ae.memoizedProps}catch(Qe){dn(Ae,Ae.return,Qe)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===o)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break e;for(;h.sibling===null;){if(h.return===null||h.return===o)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}x&4&&(x=o.updateQueue,x!==null&&(m=x.retryQueue,m!==null&&(x.retryQueue=null,Qf(o,m))));break;case 19:Bi(h,o),oa(o),x&4&&(x=o.updateQueue,x!==null&&(o.updateQueue=null,Qf(o,x)));break;case 30:break;case 21:break;default:Bi(h,o),oa(o)}}function oa(o){var h=o.flags;if(h&2){try{for(var m,x=o.return;x!==null;){if(My(x)){m=x;break}x=x.return}if(m==null)throw Error(a(160));switch(m.tag){case 27:var R=m.stateNode,z=Em(o);up(o,z,R);break;case 5:var Y=m.stateNode;m.flags&32&&(Io(Y,""),m.flags&=-33);var se=Em(o);up(o,se,Y);break;case 3:case 4:var Ae=m.stateNode.containerInfo,We=Em(o);Mm(o,We,Ae);break;default:throw Error(a(161))}}catch(ut){dn(o,o.return,ut)}o.flags&=-3}h&4096&&(o.flags&=-4097)}function Dy(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var h=o;Dy(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),o=o.sibling}}function Ul(o,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)jc(o,h.alternate,h),h=h.sibling}function bo(o){for(o=o.child;o!==null;){var h=o;switch(h.tag){case 0:case 11:case 14:case 15:Js(4,h,h.return),bo(h);break;case 1:Qa(h,h.return);var m=h.stateNode;typeof m.componentWillUnmount=="function"&&Cm(h,h.return,m),bo(h);break;case 27:Wu(h.stateNode);case 26:case 5:Qa(h,h.return),bo(h);break;case 22:h.memoizedState===null&&bo(h);break;case 30:bo(h);break;default:bo(h)}o=o.sibling}}function Uu(o,h,m){for(m=m&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var x=h.alternate,R=o,z=h,Y=z.flags;switch(z.tag){case 0:case 11:case 15:Uu(R,z,m),Kf(4,z);break;case 1:if(Uu(R,z,m),x=z,R=x.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(We){dn(x,x.return,We)}if(x=z,R=x.updateQueue,R!==null){var se=x.stateNode;try{var Ae=R.shared.hiddenCallbacks;if(Ae!==null)for(R.shared.hiddenCallbacks=null,R=0;R<Ae.length;R++)Lh(Ae[R],se)}catch(We){dn(x,x.return,We)}}m&&Y&64&&lp(z),_s(z,z.return);break;case 27:Ry(z);case 26:case 5:Uu(R,z,m),m&&x===null&&Y&4&&Ey(z),_s(z,z.return);break;case 12:Uu(R,z,m);break;case 13:Uu(R,z,m),m&&Y&4&&Im(R,z);break;case 22:z.memoizedState===null&&Uu(R,z,m),_s(z,z.return);break;case 30:break;default:Uu(R,z,m)}h=h.sibling}}function hp(o,h){var m=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),o=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(o=h.memoizedState.cachePool.pool),o!==m&&(o!=null&&o.refCount++,m!=null&&Ml(m))}function Fc(o,h){o=null,h.alternate!==null&&(o=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==o&&(h.refCount++,o!=null&&Ml(o))}function qo(o,h,m,x){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Om(o,h,m,x),h=h.sibling}function Om(o,h,m,x){var R=h.flags;switch(h.tag){case 0:case 11:case 15:qo(o,h,m,x),R&2048&&Kf(9,h);break;case 1:qo(o,h,m,x);break;case 3:qo(o,h,m,x),R&2048&&(o=null,h.alternate!==null&&(o=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==o&&(h.refCount++,o!=null&&Ml(o)));break;case 12:if(R&2048){qo(o,h,m,x),o=h.stateNode;try{var z=h.memoizedProps,Y=z.id,se=z.onPostCommit;typeof se=="function"&&se(Y,h.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Ae){dn(h,h.return,Ae)}}else qo(o,h,m,x);break;case 13:qo(o,h,m,x);break;case 23:break;case 22:z=h.stateNode,Y=h.alternate,h.memoizedState!==null?z._visibility&2?qo(o,h,m,x):Jf(o,h):z._visibility&2?qo(o,h,m,x):(z._visibility|=2,Uc(o,h,m,x,(h.subtreeFlags&10256)!==0)),R&2048&&hp(Y,h);break;case 24:qo(o,h,m,x),R&2048&&Fc(h.alternate,h);break;default:qo(o,h,m,x)}}function Uc(o,h,m,x,R){for(R=R&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var z=o,Y=h,se=m,Ae=x,We=Y.flags;switch(Y.tag){case 0:case 11:case 15:Uc(z,Y,se,Ae,R),Kf(8,Y);break;case 23:break;case 22:var ut=Y.stateNode;Y.memoizedState!==null?ut._visibility&2?Uc(z,Y,se,Ae,R):Jf(z,Y):(ut._visibility|=2,Uc(z,Y,se,Ae,R)),R&&We&2048&&hp(Y.alternate,Y);break;case 24:Uc(z,Y,se,Ae,R),R&&We&2048&&Fc(Y.alternate,Y);break;default:Uc(z,Y,se,Ae,R)}h=h.sibling}}function Jf(o,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var m=o,x=h,R=x.flags;switch(x.tag){case 22:Jf(m,x),R&2048&&hp(x.alternate,x);break;case 24:Jf(m,x),R&2048&&Fc(x.alternate,x);break;default:Jf(m,x)}h=h.sibling}}var ed=8192;function Hh(o){if(o.subtreeFlags&ed)for(o=o.child;o!==null;)Iy(o),o=o.sibling}function Iy(o){switch(o.tag){case 26:Hh(o),o.flags&ed&&o.memoizedState!==null&&w(Ja,o.memoizedState,o.memoizedProps);break;case 5:Hh(o);break;case 3:case 4:var h=Ja;Ja=Cp(o.stateNode.containerInfo),Hh(o),Ja=h;break;case 22:o.memoizedState===null&&(h=o.alternate,h!==null&&h.memoizedState!==null?(h=ed,ed=16777216,Hh(o),ed=h):Hh(o));break;default:Hh(o)}}function Oy(o){var h=o.alternate;if(h!==null&&(o=h.child,o!==null)){h.child=null;do h=o.sibling,o.sibling=null,o=h;while(o!==null)}}function el(o){var h=o.deletions;if((o.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var x=h[m];ji=x,km(x,o)}Oy(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ky(o),o=o.sibling}function ky(o){switch(o.tag){case 0:case 11:case 15:el(o),o.flags&2048&&Js(9,o,o.return);break;case 3:el(o);break;case 12:el(o);break;case 22:var h=o.stateNode;o.memoizedState!==null&&h._visibility&2&&(o.return===null||o.return.tag!==13)?(h._visibility&=-3,fp(o)):el(o);break;default:el(o)}}function fp(o){var h=o.deletions;if((o.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var x=h[m];ji=x,km(x,o)}Oy(o)}for(o=o.child;o!==null;){switch(h=o,h.tag){case 0:case 11:case 15:Js(8,h,h.return),fp(h);break;case 22:m=h.stateNode,m._visibility&2&&(m._visibility&=-3,fp(h));break;default:fp(h)}o=o.sibling}}function km(o,h){for(;ji!==null;){var m=ji;switch(m.tag){case 0:case 11:case 15:Js(8,m,h);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var x=m.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:Ml(m.memoizedState.cache)}if(x=m.child,x!==null)x.return=m,ji=x;else e:for(m=o;ji!==null;){x=ji;var R=x.sibling,z=x.return;if(Rm(x),x===m){ji=null;break e}if(R!==null){R.return=z,ji=R;break e}ji=z}}}var d_={getCacheForType:function(o){var h=$n(Jn),m=h.data.get(o);return m===void 0&&(m=o(),h.data.set(o,m)),m}},Ly=typeof WeakMap=="function"?WeakMap:Map,nn=0,fn=null,Cr=null,Nr=0,an=0,xo=null,$l=!1,$c=!1,Lm=!1,Vl=0,Sn=0,Hl=0,Vc=0,zm=0,Go=0,qh=0,td=null,Na=null,rd=!1,dp=0,nd=1/0,id=null,$u=null,vi=0,Vu=null,Hc=null,Gh=0,Nm=0,jm=null,Bm=null,ad=0,Fm=null;function sa(){if((nn&2)!==0&&Nr!==0)return Nr&-Nr;if(Ue.T!==null){var o=ls;return o!==0?o:cd()}return Yn()}function oi(){Go===0&&(Go=(Nr&536870912)===0||jr?gt():536870912);var o=kn.current;return o!==null&&(o.flags|=32),Go}function ja(o,h,m){(o===fn&&(an===2||an===9)||o.cancelPendingCommit!==null)&&(Wh(o,0),wo(o,Nr,Go,!1)),ke(o,m),((nn&2)===0||o!==fn)&&(o===fn&&((nn&2)===0&&(Vc|=m),Sn===4&&wo(o,Nr,Go,!1)),xs(o))}function Um(o,h,m){if((nn&6)!==0)throw Error(a(327));var x=!m&&(h&124)===0&&(h&o.expiredLanes)===0||Oe(o,h),R=x?m_(o,h):Gm(o,h,!0),z=x;do{if(R===0){$c&&!x&&wo(o,h,0,!1);break}else{if(m=o.current.alternate,z&&!Vm(m)){R=Gm(o,h,!1),z=!1;continue}if(R===2){if(z=h,o.errorRecoveryDisabledLanes&z)var Y=0;else Y=o.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){h=Y;e:{var se=o;R=td;var Ae=se.current.memoizedState.isDehydrated;if(Ae&&(Wh(se,Y).flags|=256),Y=Gm(se,Y,!1),Y!==2){if(Lm&&!Ae){se.errorRecoveryDisabledLanes|=z,Vc|=z,R=4;break e}z=Na,Na=R,z!==null&&(Na===null?Na=z:Na.push.apply(Na,z))}R=Y}if(z=!1,R!==2)continue}}if(R===1){Wh(o,0),wo(o,h,0,!0);break}e:{switch(x=o,z=R,z){case 0:case 1:throw Error(a(345));case 4:if((h&4194048)!==h)break;case 6:wo(x,h,Go,!$l);break e;case 2:Na=null;break;case 3:case 5:break;default:throw Error(a(329))}if((h&62914560)===h&&(R=dp+300-zr(),10<R)){if(wo(x,h,Go,!$l),qe(x,0,!0)!==0)break e;x.timeoutHandle=cg($m.bind(null,x,m,Na,id,rd,h,Go,Vc,qh,$l,z,2,-0,0),R);break e}$m(x,m,Na,id,rd,h,Go,Vc,qh,$l,z,0,-0,0)}}break}while(!0);xs(o)}function $m(o,h,m,x,R,z,Y,se,Ae,We,ut,mt,Ke,Qe){if(o.timeoutHandle=-1,mt=h.subtreeFlags,(mt&8192||(mt&16785408)===16785408)&&(f={stylesheets:null,count:0,unsuspend:v},Iy(h),mt=P(),mt!==null)){o.cancelPendingCommit=mt(ql.bind(null,o,h,z,m,x,R,Y,se,Ae,ut,1,Ke,Qe)),wo(o,z,Y,!We);return}ql(o,h,z,m,x,R,Y,se,Ae)}function Vm(o){for(var h=o;;){var m=h.tag;if((m===0||m===11||m===15)&&h.flags&16384&&(m=h.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var x=0;x<m.length;x++){var R=m[x],z=R.getSnapshot;R=R.value;try{if(!Zi(z(),R))return!1}catch{return!1}}if(m=h.child,h.subtreeFlags&16384&&m!==null)m.return=h,h=m;else{if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function wo(o,h,m,x){h&=~zm,h&=~Vc,o.suspendedLanes|=h,o.pingedLanes&=~h,x&&(o.warmLanes|=h),x=o.expirationTimes;for(var R=h;0<R;){var z=31-Re(R),Y=1<<z;x[z]=-1,R&=~Y}m!==0&&br(o,m,h)}function od(){return(nn&6)===0?(Yh(0),!1):!0}function Hm(){if(Cr!==null){if(an===0)var o=Cr.return;else o=Cr,Yi=ss=null,Nu(o),Fr=null,yn=0,o=Cr;for(;o!==null;)Ty(o.alternate,o),o=o.return;Cr=null}}function Wh(o,h){var m=o.timeoutHandle;m!==-1&&(o.timeoutHandle=-1,Yy(m)),m=o.cancelPendingCommit,m!==null&&(o.cancelPendingCommit=null,m()),Hm(),fn=o,Cr=m=Li(o.current,null),Nr=h,an=0,xo=null,$l=!1,$c=Oe(o,h),Lm=!1,qh=Go=zm=Vc=Hl=Sn=0,Na=td=null,rd=!1,(h&8)!==0&&(h|=h&32);var x=o.entangledLanes;if(x!==0)for(o=o.entanglements,x&=h;0<x;){var R=31-Re(x),z=1<<R;h|=o[R],x&=~z}return Vl=h,El(),m}function zy(o,h){Sr=null,Ue.H=gi,h===Iu||h===ea?(h=Il(),an=3):h===Zs?(h=Il(),an=4):an=h===yy?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,xo=h,Cr===null&&(Sn=1,Fh(o,di(h,o.current)))}function Ny(){var o=Ue.H;return Ue.H=gi,o===null?gi:o}function jy(){var o=Ue.A;return Ue.A=d_,o}function qm(){Sn=4,$l||(Nr&4194048)!==Nr&&kn.current!==null||($c=!0),(Hl&134217727)===0&&(Vc&134217727)===0||fn===null||wo(fn,Nr,Go,!1)}function Gm(o,h,m){var x=nn;nn|=2;var R=Ny(),z=jy();(fn!==o||Nr!==h)&&(id=null,Wh(o,h)),h=!1;var Y=Sn;e:do try{if(an!==0&&Cr!==null){var se=Cr,Ae=xo;switch(an){case 8:Hm(),Y=6;break e;case 3:case 2:case 9:case 6:kn.current===null&&(h=!0);var We=an;if(an=0,xo=null,qc(o,se,Ae,We),m&&$c){Y=0;break e}break;default:We=an,an=0,xo=null,qc(o,se,Ae,We)}}p_(),Y=Sn;break}catch(ut){zy(o,ut)}while(!0);return h&&o.shellSuspendCounter++,Yi=ss=null,nn=x,Ue.H=R,Ue.A=z,Cr===null&&(fn=null,Nr=0,El()),Y}function p_(){for(;Cr!==null;)By(Cr)}function m_(o,h){var m=nn;nn|=2;var x=Ny(),R=jy();fn!==o||Nr!==h?(id=null,nd=zr()+500,Wh(o,h)):$c=Oe(o,h);e:do try{if(an!==0&&Cr!==null){h=Cr;var z=xo;t:switch(an){case 1:an=0,xo=null,qc(o,h,z,1);break;case 2:case 9:if(Rh(z)){an=0,xo=null,Fy(h);break}h=function(){an!==2&&an!==9||fn!==o||(an=7),xs(o)},z.then(h,h);break e;case 3:an=7;break e;case 4:an=5;break e;case 7:Rh(z)?(an=0,xo=null,Fy(h)):(an=0,xo=null,qc(o,h,z,7));break;case 5:var Y=null;switch(Cr.tag){case 26:Y=Cr.memoizedState;case 5:case 27:var se=Cr;if(!Y||s(Y)){an=0,xo=null;var Ae=se.sibling;if(Ae!==null)Cr=Ae;else{var We=se.return;We!==null?(Cr=We,Zh(We)):Cr=null}break t}}an=0,xo=null,qc(o,h,z,5);break;case 6:an=0,xo=null,qc(o,h,z,6);break;case 8:Hm(),Sn=6;break e;default:throw Error(a(462))}}g_();break}catch(ut){zy(o,ut)}while(!0);return Yi=ss=null,Ue.H=x,Ue.A=R,nn=m,Cr!==null?0:(fn=null,Nr=0,El(),Sn)}function g_(){for(;Cr!==null&&!wr();)By(Cr)}function By(o){var h=Ay(o.alternate,o,Vl);o.memoizedProps=o.pendingProps,h===null?Zh(o):Cr=h}function Fy(o){var h=o,m=h.alternate;switch(h.tag){case 15:case 0:h=bm(m,h,h.pendingProps,h.type,void 0,Nr);break;case 11:h=bm(m,h,h.pendingProps,h.type.render,h.ref,Nr);break;case 5:Nu(h);default:Ty(m,h),h=Cr=If(h,Vl),h=Ay(m,h,Vl)}o.memoizedProps=o.pendingProps,h===null?Zh(o):Cr=h}function qc(o,h,m,x){Yi=ss=null,Nu(h),Fr=null,yn=0;var R=h.return;try{if(Uh(o,R,h,m,Nr)){Sn=1,Fh(o,di(m,o.current)),Cr=null;return}}catch(z){if(R!==null)throw Cr=R,z;Sn=1,Fh(o,di(m,o.current)),Cr=null;return}h.flags&32768?(jr||x===1?o=!0:$c||(Nr&536870912)!==0?o=!1:($l=o=!0,(x===2||x===9||x===3||x===6)&&(x=kn.current,x!==null&&x.tag===13&&(x.flags|=16384))),Wm(h,o)):Zh(h)}function Zh(o){var h=o;do{if((h.flags&32768)!==0){Wm(h,$l);return}o=h.return;var m=Cy(h.alternate,h,Vl);if(m!==null){Cr=m;return}if(h=h.sibling,h!==null){Cr=h;return}Cr=h=o}while(h!==null);Sn===0&&(Sn=5)}function Wm(o,h){do{var m=f_(o.alternate,o);if(m!==null){m.flags&=32767,Cr=m;return}if(m=o.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!h&&(o=o.sibling,o!==null)){Cr=o;return}Cr=o=m}while(o!==null);Sn=6,Cr=null}function ql(o,h,m,x,R,z,Y,se,Ae){o.cancelPendingCommit=null;do pp();while(vi!==0);if((nn&6)!==0)throw Error(a(327));if(h!==null){if(h===o.current)throw Error(a(177));if(z=h.lanes|h.childLanes,z|=Tl,ar(o,m,z,Y,se,Ae),o===fn&&(Cr=fn=null,Nr=0),Hc=h,Vu=o,Gh=m,Nm=z,jm=R,Bm=x,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,y_(bi,function(){return Uy(),null})):(o.callbackNode=null,o.callbackPriority=0),x=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||x){x=Ue.T,Ue.T=null,R=ct.p,ct.p=2,Y=nn,nn|=4;try{Gn(o,h,m)}finally{nn=Y,ct.p=R,Ue.T=x}}vi=1,Xh(),Gc(),sd()}}function Xh(){if(vi===1){vi=0;var o=Vu,h=Hc,m=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||m){m=Ue.T,Ue.T=null;var x=ct.p;ct.p=2;var R=nn;nn|=4;try{Bc(h,o);var z=Sp,Y=bh(o.containerInfo),se=z.focusedElem,Ae=z.selectionRange;if(Y!==se&&se&&se.ownerDocument&&Ir(se.ownerDocument.documentElement,se)){if(Ae!==null&&xc(se)){var We=Ae.start,ut=Ae.end;if(ut===void 0&&(ut=We),"selectionStart"in se)se.selectionStart=We,se.selectionEnd=Math.min(ut,se.value.length);else{var mt=se.ownerDocument||document,Ke=mt&&mt.defaultView||window;if(Ke.getSelection){var Qe=Ke.getSelection(),dr=se.textContent.length,ur=Math.min(Ae.start,dr),ln=Ae.end===void 0?ur:Math.min(Ae.end,dr);!Qe.extend&&ur>ln&&(Y=ln,ln=ur,ur=Y);var Be=No(se,ur),ze=No(se,ln);if(Be&&ze&&(Qe.rangeCount!==1||Qe.anchorNode!==Be.node||Qe.anchorOffset!==Be.offset||Qe.focusNode!==ze.node||Qe.focusOffset!==ze.offset)){var $e=mt.createRange();$e.setStart(Be.node,Be.offset),Qe.removeAllRanges(),ur>ln?(Qe.addRange($e),Qe.extend(ze.node,ze.offset)):($e.setEnd(ze.node,ze.offset),Qe.addRange($e))}}}}for(mt=[],Qe=se;Qe=Qe.parentNode;)Qe.nodeType===1&&mt.push({element:Qe,left:Qe.scrollLeft,top:Qe.scrollTop});for(typeof se.focus=="function"&&se.focus(),se=0;se<mt.length;se++){var pt=mt[se];pt.element.scrollLeft=pt.left,pt.element.scrollTop=pt.top}}xe=!!pd,Sp=pd=null}finally{nn=R,ct.p=x,Ue.T=m}}o.current=h,vi=2}}function Gc(){if(vi===2){vi=0;var o=Vu,h=Hc,m=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||m){m=Ue.T,Ue.T=null;var x=ct.p;ct.p=2;var R=nn;nn|=4;try{jc(o,h.alternate,h)}finally{nn=R,ct.p=x,Ue.T=m}}vi=3}}function sd(){if(vi===4||vi===3){vi=0,Dr();var o=Vu,h=Hc,m=Gh,x=Bm;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?vi=5:(vi=0,Hc=Vu=null,ld(o,o.pendingLanes));var R=o.pendingLanes;if(R===0&&($u=null),Ur(m),h=h.stateNode,An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(fa,h,void 0,(h.current.flags&128)===128)}catch{}if(x!==null){h=Ue.T,R=ct.p,ct.p=2,Ue.T=null;try{for(var z=o.onRecoverableError,Y=0;Y<x.length;Y++){var se=x[Y];z(se.value,{componentStack:se.stack})}}finally{Ue.T=h,ct.p=R}}(Gh&3)!==0&&pp(),xs(o),R=o.pendingLanes,(m&4194090)!==0&&(R&42)!==0?o===Fm?ad++:(ad=0,Fm=o):ad=0,Yh(0)}}function ld(o,h){(o.pooledCacheLanes&=h)===0&&(h=o.pooledCache,h!=null&&(o.pooledCache=null,Ml(h)))}function pp(o){return Xh(),Gc(),sd(),Uy()}function Uy(){if(vi!==5)return!1;var o=Vu,h=Nm;Nm=0;var m=Ur(Gh),x=Ue.T,R=ct.p;try{ct.p=32>m?32:m,Ue.T=null,m=jm,jm=null;var z=Vu,Y=Gh;if(vi=0,Hc=Vu=null,Gh=0,(nn&6)!==0)throw Error(a(331));var se=nn;if(nn|=4,ky(z.current),Om(z,z.current,Y,m),nn=se,Yh(0,!1),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(fa,z)}catch{}return!0}finally{ct.p=R,Ue.T=x,ld(o,h)}}function Zm(o,h,m){h=di(m,h),h=Vf(o.stateNode,h,2),o=us(o,h,2),o!==null&&(ke(o,2),xs(o))}function dn(o,h,m){if(o.tag===3)Zm(o,o,m);else for(;h!==null;){if(h.tag===3){Zm(h,o,m);break}else if(h.tag===1){var x=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&($u===null||!$u.has(x))){o=di(m,o),m=vm(2),x=us(h,m,2),x!==null&&(_m(m,x,h,o),ke(x,2),xs(x));break}}h=h.return}}function Xm(o,h,m){var x=o.pingCache;if(x===null){x=o.pingCache=new Ly;var R=new Set;x.set(h,R)}else R=x.get(h),R===void 0&&(R=new Set,x.set(h,R));R.has(m)||(Lm=!0,R.add(m),o=$y.bind(null,o,h,m),h.then(o,o))}function $y(o,h,m){var x=o.pingCache;x!==null&&x.delete(h),o.pingedLanes|=o.suspendedLanes&m,o.warmLanes&=~m,fn===o&&(Nr&m)===m&&(Sn===4||Sn===3&&(Nr&62914560)===Nr&&300>zr()-dp?(nn&2)===0&&Wh(o,0):zm|=m,qh===Nr&&(qh=0)),xs(o)}function Km(o,h){h===0&&(h=at()),o=Ia(o,h),o!==null&&(ke(o,h),xs(o))}function Ym(o){var h=o.memoizedState,m=0;h!==null&&(m=h.retryLane),Km(o,m)}function Qm(o,h){var m=0;switch(o.tag){case 13:var x=o.stateNode,R=o.memoizedState;R!==null&&(m=R.retryLane);break;case 19:x=o.stateNode;break;case 22:x=o.stateNode._retryCache;break;default:throw Error(a(314))}x!==null&&x.delete(h),Km(o,m)}function y_(o,h){return Ht(o,h)}var ud=null,Kh=null,Jm=!1,mp=!1,eg=!1,Wc=0;function xs(o){o!==Kh&&o.next===null&&(Kh===null?ud=Kh=o:Kh=Kh.next=o),mp=!0,Jm||(Jm=!0,yp())}function Yh(o,h){if(!eg&&mp){eg=!0;do for(var m=!1,x=ud;x!==null;){if(o!==0){var R=x.pendingLanes;if(R===0)var z=0;else{var Y=x.suspendedLanes,se=x.pingedLanes;z=(1<<31-Re(42|o)+1)-1,z&=R&~(Y&~se),z=z&201326741?z&201326741|1:z?z|2:0}z!==0&&(m=!0,Vy(x,z))}else z=Nr,z=qe(x,x===fn?z:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(z&3)===0||Oe(x,z)||(m=!0,Vy(x,z));x=x.next}while(m);eg=!1}}function Gl(){Wl()}function Wl(){mp=Jm=!1;var o=0;Wc!==0&&(Ky()&&(o=Wc),Wc=0);for(var h=zr(),m=null,x=ud;x!==null;){var R=x.next,z=tg(x,h);z===0?(x.next=null,m===null?ud=R:m.next=R,R===null&&(Kh=m)):(m=x,(o!==0||(z&3)!==0)&&(mp=!0)),x=R}Yh(o)}function tg(o,h){for(var m=o.suspendedLanes,x=o.pingedLanes,R=o.expirationTimes,z=o.pendingLanes&-62914561;0<z;){var Y=31-Re(z),se=1<<Y,Ae=R[Y];Ae===-1?((se&m)===0||(se&x)!==0)&&(R[Y]=Je(se,h)):Ae<=h&&(o.expiredLanes|=se),z&=~se}if(h=fn,m=Nr,m=qe(o,o===h?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),x=o.callbackNode,m===0||o===h&&(an===2||an===9)||o.cancelPendingCommit!==null)return x!==null&&x!==null&&Lt(x),o.callbackNode=null,o.callbackPriority=0;if((m&3)===0||Oe(o,m)){if(h=m&-m,h===o.callbackPriority)return h;switch(x!==null&&Lt(x),Ur(m)){case 2:case 8:m=qi;break;case 32:m=bi;break;case 268435456:m=Ea;break;default:m=bi}return x=gp.bind(null,o),m=Ht(m,x),o.callbackPriority=h,o.callbackNode=m,h}return x!==null&&x!==null&&Lt(x),o.callbackPriority=2,o.callbackNode=null,2}function gp(o,h){if(vi!==0&&vi!==5)return o.callbackNode=null,o.callbackPriority=0,null;var m=o.callbackNode;if(pp()&&o.callbackNode!==m)return null;var x=Nr;return x=qe(o,o===fn?x:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),x===0?null:(Um(o,x,h),tg(o,zr()),o.callbackNode!=null&&o.callbackNode===m?gp.bind(null,o):null)}function Vy(o,h){if(pp())return null;Um(o,h,!0)}function yp(){Jy(function(){(nn&6)!==0?Ht(Kn,Gl):Wl()})}function cd(){return Wc===0&&(Wc=gt()),Wc}function Hy(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:_r(""+o)}function vp(o,h){var m=h.ownerDocument.createElement("input");return m.name=h.name,m.value=h.value,o.id&&m.setAttribute("form",o.id),h.parentNode.insertBefore(m,h),o=new FormData(o),m.parentNode.removeChild(m),o}function rg(o,h,m,x,R){if(h==="submit"&&m&&m.stateNode===R){var z=Hy((R[sr]||null).action),Y=x.submitter;Y&&(h=(h=Y[sr]||null)?Hy(h.formAction):Y.getAttribute("formAction"),h!==null&&(z=h,Y=null));var se=new Ra("action","action",null,x,R);o.push({event:se,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(Wc!==0){var Ae=Y?vp(R,Y):new FormData(R);rn(m,{pending:!0,data:Ae,method:R.method,action:z},null,Ae)}}else typeof z=="function"&&(se.preventDefault(),Ae=Y?vp(R,Y):new FormData(R),rn(m,{pending:!0,data:Ae,method:R.method,action:z},z,Ae))},currentTarget:R}]})}}for(var Hu=0;Hu<wh.length;Hu++){var _p=wh[Hu],qy=_p.toLowerCase(),ng=_p[0].toUpperCase()+_p.slice(1);Xa(qy,"on"+ng)}Xa(wc,"onAnimationEnd"),Xa(Sc,"onAnimationIteration"),Xa(Pc,"onAnimationStart"),Xa("dblclick","onDoubleClick"),Xa("focusin","onFocus"),Xa("focusout","onBlur"),Xa(Rf,"onTransitionRun"),Xa(Al,"onTransitionStart"),Xa(Ac,"onTransitionCancel"),Xa(Cl,"onTransitionEnd"),Qo("onMouseEnter",["mouseout","mouseover"]),Qo("onMouseLeave",["mouseout","mouseover"]),Qo("onPointerEnter",["pointerout","pointerover"]),Qo("onPointerLeave",["pointerout","pointerover"]),da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),da("onBeforeInput",["compositionend","keypress","textInput","paste"]),da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qh));function ig(o,h){h=(h&4)!==0;for(var m=0;m<o.length;m++){var x=o[m],R=x.event;x=x.listeners;e:{var z=void 0;if(h)for(var Y=x.length-1;0<=Y;Y--){var se=x[Y],Ae=se.instance,We=se.currentTarget;if(se=se.listener,Ae!==z&&R.isPropagationStopped())break e;z=se,R.currentTarget=We;try{z(R)}catch(ut){Uf(ut)}R.currentTarget=null,z=Ae}else for(Y=0;Y<x.length;Y++){if(se=x[Y],Ae=se.instance,We=se.currentTarget,se=se.listener,Ae!==z&&R.isPropagationStopped())break e;z=se,R.currentTarget=We;try{z(R)}catch(ut){Uf(ut)}R.currentTarget=null,z=Ae}}}}function kr(o,h){var m=h[vt];m===void 0&&(m=h[vt]=new Set);var x=o+"__bubble";m.has(x)||(Gy(h,o,2,!1),m.add(x))}function ag(o,h,m){var x=0;h&&(x|=4),Gy(m,o,x,h)}var hd="_reactListening"+Math.random().toString(36).slice(2);function og(o){if(!o[hd]){o[hd]=!0,gr.forEach(function(m){m!=="selectionchange"&&(bp.has(m)||ag(m,!1,o),ag(m,!0,o))});var h=o.nodeType===9?o:o.ownerDocument;h===null||h[hd]||(h[hd]=!0,ag("selectionchange",!1,h))}}function Gy(o,h,m,x){switch(Et(h)){case 2:var R=Ce;break;case 8:R=Ge;break;default:R=Ye}m=R.bind(null,h,m,o),R=void 0,!Pi||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(R=!0),x?R!==void 0?o.addEventListener(h,m,{capture:!0,passive:R}):o.addEventListener(h,m,!0):R!==void 0?o.addEventListener(h,m,{passive:R}):o.addEventListener(h,m,!1)}function sg(o,h,m,x,R){var z=x;if((h&1)===0&&(h&2)===0&&x!==null)e:for(;;){if(x===null)return;var Y=x.tag;if(Y===3||Y===4){var se=x.stateNode.containerInfo;if(se===R)break;if(Y===4)for(Y=x.return;Y!==null;){var Ae=Y.tag;if((Ae===3||Ae===4)&&Y.stateNode.containerInfo===R)return;Y=Y.return}for(;se!==null;){if(Y=mr(se),Y===null)return;if(Ae=Y.tag,Ae===5||Ae===6||Ae===26||Ae===27){x=z=Y;continue e}se=se.parentNode}}x=x.return}Un(function(){var We=z,ut=du(m),mt=[];e:{var Ke=Da.get(o);if(Ke!==void 0){var Qe=Ra,dr=o;switch(o){case"keypress":if(lr(m)===0)break e;case"keydown":case"keyup":Qe=pc;break;case"focusin":dr="focus",Qe=yl;break;case"focusout":dr="blur",Qe=yl;break;case"beforeblur":case"afterblur":Qe=yl;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Qe=cc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Qe=fi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Qe=hm;break;case wc:case Sc:case Pc:Qe=On;break;case Cl:Qe=fm;break;case"scroll":case"scrollend":Qe=_f;break;case"wheel":Qe=vh;break;case"copy":case"cut":case"paste":Qe=hc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Qe=xf;break;case"toggle":case"beforetoggle":Qe=bl}var ur=(h&4)!==0,ln=!ur&&(o==="scroll"||o==="scrollend"),Be=ur?Ke!==null?Ke+"Capture":null:Ke;ur=[];for(var ze=We,$e;ze!==null;){var pt=ze;if($e=pt.stateNode,pt=pt.tag,pt!==5&&pt!==26&&pt!==27||$e===null||Be===null||(pt=Br(ze,Be),pt!=null&&ur.push(fd(ze,pt,$e))),ln)break;ze=ze.return}0<ur.length&&(Ke=new Qe(Ke,dr,null,m,ut),mt.push({event:Ke,listeners:ur}))}}if((h&7)===0){e:{if(Ke=o==="mouseover"||o==="pointerover",Qe=o==="mouseout"||o==="pointerout",Ke&&m!==es&&(dr=m.relatedTarget||m.fromElement)&&(mr(dr)||dr[pn]))break e;if((Qe||Ke)&&(Ke=ut.window===ut?ut:(Ke=ut.ownerDocument)?Ke.defaultView||Ke.parentWindow:window,Qe?(dr=m.relatedTarget||m.toElement,Qe=We,dr=dr?mr(dr):null,dr!==null&&(ln=g(dr),ur=dr.tag,dr!==ln||ur!==5&&ur!==27&&ur!==6)&&(dr=null)):(Qe=null,dr=We),Qe!==dr)){if(ur=cc,pt="onMouseLeave",Be="onMouseEnter",ze="mouse",(o==="pointerout"||o==="pointerover")&&(ur=xf,pt="onPointerLeave",Be="onPointerEnter",ze="pointer"),ln=Qe==null?Ke:Fn(Qe),$e=dr==null?Ke:Fn(dr),Ke=new ur(pt,ze+"leave",Qe,m,ut),Ke.target=ln,Ke.relatedTarget=$e,pt=null,mr(ut)===We&&(ur=new ur(Be,ze+"enter",dr,m,ut),ur.target=$e,ur.relatedTarget=ln,pt=ur),ln=pt,Qe&&dr)t:{for(ur=Qe,Be=dr,ze=0,$e=ur;$e;$e=qu($e))ze++;for($e=0,pt=Be;pt;pt=qu(pt))$e++;for(;0<ze-$e;)ur=qu(ur),ze--;for(;0<$e-ze;)Be=qu(Be),$e--;for(;ze--;){if(ur===Be||Be!==null&&ur===Be.alternate)break t;ur=qu(ur),Be=qu(Be)}ur=null}else ur=null;Qe!==null&&Zl(mt,Ke,Qe,ur,!1),dr!==null&&ln!==null&&Zl(mt,ln,dr,ur,!0)}}e:{if(Ke=We?Fn(We):window,Qe=Ke.nodeName&&Ke.nodeName.toLowerCase(),Qe==="select"||Qe==="input"&&Ke.type==="file")var Wt=Tf;else if(Kd(Ke))if(Ns)Wt=ep;else{Wt=mm;var Rr=Qd}else Qe=Ke.nodeName,!Qe||Qe.toLowerCase()!=="input"||Ke.type!=="checkbox"&&Ke.type!=="radio"?We&&Oo(We.elementType)&&(Wt=Tf):Wt=Jd;if(Wt&&(Wt=Wt(o,We))){Cf(mt,Wt,m,ut);break e}Rr&&Rr(o,Ke,We),o==="focusout"&&We&&Ke.type==="number"&&We.memoizedProps.value!=null&&uc(Ke,"number",Ke.value)}switch(Rr=We?Fn(We):window,o){case"focusin":(Kd(Rr)||Rr.contentEditable==="true")&&(js=Rr,rs=We,Sl=null);break;case"focusout":Sl=rs=js=null;break;case"mousedown":Mf=!0;break;case"contextmenu":case"mouseup":case"dragend":Mf=!1,rp(mt,m,ut);break;case"selectionchange":if(tp)break;case"keydown":case"keyup":rp(mt,m,ut)}var nr;if(gu)e:{switch(o){case"compositionstart":var hr="onCompositionStart";break e;case"compositionend":hr="onCompositionEnd";break e;case"compositionupdate":hr="onCompositionUpdate";break e}hr=void 0}else _u?Zd(o,m)&&(hr="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(hr="onCompositionStart");hr&&(mc&&m.locale!=="ko"&&(_u||hr!=="onCompositionStart"?hr==="onCompositionEnd"&&_u&&(nr=er()):(En=ut,Yr="value"in En?En.value:En.textContent,_u=!0)),Rr=xp(We,hr),0<Rr.length&&(hr=new Wd(hr,o,null,m,ut),mt.push({event:hr,listeners:Rr}),nr?hr.data=nr:(nr=gc(m),nr!==null&&(hr.data=nr)))),(nr=pm?xl(o,m):Xd(o,m))&&(hr=xp(We,"onBeforeInput"),0<hr.length&&(Rr=new Wd("onBeforeInput","beforeinput",null,m,ut),mt.push({event:Rr,listeners:hr}),Rr.data=nr)),rg(mt,o,We,m,ut)}ig(mt,h)})}function fd(o,h,m){return{instance:o,listener:h,currentTarget:m}}function xp(o,h){for(var m=h+"Capture",x=[];o!==null;){var R=o,z=R.stateNode;if(R=R.tag,R!==5&&R!==26&&R!==27||z===null||(R=Br(o,m),R!=null&&x.unshift(fd(o,R,z)),R=Br(o,h),R!=null&&x.push(fd(o,R,z))),o.tag===3)return x;o=o.return}return[]}function qu(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function Zl(o,h,m,x,R){for(var z=h._reactName,Y=[];m!==null&&m!==x;){var se=m,Ae=se.alternate,We=se.stateNode;if(se=se.tag,Ae!==null&&Ae===x)break;se!==5&&se!==26&&se!==27||We===null||(Ae=We,R?(We=Br(m,z),We!=null&&Y.unshift(fd(m,We,Ae))):R||(We=Br(m,z),We!=null&&Y.push(fd(m,We,Ae)))),m=m.return}Y.length!==0&&o.push({event:h,listeners:Y})}var Wy=/\r\n?/g,Zy=/\u0000|\uFFFD/g;function lg(o){return(typeof o=="string"?o:""+o).replace(Wy,`
`).replace(Zy,"")}function ug(o,h){return h=lg(h),lg(o)===h}function dd(){}function Jr(o,h,m,x,R,z){switch(m){case"children":typeof x=="string"?h==="body"||h==="textarea"&&x===""||Io(o,x):(typeof x=="number"||typeof x=="bigint")&&h!=="body"&&Io(o,""+x);break;case"className":$r(o,"class",x);break;case"tabIndex":$r(o,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":$r(o,m,x);break;case"style":Os(o,x,z);break;case"data":if(h!=="object"){$r(o,"data",x);break}case"src":case"href":if(x===""&&(h!=="a"||m!=="href")){o.removeAttribute(m);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){o.removeAttribute(m);break}x=_r(""+x),o.setAttribute(m,x);break;case"action":case"formAction":if(typeof x=="function"){o.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof z=="function"&&(m==="formAction"?(h!=="input"&&Jr(o,h,"name",R.name,R,null),Jr(o,h,"formEncType",R.formEncType,R,null),Jr(o,h,"formMethod",R.formMethod,R,null),Jr(o,h,"formTarget",R.formTarget,R,null)):(Jr(o,h,"encType",R.encType,R,null),Jr(o,h,"method",R.method,R,null),Jr(o,h,"target",R.target,R,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){o.removeAttribute(m);break}x=_r(""+x),o.setAttribute(m,x);break;case"onClick":x!=null&&(o.onclick=dd);break;case"onScroll":x!=null&&kr("scroll",o);break;case"onScrollEnd":x!=null&&kr("scrollend",o);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(a(61));if(m=x.__html,m!=null){if(R.children!=null)throw Error(a(60));o.innerHTML=m}}break;case"multiple":o.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":o.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){o.removeAttribute("xlink:href");break}m=_r(""+x),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?o.setAttribute(m,""+x):o.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?o.setAttribute(m,""):o.removeAttribute(m);break;case"capture":case"download":x===!0?o.setAttribute(m,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?o.setAttribute(m,x):o.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?o.setAttribute(m,x):o.removeAttribute(m);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?o.removeAttribute(m):o.setAttribute(m,x);break;case"popover":kr("beforetoggle",o),kr("toggle",o),xi(o,"popover",x);break;case"xlinkActuate":Ro(o,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":Ro(o,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":Ro(o,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":Ro(o,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":Ro(o,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":Ro(o,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":Ro(o,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":Ro(o,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":Ro(o,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":xi(o,"is",x);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Jo.get(m)||m,xi(o,m,x))}}function wp(o,h,m,x,R,z){switch(m){case"style":Os(o,x,z);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(a(61));if(m=x.__html,m!=null){if(R.children!=null)throw Error(a(60));o.innerHTML=m}}break;case"children":typeof x=="string"?Io(o,x):(typeof x=="number"||typeof x=="bigint")&&Io(o,""+x);break;case"onScroll":x!=null&&kr("scroll",o);break;case"onScrollEnd":x!=null&&kr("scrollend",o);break;case"onClick":x!=null&&(o.onclick=dd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oc.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(R=m.endsWith("Capture"),h=m.slice(2,R?m.length-7:void 0),z=o[sr]||null,z=z!=null?z[m]:null,typeof z=="function"&&o.removeEventListener(h,z,R),typeof x=="function")){typeof z!="function"&&z!==null&&(m in o?o[m]=null:o.hasAttribute(m)&&o.removeAttribute(m)),o.addEventListener(h,x,R);break e}m in o?o[m]=x:x===!0?o.setAttribute(m,""):xi(o,m,x)}}}function si(o,h,m){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kr("error",o),kr("load",o);var x=!1,R=!1,z;for(z in m)if(m.hasOwnProperty(z)){var Y=m[z];if(Y!=null)switch(z){case"src":x=!0;break;case"srcSet":R=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:Jr(o,h,z,Y,m,null)}}R&&Jr(o,h,"srcSet",m.srcSet,m,null),x&&Jr(o,h,"src",m.src,m,null);return;case"input":kr("invalid",o);var se=z=Y=R=null,Ae=null,We=null;for(x in m)if(m.hasOwnProperty(x)){var ut=m[x];if(ut!=null)switch(x){case"name":R=ut;break;case"type":Y=ut;break;case"checked":Ae=ut;break;case"defaultChecked":We=ut;break;case"value":z=ut;break;case"defaultValue":se=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(a(137,h));break;default:Jr(o,h,x,ut,m,null)}}fl(o,z,se,Ae,We,Y,R,!1),gh(o);return;case"select":kr("invalid",o),x=Y=z=null;for(R in m)if(m.hasOwnProperty(R)&&(se=m[R],se!=null))switch(R){case"value":z=se;break;case"defaultValue":Y=se;break;case"multiple":x=se;default:Jr(o,h,R,se,m,null)}h=z,m=Y,o.multiple=!!x,h!=null?Is(o,!!x,h,!1):m!=null&&Is(o,!!x,m,!0);return;case"textarea":kr("invalid",o),z=R=x=null;for(Y in m)if(m.hasOwnProperty(Y)&&(se=m[Y],se!=null))switch(Y){case"value":x=se;break;case"defaultValue":R=se;break;case"children":z=se;break;case"dangerouslySetInnerHTML":if(se!=null)throw Error(a(91));break;default:Jr(o,h,Y,se,m,null)}dl(o,x,R,z),gh(o);return;case"option":for(Ae in m)if(m.hasOwnProperty(Ae)&&(x=m[Ae],x!=null))switch(Ae){case"selected":o.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:Jr(o,h,Ae,x,m,null)}return;case"dialog":kr("beforetoggle",o),kr("toggle",o),kr("cancel",o),kr("close",o);break;case"iframe":case"object":kr("load",o);break;case"video":case"audio":for(x=0;x<Qh.length;x++)kr(Qh[x],o);break;case"image":kr("error",o),kr("load",o);break;case"details":kr("toggle",o);break;case"embed":case"source":case"link":kr("error",o),kr("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(We in m)if(m.hasOwnProperty(We)&&(x=m[We],x!=null))switch(We){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:Jr(o,h,We,x,m,null)}return;default:if(Oo(h)){for(ut in m)m.hasOwnProperty(ut)&&(x=m[ut],x!==void 0&&wp(o,h,ut,x,m,void 0));return}}for(se in m)m.hasOwnProperty(se)&&(x=m[se],x!=null&&Jr(o,h,se,x,m,null))}function Xy(o,h,m,x){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var R=null,z=null,Y=null,se=null,Ae=null,We=null,ut=null;for(Qe in m){var mt=m[Qe];if(m.hasOwnProperty(Qe)&&mt!=null)switch(Qe){case"checked":break;case"value":break;case"defaultValue":Ae=mt;default:x.hasOwnProperty(Qe)||Jr(o,h,Qe,null,x,mt)}}for(var Ke in x){var Qe=x[Ke];if(mt=m[Ke],x.hasOwnProperty(Ke)&&(Qe!=null||mt!=null))switch(Ke){case"type":z=Qe;break;case"name":R=Qe;break;case"checked":We=Qe;break;case"defaultChecked":ut=Qe;break;case"value":Y=Qe;break;case"defaultValue":se=Qe;break;case"children":case"dangerouslySetInnerHTML":if(Qe!=null)throw Error(a(137,h));break;default:Qe!==mt&&Jr(o,h,Ke,Qe,x,mt)}}lc(o,Y,se,Ae,We,ut,z,R);return;case"select":Qe=Y=se=Ke=null;for(z in m)if(Ae=m[z],m.hasOwnProperty(z)&&Ae!=null)switch(z){case"value":break;case"multiple":Qe=Ae;default:x.hasOwnProperty(z)||Jr(o,h,z,null,x,Ae)}for(R in x)if(z=x[R],Ae=m[R],x.hasOwnProperty(R)&&(z!=null||Ae!=null))switch(R){case"value":Ke=z;break;case"defaultValue":se=z;break;case"multiple":Y=z;default:z!==Ae&&Jr(o,h,R,z,x,Ae)}h=se,m=Y,x=Qe,Ke!=null?Is(o,!!m,Ke,!1):!!x!=!!m&&(h!=null?Is(o,!!m,h,!0):Is(o,!!m,m?[]:"",!1));return;case"textarea":Qe=Ke=null;for(se in m)if(R=m[se],m.hasOwnProperty(se)&&R!=null&&!x.hasOwnProperty(se))switch(se){case"value":break;case"children":break;default:Jr(o,h,se,null,x,R)}for(Y in x)if(R=x[Y],z=m[Y],x.hasOwnProperty(Y)&&(R!=null||z!=null))switch(Y){case"value":Ke=R;break;case"defaultValue":Qe=R;break;case"children":break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(a(91));break;default:R!==z&&Jr(o,h,Y,R,x,z)}qd(o,Ke,Qe);return;case"option":for(var dr in m)if(Ke=m[dr],m.hasOwnProperty(dr)&&Ke!=null&&!x.hasOwnProperty(dr))switch(dr){case"selected":o.selected=!1;break;default:Jr(o,h,dr,null,x,Ke)}for(Ae in x)if(Ke=x[Ae],Qe=m[Ae],x.hasOwnProperty(Ae)&&Ke!==Qe&&(Ke!=null||Qe!=null))switch(Ae){case"selected":o.selected=Ke&&typeof Ke!="function"&&typeof Ke!="symbol";break;default:Jr(o,h,Ae,Ke,x,Qe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ur in m)Ke=m[ur],m.hasOwnProperty(ur)&&Ke!=null&&!x.hasOwnProperty(ur)&&Jr(o,h,ur,null,x,Ke);for(We in x)if(Ke=x[We],Qe=m[We],x.hasOwnProperty(We)&&Ke!==Qe&&(Ke!=null||Qe!=null))switch(We){case"children":case"dangerouslySetInnerHTML":if(Ke!=null)throw Error(a(137,h));break;default:Jr(o,h,We,Ke,x,Qe)}return;default:if(Oo(h)){for(var ln in m)Ke=m[ln],m.hasOwnProperty(ln)&&Ke!==void 0&&!x.hasOwnProperty(ln)&&wp(o,h,ln,void 0,x,Ke);for(ut in x)Ke=x[ut],Qe=m[ut],!x.hasOwnProperty(ut)||Ke===Qe||Ke===void 0&&Qe===void 0||wp(o,h,ut,Ke,x,Qe);return}}for(var Be in m)Ke=m[Be],m.hasOwnProperty(Be)&&Ke!=null&&!x.hasOwnProperty(Be)&&Jr(o,h,Be,null,x,Ke);for(mt in x)Ke=x[mt],Qe=m[mt],!x.hasOwnProperty(mt)||Ke===Qe||Ke==null&&Qe==null||Jr(o,h,mt,Ke,x,Qe)}var pd=null,Sp=null;function va(o){return o.nodeType===9?o:o.ownerDocument}function Zc(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jh(o,h){if(o===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&h==="foreignObject"?0:o}function Xl(o,h){return o==="textarea"||o==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Pp=null;function Ky(){var o=window.event;return o&&o.type==="popstate"?o===Pp?!1:(Pp=o,!0):(Pp=null,!1)}var cg=typeof setTimeout=="function"?setTimeout:void 0,Yy=typeof clearTimeout=="function"?clearTimeout:void 0,Qy=typeof Promise=="function"?Promise:void 0,Jy=typeof queueMicrotask=="function"?queueMicrotask:typeof Qy<"u"?function(o){return Qy.resolve(null).then(o).catch(Gu)}:cg;function Gu(o){setTimeout(function(){throw o})}function Kl(o){return o==="head"}function hg(o,h){var m=h,x=0,R=0;do{var z=m.nextSibling;if(o.removeChild(m),z&&z.nodeType===8)if(m=z.data,m==="/$"){if(0<x&&8>x){m=x;var Y=o.ownerDocument;if(m&1&&Wu(Y.documentElement),m&2&&Wu(Y.body),m&4)for(m=Y.head,Wu(m),Y=m.firstChild;Y;){var se=Y.nextSibling,Ae=Y.nodeName;Y[Eo]||Ae==="SCRIPT"||Ae==="STYLE"||Ae==="LINK"&&Y.rel.toLowerCase()==="stylesheet"||m.removeChild(Y),Y=se}}if(R===0){o.removeChild(z),Zn(h);return}R--}else m==="$"||m==="$?"||m==="$!"?R++:x=m.charCodeAt(0)-48;else x=0;m=z}while(m);Zn(h)}function Ap(o){var h=o.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var m=h;switch(h=h.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Ap(m),Mt(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}o.removeChild(m)}}function e0(o,h,m,x){for(;o.nodeType===1;){var R=m;if(o.nodeName.toLowerCase()!==h.toLowerCase()){if(!x&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(x){if(!o[Eo])switch(h){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(z=o.getAttribute("rel"),z==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(z!==R.rel||o.getAttribute("href")!==(R.href==null||R.href===""?null:R.href)||o.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin)||o.getAttribute("title")!==(R.title==null?null:R.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(z=o.getAttribute("src"),(z!==(R.src==null?null:R.src)||o.getAttribute("type")!==(R.type==null?null:R.type)||o.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin))&&z&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(h==="input"&&o.type==="hidden"){var z=R.name==null?null:""+R.name;if(R.type==="hidden"&&o.getAttribute("name")===z)return o}else return o;if(o=Wo(o.nextSibling),o===null)break}return null}function v_(o,h,m){if(h==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!m||(o=Wo(o.nextSibling),o===null))return null;return o}function fg(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function t0(o,h){var m=o.ownerDocument;if(o.data!=="$?"||m.readyState==="complete")h();else{var x=function(){h(),m.removeEventListener("DOMContentLoaded",x)};m.addEventListener("DOMContentLoaded",x),o._reactRetry=x}}function Wo(o){for(;o!=null;o=o.nextSibling){var h=o.nodeType;if(h===1||h===3)break;if(h===8){if(h=o.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return o}var ef=null;function dg(o){o=o.previousSibling;for(var h=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"){if(h===0)return o;h--}else m==="/$"&&h++}o=o.previousSibling}return null}function md(o,h,m){switch(h=va(m),o){case"html":if(o=h.documentElement,!o)throw Error(a(452));return o;case"head":if(o=h.head,!o)throw Error(a(453));return o;case"body":if(o=h.body,!o)throw Error(a(454));return o;default:throw Error(a(451))}}function Wu(o){for(var h=o.attributes;h.length;)o.removeAttributeNode(h[0]);Mt(o)}var Ba=new Map,r0=new Set;function Cp(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Yl=ct.d;ct.d={f:tf,r:Fi,D:n0,C:mg,L:__,m:i0,X:b_,S:a0,M:o0};function tf(){var o=Yl.f(),h=od();return o||h}function Fi(o){var h=cr(o);h!==null&&h.tag===5&&h.type==="form"?Xr(h):Yl.r(o)}var Zu=typeof document>"u"?null:document;function pg(o,h,m){var x=Zu;if(x&&typeof h=="string"&&h){var R=pa(h);R='link[rel="'+o+'"][href="'+R+'"]',typeof m=="string"&&(R+='[crossorigin="'+m+'"]'),r0.has(R)||(r0.add(R),o={rel:o,crossOrigin:m,href:h},x.querySelector(R)===null&&(h=x.createElement("link"),si(h,"link",o),mn(h),x.head.appendChild(h)))}}function n0(o){Yl.D(o),pg("dns-prefetch",o,null)}function mg(o,h){Yl.C(o,h),pg("preconnect",o,h)}function __(o,h,m){Yl.L(o,h,m);var x=Zu;if(x&&o&&h){var R='link[rel="preload"][as="'+pa(h)+'"]';h==="image"&&m&&m.imageSrcSet?(R+='[imagesrcset="'+pa(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(R+='[imagesizes="'+pa(m.imageSizes)+'"]')):R+='[href="'+pa(o)+'"]';var z=R;switch(h){case"style":z=Xu(o);break;case"script":z=Xc(o)}Ba.has(z)||(o=M({rel:"preload",href:h==="image"&&m&&m.imageSrcSet?void 0:o,as:h},m),Ba.set(z,o),x.querySelector(R)!==null||h==="style"&&x.querySelector(rf(z))||h==="script"&&x.querySelector(Kc(z))||(h=x.createElement("link"),si(h,"link",o),mn(h),x.head.appendChild(h)))}}function i0(o,h){Yl.m(o,h);var m=Zu;if(m&&o){var x=h&&typeof h.as=="string"?h.as:"script",R='link[rel="modulepreload"][as="'+pa(x)+'"][href="'+pa(o)+'"]',z=R;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":z=Xc(o)}if(!Ba.has(z)&&(o=M({rel:"modulepreload",href:o},h),Ba.set(z,o),m.querySelector(R)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Kc(z)))return}x=m.createElement("link"),si(x,"link",o),mn(x),m.head.appendChild(x)}}}function a0(o,h,m){Yl.S(o,h,m);var x=Zu;if(x&&o){var R=Wa(x).hoistableStyles,z=Xu(o);h=h||"default";var Y=R.get(z);if(!Y){var se={loading:0,preload:null};if(Y=x.querySelector(rf(z)))se.loading=5;else{o=M({rel:"stylesheet",href:o,"data-precedence":h},m),(m=Ba.get(z))&&yd(o,m);var Ae=Y=x.createElement("link");mn(Ae),si(Ae,"link",o),Ae._p=new Promise(function(We,ut){Ae.onload=We,Ae.onerror=ut}),Ae.addEventListener("load",function(){se.loading|=1}),Ae.addEventListener("error",function(){se.loading|=2}),se.loading|=4,Ku(Y,h,x)}Y={type:"stylesheet",instance:Y,count:1,state:se},R.set(z,Y)}}}function b_(o,h){Yl.X(o,h);var m=Zu;if(m&&o){var x=Wa(m).hoistableScripts,R=Xc(o),z=x.get(R);z||(z=m.querySelector(Kc(R)),z||(o=M({src:o,async:!0},h),(h=Ba.get(R))&&vd(o,h),z=m.createElement("script"),mn(z),si(z,"link",o),m.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},x.set(R,z))}}function o0(o,h){Yl.M(o,h);var m=Zu;if(m&&o){var x=Wa(m).hoistableScripts,R=Xc(o),z=x.get(R);z||(z=m.querySelector(Kc(R)),z||(o=M({src:o,async:!0,type:"module"},h),(h=Ba.get(R))&&vd(o,h),z=m.createElement("script"),mn(z),si(z,"link",o),m.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},x.set(R,z))}}function Tp(o,h,m,x){var R=(R=Ft.current)?Cp(R):null;if(!R)throw Error(a(446));switch(o){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(h=Xu(m.href),m=Wa(R).hoistableStyles,x=m.get(h),x||(x={type:"style",instance:null,count:0,state:null},m.set(h,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){o=Xu(m.href);var z=Wa(R).hoistableStyles,Y=z.get(o);if(Y||(R=R.ownerDocument||R,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},z.set(o,Y),(z=R.querySelector(rf(o)))&&!z._p&&(Y.instance=z,Y.state.loading=5),Ba.has(o)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Ba.set(o,m),z||gg(R,o,m,Y.state))),h&&x===null)throw Error(a(528,""));return Y}if(h&&x!==null)throw Error(a(529,""));return null;case"script":return h=m.async,m=m.src,typeof m=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Xc(m),m=Wa(R).hoistableScripts,x=m.get(h),x||(x={type:"script",instance:null,count:0,state:null},m.set(h,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,o))}}function Xu(o){return'href="'+pa(o)+'"'}function rf(o){return'link[rel="stylesheet"]['+o+"]"}function nf(o){return M({},o,{"data-precedence":o.precedence,precedence:null})}function gg(o,h,m,x){o.querySelector('link[rel="preload"][as="style"]['+h+"]")?x.loading=1:(h=o.createElement("link"),x.preload=h,h.addEventListener("load",function(){return x.loading|=1}),h.addEventListener("error",function(){return x.loading|=2}),si(h,"link",m),mn(h),o.head.appendChild(h))}function Xc(o){return'[src="'+pa(o)+'"]'}function Kc(o){return"script[async]"+o}function gd(o,h,m){if(h.count++,h.instance===null)switch(h.type){case"style":var x=o.querySelector('style[data-href~="'+pa(m.href)+'"]');if(x)return h.instance=x,mn(x),x;var R=M({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return x=(o.ownerDocument||o).createElement("style"),mn(x),si(x,"style",R),Ku(x,m.precedence,o),h.instance=x;case"stylesheet":R=Xu(m.href);var z=o.querySelector(rf(R));if(z)return h.state.loading|=4,h.instance=z,mn(z),z;x=nf(m),(R=Ba.get(R))&&yd(x,R),z=(o.ownerDocument||o).createElement("link"),mn(z);var Y=z;return Y._p=new Promise(function(se,Ae){Y.onload=se,Y.onerror=Ae}),si(z,"link",x),h.state.loading|=4,Ku(z,m.precedence,o),h.instance=z;case"script":return z=Xc(m.src),(R=o.querySelector(Kc(z)))?(h.instance=R,mn(R),R):(x=m,(R=Ba.get(z))&&(x=M({},m),vd(x,R)),o=o.ownerDocument||o,R=o.createElement("script"),mn(R),si(R,"link",x),o.head.appendChild(R),h.instance=R);case"void":return null;default:throw Error(a(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(x=h.instance,h.state.loading|=4,Ku(x,m.precedence,o));return h.instance}function Ku(o,h,m){for(var x=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),R=x.length?x[x.length-1]:null,z=R,Y=0;Y<x.length;Y++){var se=x[Y];if(se.dataset.precedence===h)z=se;else if(z!==R)break}z?z.parentNode.insertBefore(o,z.nextSibling):(h=m.nodeType===9?m.head:m,h.insertBefore(o,h.firstChild))}function yd(o,h){o.crossOrigin==null&&(o.crossOrigin=h.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=h.referrerPolicy),o.title==null&&(o.title=h.title)}function vd(o,h){o.crossOrigin==null&&(o.crossOrigin=h.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=h.referrerPolicy),o.integrity==null&&(o.integrity=h.integrity)}var af=null;function s0(o,h,m){if(af===null){var x=new Map,R=af=new Map;R.set(m,x)}else R=af,x=R.get(m),x||(x=new Map,R.set(m,x));if(x.has(o))return x;for(x.set(o,null),m=m.getElementsByTagName(o),R=0;R<m.length;R++){var z=m[R];if(!(z[Eo]||z[tr]||o==="link"&&z.getAttribute("rel")==="stylesheet")&&z.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=z.getAttribute(h)||"";Y=o+Y;var se=x.get(Y);se?se.push(z):x.set(Y,[z])}}return x}function l(o,h,m){o=o.ownerDocument||o,o.head.insertBefore(m,h==="title"?o.querySelector("head > title"):null)}function n(o,h,m){if(m===1||h.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return o=h.disabled,typeof h.precedence=="string"&&o==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function s(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var f=null;function v(){}function w(o,h,m){if(f===null)throw Error(a(475));var x=f;if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var R=Xu(m.href),z=o.querySelector(rf(R));if(z){o=z._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(x.count++,x=T.bind(x),o.then(x,x)),h.state.loading|=4,h.instance=z,mn(z);return}z=o.ownerDocument||o,m=nf(m),(R=Ba.get(R))&&yd(m,R),z=z.createElement("link"),mn(z);var Y=z;Y._p=new Promise(function(se,Ae){Y.onload=se,Y.onerror=Ae}),si(z,"link",m),h.instance=z}x.stylesheets===null&&(x.stylesheets=new Map),x.stylesheets.set(h,o),(o=h.state.preload)&&(h.state.loading&3)===0&&(x.count++,h=T.bind(x),o.addEventListener("load",h),o.addEventListener("error",h))}}function P(){if(f===null)throw Error(a(475));var o=f;return o.stylesheets&&o.count===0&&L(o,o.stylesheets),0<o.count?function(h){var m=setTimeout(function(){if(o.stylesheets&&L(o,o.stylesheets),o.unsuspend){var x=o.unsuspend;o.unsuspend=null,x()}},6e4);return o.unsuspend=h,function(){o.unsuspend=null,clearTimeout(m)}}:null}function T(){if(this.count--,this.count===0){if(this.stylesheets)L(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var D=null;function L(o,h){o.stylesheets=null,o.unsuspend!==null&&(o.count++,D=new Map,h.forEach(F,o),D=null,T.call(o))}function F(o,h){if(!(h.state.loading&4)){var m=D.get(o);if(m)var x=m.get(null);else{m=new Map,D.set(o,m);for(var R=o.querySelectorAll("link[data-precedence],style[data-precedence]"),z=0;z<R.length;z++){var Y=R[z];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(m.set(Y.dataset.precedence,Y),x=Y)}x&&m.set(null,x)}R=h.instance,Y=R.getAttribute("data-precedence"),z=m.get(Y)||x,z===x&&m.set(null,R),m.set(Y,R),this.count++,x=T.bind(this),R.addEventListener("load",x),R.addEventListener("error",x),z?z.parentNode.insertBefore(R,z.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(R,o.firstChild)),h.state.loading|=4}}var $={$$typeof:ie,Provider:null,Consumer:null,_currentValue:nt,_currentValue2:nt,_threadCount:0};function Z(o,h,m,x,R,z,Y,se){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ot(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ot(0),this.hiddenUpdates=Ot(null),this.identifierPrefix=x,this.onUncaughtError=R,this.onCaughtError=z,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=se,this.incompleteTransitions=new Map}function J(o,h,m,x,R,z,Y,se,Ae,We,ut,mt){return o=new Z(o,h,m,Y,se,Ae,We,mt),h=1,z===!0&&(h|=24),z=Oa(3,null,null,h),o.current=z,z.stateNode=o,h=Gs(),h.refCount++,o.pooledCache=h,h.refCount++,z.memoizedState={element:x,isDehydrated:m,cache:h},Oc(z),o}function te(o){return o?(o=yr,o):yr}function oe(o,h,m,x,R,z){R=te(R),x.context===null?x.context=R:x.pendingContext=R,x=Bo(h),x.payload={element:m},z=z===void 0?null:z,z!==null&&(x.callback=z),m=us(o,x,h),m!==null&&(ja(m,o,h),Ou(m,o,h))}function ue(o,h){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<h?m:h}}function de(o,h){ue(o,h),(o=o.alternate)&&ue(o,h)}function Le(o){if(o.tag===13){var h=Ia(o,67108864);h!==null&&ja(h,o,67108864),de(o,67108864)}}var xe=!0;function Ce(o,h,m,x){var R=Ue.T;Ue.T=null;var z=ct.p;try{ct.p=2,Ye(o,h,m,x)}finally{ct.p=z,Ue.T=R}}function Ge(o,h,m,x){var R=Ue.T;Ue.T=null;var z=ct.p;try{ct.p=8,Ye(o,h,m,x)}finally{ct.p=z,Ue.T=R}}function Ye(o,h,m,x){if(xe){var R=dt(x);if(R===null)sg(o,h,x,Tt,m),Ar(o,x);else if(li(R,o,h,m,x))x.stopPropagation();else if(Ar(o,x),h&4&&-1<Bt.indexOf(o)){for(;R!==null;){var z=cr(R);if(z!==null)switch(z.tag){case 3:if(z=z.stateNode,z.current.memoizedState.isDehydrated){var Y=De(z.pendingLanes);if(Y!==0){var se=z;for(se.pendingLanes|=2,se.entangledLanes|=2;Y;){var Ae=1<<31-Re(Y);se.entanglements[1]|=Ae,Y&=~Ae}xs(z),(nn&6)===0&&(nd=zr()+500,Yh(0))}}break;case 13:se=Ia(z,2),se!==null&&ja(se,z,2),od(),de(z,2)}if(z=dt(x),z===null&&sg(o,h,x,Tt,m),z===R)break;R=z}R!==null&&x.stopPropagation()}else sg(o,h,x,null,m)}}function dt(o){return o=du(o),_t(o)}var Tt=null;function _t(o){if(Tt=null,o=mr(o),o!==null){var h=g(o);if(h===null)o=null;else{var m=h.tag;if(m===13){if(o=y(h),o!==null)return o;o=null}else if(m===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;o=null}else h!==o&&(o=null)}}return Tt=o,null}function Et(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bn()){case Kn:return 2;case qi:return 8;case bi:case Ga:return 32;case Ea:return 268435456;default:return 32}default:return 32}}var Vt=!1,bt=null,wt=null,tt=null,Qt=new Map,rr=new Map,Ut=[],Bt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ar(o,h){switch(o){case"focusin":case"focusout":bt=null;break;case"dragenter":case"dragleave":wt=null;break;case"mouseover":case"mouseout":tt=null;break;case"pointerover":case"pointerout":Qt.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":rr.delete(h.pointerId)}}function on(o,h,m,x,R,z){return o===null||o.nativeEvent!==z?(o={blockedOn:h,domEventName:m,eventSystemFlags:x,nativeEvent:z,targetContainers:[R]},h!==null&&(h=cr(h),h!==null&&Le(h)),o):(o.eventSystemFlags|=x,h=o.targetContainers,R!==null&&h.indexOf(R)===-1&&h.push(R),o)}function li(o,h,m,x,R){switch(h){case"focusin":return bt=on(bt,o,h,m,x,R),!0;case"dragenter":return wt=on(wt,o,h,m,x,R),!0;case"mouseover":return tt=on(tt,o,h,m,x,R),!0;case"pointerover":var z=R.pointerId;return Qt.set(z,on(Qt.get(z)||null,o,h,m,x,R)),!0;case"gotpointercapture":return z=R.pointerId,rr.set(z,on(rr.get(z)||null,o,h,m,x,R)),!0}return!1}function Ei(o){var h=mr(o.target);if(h!==null){var m=g(h);if(m!==null){if(h=m.tag,h===13){if(h=y(m),h!==null){o.blockedOn=h,ri(o.priority,function(){if(m.tag===13){var x=sa();x=or(x);var R=Ia(m,x);R!==null&&ja(R,m,x),de(m,x)}});return}}else if(h===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function _a(o){if(o.blockedOn!==null)return!1;for(var h=o.targetContainers;0<h.length;){var m=dt(o.nativeEvent);if(m===null){m=o.nativeEvent;var x=new m.constructor(m.type,m);es=x,m.target.dispatchEvent(x),es=null}else return h=cr(m),h!==null&&Le(h),o.blockedOn=m,!1;h.shift()}return!0}function ba(o,h,m){_a(o)&&m.delete(h)}function Mi(){Vt=!1,bt!==null&&_a(bt)&&(bt=null),wt!==null&&_a(wt)&&(wt=null),tt!==null&&_a(tt)&&(tt=null),Qt.forEach(ba),rr.forEach(ba)}function sn(o,h){o.blockedOn===h&&(o.blockedOn=null,Vt||(Vt=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Mi)))}var Wn=null;function _i(o){Wn!==o&&(Wn=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Wn===o&&(Wn=null);for(var h=0;h<o.length;h+=3){var m=o[h],x=o[h+1],R=o[h+2];if(typeof x!="function"){if(_t(x||m)===null)continue;break}var z=cr(m);z!==null&&(o.splice(h,3),h-=3,rn(z,{pending:!0,data:R,method:m.method,action:x},x,R))}}))}function Zn(o){function h(Ae){return sn(Ae,o)}bt!==null&&sn(bt,o),wt!==null&&sn(wt,o),tt!==null&&sn(tt,o),Qt.forEach(h),rr.forEach(h);for(var m=0;m<Ut.length;m++){var x=Ut[m];x.blockedOn===o&&(x.blockedOn=null)}for(;0<Ut.length&&(m=Ut[0],m.blockedOn===null);)Ei(m),m.blockedOn===null&&Ut.shift();if(m=(o.ownerDocument||o).$$reactFormReplay,m!=null)for(x=0;x<m.length;x+=3){var R=m[x],z=m[x+1],Y=R[sr]||null;if(typeof z=="function")Y||_i(m);else if(Y){var se=null;if(z&&z.hasAttribute("formAction")){if(R=z,Y=z[sr]||null)se=Y.formAction;else if(_t(R)!==null)continue}else se=Y.action;typeof se=="function"?m[x+1]=se:(m.splice(x,3),x-=3),_i(m)}}}function Ui(o){this._internalRoot=o}xa.prototype.render=Ui.prototype.render=function(o){var h=this._internalRoot;if(h===null)throw Error(a(409));var m=h.current,x=sa();oe(m,x,o,h,null,null)},xa.prototype.unmount=Ui.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var h=o.containerInfo;oe(o.current,2,null,o,null,null),od(),h[pn]=null}};function xa(o){this._internalRoot=o}xa.prototype.unstable_scheduleHydration=function(o){if(o){var h=Yn();o={blockedOn:null,target:o,priority:h};for(var m=0;m<Ut.length&&h!==0&&h<Ut[m].priority;m++);Ut.splice(m,0,o),m===0&&Ei(o)}};var ui=r.version;if(ui!=="19.1.1")throw Error(a(527,ui,"19.1.1"));ct.findDOMNode=function(o){var h=o._reactInternals;if(h===void 0)throw typeof o.render=="function"?Error(a(188)):(o=Object.keys(o).join(","),Error(a(268,o)));return o=C(h),o=o!==null?E(o):null,o=o===null?null:o.stateNode,o};var Fa={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Ue,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nn.isDisabled&&Nn.supportsFiber)try{fa=Nn.inject(Fa),An=Nn}catch{}}return vg.createRoot=function(o,h){if(!p(o))throw Error(a(299));var m=!1,x="",R=$f,z=ym,Y=my,se=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(R=h.onUncaughtError),h.onCaughtError!==void 0&&(z=h.onCaughtError),h.onRecoverableError!==void 0&&(Y=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(se=h.unstable_transitionCallbacks)),h=J(o,1,!1,null,null,m,x,R,z,Y,se,null),o[pn]=h.current,og(o),new Ui(h)},vg.hydrateRoot=function(o,h,m){if(!p(o))throw Error(a(299));var x=!1,R="",z=$f,Y=ym,se=my,Ae=null,We=null;return m!=null&&(m.unstable_strictMode===!0&&(x=!0),m.identifierPrefix!==void 0&&(R=m.identifierPrefix),m.onUncaughtError!==void 0&&(z=m.onUncaughtError),m.onCaughtError!==void 0&&(Y=m.onCaughtError),m.onRecoverableError!==void 0&&(se=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(Ae=m.unstable_transitionCallbacks),m.formState!==void 0&&(We=m.formState)),h=J(o,1,!0,h,m??null,x,R,z,Y,se,Ae,We),h.context=te(null),m=h.current,x=sa(),x=or(x),R=Bo(x),R.callback=null,us(m,R,x),m=x,h.current.lanes=m,ke(h,m),xs(h),o[pn]=h.current,og(o),new xa(h)},vg.version="19.1.1",vg}var m2;function x4(){if(m2)return P_.exports;m2=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),P_.exports=b4(),P_.exports}var w4=x4();const S4="/what_makes_lands_happy/world-map-svgrepo-com.svg",Ju=JSON.parse('[{"Country":"Finland","Country_clean":"finland","Region":"Western Europe","Happiness":7.741,"Median Salary":4238.9,"Average Salary":4978.86,"Lowest Salary":1257.93,"Highest Salary":22093.02,"Infant Survival Rate":1000,"Alcohol Consumption Rate":8.8,"Life Expectancy":81.1,"Netflix (USD/month)":13.54,"Women Safety Index":0.924,"Average Winter Temperature":-12.356432,"Average Summer Temperature":-4.902662,"Population":5540745,"Energy Per Capita":58966.16,"% of Power from Fossil Fuels":10.769,"% of Power from Nuclear":34.333,"% of Power from Renewables":54.898,"% of Agricultural Land":7.4618100417,"% of Forest Land":73.7264996577,"Territory":303947.7,"Average Rainfall":536,"Corruption":0.1622093022,"Wheat Production (tonnes)":2640555,"Rye Production (tonnes)":1200,"Potatoes Production (tonnes)":38388000,"Meat, chicken Production (tonnes)":54950,"Avocados Production (tonnes)":2243396.8,"Petrol Price (USD/liter)":2.64,"Daily Oil Consumption (Barrels)":210030,"CO2 Emissions (ton per capita)":7.372854761},{"Country":"Denmark","Country_clean":"denmark","Region":"Western Europe","Happiness":7.583,"Median Salary":5084.99,"Average Salary":5779.04,"Lowest Salary":1458.92,"Highest Salary":25637.39,"Infant Survival Rate":1000,"Alcohol Consumption Rate":9.64,"Life Expectancy":86,"Netflix (USD/month)":15.04,"Women Safety Index":0.932,"Average Winter Temperature":1.278225,"Average Summer Temperature":5.266599,"Population":5882261,"Energy Per Capita":32197.939,"% of Power from Fossil Fuels":16.037,"% of Power from Nuclear":0,"% of Power from Renewables":83.963,"% of Agricultural Land":65.45,"% of Forest Land":15.7345,"Territory":40000,"Average Rainfall":703,"Corruption":0.1622093022,"Wheat Production (tonnes)":37885740,"Rye Production (tonnes)":2000,"Potatoes Production (tonnes)":28781776,"Meat, chicken Production (tonnes)":94712,"Avocados Production (tonnes)":2300,"Petrol Price (USD/liter)":2.65,"Daily Oil Consumption (Barrels)":158194,"CO2 Emissions (ton per capita)":5.107988509},{"Country":"Iceland","Country_clean":"iceland","Region":"Western Europe","Happiness":7.525,"Median Salary":4661.2,"Average Salary":5049.03,"Lowest Salary":1273.23,"Highest Salary":22464.51,"Infant Survival Rate":1000,"Alcohol Consumption Rate":7.45,"Life Expectancy":82.7,"Netflix (USD/month)":14.67,"Women Safety Index":0.924,"Average Winter Temperature":-4.115238,"Average Summer Temperature":-3.5402563,"Population":372899,"Energy Per Capita":165870.875,"% of Power from Fossil Fuels":0,"% of Power from Nuclear":0,"% of Power from Renewables":99.986,"% of Agricultural Land":18.5659030051,"% of Forest Land":0.5157522563,"Territory":100830,"Average Rainfall":1940,"Corruption":0.2001170814,"Wheat Production (tonnes)":1290.74,"Rye Production (tonnes)":46331.4,"Potatoes Production (tonnes)":294,"Meat, chicken Production (tonnes)":2790,"Avocados Production (tonnes)":84114,"Petrol Price (USD/liter)":2.6,"Daily Oil Consumption (Barrels)":19090,"CO2 Emissions (ton per capita)":4.548442258},{"Country":"Sweden","Country_clean":"sweden","Region":"Western Europe","Happiness":7.344,"Median Salary":3568.16,"Average Salary":4144.56,"Lowest Salary":1043,"Highest Salary":18389.75,"Infant Survival Rate":1000,"Alcohol Consumption Rate":7.3,"Life Expectancy":82.4,"Netflix (USD/month)":14.2,"Women Safety Index":0.926,"Average Winter Temperature":-8.132298,"Average Summer Temperature":-2.8563125,"Population":10549347,"Energy Per Capita":59926.805,"% of Power from Fossil Fuels":1.782,"% of Power from Nuclear":29.835,"% of Power from Renewables":68.383,"% of Agricultural Land":7.3730207707,"% of Forest Land":68.6990689582,"Territory":407283.54,"Average Rainfall":624,"Corruption":0.1622093022,"Wheat Production (tonnes)":5007.8,"Rye Production (tonnes)":34011.166,"Potatoes Production (tonnes)":3368,"Meat, chicken Production (tonnes)":279,"Avocados Production (tonnes)":38349.266,"Petrol Price (USD/liter)":2.3,"Daily Oil Consumption (Barrels)":322109,"CO2 Emissions (ton per capita)":3.405037919},{"Country":"Israel","Country_clean":"israel","Region":"Middle East and North Africa","Happiness":7.341,"Median Salary":null,"Average Salary":null,"Lowest Salary":null,"Highest Salary":null,"Infant Survival Rate":1000,"Alcohol Consumption Rate":2.62,"Life Expectancy":82.5,"Netflix (USD/month)":15.05,"Women Safety Index":0.703,"Average Winter Temperature":13.687662,"Average Summer Temperature":13.979397,"Population":9038309,"Energy Per Capita":33643.016,"% of Power from Fossil Fuels":93.227,"% of Power from Nuclear":0,"% of Power from Renewables":9.508,"% of Agricultural Land":29.7365988909,"% of Forest Land":6.4695009242,"Territory":21640,"Average Rainfall":435,"Corruption":0.2001170814,"Wheat Production (tonnes)":85400,"Rye Production (tonnes)":6347351.2,"Potatoes Production (tonnes)":1379223,"Meat, chicken Production (tonnes)":7098960,"Avocados Production (tonnes)":41217,"Petrol Price (USD/liter)":2.1,"Daily Oil Consumption (Barrels)":236249,"CO2 Emissions (ton per capita)":6.919593718},{"Country":"Netherlands","Country_clean":"netherlands","Region":"Western Europe","Happiness":7.319,"Median Salary":4756.87,"Average Salary":5179.7,"Lowest Salary":1427.06,"Highest Salary":22515.86,"Infant Survival Rate":999,"Alcohol Consumption Rate":0.01,"Life Expectancy":81.9,"Netflix (USD/month)":13.54,"Women Safety Index":0.908,"Average Winter Temperature":3.8456993,"Average Summer Temperature":6.0171475,"Population":17564014,"Energy Per Capita":56000.762,"% of Power from Fossil Fuels":56.704,"% of Power from Nuclear":3.425,"% of Power from Renewables":39.871,"% of Agricultural Land":53.8164538165,"% of Forest Land":11.001980992,"Territory":33670,"Average Rainfall":778,"Corruption":0.1622093022,"Wheat Production (tonnes)":86110,"Rye Production (tonnes)":1142391.36,"Potatoes Production (tonnes)":14154907,"Meat, chicken Production (tonnes)":3756,"Avocados Production (tonnes)":5300,"Petrol Price (USD/liter)":2.47,"Daily Oil Consumption (Barrels)":937098,"CO2 Emissions (ton per capita)":8.437074627},{"Country":"Norway","Country_clean":"norway","Region":"Western Europe","Happiness":7.302,"Median Salary":4420.02,"Average Salary":4786.34,"Lowest Salary":1208.23,"Highest Salary":21281.57,"Infant Survival Rate":1000,"Alcohol Consumption Rate":5.97,"Life Expectancy":81.8,"Netflix (USD/month)":12.17,"Women Safety Index":0.92,"Average Winter Temperature":-8.88361,"Average Summer Temperature":-4.446233,"Population":5434319,"Energy Per Capita":96926.234,"% of Power from Fossil Fuels":1.028,"% of Power from Nuclear":0,"% of Power from Renewables":98.972,"% of Agricultural Land":2.7040382134,"% of Forest Land":33.4581491751,"Territory":364270,"Average Rainfall":1414,"Corruption":0.1814468056,"Wheat Production (tonnes)":null,"Rye Production (tonnes)":null,"Potatoes Production (tonnes)":null,"Meat, chicken Production (tonnes)":null,"Avocados Production (tonnes)":null,"Petrol Price (USD/liter)":2.7,"Daily Oil Consumption (Barrels)":204090,"CO2 Emissions (ton per capita)":6.722269985},{"Country":"Luxembourg","Country_clean":"luxembourg","Region":"Western Europe","Happiness":7.122,"Median Salary":4767.44,"Average Salary":5211.42,"Lowest Salary":1310.78,"Highest Salary":23150.11,"Infant Survival Rate":1000,"Alcohol Consumption Rate":11.12,"Life Expectancy":82,"Netflix (USD/month)":null,"Women Safety Index":0.924,"Average Winter Temperature":1.5896153,"Average Summer Temperature":2.84097,"Population":647599,"Energy Per Capita":60334.328,"% of Power from Fossil Fuels":14.159,"% of Power from Nuclear":0,"% of Power from Renewables":85.841,"% of Agricultural Land":51.5879058133,"% of Forest Land":34.4538272104,"Territory":2574.46,"Average Rainfall":934,"Corruption":0.1622093022,"Wheat Production (tonnes)":22278900,"Rye Production (tonnes)":2792668.5,"Potatoes Production (tonnes)":2749.14,"Meat, chicken Production (tonnes)":187,"Avocados Production (tonnes)":23943,"Petrol Price (USD/liter)":2.09,"Daily Oil Consumption (Barrels)":56194,"CO2 Emissions (ton per capita)":15.30642656},{"Country":"Switzerland","Country_clean":"switzerland","Region":"Western Europe","Happiness":7.06,"Median Salary":9836.07,"Average Salary":11292.9,"Lowest Salary":2850.27,"Highest Salary":50363.93,"Infant Survival Rate":1000,"Alcohol Consumption Rate":9.61,"Life Expectancy":83.4,"Netflix (USD/month)":20.46,"Women Safety Index":0.928,"Average Winter Temperature":-2.5467072,"Average Summer Temperature":-1.4338865,"Population":8740472,"Energy Per Capita":33350.754,"% of Power from Fossil Fuels":3.631,"% of Power from Nuclear":36.964,"% of Power from Renewables":59.406,"% of Agricultural Land":37.9496922649,"% of Forest Land":32.2086033203,"Territory":39509.63,"Average Rainfall":1537,"Corruption":0.2001170814,"Wheat Production (tonnes)":702495.4,"Rye Production (tonnes)":118594,"Potatoes Production (tonnes)":6485000,"Meat, chicken Production (tonnes)":100.8,"Avocados Production (tonnes)":226048.64,"Petrol Price (USD/liter)":2.19,"Daily Oil Consumption (Barrels)":228194,"CO2 Emissions (ton per capita)":4.359041462},{"Country":"Australia","Country_clean":"australia","Region":"North America and ANZ","Happiness":7.057,"Median Salary":4306.45,"Average Salary":4903.23,"Lowest Salary":1236.13,"Highest Salary":21774.19,"Infant Survival Rate":999,"Alcohol Consumption Rate":9.71,"Life Expectancy":82.8,"Netflix (USD/month)":12.12,"Women Safety Index":0.902,"Average Winter Temperature":28.664902,"Average Summer Temperature":29.092043,"Population":26177413,"Energy Per Capita":63458.84,"% of Power from Fossil Fuels":67.697,"% of Power from Nuclear":0,"% of Power from Renewables":32.303,"% of Agricultural Land":47.2592374955,"% of Forest Land":17.4213145572,"Territory":7692020,"Average Rainfall":534,"Corruption":0.1621359587,"Wheat Production (tonnes)":1970363.6,"Rye Production (tonnes)":269,"Potatoes Production (tonnes)":767261.1,"Meat, chicken Production (tonnes)":1191322,"Avocados Production (tonnes)":202541,"Petrol Price (USD/liter)":1.38,"Daily Oil Consumption (Barrels)":1114645,"CO2 Emissions (ton per capita)":15.23826715},{"Country":"New Zealand","Country_clean":"new zealand","Region":"North America and ANZ","Happiness":7.029,"Median Salary":4196.41,"Average Salary":4870.06,"Lowest Salary":1227.54,"Highest Salary":21656.29,"Infant Survival Rate":1000,"Alcohol Consumption Rate":8.7,"Life Expectancy":81.6,"Netflix (USD/month)":12.53,"Women Safety Index":0.904,"Average Winter Temperature":15.329823,"Average Summer Temperature":16.2116,"Population":5185288,"Energy Per Capita":44939.27,"% of Power from Fossil Fuels":14.444,"% of Power from Nuclear":0,"% of Power from Renewables":85.556,"% of Agricultural Land":38.6426645399,"% of Forest Land":37.6306509438,"Territory":263310,"Average Rainfall":1732,"Corruption":0.1743465513,"Wheat Production (tonnes)":93719040,"Rye Production (tonnes)":1116969.72,"Potatoes Production (tonnes)":919200,"Meat, chicken Production (tonnes)":4000,"Avocados Production (tonnes)":271591.974,"Petrol Price (USD/liter)":2.07,"Daily Oil Consumption (Barrels)":166913,"CO2 Emissions (ton per capita)":6.830414187},{"Country":"Costa Rica","Country_clean":"costa rica","Region":"Latin America and Caribbean","Happiness":6.955,"Median Salary":4016.06,"Average Salary":4427.01,"Lowest Salary":1115.16,"Highest Salary":19613.34,"Infant Survival Rate":999,"Alcohol Consumption Rate":3.45,"Life Expectancy":79.6,"Netflix (USD/month)":12.99,"Women Safety Index":0.743,"Average Winter Temperature":22.746216,"Average Summer Temperature":23.510368,"Population":5180829,"Energy Per Capita":11957.598,"% of Power from Fossil Fuels":1.979,"% of Power from Nuclear":0,"% of Power from Renewables":98.021,"% of Agricultural Land":35.4680767724,"% of Forest Land":59.7579318449,"Territory":51060,"Average Rainfall":2926,"Corruption":0.1670125574,"Wheat Production (tonnes)":195069710,"Rye Production (tonnes)":124200,"Potatoes Production (tonnes)":695604,"Meat, chicken Production (tonnes)":569.91,"Avocados Production (tonnes)":380,"Petrol Price (USD/liter)":1.55,"Daily Oil Consumption (Barrels)":55000,"CO2 Emissions (ton per capita)":1.632471558},{"Country":"Kuwait","Country_clean":"kuwait","Region":"Middle East and North Africa","Happiness":6.951,"Median Salary":null,"Average Salary":null,"Lowest Salary":null,"Highest Salary":null,"Infant Survival Rate":1000,"Alcohol Consumption Rate":0.01,"Life Expectancy":74.7,"Netflix (USD/month)":null,"Women Safety Index":0.742,"Average Winter Temperature":14.190281,"Average Summer Temperature":16.082039,"Population":4268873,"Energy Per Capita":103882.75,"% of Power from Fossil Fuels":99.93,"% of Power from Nuclear":0,"% of Power from Renewables":0.258,"% of Agricultural Land":8.4175084175,"% of Forest Land":0.3507295174,"Territory":17820,"Average Rainfall":121,"Corruption":0.1987654865,"Wheat Production (tonnes)":413533,"Rye Production (tonnes)":433732.2,"Potatoes Production (tonnes)":190000,"Meat, chicken Production (tonnes)":371700,"Avocados Production (tonnes)":264535,"Petrol Price (USD/liter)":0.34,"Daily Oil Consumption (Barrels)":359000,"CO2 Emissions (ton per capita)":22.0224164},{"Country":"Austria","Country_clean":"austria","Region":"Western Europe","Happiness":6.905,"Median Salary":3572.94,"Average Salary":4016.91,"Lowest Salary":1014.8,"Highest Salary":17864.69,"Infant Survival Rate":1000,"Alcohol Consumption Rate":12.32,"Life Expectancy":81.5,"Netflix (USD/month)":14.67,"Women Safety Index":0.911,"Average Winter Temperature":-1.6856745,"Average Summer Temperature":-0.967524,"Population":8939617,"Energy Per Capita":42685.379,"% of Power from Fossil Fuels":23.713,"% of Power from Nuclear":0,"% of Power from Renewables":76.287,"% of Agricultural Land":31.4767256423,"% of Forest Land":47.2944740669,"Territory":82520,"Average Rainfall":1110,"Corruption":0.1622093022,"Wheat Production (tonnes)":1041825,"Rye Production (tonnes)":4076,"Potatoes Production (tonnes)":0,"Meat, chicken Production (tonnes)":125900,"Avocados Production (tonnes)":260,"Petrol Price (USD/liter)":2.13,"Daily Oil Consumption (Barrels)":262352,"CO2 Emissions (ton per capita)":7.293984252},{"Country":"Canada","Country_clean":"canada","Region":"North America and ANZ","Happiness":6.9,"Median Salary":6311.03,"Average Salary":7352.94,"Lowest Salary":1850,"Highest Salary":32720.59,"Infant Survival Rate":998,"Alcohol Consumption Rate":8.1,"Life Expectancy":82.2,"Netflix (USD/month)":11.87,"Women Safety Index":0.885,"Average Winter Temperature":-19.196556,"Average Summer Temperature":-14.700624,"Population":38454327,"Energy Per Capita":102160.289,"% of Power from Fossil Fuels":17.368,"% of Power from Nuclear":12.888,"% of Power from Renewables":69.744,"% of Agricultural Land":6.4845767861,"% of Forest Land":39.4701279256,"Territory":8788700,"Average Rainfall":537,"Corruption":0.1705811173,"Wheat Production (tonnes)":96520,"Rye Production (tonnes)":10210326,"Potatoes Production (tonnes)":13000,"Meat, chicken Production (tonnes)":17203.52,"Avocados Production (tonnes)":31000,"Petrol Price (USD/liter)":1.79,"Daily Oil Consumption (Barrels)":2486301,"CO2 Emissions (ton per capita)":15.43061283},{"Country":"Belgium","Country_clean":"belgium","Region":"Western Europe","Happiness":6.894,"Median Salary":5729.39,"Average Salary":6522.2,"Lowest Salary":1997.89,"Highest Salary":27378.44,"Infant Survival Rate":1000,"Alcohol Consumption Rate":12.6,"Life Expectancy":81.1,"Netflix (USD/month)":15.24,"Women Safety Index":0.902,"Average Winter Temperature":2.9873695,"Average Summer Temperature":4.751282,"Population":11655930,"Energy Per Capita":58395.824,"% of Power from Fossil Fuels":27.892,"% of Power from Nuclear":46.659,"% of Power from Renewables":25.449,"% of Agricultural Land":45.1013870542,"% of Forest Land":22.7642007926,"Territory":30280,"Average Rainfall":847,"Corruption":0.1622093022,"Wheat Production (tonnes)":240533,"Rye Production (tonnes)":219,"Potatoes Production (tonnes)":171,"Meat, chicken Production (tonnes)":14934,"Avocados Production (tonnes)":51351,"Petrol Price (USD/liter)":2.21,"Daily Oil Consumption (Barrels)":631522,"CO2 Emissions (ton per capita)":8.095583954},{"Country":"Ireland","Country_clean":"ireland","Region":"Western Europe","Happiness":6.838,"Median Salary":3021.14,"Average Salary":3399.58,"Lowest Salary":856.24,"Highest Salary":15151.16,"Infant Survival Rate":1000,"Alcohol Consumption Rate":10.75,"Life Expectancy":81.4,"Netflix (USD/month)":14.67,"Women Safety Index":0.892,"Average Winter Temperature":5.0232058,"Average Summer Temperature":7.5741353,"Population":5023109,"Energy Per Capita":37761.402,"% of Power from Fossil Fuels":61.381,"% of Power from Nuclear":0,"% of Power from Renewables":38.619,"% of Agricultural Land":62.9554362026,"% of Forest Land":11.4097837132,"Territory":68890,"Average Rainfall":1118,"Corruption":0.1622093022,"Wheat Production (tonnes)":1290.74,"Rye Production (tonnes)":46331.4,"Potatoes Production (tonnes)":294,"Meat, chicken Production (tonnes)":2790,"Avocados Production (tonnes)":84114,"Petrol Price (USD/liter)":2.07,"Daily Oil Consumption (Barrels)":152404,"CO2 Emissions (ton per capita)":7.245143221},{"Country":"Czechia","Country_clean":"czech republic","Region":"Central and Eastern Europe","Happiness":6.822,"Median Salary":2310.03,"Average Salary":2653.06,"Lowest Salary":668.69,"Highest Salary":11810.68,"Infant Survival Rate":1000,"Alcohol Consumption Rate":12.68,"Life Expectancy":78.8,"Netflix (USD/month)":11.49,"Women Safety Index":0.884,"Average Winter Temperature":-0.254366,"Average Summer Temperature":1.0374577,"Population":10493986,"Energy Per Capita":44242.148,"% of Power from Fossil Fuels":51.251,"% of Power from Nuclear":36.412,"% of Power from Renewables":12.337,"% of Agricultural Land":45.7305605114,"% of Forest Land":34.7066980209,"Territory":77186.83,"Average Rainfall":677,"Corruption":0.1467373222,"Wheat Production (tonnes)":122501976,"Rye Production (tonnes)":5116,"Potatoes Production (tonnes)":631,"Meat, chicken Production (tonnes)":123700,"Avocados Production (tonnes)":4200,"Petrol Price (USD/liter)":2,"Daily Oil Consumption (Barrels)":179956,"CO2 Emissions (ton per capita)":9.022786158},{"Country":"Lithuania","Country_clean":"lithuania","Region":"Central and Eastern Europe","Happiness":6.818,"Median Salary":903.87466,"Average Salary":997.90189,"Lowest Salary":251.75032,"Highest Salary":4428.3792,"Infant Survival Rate":1000,"Alcohol Consumption Rate":15.19,"Life Expectancy":73.6,"Netflix (USD/month)":11.29,"Women Safety Index":0.886,"Average Winter Temperature":-4.2955937,"Average Summer Temperature":1.70184,"Population":2750055,"Energy Per Capita":23151.053,"% of Power from Fossil Fuels":25.18,"% of Power from Nuclear":0,"% of Power from Renewables":74.82,"% of Agricultural Land":46.9222168983,"% of Forest Land":35.1807490816,"Territory":62610,"Average Rainfall":656,"Corruption":0.1467373222,"Wheat Production (tonnes)":15983841,"Rye Production (tonnes)":21420,"Potatoes Production (tonnes)":26995,"Meat, chicken Production (tonnes)":1391220,"Avocados Production (tonnes)":17200,"Petrol Price (USD/liter)":2.14,"Daily Oil Consumption (Barrels)":61612,"CO2 Emissions (ton per capita)":4.198076022},{"Country":"United Kingdom","Country_clean":"united kingdom","Region":"Western Europe","Happiness":6.749,"Median Salary":6300,"Average Salary":7235.37,"Lowest Salary":1829.27,"Highest Salary":32214.63,"Infant Survival Rate":997,"Alcohol Consumption Rate":10.66,"Life Expectancy":81.2,"Netflix (USD/month)":13.2,"Women Safety Index":0.86,"Average Winter Temperature":4.4938073,"Average Summer Temperature":6.856918,"Population":67508936,"Energy Per Capita":30097.885,"% of Power from Fossil Fuels":43.729,"% of Power from Nuclear":14.823,"% of Power from Renewables":41.448,"% of Agricultural Land":71.1575290373,"% of Forest Land":13.2214553797,"Territory":241930,"Average Rainfall":1220,"Corruption":0.1743465513,"Wheat Production (tonnes)":14336835.8,"Rye Production (tonnes)":56256.17,"Potatoes Production (tonnes)":157125,"Meat, chicken Production (tonnes)":70221,"Avocados Production (tonnes)":238651.706,"Petrol Price (USD/liter)":2.22,"Daily Oil Consumption (Barrels)":1583896,"CO2 Emissions (ton per capita)":5.220514488},{"Country":"Slovenia","Country_clean":"slovenia","Region":"Central and Eastern Europe","Happiness":6.743,"Median Salary":1934.46,"Average Salary":2093.02,"Lowest Salary":528.54,"Highest Salary":9302.33,"Infant Survival Rate":1000,"Alcohol Consumption Rate":10.46,"Life Expectancy":88,"Netflix (USD/month)":null,"Women Safety Index":0.824,"Average Winter Temperature":0.9988481,"Average Summer Temperature":1.4752173,"Population":2119844,"Energy Per Capita":34391.094,"% of Power from Fossil Fuels":28.259,"% of Power from Nuclear":42.125,"% of Power from Renewables":29.616,"% of Agricultural Land":30.3410738762,"% of Forest Land":61.3711140025,"Territory":20136.4,"Average Rainfall":1162,"Corruption":0.1467373222,"Wheat Production (tonnes)":645031.8,"Rye Production (tonnes)":168.6,"Potatoes Production (tonnes)":7326446,"Meat, chicken Production (tonnes)":4000,"Avocados Production (tonnes)":163.4,"Petrol Price (USD/liter)":1.62,"Daily Oil Consumption (Barrels)":52298,"CO2 Emissions (ton per capita)":6.512209378},{"Country":"United Arab Emirates","Country_clean":"united arab emirates","Region":"Middle East and North Africa","Happiness":6.733,"Median Salary":3324.25,"Average Salary":3896.46,"Lowest Salary":708.45,"Highest Salary":18637.6,"Infant Survival Rate":999,"Alcohol Consumption Rate":1.91,"Life Expectancy":77.1,"Netflix (USD/month)":13.99,"Women Safety Index":0.868,"Average Winter Temperature":20.363506,"Average Summer Temperature":20.625269,"Population":9441129,"Energy Per Capita":148576.547,"% of Power from Fossil Fuels":82.508,"% of Power from Nuclear":12.992,"% of Power from Renewables":4.5,"% of Agricultural Land":5.5133976345,"% of Forest Land":4.4677555618,"Territory":71020,"Average Rainfall":78,"Corruption":0.1655614674,"Wheat Production (tonnes)":46614014.4,"Rye Production (tonnes)":72513,"Potatoes Production (tonnes)":136000,"Meat, chicken Production (tonnes)":60000,"Avocados Production (tonnes)":43039.038,"Petrol Price (USD/liter)":1.1,"Daily Oil Consumption (Barrels)":896000,"CO2 Emissions (ton per capita)":19.32956328},{"Country":"United States","Country_clean":"united states","Region":"North America and ANZ","Happiness":6.725,"Median Salary":6966,"Average Salary":7925,"Lowest Salary":2000,"Highest Salary":35250,"Infant Survival Rate":977,"Alcohol Consumption Rate":8.82,"Life Expectancy":79.3,"Netflix (USD/month)":13.99,"Women Safety Index":0.823,"Average Winter Temperature":-2.7272227,"Average Summer Temperature":0.94223034,"Population":338289857,"Energy Per Capita":78754.273,"% of Power from Fossil Fuels":59.523,"% of Power from Nuclear":17.956,"% of Power from Renewables":22.521,"% of Agricultural Land":44.3633673539,"% of Forest Land":33.866926412,"Territory":9147420,"Average Rainfall":715,"Corruption":0.1590943187,"Wheat Production (tonnes)":110,"Rye Production (tonnes)":12326464,"Potatoes Production (tonnes)":2525383,"Meat, chicken Production (tonnes)":361499,"Avocados Production (tonnes)":1219.74,"Petrol Price (USD/liter)":1.37,"Daily Oil Consumption (Barrels)":19687287,"CO2 Emissions (ton per capita)":14.67341061},{"Country":"Germany","Country_clean":"germany","Region":"Western Europe","Happiness":6.719,"Median Salary":3731.5,"Average Salary":4048.63,"Lowest Salary":1014.8,"Highest Salary":17970.4,"Infant Survival Rate":998,"Alcohol Consumption Rate":11.03,"Life Expectancy":81,"Netflix (USD/month)":14.67,"Women Safety Index":0.871,"Average Winter Temperature":1.539955,"Average Summer Temperature":3.0275564,"Population":83369843,"Energy Per Capita":40977.492,"% of Power from Fossil Fuels":50.783,"% of Power from Nuclear":6.27,"% of Power from Renewables":42.947,"% of Agricultural Land":47.485617791,"% of Forest Land":32.6826755202,"Territory":349390,"Average Rainfall":700,"Corruption":0.1622093022,"Wheat Production (tonnes)":156400,"Rye Production (tonnes)":601991,"Potatoes Production (tonnes)":138832220,"Meat, chicken Production (tonnes)":14429,"Avocados Production (tonnes)":2073,"Petrol Price (USD/liter)":2.02,"Daily Oil Consumption (Barrels)":2383393,"CO2 Emissions (ton per capita)":7.911621016},{"Country":"Mexico","Country_clean":"mexico","Region":"Latin America and Caribbean","Happiness":6.678,"Median Salary":1681.97,"Average Salary":1917.34,"Lowest Salary":482.78,"Highest Salary":8495.98,"Infant Survival Rate":970,"Alcohol Consumption Rate":5.26,"Life Expectancy":76.7,"Netflix (USD/month)":10.43,"Women Safety Index":0.551,"Average Winter Temperature":15.8056965,"Average Summer Temperature":17.122166,"Population":127504125,"Energy Per Capita":19009.186,"% of Power from Fossil Fuels":74.097,"% of Power from Nuclear":2.964,"% of Power from Renewables":22.938,"% of Agricultural Land":49.9632192186,"% of Forest Land":33.7273678335,"Territory":1943950,"Average Rainfall":758,"Corruption":0.1599350423,"Wheat Production (tonnes)":1744,"Rye Production (tonnes)":260323.2,"Potatoes Production (tonnes)":10968420,"Meat, chicken Production (tonnes)":53300,"Avocados Production (tonnes)":2376648.5,"Petrol Price (USD/liter)":1.15,"Daily Oil Consumption (Barrels)":2052607,"CO2 Emissions (ton per capita)":3.521600048},{"Country":"Uruguay","Country_clean":"uruguay","Region":"Latin America and Caribbean","Happiness":6.611,"Median Salary":773.64,"Average Salary":862.2,"Lowest Salary":217.24,"Highest Salary":3829.12,"Infant Survival Rate":1000,"Alcohol Consumption Rate":6.03,"Life Expectancy":77,"Netflix (USD/month)":12.99,"Women Safety Index":0.748,"Average Winter Temperature":20.111822,"Average Summer Temperature":23.139511,"Population":3422794,"Energy Per Capita":18316.926,"% of Power from Fossil Fuels":15.557,"% of Power from Nuclear":0,"% of Power from Renewables":84.443,"% of Agricultural Land":80.3885555936,"% of Forest Land":11.7243743572,"Territory":175020,"Average Rainfall":1300,"Corruption":0.1677868664,"Wheat Production (tonnes)":223447.024,"Rye Production (tonnes)":7181.2,"Potatoes Production (tonnes)":12261,"Meat, chicken Production (tonnes)":3200,"Avocados Production (tonnes)":36219.6,"Petrol Price (USD/liter)":2.02,"Daily Oil Consumption (Barrels)":53000,"CO2 Emissions (ton per capita)":1.874784543},{"Country":"France","Country_clean":"france","Region":"Western Europe","Happiness":6.609,"Median Salary":3769.56,"Average Salary":4377.38,"Lowest Salary":1100.42,"Highest Salary":19467.23,"Infant Survival Rate":998,"Alcohol Consumption Rate":11.5,"Life Expectancy":82.4,"Netflix (USD/month)":15.24,"Women Safety Index":0.864,"Average Winter Temperature":7.6805277,"Average Summer Temperature":7.854504,"Population":64626628,"Energy Per Capita":36051.793,"% of Power from Fossil Fuels":12.154,"% of Power from Nuclear":63.304,"% of Power from Renewables":24.542,"% of Agricultural Land":52.1475462829,"% of Forest Land":31.6613612829,"Territory":547557,"Average Rainfall":867,"Corruption":0.1622093022,"Wheat Production (tonnes)":332400,"Rye Production (tonnes)":125870,"Potatoes Production (tonnes)":402966,"Meat, chicken Production (tonnes)":10075471,"Avocados Production (tonnes)":28385.3,"Petrol Price (USD/liter)":2.19,"Daily Oil Consumption (Barrels)":1705568,"CO2 Emissions (ton per capita)":4.468770089},{"Country":"Saudi Arabia","Country_clean":"saudi arabia","Region":"Middle East and North Africa","Happiness":6.594,"Median Salary":3840,"Average Salary":4480,"Lowest Salary":1128,"Highest Salary":19893.33,"Infant Survival Rate":993,"Alcohol Consumption Rate":0.09,"Life Expectancy":74.5,"Netflix (USD/month)":null,"Women Safety Index":0.737,"Average Winter Temperature":16.798635,"Average Summer Temperature":17.893715,"Population":36408820,"Energy Per Capita":87707.289,"% of Power from Fossil Fuels":99.792,"% of Power from Nuclear":0,"% of Power from Renewables":0.208,"% of Agricultural Land":80.7730416944,"% of Forest Land":0.4544841349,"Territory":2149690,"Average Rainfall":59,"Corruption":0.1871376336,"Wheat Production (tonnes)":229775,"Rye Production (tonnes)":70119.8,"Potatoes Production (tonnes)":738265,"Meat, chicken Production (tonnes)":5332,"Avocados Production (tonnes)":8802.4,"Petrol Price (USD/liter)":0.62,"Daily Oil Consumption (Barrels)":3302000,"CO2 Emissions (ton per capita)":15.28457873},{"Country":"Kosovo","Country_clean":"kosovo","Region":"Central and Eastern Europe","Happiness":6.561,"Median Salary":null,"Average Salary":null,"Lowest Salary":null,"Highest Salary":null,"Infant Survival Rate":null,"Alcohol Consumption Rate":null,"Life Expectancy":null,"Netflix (USD/month)":null,"Women Safety Index":null,"Average Winter Temperature":1.4193249,"Average Summer Temperature":1.8427454,"Population":null,"Energy Per Capita":16776.646,"% of Power from Fossil Fuels":93.71,"% of Power from Nuclear":0,"% of Power from Renewables":6.29,"% of Agricultural Land":null,"% of Forest Land":null,"Territory":null,"Average Rainfall":null,"Corruption":0.170497179,"Wheat Production (tonnes)":null,"Rye Production (tonnes)":null,"Potatoes Production (tonnes)":null,"Meat, chicken Production (tonnes)":null,"Avocados Production (tonnes)":null,"Petrol Price (USD/liter)":null,"Daily Oil Consumption (Barrels)":null,"CO2 Emissions (ton per capita)":null},{"Country":"Singapore","Country_clean":"singapore","Region":"Southeast Asia","Happiness":6.523,"Median Salary":5647.06,"Average Salary":6235.29,"Lowest Salary":1573.53,"Highest Salary":27720.59,"Infant Survival Rate":1000,"Alcohol Consumption Rate":1.79,"Life Expectancy":83.1,"Netflix (USD/month)":12.81,"Women Safety Index":0.887,"Average Winter Temperature":null,"Average Summer Temperature":null,"Population":5975689,"Energy Per Capita":147084.844,"% of Power from Fossil Fuels":97.591,"% of Power from Nuclear":0,"% of Power from Renewables":2.409,"% of Agricultural Land":0.9192200557,"% of Forest Land":21.43454039,"Territory":718,"Average Rainfall":2497,"Corruption":0.1537519991,"Wheat Production (tonnes)":null,"Rye Production (tonnes)":null,"Potatoes Production (tonnes)":null,"Meat, chicken Production (tonnes)":null,"Avocados Production (tonnes)":null,"Petrol Price (USD/liter)":2.3,"Daily Oil Consumption (Barrels)":1357000,"CO2 Emissions (ton per capita)":8.307079491},{"Country":"Taiwan Province of China","Country_clean":"taiwan province of china","Region":"East Asia","Happiness":6.503,"Median Salary":3684.93,"Average Salary":4027.4,"Lowest Salary":1015.07,"Highest Salary":17945.21,"Infant Survival Rate":994,"Alcohol Consumption Rate":0.01,"Life Expectancy":76,"Netflix (USD/month)":11.9,"Women Safety Index":0.7,"Average Winter Temperature":-6.3306623,"Average Summer Temperature":-5.6608214,"Population":1425887337,"Energy Per Capita":31051.48,"% of Power from Fossil Fuels":64.602,"% of Power from Nuclear":4.725,"% of Power from Renewables":30.673,"% of Agricultural Land":55.4626494294,"% of Forest Land":23.6315282679,"Territory":9388210,"Average Rainfall":645,"Corruption":0.1543876231,"Wheat Production (tonnes)":13631,"Rye Production (tonnes)":800,"Potatoes Production (tonnes)":0,"Meat, chicken Production (tonnes)":6155.65,"Avocados Production (tonnes)":88.19,"Petrol Price (USD/liter)":1.43,"Daily Oil Consumption (Barrels)":12791553,"CO2 Emissions (ton per capita)":7.605936961},{"Country":"Romania","Country_clean":"romania","Region":"Central and Eastern Europe","Happiness":6.491,"Median Salary":1739.87,"Average Salary":1921.11,"Lowest Salary":484.01,"Highest Salary":8550.11,"Infant Survival Rate":998,"Alcohol Consumption Rate":0.01,"Life Expectancy":75,"Netflix (USD/month)":11.29,"Women Safety Index":0.8,"Average Winter Temperature":-0.022084355,"Average Summer Temperature":1.9483956,"Population":19659267,"Energy Per Capita":18346.869,"% of Power from Fossil Fuels":37.815,"% of Power from Nuclear":20.036,"% of Power from Renewables":42.149,"% of Agricultural Land":56.8454450626,"% of Forest Land":30.1158292768,"Territory":230080,"Average Rainfall":637,"Corruption":0.1467373222,"Wheat Production (tonnes)":32129760,"Rye Production (tonnes)":137059.6,"Potatoes Production (tonnes)":119834,"Meat, chicken Production (tonnes)":6314210,"Avocados Production (tonnes)":17978,"Petrol Price (USD/liter)":1.82,"Daily Oil Consumption (Barrels)":200000,"CO2 Emissions (ton per capita)":3.817434477},{"Country":"El Salvador","Country_clean":"el salvador","Region":"Latin America and Caribbean","Happiness":6.469,"Median Salary":1470,"Average Salary":1710,"Lowest Salary":430,"Highest Salary":7610,"Infant Survival Rate":998,"Alcohol Consumption Rate":2.52,"Life Expectancy":73.5,"Netflix (USD/month)":null,"Women Safety Index":0.566,"Average Winter Temperature":25.628748,"Average Summer Temperature":27.070652,"Population":6336392,"Energy Per Capita":7076.433,"% of Power from Fossil Fuels":26.772,"% of Power from Nuclear":0,"% of Power from Renewables":73.228,"% of Agricultural Land":57.7075289575,"% of Forest Land":27.9623552124,"Territory":20720,"Average Rainfall":1784,"Corruption":0.1591664106,"Wheat Production (tonnes)":439000,"Rye Production (tonnes)":9716,"Potatoes Production (tonnes)":104795630,"Meat, chicken Production (tonnes)":1130102,"Avocados Production (tonnes)":93872.16,"Petrol Price (USD/liter)":1.14,"Daily Oil Consumption (Barrels)":52000,"CO2 Emissions (ton per capita)":1.208637136},{"Country":"Estonia","Country_clean":"estonia","Region":"Central and Eastern Europe","Happiness":6.448,"Median Salary":2579.28,"Average Salary":2906.98,"Lowest Salary":729.39,"Highest Salary":12896.41,"Infant Survival Rate":1000,"Alcohol Consumption Rate":0.01,"Life Expectancy":77.6,"Netflix (USD/month)":11.29,"Women Safety Index":0.892,"Average Winter Temperature":-6.8556023,"Average Summer Temperature":1.2210779,"Population":1326062,"Energy Per Capita":46504.863,"% of Power from Fossil Fuels":55.995,"% of Power from Nuclear":0,"% of Power from Renewables":44.005,"% of Agricultural Land":23.0877192982,"% of Forest Land":57.0385964912,"Territory":42750,"Average Rainfall":626,"Corruption":0.1467373222,"Wheat Production (tonnes)":583000,"Rye Production (tonnes)":20000,"Potatoes Production (tonnes)":82505816,"Meat, chicken Production (tonnes)":2425173,"Avocados Production (tonnes)":6500,"Petrol Price (USD/liter)":2.21,"Daily Oil Consumption (Barrels)":28855,"CO2 Emissions (ton per capita)":7.672277909},{"Country":"Poland","Country_clean":"poland","Region":"Central and Eastern Europe","Happiness":6.442,"Median Salary":1496.57,"Average Salary":1736.84,"Lowest Salary":437.07,"Highest Salary":7734.55,"Infant Survival Rate":998,"Alcohol Consumption Rate":10.71,"Life Expectancy":77.5,"Netflix (USD/month)":10.58,"Women Safety Index":0.859,"Average Winter Temperature":-0.49168286,"Average Summer Temperature":2.4689384,"Population":39857145,"Energy Per Capita":30065.42,"% of Power from Fossil Fuels":78.957,"% of Power from Nuclear":0,"% of Power from Renewables":21.043,"% of Agricultural Land":47.3683763476,"% of Forest Land":31.0192747468,"Territory":306100,"Average Rainfall":600,"Corruption":0.1467373222,"Wheat Production (tonnes)":452089,"Rye Production (tonnes)":208680.516,"Potatoes Production (tonnes)":260,"Meat, chicken Production (tonnes)":2000,"Avocados Production (tonnes)":153457.498,"Petrol Price (USD/liter)":1.8,"Daily Oil Consumption (Barrels)":582161,"CO2 Emissions (ton per capita)":7.773641839},{"Country":"Spain","Country_clean":"spain","Region":"Western Europe","Happiness":6.421,"Median Salary":2579.28,"Average Salary":2875.26,"Lowest Salary":877.38,"Highest Salary":12050.74,"Infant Survival Rate":999,"Alcohol Consumption Rate":0.01,"Life Expectancy":82.8,"Netflix (USD/month)":14.67,"Women Safety Index":0.859,"Average Winter Temperature":7.264159,"Average Summer Temperature":8.429356,"Population":47558630,"Energy Per Capita":33615.332,"% of Power from Fossil Fuels":37.267,"% of Power from Nuclear":20.515,"% of Power from Renewables":42.218,"% of Agricultural Land":52.4848941208,"% of Forest Land":37.1727521093,"Territory":499733.244,"Average Rainfall":636,"Corruption":0.1622093022,"Wheat Production (tonnes)":68301098.8,"Rye Production (tonnes)":179520.532,"Potatoes Production (tonnes)":4600000,"Meat, chicken Production (tonnes)":400,"Avocados Production (tonnes)":119712.856,"Petrol Price (USD/liter)":2.21,"Daily Oil Consumption (Barrels)":1290063,"CO2 Emissions (ton per capita)":5.09135092},{"Country":"Serbia","Country_clean":"serbia","Region":"Central and Eastern Europe","Happiness":6.411,"Median Salary":1120.04,"Average Salary":1273.6,"Lowest Salary":320.66,"Highest Salary":5654.41,"Infant Survival Rate":999,"Alcohol Consumption Rate":9.09,"Life Expectancy":75.6,"Netflix (USD/month)":null,"Women Safety Index":0.835,"Average Winter Temperature":1.7233353,"Average Summer Temperature":2.3860748,"Population":7221365,"Energy Per Capita":27640.852,"% of Power from Fossil Fuels":70.509,"% of Power from Nuclear":0,"% of Power from Renewables":29.491,"% of Agricultural Land":41.4436912831,"% of Forest Land":32.3812581758,"Territory":84090,"Average Rainfall":null,"Corruption":0.1620248556,"Wheat Production (tonnes)":3997110.2,"Rye Production (tonnes)":0,"Potatoes Production (tonnes)":1879008,"Meat, chicken Production (tonnes)":387376.3,"Avocados Production (tonnes)":12.308,"Petrol Price (USD/liter)":1.76,"Daily Oil Consumption (Barrels)":74000,"CO2 Emissions (ton per capita)":6.616046939},{"Country":"Chile","Country_clean":"chile","Region":"Latin America and Caribbean","Happiness":6.36,"Median Salary":1890.4,"Average Salary":2090.56,"Lowest Salary":525.98,"Highest Salary":9274.09,"Infant Survival Rate":998,"Alcohol Consumption Rate":7.16,"Life Expectancy":85,"Netflix (USD/month)":9.91,"Women Safety Index":0.736,"Average Winter Temperature":12.694138,"Average Summer Temperature":14.701271,"Population":19603733,"Energy Per Capita":25342.707,"% of Power from Fossil Fuels":47.044,"% of Power from Nuclear":0,"% of Power from Renewables":52.956,"% of Agricultural Land":14.250277056,"% of Forest Land":24.6574727113,"Territory":743532,"Average Rainfall":1522,"Corruption":0.1599350423,"Wheat Production (tonnes)":102965304,"Rye Production (tonnes)":108500,"Potatoes Production (tonnes)":25363,"Meat, chicken Production (tonnes)":230758.84,"Avocados Production (tonnes)":50,"Petrol Price (USD/liter)":1.39,"Daily Oil Consumption (Barrels)":351989,"CO2 Emissions (ton per capita)":4.821118299},{"Country":"Panama","Country_clean":"panama","Region":"Latin America and Caribbean","Happiness":6.358,"Median Salary":1890,"Average Salary":2130,"Lowest Salary":540,"Highest Salary":9460,"Infant Survival Rate":999,"Alcohol Consumption Rate":6.74,"Life Expectancy":77.8,"Netflix (USD/month)":null,"Women Safety Index":0.757,"Average Winter Temperature":24.940985,"Average Summer Temperature":25.922495,"Population":4408581,"Energy Per Capita":27067.068,"% of Power from Fossil Fuels":25.469,"% of Power from Nuclear":0,"% of Power from Renewables":74.531,"% of Agricultural Land":29.4057158264,"% of Forest Land":56.6517026153,"Territory":74180,"Average Rainfall":2928,"Corruption":0.1670125574,"Wheat Production (tonnes)":12000,"Rye Production (tonnes)":7.6,"Potatoes Production (tonnes)":1280086,"Meat, chicken Production (tonnes)":3500,"Avocados Production (tonnes)":16528.4,"Petrol Price (USD/liter)":1.45,"Daily Oil Consumption (Barrels)":155000,"CO2 Emissions (ton per capita)":3.141454996},{"Country":"Malta","Country_clean":"malta","Region":"Western Europe","Happiness":6.346,"Median Salary":4439.75,"Average Salary":4904.86,"Lowest Salary":1236.79,"Highest Salary":21775.9,"Infant Survival Rate":1000,"Alcohol Consumption Rate":8.49,"Life Expectancy":81.7,"Netflix (USD/month)":null,"Women Safety Index":0.846,"Average Winter Temperature":null,"Average Summer Temperature":null,"Population":533286,"Energy Per Capita":74324.461,"% of Power from Fossil Fuels":99.5,"% of Power from Nuclear":0,"% of Power from Renewables":0.5,"% of Agricultural Land":27.34375,"% of Forest Land":1.4375,"Territory":320,"Average Rainfall":560,"Corruption":0.1696073413,"Wheat Production (tonnes)":5165083,"Rye Production (tonnes)":4862470.8,"Potatoes Production (tonnes)":1641853,"Meat, chicken Production (tonnes)":597949,"Avocados Production (tonnes)":4449.6,"Petrol Price (USD/liter)":1.4,"Daily Oil Consumption (Barrels)":47000,"CO2 Emissions (ton per capita)":3.293245606},{"Country":"Italy","Country_clean":"italy","Region":"Western Europe","Happiness":6.324,"Median Salary":3467.23,"Average Salary":3868.92,"Lowest Salary":972.52,"Highest Salary":17230.44,"Infant Survival Rate":999,"Alcohol Consumption Rate":7.56,"Life Expectancy":82.7,"Netflix (USD/month)":14.67,"Women Safety Index":0.827,"Average Winter Temperature":5.8631363,"Average Summer Temperature":6.1182337,"Population":59037474,"Energy Per Capita":28910.201,"% of Power from Fossil Fuels":63.562,"% of Power from Nuclear":0,"% of Power from Renewables":36.438,"% of Agricultural Land":41.942231593,"% of Forest Land":32.5308994748,"Territory":295717,"Average Rainfall":832,"Corruption":0.1622093022,"Wheat Production (tonnes)":5700,"Rye Production (tonnes)":1012,"Potatoes Production (tonnes)":20475928,"Meat, chicken Production (tonnes)":4700,"Avocados Production (tonnes)":13817.47,"Petrol Price (USD/liter)":2.12,"Daily Oil Consumption (Barrels)":1236628,"CO2 Emissions (ton per capita)":5.311315442},{"Country":"Guatemala","Country_clean":"guatemala","Region":"Latin America and Caribbean","Happiness":6.287,"Median Salary":1222.65,"Average Salary":1335.88,"Lowest Salary":337.15,"Highest Salary":5954.2,"Infant Survival Rate":990,"Alcohol Consumption Rate":1.88,"Life Expectancy":71.9,"Netflix (USD/month)":10.99,"Women Safety Index":0.569,"Average Winter Temperature":21.24547,"Average Summer Temperature":22.411528,"Population":17843908,"Energy Per Capita":5712.118,"% of Power from Fossil Fuels":34.488,"% of Power from Nuclear":0,"% of Power from Renewables":65.512,"% of Agricultural Land":43.0384471818,"% of Forest Land":32.812616648,"Territory":107160,"Average Rainfall":1996,"Corruption":0.1670125574,"Wheat Production (tonnes)":483,"Rye Production (tonnes)":511.23,"Potatoes Production (tonnes)":18843300,"Meat, chicken Production (tonnes)":1760,"Avocados Production (tonnes)":1023.49,"Petrol Price (USD/liter)":1.36,"Daily Oil Consumption (Barrels)":93000,"CO2 Emissions (ton per capita)":1.162970924},{"Country":"Nicaragua","Country_clean":"nicaragua","Region":"Latin America and Caribbean","Happiness":6.284,"Median Salary":449.1,"Average Salary":517.15,"Lowest Salary":130.38,"Highest Salary":2299.95,"Infant Survival Rate":998,"Alcohol Consumption Rate":3.55,"Life Expectancy":74.8,"Netflix (USD/month)":null,"Women Safety Index":0.717,"Average Winter Temperature":24.97253,"Average Summer Temperature":25.584845,"Population":6948392,"Energy Per Capita":4265.271,"% of Power from Fossil Fuels":45.356,"% of Power from Nuclear":0,"% of Power from Renewables":54.644,"% of Agricultural Land":42.3051354496,"% of Forest Land":27.4848761841,"Territory":120340,"Average Rainfall":2280,"Corruption":0.1591832638,"Wheat Production (tonnes)":19615588,"Rye Production (tonnes)":1503073.6,"Potatoes Production (tonnes)":770127,"Meat, chicken Production (tonnes)":20825,"Avocados Production (tonnes)":46826.8,"Petrol Price (USD/liter)":1.37,"Daily Oil Consumption (Barrels)":37000,"CO2 Emissions (ton per capita)":0.800549594},{"Country":"Brazil","Country_clean":"brazil","Region":"Latin America and Caribbean","Happiness":6.272,"Median Salary":1490.04,"Average Salary":1711.16,"Lowest Salary":432.27,"Highest Salary":7609.56,"Infant Survival Rate":958,"Alcohol Consumption Rate":7.32,"Life Expectancy":75,"Netflix (USD/month)":7.11,"Women Safety Index":0.63,"Average Winter Temperature":25.908457,"Average Summer Temperature":26.127356,"Population":215313498,"Energy Per Capita":17299.75,"% of Power from Fossil Fuels":10.924,"% of Power from Nuclear":2.135,"% of Power from Renewables":86.94,"% of Agricultural Land":28.6390944636,"% of Forest Land":59.2705274977,"Territory":8358140,"Average Rainfall":1761,"Corruption":0.1599350423,"Wheat Production (tonnes)":19888224,"Rye Production (tonnes)":5533432,"Potatoes Production (tonnes)":166772,"Meat, chicken Production (tonnes)":1593.62,"Avocados Production (tonnes)":43200,"Petrol Price (USD/liter)":1.42,"Daily Oil Consumption (Barrels)":2984000,"CO2 Emissions (ton per capita)":2.057810839},{"Country":"Slovakia","Country_clean":"slovakia","Region":"Central and Eastern Europe","Happiness":6.257,"Median Salary":2114.16,"Average Salary":2315.01,"Lowest Salary":581.4,"Highest Salary":10295.98,"Infant Survival Rate":1000,"Alcohol Consumption Rate":10.6,"Life Expectancy":76.7,"Netflix (USD/month)":11.29,"Women Safety Index":0.856,"Average Winter Temperature":-0.32777002,"Average Summer Temperature":0.70984817,"Population":5643453,"Energy Per Capita":33887.691,"% of Power from Fossil Fuels":17.845,"% of Power from Nuclear":59.484,"% of Power from Renewables":22.671,"% of Agricultural Land":38.6023294509,"% of Forest Land":40.056156406,"Territory":48080,"Average Rainfall":824,"Corruption":0.1467373222,"Wheat Production (tonnes)":46043401.6,"Rye Production (tonnes)":3904665.32,"Potatoes Production (tonnes)":13240782,"Meat, chicken Production (tonnes)":360,"Avocados Production (tonnes)":102320.138,"Petrol Price (USD/liter)":1.98,"Daily Oil Consumption (Barrels)":81587,"CO2 Emissions (ton per capita)":5.698416255},{"Country":"Latvia","Country_clean":"latvia","Region":"Central and Eastern Europe","Happiness":6.234,"Median Salary":1654.0727,"Average Salary":1952.1038,"Lowest Salary":491.75135,"Highest Salary":8657.804,"Infant Survival Rate":null,"Alcohol Consumption Rate":null,"Life Expectancy":null,"Netflix (USD/month)":11.29,"Women Safety Index":0.872,"Average Winter Temperature":-5.6515737,"Average Summer Temperature":1.3988863,"Population":1850651,"Energy Per Capita":21435.611,"% of Power from Fossil Fuels":27.866,"% of Power from Nuclear":0,"% of Power from Renewables":72.134,"% of Agricultural Land":31.6567571911,"% of Forest Land":54.871605335,"Territory":62230,"Average Rainfall":667,"Corruption":0.1467373222,"Wheat Production (tonnes)":68948700,"Rye Production (tonnes)":896889.36,"Potatoes Production (tonnes)":8375542,"Meat, chicken Production (tonnes)":122411.04,"Avocados Production (tonnes)":212977,"Petrol Price (USD/liter)":2.19,"Daily Oil Consumption (Barrels)":37694,"CO2 Emissions (ton per capita)":3.955435862},{"Country":"Uzbekistan","Country_clean":"uzbekistan","Region":"Commonwealth of Independent States","Happiness":6.195,"Median Salary":97.25,"Average Salary":106.98,"Lowest Salary":27.07,"Highest Salary":477.35,"Infant Survival Rate":985,"Alcohol Consumption Rate":0.01,"Life Expectancy":69.4,"Netflix (USD/month)":null,"Women Safety Index":0.674,"Average Winter Temperature":-1.1172104,"Average Summer Temperature":0.41523957,"Population":34627652,"Energy Per Capita":16929.814,"% of Power from Fossil Fuels":91.537,"% of Power from Nuclear":0,"% of Power from Renewables":7.744,"% of Agricultural Land":58.3012029874,"% of Forest Land":8.4318046172,"Territory":440653,"Average Rainfall":206,"Corruption":0.1534096003,"Wheat Production (tonnes)":12797144.4,"Rye Production (tonnes)":56359,"Potatoes Production (tonnes)":4772327.2,"Meat, chicken Production (tonnes)":3600,"Avocados Production (tonnes)":11471,"Petrol Price (USD/liter)":0.9,"Daily Oil Consumption (Barrels)":49000,"CO2 Emissions (ton per capita)":3.47554445},{"Country":"Argentina","Country_clean":"argentina","Region":"Latin America and Caribbean","Happiness":6.188,"Median Salary":110.28,"Average Salary":129.42,"Lowest Salary":32.57,"Highest Salary":577.13,"Infant Survival Rate":992,"Alcohol Consumption Rate":7.93,"Life Expectancy":76.3,"Netflix (USD/month)":6.3,"Women Safety Index":0.768,"Average Winter Temperature":20.045332,"Average Summer Temperature":22.75778,"Population":45510318,"Energy Per Capita":21994.422,"% of Power from Fossil Fuels":63.374,"% of Power from Nuclear":5.199,"% of Power from Renewables":31.426,"% of Agricultural Land":43.1023461554,"% of Forest Land":10.4007639521,"Territory":2736690,"Average Rainfall":591,"Corruption":0.1599350423,"Wheat Production (tonnes)":188681200,"Rye Production (tonnes)":283601,"Potatoes Production (tonnes)":52048230,"Meat, chicken Production (tonnes)":2055000,"Avocados Production (tonnes)":2040,"Petrol Price (USD/liter)":1.05,"Daily Oil Consumption (Barrels)":709000,"CO2 Emissions (ton per capita)":3.740650291},{"Country":"Kazakhstan","Country_clean":"kazakhstan","Region":"Commonwealth of Independent States","Happiness":6.188,"Median Salary":701,"Average Salary":813.99,"Lowest Salary":204.86,"Highest Salary":3620.08,"Infant Survival Rate":996,"Alcohol Consumption Rate":6.29,"Life Expectancy":72,"Netflix (USD/month)":null,"Women Safety Index":0.729,"Average Winter Temperature":-9.164996,"Average Summer Temperature":-7.0029874,"Population":19397998,"Energy Per Capita":44701.98,"% of Power from Fossil Fuels":88.659,"% of Power from Nuclear":0,"% of Power from Renewables":11.341,"% of Agricultural Land":79.1924658295,"% of Forest Land":1.2904838315,"Territory":2699700,"Average Rainfall":250,"Corruption":0.1555387676,"Wheat Production (tonnes)":100,"Rye Production (tonnes)":230580.8,"Potatoes Production (tonnes)":275000,"Meat, chicken Production (tonnes)":2736,"Avocados Production (tonnes)":72.65,"Petrol Price (USD/liter)":0.48,"Daily Oil Consumption (Barrels)":325000,"CO2 Emissions (ton per capita)":11.45693783},{"Country":"Cyprus","Country_clean":"cyprus","Region":"Western Europe","Happiness":6.068,"Median Salary":1976.74,"Average Salary":2293.87,"Lowest Salary":581.4,"Highest Salary":10211.42,"Infant Survival Rate":1000,"Alcohol Consumption Rate":0.01,"Life Expectancy":85,"Netflix (USD/month)":null,"Women Safety Index":0.739,"Average Winter Temperature":13.245076,"Average Summer Temperature":13.512097,"Population":1251488,"Energy Per Capita":25359.791,"% of Power from Fossil Fuels":83.08,"% of Power from Nuclear":0,"% of Power from Renewables":16.92,"% of Agricultural Land":13.3262878788,"% of Forest Land":18.6699134199,"Territory":9240,"Average Rainfall":498,"Corruption":0.1622093022,"Wheat Production (tonnes)":null,"Rye Production (tonnes)":null,"Potatoes Production (tonnes)":null,"Meat, chicken Production (tonnes)":null,"Avocados Production (tonnes)":null,"Petrol Price (USD/liter)":1.86,"Daily Oil Consumption (Barrels)":52000,"CO2 Emissions (ton per capita)":5.998795283},{"Country":"Japan","Country_clean":"japan","Region":"East Asia","Happiness":6.06,"Median Salary":3158.67,"Average Salary":3453.12,"Lowest Salary":869.97,"Highest Salary":15391.82,"Infant Survival Rate":998,"Alcohol Consumption Rate":0.01,"Life Expectancy":83.7,"Netflix (USD/month)":13.13,"Women Safety Index":0.866,"Average Winter Temperature":2.164464,"Average Summer Temperature":2.298908,"Population":123951692,"Energy Per Capita":39984.914,"% of Power from Fossil Fuels":71.011,"% of Power from Nuclear":5.357,"% of Power from Renewables":23.631,"% of Agricultural Land":12.7818930041,"% of Forest Land":68.4087791495,"Territory":364500,"Average Rainfall":1668,"Corruption":0.1614369303,"Wheat Production (tonnes)":38159276,"Rye Production (tonnes)":460847.088,"Potatoes Production (tonnes)":3573873,"Meat, chicken Production (tonnes)":117500,"Avocados Production (tonnes)":92936,"Petrol Price (USD/liter)":1.24,"Daily Oil Consumption (Barrels)":4012877,"CO2 Emissions (ton per capita)":8.540980205},{"Country":"South Korea","Country_clean":"korea republic of","Region":"East Asia","Happiness":6.058,"Median Salary":2593.42,"Average Salary":2889.81,"Lowest Salary":728.38,"Highest Salary":12893,"Infant Survival Rate":999,"Alcohol Consumption Rate":0.01,"Life Expectancy":82.3,"Netflix (USD/month)":11.47,"Women Safety Index":0.848,"Average Winter Temperature":0.54568756,"Average Summer Temperature":1.3578094,"Population":51815810,"Energy Per Capita":68126.188,"% of Power from Fossil Fuels":62.993,"% of Power from Nuclear":27.795,"% of Power from Renewables":9.212,"% of Agricultural Land":16.4241803279,"% of Forest Land":64.3135245902,"Territory":97600,"Average Rainfall":1274,"Corruption":0.1531555355,"Wheat Production (tonnes)":2114998.2,"Rye Production (tonnes)":1300000,"Potatoes Production (tonnes)":715276,"Meat, chicken Production (tonnes)":87928,"Avocados Production (tonnes)":8759.354,"Petrol Price (USD/liter)":1.61,"Daily Oil Consumption (Barrels)":2605440,"CO2 Emissions (ton per capita)":11.79932538},{"Country":"Philippines","Country_clean":"philippines","Region":"Southeast Asia","Happiness":6.048,"Median Salary":728.78,"Average Salary":790.54,"Lowest Salary":199.4,"Highest Salary":3511.56,"Infant Survival Rate":948,"Alcohol Consumption Rate":4.52,"Life Expectancy":68.5,"Netflix (USD/month)":9.14,"Women Safety Index":0.612,"Average Winter Temperature":25.283766,"Average Summer Temperature":25.835867,"Population":115559009,"Energy Per Capita":5066.786,"% of Power from Fossil Fuels":77.417,"% of Power from Nuclear":0,"% of Power from Renewables":22.583,"% of Agricultural Land":42.536137103,"% of Forest Land":24.2260455445,"Territory":298170,"Average Rainfall":2348,"Corruption":0.1470372379,"Wheat Production (tonnes)":111872930,"Rye Production (tonnes)":14215792.8,"Potatoes Production (tonnes)":224700,"Meat, chicken Production (tonnes)":5260,"Avocados Production (tonnes)":161127.4,"Petrol Price (USD/liter)":1.55,"Daily Oil Consumption (Barrels)":429000,"CO2 Emissions (ton per capita)":1.345029057},{"Country":"Vietnam","Country_clean":"vietnam","Region":"Southeast Asia","Happiness":6.043,"Median Salary":612.57,"Average Salary":711.24,"Lowest Salary":179.25,"Highest Salary":3161.52,"Infant Survival Rate":972,"Alcohol Consumption Rate":4.09,"Life Expectancy":76,"Netflix (USD/month)":null,"Women Safety Index":0.707,"Average Winter Temperature":20.113937,"Average Summer Temperature":20.465149,"Population":98186856,"Energy Per Capita":12983.017,"% of Power from Fossil Fuels":48.449,"% of Power from Nuclear":0,"% of Power from Renewables":51.551,"% of Agricultural Land":39.4347683207,"% of Forest Land":46.961161858,"Territory":313429,"Average Rainfall":1821,"Corruption":0.1536959112,"Wheat Production (tonnes)":126369.276,"Rye Production (tonnes)":65741.052,"Potatoes Production (tonnes)":1658756.2,"Meat, chicken Production (tonnes)":18293614,"Avocados Production (tonnes)":77631.608,"Petrol Price (USD/liter)":1.42,"Daily Oil Consumption (Barrels)":478000,"CO2 Emissions (ton per capita)":3.488312636},{"Country":"Portugal","Country_clean":"portugal","Region":"Western Europe","Happiness":6.03,"Median Salary":2537,"Average Salary":2917.55,"Lowest Salary":739.96,"Highest Salary":13002.11,"Infant Survival Rate":1000,"Alcohol Consumption Rate":9.88,"Life Expectancy":81.1,"Netflix (USD/month)":13.54,"Women Safety Index":0.877,"Average Winter Temperature":9.626703,"Average Summer Temperature":10.976666,"Population":10270865,"Energy Per Capita":25094.396,"% of Power from Fossil Fuels":40.183,"% of Power from Nuclear":0,"% of Power from Renewables":59.817,"% of Agricultural Land":43.2538567511,"% of Forest Land":36.1549948911,"Territory":91605.6,"Average Rainfall":854,"Corruption":0.1622093022,"Wheat Production (tonnes)":947400,"Rye Production (tonnes)":3710.18,"Potatoes Production (tonnes)":10200,"Meat, chicken Production (tonnes)":3760,"Avocados Production (tonnes)":125446.8,"Petrol Price (USD/liter)":2.26,"Daily Oil Consumption (Barrels)":236866,"CO2 Emissions (ton per capita)":4.339768426},{"Country":"Hungary","Country_clean":"hungary","Region":"Central and Eastern Europe","Happiness":6.017,"Median Salary":1227.46,"Average Salary":1344.23,"Lowest Salary":339.45,"Highest Salary":5974.36,"Infant Survival Rate":1000,"Alcohol Consumption Rate":0.01,"Life Expectancy":75.8,"Netflix (USD/month)":10.71,"Women Safety Index":0.835,"Average Winter Temperature":1.4500087,"Average Summer Temperature":2.1213894,"Population":9967308,"Energy Per Capita":26660.49,"% of Power from Fossil Fuels":34.178,"% of Power from Nuclear":44.623,"% of Power from Renewables":21.199,"% of Agricultural Land":55.2672430419,"% of Forest Land":22.4803495507,"Territory":91260,"Average Rainfall":589,"Corruption":0.1467373222,"Wheat Production (tonnes)":18287,"Rye Production (tonnes)":240000,"Potatoes Production (tonnes)":13775,"Meat, chicken Production (tonnes)":5795,"Avocados Production (tonnes)":230332,"Petrol Price (USD/liter)":2.01,"Daily Oil Consumption (Barrels)":155544,"CO2 Emissions (ton per capita)":4.74663103},{"Country":"Paraguay","Country_clean":"paraguay","Region":"Latin America and Caribbean","Happiness":5.977,"Median Salary":1019.69,"Average Salary":1126.17,"Lowest Salary":283.93,"Highest Salary":5009.74,"Infant Survival Rate":998,"Alcohol Consumption Rate":0.01,"Life Expectancy":74,"Netflix (USD/month)":11.49,"Women Safety Index":0.691,"Average Winter Temperature":26.823614,"Average Summer Temperature":29.723492,"Population":6780744,"Energy Per Capita":15782.273,"% of Power from Fossil Fuels":0.175,"% of Power from Nuclear":0,"% of Power from Renewables":99.825,"% of Agricultural Land":42.3084319154,"% of Forest Land":39.8261432167,"Territory":397300,"Average Rainfall":1130,"Corruption":0.1677868664,"Wheat Production (tonnes)":3974000,"Rye Production (tonnes)":597306.826,"Potatoes Production (tonnes)":5600,"Meat, chicken Production (tonnes)":83300,"Avocados Production (tonnes)":3820.012,"Petrol Price (USD/liter)":1.4,"Daily Oil Consumption (Barrels)":51000,"CO2 Emissions (ton per capita)":1.165425232},{"Country":"Thailand","Country_clean":"thailand","Region":"Southeast Asia","Happiness":5.976,"Median Salary":2432.28,"Average Salary":2662.11,"Lowest Salary":670.31,"Highest Salary":11846.79,"Infant Survival Rate":992,"Alcohol Consumption Rate":6.41,"Life Expectancy":74.9,"Netflix (USD/month)":10.43,"Women Safety Index":0.764,"Average Winter Temperature":23.979416,"Average Summer Temperature":24.891027,"Population":71697030,"Energy Per Capita":19616.777,"% of Power from Fossil Fuels":84.744,"% of Power from Nuclear":0,"% of Power from Renewables":15.256,"% of Agricultural Land":45.9981600736,"% of Forest Land":38.8283192077,"Territory":510890,"Average Rainfall":1622,"Corruption":0.1531555355,"Wheat Production (tonnes)":2133386,"Rye Production (tonnes)":416000,"Potatoes Production (tonnes)":190964,"Meat, chicken Production (tonnes)":416,"Avocados Production (tonnes)":266926.338,"Petrol Price (USD/liter)":1.51,"Daily Oil Consumption (Barrels)":1302000,"CO2 Emissions (ton per capita)":3.836090019},{"Country":"Malaysia","Country_clean":"malaysia","Region":"Southeast Asia","Happiness":5.975,"Median Salary":1236.17,"Average Salary":1406.38,"Lowest Salary":355.32,"Highest Salary":6255.32,"Infant Survival Rate":996,"Alcohol Consumption Rate":0.52,"Life Expectancy":75,"Netflix (USD/month)":10.65,"Women Safety Index":0.738,"Average Winter Temperature":25.763824,"Average Summer Temperature":25.89396,"Population":33938221,"Energy Per Capita":39586.996,"% of Power from Fossil Fuels":80.96,"% of Power from Nuclear":0,"% of Power from Renewables":19.04,"% of Agricultural Land":26.0873535231,"% of Forest Land":58.0243189773,"Territory":328550,"Average Rainfall":2875,"Corruption":0.1531555355,"Wheat Production (tonnes)":58253,"Rye Production (tonnes)":127405.114,"Potatoes Production (tonnes)":10200,"Meat, chicken Production (tonnes)":1556741.9,"Avocados Production (tonnes)":84517.6,"Petrol Price (USD/liter)":0.46,"Daily Oil Consumption (Barrels)":708000,"CO2 Emissions (ton per capita)":7.927126037},{"Country":"China","Country_clean":"china","Region":"East Asia","Happiness":5.973,"Median Salary":3684.93,"Average Salary":4027.4,"Lowest Salary":1015.07,"Highest Salary":17945.21,"Infant Survival Rate":null,"Alcohol Consumption Rate":null,"Life Expectancy":null,"Netflix (USD/month)":null,"Women Safety Index":0.7,"Average Winter Temperature":-6.3306623,"Average Summer Temperature":-5.6608214,"Population":1425887337,"Energy Per Capita":31051.48,"% of Power from Fossil Fuels":64.602,"% of Power from Nuclear":4.725,"% of Power from Renewables":30.673,"% of Agricultural Land":55.4626494294,"% of Forest Land":23.6315282679,"Territory":9388210,"Average Rainfall":645,"Corruption":0.1543876231,"Wheat Production (tonnes)":13631,"Rye Production (tonnes)":800,"Potatoes Production (tonnes)":0,"Meat, chicken Production (tonnes)":6155.65,"Avocados Production (tonnes)":88.19,"Petrol Price (USD/liter)":1.43,"Daily Oil Consumption (Barrels)":12791553,"CO2 Emissions (ton per capita)":7.605936961},{"Country":"Honduras","Country_clean":"honduras","Region":"Latin America and Caribbean","Happiness":5.968,"Median Salary":1022.22,"Average Salary":1139.39,"Lowest Salary":287.27,"Highest Salary":5090.91,"Infant Survival Rate":997,"Alcohol Consumption Rate":2.87,"Life Expectancy":74.6,"Netflix (USD/month)":10.99,"Women Safety Index":0.61,"Average Winter Temperature":22.25614,"Average Summer Temperature":23.138378,"Population":10432860,"Energy Per Capita":5086.934,"% of Power from Fossil Fuels":48.037,"% of Power from Nuclear":0,"% of Power from Renewables":51.963,"% of Agricultural Land":31.9599606757,"% of Forest Land":56.6476896952,"Territory":111890,"Average Rainfall":1976,"Corruption":0.1517658681,"Wheat Production (tonnes)":2455774,"Rye Production (tonnes)":3800,"Potatoes Production (tonnes)":2055233,"Meat, chicken Production (tonnes)":710,"Avocados Production (tonnes)":12.8,"Petrol Price (USD/liter)":1.45,"Daily Oil Consumption (Barrels)":58000,"CO2 Emissions (ton per capita)":1.048622992},{"Country":"Bahrain","Country_clean":"bahrain","Region":"Middle East and North Africa","Happiness":5.959,"Median Salary":3617.02,"Average Salary":3936.17,"Lowest Salary":984.04,"Highest Salary":17553.19,"Infant Survival Rate":1000,"Alcohol Consumption Rate":1.57,"Life Expectancy":76.9,"Netflix (USD/month)":null,"Women Safety Index":0.752,"Average Winter Temperature":18.957916,"Average Summer Temperature":19.866425,"Population":1472233,"Energy Per Capita":161111.203,"% of Power from Fossil Fuels":99.969,"% of Power from Nuclear":0,"% of Power from Renewables":0.031,"% of Agricultural Land":10.253164557,"% of Forest Land":0.9113924051,"Territory":790,"Average Rainfall":83,"Corruption":0.1871376336,"Wheat Production (tonnes)":null,"Rye Production (tonnes)":null,"Potatoes Production (tonnes)":null,"Meat, chicken Production (tonnes)":null,"Avocados Production (tonnes)":null,"Petrol Price (USD/liter)":0.53,"Daily Oil Consumption (Barrels)":62000,"CO2 Emissions (ton per capita)":20.26610279},{"Country":"Croatia","Country_clean":"croatia","Region":"Central and Eastern Europe","Happiness":5.942,"Median Salary":1935.48,"Average Salary":2089.76,"Lowest Salary":527.35,"Highest Salary":9298.74,"Infant Survival Rate":1000,"Alcohol Consumption Rate":12.14,"Life Expectancy":78,"Netflix (USD/month)":11.29,"Women Safety Index":0.862,"Average Winter Temperature":3.5226943,"Average Summer Temperature":3.6475925,"Population":4030358,"Energy Per Capita":23468.168,"% of Power from Fossil Fuels":36.686,"% of Power from Nuclear":0,"% of Power from Renewables":63.314,"% of Agricultural Land":26.3759828449,"% of Forest Land":34.6963902788,"Territory":55960,"Average Rainfall":1113,"Corruption":0.1467373222,"Wheat Production (tonnes)":73391864,"Rye Production (tonnes)":60000,"Potatoes Production (tonnes)":122.62,"Meat, chicken Production (tonnes)":36,"Avocados Production (tonnes)":47000,"Petrol Price (USD/liter)":1.91,"Daily Oil Consumption (Barrels)":69000,"CO2 Emissions (ton per capita)":4.063707833},{"Country":"Greece","Country_clean":"greece","Region":"Western Europe","Happiness":5.934,"Median Salary":2241.01,"Average Salary":2579.28,"Lowest Salary":655.39,"Highest Salary":11522.2,"Infant Survival Rate":1000,"Alcohol Consumption Rate":7.53,"Life Expectancy":81,"Netflix (USD/month)":12.42,"Women Safety Index":0.766,"Average Winter Temperature":7.6042023,"Average Summer Temperature":8.659867,"Population":10384971,"Energy Per Capita":30410.344,"% of Power from Fossil Fuels":56.693,"% of Power from Nuclear":0,"% of Power from Renewables":43.307,"% of Agricultural Land":45.5173622964,"% of Forest Land":30.2699767261,"Territory":128900,"Average Rainfall":652,"Corruption":0.1622093022,"Wheat Production (tonnes)":4317391,"Rye Production (tonnes)":366200,"Potatoes Production (tonnes)":1512428,"Meat, chicken Production (tonnes)":1049150,"Avocados Production (tonnes)":77556,"Petrol Price (USD/liter)":2.51,"Daily Oil Consumption (Barrels)":296101,"CO2 Emissions (ton per capita)":5.59618907},{"Country":"Bosnia and Herzegovina","Country_clean":"bosnia and herzegovina","Region":"Central and Eastern Europe","Happiness":5.877,"Median Salary":1151.35,"Average Salary":1248.65,"Lowest Salary":313.51,"Highest Salary":5567.57,"Infant Survival Rate":1000,"Alcohol Consumption Rate":4.03,"Life Expectancy":77.4,"Netflix (USD/month)":null,"Women Safety Index":0.754,"Average Winter Temperature":2.2383707,"Average Summer Temperature":2.2406917,"Population":3233526,"Energy Per Capita":23013.498,"% of Power from Fossil Fuels":62.131,"% of Power from Nuclear":0,"% of Power from Renewables":37.869,"% of Agricultural Land":44.19921875,"% of Forest Land":42.7326171875,"Territory":51200,"Average Rainfall":1028,"Corruption":0.1741266698,"Wheat Production (tonnes)":9024254,"Rye Production (tonnes)":771700,"Potatoes Production (tonnes)":81498,"Meat, chicken Production (tonnes)":20326,"Avocados Production (tonnes)":8525.45,"Petrol Price (USD/liter)":1.73,"Daily Oil Consumption (Barrels)":35000,"CO2 Emissions (ton per capita)":6.382918043},{"Country":"Libya","Country_clean":"libya","Region":"Middle East and North Africa","Happiness":5.866,"Median Salary":417.18,"Average Salary":470.35,"Lowest Salary":118.61,"Highest Salary":2085.89,"Infant Survival Rate":999,"Alcohol Consumption Rate":0.01,"Life Expectancy":72.7,"Netflix (USD/month)":null,"Women Safety Index":0.61,"Average Winter Temperature":13.038244,"Average Summer Temperature":13.510715,"Population":6812341,"Energy Per Capita":28270.334,"% of Power from Fossil Fuels":99.969,"% of Power from Nuclear":0,"% of Power from Renewables":0.031,"% of Agricultural Land":8.7238710117,"% of Forest Land":0.1233276879,"Territory":1759540,"Average Rainfall":56,"Corruption":0.2036707252,"Wheat Production (tonnes)":85250690,"Rye Production (tonnes)":960041.848,"Potatoes Production (tonnes)":124532,"Meat, chicken Production (tonnes)":125192,"Avocados Production (tonnes)":1306.12,"Petrol Price (USD/liter)":0.03,"Daily Oil Consumption (Barrels)":223000,"CO2 Emissions (ton per capita)":8.380729344},{"Country":"Jamaica","Country_clean":"jamaica","Region":"Latin America and Caribbean","Happiness":5.842,"Median Salary":565.78,"Average Salary":624.56,"Lowest Salary":157.59,"Highest Salary":2777.24,"Infant Survival Rate":999,"Alcohol Consumption Rate":3.83,"Life Expectancy":76.2,"Netflix (USD/month)":null,"Women Safety Index":0.71,"Average Winter Temperature":25.523024,"Average Summer Temperature":25.65008,"Population":2827377,"Energy Per Capita":12235.784,"% of Power from Fossil Fuels":83.908,"% of Power from Nuclear":0,"% of Power from Renewables":16.092,"% of Agricultural Land":38.5041551247,"% of Forest Land":55.4730655586,"Territory":10830,"Average Rainfall":2051,"Corruption":0.1735760421,"Wheat Production (tonnes)":1012930,"Rye Production (tonnes)":878583,"Potatoes Production (tonnes)":29460,"Meat, chicken Production (tonnes)":26500,"Avocados Production (tonnes)":95729.19,"Petrol Price (USD/liter)":1.68,"Daily Oil Consumption (Barrels)":54000,"CO2 Emissions (ton per capita)":2.845730012},{"Country":"Peru","Country_clean":"peru","Region":"Latin America and Caribbean","Happiness":5.841,"Median Salary":1825.86,"Average Salary":1997.36,"Lowest Salary":503.96,"Highest Salary":8891.82,"Infant Survival Rate":992,"Alcohol Consumption Rate":0.01,"Life Expectancy":75.5,"Netflix (USD/month)":8.56,"Women Safety Index":0.717,"Average Winter Temperature":20.036163,"Average Summer Temperature":20.772074,"Population":34049588,"Energy Per Capita":9835.475,"% of Power from Fossil Fuels":44.915,"% of Power from Nuclear":0,"% of Power from Renewables":55.085,"% of Agricultural Land":19.9341320313,"% of Forest Land":56.3730728906,"Territory":1280000,"Average Rainfall":1738,"Corruption":0.1599350423,"Wheat Production (tonnes)":29718000,"Rye Production (tonnes)":586828.8,"Potatoes Production (tonnes)":3289722,"Meat, chicken Production (tonnes)":130,"Avocados Production (tonnes)":83822.8,"Petrol Price (USD/liter)":1.65,"Daily Oil Consumption (Barrels)":246000,"CO2 Emissions (ton per capita)":1.745591927},{"Country":"Dominican Republic","Country_clean":"dominican republic","Region":"Latin America and Caribbean","Happiness":5.823,"Median Salary":318.89,"Average Salary":350.6,"Lowest Salary":88.62,"Highest Salary":1562.72,"Infant Survival Rate":994,"Alcohol Consumption Rate":5.92,"Life Expectancy":73.9,"Netflix (USD/month)":null,"Women Safety Index":0.666,"Average Winter Temperature":23.858599,"Average Summer Temperature":23.987373,"Population":11228821,"Energy Per Capita":9987.583,"% of Power from Fossil Fuels":83.059,"% of Power from Nuclear":0,"% of Power from Renewables":16.941,"% of Agricultural Land":51.1034903537,"% of Forest Land":45.2797121878,"Territory":47531,"Average Rainfall":1410,"Corruption":0.1670125574,"Wheat Production (tonnes)":32079,"Rye Production (tonnes)":1143319,"Potatoes Production (tonnes)":422589.44,"Meat, chicken Production (tonnes)":5300,"Avocados Production (tonnes)":70948,"Petrol Price (USD/liter)":1.41,"Daily Oil Consumption (Barrels)":133000,"CO2 Emissions (ton per capita)":2.535627952},{"Country":"Mauritius","Country_clean":"mauritius","Region":"Sub-Saharan Africa","Happiness":5.816,"Median Salary":901.53,"Average Salary":1047.66,"Lowest Salary":263.04,"Highest Salary":4653.78,"Infant Survival Rate":1000,"Alcohol Consumption Rate":0.01,"Life Expectancy":74.6,"Netflix (USD/month)":null,"Women Safety Index":0.678,"Average Winter Temperature":25.453356,"Average Summer Temperature":26.709538,"Population":1299469,"Energy Per Capita":19724.719,"% of Power from Fossil Fuels":79.167,"% of Power from Nuclear":0,"% of Power from Renewables":20.833,"% of Agricultural Land":43.0645968953,"% of Forest Land":19.4341512268,"Territory":1997,"Average Rainfall":2041,"Corruption":0.1810258031,"Wheat Production (tonnes)":201,"Rye Production (tonnes)":590006.12,"Potatoes Production (tonnes)":465598.97,"Meat, chicken Production (tonnes)":1080,"Avocados Production (tonnes)":194246.34,"Petrol Price (USD/liter)":1.68,"Daily Oil Consumption (Barrels)":28000,"CO2 Emissions (ton per capita)":3.294591006},{"Country":"Moldova","Country_clean":"moldova","Region":"Commonwealth of Independent States","Happiness":5.816,"Median Salary":1318.68,"Average Salary":1467.03,"Lowest Salary":370.33,"Highest Salary":6538.46,"Infant Survival Rate":999,"Alcohol Consumption Rate":9.99,"Life Expectancy":72.1,"Netflix (USD/month)":11.29,"Women Safety Index":0.758,"Average Winter Temperature":-0.58977896,"Average Summer Temperature":2.0659935,"Population":3272996,"Energy Per Capita":16006.373,"% of Power from Fossil Fuels":93.123,"% of Power from Nuclear":0,"% of Power from Renewables":6.877,"% of Agricultural Land":69.0021231423,"% of Forest Land":11.7227782833,"Territory":32970,"Average Rainfall":450,"Corruption":0.1620248556,"Wheat Production (tonnes)":1713061,"Rye Production (tonnes)":277982.8,"Potatoes Production (tonnes)":2263.6,"Meat, chicken Production (tonnes)":474021.6,"Avocados Production (tonnes)":4707.65,"Petrol Price (USD/liter)":1.78,"Daily Oil Consumption (Barrels)":18001,"CO2 Emissions (ton per capita)":3.324610168},{"Country":"Russia","Country_clean":"russian federation","Region":"Commonwealth of Independent States","Happiness":5.785,"Median Salary":975.51,"Average Salary":1065.68,"Lowest Salary":268.47,"Highest Salary":4744.34,"Infant Survival Rate":987,"Alcohol Consumption Rate":10.12,"Life Expectancy":75,"Netflix (USD/month)":10.84,"Women Safety Index":0.752,"Average Winter Temperature":-22.901932,"Average Summer Temperature":-16.512663,"Population":144713314,"Energy Per Capita":55459.422,"% of Power from Fossil Fuels":61.33,"% of Power from Nuclear":20.309,"% of Power from Renewables":18.361,"% of Agricultural Land":13.158436258,"% of Forest Land":49.7843360789,"Territory":16376870,"Average Rainfall":460,"Corruption":0.1620248556,"Wheat Production (tonnes)":38418516,"Rye Production (tonnes)":69628.2,"Potatoes Production (tonnes)":391924.53,"Meat, chicken Production (tonnes)":21388082,"Avocados Production (tonnes)":25469.03,"Petrol Price (USD/liter)":0.9,"Daily Oil Consumption (Barrels)":3631287,"CO2 Emissions (ton per capita)":11.79720293},{"Country":"Bolivia","Country_clean":"bolivia","Region":"Latin America and Caribbean","Happiness":5.784,"Median Salary":1131.5,"Average Salary":1236.99,"Lowest Salary":312.14,"Highest Salary":5505.78,"Infant Survival Rate":992,"Alcohol Consumption Rate":3.62,"Life Expectancy":77,"Netflix (USD/month)":10.99,"Women Safety Index":0.696,"Average Winter Temperature":22.62405,"Average Summer Temperature":23.684843,"Population":12224110,"Energy Per Capita":7062.148,"% of Power from Fossil Fuels":60.692,"% of Power from Nuclear":0,"% of Power from Renewables":39.308,"% of Agricultural Land":35.1881908982,"% of Forest Land":46.7283054556,"Territory":1083300,"Average Rainfall":1146,"Corruption":0.1598362178,"Wheat Production (tonnes)":631.08,"Rye Production (tonnes)":564675,"Potatoes Production (tonnes)":261690,"Meat, chicken Production (tonnes)":1208,"Avocados Production (tonnes)":35000,"Petrol Price (USD/liter)":0.54,"Daily Oil Consumption (Barrels)":90000,"CO2 Emissions (ton per capita)":1.940398005},{"Country":"Ecuador","Country_clean":"ecuador","Region":"Latin America and Caribbean","Happiness":5.725,"Median Salary":1260,"Average Salary":1370,"Lowest Salary":340,"Highest Salary":6080,"Infant Survival Rate":994,"Alcohol Consumption Rate":3.82,"Life Expectancy":76.2,"Netflix (USD/month)":10.99,"Women Safety Index":0.655,"Average Winter Temperature":21.600014,"Average Summer Temperature":22.433525,"Population":18001000,"Energy Per Capita":12150.252,"% of Power from Fossil Fuels":24.275,"% of Power from Nuclear":0,"% of Power from Renewables":75.725,"% of Agricultural Land":22.0244805927,"% of Forest Land":50.0626509905,"Territory":248360,"Average Rainfall":2274,"Corruption":0.1677868664,"Wheat Production (tonnes)":2754740,"Rye Production (tonnes)":4000,"Potatoes Production (tonnes)":376000,"Meat, chicken Production (tonnes)":118350,"Avocados Production (tonnes)":163323,"Petrol Price (USD/liter)":1.17,"Daily Oil Consumption (Barrels)":259000,"CO2 Emissions (ton per capita)":2.261469817},{"Country":"Kyrgyzstan","Country_clean":"kyrgyzstan","Region":"Commonwealth of Independent States","Happiness":5.714,"Median Salary":201.87,"Average Salary":219.92,"Lowest Salary":55.6,"Highest Salary":980.04,"Infant Survival Rate":997,"Alcohol Consumption Rate":0.01,"Life Expectancy":71.1,"Netflix (USD/month)":null,"Women Safety Index":0.673,"Average Winter Temperature":-12.751518,"Average Summer Temperature":-8.788135,"Population":6630623,"Energy Per Capita":9274.61,"% of Power from Fossil Fuels":10.097,"% of Power from Nuclear":0,"% of Power from Renewables":89.903,"% of Agricultural Land":null,"% of Forest Land":null,"Territory":null,"Average Rainfall":null,"Corruption":null,"Wheat Production (tonnes)":8330,"Rye Production (tonnes)":260323.2,"Potatoes Production (tonnes)":1791600,"Meat, chicken Production (tonnes)":3175853,"Avocados Production (tonnes)":429912,"Petrol Price (USD/liter)":0.83,"Daily Oil Consumption (Barrels)":40000,"CO2 Emissions (ton per capita)":null},{"Country":"Montenegro","Country_clean":"montenegro","Region":"Central and Eastern Europe","Happiness":5.707,"Median Salary":2621.56,"Average Salary":2832.98,"Lowest Salary":718.82,"Highest Salary":12579.28,"Infant Survival Rate":1000,"Alcohol Consumption Rate":0.01,"Life Expectancy":76.1,"Netflix (USD/month)":null,"Women Safety Index":0.808,"Average Winter Temperature":1.7943455,"Average Summer Temperature":2.1861253,"Population":627082,"Energy Per Capita":18940.291,"% of Power from Fossil Fuels":47.678,"% of Power from Nuclear":0,"% of Power from Renewables":52.322,"% of Agricultural Land":19.0007434944,"% of Forest Land":61.4869888476,"Territory":13450,"Average Rainfall":null,"Corruption":0.1997847706,"Wheat Production (tonnes)":1275302,"Rye Production (tonnes)":3805260,"Potatoes Production (tonnes)":248321,"Meat, chicken Production (tonnes)":789921.3,"Avocados Production (tonnes)":330240.25,"Petrol Price (USD/liter)":1.71,"Daily Oil Consumption (Barrels)":7000,"CO2 Emissions (ton per capita)":4.179875994},{"Country":"Mongolia","Country_clean":"mongolia","Region":"East Asia","Happiness":5.696,"Median Salary":515.76,"Average Salary":564.74,"Lowest Salary":142.34,"Highest Salary":2509.62,"Infant Survival Rate":999,"Alcohol Consumption Rate":0.01,"Life Expectancy":68.8,"Netflix (USD/month)":null,"Women Safety Index":0.794,"Average Winter Temperature":-18.015043,"Average Summer Temperature":-16.466763,"Population":3398366,"Energy Per Capita":22407.674,"% of Power from Fossil Fuels":91.197,"% of Power from Nuclear":0,"% of Power from Renewables":8.803,"% of Agricultural Land":72.3150521956,"% of Forest Land":9.0989446596,"Territory":1557507,"Average Rainfall":241,"Corruption":0.1558940709,"Wheat Production (tonnes)":null,"Rye Production (tonnes)":null,"Potatoes Production (tonnes)":null,"Meat, chicken Production (tonnes)":null,"Avocados Production (tonnes)":null,"Petrol Price (USD/liter)":1.23,"Daily Oil Consumption (Barrels)":21000,"CO2 Emissions (ton per capita)":7.153120086},{"Country":"Colombia","Country_clean":"colombia","Region":"Latin America and Caribbean","Happiness":5.695,"Median Salary":995.6,"Average Salary":1157.85,"Lowest Salary":292.53,"Highest Salary":5137.79,"Infant Survival Rate":990,"Alcohol Consumption Rate":4.38,"Life Expectancy":74.8,"Netflix (USD/month)":6.86,"Women Safety Index":0.582,"Average Winter Temperature":24.625221,"Average Summer Temperature":25.879896,"Population":51874024,"Energy Per Capita":11746.604,"% of Power from Fossil Fuels":24.503,"% of Power from Nuclear":0,"% of Power from Renewables":75.497,"% of Agricultural Land":38.5020279405,"% of Forest Land":53.125395854,"Territory":1109500,"Average Rainfall":3240,"Corruption":0.1599350423,"Wheat Production (tonnes)":144885,"Rye Production (tonnes)":168,"Potatoes Production (tonnes)":111760,"Meat, chicken Production (tonnes)":13216000,"Avocados Production (tonnes)":9570,"Petrol Price (USD/liter)":0.6,"Daily Oil Consumption (Barrels)":357000,"CO2 Emissions (ton per capita)":1.609870831},{"Country":"Venezuela","Country_clean":"venezuela","Region":"Latin America and Caribbean","Happiness":5.607,"Median Salary":3282.02,"Average Salary":3862.91,"Lowest Salary":972.99,"Highest Salary":17165.26,"Infant Survival Rate":991,"Alcohol Consumption Rate":6.47,"Life Expectancy":74.1,"Netflix (USD/month)":10.99,"Women Safety Index":0.628,"Average Winter Temperature":26.43019,"Average Summer Temperature":27.094582,"Population":28301696,"Energy Per Capita":21683.146,"% of Power from Fossil Fuels":35.508,"% of Power from Nuclear":0,"% of Power from Renewables":80.468,"% of Agricultural Land":24.3750354288,"% of Forest Land":52.3477807381,"Territory":882050,"Average Rainfall":2044,"Corruption":0.1630260944,"Wheat Production (tonnes)":2600996.2,"Rye Production (tonnes)":33067.614,"Potatoes Production (tonnes)":122987476,"Meat, chicken Production (tonnes)":18293614,"Avocados Production (tonnes)":26527.058,"Petrol Price (USD/liter)":0.02,"Daily Oil Consumption (Barrels)":598000,"CO2 Emissions (ton per capita)":3.939566209},{"Country":"Indonesia","Country_clean":"indonesia","Region":"Southeast Asia","Happiness":5.568,"Median Salary":678.91,"Average Salary":788.83,"Lowest Salary":198.5,"Highest Salary":3504.47,"Infant Survival Rate":886,"Alcohol Consumption Rate":0.09,"Life Expectancy":69.1,"Netflix (USD/month)":10.66,"Women Safety Index":0.7,"Average Winter Temperature":25.869717,"Average Summer Temperature":25.94353,"Population":275501339,"Energy Per Capita":9854.455,"% of Power from Fossil Fuels":80.383,"% of Power from Nuclear":0,"% of Power from Renewables":19.617,"% of Agricultural Land":34.1337419294,"% of Forest Land":48.3619448681,"Territory":1892555.47,"Average Rainfall":2702,"Corruption":0.1470372379,"Wheat Production (tonnes)":209830,"Rye Production (tonnes)":38193584,"Potatoes Production (tonnes)":95170,"Meat, chicken Production (tonnes)":158.9,"Avocados Production (tonnes)":382467,"Petrol Price (USD/liter)":1.18,"Daily Oil Consumption (Barrels)":1623000,"CO2 Emissions (ton per capita)":2.290397148},{"Country":"Bulgaria","Country_clean":"bulgaria","Region":"Central and Eastern Europe","Happiness":5.463,"Median Salary":1605.41,"Average Salary":1794.59,"Lowest Salary":454.05,"Highest Salary":7945.95,"Infant Survival Rate":1000,"Alcohol Consumption Rate":12.03,"Life Expectancy":74.5,"Netflix (USD/month)":11.29,"Women Safety Index":0.826,"Average Winter Temperature":1.7989875,"Average Summer Temperature":3.720064,"Population":6781953,"Energy Per Capita":34175.52,"% of Power from Fossil Fuels":48.754,"% of Power from Nuclear":32.543,"% of Power from Renewables":18.703,"% of Agricultural Land":46.4867096536,"% of Forest Land":35.9801031688,"Territory":108560,"Average Rainfall":608,"Corruption":0.1467373222,"Wheat Production (tonnes)":2800,"Rye Production (tonnes)":79.38,"Potatoes Production (tonnes)":4584500,"Meat, chicken Production (tonnes)":13234959,"Avocados Production (tonnes)":193,"Petrol Price (USD/liter)":1.72,"Daily Oil Consumption (Barrels)":97000,"CO2 Emissions (ton per capita)":5.61085728},{"Country":"Armenia","Country_clean":"armenia","Region":"Commonwealth of Independent States","Happiness":5.455,"Median Salary":1700.25,"Average Salary":1974.32,"Lowest Salary":497.39,"Highest Salary":8780.39,"Infant Survival Rate":999,"Alcohol Consumption Rate":3.91,"Life Expectancy":74.8,"Netflix (USD/month)":null,"Women Safety Index":0.772,"Average Winter Temperature":-2.63862,"Average Summer Temperature":-2.4225743,"Population":2780469,"Energy Per Capita":17684.547,"% of Power from Fossil Fuels":43.443,"% of Power from Nuclear":25.273,"% of Power from Renewables":31.284,"% of Agricultural Land":58.827537759,"% of Forest Land":11.5300316122,"Territory":28470,"Average Rainfall":562,"Corruption":0.1820750087,"Wheat Production (tonnes)":328610800,"Rye Production (tonnes)":188384.1,"Potatoes Production (tonnes)":174471740,"Meat, chicken Production (tonnes)":9700,"Avocados Production (tonnes)":7610,"Petrol Price (USD/liter)":1.26,"Daily Oil Consumption (Barrels)":6000,"CO2 Emissions (ton per capita)":2.086060678},{"Country":"South Africa","Country_clean":"south africa","Region":"Sub-Saharan Africa","Happiness":5.422,"Median Salary":1441.44,"Average Salary":1658.72,"Lowest Salary":417.59,"Highest Salary":7366.19,"Infant Survival Rate":958,"Alcohol Consumption Rate":7.38,"Life Expectancy":62.9,"Netflix (USD/month)":10.05,"Women Safety Index":0.688,"Average Winter Temperature":23.753565,"Average Summer Temperature":24.343164,"Population":59893885,"Energy Per Capita":22350.898,"% of Power from Fossil Fuels":86.194,"% of Power from Nuclear":4.714,"% of Power from Renewables":9.092,"% of Agricultural Land":79.4178502832,"% of Forest Land":14.0250847011,"Territory":1213090,"Average Rainfall":495,"Corruption":0.1603969038,"Wheat Production (tonnes)":230786548,"Rye Production (tonnes)":310517.2,"Potatoes Production (tonnes)":200506,"Meat, chicken Production (tonnes)":1296,"Avocados Production (tonnes)":2868,"Petrol Price (USD/liter)":1.48,"Daily Oil Consumption (Barrels)":640000,"CO2 Emissions (ton per capita)":7.507736092},{"Country":"North Macedonia","Country_clean":"north macedonia","Region":"Central and Eastern Europe","Happiness":5.369,"Median Salary":677,"Average Salary":794.14,"Lowest Salary":199.83,"Highest Salary":3531.44,"Infant Survival Rate":1000,"Alcohol Consumption Rate":1.13,"Life Expectancy":75.7,"Netflix (USD/month)":null,"Women Safety Index":0.798,"Average Winter Temperature":1.727479,"Average Summer Temperature":2.884718,"Population":2093599,"Energy Per Capita":13874.975,"% of Power from Fossil Fuels":72.818,"% of Power from Nuclear":0,"% of Power from Renewables":27.182,"% of Agricultural Land":49.9603489294,"% of Forest Land":39.7101506741,"Territory":25220,"Average Rainfall":619,"Corruption":0.1741266698,"Wheat Production (tonnes)":1044000,"Rye Production (tonnes)":143862.004,"Potatoes Production (tonnes)":10800,"Meat, chicken Production (tonnes)":63139.8,"Avocados Production (tonnes)":40944.6,"Petrol Price (USD/liter)":1.88,"Daily Oil Consumption (Barrels)":21000,"CO2 Emissions (ton per capita)":3.996737213},{"Country":"Algeria","Country_clean":"algeria","Region":"Middle East and North Africa","Happiness":5.364,"Median Salary":1148.84,"Average Salary":1308.81,"Lowest Salary":330.11,"Highest Salary":5824.18,"Infant Survival Rate":979,"Alcohol Consumption Rate":0.01,"Life Expectancy":75.6,"Netflix (USD/month)":null,"Women Safety Index":0.622,"Average Winter Temperature":13.421954,"Average Summer Temperature":14.559108,"Population":44903225,"Energy Per Capita":15252.127,"% of Power from Fossil Fuels":98.826,"% of Power from Nuclear":0,"% of Power from Renewables":0.839,"% of Agricultural Land":17.3470041453,"% of Forest Land":0.8222276478,"Territory":2381741,"Average Rainfall":89,"Corruption":0.178580597,"Wheat Production (tonnes)":2168386,"Rye Production (tonnes)":135945,"Potatoes Production (tonnes)":4360880,"Meat, chicken Production (tonnes)":257644.62,"Avocados Production (tonnes)":1240356.5,"Petrol Price (USD/liter)":0.31,"Daily Oil Consumption (Barrels)":429000,"CO2 Emissions (ton per capita)":3.977650459},{"Country":"Hong Kong S.A.R. of China","Country_clean":"hong kong sar of china","Region":"East Asia","Happiness":5.316,"Median Salary":3684.93,"Average Salary":4027.4,"Lowest Salary":1015.07,"Highest Salary":17945.21,"Infant Survival Rate":994,"Alcohol Consumption Rate":0.01,"Life Expectancy":76,"Netflix (USD/month)":10,"Women Safety Index":0.7,"Average Winter Temperature":-6.3306623,"Average Summer Temperature":-5.6608214,"Population":1425887337,"Energy Per Capita":31051.48,"% of Power from Fossil Fuels":64.602,"% of Power from Nuclear":4.725,"% of Power from Renewables":30.673,"% of Agricultural Land":3.8095238095,"% of Forest Land":null,"Territory":1050,"Average Rainfall":null,"Corruption":0.1621359587,"Wheat Production (tonnes)":13631,"Rye Production (tonnes)":800,"Potatoes Production (tonnes)":0,"Meat, chicken Production (tonnes)":6155.65,"Avocados Production (tonnes)":88.19,"Petrol Price (USD/liter)":1.43,"Daily Oil Consumption (Barrels)":12791553,"CO2 Emissions (ton per capita)":7.605936961},{"Country":"Albania","Country_clean":"albania","Region":"Central and Eastern Europe","Happiness":5.304,"Median Salary":832.84,"Average Salary":956.92,"Lowest Salary":241.22,"Highest Salary":4258.49,"Infant Survival Rate":1000,"Alcohol Consumption Rate":4.6,"Life Expectancy":77.8,"Netflix (USD/month)":null,"Women Safety Index":0.796,"Average Winter Temperature":4.993411,"Average Summer Temperature":5.48025,"Population":2842321,"Energy Per Capita":14100.432,"% of Power from Fossil Fuels":0,"% of Power from Nuclear":0,"% of Power from Renewables":100,"% of Agricultural Land":41.4718978102,"% of Forest Land":28.7919708029,"Territory":27400,"Average Rainfall":1485,"Corruption":0.1620248556,"Wheat Production (tonnes)":225170.9,"Rye Production (tonnes)":873343.06,"Potatoes Production (tonnes)":258862,"Meat, chicken Production (tonnes)":13250,"Avocados Production (tonnes)":4173.95,"Petrol Price (USD/liter)":2.11,"Daily Oil Consumption (Barrels)":27000,"CO2 Emissions (ton per capita)":1.69224832},{"Country":"Tajikistan","Country_clean":"tajikistan","Region":"Commonwealth of Independent States","Happiness":5.281,"Median Salary":959.78,"Average Salary":1069.47,"Lowest Salary":269.65,"Highest Salary":4753.2,"Infant Survival Rate":990,"Alcohol Consumption Rate":0.01,"Life Expectancy":69.7,"Netflix (USD/month)":null,"Women Safety Index":0.69,"Average Winter Temperature":-13.769967,"Average Summer Temperature":-9.324993,"Population":9952787,"Energy Per Capita":7674.914,"% of Power from Fossil Fuels":8.768,"% of Power from Nuclear":0,"% of Power from Renewables":91.232,"% of Agricultural Land":35.4276244686,"% of Forest Land":3.0607392463,"Territory":138790,"Average Rainfall":691,"Corruption":0.1768408716,"Wheat Production (tonnes)":10363525.6,"Rye Production (tonnes)":3997,"Potatoes Production (tonnes)":140721600,"Meat, chicken Production (tonnes)":425,"Avocados Production (tonnes)":39040.4,"Petrol Price (USD/liter)":1.57,"Daily Oil Consumption (Barrels)":21000,"CO2 Emissions (ton per capita)":1.010618692},{"Country":"Congo (Brazzaville)","Country_clean":"congo brazzaville","Region":"Sub-Saharan Africa","Happiness":5.221,"Median Salary":1058.67,"Average Salary":1205.3,"Lowest Salary":302.94,"Highest Salary":5365.86,"Infant Survival Rate":993,"Alcohol Consumption Rate":0.01,"Life Expectancy":64.7,"Netflix (USD/month)":null,"Women Safety Index":0.384,"Average Winter Temperature":25.505972,"Average Summer Temperature":26.152718,"Population":99010212,"Energy Per Capita":2348.011,"% of Power from Fossil Fuels":76.119,"% of Power from Nuclear":0,"% of Power from Renewables":23.881,"% of Agricultural Land":31.2679355783,"% of Forest Land":64.2196193265,"Territory":341500,"Average Rainfall":1646,"Corruption":0.158911109,"Wheat Production (tonnes)":916614,"Rye Production (tonnes)":15,"Potatoes Production (tonnes)":32500,"Meat, chicken Production (tonnes)":1478922.8,"Avocados Production (tonnes)":21000,"Petrol Price (USD/liter)":1.04,"Daily Oil Consumption (Barrels)":17000,"CO2 Emissions (ton per capita)":1.349316017},{"Country":"Mozambique","Country_clean":"mozambique","Region":"Sub-Saharan Africa","Happiness":5.216,"Median Salary":549.81,"Average Salary":631.27,"Lowest Salary":159.77,"Highest Salary":2803.88,"Infant Survival Rate":940,"Alcohol Consumption Rate":0.01,"Life Expectancy":57.6,"Netflix (USD/month)":null,"Women Safety Index":0.58,"Average Winter Temperature":26.116705,"Average Summer Temperature":28.754948,"Population":32969517,"Energy Per Capita":2241.226,"% of Power from Fossil Fuels":18.593,"% of Power from Nuclear":0,"% of Power from Renewables":81.407,"% of Agricultural Land":52.6638927745,"% of Forest Land":46.4121731224,"Territory":786380,"Average Rainfall":1032,"Corruption":0.1515905112,"Wheat Production (tonnes)":960,"Rye Production (tonnes)":240600.52,"Potatoes Production (tonnes)":13900,"Meat, chicken Production (tonnes)":2108.7,"Avocados Production (tonnes)":21020,"Petrol Price (USD/liter)":1.3,"Daily Oil Consumption (Barrels)":40000,"CO2 Emissions (ton per capita)":0.246986412},{"Country":"Georgia","Country_clean":"georgia","Region":"Commonwealth of Independent States","Happiness":5.185,"Median Salary":2309.7,"Average Salary":2526.12,"Lowest Salary":638.06,"Highest Salary":11231.34,"Infant Survival Rate":999,"Alcohol Consumption Rate":6.13,"Life Expectancy":74.4,"Netflix (USD/month)":null,"Women Safety Index":0.812,"Average Winter Temperature":-1.3454458,"Average Summer Temperature":-1.0580338,"Population":3744385,"Energy Per Capita":20834.768,"% of Power from Fossil Fuels":23.806,"% of Power from Nuclear":0,"% of Power from Renewables":76.194,"% of Agricultural Land":34.2480932508,"% of Forest Land":40.6159159591,"Territory":69490,"Average Rainfall":1026,"Corruption":0.1741266698,"Wheat Production (tonnes)":33722,"Rye Production (tonnes)":1400,"Potatoes Production (tonnes)":10000,"Meat, chicken Production (tonnes)":7479107,"Avocados Production (tonnes)":83301.25,"Petrol Price (USD/liter)":1.33,"Daily Oil Consumption (Barrels)":33000,"CO2 Emissions (ton per capita)":2.717624226},{"Country":"Iraq","Country_clean":"iraq","Region":"Middle East and North Africa","Happiness":5.166,"Median Salary":1382.38,"Average Salary":1573.31,"Lowest Salary":395.62,"Highest Salary":6988.25,"Infant Survival Rate":968,"Alcohol Consumption Rate":0.01,"Life Expectancy":68.9,"Netflix (USD/month)":null,"Women Safety Index":0.424,"Average Winter Temperature":10.920471,"Average Summer Temperature":12.792713,"Population":44496122,"Energy Per Capita":14392.053,"% of Power from Fossil Fuels":94.571,"% of Power from Nuclear":0,"% of Power from Renewables":3.169,"% of Agricultural Land":21.7078833892,"% of Forest Land":1.9003611838,"Territory":434128,"Average Rainfall":216,"Corruption":0.2064384371,"Wheat Production (tonnes)":2000,"Rye Production (tonnes)":36788.4,"Potatoes Production (tonnes)":28,"Meat, chicken Production (tonnes)":2250,"Avocados Production (tonnes)":79661,"Petrol Price (USD/liter)":0.51,"Daily Oil Consumption (Barrels)":857000,"CO2 Emissions (ton per capita)":4.440624129},{"Country":"Nepal","Country_clean":"nepal","Region":"South Asia","Happiness":5.158,"Median Salary":551.13,"Average Salary":608.2,"Lowest Salary":153.18,"Highest Salary":2703.11,"Infant Survival Rate":983,"Alcohol Consumption Rate":0.01,"Life Expectancy":69.2,"Netflix (USD/month)":null,"Women Safety Index":0.644,"Average Winter Temperature":3.4482849,"Average Summer Temperature":6.6038175,"Population":30547580,"Energy Per Capita":1607.635,"% of Power from Fossil Fuels":0,"% of Power from Nuclear":0,"% of Power from Renewables":100,"% of Agricultural Land":28.7478200209,"% of Forest Land":41.5907220091,"Territory":143350,"Average Rainfall":1500,"Corruption":0.1649870872,"Wheat Production (tonnes)":18053568,"Rye Production (tonnes)":1585771.6,"Potatoes Production (tonnes)":867000,"Meat, chicken Production (tonnes)":142000,"Avocados Production (tonnes)":69582.234,"Petrol Price (USD/liter)":1.42,"Daily Oil Consumption (Barrels)":43000,"CO2 Emissions (ton per capita)":0.470136453},{"Country":"Laos","Country_clean":"laos","Region":"Southeast Asia","Happiness":5.139,"Median Salary":206.42,"Average Salary":223.54,"Lowest Salary":56.25,"Highest Salary":992.99,"Infant Survival Rate":null,"Alcohol Consumption Rate":null,"Life Expectancy":null,"Netflix (USD/month)":null,"Women Safety Index":0.704,"Average Winter Temperature":19.469608,"Average Summer Temperature":20.353256,"Population":7529475,"Energy Per Capita":18847.086,"% of Power from Fossil Fuels":27.045,"% of Power from Nuclear":0,"% of Power from Renewables":72.955,"% of Agricultural Land":null,"% of Forest Land":null,"Territory":null,"Average Rainfall":null,"Corruption":null,"Wheat Production (tonnes)":96402500,"Rye Production (tonnes)":177940.2,"Potatoes Production (tonnes)":7540892.5,"Meat, chicken Production (tonnes)":96000,"Avocados Production (tonnes)":0,"Petrol Price (USD/liter)":1.91,"Daily Oil Consumption (Barrels)":18000,"CO2 Emissions (ton per capita)":null},{"Country":"Gabon","Country_clean":"gabon","Region":"Sub-Saharan Africa","Happiness":5.106,"Median Salary":800.85,"Average Salary":894.31,"Lowest Salary":225.59,"Highest Salary":3980.08,"Infant Survival Rate":998,"Alcohol Consumption Rate":0.01,"Life Expectancy":66,"Netflix (USD/month)":null,"Women Safety Index":0.593,"Average Winter Temperature":25.409601,"Average Summer Temperature":26.325548,"Population":2388992,"Energy Per Capita":8009.644,"% of Power from Fossil Fuels":55.459,"% of Power from Nuclear":0,"% of Power from Renewables":44.541,"% of Agricultural Land":8.3565645981,"% of Forest Land":91.2745760081,"Territory":257670,"Average Rainfall":1831,"Corruption":0.1993061751,"Wheat Production (tonnes)":67690,"Rye Production (tonnes)":9447,"Potatoes Production (tonnes)":32656,"Meat, chicken Production (tonnes)":4519606,"Avocados Production (tonnes)":9710,"Petrol Price (USD/liter)":0.97,"Daily Oil Consumption (Barrels)":21000,"CO2 Emissions (ton per capita)":2.416484011},{"Country":"Ivory Coast","Country_clean":"cote divoire","Region":"Sub-Saharan Africa","Happiness":5.08,"Median Salary":497.91,"Average Salary":544.64,"Lowest Salary":137.45,"Highest Salary":2417.05,"Infant Survival Rate":943,"Alcohol Consumption Rate":0.01,"Life Expectancy":53.3,"Netflix (USD/month)":null,"Women Safety Index":0.573,"Average Winter Temperature":26.548874,"Average Summer Temperature":27.247503,"Population":28160542,"Energy Per Capita":2370.596,"% of Power from Fossil Fuels":69.854,"% of Power from Nuclear":0,"% of Power from Renewables":30.146,"% of Agricultural Land":73.8993710692,"% of Forest Land":8.5654927673,"Territory":318000,"Average Rainfall":1348,"Corruption":0.1473762393,"Wheat Production (tonnes)":195046800,"Rye Production (tonnes)":71873.17,"Potatoes Production (tonnes)":420,"Meat, chicken Production (tonnes)":6563.91,"Avocados Production (tonnes)":53000,"Petrol Price (USD/liter)":1.18,"Daily Oil Consumption (Barrels)":51000,"CO2 Emissions (ton per capita)":0.421129515},{"Country":"Guinea","Country_clean":"guinea","Region":"Sub-Saharan Africa","Happiness":5.023,"Median Salary":696.71,"Average Salary":817.87,"Lowest Salary":206.22,"Highest Salary":3634.99,"Infant Survival Rate":974,"Alcohol Consumption Rate":0.01,"Life Expectancy":59,"Netflix (USD/month)":null,"Women Safety Index":0.539,"Average Winter Temperature":25.573353,"Average Summer Temperature":26.244331,"Population":13859341,"Energy Per Capita":1281.525,"% of Power from Fossil Fuels":27.338,"% of Power from Nuclear":0,"% of Power from Renewables":72.662,"% of Agricultural Land":59.5718704216,"% of Forest Land":25.0244180368,"Territory":245720,"Average Rainfall":1651,"Corruption":0.1515905112,"Wheat Production (tonnes)":407,"Rye Production (tonnes)":295681,"Potatoes Production (tonnes)":1109560,"Meat, chicken Production (tonnes)":351,"Avocados Production (tonnes)":5720,"Petrol Price (USD/liter)":1.36,"Daily Oil Consumption (Barrels)":19001,"CO2 Emissions (ton per capita)":0.309288541},{"Country":"Turkiye","Country_clean":"turkey","Region":"Middle East and North Africa","Happiness":4.975,"Median Salary":254.1,"Average Salary":286.13,"Lowest Salary":72.08,"Highest Salary":1274.12,"Infant Survival Rate":985,"Alcohol Consumption Rate":1.45,"Life Expectancy":75.8,"Netflix (USD/month)":3,"Women Safety Index":0.665,"Average Winter Temperature":3.0063581,"Average Summer Temperature":3.4250228,"Population":85341241,"Energy Per Capita":22824.15,"% of Power from Fossil Fuels":58.027,"% of Power from Nuclear":0,"% of Power from Renewables":41.973,"% of Agricultural Land":49.4900146824,"% of Forest Land":29.0741785014,"Territory":769630,"Average Rainfall":593,"Corruption":0.1640447378,"Wheat Production (tonnes)":635748.4,"Rye Production (tonnes)":13876344.2,"Potatoes Production (tonnes)":3826904,"Meat, chicken Production (tonnes)":55,"Avocados Production (tonnes)":16151.2,"Petrol Price (USD/liter)":1.6,"Daily Oil Consumption (Barrels)":941861,"CO2 Emissions (ton per capita)":4.75658475},{"Country":"Senegal","Country_clean":"senegal","Region":"Sub-Saharan Africa","Happiness":4.969,"Median Salary":493.08,"Average Salary":565.59,"Lowest Salary":142.77,"Highest Salary":2513.74,"Infant Survival Rate":981,"Alcohol Consumption Rate":0.26,"Life Expectancy":66.7,"Netflix (USD/month)":null,"Women Safety Index":0.619,"Average Winter Temperature":25.55183,"Average Summer Temperature":26.647112,"Population":17316449,"Energy Per Capita":2505.209,"% of Power from Fossil Fuels":80.071,"% of Power from Nuclear":0,"% of Power from Renewables":19.929,"% of Agricultural Land":49.4000934919,"% of Forest Land":41.6982288475,"Territory":192530,"Average Rainfall":686,"Corruption":0.1473762393,"Wheat Production (tonnes)":56920,"Rye Production (tonnes)":13524458.4,"Potatoes Production (tonnes)":879000,"Meat, chicken Production (tonnes)":117856.39,"Avocados Production (tonnes)":113807.792,"Petrol Price (USD/liter)":1.42,"Daily Oil Consumption (Barrels)":49000,"CO2 Emissions (ton per capita)":0.651679184},{"Country":"Iran","Country_clean":"iran","Region":"Middle East and North Africa","Happiness":4.923,"Median Salary":932.63,"Average Salary":1070.97,"Lowest Salary":269.53,"Highest Salary":4770.47,"Infant Survival Rate":982,"Alcohol Consumption Rate":0.01,"Life Expectancy":75.5,"Netflix (USD/month)":null,"Women Safety Index":0.557,"Average Winter Temperature":6.699771,"Average Summer Temperature":9.465016,"Population":88550570,"Energy Per Capita":38133.086,"% of Power from Fossil Fuels":94.081,"% of Power from Nuclear":0.955,"% of Power from Renewables":4.965,"% of Agricultural Land":29.0089368259,"% of Forest Land":6.635211094,"Territory":1622500,"Average Rainfall":228,"Corruption":0.1734505892,"Wheat Production (tonnes)":1562160,"Rye Production (tonnes)":71601,"Potatoes Production (tonnes)":195000,"Meat, chicken Production (tonnes)":2530,"Avocados Production (tonnes)":382467,"Petrol Price (USD/liter)":0.05,"Daily Oil Consumption (Barrels)":1803999,"CO2 Emissions (ton per capita)":7.598364845},{"Country":"Azerbaijan","Country_clean":"azerbaijan","Region":"Commonwealth of Independent States","Happiness":4.893,"Median Salary":1558.82,"Average Salary":1741.18,"Lowest Salary":441.18,"Highest Salary":7764.71,"Infant Survival Rate":995,"Alcohol Consumption Rate":0.01,"Life Expectancy":72.7,"Netflix (USD/month)":null,"Women Safety Index":0.667,"Average Winter Temperature":1.85439,"Average Summer Temperature":3.2257857,"Population":10358074,"Energy Per Capita":18747.918,"% of Power from Fossil Fuels":94.599,"% of Power from Nuclear":0,"% of Power from Renewables":6.343,"% of Agricultural Land":57.8415003025,"% of Forest Land":13.8329909256,"Territory":82650,"Average Rainfall":447,"Corruption":0.1841555238,"Wheat Production (tonnes)":1348186,"Rye Production (tonnes)":7577,"Potatoes Production (tonnes)":31,"Meat, chicken Production (tonnes)":95517,"Avocados Production (tonnes)":4200,"Petrol Price (USD/liter)":0.59,"Daily Oil Consumption (Barrels)":96000,"CO2 Emissions (ton per capita)":3.542397828},{"Country":"Nigeria","Country_clean":"nigeria","Region":"Sub-Saharan Africa","Happiness":4.881,"Median Salary":389.85,"Average Salary":438.91,"Lowest Salary":110.63,"Highest Salary":1949.27,"Infant Survival Rate":517,"Alcohol Consumption Rate":0.01,"Life Expectancy":54.5,"Netflix (USD/month)":null,"Women Safety Index":0.465,"Average Winter Temperature":25.011763,"Average Summer Temperature":25.588018,"Population":218541212,"Energy Per Capita":2547.954,"% of Power from Fossil Fuels":72.492,"% of Power from Nuclear":0,"% of Power from Renewables":27.508,"% of Agricultural Land":75.3691931003,"% of Forest Land":23.5664876972,"Territory":910770,"Average Rainfall":1150,"Corruption":0.1521603316,"Wheat Production (tonnes)":199000,"Rye Production (tonnes)":10328099,"Potatoes Production (tonnes)":1850,"Meat, chicken Production (tonnes)":1441905,"Avocados Production (tonnes)":80609.488,"Petrol Price (USD/liter)":0.42,"Daily Oil Consumption (Barrels)":428000,"CO2 Emissions (ton per capita)":0.573636206},{"Country":"State of Palestine","Country_clean":"state of palestine","Region":"Middle East and North Africa","Happiness":4.879,"Median Salary":1510,"Average Salary":1710,"Lowest Salary":430,"Highest Salary":7620,"Infant Survival Rate":764,"Alcohol Consumption Rate":0.01,"Life Expectancy":59.8,"Netflix (USD/month)":null,"Women Safety Index":0.483,"Average Winter Temperature":13.515371,"Average Summer Temperature":14.106538,"Population":5250072,"Energy Per Capita":3999.195,"% of Power from Fossil Fuels":76.744,"% of Power from Nuclear":0,"% of Power from Renewables":23.256,"% of Agricultural Land":68.7719298246,"% of Forest Land":6.0701754386,"Territory":570,"Average Rainfall":null,"Corruption":null,"Wheat Production (tonnes)":23762000,"Rye Production (tonnes)":391.1,"Potatoes Production (tonnes)":7529025,"Meat, chicken Production (tonnes)":52000,"Avocados Production (tonnes)":145795,"Petrol Price (USD/liter)":1.75,"Daily Oil Consumption (Barrels)":24001,"CO2 Emissions (ton per capita)":null},{"Country":"Cameroon","Country_clean":"cameroon","Region":"Sub-Saharan Africa","Happiness":4.874,"Median Salary":633.27,"Average Salary":744.45,"Lowest Salary":186.92,"Highest Salary":3303.31,"Infant Survival Rate":955,"Alcohol Consumption Rate":0.01,"Life Expectancy":57.3,"Netflix (USD/month)":null,"Women Safety Index":0.466,"Average Winter Temperature":24.881084,"Average Summer Temperature":24.946562,"Population":27914536,"Energy Per Capita":1593.62,"% of Power from Fossil Fuels":37.64,"% of Power from Nuclear":0,"% of Power from Renewables":62.36,"% of Agricultural Land":20.6257536333,"% of Forest Land":42.9110448266,"Territory":472710,"Average Rainfall":1604,"Corruption":0.1473762393,"Wheat Production (tonnes)":31793,"Rye Production (tonnes)":10210326,"Potatoes Production (tonnes)":2133322.8,"Meat, chicken Production (tonnes)":6922.65,"Avocados Production (tonnes)":28994,"Petrol Price (USD/liter)":1.04,"Daily Oil Consumption (Barrels)":40000,"CO2 Emissions (ton per capita)":0.364424922},{"Country":"Ukraine","Country_clean":"ukraine","Region":"Commonwealth of Independent States","Happiness":4.873,"Median Salary":530.73,"Average Salary":622.8,"Lowest Salary":157.32,"Highest Salary":2761.98,"Infant Survival Rate":996,"Alcohol Consumption Rate":8.06,"Life Expectancy":71.3,"Netflix (USD/month)":8.46,"Women Safety Index":0.626,"Average Winter Temperature":-1.7763926,"Average Summer Temperature":0.87508214,"Population":39701739,"Energy Per Capita":16309.124,"% of Power from Fossil Fuels":25.424,"% of Power from Nuclear":58.058,"% of Power from Renewables":16.518,"% of Agricultural Land":71.2996202969,"% of Forest Land":16.7345529858,"Territory":579400,"Average Rainfall":565,"Corruption":0.1620248556,"Wheat Production (tonnes)":2727560,"Rye Production (tonnes)":10948.6,"Potatoes Production (tonnes)":330779000,"Meat, chicken Production (tonnes)":80000,"Avocados Production (tonnes)":97652.8,"Petrol Price (USD/liter)":1.7,"Daily Oil Consumption (Barrels)":244000,"CO2 Emissions (ton per capita)":3.936583531},{"Country":"Namibia","Country_clean":"namibia","Region":"Sub-Saharan Africa","Happiness":4.832,"Median Salary":821.41,"Average Salary":927.4,"Lowest Salary":233.7,"Highest Salary":4128.25,"Infant Survival Rate":998,"Alcohol Consumption Rate":0.01,"Life Expectancy":65.8,"Netflix (USD/month)":null,"Women Safety Index":0.61,"Average Winter Temperature":25.959553,"Average Summer Temperature":26.584833,"Population":2567012,"Energy Per Capita":8748.273,"% of Power from Fossil Fuels":4.459,"% of Power from Nuclear":0,"% of Power from Renewables":95.541,"% of Agricultural Land":47.1425621591,"% of Forest Land":7.9776142064,"Territory":823290,"Average Rainfall":285,"Corruption":0.1675386727,"Wheat Production (tonnes)":18053568,"Rye Production (tonnes)":2762388.832,"Potatoes Production (tonnes)":24754506,"Meat, chicken Production (tonnes)":9280,"Avocados Production (tonnes)":567.4,"Petrol Price (USD/liter)":1.27,"Daily Oil Consumption (Barrels)":26000,"CO2 Emissions (ton per capita)":1.691705428},{"Country":"Morocco","Country_clean":"morocco","Region":"Middle East and North Africa","Happiness":4.795,"Median Salary":1634.24,"Average Salary":1896.89,"Lowest Salary":477.63,"Highest Salary":8433.85,"Infant Survival Rate":983,"Alcohol Consumption Rate":0.43,"Life Expectancy":74.3,"Netflix (USD/month)":null,"Women Safety Index":0.637,"Average Winter Temperature":11.878008,"Average Summer Temperature":13.544462,"Population":37457971,"Energy Per Capita":6855.11,"% of Power from Fossil Fuels":80.194,"% of Power from Nuclear":0,"% of Power from Renewables":17.382,"% of Agricultural Land":67.8713869594,"% of Forest Land":12.8903354246,"Territory":446300,"Average Rainfall":346,"Corruption":0.1603332013,"Wheat Production (tonnes)":580,"Rye Production (tonnes)":240600.52,"Potatoes Production (tonnes)":1642,"Meat, chicken Production (tonnes)":8401090,"Avocados Production (tonnes)":21020,"Petrol Price (USD/liter)":1.68,"Daily Oil Consumption (Barrels)":275000,"CO2 Emissions (ton per capita)":1.959872285},{"Country":"Pakistan","Country_clean":"pakistan","Region":"South Asia","Happiness":4.657,"Median Salary":245.34,"Average Salary":284.9,"Lowest Salary":71.83,"Highest Salary":1266.61,"Infant Survival Rate":648,"Alcohol Consumption Rate":0.01,"Life Expectancy":66.4,"Netflix (USD/month)":null,"Women Safety Index":0.481,"Average Winter Temperature":9.189832,"Average Summer Temperature":9.4178095,"Population":235824862,"Energy Per Capita":4242.753,"% of Power from Fossil Fuels":56.575,"% of Power from Nuclear":14.74,"% of Power from Renewables":28.685,"% of Agricultural Land":47.0929327522,"% of Forest Land":4.7796803653,"Territory":770880,"Average Rainfall":494,"Corruption":0.1551976055,"Wheat Production (tonnes)":2326000,"Rye Production (tonnes)":2036086.2,"Potatoes Production (tonnes)":1000,"Meat, chicken Production (tonnes)":1.6,"Avocados Production (tonnes)":548570.264,"Petrol Price (USD/liter)":1.03,"Daily Oil Consumption (Barrels)":556000,"CO2 Emissions (ton per capita)":0.879965499},{"Country":"Niger","Country_clean":"niger","Region":"Sub-Saharan Africa","Happiness":4.556,"Median Salary":480.19,"Average Salary":547.87,"Lowest Salary":137.93,"Highest Salary":2433.17,"Infant Survival Rate":951,"Alcohol Consumption Rate":0.01,"Life Expectancy":61.8,"Netflix (USD/month)":null,"Women Safety Index":0.442,"Average Winter Temperature":18.64278,"Average Summer Temperature":19.539503,"Population":26207977,"Energy Per Capita":409.757,"% of Power from Fossil Fuels":88.889,"% of Power from Nuclear":0,"% of Power from Renewables":11.111,"% of Agricultural Land":36.7845583011,"% of Forest Land":0.8425673009,"Territory":1266700,"Average Rainfall":151,"Corruption":0.1515905112,"Wheat Production (tonnes)":6040500,"Rye Production (tonnes)":3735380.8,"Potatoes Production (tonnes)":770127,"Meat, chicken Production (tonnes)":15557,"Avocados Production (tonnes)":87005.8,"Petrol Price (USD/liter)":null,"Daily Oil Consumption (Barrels)":null,"CO2 Emissions (ton per capita)":0.092232251},{"Country":"Burkina Faso","Country_clean":"burkina faso","Region":"Sub-Saharan Africa","Happiness":4.548,"Median Salary":485.02,"Average Salary":534.97,"Lowest Salary":135.03,"Highest Salary":2384.83,"Infant Survival Rate":962,"Alcohol Consumption Rate":0.01,"Life Expectancy":59.9,"Netflix (USD/month)":null,"Women Safety Index":0.481,"Average Winter Temperature":25.427477,"Average Summer Temperature":26.73383,"Population":22673762,"Energy Per Capita":904.726,"% of Power from Fossil Fuels":86.857,"% of Power from Nuclear":0,"% of Power from Renewables":13.143,"% of Agricultural Land":46.5643274854,"% of Forest Land":22.5380116959,"Territory":273600,"Average Rainfall":748,"Corruption":0.1515905112,"Wheat Production (tonnes)":1780160,"Rye Production (tonnes)":21900,"Potatoes Production (tonnes)":3760,"Meat, chicken Production (tonnes)":24732.78,"Avocados Production (tonnes)":138000,"Petrol Price (USD/liter)":1.14,"Daily Oil Consumption (Barrels)":23000,"CO2 Emissions (ton per capita)":0.246046246},{"Country":"Mauritania","Country_clean":"mauritania","Region":"Sub-Saharan Africa","Happiness":4.505,"Median Salary":44.623043,"Average Salary":52.497697,"Lowest Salary":13.203171,"Highest Salary":232.82729,"Infant Survival Rate":992,"Alcohol Consumption Rate":0.01,"Life Expectancy":63.1,"Netflix (USD/month)":null,"Women Safety Index":0.506,"Average Winter Temperature":20.794834,"Average Summer Temperature":21.64168,"Population":4736139,"Energy Per Capita":3988.532,"% of Power from Fossil Fuels":73.404,"% of Power from Nuclear":0,"% of Power from Renewables":26.596,"% of Agricultural Land":38.5272145144,"% of Forest Land":0.2982116038,"Territory":1030700,"Average Rainfall":92,"Corruption":0.163652122,"Wheat Production (tonnes)":329411,"Rye Production (tonnes)":845441.6,"Potatoes Production (tonnes)":326562,"Meat, chicken Production (tonnes)":58000,"Avocados Production (tonnes)":91812.448,"Petrol Price (USD/liter)":null,"Daily Oil Consumption (Barrels)":null,"CO2 Emissions (ton per capita)":0.872793555},{"Country":"Gambia","Country_clean":"gambia","Region":"Sub-Saharan Africa","Happiness":4.485,"Median Salary":223.7,"Average Salary":246.84,"Lowest Salary":62.02,"Highest Salary":1095.34,"Infant Survival Rate":997,"Alcohol Consumption Rate":0.01,"Life Expectancy":61.1,"Netflix (USD/month)":null,"Women Safety Index":0.575,"Average Winter Temperature":25.587826,"Average Summer Temperature":26.182985,"Population":2705992,"Energy Per Capita":931.273,"% of Power from Fossil Fuels":100,"% of Power from Nuclear":0,"% of Power from Renewables":0,"% of Agricultural Land":62.6482213439,"% of Forest Land":23.4123814229,"Territory":10120,"Average Rainfall":836,"Corruption":0.1527849287,"Wheat Production (tonnes)":50000,"Rye Production (tonnes)":4000,"Potatoes Production (tonnes)":40392,"Meat, chicken Production (tonnes)":4631097,"Avocados Production (tonnes)":9710,"Petrol Price (USD/liter)":1.33,"Daily Oil Consumption (Barrels)":3800,"CO2 Emissions (ton per capita)":0.247050718},{"Country":"Chad","Country_clean":"chad","Region":"Sub-Saharan Africa","Happiness":4.471,"Median Salary":707.39,"Average Salary":787.96,"Lowest Salary":198.2,"Highest Salary":3512.79,"Infant Survival Rate":954,"Alcohol Consumption Rate":0.01,"Life Expectancy":53.1,"Netflix (USD/month)":null,"Women Safety Index":0.462,"Average Winter Temperature":21.083433,"Average Summer Temperature":21.204617,"Population":17723315,"Energy Per Capita":361.161,"% of Power from Fossil Fuels":96.774,"% of Power from Nuclear":0,"% of Power from Renewables":3.226,"% of Agricultural Land":39.9761753494,"% of Forest Land":3.3365099269,"Territory":1259200,"Average Rainfall":322,"Corruption":0.1769557148,"Wheat Production (tonnes)":94838540,"Rye Production (tonnes)":10666877,"Potatoes Production (tonnes)":1300,"Meat, chicken Production (tonnes)":703003,"Avocados Production (tonnes)":83403.5,"Petrol Price (USD/liter)":null,"Daily Oil Consumption (Barrels)":null,"CO2 Emissions (ton per capita)":0.141093412},{"Country":"Kenya","Country_clean":"kenya","Region":"Sub-Saharan Africa","Happiness":4.47,"Median Salary":863.29,"Average Salary":991.43,"Lowest Salary":250.22,"Highest Salary":4424.36,"Infant Survival Rate":946,"Alcohol Consumption Rate":0.01,"Life Expectancy":63.4,"Netflix (USD/month)":null,"Women Safety Index":0.511,"Average Winter Temperature":25.798006,"Average Summer Temperature":26.603018,"Population":54027487,"Energy Per Capita":1952.694,"% of Power from Fossil Fuels":10.219,"% of Power from Nuclear":0,"% of Power from Renewables":89.781,"% of Agricultural Land":48.6874934111,"% of Forest Land":6.3448184981,"Territory":569140,"Average Rainfall":630,"Corruption":0.1473762393,"Wheat Production (tonnes)":250320,"Rye Production (tonnes)":76025.194,"Potatoes Production (tonnes)":112000,"Meat, chicken Production (tonnes)":698000,"Avocados Production (tonnes)":370,"Petrol Price (USD/liter)":1.36,"Daily Oil Consumption (Barrels)":114000,"CO2 Emissions (ton per capita)":0.423783898},{"Country":"Tunisia","Country_clean":"tunisia","Region":"Middle East and North Africa","Happiness":4.422,"Median Salary":1088.33,"Average Salary":1239.75,"Lowest Salary":312.3,"Highest Salary":5520.5,"Infant Survival Rate":997,"Alcohol Consumption Rate":1.39,"Life Expectancy":75.3,"Netflix (USD/month)":null,"Women Safety Index":0.669,"Average Winter Temperature":12.263956,"Average Summer Temperature":12.730293,"Population":12356117,"Energy Per Capita":9524.104,"% of Power from Fossil Fuels":95.611,"% of Power from Nuclear":0,"% of Power from Renewables":4.389,"% of Agricultural Land":62.4388516993,"% of Forest Land":4.533084449,"Territory":155360,"Average Rainfall":207,"Corruption":0.1589545012,"Wheat Production (tonnes)":null,"Rye Production (tonnes)":null,"Potatoes Production (tonnes)":null,"Meat, chicken Production (tonnes)":null,"Avocados Production (tonnes)":null,"Petrol Price (USD/liter)":0.76,"Daily Oil Consumption (Barrels)":97000,"CO2 Emissions (ton per capita)":2.557564208},{"Country":"Benin","Country_clean":"benin","Region":"Sub-Saharan Africa","Happiness":4.377,"Median Salary":488.25,"Average Salary":549.48,"Lowest Salary":138.58,"Highest Salary":2449.28,"Infant Survival Rate":975,"Alcohol Consumption Rate":0.01,"Life Expectancy":60,"Netflix (USD/month)":null,"Women Safety Index":0.566,"Average Winter Temperature":26.43899,"Average Summer Temperature":27.806599,"Population":13352864,"Energy Per Capita":2484.818,"% of Power from Fossil Fuels":95.833,"% of Power from Nuclear":0,"% of Power from Renewables":4.167,"% of Agricultural Land":35.0301525364,"% of Forest Land":27.3603228095,"Territory":112760,"Average Rainfall":1039,"Corruption":0.1563068628,"Wheat Production (tonnes)":4326575,"Rye Production (tonnes)":2949,"Potatoes Production (tonnes)":12335,"Meat, chicken Production (tonnes)":18924,"Avocados Production (tonnes)":12800,"Petrol Price (USD/liter)":0.96,"Daily Oil Consumption (Barrels)":36000,"CO2 Emissions (ton per capita)":0.618583746},{"Country":"Uganda","Country_clean":"uganda","Region":"Sub-Saharan Africa","Happiness":4.372,"Median Salary":645.21,"Average Salary":698.31,"Lowest Salary":176.04,"Highest Salary":3106.55,"Infant Survival Rate":934,"Alcohol Consumption Rate":0.01,"Life Expectancy":62.3,"Netflix (USD/month)":null,"Women Safety Index":0.544,"Average Winter Temperature":23.9091,"Average Summer Temperature":24.655352,"Population":47249585,"Energy Per Capita":766.846,"% of Power from Fossil Fuels":2.955,"% of Power from Nuclear":0,"% of Power from Renewables":97.045,"% of Agricultural Land":71.8880909635,"% of Forest Land":11.4534375623,"Territory":200520,"Average Rainfall":1180,"Corruption":0.1515905112,"Wheat Production (tonnes)":2727560,"Rye Production (tonnes)":10948.6,"Potatoes Production (tonnes)":297921600,"Meat, chicken Production (tonnes)":25400,"Avocados Production (tonnes)":97652.8,"Petrol Price (USD/liter)":1.51,"Daily Oil Consumption (Barrels)":32001,"CO2 Emissions (ton per capita)":0.132370788},{"Country":"Myanmar","Country_clean":"myanmar","Region":"Southeast Asia","Happiness":4.354,"Median Salary":228.46,"Average Salary":260.35,"Lowest Salary":65.68,"Highest Salary":1156.59,"Infant Survival Rate":961,"Alcohol Consumption Rate":0.01,"Life Expectancy":66.6,"Netflix (USD/month)":null,"Women Safety Index":0.451,"Average Winter Temperature":18.82836,"Average Summer Temperature":20.528673,"Population":54179306,"Energy Per Capita":3064.848,"% of Power from Fossil Fuels":58.184,"% of Power from Nuclear":0,"% of Power from Renewables":41.816,"% of Agricultural Land":19.8875388788,"% of Forest Land":43.2901466285,"Territory":652670,"Average Rainfall":2091,"Corruption":0.1673619598,"Wheat Production (tonnes)":2105000,"Rye Production (tonnes)":160787.4,"Potatoes Production (tonnes)":73000,"Meat, chicken Production (tonnes)":15600,"Avocados Production (tonnes)":133.254,"Petrol Price (USD/liter)":1.26,"Daily Oil Consumption (Barrels)":123000,"CO2 Emissions (ton per capita)":0.679428523},{"Country":"Cambodia","Country_clean":"cambodia","Region":"Southeast Asia","Happiness":4.341,"Median Salary":745.19,"Average Salary":808.3,"Lowest Salary":203.41,"Highest Salary":3592.44,"Infant Survival Rate":990,"Alcohol Consumption Rate":0.01,"Life Expectancy":68.7,"Netflix (USD/month)":null,"Women Safety Index":0.645,"Average Winter Temperature":25.820742,"Average Summer Temperature":26.725933,"Population":16767842,"Energy Per Capita":4035.081,"% of Power from Fossil Fuels":47.066,"% of Power from Nuclear":0,"% of Power from Renewables":52.934,"% of Agricultural Land":34.5521170406,"% of Forest Land":44.8259687288,"Territory":176520,"Average Rainfall":1904,"Corruption":0.1557928324,"Wheat Production (tonnes)":93873230,"Rye Production (tonnes)":14953906,"Potatoes Production (tonnes)":1175.02,"Meat, chicken Production (tonnes)":183000,"Avocados Production (tonnes)":231517.88,"Petrol Price (USD/liter)":1.53,"Daily Oil Consumption (Barrels)":48000,"CO2 Emissions (ton per capita)":0.98140655},{"Country":"Ghana","Country_clean":"ghana","Region":"Sub-Saharan Africa","Happiness":4.289,"Median Salary":373.82,"Average Salary":438.42,"Lowest Salary":110.25,"Highest Salary":1946.6,"Infant Survival Rate":963,"Alcohol Consumption Rate":0.01,"Life Expectancy":62.4,"Netflix (USD/month)":null,"Women Safety Index":0.651,"Average Winter Temperature":27.695566,"Average Summer Temperature":28.66266,"Population":33475870,"Energy Per Capita":3483.363,"% of Power from Fossil Fuels":65.122,"% of Power from Nuclear":0,"% of Power from Renewables":34.878,"% of Agricultural Land":55.3930199136,"% of Forest Land":35.1286771589,"Territory":227533,"Average Rainfall":1187,"Corruption":0.1473762393,"Wheat Production (tonnes)":16184871,"Rye Production (tonnes)":263400,"Potatoes Production (tonnes)":6323,"Meat, chicken Production (tonnes)":100860,"Avocados Production (tonnes)":16800,"Petrol Price (USD/liter)":1.29,"Daily Oil Consumption (Barrels)":88000,"CO2 Emissions (ton per capita)":0.658823541},{"Country":"Liberia","Country_clean":"liberia","Region":"Sub-Saharan Africa","Happiness":4.269,"Median Salary":334.39,"Average Salary":380.35,"Lowest Salary":96.14,"Highest Salary":1690.44,"Infant Survival Rate":992,"Alcohol Consumption Rate":0.01,"Life Expectancy":61.4,"Netflix (USD/month)":null,"Women Safety Index":0.5,"Average Winter Temperature":26.30846,"Average Summer Temperature":26.822199,"Population":5302681,"Energy Per Capita":1064.616,"% of Power from Fossil Fuels":42.391,"% of Power from Nuclear":0,"% of Power from Renewables":57.609,"% of Agricultural Land":19.9651162791,"% of Forest Land":78.7705564784,"Territory":96320,"Average Rainfall":2391,"Corruption":0.1515905112,"Wheat Production (tonnes)":null,"Rye Production (tonnes)":null,"Potatoes Production (tonnes)":null,"Meat, chicken Production (tonnes)":null,"Avocados Production (tonnes)":null,"Petrol Price (USD/liter)":1.3,"Daily Oil Consumption (Barrels)":8000,"CO2 Emissions (ton per capita)":0.23899343},{"Country":"Mali","Country_clean":"mali","Region":"Sub-Saharan Africa","Happiness":4.232,"Median Salary":478.58,"Average Salary":533.36,"Lowest Salary":134.55,"Highest Salary":2368.71,"Infant Survival Rate":948,"Alcohol Consumption Rate":0.01,"Life Expectancy":58.2,"Netflix (USD/month)":null,"Women Safety Index":0.481,"Average Winter Temperature":22.10115,"Average Summer Temperature":23.133558,"Population":22593590,"Energy Per Capita":1168.567,"% of Power from Fossil Fuels":64.012,"% of Power from Nuclear":0,"% of Power from Renewables":35.988,"% of Agricultural Land":35.3477737074,"% of Forest Land":10.8966636344,"Territory":1220190,"Average Rainfall":282,"Corruption":0.1473762393,"Wheat Production (tonnes)":4187394,"Rye Production (tonnes)":2372272,"Potatoes Production (tonnes)":1924871,"Meat, chicken Production (tonnes)":494128,"Avocados Production (tonnes)":11187.4,"Petrol Price (USD/liter)":1.22,"Daily Oil Consumption (Barrels)":21999,"CO2 Emissions (ton per capita)":0.29657102},{"Country":"Madagascar","Country_clean":"madagascar","Region":"Sub-Saharan Africa","Happiness":4.228,"Median Salary":250.87,"Average Salary":290.48,"Lowest Salary":73.28,"Highest Salary":1291.74,"Infant Survival Rate":972,"Alcohol Consumption Rate":0.01,"Life Expectancy":65.5,"Netflix (USD/month)":null,"Women Safety Index":0.505,"Average Winter Temperature":24.953327,"Average Summer Temperature":25.925783,"Population":29611714,"Energy Per Capita":507.644,"% of Power from Fossil Fuels":65.55,"% of Power from Nuclear":0,"% of Power from Renewables":34.45,"% of Agricultural Land":70.2904778274,"% of Forest Land":21.341692506,"Territory":581800,"Average Rainfall":1513,"Corruption":0.1534845382,"Wheat Production (tonnes)":2286,"Rye Production (tonnes)":3011811.06,"Potatoes Production (tonnes)":1483500,"Meat, chicken Production (tonnes)":7284,"Avocados Production (tonnes)":14839.178,"Petrol Price (USD/liter)":1.02,"Daily Oil Consumption (Barrels)":18000,"CO2 Emissions (ton per capita)":0.152766255},{"Country":"Togo","Country_clean":"togo","Region":"Sub-Saharan Africa","Happiness":4.214,"Median Salary":787.96,"Average Salary":852.41,"Lowest Salary":214.31,"Highest Salary":3786.72,"Infant Survival Rate":987,"Alcohol Consumption Rate":0.01,"Life Expectancy":59.9,"Netflix (USD/month)":null,"Women Safety Index":0.595,"Average Winter Temperature":27.114004,"Average Summer Temperature":28.22776,"Population":8848699,"Energy Per Capita":1115.704,"% of Power from Fossil Fuels":73.016,"% of Power from Nuclear":0,"% of Power from Renewables":26.984,"% of Agricultural Land":70.2334988049,"% of Forest Land":22.1788931789,"Territory":54390,"Average Rainfall":1168,"Corruption":0.1515905112,"Wheat Production (tonnes)":1169283.4,"Rye Production (tonnes)":9853.4,"Potatoes Production (tonnes)":682800,"Meat, chicken Production (tonnes)":328000,"Avocados Production (tonnes)":179232.066,"Petrol Price (USD/liter)":0.84,"Daily Oil Consumption (Barrels)":15000,"CO2 Emissions (ton per capita)":0.293231207},{"Country":"Jordan","Country_clean":"jordan","Region":"Middle East and North Africa","Happiness":4.186,"Median Salary":1946.4,"Average Salary":2284.91,"Lowest Salary":578.28,"Highest Salary":10141.04,"Infant Survival Rate":996,"Alcohol Consumption Rate":0.41,"Life Expectancy":74.1,"Netflix (USD/month)":null,"Women Safety Index":0.679,"Average Winter Temperature":10.618665,"Average Summer Temperature":11.0657425,"Population":11285869,"Energy Per Capita":9183.148,"% of Power from Fossil Fuels":76.463,"% of Power from Nuclear":0,"% of Power from Renewables":23.537,"% of Agricultural Land":11.5210487195,"% of Forest Land":1.0980471653,"Territory":88794,"Average Rainfall":111,"Corruption":0.1633208543,"Wheat Production (tonnes)":1268900,"Rye Production (tonnes)":391236.668,"Potatoes Production (tonnes)":140000,"Meat, chicken Production (tonnes)":250,"Avocados Production (tonnes)":190,"Petrol Price (USD/liter)":1.66,"Daily Oil Consumption (Barrels)":114000,"CO2 Emissions (ton per capita)":2.438204112},{"Country":"India","Country_clean":"india","Region":"South Asia","Happiness":4.054,"Median Salary":327.97,"Average Salary":384.43,"Lowest Salary":97.07,"Highest Salary":1717.92,"Infant Survival Rate":90,"Alcohol Consumption Rate":3.07,"Life Expectancy":68.3,"Netflix (USD/month)":6.61,"Women Safety Index":0.595,"Average Winter Temperature":16.979853,"Average Summer Temperature":18.022833,"Population":1417173173,"Energy Per Capita":7143.406,"% of Power from Fossil Fuels":77.006,"% of Power from Nuclear":2.519,"% of Power from Renewables":20.476,"% of Agricultural Land":60.0459264292,"% of Forest Land":24.3598290052,"Territory":2973190,"Average Rainfall":1083,"Corruption":0.1470372379,"Wheat Production (tonnes)":1286332,"Rye Production (tonnes)":4688054,"Potatoes Production (tonnes)":3087000,"Meat, chicken Production (tonnes)":990,"Avocados Production (tonnes)":22132,"Petrol Price (USD/liter)":1.33,"Daily Oil Consumption (Barrels)":4443000,"CO2 Emissions (ton per capita)":1.797620119},{"Country":"Egypt","Country_clean":"egypt","Region":"Middle East and North Africa","Happiness":3.977,"Median Salary":254.53,"Average Salary":298.51,"Lowest Salary":75.36,"Highest Salary":1329.24,"Infant Survival Rate":949,"Alcohol Consumption Rate":0.21,"Life Expectancy":79,"Netflix (USD/month)":null,"Women Safety Index":0.645,"Average Winter Temperature":14.330447,"Average Summer Temperature":14.60245,"Population":110990103,"Energy Per Capita":9960.062,"% of Power from Fossil Fuels":88.779,"% of Power from Nuclear":0,"% of Power from Renewables":11.221,"% of Agricultural Land":4.0494248832,"% of Forest Land":0.0451855945,"Territory":995450,"Average Rainfall":18.1,"Corruption":0.1632932276,"Wheat Production (tonnes)":1085494,"Rye Production (tonnes)":9716,"Potatoes Production (tonnes)":104900960,"Meat, chicken Production (tonnes)":842853,"Avocados Production (tonnes)":0,"Petrol Price (USD/liter)":0.52,"Daily Oil Consumption (Barrels)":877000,"CO2 Emissions (ton per capita)":2.484059911},{"Country":"Sri Lanka","Country_clean":"sri lanka","Region":"South Asia","Happiness":3.898,"Median Salary":249.68,"Average Salary":278.41,"Lowest Salary":70.14,"Highest Salary":1239.11,"Infant Survival Rate":997,"Alcohol Consumption Rate":2.37,"Life Expectancy":74.9,"Netflix (USD/month)":null,"Women Safety Index":0.743,"Average Winter Temperature":25.60819,"Average Summer Temperature":25.9974,"Population":21832143,"Energy Per Capita":4347.636,"% of Power from Fossil Fuels":62.752,"% of Power from Nuclear":0,"% of Power from Renewables":51.574,"% of Agricultural Land":45.4574846427,"% of Forest Land":34.1070158422,"Territory":61860,"Average Rainfall":1712,"Corruption":0.1708792597,"Wheat Production (tonnes)":953620,"Rye Production (tonnes)":334353.706,"Potatoes Production (tonnes)":84310000,"Meat, chicken Production (tonnes)":3670,"Avocados Production (tonnes)":16564.6,"Petrol Price (USD/liter)":1.26,"Daily Oil Consumption (Barrels)":127000,"CO2 Emissions (ton per capita)":1.090675627},{"Country":"Bangladesh","Country_clean":"bangladesh","Region":"South Asia","Happiness":3.886,"Median Salary":218.57,"Average Salary":236.71,"Lowest Salary":59.68,"Highest Salary":1052.06,"Infant Survival Rate":908,"Alcohol Consumption Rate":0.01,"Life Expectancy":71.8,"Netflix (USD/month)":null,"Women Safety Index":0.593,"Average Winter Temperature":16.99154,"Average Summer Temperature":19.676044,"Population":171186372,"Energy Per Capita":2912.048,"% of Power from Fossil Fuels":98.052,"% of Power from Nuclear":0,"% of Power from Renewables":1.948,"% of Agricultural Land":77.3450103711,"% of Forest Land":14.4687716064,"Territory":130170,"Average Rainfall":2666,"Corruption":0.1545842141,"Wheat Production (tonnes)":11000,"Rye Production (tonnes)":341300,"Potatoes Production (tonnes)":3296077,"Meat, chicken Production (tonnes)":8222.25,"Avocados Production (tonnes)":55000,"Petrol Price (USD/liter)":0.95,"Daily Oil Consumption (Barrels)":113000,"CO2 Emissions (ton per capita)":0.556529455},{"Country":"Ethiopia","Country_clean":"ethiopia","Region":"Sub-Saharan Africa","Happiness":3.861,"Median Salary":143.88,"Average Salary":160.41,"Lowest Salary":40.42,"Highest Salary":713.13,"Infant Survival Rate":null,"Alcohol Consumption Rate":null,"Life Expectancy":null,"Netflix (USD/month)":null,"Women Safety Index":0.521,"Average Winter Temperature":22.94068,"Average Summer Temperature":23.82733,"Population":123379924,"Energy Per Capita":871.584,"% of Power from Fossil Fuels":0.068,"% of Power from Nuclear":0,"% of Power from Renewables":99.932,"% of Agricultural Land":34.1981062224,"% of Forest Land":15.0593059801,"Territory":1128571.265,"Average Rainfall":848,"Corruption":0.1515905112,"Wheat Production (tonnes)":8126800,"Rye Production (tonnes)":7124000,"Potatoes Production (tonnes)":51085360,"Meat, chicken Production (tonnes)":48000,"Avocados Production (tonnes)":762336,"Petrol Price (USD/liter)":0.71,"Daily Oil Consumption (Barrels)":74000,"CO2 Emissions (ton per capita)":0.163813429},{"Country":"Tanzania","Country_clean":"tanzania","Region":"Sub-Saharan Africa","Happiness":3.781,"Median Salary":457.77,"Average Salary":505.54,"Lowest Salary":126.98,"Highest Salary":2245.08,"Infant Survival Rate":915,"Alcohol Consumption Rate":0.01,"Life Expectancy":61.8,"Netflix (USD/month)":null,"Women Safety Index":0.652,"Average Winter Temperature":22.93629,"Average Summer Temperature":23.6847,"Population":65497748,"Energy Per Capita":907.404,"% of Power from Fossil Fuels":55.868,"% of Power from Nuclear":0,"% of Power from Renewables":44.132,"% of Agricultural Land":44.6163919621,"% of Forest Land":51.1131180853,"Territory":885800,"Average Rainfall":1071,"Corruption":0.1473762393,"Wheat Production (tonnes)":23410593.11,"Rye Production (tonnes)":6242369.62,"Potatoes Production (tonnes)":102287,"Meat, chicken Production (tonnes)":368,"Avocados Production (tonnes)":111386.946,"Petrol Price (USD/liter)":1.28,"Daily Oil Consumption (Barrels)":71999,"CO2 Emissions (ton per capita)":0.21463496},{"Country":"Comoros","Country_clean":"comoros","Region":"Sub-Saharan Africa","Happiness":3.566,"Median Salary":567.21,"Average Salary":651,"Lowest Salary":163.93,"Highest Salary":2900.48,"Infant Survival Rate":999,"Alcohol Consumption Rate":0.01,"Life Expectancy":63.5,"Netflix (USD/month)":null,"Women Safety Index":0.519,"Average Winter Temperature":26.264544,"Average Summer Temperature":26.784773,"Population":836774,"Energy Per Capita":1633.784,"% of Power from Fossil Fuels":100,"% of Power from Nuclear":0,"% of Power from Renewables":0,"% of Agricultural Land":71.4669532509,"% of Forest Land":17.4529822676,"Territory":1861,"Average Rainfall":900,"Corruption":0.2269586474,"Wheat Production (tonnes)":700,"Rye Production (tonnes)":28383.1,"Potatoes Production (tonnes)":820515,"Meat, chicken Production (tonnes)":13808618,"Avocados Production (tonnes)":1552.63,"Petrol Price (USD/liter)":1.36,"Daily Oil Consumption (Barrels)":1300,"CO2 Emissions (ton per capita)":0.376076363},{"Country":"Yemen","Country_clean":"yemen","Region":"Middle East and North Africa","Happiness":3.561,"Median Salary":120.98,"Average Salary":133.36,"Lowest Salary":33.62,"Highest Salary":594.93,"Infant Survival Rate":963,"Alcohol Consumption Rate":0.01,"Life Expectancy":65.7,"Netflix (USD/month)":null,"Women Safety Index":0.287,"Average Winter Temperature":19.670574,"Average Summer Temperature":21.359116,"Population":33696614,"Energy Per Capita":1080.039,"% of Power from Fossil Fuels":83.003,"% of Power from Nuclear":0,"% of Power from Renewables":16.997,"% of Agricultural Land":44.4191904843,"% of Forest Land":1.0398318086,"Territory":527970,"Average Rainfall":167,"Corruption":0.1827792972,"Wheat Production (tonnes)":202362,"Rye Production (tonnes)":16472.4,"Potatoes Production (tonnes)":58010040.4,"Meat, chicken Production (tonnes)":2458136,"Avocados Production (tonnes)":11979.6,"Petrol Price (USD/liter)":0.52,"Daily Oil Consumption (Barrels)":60000,"CO2 Emissions (ton per capita)":0.380633361},{"Country":"Zambia","Country_clean":"zambia","Region":"Sub-Saharan Africa","Happiness":3.502,"Median Salary":0.26133504,"Average Salary":0.28552394,"Lowest Salary":0.072092424,"Highest Salary":1.2711033,"Infant Survival Rate":973,"Alcohol Consumption Rate":0.01,"Life Expectancy":61.8,"Netflix (USD/month)":null,"Women Safety Index":0.556,"Average Winter Temperature":23.009497,"Average Summer Temperature":25.123566,"Population":20017675,"Energy Per Capita":3418.863,"% of Power from Fossil Fuels":7.792,"% of Power from Nuclear":0,"% of Power from Renewables":92.208,"% of Agricultural Land":32.0679589448,"% of Forest Land":60.0301501231,"Territory":743390,"Average Rainfall":1020,"Corruption":0.1535387486,"Wheat Production (tonnes)":12373724.2,"Rye Production (tonnes)":3980041.4,"Potatoes Production (tonnes)":1539264.8,"Meat, chicken Production (tonnes)":16400,"Avocados Production (tonnes)":17474.034,"Petrol Price (USD/liter)":1.48,"Daily Oil Consumption (Barrels)":22000,"CO2 Emissions (ton per capita)":0.380717051},{"Country":"Eswatini","Country_clean":"eswatini","Region":"Sub-Saharan Africa","Happiness":3.502,"Median Salary":204.56,"Average Salary":239.53,"Lowest Salary":60.41,"Highest Salary":1065.18,"Infant Survival Rate":998,"Alcohol Consumption Rate":0.01,"Life Expectancy":58.9,"Netflix (USD/month)":null,"Women Safety Index":0.415,"Average Winter Temperature":23.062267,"Average Summer Temperature":24.690916,"Population":1201670,"Energy Per Capita":5981.112,"% of Power from Fossil Fuels":5.405,"% of Power from Nuclear":0,"% of Power from Renewables":94.595,"% of Agricultural Land":69.476744186,"% of Forest Land":28.998255814,"Territory":17200,"Average Rainfall":788,"Corruption":0.2084804773,"Wheat Production (tonnes)":242000,"Rye Production (tonnes)":685,"Potatoes Production (tonnes)":84367810,"Meat, chicken Production (tonnes)":148000,"Avocados Production (tonnes)":192307,"Petrol Price (USD/liter)":null,"Daily Oil Consumption (Barrels)":null,"CO2 Emissions (ton per capita)":0.836140045},{"Country":"Malawi","Country_clean":"malawi","Region":"Sub-Saharan Africa","Happiness":3.421,"Median Salary":132.38,"Average Salary":151.69,"Lowest Salary":38.24,"Highest Salary":674.79,"Infant Survival Rate":974,"Alcohol Consumption Rate":0.01,"Life Expectancy":58.3,"Netflix (USD/month)":null,"Women Safety Index":0.521,"Average Winter Temperature":23.77365,"Average Summer Temperature":25.912868,"Population":20405317,"Energy Per Capita":464.983,"% of Power from Fossil Fuels":15.493,"% of Power from Nuclear":0,"% of Power from Renewables":84.507,"% of Agricultural Land":64.1705557913,"% of Forest Land":23.3315655494,"Territory":94280,"Average Rainfall":1181,"Corruption":0.1473762393,"Wheat Production (tonnes)":23310800,"Rye Production (tonnes)":2242357.8,"Potatoes Production (tonnes)":447532.88,"Meat, chicken Production (tonnes)":6200,"Avocados Production (tonnes)":68493.6,"Petrol Price (USD/liter)":1.35,"Daily Oil Consumption (Barrels)":6001,"CO2 Emissions (ton per capita)":0.077836684},{"Country":"Botswana","Country_clean":"botswana","Region":"Sub-Saharan Africa","Happiness":3.383,"Median Salary":729.39,"Average Salary":860.69,"Lowest Salary":216.63,"Highest Salary":3822.03,"Infant Survival Rate":998,"Alcohol Consumption Rate":0.01,"Life Expectancy":65.7,"Netflix (USD/month)":null,"Women Safety Index":0.659,"Average Winter Temperature":26.46735,"Average Summer Temperature":28.064913,"Population":2630296,"Energy Per Capita":9385.398,"% of Power from Fossil Fuels":99.543,"% of Power from Nuclear":0,"% of Power from Renewables":0.457,"% of Agricultural Land":45.6337232898,"% of Forest Land":26.7083090713,"Territory":566730,"Average Rainfall":416,"Corruption":0.1603969038,"Wheat Production (tonnes)":2713157,"Rye Production (tonnes)":557002.44,"Potatoes Production (tonnes)":30482,"Meat, chicken Production (tonnes)":57420,"Avocados Production (tonnes)":830,"Petrol Price (USD/liter)":1.13,"Daily Oil Consumption (Barrels)":21000,"CO2 Emissions (ton per capita)":3.147107071},{"Country":"Zimbabwe","Country_clean":"zimbabwe","Region":"Sub-Saharan Africa","Happiness":3.341,"Median Salary":555.40204,"Average Salary":602.37635,"Lowest Salary":151.42305,"Highest Salary":2674.772,"Infant Survival Rate":978,"Alcohol Consumption Rate":6.5,"Life Expectancy":67,"Netflix (USD/month)":null,"Women Safety Index":0.604,"Average Winter Temperature":23.768185,"Average Summer Temperature":27.019161,"Population":16320537,"Energy Per Capita":2635.154,"% of Power from Fossil Fuels":44.956,"% of Power from Nuclear":0,"% of Power from Renewables":55.044,"% of Agricultural Land":41.876696394,"% of Forest Land":44.9748222825,"Territory":386850,"Average Rainfall":657,"Corruption":0.1515905112,"Wheat Production (tonnes)":1316724.8,"Rye Production (tonnes)":140284.8,"Potatoes Production (tonnes)":271012.612,"Meat, chicken Production (tonnes)":8000,"Avocados Production (tonnes)":29313.66,"Petrol Price (USD/liter)":1.62,"Daily Oil Consumption (Barrels)":24000,"CO2 Emissions (ton per capita)":0.80297852},{"Country":"Congo (Kinshasa)","Country_clean":"congo kinshasa","Region":"Sub-Saharan Africa","Happiness":3.295,"Median Salary":1058.67,"Average Salary":1205.3,"Lowest Salary":302.94,"Highest Salary":5365.86,"Infant Survival Rate":993,"Alcohol Consumption Rate":0.01,"Life Expectancy":64.7,"Netflix (USD/month)":null,"Women Safety Index":0.384,"Average Winter Temperature":25.505972,"Average Summer Temperature":26.152718,"Population":99010212,"Energy Per Capita":2348.011,"% of Power from Fossil Fuels":76.119,"% of Power from Nuclear":0,"% of Power from Renewables":23.881,"% of Agricultural Land":31.2679355783,"% of Forest Land":64.2196193265,"Territory":341500,"Average Rainfall":1646,"Corruption":0.158911109,"Wheat Production (tonnes)":916614,"Rye Production (tonnes)":15,"Potatoes Production (tonnes)":32500,"Meat, chicken Production (tonnes)":1478922.8,"Avocados Production (tonnes)":21000,"Petrol Price (USD/liter)":1.04,"Daily Oil Consumption (Barrels)":17000,"CO2 Emissions (ton per capita)":1.349316017},{"Country":"Sierra Leone","Country_clean":"sierra leone","Region":"Sub-Saharan Africa","Happiness":3.245,"Median Salary":249.1,"Average Salary":277.75,"Lowest Salary":69.92,"Highest Salary":1238.23,"Infant Survival Rate":978,"Alcohol Consumption Rate":0.01,"Life Expectancy":51,"Netflix (USD/month)":null,"Women Safety Index":0.543,"Average Winter Temperature":26.811758,"Average Summer Temperature":27.633963,"Population":8605718,"Energy Per Capita":492.598,"% of Power from Fossil Fuels":9.524,"% of Power from Nuclear":0,"% of Power from Renewables":90.476,"% of Agricultural Land":54.710446107,"% of Forest Land":34.8455250762,"Territory":72180,"Average Rainfall":2526,"Corruption":0.1473762393,"Wheat Production (tonnes)":127106.8,"Rye Production (tonnes)":49816.2,"Potatoes Production (tonnes)":65460290,"Meat, chicken Production (tonnes)":688538.1,"Avocados Production (tonnes)":17496,"Petrol Price (USD/liter)":1.37,"Daily Oil Consumption (Barrels)":6500,"CO2 Emissions (ton per capita)":0.115189573},{"Country":"Lesotho","Country_clean":"lesotho","Region":"Sub-Saharan Africa","Happiness":3.186,"Median Salary":540.54,"Average Salary":625.33,"Lowest Salary":157.39,"Highest Salary":2776.89,"Infant Survival Rate":996,"Alcohol Consumption Rate":0.01,"Life Expectancy":53.7,"Netflix (USD/month)":null,"Women Safety Index":0.605,"Average Winter Temperature":16.68572,"Average Summer Temperature":18.73354,"Population":2305825,"Energy Per Capita":2132.814,"% of Power from Fossil Fuels":0,"% of Power from Nuclear":0,"% of Power from Renewables":100,"% of Agricultural Land":80.1383399209,"% of Forest Land":1.1370223979,"Territory":30360,"Average Rainfall":788,"Corruption":0.1740706116,"Wheat Production (tonnes)":18781986,"Rye Production (tonnes)":10563.96,"Potatoes Production (tonnes)":285000,"Meat, chicken Production (tonnes)":1068500,"Avocados Production (tonnes)":1664340,"Petrol Price (USD/liter)":1.5,"Daily Oil Consumption (Barrels)":5001,"CO2 Emissions (ton per capita)":0.362307409},{"Country":"Lebanon","Country_clean":"lebanon","Region":"Middle East and North Africa","Happiness":2.707,"Median Salary":753.33,"Average Salary":873.33,"Lowest Salary":219.33,"Highest Salary":3873.33,"Infant Survival Rate":999,"Alcohol Consumption Rate":1.32,"Life Expectancy":74.9,"Netflix (USD/month)":null,"Women Safety Index":0.595,"Average Winter Temperature":9.020683,"Average Summer Temperature":9.587217,"Population":5489739,"Energy Per Capita":18831.662,"% of Power from Fossil Fuels":94.509,"% of Power from Nuclear":0,"% of Power from Renewables":5.491,"% of Agricultural Land":66.4027370479,"% of Forest Land":14.0694037146,"Territory":10230,"Average Rainfall":661,"Corruption":0.1708792597,"Wheat Production (tonnes)":239916,"Rye Production (tonnes)":714111.8,"Potatoes Production (tonnes)":200810,"Meat, chicken Production (tonnes)":541292,"Avocados Production (tonnes)":195067.11,"Petrol Price (USD/liter)":1.43,"Daily Oil Consumption (Barrels)":153000,"CO2 Emissions (ton per capita)":4.076894274},{"Country":"Afghanistan","Country_clean":"afghanistan","Region":"South Asia","Happiness":1.721,"Median Salary":853.74,"Average Salary":1001.15,"Lowest Salary":252.53,"Highest Salary":4460.97,"Infant Survival Rate":938,"Alcohol Consumption Rate":0.01,"Life Expectancy":65,"Netflix (USD/month)":null,"Women Safety Index":0.286,"Average Winter Temperature":0.047207996,"Average Summer Temperature":3.3000636,"Population":41128771,"Energy Per Capita":676.696,"% of Power from Fossil Fuels":15.663,"% of Power from Nuclear":0,"% of Power from Renewables":84.337,"% of Agricultural Land":58.7415482269,"% of Forest Land":1.8527819941,"Territory":652230,"Average Rainfall":327,"Corruption":0.1827608198,"Wheat Production (tonnes)":3900000,"Rye Production (tonnes)":96473.03,"Potatoes Production (tonnes)":864772,"Meat, chicken Production (tonnes)":28029.23,"Avocados Production (tonnes)":1069854.4,"Petrol Price (USD/liter)":0.96,"Daily Oil Consumption (Barrels)":35000,"CO2 Emissions (ton per capita)":0.159824372}]');function P4(e,r){const i=X.createContext(r),a=g=>{const{children:y,...c}=g,C=X.useMemo(()=>c,Object.values(c));return Ne.jsx(i.Provider,{value:C,children:y})};a.displayName=e+"Provider";function p(g){const y=X.useContext(i);if(y)return y;if(r!==void 0)return r;throw new Error(`\`${g}\` must be used within \`${e}\``)}return[a,p]}function Xg(e,r=[]){let i=[];function a(g,y){const c=X.createContext(y),C=i.length;i=[...i,y];const E=k=>{const{scope:N,children:j,...q}=k,H=N?.[e]?.[C]||c,W=X.useMemo(()=>q,Object.values(q));return Ne.jsx(H.Provider,{value:W,children:j})};E.displayName=g+"Provider";function M(k,N){const j=N?.[e]?.[C]||c,q=X.useContext(j);if(q)return q;if(y!==void 0)return y;throw new Error(`\`${k}\` must be used within \`${g}\``)}return[E,M]}const p=()=>{const g=i.map(y=>X.createContext(y));return function(c){const C=c?.[e]||g;return X.useMemo(()=>({[`__scope${e}`]:{...c,[e]:C}}),[c,C])}};return p.scopeName=e,[a,A4(p,...r)]}function A4(...e){const r=e[0];if(e.length===1)return r;const i=()=>{const a=e.map(p=>({useScope:p(),scopeName:p.scopeName}));return function(g){const y=a.reduce((c,{useScope:C,scopeName:E})=>{const k=C(g)[`__scope${E}`];return{...c,...k}},{});return X.useMemo(()=>({[`__scope${r.scopeName}`]:y}),[y])}};return i.scopeName=r.scopeName,i}var px=MC();const C4=au(px);function g2(e,r){if(typeof e=="function")return e(r);e!=null&&(e.current=r)}function RC(...e){return r=>{let i=!1;const a=e.map(p=>{const g=g2(p,r);return!i&&typeof g=="function"&&(i=!0),g});if(i)return()=>{for(let p=0;p<a.length;p++){const g=a[p];typeof g=="function"?g():g2(e[p],null)}}}}function nu(...e){return X.useCallback(RC(...e),e)}function kg(e){const r=E4(e),i=X.forwardRef((a,p)=>{const{children:g,...y}=a,c=X.Children.toArray(g),C=c.find(R4);if(C){const E=C.props.children,M=c.map(k=>k===C?X.Children.count(E)>1?X.Children.only(null):X.isValidElement(E)?E.props.children:null:k);return Ne.jsx(r,{...y,ref:p,children:X.isValidElement(E)?X.cloneElement(E,void 0,M):null})}return Ne.jsx(r,{...y,ref:p,children:g})});return i.displayName=`${e}.Slot`,i}var T4=kg("Slot");function E4(e){const r=X.forwardRef((i,a)=>{const{children:p,...g}=i;if(X.isValidElement(p)){const y=I4(p),c=D4(g,p.props);return p.type!==X.Fragment&&(c.ref=a?RC(a,y):y),X.cloneElement(p,c)}return X.Children.count(p)>1?X.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}var M4=Symbol("radix.slottable");function R4(e){return X.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===M4}function D4(e,r){const i={...r};for(const a in r){const p=e[a],g=r[a];/^on[A-Z]/.test(a)?p&&g?i[a]=(...c)=>{const C=g(...c);return p(...c),C}:p&&(i[a]=p):a==="style"?i[a]={...p,...g}:a==="className"&&(i[a]=[p,g].filter(Boolean).join(" "))}return{...e,...i}}function I4(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?e.ref:(r=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var O4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ro=O4.reduce((e,r)=>{const i=kg(`Primitive.${r}`),a=X.forwardRef((p,g)=>{const{asChild:y,...c}=p,C=y?i:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),Ne.jsx(C,{...c,ref:g})});return a.displayName=`Primitive.${r}`,{...e,[r]:a}},{});function k4(e,r){e&&px.flushSync(()=>e.dispatchEvent(r))}var mx="Progress",gx=100,[L4]=Xg(mx),[z4,N4]=L4(mx),DC=X.forwardRef((e,r)=>{const{__scopeProgress:i,value:a=null,max:p,getValueLabel:g=j4,...y}=e;(p||p===0)&&!y2(p)&&console.error(B4(`${p}`,"Progress"));const c=y2(p)?p:gx;a!==null&&!v2(a,c)&&console.error(F4(`${a}`,"Progress"));const C=v2(a,c)?a:null,E=U0(C)?g(C,c):void 0;return Ne.jsx(z4,{scope:i,value:C,max:c,children:Ne.jsx(ro.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":U0(C)?C:void 0,"aria-valuetext":E,role:"progressbar","data-state":kC(C,c),"data-value":C??void 0,"data-max":c,...y,ref:r})})});DC.displayName=mx;var IC="ProgressIndicator",OC=X.forwardRef((e,r)=>{const{__scopeProgress:i,...a}=e,p=N4(IC,i);return Ne.jsx(ro.div,{"data-state":kC(p.value,p.max),"data-value":p.value??void 0,"data-max":p.max,...a,ref:r})});OC.displayName=IC;function j4(e,r){return`${Math.round(e/r*100)}%`}function kC(e,r){return e==null?"indeterminate":e===r?"complete":"loading"}function U0(e){return typeof e=="number"}function y2(e){return U0(e)&&!isNaN(e)&&e>0}function v2(e,r){return U0(e)&&!isNaN(e)&&e<=r&&e>=0}function B4(e,r){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${r}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${gx}\`.`}function F4(e,r){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${r}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${gx} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var U4=DC,$4=OC;function LC(e){var r,i,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var p=e.length;for(r=0;r<p;r++)e[r]&&(i=LC(e[r]))&&(a&&(a+=" "),a+=i)}else for(i in e)e[i]&&(a&&(a+=" "),a+=i);return a}function In(){for(var e,r,i=0,a="",p=arguments.length;i<p;i++)(e=arguments[i])&&(r=LC(e))&&(a&&(a+=" "),a+=r);return a}const yx="-",V4=e=>{const r=q4(e),{conflictingClassGroups:i,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:y=>{const c=y.split(yx);return c[0]===""&&c.length!==1&&c.shift(),zC(c,r)||H4(y)},getConflictingClassGroupIds:(y,c)=>{const C=i[y]||[];return c&&a[y]?[...C,...a[y]]:C}}},zC=(e,r)=>{if(e.length===0)return r.classGroupId;const i=e[0],a=r.nextPart.get(i),p=a?zC(e.slice(1),a):void 0;if(p)return p;if(r.validators.length===0)return;const g=e.join(yx);return r.validators.find(({validator:y})=>y(g))?.classGroupId},_2=/^\[(.+)\]$/,H4=e=>{if(_2.test(e)){const r=_2.exec(e)[1],i=r?.substring(0,r.indexOf(":"));if(i)return"arbitrary.."+i}},q4=e=>{const{theme:r,classGroups:i}=e,a={nextPart:new Map,validators:[]};for(const p in i)mb(i[p],a,p,r);return a},mb=(e,r,i,a)=>{e.forEach(p=>{if(typeof p=="string"){const g=p===""?r:b2(r,p);g.classGroupId=i;return}if(typeof p=="function"){if(G4(p)){mb(p(a),r,i,a);return}r.validators.push({validator:p,classGroupId:i});return}Object.entries(p).forEach(([g,y])=>{mb(y,b2(r,g),i,a)})})},b2=(e,r)=>{let i=e;return r.split(yx).forEach(a=>{i.nextPart.has(a)||i.nextPart.set(a,{nextPart:new Map,validators:[]}),i=i.nextPart.get(a)}),i},G4=e=>e.isThemeGetter,W4=e=>{if(e<1)return{get:()=>{},set:()=>{}};let r=0,i=new Map,a=new Map;const p=(g,y)=>{i.set(g,y),r++,r>e&&(r=0,a=i,i=new Map)};return{get(g){let y=i.get(g);if(y!==void 0)return y;if((y=a.get(g))!==void 0)return p(g,y),y},set(g,y){i.has(g)?i.set(g,y):p(g,y)}}},gb="!",yb=":",Z4=yb.length,X4=e=>{const{prefix:r,experimentalParseClassName:i}=e;let a=p=>{const g=[];let y=0,c=0,C=0,E;for(let q=0;q<p.length;q++){let H=p[q];if(y===0&&c===0){if(H===yb){g.push(p.slice(C,q)),C=q+Z4;continue}if(H==="/"){E=q;continue}}H==="["?y++:H==="]"?y--:H==="("?c++:H===")"&&c--}const M=g.length===0?p:p.substring(C),k=K4(M),N=k!==M,j=E&&E>C?E-C:void 0;return{modifiers:g,hasImportantModifier:N,baseClassName:k,maybePostfixModifierPosition:j}};if(r){const p=r+yb,g=a;a=y=>y.startsWith(p)?g(y.substring(p.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:y,maybePostfixModifierPosition:void 0}}if(i){const p=a;a=g=>i({className:g,parseClassName:p})}return a},K4=e=>e.endsWith(gb)?e.substring(0,e.length-1):e.startsWith(gb)?e.substring(1):e,Y4=e=>{const r=Object.fromEntries(e.orderSensitiveModifiers.map(a=>[a,!0]));return a=>{if(a.length<=1)return a;const p=[];let g=[];return a.forEach(y=>{y[0]==="["||r[y]?(p.push(...g.sort(),y),g=[]):g.push(y)}),p.push(...g.sort()),p}},Q4=e=>({cache:W4(e.cacheSize),parseClassName:X4(e),sortModifiers:Y4(e),...V4(e)}),J4=/\s+/,e6=(e,r)=>{const{parseClassName:i,getClassGroupId:a,getConflictingClassGroupIds:p,sortModifiers:g}=r,y=[],c=e.trim().split(J4);let C="";for(let E=c.length-1;E>=0;E-=1){const M=c[E],{isExternal:k,modifiers:N,hasImportantModifier:j,baseClassName:q,maybePostfixModifierPosition:H}=i(M);if(k){C=M+(C.length>0?" "+C:C);continue}let W=!!H,K=a(W?q.substring(0,H):q);if(!K){if(!W){C=M+(C.length>0?" "+C:C);continue}if(K=a(q),!K){C=M+(C.length>0?" "+C:C);continue}W=!1}const ee=g(N).join(":"),ie=j?ee+gb:ee,ve=ie+K;if(y.includes(ve))continue;y.push(ve);const ye=p(K,W);for(let Pe=0;Pe<ye.length;++Pe){const Me=ye[Pe];y.push(ie+Me)}C=M+(C.length>0?" "+C:C)}return C};function t6(){let e=0,r,i,a="";for(;e<arguments.length;)(r=arguments[e++])&&(i=NC(r))&&(a&&(a+=" "),a+=i);return a}const NC=e=>{if(typeof e=="string")return e;let r,i="";for(let a=0;a<e.length;a++)e[a]&&(r=NC(e[a]))&&(i&&(i+=" "),i+=r);return i};function r6(e,...r){let i,a,p,g=y;function y(C){const E=r.reduce((M,k)=>k(M),e());return i=Q4(E),a=i.cache.get,p=i.cache.set,g=c,c(C)}function c(C){const E=a(C);if(E)return E;const M=e6(C,i);return p(C,M),M}return function(){return g(t6.apply(null,arguments))}}const la=e=>{const r=i=>i[e]||[];return r.isThemeGetter=!0,r},jC=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,BC=/^\((?:(\w[\w-]*):)?(.+)\)$/i,n6=/^\d+\/\d+$/,i6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,a6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,o6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,s6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,l6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ep=e=>n6.test(e),Lr=e=>!!e&&!Number.isNaN(Number(e)),of=e=>!!e&&Number.isInteger(Number(e)),E_=e=>e.endsWith("%")&&Lr(e.slice(0,-1)),Yc=e=>i6.test(e),u6=()=>!0,c6=e=>a6.test(e)&&!o6.test(e),FC=()=>!1,h6=e=>s6.test(e),f6=e=>l6.test(e),d6=e=>!Kt(e)&&!Yt(e),p6=e=>Jp(e,VC,FC),Kt=e=>jC.test(e),xd=e=>Jp(e,HC,c6),M_=e=>Jp(e,_6,Lr),x2=e=>Jp(e,UC,FC),m6=e=>Jp(e,$C,f6),u0=e=>Jp(e,qC,h6),Yt=e=>BC.test(e),_g=e=>em(e,HC),g6=e=>em(e,b6),w2=e=>em(e,UC),y6=e=>em(e,VC),v6=e=>em(e,$C),c0=e=>em(e,qC,!0),Jp=(e,r,i)=>{const a=jC.exec(e);return a?a[1]?r(a[1]):i(a[2]):!1},em=(e,r,i=!1)=>{const a=BC.exec(e);return a?a[1]?r(a[1]):i:!1},UC=e=>e==="position"||e==="percentage",$C=e=>e==="image"||e==="url",VC=e=>e==="length"||e==="size"||e==="bg-size",HC=e=>e==="length",_6=e=>e==="number",b6=e=>e==="family-name",qC=e=>e==="shadow",x6=()=>{const e=la("color"),r=la("font"),i=la("text"),a=la("font-weight"),p=la("tracking"),g=la("leading"),y=la("breakpoint"),c=la("container"),C=la("spacing"),E=la("radius"),M=la("shadow"),k=la("inset-shadow"),N=la("text-shadow"),j=la("drop-shadow"),q=la("blur"),H=la("perspective"),W=la("aspect"),K=la("ease"),ee=la("animate"),ie=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ve=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],ye=()=>[...ve(),Yt,Kt],Pe=()=>["auto","hidden","clip","visible","scroll"],Me=()=>["auto","contain","none"],je=()=>[Yt,Kt,C],ht=()=>[Ep,"full","auto",...je()],At=()=>[of,"none","subgrid",Yt,Kt],ot=()=>["auto",{span:["full",of,Yt,Kt]},of,Yt,Kt],ft=()=>[of,"auto",Yt,Kt],rt=()=>["auto","min","max","fr",Yt,Kt],It=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],kt=()=>["start","end","center","stretch","center-safe","end-safe"],Ue=()=>["auto",...je()],ct=()=>[Ep,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...je()],nt=()=>[e,Yt,Kt],Ct=()=>[...ve(),w2,x2,{position:[Yt,Kt]}],Te=()=>["no-repeat",{repeat:["","x","y","space","round"]}],et=()=>["auto","cover","contain",y6,p6,{size:[Yt,Kt]}],st=()=>[E_,_g,xd],yt=()=>["","none","full",E,Yt,Kt],Rt=()=>["",Lr,_g,xd],Zt=()=>["solid","dashed","dotted","double"],Ft=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ir=()=>[Lr,E_,w2,x2],Jt=()=>["","none",q,Yt,Kt],St=()=>["none",Lr,Yt,Kt],Gt=()=>["none",Lr,Yt,Kt],Nt=()=>[Lr,Yt,Kt],He=()=>[Ep,"full",...je()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Yc],breakpoint:[Yc],color:[u6],container:[Yc],"drop-shadow":[Yc],ease:["in","out","in-out"],font:[d6],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Yc],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Yc],shadow:[Yc],spacing:["px",Lr],text:[Yc],"text-shadow":[Yc],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ep,Kt,Yt,W]}],container:["container"],columns:[{columns:[Lr,Kt,Yt,c]}],"break-after":[{"break-after":ie()}],"break-before":[{"break-before":ie()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:ye()}],overflow:[{overflow:Pe()}],"overflow-x":[{"overflow-x":Pe()}],"overflow-y":[{"overflow-y":Pe()}],overscroll:[{overscroll:Me()}],"overscroll-x":[{"overscroll-x":Me()}],"overscroll-y":[{"overscroll-y":Me()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:ht()}],"inset-x":[{"inset-x":ht()}],"inset-y":[{"inset-y":ht()}],start:[{start:ht()}],end:[{end:ht()}],top:[{top:ht()}],right:[{right:ht()}],bottom:[{bottom:ht()}],left:[{left:ht()}],visibility:["visible","invisible","collapse"],z:[{z:[of,"auto",Yt,Kt]}],basis:[{basis:[Ep,"full","auto",c,...je()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Lr,Ep,"auto","initial","none",Kt]}],grow:[{grow:["",Lr,Yt,Kt]}],shrink:[{shrink:["",Lr,Yt,Kt]}],order:[{order:[of,"first","last","none",Yt,Kt]}],"grid-cols":[{"grid-cols":At()}],"col-start-end":[{col:ot()}],"col-start":[{"col-start":ft()}],"col-end":[{"col-end":ft()}],"grid-rows":[{"grid-rows":At()}],"row-start-end":[{row:ot()}],"row-start":[{"row-start":ft()}],"row-end":[{"row-end":ft()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":rt()}],"auto-rows":[{"auto-rows":rt()}],gap:[{gap:je()}],"gap-x":[{"gap-x":je()}],"gap-y":[{"gap-y":je()}],"justify-content":[{justify:[...It(),"normal"]}],"justify-items":[{"justify-items":[...kt(),"normal"]}],"justify-self":[{"justify-self":["auto",...kt()]}],"align-content":[{content:["normal",...It()]}],"align-items":[{items:[...kt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...kt(),{baseline:["","last"]}]}],"place-content":[{"place-content":It()}],"place-items":[{"place-items":[...kt(),"baseline"]}],"place-self":[{"place-self":["auto",...kt()]}],p:[{p:je()}],px:[{px:je()}],py:[{py:je()}],ps:[{ps:je()}],pe:[{pe:je()}],pt:[{pt:je()}],pr:[{pr:je()}],pb:[{pb:je()}],pl:[{pl:je()}],m:[{m:Ue()}],mx:[{mx:Ue()}],my:[{my:Ue()}],ms:[{ms:Ue()}],me:[{me:Ue()}],mt:[{mt:Ue()}],mr:[{mr:Ue()}],mb:[{mb:Ue()}],ml:[{ml:Ue()}],"space-x":[{"space-x":je()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":je()}],"space-y-reverse":["space-y-reverse"],size:[{size:ct()}],w:[{w:[c,"screen",...ct()]}],"min-w":[{"min-w":[c,"screen","none",...ct()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[y]},...ct()]}],h:[{h:["screen","lh",...ct()]}],"min-h":[{"min-h":["screen","lh","none",...ct()]}],"max-h":[{"max-h":["screen","lh",...ct()]}],"font-size":[{text:["base",i,_g,xd]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,Yt,M_]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",E_,Kt]}],"font-family":[{font:[g6,Kt,r]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[p,Yt,Kt]}],"line-clamp":[{"line-clamp":[Lr,"none",Yt,M_]}],leading:[{leading:[g,...je()]}],"list-image":[{"list-image":["none",Yt,Kt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Yt,Kt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:nt()}],"text-color":[{text:nt()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Zt(),"wavy"]}],"text-decoration-thickness":[{decoration:[Lr,"from-font","auto",Yt,xd]}],"text-decoration-color":[{decoration:nt()}],"underline-offset":[{"underline-offset":[Lr,"auto",Yt,Kt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:je()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Yt,Kt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Yt,Kt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Ct()}],"bg-repeat":[{bg:Te()}],"bg-size":[{bg:et()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},of,Yt,Kt],radial:["",Yt,Kt],conic:[of,Yt,Kt]},v6,m6]}],"bg-color":[{bg:nt()}],"gradient-from-pos":[{from:st()}],"gradient-via-pos":[{via:st()}],"gradient-to-pos":[{to:st()}],"gradient-from":[{from:nt()}],"gradient-via":[{via:nt()}],"gradient-to":[{to:nt()}],rounded:[{rounded:yt()}],"rounded-s":[{"rounded-s":yt()}],"rounded-e":[{"rounded-e":yt()}],"rounded-t":[{"rounded-t":yt()}],"rounded-r":[{"rounded-r":yt()}],"rounded-b":[{"rounded-b":yt()}],"rounded-l":[{"rounded-l":yt()}],"rounded-ss":[{"rounded-ss":yt()}],"rounded-se":[{"rounded-se":yt()}],"rounded-ee":[{"rounded-ee":yt()}],"rounded-es":[{"rounded-es":yt()}],"rounded-tl":[{"rounded-tl":yt()}],"rounded-tr":[{"rounded-tr":yt()}],"rounded-br":[{"rounded-br":yt()}],"rounded-bl":[{"rounded-bl":yt()}],"border-w":[{border:Rt()}],"border-w-x":[{"border-x":Rt()}],"border-w-y":[{"border-y":Rt()}],"border-w-s":[{"border-s":Rt()}],"border-w-e":[{"border-e":Rt()}],"border-w-t":[{"border-t":Rt()}],"border-w-r":[{"border-r":Rt()}],"border-w-b":[{"border-b":Rt()}],"border-w-l":[{"border-l":Rt()}],"divide-x":[{"divide-x":Rt()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Rt()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Zt(),"hidden","none"]}],"divide-style":[{divide:[...Zt(),"hidden","none"]}],"border-color":[{border:nt()}],"border-color-x":[{"border-x":nt()}],"border-color-y":[{"border-y":nt()}],"border-color-s":[{"border-s":nt()}],"border-color-e":[{"border-e":nt()}],"border-color-t":[{"border-t":nt()}],"border-color-r":[{"border-r":nt()}],"border-color-b":[{"border-b":nt()}],"border-color-l":[{"border-l":nt()}],"divide-color":[{divide:nt()}],"outline-style":[{outline:[...Zt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Lr,Yt,Kt]}],"outline-w":[{outline:["",Lr,_g,xd]}],"outline-color":[{outline:nt()}],shadow:[{shadow:["","none",M,c0,u0]}],"shadow-color":[{shadow:nt()}],"inset-shadow":[{"inset-shadow":["none",k,c0,u0]}],"inset-shadow-color":[{"inset-shadow":nt()}],"ring-w":[{ring:Rt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:nt()}],"ring-offset-w":[{"ring-offset":[Lr,xd]}],"ring-offset-color":[{"ring-offset":nt()}],"inset-ring-w":[{"inset-ring":Rt()}],"inset-ring-color":[{"inset-ring":nt()}],"text-shadow":[{"text-shadow":["none",N,c0,u0]}],"text-shadow-color":[{"text-shadow":nt()}],opacity:[{opacity:[Lr,Yt,Kt]}],"mix-blend":[{"mix-blend":[...Ft(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ft()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Lr]}],"mask-image-linear-from-pos":[{"mask-linear-from":ir()}],"mask-image-linear-to-pos":[{"mask-linear-to":ir()}],"mask-image-linear-from-color":[{"mask-linear-from":nt()}],"mask-image-linear-to-color":[{"mask-linear-to":nt()}],"mask-image-t-from-pos":[{"mask-t-from":ir()}],"mask-image-t-to-pos":[{"mask-t-to":ir()}],"mask-image-t-from-color":[{"mask-t-from":nt()}],"mask-image-t-to-color":[{"mask-t-to":nt()}],"mask-image-r-from-pos":[{"mask-r-from":ir()}],"mask-image-r-to-pos":[{"mask-r-to":ir()}],"mask-image-r-from-color":[{"mask-r-from":nt()}],"mask-image-r-to-color":[{"mask-r-to":nt()}],"mask-image-b-from-pos":[{"mask-b-from":ir()}],"mask-image-b-to-pos":[{"mask-b-to":ir()}],"mask-image-b-from-color":[{"mask-b-from":nt()}],"mask-image-b-to-color":[{"mask-b-to":nt()}],"mask-image-l-from-pos":[{"mask-l-from":ir()}],"mask-image-l-to-pos":[{"mask-l-to":ir()}],"mask-image-l-from-color":[{"mask-l-from":nt()}],"mask-image-l-to-color":[{"mask-l-to":nt()}],"mask-image-x-from-pos":[{"mask-x-from":ir()}],"mask-image-x-to-pos":[{"mask-x-to":ir()}],"mask-image-x-from-color":[{"mask-x-from":nt()}],"mask-image-x-to-color":[{"mask-x-to":nt()}],"mask-image-y-from-pos":[{"mask-y-from":ir()}],"mask-image-y-to-pos":[{"mask-y-to":ir()}],"mask-image-y-from-color":[{"mask-y-from":nt()}],"mask-image-y-to-color":[{"mask-y-to":nt()}],"mask-image-radial":[{"mask-radial":[Yt,Kt]}],"mask-image-radial-from-pos":[{"mask-radial-from":ir()}],"mask-image-radial-to-pos":[{"mask-radial-to":ir()}],"mask-image-radial-from-color":[{"mask-radial-from":nt()}],"mask-image-radial-to-color":[{"mask-radial-to":nt()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":ve()}],"mask-image-conic-pos":[{"mask-conic":[Lr]}],"mask-image-conic-from-pos":[{"mask-conic-from":ir()}],"mask-image-conic-to-pos":[{"mask-conic-to":ir()}],"mask-image-conic-from-color":[{"mask-conic-from":nt()}],"mask-image-conic-to-color":[{"mask-conic-to":nt()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Ct()}],"mask-repeat":[{mask:Te()}],"mask-size":[{mask:et()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Yt,Kt]}],filter:[{filter:["","none",Yt,Kt]}],blur:[{blur:Jt()}],brightness:[{brightness:[Lr,Yt,Kt]}],contrast:[{contrast:[Lr,Yt,Kt]}],"drop-shadow":[{"drop-shadow":["","none",j,c0,u0]}],"drop-shadow-color":[{"drop-shadow":nt()}],grayscale:[{grayscale:["",Lr,Yt,Kt]}],"hue-rotate":[{"hue-rotate":[Lr,Yt,Kt]}],invert:[{invert:["",Lr,Yt,Kt]}],saturate:[{saturate:[Lr,Yt,Kt]}],sepia:[{sepia:["",Lr,Yt,Kt]}],"backdrop-filter":[{"backdrop-filter":["","none",Yt,Kt]}],"backdrop-blur":[{"backdrop-blur":Jt()}],"backdrop-brightness":[{"backdrop-brightness":[Lr,Yt,Kt]}],"backdrop-contrast":[{"backdrop-contrast":[Lr,Yt,Kt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Lr,Yt,Kt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Lr,Yt,Kt]}],"backdrop-invert":[{"backdrop-invert":["",Lr,Yt,Kt]}],"backdrop-opacity":[{"backdrop-opacity":[Lr,Yt,Kt]}],"backdrop-saturate":[{"backdrop-saturate":[Lr,Yt,Kt]}],"backdrop-sepia":[{"backdrop-sepia":["",Lr,Yt,Kt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":je()}],"border-spacing-x":[{"border-spacing-x":je()}],"border-spacing-y":[{"border-spacing-y":je()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Yt,Kt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Lr,"initial",Yt,Kt]}],ease:[{ease:["linear","initial",K,Yt,Kt]}],delay:[{delay:[Lr,Yt,Kt]}],animate:[{animate:["none",ee,Yt,Kt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[H,Yt,Kt]}],"perspective-origin":[{"perspective-origin":ye()}],rotate:[{rotate:St()}],"rotate-x":[{"rotate-x":St()}],"rotate-y":[{"rotate-y":St()}],"rotate-z":[{"rotate-z":St()}],scale:[{scale:Gt()}],"scale-x":[{"scale-x":Gt()}],"scale-y":[{"scale-y":Gt()}],"scale-z":[{"scale-z":Gt()}],"scale-3d":["scale-3d"],skew:[{skew:Nt()}],"skew-x":[{"skew-x":Nt()}],"skew-y":[{"skew-y":Nt()}],transform:[{transform:[Yt,Kt,"","none","gpu","cpu"]}],"transform-origin":[{origin:ye()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:He()}],"translate-x":[{"translate-x":He()}],"translate-y":[{"translate-y":He()}],"translate-z":[{"translate-z":He()}],"translate-none":["translate-none"],accent:[{accent:nt()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:nt()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Yt,Kt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":je()}],"scroll-mx":[{"scroll-mx":je()}],"scroll-my":[{"scroll-my":je()}],"scroll-ms":[{"scroll-ms":je()}],"scroll-me":[{"scroll-me":je()}],"scroll-mt":[{"scroll-mt":je()}],"scroll-mr":[{"scroll-mr":je()}],"scroll-mb":[{"scroll-mb":je()}],"scroll-ml":[{"scroll-ml":je()}],"scroll-p":[{"scroll-p":je()}],"scroll-px":[{"scroll-px":je()}],"scroll-py":[{"scroll-py":je()}],"scroll-ps":[{"scroll-ps":je()}],"scroll-pe":[{"scroll-pe":je()}],"scroll-pt":[{"scroll-pt":je()}],"scroll-pr":[{"scroll-pr":je()}],"scroll-pb":[{"scroll-pb":je()}],"scroll-pl":[{"scroll-pl":je()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Yt,Kt]}],fill:[{fill:["none",...nt()]}],"stroke-w":[{stroke:[Lr,_g,xd,M_]}],stroke:[{stroke:["none",...nt()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},w6=r6(x6);function hi(...e){return w6(In(e))}function S6({className:e,value:r,...i}){return Ne.jsx(U4,{"data-slot":"progress",className:hi("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...i,children:Ne.jsx($4,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(r||0)}%)`}})})}const S2=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,P2=In,P6=(e,r)=>i=>{var a;if(r?.variants==null)return P2(e,i?.class,i?.className);const{variants:p,defaultVariants:g}=r,y=Object.keys(p).map(E=>{const M=i?.[E],k=g?.[E];if(M===null)return null;const N=S2(M)||S2(k);return p[E][N]}),c=i&&Object.entries(i).reduce((E,M)=>{let[k,N]=M;return N===void 0||(E[k]=N),E},{}),C=r==null||(a=r.compoundVariants)===null||a===void 0?void 0:a.reduce((E,M)=>{let{class:k,className:N,...j}=M;return Object.entries(j).every(q=>{let[H,W]=q;return Array.isArray(W)?W.includes({...g,...c}[H]):{...g,...c}[H]===W})?[...E,k,N]:E},[]);return P2(e,y,C,i?.class,i?.className)},A6=P6("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function vb({className:e,variant:r,size:i,asChild:a=!1,...p}){const g=a?T4:"button";return Ne.jsx(g,{"data-slot":"button",className:hi(A6({variant:r,size:i,className:e})),...p})}function C6({className:e,type:r,...i}){return Ne.jsx("input",{type:r,"data-slot":"input",className:hi("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...i})}var z0={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.7.3/LICENSE.txt
 */var T6=z0.exports,A2;function E6(){return A2||(A2=1,(function(e,r){(function(i,a){e.exports=a()})(T6,(function(){var i={},a={};function p(y,c,C){if(a[y]=C,y==="index"){var E="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",M={};return a.shared(M),a.index(i,M),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([E],{type:"text/javascript"}))),i}}p("shared",["exports"],(function(y){function c(l,n,s,f){return new(s||(s=Promise))((function(v,w){function P(L){try{D(f.next(L))}catch(F){w(F)}}function T(L){try{D(f.throw(L))}catch(F){w(F)}}function D(L){var F;L.done?v(L.value):(F=L.value,F instanceof s?F:new s((function($){$(F)}))).then(P,T)}D((f=f.apply(l,n||[])).next())}))}function C(l,n){this.x=l,this.y=n}function E(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var M,k;typeof SuppressedError=="function"&&SuppressedError,C.prototype={clone(){return new C(this.x,this.y)},add(l){return this.clone()._add(l)},sub(l){return this.clone()._sub(l)},multByPoint(l){return this.clone()._multByPoint(l)},divByPoint(l){return this.clone()._divByPoint(l)},mult(l){return this.clone()._mult(l)},div(l){return this.clone()._div(l)},rotate(l){return this.clone()._rotate(l)},rotateAround(l,n){return this.clone()._rotateAround(l,n)},matMult(l){return this.clone()._matMult(l)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(l){return this.x===l.x&&this.y===l.y},dist(l){return Math.sqrt(this.distSqr(l))},distSqr(l){const n=l.x-this.x,s=l.y-this.y;return n*n+s*s},angle(){return Math.atan2(this.y,this.x)},angleTo(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith(l){return this.angleWithSep(l.x,l.y)},angleWithSep(l,n){return Math.atan2(this.x*n-this.y*l,this.x*l+this.y*n)},_matMult(l){const n=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=n,this},_add(l){return this.x+=l.x,this.y+=l.y,this},_sub(l){return this.x-=l.x,this.y-=l.y,this},_mult(l){return this.x*=l,this.y*=l,this},_div(l){return this.x/=l,this.y/=l,this},_multByPoint(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint(l){return this.x/=l.x,this.y/=l.y,this},_unit(){return this._div(this.mag()),this},_perp(){const l=this.y;return this.y=this.x,this.x=-l,this},_rotate(l){const n=Math.cos(l),s=Math.sin(l),f=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=f,this},_rotateAround(l,n){const s=Math.cos(l),f=Math.sin(l),v=n.y+f*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-f*(this.y-n.y),this.y=v,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:C},C.convert=function(l){if(l instanceof C)return l;if(Array.isArray(l))return new C(+l[0],+l[1]);if(l.x!==void 0&&l.y!==void 0)return new C(+l.x,+l.y);throw new Error("Expected [x, y] or {x, y} point format")};var N=(function(){if(k)return M;function l(n,s,f,v){this.cx=3*n,this.bx=3*(f-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(v-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=s,this.p2x=f,this.p2y=v}return k=1,M=l,l.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,s){if(s===void 0&&(s=1e-6),n<0)return 0;if(n>1)return 1;for(var f=n,v=0;v<8;v++){var w=this.sampleCurveX(f)-n;if(Math.abs(w)<s)return f;var P=this.sampleCurveDerivativeX(f);if(Math.abs(P)<1e-6)break;f-=w/P}var T=0,D=1;for(f=n,v=0;v<20&&(w=this.sampleCurveX(f),!(Math.abs(w-n)<s));v++)n>w?T=f:D=f,f=.5*(D-T)+T;return f},solve:function(n,s){return this.sampleCurveY(this.solveCurveX(n,s))}},M})(),j=E(N);let q,H;function W(){return q==null&&(q=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),q}function K(){if(H==null&&(H=!1,W())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let f=0;f<25;f++){const v=4*f;n.fillStyle=`rgb(${v},${v+1},${v+2})`,n.fillRect(f%5,Math.floor(f/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let f=0;f<100;f++)if(f%4!=3&&s[f]!==f){H=!0;break}}}return H||!1}var ee=1e-6,ie=typeof Float32Array<"u"?Float32Array:Array;function ve(){var l=new ie(9);return ie!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}function ye(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function Pe(){var l=new ie(3);return ie!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l}function Me(l){var n=l[0],s=l[1],f=l[2];return Math.sqrt(n*n+s*s+f*f)}function je(l,n,s){var f=new ie(3);return f[0]=l,f[1]=n,f[2]=s,f}function ht(l,n,s){return l[0]=n[0]+s[0],l[1]=n[1]+s[1],l[2]=n[2]+s[2],l}function At(l,n,s){return l[0]=n[0]*s,l[1]=n[1]*s,l[2]=n[2]*s,l}function ot(l,n,s){var f=n[0],v=n[1],w=n[2],P=s[0],T=s[1],D=s[2];return l[0]=v*D-w*T,l[1]=w*P-f*D,l[2]=f*T-v*P,l}var ft,rt=Me;function It(l,n,s){var f=n[0],v=n[1],w=n[2],P=n[3];return l[0]=s[0]*f+s[4]*v+s[8]*w+s[12]*P,l[1]=s[1]*f+s[5]*v+s[9]*w+s[13]*P,l[2]=s[2]*f+s[6]*v+s[10]*w+s[14]*P,l[3]=s[3]*f+s[7]*v+s[11]*w+s[15]*P,l}function kt(){var l=new ie(4);return ie!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l[3]=1,l}function Ue(l,n,s,f){var v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",w=Math.PI/360;n*=w,f*=w,s*=w;var P=Math.sin(n),T=Math.cos(n),D=Math.sin(s),L=Math.cos(s),F=Math.sin(f),$=Math.cos(f);switch(v){case"xyz":l[0]=P*L*$+T*D*F,l[1]=T*D*$-P*L*F,l[2]=T*L*F+P*D*$,l[3]=T*L*$-P*D*F;break;case"xzy":l[0]=P*L*$-T*D*F,l[1]=T*D*$-P*L*F,l[2]=T*L*F+P*D*$,l[3]=T*L*$+P*D*F;break;case"yxz":l[0]=P*L*$+T*D*F,l[1]=T*D*$-P*L*F,l[2]=T*L*F-P*D*$,l[3]=T*L*$+P*D*F;break;case"yzx":l[0]=P*L*$+T*D*F,l[1]=T*D*$+P*L*F,l[2]=T*L*F-P*D*$,l[3]=T*L*$-P*D*F;break;case"zxy":l[0]=P*L*$-T*D*F,l[1]=T*D*$+P*L*F,l[2]=T*L*F+P*D*$,l[3]=T*L*$-P*D*F;break;case"zyx":l[0]=P*L*$-T*D*F,l[1]=T*D*$+P*L*F,l[2]=T*L*F-P*D*$,l[3]=T*L*$+P*D*F;break;default:throw new Error("Unknown angle order "+v)}return l}function ct(){var l=new ie(2);return ie!=Float32Array&&(l[0]=0,l[1]=0),l}function nt(l,n){var s=new ie(2);return s[0]=l,s[1]=n,s}Pe(),ft=new ie(4),ie!=Float32Array&&(ft[0]=0,ft[1]=0,ft[2]=0,ft[3]=0),Pe(),je(1,0,0),je(0,1,0),kt(),kt(),ve(),ct();const Ct=8192;function Te(l,n,s){return n*(Ct/(l.tileSize*Math.pow(2,s-l.tileID.overscaledZ)))}function et(l,n){return(l%n+n)%n}function st(l,n,s){return l*(1-s)+n*s}function yt(l){if(l<=0)return 0;if(l>=1)return 1;const n=l*l,s=n*l;return 4*(l<.5?s:3*(l-n)+s-.75)}function Rt(l,n,s,f){const v=new j(l,n,s,f);return w=>v.solve(w)}const Zt=Rt(.25,.1,.25,1);function Ft(l,n,s){return Math.min(s,Math.max(n,l))}function ir(l,n,s){const f=s-n,v=((l-n)%f+f)%f+n;return v===n?s:v}function Jt(l,...n){for(const s of n)for(const f in s)l[f]=s[f];return l}let St=1;function Gt(l,n,s){const f={};for(const v in l)f[v]=n.call(this,l[v],v,l);return f}function Nt(l,n,s){const f={};for(const v in l)n.call(this,l[v],v,l)&&(f[v]=l[v]);return f}function He(l){return Array.isArray(l)?l.map(He):typeof l=="object"&&l?Gt(l,He):l}const Ht={};function Lt(l){Ht[l]||(typeof console<"u"&&console.warn(l),Ht[l]=!0)}function wr(l,n,s){return(s.y-l.y)*(n.x-l.x)>(n.y-l.y)*(s.x-l.x)}function Dr(l){return typeof WorkerGlobalScope<"u"&&l!==void 0&&l instanceof WorkerGlobalScope}let zr=null;function Bn(l){return typeof ImageBitmap<"u"&&l instanceof ImageBitmap}const Kn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function qi(l,n,s,f,v){return c(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const w=new VideoFrame(l,{timestamp:0});try{const P=w?.format;if(!P||!P.startsWith("BGR")&&!P.startsWith("RGB"))throw new Error(`Unrecognized format ${P}`);const T=P.startsWith("BGR"),D=new Uint8ClampedArray(f*v*4);if(yield w.copyTo(D,(function(L,F,$,Z,J){const te=4*Math.max(-F,0),oe=(Math.max(0,$)-$)*Z*4+te,ue=4*Z,de=Math.max(0,F),Le=Math.max(0,$);return{rect:{x:de,y:Le,width:Math.min(L.width,F+Z)-de,height:Math.min(L.height,$+J)-Le},layout:[{offset:oe,stride:ue}]}})(l,n,s,f,v)),T)for(let L=0;L<D.length;L+=4){const F=D[L];D[L]=D[L+2],D[L+2]=F}return D}finally{w.close()}}))}let bi,Ga;function Ea(l,n,s,f){return l.addEventListener(n,s,f),{unsubscribe:()=>{l.removeEventListener(n,s,f)}}}function To(l){return l*Math.PI/180}function no(l){return l/Math.PI*180}const fa={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},An={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Gi="AbortError";function Re(){return new Error(Gi)}const re={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ne(l){return re.REGISTERED_PROTOCOLS[l.substring(0,l.indexOf("://"))]}const le="global-dispatcher";class _e extends Error{constructor(n,s,f,v){super(`AJAXError: ${s} (${n}): ${f}`),this.status=n,this.statusText=s,this.url=f,this.body=v}}const Se=()=>Dr(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,De=function(l,n){if(/:\/\//.test(l.url)&&!/^https?:|^file:/.test(l.url)){const f=ne(l.url);if(f)return f(l,n);if(Dr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,targetMapId:le},n)}if(!(/^file:/.test(s=l.url)||/^file:/.test(Se())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(f,v){return c(this,void 0,void 0,(function*(){const w=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,cache:f.cache,referrer:Se(),signal:v.signal});let P,T;f.type!=="json"||w.headers.has("Accept")||w.headers.set("Accept","application/json");try{P=yield fetch(w)}catch(L){throw new _e(0,L.message,f.url,new Blob)}if(!P.ok){const L=yield P.blob();throw new _e(P.status,P.statusText,f.url,L)}T=f.type==="arrayBuffer"||f.type==="image"?P.arrayBuffer():f.type==="json"?P.json():P.text();const D=yield T;if(v.signal.aborted)throw Re();return{data:D,cacheControl:P.headers.get("Cache-Control"),expires:P.headers.get("Expires")}}))})(l,n);if(Dr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,mustQueue:!0,targetMapId:le},n)}var s;return(function(f,v){return new Promise(((w,P)=>{var T;const D=new XMLHttpRequest;D.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(D.responseType="arraybuffer");for(const L in f.headers)D.setRequestHeader(L,f.headers[L]);f.type==="json"&&(D.responseType="text",!((T=f.headers)===null||T===void 0)&&T.Accept||D.setRequestHeader("Accept","application/json")),D.withCredentials=f.credentials==="include",D.onerror=()=>{P(new Error(D.statusText))},D.onload=()=>{if(!v.signal.aborted)if((D.status>=200&&D.status<300||D.status===0)&&D.response!==null){let L=D.response;if(f.type==="json")try{L=JSON.parse(D.response)}catch(F){return void P(F)}w({data:L,cacheControl:D.getResponseHeader("Cache-Control"),expires:D.getResponseHeader("Expires")})}else{const L=new Blob([D.response],{type:D.getResponseHeader("Content-Type")});P(new _e(D.status,D.statusText,f.url,L))}},v.signal.addEventListener("abort",(()=>{D.abort(),P(Re())})),D.send(f.body)}))})(l,n)};function qe(l){if(!l||l.indexOf("://")<=0||l.indexOf("data:image/")===0||l.indexOf("blob:")===0)return!0;const n=new URL(l),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function Oe(l,n,s){s[l]&&s[l].indexOf(n)!==-1||(s[l]=s[l]||[],s[l].push(n))}function Je(l,n,s){if(s&&s[l]){const f=s[l].indexOf(n);f!==-1&&s[l].splice(f,1)}}class gt{constructor(n,s={}){Jt(this,s),this.type=n}}class at extends gt{constructor(n,s={}){super("error",Jt({error:n},s))}}class Ot{on(n,s){return this._listeners=this._listeners||{},Oe(n,s,this._listeners),{unsubscribe:()=>{this.off(n,s)}}}off(n,s){return Je(n,s,this._listeners),Je(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Oe(n,s,this._oneTimeListeners),this):new Promise((f=>this.once(n,f)))}fire(n,s){typeof n=="string"&&(n=new gt(n,s||{}));const f=n.type;if(this.listens(f)){n.target=this;const v=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const T of v)T.call(this,n);const w=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const T of w)Je(f,T,this._oneTimeListeners),T.call(this,n);const P=this._eventedParent;P&&(Jt(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),P.fire(n))}else n instanceof at&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var ke={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ar=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function br(l,n){const s={};for(const f in l)f!=="ref"&&(s[f]=l[f]);return ar.forEach((f=>{f in n&&(s[f]=n[f])})),s}function $t(l,n){if(Array.isArray(l)){if(!Array.isArray(n)||l.length!==n.length)return!1;for(let s=0;s<l.length;s++)if(!$t(l[s],n[s]))return!1;return!0}if(typeof l=="object"&&l!==null&&n!==null){if(typeof n!="object"||Object.keys(l).length!==Object.keys(n).length)return!1;for(const s in l)if(!$t(l[s],n[s]))return!1;return!0}return l===n}function or(l,n){l.push(n)}function Ur(l,n,s){or(s,{command:"addSource",args:[l,n[l]]})}function Yn(l,n,s){or(n,{command:"removeSource",args:[l]}),s[l]=!0}function ri(l,n,s,f){Yn(l,s,f),Ur(l,n,s)}function Kr(l,n,s){let f;for(f in l[s])if(Object.prototype.hasOwnProperty.call(l[s],f)&&f!=="data"&&!$t(l[s][f],n[s][f]))return!1;for(f in n[s])if(Object.prototype.hasOwnProperty.call(n[s],f)&&f!=="data"&&!$t(l[s][f],n[s][f]))return!1;return!0}function tr(l,n,s,f,v,w){l=l||{},n=n||{};for(const P in l)Object.prototype.hasOwnProperty.call(l,P)&&($t(l[P],n[P])||s.push({command:w,args:[f,P,n[P],v]}));for(const P in n)Object.prototype.hasOwnProperty.call(n,P)&&!Object.prototype.hasOwnProperty.call(l,P)&&($t(l[P],n[P])||s.push({command:w,args:[f,P,n[P],v]}))}function sr(l){return l.id}function pn(l,n){return l[n.id]=n,l}class vt{constructor(n,s,f,v){this.message=(n?`${n}: `:"")+f,v&&(this.identifier=v),s!=null&&s.__line__&&(this.line=s.__line__)}}function Ii(l,...n){for(const s of n)for(const f in s)l[f]=s[f];return l}class Cn extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class Yo{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[f,v]of s)this.bindings[f]=v}concat(n){return new Yo(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const Eo={kind:"null"},Mt={kind:"number"},mr={kind:"string"},cr={kind:"boolean"},Fn={kind:"color"},Wa={kind:"projectionDefinition"},mn={kind:"object"},gr={kind:"value"},oc={kind:"collator"},da={kind:"formatted"},Qo={kind:"padding"},Mo={kind:"colorArray"},cl={kind:"numberArray"},Tn={kind:"resolvedImage"},ph={kind:"variableAnchorOffsetCollection"};function xi(l,n){return{kind:"array",itemType:l,N:n}}function $r(l){if(l.kind==="array"){const n=$r(l.itemType);return typeof l.N=="number"?`array<${n}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${n}>`}return l.kind}const Ro=[Eo,Mt,mr,cr,Fn,Wa,da,mn,xi(gr),Qo,cl,Mo,Tn,ph];function hl(l,n){if(n.kind==="error")return null;if(l.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!hl(l.itemType,n.itemType))&&(typeof l.N!="number"||l.N===n.N))return null}else{if(l.kind===n.kind)return null;if(l.kind==="value"){for(const s of Ro)if(!hl(s,n))return null}}return`Expected ${$r(l)} but found ${$r(n)} instead.`}function mh(l,n){return n.some((s=>s.kind===l.kind))}function Ma(l,n){return n.some((s=>s==="null"?l===null:s==="array"?Array.isArray(l):s==="object"?l&&!Array.isArray(l)&&typeof l=="object":s===typeof l))}function Do(l,n){return l.kind==="array"&&n.kind==="array"?l.itemType.kind===n.itemType.kind&&typeof l.N=="number":l.kind===n.kind}const sc=.96422,Vd=.82521,yf=4/29,wi=6/29,vf=3*wi*wi,cm=wi*wi*wi,gh=Math.PI/180,Hd=180/Math.PI;function hu(l){return(l%=360)<0&&(l+=360),l}function fu([l,n,s,f]){let v,w;const P=lc((.2225045*(l=pa(l))+.7168786*(n=pa(n))+.0606169*(s=pa(s)))/1);l===n&&n===s?v=w=P:(v=lc((.4360747*l+.3850649*n+.1430804*s)/sc),w=lc((.0139322*l+.0971045*n+.7141733*s)/Vd));const T=116*P-16;return[T<0?0:T,500*(v-P),200*(P-w),f]}function pa(l){return l<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function lc(l){return l>cm?Math.pow(l,1/3):l/vf+yf}function fl([l,n,s,f]){let v=(l+16)/116,w=isNaN(n)?v:v+n/500,P=isNaN(s)?v:v-s/200;return v=1*Is(v),w=sc*Is(w),P=Vd*Is(P),[uc(3.1338561*w-1.6168667*v-.4906146*P),uc(-.9787684*w+1.9161415*v+.033454*P),uc(.0719453*w-.2289914*v+1.4052427*P),f]}function uc(l){return(l=l<=.00304?12.92*l:1.055*Math.pow(l,1/2.4)-.055)<0?0:l>1?1:l}function Is(l){return l>wi?l*l*l:vf*(l-yf)}const qd=Object.hasOwn||function(l,n){return Object.prototype.hasOwnProperty.call(l,n)};function dl(l,n){return qd(l,n)?l[n]:void 0}function Io(l){return parseInt(l.padEnd(2,l),16)/255}function io(l,n){return xr(n?l/100:l,0,1)}function xr(l,n,s){return Math.min(Math.max(n,l),s)}function Os(l){return!l.some(Number.isNaN)}const Oo={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Jo(l,n,s){return l+s*(n-l)}function pl(l,n,s){return l.map(((f,v)=>Jo(f,n[v],s)))}class _r{constructor(n,s,f,v=1,w=!0){this.r=n,this.g=s,this.b=f,this.a=v,w||(this.r*=v,this.g*=v,this.b*=v,v||this.overwriteGetter("rgb",[n,s,f,v]))}static parse(n){if(n instanceof _r)return n;if(typeof n!="string")return;const s=(function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const v=dl(Oo,f);if(v){const[P,T,D]=v;return[P/255,T/255,D/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const P=f.length<6?1:2;let T=1;return[Io(f.slice(T,T+=P)),Io(f.slice(T,T+=P)),Io(f.slice(T,T+=P)),Io(f.slice(T,T+P)||"ff")]}if(f.startsWith("rgb")){const P=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(P){const[T,D,L,F,$,Z,J,te,oe,ue,de,Le]=P,xe=[F||" ",J||" ",ue].join("");if(xe==="  "||xe==="  /"||xe===",,"||xe===",,,"){const Ce=[L,Z,oe].join(""),Ge=Ce==="%%%"?100:Ce===""?255:0;if(Ge){const Ye=[xr(+D/Ge,0,1),xr(+$/Ge,0,1),xr(+te/Ge,0,1),de?io(+de,Le):1];if(Os(Ye))return Ye}}return}}const w=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[P,T,D,L,F,$,Z,J,te]=w,oe=[D||" ",F||" ",Z].join("");if(oe==="  "||oe==="  /"||oe===",,"||oe===",,,"){const ue=[+T,xr(+L,0,100),xr(+$,0,100),J?io(+J,te):1];if(Os(ue))return(function([de,Le,xe,Ce]){function Ge(Ye){const dt=(Ye+de/30)%12,Tt=Le*Math.min(xe,1-xe);return xe-Tt*Math.max(-1,Math.min(dt-3,9-dt,1))}return de=hu(de),Le/=100,xe/=100,[Ge(0),Ge(8),Ge(4),Ce]})(ue)}}})(n);return s?new _r(...s,!1):void 0}get rgb(){const{r:n,g:s,b:f,a:v}=this,w=v||1/0;return this.overwriteGetter("rgb",[n/w,s/w,f/w,v])}get hcl(){return this.overwriteGetter("hcl",(function(n){const[s,f,v,w]=fu(n),P=Math.sqrt(f*f+v*v);return[Math.round(1e4*P)?hu(Math.atan2(v,f)*Hd):NaN,P,s,w]})(this.rgb))}get lab(){return this.overwriteGetter("lab",fu(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,f,v]=this.rgb;return`rgba(${[n,s,f].map((w=>Math.round(255*w))).join(",")},${v})`}static interpolate(n,s,f,v="rgb"){switch(v){case"rgb":{const[w,P,T,D]=pl(n.rgb,s.rgb,f);return new _r(w,P,T,D,!1)}case"hcl":{const[w,P,T,D]=n.hcl,[L,F,$,Z]=s.hcl;let J,te;if(isNaN(w)||isNaN(L))isNaN(w)?isNaN(L)?J=NaN:(J=L,T!==1&&T!==0||(te=F)):(J=w,$!==1&&$!==0||(te=P));else{let xe=L-w;L>w&&xe>180?xe-=360:L<w&&w-L>180&&(xe+=360),J=w+f*xe}const[oe,ue,de,Le]=(function([xe,Ce,Ge,Ye]){return xe=isNaN(xe)?0:xe*gh,fl([Ge,Math.cos(xe)*Ce,Math.sin(xe)*Ce,Ye])})([J,te??Jo(P,F,f),Jo(T,$,f),Jo(D,Z,f)]);return new _r(oe,ue,de,Le,!1)}case"lab":{const[w,P,T,D]=fl(pl(n.lab,s.lab,f));return new _r(w,P,T,D,!1)}}}}_r.black=new _r(0,0,0,1),_r.white=new _r(1,1,1,1),_r.transparent=new _r(0,0,0,0),_r.red=new _r(1,0,0,1);class es{constructor(n,s,f){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const du=["bottom","center","top"];class ts{constructor(n,s,f,v,w,P){this.text=n,this.image=s,this.scale=f,this.fontStack=v,this.textColor=w,this.verticalAlign=P}}class Qn{constructor(n){this.sections=n}static fromString(n){return new Qn([new ts(n,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((n=>n.text.length!==0||n.image&&n.image.name.length!==0))}static factory(n){return n instanceof Qn?n:Qn.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map((n=>n.text)).join("")}}class ni{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof ni)return n;if(typeof n=="number")return new ni([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new ni(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,s,f){return new ni(pl(n.values,s.values,f))}}class Si{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Si)return n;if(typeof n=="number")return new Si([n]);if(Array.isArray(n)){for(const s of n)if(typeof s!="number")return;return new Si(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,s,f){return new Si(pl(n.values,s.values,f))}}class Un{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Un)return n;if(typeof n=="string"){const f=_r.parse(n);return f?new Un([f]):void 0}if(!Array.isArray(n))return;const s=[];for(const f of n){if(typeof f!="string")return;const v=_r.parse(f);if(!v)return;s.push(v)}return new Un(s)}toString(){return JSON.stringify(this.values)}static interpolate(n,s,f,v="rgb"){const w=[];if(n.values.length!=s.values.length)throw new Error(`colorArray: Arrays have mismatched length (${n.values.length} vs. ${s.values.length}), cannot interpolate.`);for(let P=0;P<n.values.length;P++)w.push(_r.interpolate(n.values[P],s.values[P],f,v));return new Un(w)}}class Br extends Error{constructor(n){super(n),this.name="RuntimeError"}toJSON(){return this.message}}const ko=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Pi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Pi)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const f=n[s],v=n[s+1];if(typeof f!="string"||!ko.has(f)||!Array.isArray(v)||v.length!==2||typeof v[0]!="number"||typeof v[1]!="number")return}return new Pi(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,s,f){const v=n.values,w=s.values;if(v.length!==w.length)throw new Br(`Cannot interpolate values of different length. from: ${n.toString()}, to: ${s.toString()}`);const P=[];for(let T=0;T<v.length;T+=2){if(v[T]!==w[T])throw new Br(`Cannot interpolate values containing mismatched anchors. from[${T}]: ${v[T]}, to[${T}]: ${w[T]}`);P.push(v[T]);const[D,L]=v[T+1],[F,$]=w[T+1];P.push([Jo(D,F,f),Jo(L,$,f)])}return new Pi(P)}}class Ai{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Ai({name:n,available:!1}):null}}class En{constructor(n,s,f){this.from=n,this.to=s,this.transition=f}static interpolate(n,s,f){return new En(n,s,f)}static parse(n){return n instanceof En?n:Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"?new En(n[0],n[1],n[2]):typeof n=="object"&&typeof n.from=="string"&&typeof n.to=="string"&&typeof n.transition=="number"?new En(n.from,n.to,n.transition):typeof n=="string"?new En(n,n,1):void 0}}function Yr(l,n,s,f){return typeof l=="number"&&l>=0&&l<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[l,n,s,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[l,n,s,f]:[l,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Lo(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof En||l instanceof _r||l instanceof es||l instanceof Qn||l instanceof ni||l instanceof Si||l instanceof Un||l instanceof Pi||l instanceof Ai)return!0;if(Array.isArray(l)){for(const n of l)if(!Lo(n))return!1;return!0}if(typeof l=="object"){for(const n in l)if(!Lo(l[n]))return!1;return!0}return!1}function er(l){if(l===null)return Eo;if(typeof l=="string")return mr;if(typeof l=="boolean")return cr;if(typeof l=="number")return Mt;if(l instanceof _r)return Fn;if(l instanceof En)return Wa;if(l instanceof es)return oc;if(l instanceof Qn)return da;if(l instanceof ni)return Qo;if(l instanceof Si)return cl;if(l instanceof Un)return Mo;if(l instanceof Pi)return ph;if(l instanceof Ai)return Tn;if(Array.isArray(l)){const n=l.length;let s;for(const f of l){const v=er(f);if(s){if(s===v)continue;s=gr;break}s=v}return xi(s||gr,n)}return mn}function lr(l){const n=typeof l;return l===null?"":n==="string"||n==="number"||n==="boolean"?String(l):l instanceof _r||l instanceof En||l instanceof Qn||l instanceof ni||l instanceof Si||l instanceof Un||l instanceof Pi||l instanceof Ai?l.toString():JSON.stringify(l)}class Za{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Lo(n[1]))return s.error("invalid value");const f=n[1];let v=er(f);const w=s.expectedType;return v.kind!=="array"||v.N!==0||!w||w.kind!=="array"||typeof w.N=="number"&&w.N!==0||(v=w),new Za(v,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Tr={string:mr,number:Mt,boolean:cr,object:mn};class un{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let f,v=1;const w=n[0];if(w==="array"){let T,D;if(n.length>2){const L=n[1];if(typeof L!="string"||!(L in Tr)||L==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);T=Tr[L],v++}else T=gr;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);D=n[2],v++}f=xi(T,D)}else{if(!Tr[w])throw new Error(`Types doesn't contain name = ${w}`);f=Tr[w]}const P=[];for(;v<n.length;v++){const T=s.parse(n[v],v,gr);if(!T)return null;P.push(T)}return new un(f,P)}evaluate(n){for(let s=0;s<this.args.length;s++){const f=this.args[s].evaluate(n);if(!hl(this.type,er(f)))return f;if(s===this.args.length-1)throw new Br(`Expected value to be of type ${$r(this.type)}, but found ${$r(er(f))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every((n=>n.outputDefined()))}}const Oi={"to-boolean":cr,"to-color":Fn,"to-number":Mt,"to-string":mr};class Ra{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const f=n[0];if(!Oi[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&n.length!==2)return s.error("Expected one argument.");const v=Oi[f],w=[];for(let P=1;P<n.length;P++){const T=s.parse(n[P],P,gr);if(!T)return null;w.push(T)}return new Ra(v,w)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,f;for(const v of this.args){if(s=v.evaluate(n),f=null,s instanceof _r)return s;if(typeof s=="string"){const w=n.parseColor(s);if(w)return w}else if(Array.isArray(s)&&(f=s.length<3||s.length>4?`Invalid rgba value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Yr(s[0],s[1],s[2],s[3]),!f))return new _r(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new Br(f||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const f of this.args){s=f.evaluate(n);const v=ni.parse(s);if(v)return v}throw new Br(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"numberArray":{let s;for(const f of this.args){s=f.evaluate(n);const v=Si.parse(s);if(v)return v}throw new Br(`Could not parse numberArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"colorArray":{let s;for(const f of this.args){s=f.evaluate(n);const v=Un.parse(s);if(v)return v}throw new Br(`Could not parse colorArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const f of this.args){s=f.evaluate(n);const v=Pi.parse(s);if(v)return v}throw new Br(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const f of this.args){if(s=f.evaluate(n),s===null)return 0;const v=Number(s);if(!isNaN(v))return v}throw new Br(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return Qn.fromString(lr(this.args[0].evaluate(n)));case"resolvedImage":return Ai.fromString(lr(this.args[0].evaluate(n)));case"projectionDefinition":return this.args[0].evaluate(n);default:return lr(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every((n=>n.outputDefined()))}}const ks=["Unknown","Point","LineString","Polygon"];class _f{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ks[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache.get(n);return s||(s=_r.parse(n),this._parseColorCache.set(n,s)),s}}class Ls{constructor(n,s,f=[],v,w=new Yo,P=[]){this.registry=n,this.path=f,this.key=f.map((T=>`[${T}]`)).join(""),this.scope=w,this.errors=P,this.expectedType=v,this._isConstant=s}parse(n,s,f,v,w={}){return s?this.concat(s,f,v)._parse(n,w):this._parse(n,w)}_parse(n,s){function f(v,w,P){return P==="assert"?new un(w,[v]):P==="coerce"?new Ra(w,[v]):v}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=n[0];if(typeof v!="string")return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const w=this.registry[v];if(w){let P=w.parse(n,this);if(!P)return null;if(this.expectedType){const T=this.expectedType,D=P.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||D.kind!=="value"){if(T.kind==="projectionDefinition"&&["string","array"].includes(D.kind)||["color","formatted","resolvedImage"].includes(T.kind)&&["value","string"].includes(D.kind)||["padding","numberArray"].includes(T.kind)&&["value","number","array"].includes(D.kind)||T.kind==="colorArray"&&["value","string","array"].includes(D.kind)||T.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(D.kind))P=f(P,T,s.typeAnnotation||"coerce");else if(this.checkSubtype(T,D))return null}else P=f(P,T,s.typeAnnotation||"assert")}if(!(P instanceof Za)&&P.type.kind!=="resolvedImage"&&this._isConstant(P)){const T=new _f;try{P=new Za(P.type,P.evaluate(T))}catch(D){return this.error(D.message),null}}return P}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,f){const v=typeof n=="number"?this.path.concat(n):this.path,w=f?this.scope.concat(f):this.scope;return new Ls(this.registry,this._isConstant,v,s||null,w,this.errors)}error(n,...s){const f=`${this.key}${s.map((v=>`[${v}]`)).join("")}`;this.errors.push(new Cn(f,n))}checkSubtype(n,s){const f=hl(n,s);return f&&this.error(f),f}}class ml{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const f=[];for(let w=1;w<n.length-1;w+=2){const P=n[w];if(typeof P!="string")return s.error(`Expected string, but found ${typeof P} instead.`,w);if(/[^a-zA-Z0-9_]/.test(P))return s.error("Variable names must contain only alphanumeric characters or '_'.",w);const T=s.parse(n[w+1],w+1);if(!T)return null;f.push([P,T])}const v=s.parse(n[n.length-1],n.length-1,s.expectedType,f);return v?new ml(f,v):null}outputDefined(){return this.result.outputDefined()}}class zs{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const f=n[1];return s.scope.has(f)?new zs(f,s.scope.get(f)):s.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class gl{constructor(n,s,f){this.type=n,this.index=s,this.input=f}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=s.parse(n[1],1,Mt),v=s.parse(n[2],2,xi(s.expectedType||gr));return f&&v?new gl(v.type.itemType,f,v):null}evaluate(n){const s=this.index.evaluate(n),f=this.input.evaluate(n);if(s<0)throw new Br(`Array index out of bounds: ${s} < 0.`);if(s>=f.length)throw new Br(`Array index out of bounds: ${s} > ${f.length-1}.`);if(s!==Math.floor(s))throw new Br(`Array index must be an integer, but found ${s} instead.`);return f[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class cc{constructor(n,s){this.type=cr,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=s.parse(n[1],1,gr),v=s.parse(n[2],2,gr);return f&&v?mh(f.type,[cr,mr,Mt,Eo,gr])?new cc(f,v):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${$r(f.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(!f)return!1;if(!Ma(s,["boolean","string","number","null"]))throw new Br(`Expected first argument to be of type boolean, string, number or null, but found ${$r(er(s))} instead.`);if(!Ma(f,["string","array"]))throw new Br(`Expected second argument to be of type array or string, but found ${$r(er(f))} instead.`);return f.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class ao{constructor(n,s,f){this.type=Mt,this.needle=n,this.haystack=s,this.fromIndex=f}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 2 or 3 arguments, but found ${n.length-1} instead.`);const f=s.parse(n[1],1,gr),v=s.parse(n[2],2,gr);if(!f||!v)return null;if(!mh(f.type,[cr,mr,Mt,Eo,gr]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${$r(f.type)} instead`);if(n.length===4){const w=s.parse(n[3],3,Mt);return w?new ao(f,v,w):null}return new ao(f,v)}evaluate(n){const s=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(!Ma(s,["boolean","string","number","null"]))throw new Br(`Expected first argument to be of type boolean, string, number or null, but found ${$r(er(s))} instead.`);let v;if(this.fromIndex&&(v=this.fromIndex.evaluate(n)),Ma(f,["string"])){const w=f.indexOf(s,v);return w===-1?-1:[...f.slice(0,w)].length}if(Ma(f,["array"]))return f.indexOf(s,v);throw new Br(`Expected second argument to be of type array or string, but found ${$r(er(f))} instead.`)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class fi{constructor(n,s,f,v,w,P){this.inputType=n,this.type=s,this.input=f,this.cases=v,this.outputs=w,this.otherwise=P}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let f,v;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);const w={},P=[];for(let L=2;L<n.length-1;L+=2){let F=n[L];const $=n[L+1];Array.isArray(F)||(F=[F]);const Z=s.concat(L);if(F.length===0)return Z.error("Expected at least one branch label.");for(const te of F){if(typeof te!="number"&&typeof te!="string")return Z.error("Branch labels must be numbers or strings.");if(typeof te=="number"&&Math.abs(te)>Number.MAX_SAFE_INTEGER)return Z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof te=="number"&&Math.floor(te)!==te)return Z.error("Numeric branch labels must be integer values.");if(f){if(Z.checkSubtype(f,er(te)))return null}else f=er(te);if(w[String(te)]!==void 0)return Z.error("Branch labels must be unique.");w[String(te)]=P.length}const J=s.parse($,L,v);if(!J)return null;v=v||J.type,P.push(J)}const T=s.parse(n[1],1,gr);if(!T)return null;const D=s.parse(n[n.length-1],n.length-1,v);return D?T.type.kind!=="value"&&s.concat(1).checkSubtype(f,T.type)?null:new fi(f,v,T,w,P,D):null}evaluate(n){const s=this.input.evaluate(n);return(er(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every((n=>n.outputDefined()))&&this.otherwise.outputDefined()}}class pu{constructor(n,s,f){this.type=n,this.branches=s,this.otherwise=f}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let f;s.expectedType&&s.expectedType.kind!=="value"&&(f=s.expectedType);const v=[];for(let P=1;P<n.length-1;P+=2){const T=s.parse(n[P],P,cr);if(!T)return null;const D=s.parse(n[P+1],P+1,f);if(!D)return null;v.push([T,D]),f=f||D.type}const w=s.parse(n[n.length-1],n.length-1,f);if(!w)return null;if(!f)throw new Error("Can't infer output type");return new pu(f,v,w)}evaluate(n){for(const[s,f]of this.branches)if(s.evaluate(n))return f.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,f]of this.branches)n(s),n(f);n(this.otherwise)}outputDefined(){return this.branches.every((([n,s])=>s.outputDefined()))&&this.otherwise.outputDefined()}}class yl{constructor(n,s,f,v){this.type=n,this.input=s,this.beginIndex=f,this.endIndex=v}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 2 or 3 arguments, but found ${n.length-1} instead.`);const f=s.parse(n[1],1,gr),v=s.parse(n[2],2,Mt);if(!f||!v)return null;if(!mh(f.type,[xi(gr),mr,gr]))return s.error(`Expected first argument to be of type array or string, but found ${$r(f.type)} instead`);if(n.length===4){const w=s.parse(n[3],3,Mt);return w?new yl(f.type,f,v,w):null}return new yl(f.type,f,v)}evaluate(n){const s=this.input.evaluate(n),f=this.beginIndex.evaluate(n);let v;if(this.endIndex&&(v=this.endIndex.evaluate(n)),Ma(s,["string"]))return[...s].slice(f,v).join("");if(Ma(s,["array"]))return s.slice(f,v);throw new Br(`Expected first argument to be of type array or string, but found ${$r(er(s))} instead.`)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function vl(l,n){const s=l.length-1;let f,v,w=0,P=s,T=0;for(;w<=P;)if(T=Math.floor((w+P)/2),f=l[T],v=l[T+1],f<=n){if(T===s||n<v)return T;w=T+1}else{if(!(f>n))throw new Br("Input is not a number.");P=T-1}return 0}class On{constructor(n,s,f){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[v,w]of f)this.labels.push(v),this.outputs.push(w)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const f=s.parse(n[1],1,Mt);if(!f)return null;const v=[];let w=null;s.expectedType&&s.expectedType.kind!=="value"&&(w=s.expectedType);for(let P=1;P<n.length;P+=2){const T=P===1?-1/0:n[P],D=n[P+1],L=P,F=P+1;if(typeof T!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',L);if(v.length&&v[v.length-1][0]>=T)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',L);const $=s.parse(D,F,w);if(!$)return null;w=w||$.type,v.push([T,$])}return new On(w,f,v)}evaluate(n){const s=this.labels,f=this.outputs;if(s.length===1)return f[0].evaluate(n);const v=this.input.evaluate(n);if(v<=s[0])return f[0].evaluate(n);const w=s.length;return v>=s[w-1]?f[w-1].evaluate(n):f[vl(s,v)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every((n=>n.outputDefined()))}}function Gd(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var hc,bf,Wd=(function(){if(bf)return hc;function l(n,s,f,v){this.cx=3*n,this.bx=3*(f-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(v-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=s,this.p2x=f,this.p2y=v}return bf=1,hc=l,l.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,s){if(s===void 0&&(s=1e-6),n<0)return 0;if(n>1)return 1;for(var f=n,v=0;v<8;v++){var w=this.sampleCurveX(f)-n;if(Math.abs(w)<s)return f;var P=this.sampleCurveDerivativeX(f);if(Math.abs(P)<1e-6)break;f-=w/P}var T=0,D=1;for(f=n,v=0;v<20&&(w=this.sampleCurveX(f),!(Math.abs(w-n)<s));v++)n>w?T=f:D=f,f=.5*(D-T)+T;return f},solve:function(n,s){return this.sampleCurveY(this.solveCurveX(n,s))}},hc})(),mu=Gd(Wd);class Ci{constructor(n,s,f,v,w){this.type=n,this.operator=s,this.interpolation=f,this.input=v,this.labels=[],this.outputs=[];for(const[P,T]of w)this.labels.push(P),this.outputs.push(T)}static interpolationFactor(n,s,f,v){let w=0;if(n.name==="exponential")w=fc(s,n.base,f,v);else if(n.name==="linear")w=fc(s,1,f,v);else if(n.name==="cubic-bezier"){const P=n.controlPoints;w=new mu(P[0],P[1],P[2],P[3]).solve(fc(s,1,f,v))}return w}static parse(n,s){let[f,v,w,...P]=n;if(!Array.isArray(v)||v.length===0)return s.error("Expected an interpolation type expression.",1);if(v[0]==="linear")v={name:"linear"};else if(v[0]==="exponential"){const L=v[1];if(typeof L!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:L}}else{if(v[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const L=v.slice(1);if(L.length!==4||L.some((F=>typeof F!="number"||F<0||F>1)))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:L}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(w=s.parse(w,2,Mt),!w)return null;const T=[];let D=null;f!=="interpolate-hcl"&&f!=="interpolate-lab"||s.expectedType==Mo?s.expectedType&&s.expectedType.kind!=="value"&&(D=s.expectedType):D=Fn;for(let L=0;L<P.length;L+=2){const F=P[L],$=P[L+1],Z=L+3,J=L+4;if(typeof F!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(T.length&&T[T.length-1][0]>=F)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Z);const te=s.parse($,J,D);if(!te)return null;D=D||te.type,T.push([F,te])}return Do(D,Mt)||Do(D,Wa)||Do(D,Fn)||Do(D,Qo)||Do(D,cl)||Do(D,Mo)||Do(D,ph)||Do(D,xi(Mt))?new Ci(D,f,v,w,T):s.error(`Type ${$r(D)} is not interpolatable.`)}evaluate(n){const s=this.labels,f=this.outputs;if(s.length===1)return f[0].evaluate(n);const v=this.input.evaluate(n);if(v<=s[0])return f[0].evaluate(n);const w=s.length;if(v>=s[w-1])return f[w-1].evaluate(n);const P=vl(s,v),T=Ci.interpolationFactor(this.interpolation,v,s[P],s[P+1]),D=f[P].evaluate(n),L=f[P+1].evaluate(n);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Jo(D,L,T);case"color":return _r.interpolate(D,L,T);case"padding":return ni.interpolate(D,L,T);case"colorArray":return Un.interpolate(D,L,T);case"numberArray":return Si.interpolate(D,L,T);case"variableAnchorOffsetCollection":return Pi.interpolate(D,L,T);case"array":return pl(D,L,T);case"projectionDefinition":return En.interpolate(D,L,T)}case"interpolate-hcl":switch(this.type.kind){case"color":return _r.interpolate(D,L,T,"hcl");case"colorArray":return Un.interpolate(D,L,T,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return _r.interpolate(D,L,T,"lab");case"colorArray":return Un.interpolate(D,L,T,"lab")}}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every((n=>n.outputDefined()))}}function fc(l,n,s,f){const v=f-s,w=l-s;return v===0?0:n===1?w/v:(Math.pow(n,w)-1)/(Math.pow(n,v)-1)}const zo={color:_r.interpolate,number:Jo,padding:ni.interpolate,numberArray:Si.interpolate,colorArray:Un.interpolate,variableAnchorOffsetCollection:Pi.interpolate,array:pl};class _l{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let f=null;const v=s.expectedType;v&&v.kind!=="value"&&(f=v);const w=[];for(const T of n.slice(1)){const D=s.parse(T,1+w.length,f,void 0,{typeAnnotation:"omit"});if(!D)return null;f=f||D.type,w.push(D)}if(!f)throw new Error("No output type");const P=v&&w.some((T=>hl(v,T.type)));return new _l(P?gr:f,w)}evaluate(n){let s,f=null,v=0;for(const w of this.args)if(v++,f=w.evaluate(n),f&&f instanceof Ai&&!f.available&&(s||(s=f.name),f=null,v===this.args.length&&(f=s)),f!==null)break;return f}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every((n=>n.outputDefined()))}}function dc(l,n){return l==="=="||l==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function pc(l,n,s,f){return f.compare(n,s)===0}function ki(l,n,s){const f=l!=="=="&&l!=="!=";return class GC{constructor(w,P,T){this.type=cr,this.lhs=w,this.rhs=P,this.collator=T,this.hasUntypedArgument=w.type.kind==="value"||P.type.kind==="value"}static parse(w,P){if(w.length!==3&&w.length!==4)return P.error("Expected two or three arguments.");const T=w[0];let D=P.parse(w[1],1,gr);if(!D)return null;if(!dc(T,D.type))return P.concat(1).error(`"${T}" comparisons are not supported for type '${$r(D.type)}'.`);let L=P.parse(w[2],2,gr);if(!L)return null;if(!dc(T,L.type))return P.concat(2).error(`"${T}" comparisons are not supported for type '${$r(L.type)}'.`);if(D.type.kind!==L.type.kind&&D.type.kind!=="value"&&L.type.kind!=="value")return P.error(`Cannot compare types '${$r(D.type)}' and '${$r(L.type)}'.`);f&&(D.type.kind==="value"&&L.type.kind!=="value"?D=new un(L.type,[D]):D.type.kind!=="value"&&L.type.kind==="value"&&(L=new un(D.type,[L])));let F=null;if(w.length===4){if(D.type.kind!=="string"&&L.type.kind!=="string"&&D.type.kind!=="value"&&L.type.kind!=="value")return P.error("Cannot use collator to compare non-string types.");if(F=P.parse(w[3],3,oc),!F)return null}return new GC(D,L,F)}evaluate(w){const P=this.lhs.evaluate(w),T=this.rhs.evaluate(w);if(f&&this.hasUntypedArgument){const D=er(P),L=er(T);if(D.kind!==L.kind||D.kind!=="string"&&D.kind!=="number")throw new Br(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${D.kind}, ${L.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const D=er(P),L=er(T);if(D.kind!=="string"||L.kind!=="string")return n(w,P,T)}return this.collator?s(w,P,T,this.collator.evaluate(w)):n(w,P,T)}eachChild(w){w(this.lhs),w(this.rhs),this.collator&&w(this.collator)}outputDefined(){return!0}}}const xf=ki("==",(function(l,n,s){return n===s}),pc),yh=ki("!=",(function(l,n,s){return n!==s}),(function(l,n,s,f){return!pc(0,n,s,f)})),hm=ki("<",(function(l,n,s){return n<s}),(function(l,n,s,f){return f.compare(n,s)<0})),wf=ki(">",(function(l,n,s){return n>s}),(function(l,n,s,f){return f.compare(n,s)>0})),fm=ki("<=",(function(l,n,s){return n<=s}),(function(l,n,s,f){return f.compare(n,s)<=0})),dm=ki(">=",(function(l,n,s){return n>=s}),(function(l,n,s,f){return f.compare(n,s)>=0}));class vh{constructor(n,s,f){this.type=oc,this.locale=f,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const f=n[1];if(typeof f!="object"||Array.isArray(f))return s.error("Collator options argument must be an object.");const v=s.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,cr);if(!v)return null;const w=s.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,cr);if(!w)return null;let P=null;return f.locale&&(P=s.parse(f.locale,1,mr),!P)?null:new vh(v,w,P)}evaluate(n){return new es(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class Sf{constructor(n,s,f,v,w){this.type=mr,this.number=n,this.locale=s,this.currency=f,this.minFractionDigits=v,this.maxFractionDigits=w}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const f=s.parse(n[1],1,Mt);if(!f)return null;const v=n[2];if(typeof v!="object"||Array.isArray(v))return s.error("NumberFormat options argument must be an object.");let w=null;if(v.locale&&(w=s.parse(v.locale,1,mr),!w))return null;let P=null;if(v.currency&&(P=s.parse(v.currency,1,mr),!P))return null;let T=null;if(v["min-fraction-digits"]&&(T=s.parse(v["min-fraction-digits"],1,Mt),!T))return null;let D=null;return v["max-fraction-digits"]&&(D=s.parse(v["max-fraction-digits"],1,Mt),!D)?null:new Sf(f,w,P,T,D)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class bl{constructor(n){this.type=da,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const f=n[1];if(!Array.isArray(f)&&typeof f=="object")return s.error("First argument must be an image or text section.");const v=[];let w=!1;for(let P=1;P<=n.length-1;++P){const T=n[P];if(w&&typeof T=="object"&&!Array.isArray(T)){w=!1;let D=null;if(T["font-scale"]&&(D=s.parse(T["font-scale"],1,Mt),!D))return null;let L=null;if(T["text-font"]&&(L=s.parse(T["text-font"],1,xi(mr)),!L))return null;let F=null;if(T["text-color"]&&(F=s.parse(T["text-color"],1,Fn),!F))return null;let $=null;if(T["vertical-align"]){if(typeof T["vertical-align"]=="string"&&!du.includes(T["vertical-align"]))return s.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${T["vertical-align"]}' instead.`);if($=s.parse(T["vertical-align"],1,mr),!$)return null}const Z=v[v.length-1];Z.scale=D,Z.font=L,Z.textColor=F,Z.verticalAlign=$}else{const D=s.parse(n[P],1,gr);if(!D)return null;const L=D.type.kind;if(L!=="string"&&L!=="value"&&L!=="null"&&L!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");w=!0,v.push({content:D,scale:null,font:null,textColor:null,verticalAlign:null})}}return new bl(v)}evaluate(n){return new Qn(this.sections.map((s=>{const f=s.content.evaluate(n);return er(f)===Tn?new ts("",f,null,null,null,s.verticalAlign?s.verticalAlign.evaluate(n):null):new ts(lr(f),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null,s.verticalAlign?s.verticalAlign.evaluate(n):null)})))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor),s.verticalAlign&&n(s.verticalAlign)}outputDefined(){return!1}}class Pf{constructor(n){this.type=Tn,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const f=s.parse(n[1],1,mr);return f?new Pf(f):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),f=Ai.fromString(s);return f&&n.availableImages&&(f.available=n.availableImages.indexOf(s)>-1),f}eachChild(n){n(this.input)}outputDefined(){return!1}}class gu{constructor(n){this.type=Mt,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const f=s.parse(n[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${$r(f.type)} instead.`):new gu(f):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string")return[...s].length;if(Array.isArray(s))return s.length;throw new Br(`Expected value to be of type string or array, but found ${$r(er(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Wi=8192;function pm(l,n){const s=(180+l[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,v=Math.pow(2,n.z);return[Math.round(s*v*Wi),Math.round(f*v*Wi)]}function mc(l,n){const s=Math.pow(2,n.z);return[(v=(l[0]/Wi+n.x)/s,360*v-180),(f=(l[1]/Wi+n.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90)];var f,v}function yu(l,n){l[0]=Math.min(l[0],n[0]),l[1]=Math.min(l[1],n[1]),l[2]=Math.max(l[2],n[0]),l[3]=Math.max(l[3],n[1])}function vu(l,n){return!(l[0]<=n[0]||l[2]>=n[2]||l[1]<=n[1]||l[3]>=n[3])}function Zd(l,n,s){const f=l[0]-n[0],v=l[1]-n[1],w=l[0]-s[0],P=l[1]-s[1];return f*P-w*v==0&&f*w<=0&&v*P<=0}function gc(l,n,s,f){return(v=[f[0]-s[0],f[1]-s[1]])[0]*(w=[n[0]-l[0],n[1]-l[1]])[1]-v[1]*w[0]!=0&&!(!Cf(l,n,s,f)||!Cf(s,f,l,n));var v,w}function _u(l,n,s){for(const f of s)for(let v=0;v<f.length-1;++v)if(gc(l,n,f[v],f[v+1]))return!0;return!1}function xl(l,n,s=!1){let f=!1;for(const T of n)for(let D=0;D<T.length-1;D++){if(Zd(l,T[D],T[D+1]))return s;(w=T[D])[1]>(v=l)[1]!=(P=T[D+1])[1]>v[1]&&v[0]<(P[0]-w[0])*(v[1]-w[1])/(P[1]-w[1])+w[0]&&(f=!f)}var v,w,P;return f}function Xd(l,n){for(const s of n)if(xl(l,s))return!0;return!1}function Af(l,n){for(const s of l)if(!xl(s,n))return!1;for(let s=0;s<l.length-1;++s)if(_u(l[s],l[s+1],n))return!1;return!0}function Kd(l,n){for(const s of n)if(Af(l,s))return!0;return!1}function Cf(l,n,s,f){const v=f[0]-s[0],w=f[1]-s[1],P=(l[0]-s[0])*w-v*(l[1]-s[1]),T=(n[0]-s[0])*w-v*(n[1]-s[1]);return P>0&&T<0||P<0&&T>0}function wl(l,n,s){const f=[];for(let v=0;v<l.length;v++){const w=[];for(let P=0;P<l[v].length;P++){const T=pm(l[v][P],s);yu(n,T),w.push(T)}f.push(w)}return f}function bu(l,n,s){const f=[];for(let v=0;v<l.length;v++){const w=wl(l[v],n,s);f.push(w)}return f}function _h(l,n,s,f){if(l[0]<s[0]||l[0]>s[2]){const v=.5*f;let w=l[0]-s[0]>v?-f:s[0]-l[0]>v?f:0;w===0&&(w=l[0]-s[2]>v?-f:s[2]-l[0]>v?f:0),l[0]+=w}yu(n,l)}function yc(l,n,s,f){const v=Math.pow(2,f.z)*Wi,w=[f.x*Wi,f.y*Wi],P=[];for(const T of l)for(const D of T){const L=[D.x+w[0],D.y+w[1]];_h(L,n,s,v),P.push(L)}return P}function Tf(l,n,s,f){const v=Math.pow(2,f.z)*Wi,w=[f.x*Wi,f.y*Wi],P=[];for(const D of l){const L=[];for(const F of D){const $=[F.x+w[0],F.y+w[1]];yu(n,$),L.push($)}P.push(L)}if(n[2]-n[0]<=v/2){(T=n)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(const D of P)for(const L of D)_h(L,n,s,v)}var T;return P}class Ns{constructor(n,s){this.type=cr,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Lo(n[1])){const f=n[1];if(f.type==="FeatureCollection"){const v=[];for(const w of f.features){const{type:P,coordinates:T}=w.geometry;P==="Polygon"&&v.push(T),P==="MultiPolygon"&&v.push(...T)}if(v.length)return new Ns(f,{type:"MultiPolygon",coordinates:v})}else if(f.type==="Feature"){const v=f.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Ns(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new Ns(f,f)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return(function(s,f){const v=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],P=s.canonicalID();if(f.type==="Polygon"){const T=wl(f.coordinates,w,P),D=yc(s.geometry(),v,w,P);if(!vu(v,w))return!1;for(const L of D)if(!xl(L,T))return!1}if(f.type==="MultiPolygon"){const T=bu(f.coordinates,w,P),D=yc(s.geometry(),v,w,P);if(!vu(v,w))return!1;for(const L of D)if(!Xd(L,T))return!1}return!0})(n,this.geometries);if(n.geometryType()==="LineString")return(function(s,f){const v=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],P=s.canonicalID();if(f.type==="Polygon"){const T=wl(f.coordinates,w,P),D=Tf(s.geometry(),v,w,P);if(!vu(v,w))return!1;for(const L of D)if(!Af(L,T))return!1}if(f.type==="MultiPolygon"){const T=bu(f.coordinates,w,P),D=Tf(s.geometry(),v,w,P);if(!vu(v,w))return!1;for(const L of D)if(!Kd(L,T))return!1}return!0})(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let vc=class{constructor(l=[],n=(s,f)=>s<f?-1:s>f?1:0){if(this.data=l,this.length=this.data.length,this.compare=n,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;const l=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:n,compare:s}=this,f=n[l];for(;l>0;){const v=l-1>>1,w=n[v];if(s(f,w)>=0)break;n[l]=w,l=v}n[l]=f}_down(l){const{data:n,compare:s}=this,f=this.length>>1,v=n[l];for(;l<f;){let w=1+(l<<1);const P=w+1;if(P<this.length&&s(n[P],n[w])<0&&(w=P),s(n[w],v)>=0)break;n[l]=n[w],l=w}n[l]=v}};function _c(l,n,s=0,f=l.length-1,v=Yd){for(;f>s;){if(f-s>600){const D=f-s+1,L=n-s+1,F=Math.log(D),$=.5*Math.exp(2*F/3),Z=.5*Math.sqrt(F*$*(D-$)/D)*(L-D/2<0?-1:1);_c(l,n,Math.max(s,Math.floor(n-L*$/D+Z)),Math.min(f,Math.floor(n+(D-L)*$/D+Z)),v)}const w=l[n];let P=s,T=f;for(xu(l,s,n),v(l[f],w)>0&&xu(l,s,f);P<T;){for(xu(l,P,T),P++,T--;v(l[P],w)<0;)P++;for(;v(l[T],w)>0;)T--}v(l[s],w)===0?xu(l,s,T):(T++,xu(l,T,f)),T<=n&&(s=T+1),n<=T&&(f=T-1)}}function xu(l,n,s){const f=l[n];l[n]=l[s],l[s]=f}function Yd(l,n){return l<n?-1:l>n?1:0}function wu(l,n){if(l.length<=1)return[l];const s=[];let f,v;for(const w of l){const P=mm(w);P!==0&&(w.area=Math.abs(P),v===void 0&&(v=P<0),v===P<0?(f&&s.push(f),f=[w]):f.push(w))}if(f&&s.push(f),n>1)for(let w=0;w<s.length;w++)s[w].length<=n||(_c(s[w],n,1,s[w].length-1,Qd),s[w]=s[w].slice(0,n));return s}function Qd(l,n){return n.area-l.area}function mm(l){let n=0;for(let s,f,v=0,w=l.length,P=w-1;v<w;P=v++)s=l[v],f=l[P],n+=(f.x-s.x)*(s.y+f.y);return n}const Jd=1/298.257223563,ep=Jd*(2-Jd),Ef=Math.PI/180;class Zi{constructor(n){const s=6378.137*Ef*1e3,f=Math.cos(n*Ef),v=1/(1-ep*(1-f*f)),w=Math.sqrt(v);this.kx=s*w*f,this.ky=s*w*v*(1-ep)}distance(n,s){const f=this.wrap(n[0]-s[0])*this.kx,v=(n[1]-s[1])*this.ky;return Math.sqrt(f*f+v*v)}pointOnLine(n,s){let f,v,w,P,T=1/0;for(let D=0;D<n.length-1;D++){let L=n[D][0],F=n[D][1],$=this.wrap(n[D+1][0]-L)*this.kx,Z=(n[D+1][1]-F)*this.ky,J=0;$===0&&Z===0||(J=(this.wrap(s[0]-L)*this.kx*$+(s[1]-F)*this.ky*Z)/($*$+Z*Z),J>1?(L=n[D+1][0],F=n[D+1][1]):J>0&&(L+=$/this.kx*J,F+=Z/this.ky*J)),$=this.wrap(s[0]-L)*this.kx,Z=(s[1]-F)*this.ky;const te=$*$+Z*Z;te<T&&(T=te,f=L,v=F,w=D,P=J)}return{point:[f,v],index:w,t:Math.max(0,Math.min(1,P))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function Su(l,n){return n[0]-l[0]}function bc(l){return l[1]-l[0]+1}function No(l,n){return l[1]>=l[0]&&l[1]<n}function Ir(l,n){if(l[0]>l[1])return[null,null];const s=bc(l);if(n){if(s===2)return[l,null];const v=Math.floor(s/2);return[[l[0],l[0]+v],[l[0]+v,l[1]]]}if(s===1)return[l,null];const f=Math.floor(s/2)-1;return[[l[0],l[0]+f],[l[0]+f+1,l[1]]]}function bh(l,n){if(!No(n,l.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let f=n[0];f<=n[1];++f)yu(s,l[f]);return s}function xc(l){const n=[1/0,1/0,-1/0,-1/0];for(const s of l)for(const f of s)yu(n,f);return n}function tp(l){return l[0]!==-1/0&&l[1]!==-1/0&&l[2]!==1/0&&l[3]!==1/0}function js(l,n,s){if(!tp(l)||!tp(n))return NaN;let f=0,v=0;return l[2]<n[0]&&(f=n[0]-l[2]),l[0]>n[2]&&(f=l[0]-n[2]),l[1]>n[3]&&(v=l[1]-n[3]),l[3]<n[1]&&(v=n[1]-l[3]),s.distance([0,0],[f,v])}function rs(l,n,s){const f=s.pointOnLine(n,l);return s.distance(l,f.point)}function Sl(l,n,s,f,v){const w=Math.min(rs(l,[s,f],v),rs(n,[s,f],v)),P=Math.min(rs(s,[l,n],v),rs(f,[l,n],v));return Math.min(w,P)}function Mf(l,n,s,f,v){if(!No(n,l.length)||!No(f,s.length))return 1/0;let w=1/0;for(let P=n[0];P<n[1];++P){const T=l[P],D=l[P+1];for(let L=f[0];L<f[1];++L){const F=s[L],$=s[L+1];if(gc(T,D,F,$))return 0;w=Math.min(w,Sl(T,D,F,$,v))}}return w}function rp(l,n,s,f,v){if(!No(n,l.length)||!No(f,s.length))return NaN;let w=1/0;for(let P=n[0];P<=n[1];++P)for(let T=f[0];T<=f[1];++T)if(w=Math.min(w,v.distance(l[P],s[T])),w===0)return w;return w}function Pl(l,n,s){if(xl(l,n,!0))return 0;let f=1/0;for(const v of n){const w=v[0],P=v[v.length-1];if(w!==P&&(f=Math.min(f,rs(l,[P,w],s)),f===0))return f;const T=s.pointOnLine(v,l);if(f=Math.min(f,s.distance(l,T.point)),f===0)return f}return f}function Pu(l,n,s,f){if(!No(n,l.length))return NaN;for(let w=n[0];w<=n[1];++w)if(xl(l[w],s,!0))return 0;let v=1/0;for(let w=n[0];w<n[1];++w){const P=l[w],T=l[w+1];for(const D of s)for(let L=0,F=D.length,$=F-1;L<F;$=L++){const Z=D[$],J=D[L];if(gc(P,T,Z,J))return 0;v=Math.min(v,Sl(P,T,Z,J,f))}}return v}function xh(l,n){for(const s of l)for(const f of s)if(xl(f,n,!0))return!0;return!1}function np(l,n,s,f=1/0){const v=xc(l),w=xc(n);if(f!==1/0&&js(v,w,s)>=f)return f;if(vu(v,w)){if(xh(l,n))return 0}else if(xh(n,l))return 0;let P=1/0;for(const T of l)for(let D=0,L=T.length,F=L-1;D<L;F=D++){const $=T[F],Z=T[D];for(const J of n)for(let te=0,oe=J.length,ue=oe-1;te<oe;ue=te++){const de=J[ue],Le=J[te];if(gc($,Z,de,Le))return 0;P=Math.min(P,Sl($,Z,de,Le,s))}}return P}function Bs(l,n,s,f,v,w){if(!w)return;const P=js(bh(f,w),v,s);P<n&&l.push([P,w,[0,0]])}function wc(l,n,s,f,v,w,P){if(!w||!P)return;const T=js(bh(f,w),bh(v,P),s);T<n&&l.push([T,w,P])}function Sc(l,n,s,f,v=1/0){let w=Math.min(f.distance(l[0],s[0][0]),v);if(w===0)return w;const P=new vc([[0,[0,l.length-1],[0,0]]],Su),T=xc(s);for(;P.length>0;){const D=P.pop();if(D[0]>=w)continue;const L=D[1],F=n?50:100;if(bc(L)<=F){if(!No(L,l.length))return NaN;if(n){const $=Pu(l,L,s,f);if(isNaN($)||$===0)return $;w=Math.min(w,$)}else for(let $=L[0];$<=L[1];++$){const Z=Pl(l[$],s,f);if(w=Math.min(w,Z),w===0)return 0}}else{const $=Ir(L,n);Bs(P,w,f,l,T,$[0]),Bs(P,w,f,l,T,$[1])}}return w}function Pc(l,n,s,f,v,w=1/0){let P=Math.min(w,v.distance(l[0],s[0]));if(P===0)return P;const T=new vc([[0,[0,l.length-1],[0,s.length-1]]],Su);for(;T.length>0;){const D=T.pop();if(D[0]>=P)continue;const L=D[1],F=D[2],$=n?50:100,Z=f?50:100;if(bc(L)<=$&&bc(F)<=Z){if(!No(L,l.length)&&No(F,s.length))return NaN;let J;if(n&&f)J=Mf(l,L,s,F,v),P=Math.min(P,J);else if(n&&!f){const te=l.slice(L[0],L[1]+1);for(let oe=F[0];oe<=F[1];++oe)if(J=rs(s[oe],te,v),P=Math.min(P,J),P===0)return P}else if(!n&&f){const te=s.slice(F[0],F[1]+1);for(let oe=L[0];oe<=L[1];++oe)if(J=rs(l[oe],te,v),P=Math.min(P,J),P===0)return P}else J=rp(l,L,s,F,v),P=Math.min(P,J)}else{const J=Ir(L,n),te=Ir(F,f);wc(T,P,v,l,s,J[0],te[0]),wc(T,P,v,l,s,J[0],te[1]),wc(T,P,v,l,s,J[1],te[0]),wc(T,P,v,l,s,J[1],te[1])}}return P}function Rf(l){return l.type==="MultiPolygon"?l.coordinates.map((n=>({type:"Polygon",coordinates:n}))):l.type==="MultiLineString"?l.coordinates.map((n=>({type:"LineString",coordinates:n}))):l.type==="MultiPoint"?l.coordinates.map((n=>({type:"Point",coordinates:n}))):[l]}class Al{constructor(n,s){this.type=Mt,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Lo(n[1])){const f=n[1];if(f.type==="FeatureCollection")return new Al(f,f.features.map((v=>Rf(v.geometry))).flat());if(f.type==="Feature")return new Al(f,Rf(f.geometry));if("type"in f&&"coordinates"in f)return new Al(f,Rf(f))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return(function(s,f){const v=s.geometry(),w=v.flat().map((D=>mc([D.x,D.y],s.canonical)));if(v.length===0)return NaN;const P=new Zi(w[0][1]);let T=1/0;for(const D of f){switch(D.type){case"Point":T=Math.min(T,Pc(w,!1,[D.coordinates],!1,P,T));break;case"LineString":T=Math.min(T,Pc(w,!1,D.coordinates,!0,P,T));break;case"Polygon":T=Math.min(T,Sc(w,!1,D.coordinates,P,T))}if(T===0)return T}return T})(n,this.geometries);if(n.geometryType()==="LineString")return(function(s,f){const v=s.geometry(),w=v.flat().map((D=>mc([D.x,D.y],s.canonical)));if(v.length===0)return NaN;const P=new Zi(w[0][1]);let T=1/0;for(const D of f){switch(D.type){case"Point":T=Math.min(T,Pc(w,!0,[D.coordinates],!1,P,T));break;case"LineString":T=Math.min(T,Pc(w,!0,D.coordinates,!0,P,T));break;case"Polygon":T=Math.min(T,Sc(w,!0,D.coordinates,P,T))}if(T===0)return T}return T})(n,this.geometries);if(n.geometryType()==="Polygon")return(function(s,f){const v=s.geometry();if(v.length===0||v[0].length===0)return NaN;const w=wu(v,0).map((D=>D.map((L=>L.map((F=>mc([F.x,F.y],s.canonical))))))),P=new Zi(w[0][0][0][1]);let T=1/0;for(const D of f)for(const L of w){switch(D.type){case"Point":T=Math.min(T,Sc([D.coordinates],!1,L,P,T));break;case"LineString":T=Math.min(T,Sc(D.coordinates,!0,L,P,T));break;case"Polygon":T=Math.min(T,np(L,D.coordinates,P,T))}if(T===0)return T}return T})(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Ac{constructor(n){this.type=gr,this.key=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const f=n[1];return f==null?s.error("Global state property must be defined."):typeof f!="string"?s.error(`Global state property must be string, but found ${typeof n[1]} instead.`):new Ac(f)}evaluate(n){var s;const f=(s=n.globals)===null||s===void 0?void 0:s.globalState;return f&&Object.keys(f).length!==0?dl(f,this.key):null}eachChild(){}outputDefined(){return!1}}const Cl={"==":xf,"!=":yh,">":wf,"<":hm,">=":dm,"<=":fm,array:un,at:gl,boolean:un,case:pu,coalesce:_l,collator:vh,format:bl,image:Pf,in:cc,"index-of":ao,interpolate:Ci,"interpolate-hcl":Ci,"interpolate-lab":Ci,length:gu,let:ml,literal:Za,match:fi,number:un,"number-format":Sf,object:un,slice:yl,step:On,string:un,"to-boolean":Ra,"to-color":Ra,"to-number":Ra,"to-string":Ra,var:zs,within:Ns,distance:Al,"global-state":Ac};class Da{constructor(n,s,f,v){this.name=n,this.type=s,this._evaluate=f,this.args=v}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const f=n[0],v=Da.definitions[f];if(!v)return s.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const w=Array.isArray(v)?v[0]:v.type,P=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,T=P.filter((([L])=>!Array.isArray(L)||L.length===n.length-1));let D=null;for(const[L,F]of T){D=new Ls(s.registry,Xi,s.path,null,s.scope);const $=[];let Z=!1;for(let J=1;J<n.length;J++){const te=n[J],oe=Array.isArray(L)?L[J-1]:L.type,ue=D.parse(te,1+$.length,oe);if(!ue){Z=!0;break}$.push(ue)}if(!Z)if(Array.isArray(L)&&L.length!==$.length)D.error(`Expected ${L.length} arguments, but found ${$.length} instead.`);else{for(let J=0;J<$.length;J++){const te=Array.isArray(L)?L[J]:L.type,oe=$[J];D.concat(J+1).checkSubtype(te,oe.type)}if(D.errors.length===0)return new Da(f,w,F,$)}}if(T.length===1)s.errors.push(...D.errors);else{const L=(T.length?T:P).map((([$])=>{return Z=$,Array.isArray(Z)?`(${Z.map($r).join(", ")})`:`(${$r(Z.type)}...)`;var Z})).join(" | "),F=[];for(let $=1;$<n.length;$++){const Z=s.parse(n[$],1+F.length);if(!Z)return null;F.push($r(Z.type))}s.error(`Expected arguments of type ${L}, but found (${F.join(", ")}) instead.`)}return null}static register(n,s){Da.definitions=s;for(const f in s)n[f]=Da}}function wh(l,[n,s,f,v]){n=n.evaluate(l),s=s.evaluate(l),f=f.evaluate(l);const w=v?v.evaluate(l):1,P=Yr(n,s,f,w);if(P)throw new Br(P);return new _r(n/255,s/255,f/255,w,!1)}function Xa(l,n){return l in n}function Sh(l,n){const s=n[l];return s===void 0?null:s}function di(l){return{type:l}}function Xi(l){if(l instanceof zs)return Xi(l.boundExpression);if(l instanceof Da&&l.name==="error"||l instanceof vh||l instanceof Ns||l instanceof Al||l instanceof Ac)return!1;const n=l instanceof Ra||l instanceof un;let s=!0;return l.eachChild((f=>{s=n?s&&Xi(f):s&&f instanceof Za})),!!s&&ns(l)&&El(l,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function ns(l){if(l instanceof Da&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof Ns||l instanceof Al)return!1;let n=!0;return l.eachChild((s=>{n&&!ns(s)&&(n=!1)})),n}function Tl(l){if(l instanceof Da&&l.name==="feature-state")return!1;let n=!0;return l.eachChild((s=>{n&&!Tl(s)&&(n=!1)})),n}function El(l,n){if(l instanceof Da&&n.indexOf(l.name)>=0)return!1;let s=!0;return l.eachChild((f=>{s&&!El(f,n)&&(s=!1)})),s}function Cc(l){return{result:"success",value:l}}function Fs(l){return{result:"error",value:l}}function Ia(l){return l["property-type"]==="data-driven"||l["property-type"]==="cross-faded-data-driven"}function Df(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function Au(l){return!!l.expression&&l.expression.interpolated}function yr(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}function Tc(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)&&er(l)===mn}function Oa(l){return l}function Ph(l,n){const s=l.stops&&typeof l.stops[0][0]=="object",f=s||!(s||l.property!==void 0),v=l.type||(Au(n)?"exponential":"interval"),w=(function(F){switch(F.type){case"color":return _r.parse;case"padding":return ni.parse;case"numberArray":return Si.parse;case"colorArray":return Un.parse;default:return null}})(n);if(w&&((l=Ii({},l)).stops&&(l.stops=l.stops.map((F=>[F[0],w(F[1])]))),l.default=w(l.default?l.default:n.default)),l.colorSpace&&(P=l.colorSpace)!=="rgb"&&P!=="hcl"&&P!=="lab")throw new Error(`Unknown color space: "${l.colorSpace}"`);var P;const T=(function(F){switch(F){case"exponential":return Us;case"interval":return Ah;case"categorical":return If;case"identity":return Of;default:throw new Error(`Unknown function type "${F}"`)}})(v);let D,L;if(v==="categorical"){D=Object.create(null);for(const F of l.stops)D[F[0]]=F[1];L=typeof l.stops[0][0]}if(s){const F={},$=[];for(let te=0;te<l.stops.length;te++){const oe=l.stops[te],ue=oe[0].zoom;F[ue]===void 0&&(F[ue]={zoom:ue,type:l.type,property:l.property,default:l.default,stops:[]},$.push(ue)),F[ue].stops.push([oe[0].value,oe[1]])}const Z=[];for(const te of $)Z.push([F[te].zoom,Ph(F[te],n)]);const J={name:"linear"};return{kind:"composite",interpolationType:J,interpolationFactor:Ci.interpolationFactor.bind(void 0,J),zoomStops:Z.map((te=>te[0])),evaluate:({zoom:te},oe)=>Us({stops:Z,base:l.base},n,te).evaluate(te,oe)}}if(f){const F=v==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:F,interpolationFactor:Ci.interpolationFactor.bind(void 0,F),zoomStops:l.stops.map(($=>$[0])),evaluate:({zoom:$})=>T(l,n,$,D,L)}}return{kind:"source",evaluate(F,$){const Z=$&&$.properties?$.properties[l.property]:void 0;return Z===void 0?Li(l.default,n.default):T(l,n,Z,D,L)}}}function Li(l,n,s){return l!==void 0?l:n!==void 0?n:s!==void 0?s:void 0}function If(l,n,s,f,v){return Li(typeof s===v?f[s]:void 0,l.default,n.default)}function Ah(l,n,s){if(yr(s)!=="number")return Li(l.default,n.default);const f=l.stops.length;if(f===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[f-1][0])return l.stops[f-1][1];const v=vl(l.stops.map((w=>w[0])),s);return l.stops[v][1]}function Us(l,n,s){const f=l.base!==void 0?l.base:1;if(yr(s)!=="number")return Li(l.default,n.default);const v=l.stops.length;if(v===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[v-1][0])return l.stops[v-1][1];const w=vl(l.stops.map((F=>F[0])),s),P=(function(F,$,Z,J){const te=J-Z,oe=F-Z;return te===0?0:$===1?oe/te:(Math.pow($,oe)-1)/(Math.pow($,te)-1)})(s,f,l.stops[w][0],l.stops[w+1][0]),T=l.stops[w][1],D=l.stops[w+1][1],L=zo[n.type]||Oa;return typeof T.evaluate=="function"?{evaluate(...F){const $=T.evaluate.apply(void 0,F),Z=D.evaluate.apply(void 0,F);if($!==void 0&&Z!==void 0)return L($,Z,P,l.colorSpace)}}:L(T,D,P,l.colorSpace)}function Of(l,n,s){switch(n.type){case"color":s=_r.parse(s);break;case"formatted":s=Qn.fromString(s.toString());break;case"resolvedImage":s=Ai.fromString(s.toString());break;case"padding":s=ni.parse(s);break;case"colorArray":s=Un.parse(s);break;case"numberArray":s=Si.parse(s);break;default:yr(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return Li(s,l.default,n.default)}Da.register(Cl,{error:[{kind:"error"},[mr],(l,[n])=>{throw new Br(n.evaluate(l))}],typeof:[mr,[gr],(l,[n])=>$r(er(n.evaluate(l)))],"to-rgba":[xi(Mt,4),[Fn],(l,[n])=>{const[s,f,v,w]=n.evaluate(l).rgb;return[255*s,255*f,255*v,w]}],rgb:[Fn,[Mt,Mt,Mt],wh],rgba:[Fn,[Mt,Mt,Mt,Mt],wh],has:{type:cr,overloads:[[[mr],(l,[n])=>Xa(n.evaluate(l),l.properties())],[[mr,mn],(l,[n,s])=>Xa(n.evaluate(l),s.evaluate(l))]]},get:{type:gr,overloads:[[[mr],(l,[n])=>Sh(n.evaluate(l),l.properties())],[[mr,mn],(l,[n,s])=>Sh(n.evaluate(l),s.evaluate(l))]]},"feature-state":[gr,[mr],(l,[n])=>Sh(n.evaluate(l),l.featureState||{})],properties:[mn,[],l=>l.properties()],"geometry-type":[mr,[],l=>l.geometryType()],id:[gr,[],l=>l.id()],zoom:[Mt,[],l=>l.globals.zoom],"heatmap-density":[Mt,[],l=>l.globals.heatmapDensity||0],elevation:[Mt,[],l=>l.globals.elevation||0],"line-progress":[Mt,[],l=>l.globals.lineProgress||0],accumulated:[gr,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[Mt,di(Mt),(l,n)=>{let s=0;for(const f of n)s+=f.evaluate(l);return s}],"*":[Mt,di(Mt),(l,n)=>{let s=1;for(const f of n)s*=f.evaluate(l);return s}],"-":{type:Mt,overloads:[[[Mt,Mt],(l,[n,s])=>n.evaluate(l)-s.evaluate(l)],[[Mt],(l,[n])=>-n.evaluate(l)]]},"/":[Mt,[Mt,Mt],(l,[n,s])=>n.evaluate(l)/s.evaluate(l)],"%":[Mt,[Mt,Mt],(l,[n,s])=>n.evaluate(l)%s.evaluate(l)],ln2:[Mt,[],()=>Math.LN2],pi:[Mt,[],()=>Math.PI],e:[Mt,[],()=>Math.E],"^":[Mt,[Mt,Mt],(l,[n,s])=>Math.pow(n.evaluate(l),s.evaluate(l))],sqrt:[Mt,[Mt],(l,[n])=>Math.sqrt(n.evaluate(l))],log10:[Mt,[Mt],(l,[n])=>Math.log(n.evaluate(l))/Math.LN10],ln:[Mt,[Mt],(l,[n])=>Math.log(n.evaluate(l))],log2:[Mt,[Mt],(l,[n])=>Math.log(n.evaluate(l))/Math.LN2],sin:[Mt,[Mt],(l,[n])=>Math.sin(n.evaluate(l))],cos:[Mt,[Mt],(l,[n])=>Math.cos(n.evaluate(l))],tan:[Mt,[Mt],(l,[n])=>Math.tan(n.evaluate(l))],asin:[Mt,[Mt],(l,[n])=>Math.asin(n.evaluate(l))],acos:[Mt,[Mt],(l,[n])=>Math.acos(n.evaluate(l))],atan:[Mt,[Mt],(l,[n])=>Math.atan(n.evaluate(l))],min:[Mt,di(Mt),(l,n)=>Math.min(...n.map((s=>s.evaluate(l))))],max:[Mt,di(Mt),(l,n)=>Math.max(...n.map((s=>s.evaluate(l))))],abs:[Mt,[Mt],(l,[n])=>Math.abs(n.evaluate(l))],round:[Mt,[Mt],(l,[n])=>{const s=n.evaluate(l);return s<0?-Math.round(-s):Math.round(s)}],floor:[Mt,[Mt],(l,[n])=>Math.floor(n.evaluate(l))],ceil:[Mt,[Mt],(l,[n])=>Math.ceil(n.evaluate(l))],"filter-==":[cr,[mr,gr],(l,[n,s])=>l.properties()[n.value]===s.value],"filter-id-==":[cr,[gr],(l,[n])=>l.id()===n.value],"filter-type-==":[cr,[mr],(l,[n])=>l.geometryType()===n.value],"filter-<":[cr,[mr,gr],(l,[n,s])=>{const f=l.properties()[n.value],v=s.value;return typeof f==typeof v&&f<v}],"filter-id-<":[cr,[gr],(l,[n])=>{const s=l.id(),f=n.value;return typeof s==typeof f&&s<f}],"filter->":[cr,[mr,gr],(l,[n,s])=>{const f=l.properties()[n.value],v=s.value;return typeof f==typeof v&&f>v}],"filter-id->":[cr,[gr],(l,[n])=>{const s=l.id(),f=n.value;return typeof s==typeof f&&s>f}],"filter-<=":[cr,[mr,gr],(l,[n,s])=>{const f=l.properties()[n.value],v=s.value;return typeof f==typeof v&&f<=v}],"filter-id-<=":[cr,[gr],(l,[n])=>{const s=l.id(),f=n.value;return typeof s==typeof f&&s<=f}],"filter->=":[cr,[mr,gr],(l,[n,s])=>{const f=l.properties()[n.value],v=s.value;return typeof f==typeof v&&f>=v}],"filter-id->=":[cr,[gr],(l,[n])=>{const s=l.id(),f=n.value;return typeof s==typeof f&&s>=f}],"filter-has":[cr,[gr],(l,[n])=>n.value in l.properties()],"filter-has-id":[cr,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[cr,[xi(mr)],(l,[n])=>n.value.indexOf(l.geometryType())>=0],"filter-id-in":[cr,[xi(gr)],(l,[n])=>n.value.indexOf(l.id())>=0],"filter-in-small":[cr,[mr,xi(gr)],(l,[n,s])=>s.value.indexOf(l.properties()[n.value])>=0],"filter-in-large":[cr,[mr,xi(gr)],(l,[n,s])=>(function(f,v,w,P){for(;w<=P;){const T=w+P>>1;if(v[T]===f)return!0;v[T]>f?P=T-1:w=T+1}return!1})(l.properties()[n.value],s.value,0,s.value.length-1)],all:{type:cr,overloads:[[[cr,cr],(l,[n,s])=>n.evaluate(l)&&s.evaluate(l)],[di(cr),(l,n)=>{for(const s of n)if(!s.evaluate(l))return!1;return!0}]]},any:{type:cr,overloads:[[[cr,cr],(l,[n,s])=>n.evaluate(l)||s.evaluate(l)],[di(cr),(l,n)=>{for(const s of n)if(s.evaluate(l))return!0;return!1}]]},"!":[cr,[cr],(l,[n])=>!n.evaluate(l)],"is-supported-script":[cr,[mr],(l,[n])=>{const s=l.globals&&l.globals.isSupportedScript;return!s||s(n.evaluate(l))}],upcase:[mr,[mr],(l,[n])=>n.evaluate(l).toUpperCase()],downcase:[mr,[mr],(l,[n])=>n.evaluate(l).toLowerCase()],concat:[mr,di(gr),(l,n)=>n.map((s=>lr(s.evaluate(l)))).join("")],"resolved-locale":[mr,[oc],(l,[n])=>n.evaluate(l).resolvedLocale()]});class Ec{constructor(n,s,f){this.expression=n,this._warningHistory={},this._evaluator=new _f,this._defaultValue=s?(function(v){if(v.type==="color"&&Tc(v.default))return new _r(0,0,0,0);switch(v.type){case"color":return _r.parse(v.default)||null;case"padding":return ni.parse(v.default)||null;case"numberArray":return Si.parse(v.default)||null;case"colorArray":return Un.parse(v.default)||null;case"variableAnchorOffsetCollection":return Pi.parse(v.default)||null;case"projectionDefinition":return En.parse(v.default)||null;default:return v.default===void 0?null:v.default}})(s):null,this._enumValues=s&&s.type==="enum"?s.values:null,this._globalState=f}evaluateWithoutErrorHandling(n,s,f,v,w,P){return this._globalState&&(n=Ki(n,this._globalState)),this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=f,this._evaluator.canonical=v,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=P,this.expression.evaluate(this._evaluator)}evaluate(n,s,f,v,w,P){this._globalState&&(n=Ki(n,this._globalState)),this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=f||null,this._evaluator.canonical=v,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=P||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new Br(`Expected value to be one of ${Object.keys(this._enumValues).map((D=>JSON.stringify(D))).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function is(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in Cl}function jo(l,n,s){const f=new Ls(Cl,Xi,[],n?(function(w){const P={color:Fn,string:mr,number:Mt,enum:mr,boolean:cr,formatted:da,padding:Qo,numberArray:cl,colorArray:Mo,projectionDefinition:Wa,resolvedImage:Tn,variableAnchorOffsetCollection:ph};return w.type==="array"?xi(P[w.value]||gr,w.length):P[w.type]})(n):void 0),v=f.parse(l,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?Cc(new Ec(v,n,s)):Fs(f.errors)}class $s{constructor(n,s,f){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!Tl(s.expression),this.globalStateRefs=La(s.expression),this._globalState=f}evaluateWithoutErrorHandling(n,s,f,v,w,P){return this._globalState&&(n=Ki(n,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(n,s,f,v,w,P)}evaluate(n,s,f,v,w,P){return this._globalState&&(n=Ki(n,this._globalState)),this._styleExpression.evaluate(n,s,f,v,w,P)}}class Cu{constructor(n,s,f,v,w){this.kind=n,this.zoomStops=f,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!Tl(s.expression),this.globalStateRefs=La(s.expression),this.interpolationType=v,this._globalState=w}evaluateWithoutErrorHandling(n,s,f,v,w,P){return this._globalState&&(n=Ki(n,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(n,s,f,v,w,P)}evaluate(n,s,f,v,w,P){return this._globalState&&(n=Ki(n,this._globalState)),this._styleExpression.evaluate(n,s,f,v,w,P)}interpolationFactor(n,s,f){return this.interpolationType?Ci.interpolationFactor(this.interpolationType,n,s,f):0}}function ka(l,n,s){const f=jo(l,n,s);if(f.result==="error")return f;const v=f.value.expression,w=ns(v);if(!w&&!Ia(n))return Fs([new Cn("","data expressions not supported")]);const P=El(v,["zoom"]);if(!P&&!Df(n))return Fs([new Cn("","zoom expressions not supported")]);const T=oo(v);return T||P?T instanceof Cn?Fs([T]):T instanceof Ci&&!Au(n)?Fs([new Cn("",'"interpolate" expressions cannot be used with this property')]):Cc(T?new Cu(w?"camera":"composite",f.value,T.labels,T instanceof Ci?T.interpolation:void 0,s):new $s(w?"constant":"source",f.value,s)):Fs([new Cn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class zi{constructor(n,s){this._parameters=n,this._specification=s,Ii(this,Ph(this._parameters,this._specification))}static deserialize(n){return new zi(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function oo(l){let n=null;if(l instanceof ml)n=oo(l.result);else if(l instanceof _l){for(const s of l.args)if(n=oo(s),n)break}else(l instanceof On||l instanceof Ci)&&l.input instanceof Da&&l.input.name==="zoom"&&(n=l);return n instanceof Cn||l.eachChild((s=>{const f=oo(s);f instanceof Cn?n=f:!n&&f?n=new Cn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&f&&n!==f&&(n=new Cn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n}function La(l,n=new Set){return l instanceof Ac&&n.add(l.key),l.eachChild((s=>{La(s,n)})),n}function Ki(l,n){const{zoom:s,heatmapDensity:f,elevation:v,lineProgress:w,isSupportedScript:P,accumulated:T}=l??{};return{zoom:s,heatmapDensity:f,elevation:v,lineProgress:w,isSupportedScript:P,accumulated:T,globalState:n}}function so(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const n of l.slice(1))if(!so(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Ch={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function as(l,n){if(l==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};so(l)||(l=gn(l));const s=jo(l,Ch,n);if(s.result==="error")throw new Error(s.value.map((f=>`${f.key}: ${f.message}`)).join(", "));return{filter:(f,v,w)=>s.value.evaluate(f,v,{},w),needGeometry:ii(l),getGlobalStateRefs:()=>La(s.value.expression)}}function Mc(l,n){return l<n?-1:l>n?1:0}function ii(l){if(!Array.isArray(l))return!1;if(l[0]==="within"||l[0]==="distance")return!0;for(let n=1;n<l.length;n++)if(ii(l[n]))return!0;return!1}function gn(l){if(!l)return!0;const n=l[0];return l.length<=1?n!=="any":n==="=="?jr(l[1],l[2],"=="):n==="!="?Tu(jr(l[1],l[2],"==")):n==="<"||n===">"||n==="<="||n===">="?jr(l[1],l[2],n):n==="any"?(s=l.slice(1),["any"].concat(s.map(gn))):n==="all"?["all"].concat(l.slice(1).map(gn)):n==="none"?["all"].concat(l.slice(1).map(gn).map(Tu)):n==="in"?Vs(l[1],l.slice(2)):n==="!in"?Tu(Vs(l[1],l.slice(2))):n==="has"?lo(l[1]):n!=="!has"||Tu(lo(l[1]));var s}function jr(l,n,s){switch(l){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,l,n]}}function Vs(l,n){if(n.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some((s=>typeof s!=typeof n[0]))?["filter-in-large",l,["literal",n.sort(Mc)]]:["filter-in-small",l,["literal",n]]}}function lo(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function Tu(l){return["!",l]}function os(l){const n=typeof l;if(n==="number"||n==="boolean"||n==="string"||l==null)return JSON.stringify(l);if(Array.isArray(l)){let v="[";for(const w of l)v+=`${os(w)},`;return`${v}]`}const s=Object.keys(l).sort();let f="{";for(let v=0;v<s.length;v++)f+=`${JSON.stringify(s[v])}:${os(l[s[v]])},`;return`${f}}`}function kf(l){let n="";for(const s of ar)n+=`/${os(l[s])}`;return n}function Th(l){const n=l.value;return n?[new vt(l.key,n,"constants have been deprecated as of v8")]:[]}function Gr(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function uo(l){if(Array.isArray(l))return l.map(uo);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const n={};for(const s in l)n[s]=uo(l[s]);return n}return Gr(l)}function ma(l){const n=l.key,s=l.value,f=l.valueSpec||{},v=l.objectElementValidators||{},w=l.style,P=l.styleSpec,T=l.validateSpec;let D=[];const L=yr(s);if(L!=="object")return[new vt(n,s,`object expected, ${L} found`)];for(const F in s){const $=F.split(".")[0],Z=dl(f,$)||f["*"];let J;if(dl(v,$))J=v[$];else if(dl(f,$))J=T;else if(v["*"])J=v["*"];else{if(!f["*"]){D.push(new vt(n,s[F],`unknown property "${F}"`));continue}J=T}D=D.concat(J({key:(n&&`${n}.`)+F,value:s[F],valueSpec:Z,style:w,styleSpec:P,object:s,objectKey:F,validateSpec:T},s))}for(const F in f)v[F]||f[F].required&&f[F].default===void 0&&s[F]===void 0&&D.push(new vt(n,s,`missing required property "${F}"`));return D}function Hs(l){const n=l.value,s=l.valueSpec,f=l.style,v=l.styleSpec,w=l.key,P=l.arrayElementValidator||l.validateSpec;if(yr(n)!=="array")return[new vt(w,n,`array expected, ${yr(n)} found`)];if(s.length&&n.length!==s.length)return[new vt(w,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new vt(w,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let T={type:s.value,values:s.values};v.$version<7&&(T.function=s.function),yr(s.value)==="object"&&(T=s.value);let D=[];for(let L=0;L<n.length;L++)D=D.concat(P({array:n,arrayIndex:L,value:n[L],valueSpec:T,validateSpec:l.validateSpec,style:f,styleSpec:v,key:`${w}[${L}]`}));return D}function Eu(l){const n=l.key,s=l.value,f=l.valueSpec;let v=yr(s);return v==="number"&&s!=s&&(v="NaN"),v!=="number"?[new vt(n,s,`number expected, ${v} found`)]:"minimum"in f&&s<f.minimum?[new vt(n,s,`${s} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&s>f.maximum?[new vt(n,s,`${s} is greater than the maximum value ${f.maximum}`)]:[]}function ss(l){const n=l.valueSpec,s=Gr(l.value.type);let f,v,w,P={};const T=s!=="categorical"&&l.value.property===void 0,D=!T,L=yr(l.value.stops)==="array"&&yr(l.value.stops[0])==="array"&&yr(l.value.stops[0][0])==="object",F=ma({key:l.key,value:l.value,valueSpec:l.styleSpec.function,validateSpec:l.validateSpec,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(J){if(s==="identity")return[new vt(J.key,J.value,'identity function may not have a "stops" property')];let te=[];const oe=J.value;return te=te.concat(Hs({key:J.key,value:oe,valueSpec:J.valueSpec,validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec,arrayElementValidator:$})),yr(oe)==="array"&&oe.length===0&&te.push(new vt(J.key,oe,"array must have at least one stop")),te},default:function(J){return J.validateSpec({key:J.key,value:J.value,valueSpec:n,validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec})}}});return s==="identity"&&T&&F.push(new vt(l.key,l.value,'missing required property "property"')),s==="identity"||l.value.stops||F.push(new vt(l.key,l.value,'missing required property "stops"')),s==="exponential"&&l.valueSpec.expression&&!Au(l.valueSpec)&&F.push(new vt(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(D&&!Ia(l.valueSpec)?F.push(new vt(l.key,l.value,"property functions not supported")):T&&!Df(l.valueSpec)&&F.push(new vt(l.key,l.value,"zoom functions not supported"))),s!=="categorical"&&!L||l.value.property!==void 0||F.push(new vt(l.key,l.value,'"property" property is required')),F;function $(J){let te=[];const oe=J.value,ue=J.key;if(yr(oe)!=="array")return[new vt(ue,oe,`array expected, ${yr(oe)} found`)];if(oe.length!==2)return[new vt(ue,oe,`array length 2 expected, length ${oe.length} found`)];if(L){if(yr(oe[0])!=="object")return[new vt(ue,oe,`object expected, ${yr(oe[0])} found`)];if(oe[0].zoom===void 0)return[new vt(ue,oe,"object stop key must have zoom")];if(oe[0].value===void 0)return[new vt(ue,oe,"object stop key must have value")];if(w&&w>Gr(oe[0].zoom))return[new vt(ue,oe[0].zoom,"stop zoom values must appear in ascending order")];Gr(oe[0].zoom)!==w&&(w=Gr(oe[0].zoom),v=void 0,P={}),te=te.concat(ma({key:`${ue}[0]`,value:oe[0],valueSpec:{zoom:{}},validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec,objectElementValidators:{zoom:Eu,value:Z}}))}else te=te.concat(Z({key:`${ue}[0]`,value:oe[0],validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec},oe));return is(uo(oe[1]))?te.concat([new vt(`${ue}[1]`,oe[1],"expressions are not allowed in function stops.")]):te.concat(J.validateSpec({key:`${ue}[1]`,value:oe[1],valueSpec:n,validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec}))}function Z(J,te){const oe=yr(J.value),ue=Gr(J.value),de=J.value!==null?J.value:te;if(f){if(oe!==f)return[new vt(J.key,de,`${oe} stop domain type must match previous stop domain type ${f}`)]}else f=oe;if(oe!=="number"&&oe!=="string"&&oe!=="boolean")return[new vt(J.key,de,"stop domain value must be a number, string, or boolean")];if(oe!=="number"&&s!=="categorical"){let Le=`number expected, ${oe} found`;return Ia(n)&&s===void 0&&(Le+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new vt(J.key,de,Le)]}return s!=="categorical"||oe!=="number"||isFinite(ue)&&Math.floor(ue)===ue?s!=="categorical"&&oe==="number"&&v!==void 0&&ue<v?[new vt(J.key,de,"stop domain values must appear in ascending order")]:(v=ue,s==="categorical"&&ue in P?[new vt(J.key,de,"stop domain values must be unique")]:(P[ue]=!0,[])):[new vt(J.key,de,`integer expected, found ${ue}`)]}}function Yi(l){const n=(l.expressionContext==="property"?ka:jo)(uo(l.value),l.valueSpec);if(n.result==="error")return n.value.map((f=>new vt(`${l.key}${f.key}`,l.value,f.message)));const s=n.value.expression||n.value._styleExpression.expression;if(l.expressionContext==="property"&&l.propertyKey==="text-font"&&!s.outputDefined())return[new vt(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if(l.expressionContext==="property"&&l.propertyType==="layout"&&!Tl(s))return[new vt(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if(l.expressionContext==="filter"&&!Tl(s))return[new vt(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&l.expressionContext.indexOf("cluster")===0){if(!El(s,["zoom","feature-state"]))return[new vt(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(l.expressionContext==="cluster-initial"&&!ns(s))return[new vt(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ga(l){const n=l.key,s=l.value,f=yr(s);return f!=="string"?[new vt(n,s,`color expected, ${f} found`)]:_r.parse(String(s))?[]:[new vt(n,s,`color expected, "${s}" found`)]}function za(l){const n=l.key,s=l.value,f=l.valueSpec,v=[];return Array.isArray(f.values)?f.values.indexOf(Gr(s))===-1&&v.push(new vt(n,s,`expected one of [${f.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(f.values).indexOf(Gr(s))===-1&&v.push(new vt(n,s,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(s)} found`)),v}function Rc(l){return so(uo(l.value))?Yi(Ii({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Eh(l)}function Eh(l){const n=l.value,s=l.key;if(yr(n)!=="array")return[new vt(s,n,`array expected, ${yr(n)} found`)];const f=l.styleSpec;let v,w=[];if(n.length<1)return[new vt(s,n,"filter array must have at least 1 element")];switch(w=w.concat(za({key:`${s}[0]`,value:n[0],valueSpec:f.filter_operator,style:l.style,styleSpec:l.styleSpec})),Gr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Gr(n[1])==="$type"&&w.push(new vt(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&w.push(new vt(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(v=yr(n[1]),v!=="string"&&w.push(new vt(`${s}[1]`,n[1],`string expected, ${v} found`)));for(let P=2;P<n.length;P++)v=yr(n[P]),Gr(n[1])==="$type"?w=w.concat(za({key:`${s}[${P}]`,value:n[P],valueSpec:f.geometry_type,style:l.style,styleSpec:l.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&w.push(new vt(`${s}[${P}]`,n[P],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let P=1;P<n.length;P++)w=w.concat(Eh({key:`${s}[${P}]`,value:n[P],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":v=yr(n[1]),n.length!==2?w.push(new vt(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):v!=="string"&&w.push(new vt(`${s}[1]`,n[1],`string expected, ${v} found`))}return w}function Mu(l,n){const s=l.key,f=l.validateSpec,v=l.style,w=l.styleSpec,P=l.value,T=l.objectKey,D=w[`${n}_${l.layerType}`];if(!D)return[];const L=T.match(/^(.*)-transition$/);if(n==="paint"&&L&&D[L[1]]&&D[L[1]].transition)return f({key:s,value:P,valueSpec:w.transition,style:v,styleSpec:w});const F=l.valueSpec||D[T];if(!F)return[new vt(s,P,`unknown property "${T}"`)];let $;if(yr(P)==="string"&&Ia(F)&&!F.tokens&&($=/^{([^}]+)}$/.exec(P)))return[new vt(s,P,`"${T}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify($[1])} }\`.`)];const Z=[];return l.layerType==="symbol"&&(T==="text-field"&&v&&!v.glyphs&&Z.push(new vt(s,P,'use of "text-field" requires a style "glyphs" property')),T==="text-font"&&Tc(uo(P))&&Gr(P.type)==="identity"&&Z.push(new vt(s,P,'"text-font" does not support identity functions'))),Z.concat(f({key:l.key,value:P,valueSpec:F,style:v,styleSpec:w,expressionContext:"property",propertyType:n,propertyKey:T}))}function Dc(l){return Mu(l,"paint")}function qs(l){return Mu(l,"layout")}function $n(l){let n=[];const s=l.value,f=l.key,v=l.style,w=l.styleSpec;if(yr(s)!=="object")return[new vt(f,s,`object expected, ${yr(s)} found`)];s.type||s.ref||n.push(new vt(f,s,'either "type" or "ref" is required'));let P=Gr(s.type);const T=Gr(s.ref);if(s.id){const D=Gr(s.id);for(let L=0;L<l.arrayIndex;L++){const F=v.layers[L];Gr(F.id)===D&&n.push(new vt(f,s.id,`duplicate layer id "${s.id}", previously used at line ${F.id.__line__}`))}}if("ref"in s){let D;["type","source","source-layer","filter","layout"].forEach((L=>{L in s&&n.push(new vt(f,s[L],`"${L}" is prohibited for ref layers`))})),v.layers.forEach((L=>{Gr(L.id)===T&&(D=L)})),D?D.ref?n.push(new vt(f,s.ref,"ref cannot reference another ref layer")):P=Gr(D.type):n.push(new vt(f,s.ref,`ref layer "${T}" not found`))}else if(P!=="background")if(s.source){const D=v.sources&&v.sources[s.source],L=D&&Gr(D.type);D?L==="vector"&&P==="raster"?n.push(new vt(f,s.source,`layer "${s.id}" requires a raster source`)):L!=="raster-dem"&&P==="hillshade"||L!=="raster-dem"&&P==="color-relief"?n.push(new vt(f,s.source,`layer "${s.id}" requires a raster-dem source`)):L==="raster"&&P!=="raster"?n.push(new vt(f,s.source,`layer "${s.id}" requires a vector source`)):L!=="vector"||s["source-layer"]?L==="raster-dem"&&P!=="hillshade"&&P!=="color-relief"?n.push(new vt(f,s.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):P!=="line"||!s.paint||!s.paint["line-gradient"]||L==="geojson"&&D.lineMetrics||n.push(new vt(f,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new vt(f,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new vt(f,s.source,`source "${s.source}" not found`))}else n.push(new vt(f,s,'missing required property "source"'));return n=n.concat(ma({key:f,value:s,valueSpec:w.layer,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*":()=>[],type:()=>l.validateSpec({key:`${f}.type`,value:s.type,valueSpec:w.layer.type,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,object:s,objectKey:"type"}),filter:Rc,layout:D=>ma({layer:s,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,validateSpec:D.validateSpec,objectElementValidators:{"*":L=>qs(Ii({layerType:P},L))}}),paint:D=>ma({layer:s,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,validateSpec:D.validateSpec,objectElementValidators:{"*":L=>Dc(Ii({layerType:P},L))}})}})),n}function ya(l){const n=l.value,s=l.key,f=yr(n);return f!=="string"?[new vt(s,n,`string expected, ${f} found`)]:[]}const Qi={promoteId:function({key:l,value:n}){if(yr(n)==="string")return ya({key:l,value:n});{const s=[];for(const f in n)s.push(...ya({key:`${l}.${f}`,value:n[f]}));return s}}};function Ru(l){const n=l.value,s=l.key,f=l.styleSpec,v=l.style,w=l.validateSpec;if(!n.type)return[new vt(s,n,'"type" is required')];const P=Gr(n.type);let T;switch(P){case"vector":case"raster":return T=ma({key:s,value:n,valueSpec:f[`source_${P.replace("-","_")}`],style:l.style,styleSpec:f,objectElementValidators:Qi,validateSpec:w}),T;case"raster-dem":return T=(function(D){var L;const F=(L=D.sourceName)!==null&&L!==void 0?L:"",$=D.value,Z=D.styleSpec,J=Z.source_raster_dem,te=D.style;let oe=[];const ue=yr($);if($===void 0)return oe;if(ue!=="object")return oe.push(new vt("source_raster_dem",$,`object expected, ${ue} found`)),oe;const de=Gr($.encoding)==="custom",Le=["redFactor","greenFactor","blueFactor","baseShift"],xe=D.value.encoding?`"${D.value.encoding}"`:"Default";for(const Ce in $)!de&&Le.includes(Ce)?oe.push(new vt(Ce,$[Ce],`In "${F}": "${Ce}" is only valid when "encoding" is set to "custom". ${xe} encoding found`)):J[Ce]?oe=oe.concat(D.validateSpec({key:Ce,value:$[Ce],valueSpec:J[Ce],validateSpec:D.validateSpec,style:te,styleSpec:Z})):oe.push(new vt(Ce,$[Ce],`unknown property "${Ce}"`));return oe})({sourceName:s,value:n,style:l.style,styleSpec:f,validateSpec:w}),T;case"geojson":if(T=ma({key:s,value:n,valueSpec:f.source_geojson,style:v,styleSpec:f,validateSpec:w,objectElementValidators:Qi}),n.cluster)for(const D in n.clusterProperties){const[L,F]=n.clusterProperties[D],$=typeof L=="string"?[L,["accumulated"],["get",D]]:L;T.push(...Yi({key:`${s}.${D}.map`,value:F,expressionContext:"cluster-map"})),T.push(...Yi({key:`${s}.${D}.reduce`,value:$,expressionContext:"cluster-reduce"}))}return T;case"video":return ma({key:s,value:n,valueSpec:f.source_video,style:v,validateSpec:w,styleSpec:f});case"image":return ma({key:s,value:n,valueSpec:f.source_image,style:v,validateSpec:w,styleSpec:f});case"canvas":return[new vt(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return za({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Lf(l){const n=l.value,s=l.styleSpec,f=s.light,v=l.style;let w=[];const P=yr(n);if(n===void 0)return w;if(P!=="object")return w=w.concat([new vt("light",n,`object expected, ${P} found`)]),w;for(const T in n){const D=T.match(/^(.*)-transition$/);w=w.concat(D&&f[D[1]]&&f[D[1]].transition?l.validateSpec({key:T,value:n[T],valueSpec:s.transition,validateSpec:l.validateSpec,style:v,styleSpec:s}):f[T]?l.validateSpec({key:T,value:n[T],valueSpec:f[T],validateSpec:l.validateSpec,style:v,styleSpec:s}):[new vt(T,n[T],`unknown property "${T}"`)])}return w}function ip(l){const n=l.value,s=l.styleSpec,f=s.sky,v=l.style,w=yr(n);if(n===void 0)return[];if(w!=="object")return[new vt("sky",n,`object expected, ${w} found`)];let P=[];for(const T in n)P=P.concat(f[T]?l.validateSpec({key:T,value:n[T],valueSpec:f[T],style:v,styleSpec:s}):[new vt(T,n[T],`unknown property "${T}"`)]);return P}function Jn(l){const n=l.value,s=l.styleSpec,f=s.terrain,v=l.style;let w=[];const P=yr(n);if(n===void 0)return w;if(P!=="object")return w=w.concat([new vt("terrain",n,`object expected, ${P} found`)]),w;for(const T in n)w=w.concat(f[T]?l.validateSpec({key:T,value:n[T],valueSpec:f[T],validateSpec:l.validateSpec,style:v,styleSpec:s}):[new vt(T,n[T],`unknown property "${T}"`)]);return w}function Gs(l){let n=[];const s=l.value,f=l.key;if(Array.isArray(s)){const v=[],w=[];for(const P in s)s[P].id&&v.includes(s[P].id)&&n.push(new vt(f,s,`all the sprites' ids must be unique, but ${s[P].id} is duplicated`)),v.push(s[P].id),s[P].url&&w.includes(s[P].url)&&n.push(new vt(f,s,`all the sprites' URLs must be unique, but ${s[P].url} is duplicated`)),w.push(s[P].url),n=n.concat(ma({key:`${f}[${P}]`,value:s[P],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:l.validateSpec}));return n}return ya({key:f,value:s})}function Ml(l){return n=l.value,n&&n.constructor===Object?[]:[new vt(l.key,l.value,`object expected, ${yr(l.value)} found`)];var n}const Ws={"*":()=>[],array:Hs,boolean:function(l){const n=l.value,s=l.key,f=yr(n);return f!=="boolean"?[new vt(s,n,`boolean expected, ${f} found`)]:[]},number:Eu,color:ga,constants:Th,enum:za,filter:Rc,function:ss,layer:$n,object:ma,source:Ru,light:Lf,sky:ip,terrain:Jn,projection:function(l){const n=l.value,s=l.styleSpec,f=s.projection,v=l.style,w=yr(n);if(n===void 0)return[];if(w!=="object")return[new vt("projection",n,`object expected, ${w} found`)];let P=[];for(const T in n)P=P.concat(f[T]?l.validateSpec({key:T,value:n[T],valueSpec:f[T],style:v,styleSpec:s}):[new vt(T,n[T],`unknown property "${T}"`)]);return P},projectionDefinition:function(l){const n=l.key;let s=l.value;s=s instanceof String?s.valueOf():s;const f=yr(s);return f!=="array"||(function(v){return Array.isArray(v)&&v.length===3&&typeof v[0]=="string"&&typeof v[1]=="string"&&typeof v[2]=="number"})(s)||(function(v){return!!["interpolate","step","literal"].includes(v[0])})(s)?["array","string"].includes(f)?[]:[new vt(n,s,`projection expected, invalid type "${f}" found`)]:[new vt(n,s,`projection expected, invalid array ${JSON.stringify(s)} found`)]},string:ya,formatted:function(l){return ya(l).length===0?[]:Yi(l)},resolvedImage:function(l){return ya(l).length===0?[]:Yi(l)},padding:function(l){const n=l.key,s=l.value;if(yr(s)==="array"){if(s.length<1||s.length>4)return[new vt(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const f={type:"number"};let v=[];for(let w=0;w<s.length;w++)v=v.concat(l.validateSpec({key:`${n}[${w}]`,value:s[w],validateSpec:l.validateSpec,valueSpec:f}));return v}return Eu({key:n,value:s,valueSpec:{}})},numberArray:function(l){const n=l.key,s=l.value;if(yr(s)==="array"){const f={type:"number"};if(s.length<1)return[new vt(n,s,"array length at least 1 expected, length 0 found")];let v=[];for(let w=0;w<s.length;w++)v=v.concat(l.validateSpec({key:`${n}[${w}]`,value:s[w],validateSpec:l.validateSpec,valueSpec:f}));return v}return Eu({key:n,value:s,valueSpec:{}})},colorArray:function(l){const n=l.key,s=l.value;if(yr(s)==="array"){if(s.length<1)return[new vt(n,s,"array length at least 1 expected, length 0 found")];let f=[];for(let v=0;v<s.length;v++)f=f.concat(ga({key:`${n}[${v}]`,value:s[v]}));return f}return ga({key:n,value:s})},variableAnchorOffsetCollection:function(l){const n=l.key,s=l.value,f=yr(s),v=l.styleSpec;if(f!=="array"||s.length<1||s.length%2!=0)return[new vt(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let w=[];for(let P=0;P<s.length;P+=2)w=w.concat(za({key:`${n}[${P}]`,value:s[P],valueSpec:v.layout_symbol["text-anchor"]})),w=w.concat(Hs({key:`${n}[${P+1}]`,value:s[P+1],valueSpec:{length:2,value:"number"},validateSpec:l.validateSpec,style:l.style,styleSpec:v}));return w},sprite:Gs,state:Ml};function Du(l){const n=l.value,s=l.valueSpec,f=l.styleSpec;return l.validateSpec=Du,s.expression&&Tc(Gr(n))?ss(l):s.expression&&is(uo(n))?Yi(l):s.type&&Ws[s.type]?Ws[s.type](l):ma(Ii({},l,{valueSpec:s.type?f[s.type]:s}))}function ls(l){const n=l.value,s=l.key,f=ya(l);return f.length||(n.indexOf("{fontstack}")===-1&&f.push(new vt(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&f.push(new vt(s,n,'"glyphs" url must include a "{range}" token'))),f}function Ti(l,n=ke){let s=[];return s=s.concat(Du({key:"",value:l,valueSpec:n.$root,styleSpec:n,style:l,validateSpec:Du,objectElementValidators:{glyphs:ls,"*":()=>[]}})),l.constants&&(s=s.concat(Th({key:"constants",value:l.constants}))),zf(s)}function Ji(l){return function(n){return l({...n,validateSpec:Du})}}function zf(l){return[].concat(l).sort(((n,s)=>n.line-s.line))}function co(l){return function(...n){return zf(l.apply(this,n))}}Ti.source=co(Ji(Ru)),Ti.sprite=co(Ji(Gs)),Ti.glyphs=co(Ji(ls)),Ti.light=co(Ji(Lf)),Ti.sky=co(Ji(ip)),Ti.terrain=co(Ji(Jn)),Ti.state=co(Ji(Ml)),Ti.layer=co(Ji($n)),Ti.filter=co(Ji(Rc)),Ti.paintProperty=co(Ji(Dc)),Ti.layoutProperty=co(Ji(qs));const Rl=Ti,ho=Rl.light,Nf=Rl.sky,Mh=Rl.paintProperty,Ic=Rl.layoutProperty;function Iu(l,n){let s=!1;if(n&&n.length)for(const f of n)l.fire(new at(new Error(f.message))),s=!0;return s}class Zs{constructor(n,s,f){const v=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const P=new Int32Array(this.arrayBuffer);n=P[0],this.d=(s=P[1])+2*(f=P[2]);for(let D=0;D<this.d*this.d;D++){const L=P[3+D],F=P[3+D+1];v.push(L===F?null:P.subarray(L,F))}const T=P[3+v.length+1];this.keys=P.subarray(P[3+v.length],T),this.bboxes=P.subarray(T),this.insert=this._insertReadonly}else{this.d=s+2*f;for(let P=0;P<this.d*this.d;P++)v.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=f,this.scale=s/n,this.uid=0;const w=f/s*n;this.min=-w,this.max=n+w}insert(n,s,f,v,w){this._forEachCell(s,f,v,w,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(w)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,f,v,w,P){this.cells[w].push(P)}query(n,s,f,v,w){const P=this.min,T=this.max;if(n<=P&&s<=P&&T<=f&&T<=v&&!w)return Array.prototype.slice.call(this.keys);{const D=[];return this._forEachCell(n,s,f,v,this._queryCell,D,{},w),D}}_queryCell(n,s,f,v,w,P,T,D){const L=this.cells[w];if(L!==null){const F=this.keys,$=this.bboxes;for(let Z=0;Z<L.length;Z++){const J=L[Z];if(T[J]===void 0){const te=4*J;(D?D($[te+0],$[te+1],$[te+2],$[te+3]):n<=$[te+2]&&s<=$[te+3]&&f>=$[te+0]&&v>=$[te+1])?(T[J]=!0,P.push(F[J])):T[J]=!1}}}}_forEachCell(n,s,f,v,w,P,T,D){const L=this._convertToCellCoord(n),F=this._convertToCellCoord(s),$=this._convertToCellCoord(f),Z=this._convertToCellCoord(v);for(let J=L;J<=$;J++)for(let te=F;te<=Z;te++){const oe=this.d*te+J;if((!D||D(this._convertFromCellCoord(J),this._convertFromCellCoord(te),this._convertFromCellCoord(J+1),this._convertFromCellCoord(te+1)))&&w.call(this,n,s,f,v,oe,P,T,D))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let f=0;for(let P=0;P<this.cells.length;P++)f+=this.cells[P].length;const v=new Int32Array(s+f+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;let w=s;for(let P=0;P<n.length;P++){const T=n[P];v[3+P]=w,v.set(T,w),w+=T.length}return v[3+n.length]=w,v.set(this.keys,w),w+=this.keys.length,v[3+n.length+1]=w,v.set(this.bboxes,w),w+=this.bboxes.length,v.buffer}static serialize(n,s){const f=n.toArrayBuffer();return s&&s.push(f),{buffer:f}}static deserialize(n){return new Zs(n.buffer)}}const ea={};function Dt(l,n,s={}){if(ea[l])throw new Error(`${l} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:l,writeable:!1}),ea[l]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}Dt("Object",Object),Dt("Set",Set),Dt("TransferableGridIndex",Zs),Dt("Color",_r),Dt("Error",Error),Dt("AJAXError",_e),Dt("ResolvedImage",Ai),Dt("StylePropertyFunction",zi),Dt("StyleExpression",Ec,{omit:["_evaluator"]}),Dt("ZoomDependentExpression",Cu),Dt("ZoomConstantExpression",$s),Dt("CompoundExpression",Da,{omit:["_evaluate"]});for(const l in Cl)Cl[l]._classRegistryKey||Dt(`Expression_${l}`,Cl[l]);function Rh(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function Dl(l){return l.$name||l.constructor._classRegistryKey}function Dh(l){return!(function(n){if(n===null||typeof n!="object")return!1;const s=Dl(n);return!(!s||s==="Object")})(l)&&(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||l instanceof Error||Rh(l)||Bn(l)||ArrayBuffer.isView(l)||l instanceof ImageData)}function fo(l,n){if(Dh(l))return(Rh(l)||Bn(l))&&n&&n.push(l),ArrayBuffer.isView(l)&&n&&n.push(l.buffer),l instanceof ImageData&&n&&n.push(l.data.buffer),l;if(Array.isArray(l)){const w=[];for(const P of l)w.push(fo(P,n));return w}if(typeof l!="object")throw new Error("can't serialize object of type "+typeof l);const s=Dl(l);if(!s)throw new Error(`can't serialize object of unregistered class ${l.constructor.name}`);if(!ea[s])throw new Error(`${s} is not registered.`);const{klass:f}=ea[s],v=f.serialize?f.serialize(l,n):{};if(f.serialize){if(n&&v===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const w in l){if(!l.hasOwnProperty(w)||ea[s].omit.indexOf(w)>=0)continue;const P=l[w];v[w]=ea[s].shallow.indexOf(w)>=0?P:fo(P,n)}l instanceof Error&&(v.message=l.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(v.$name=s),v}function Il(l){if(Dh(l))return l;if(Array.isArray(l))return l.map(Il);if(typeof l!="object")throw new Error("can't deserialize object of type "+typeof l);const n=Dl(l)||"Object";if(!ea[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=ea[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(l);const f=Object.create(s.prototype);for(const v of Object.keys(l)){if(v==="$name")continue;const w=l[v];f[v]=ea[n].shallow.indexOf(v)>=0?w:Il(w)}return f}class Ih{constructor(){this.first=!0}update(n,s){const f=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=f,!0))}}const fr={"Latin-1 Supplement":l=>l>=128&&l<=255,"Hangul Jamo":l=>l>=4352&&l<=4607,Khmer:l=>l>=6016&&l<=6143,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Hiragana:l=>l>=12352&&l<=12447,Katakana:l=>l>=12448&&l<=12543,Kanbun:l=>l>=12688&&l<=12703,"CJK Strokes":l=>l>=12736&&l<=12783,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"CJK Unified Ideographs":l=>l>=19968&&l<=40959,"Hangul Syllables":l=>l>=44032&&l<=55215,"Private Use Area":l=>l>=57344&&l<=63743,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519};function Oc(l){for(const n of l)if(kc(n.charCodeAt(0)))return!0;return!1}function Oh(l){for(const n of l)if(!Ou(n.charCodeAt(0)))return!1;return!0}function Bo(l){const n=l.map((s=>{try{return new RegExp(`\\p{sc=${s}}`,"u").source}catch{return null}})).filter((s=>s));return new RegExp(n.join("|"),"u")}const us=Bo(["Arab","Dupl","Mong","Ougr","Syrc"]);function Ou(l){return!us.test(String.fromCodePoint(l))}const kh=Bo(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function kc(l){return!(l!==746&&l!==747&&(l<4352||!(fr["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||fr["CJK Compatibility"](l)||fr["CJK Strokes"](l)||!(!fr["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||l===12336)||fr["Enclosed CJK Letters and Months"](l)||fr["Ideographic Description Characters"](l)||fr.Kanbun(l)||fr.Katakana(l)&&l!==12540||!(!fr["Halfwidth and Fullwidth Forms"](l)||l===65288||l===65289||l===65293||l>=65306&&l<=65310||l===65339||l===65341||l===65343||l>=65371&&l<=65503||l===65507||l>=65512&&l<=65519)||!(!fr["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||fr["Vertical Forms"](l)||fr["Yijing Hexagram Symbols"](l)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(l))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(l))||kh.test(String.fromCodePoint(l)))))}function Ol(l){return!(kc(l)||(function(n){return!!(fr["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||fr["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||fr["Letterlike Symbols"](n)||fr["Number Forms"](n)||fr["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||fr["Control Pictures"](n)&&n!==9251||fr["Optical Character Recognition"](n)||fr["Enclosed Alphanumerics"](n)||fr["Geometric Shapes"](n)||fr["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||fr["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||fr["CJK Symbols and Punctuation"](n)||fr.Katakana(n)||fr["Private Use Area"](n)||fr["CJK Compatibility Forms"](n)||fr["Small Form Variants"](n)||fr["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)})(l))}const ku=Bo(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Lh(l){return ku.test(String.fromCodePoint(l))}function jf(l,n){return!(!n&&Lh(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||fr.Khmer(l))}function cs(l){for(const n of l)if(Lh(n.charCodeAt(0)))return!0;return!1}const po=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(l){this.pluginStatus=l.pluginStatus,this.pluginURL=l.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(l){if(po.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=l.applyArabicShaping,this.processBidirectionalText=l.processBidirectionalText,this.processStyledBidirectionalText=l.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(l,n){return c(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(l.pluginStatus!=="loading")return this.setState(l),l;const s=l.pluginURL,f=new Promise((w=>{this.loadScriptResolve=w}));n(s);const v=new Promise((w=>setTimeout((()=>w()),this.TIMEOUT)));if(yield Promise.race([f,v]),this.isParsed()){const w={pluginStatus:"loaded",pluginURL:s};return this.setState(w),w}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${s}`)}))}};class Vr{constructor(n,s){this.isSupportedScript=Bf,this.zoom=n,s?(this.now=s.now||0,this.fadeDuration=s.fadeDuration||0,this.zoomHistory=s.zoomHistory||new Ih,this.transition=s.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ih,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),f=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*s}}}function Bf(l){return(function(n,s){for(const f of n)if(!jf(f.charCodeAt(0),s))return!1;return!0})(l,po.getRTLTextPluginStatus()==="loaded")}class Lu{constructor(n,s,f){this.property=n,this.value=s,this.expression=(function(v,w,P){if(Tc(v))return new zi(v,w);if(is(v)){const T=ka(v,w,P);if(T.result==="error")throw new Error(T.value.map((D=>`${D.key}: ${D.message}`)).join(", "));return T.value}{let T=v;return w.type==="color"&&typeof v=="string"?T=_r.parse(v):w.type!=="padding"||typeof v!="number"&&!Array.isArray(v)?w.type!=="numberArray"||typeof v!="number"&&!Array.isArray(v)?w.type!=="colorArray"||typeof v!="string"&&!Array.isArray(v)?w.type==="variableAnchorOffsetCollection"&&Array.isArray(v)?T=Pi.parse(v):w.type==="projectionDefinition"&&typeof v=="string"&&(T=En.parse(v)):T=Un.parse(v):T=Si.parse(v):T=ni.parse(v),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>T}}})(s===void 0?n.specification.default:s,n.specification,f)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(n,s,f){return this.property.possiblyEvaluate(this,n,s,f)}}class mo{constructor(n,s){this.property=n,this.value=new Lu(n,void 0,s)}transitioned(n,s){return new Hr(this.property,this.value,s,Jt({},n.transition,this.transition),n.now)}untransitioned(){return new Hr(this.property,this.value,null,{},0)}}class Sr{constructor(n,s){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues),this._globalState=s}getValue(n){return He(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new mo(this._values[n].property,this._globalState)),this._values[n].value=new Lu(this._values[n].property,s===null?void 0:He(s),this._globalState)}getTransition(n){return He(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new mo(this._values[n].property,this._globalState)),this._values[n].transition=He(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const f=this.getValue(s);f!==void 0&&(n[s]=f);const v=this.getTransition(s);v!==void 0&&(n[`${s}-transition`]=v)}return n}transitioned(n,s){const f=new Vn(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].transitioned(n,s._values[v]);return f}untransitioned(){const n=new Vn(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class Hr{constructor(n,s,f,v,w){this.property=n,this.value=s,this.begin=w+v.delay||0,this.end=this.begin+v.duration||0,n.specification.transition&&(v.delay||v.duration)&&(this.prior=f)}possiblyEvaluate(n,s,f){const v=n.now||0,w=this.value.possiblyEvaluate(n,s,f),P=this.prior;if(P){if(v>this.end)return this.prior=null,w;if(this.value.isDataDriven())return this.prior=null,w;if(v<this.begin)return P.possiblyEvaluate(n,s,f);{const T=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(P.possiblyEvaluate(n,s,f),w,yt(T))}}return w}}class Vn{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,f){const v=new Fo(this._properties);for(const w of Object.keys(this._values))v._values[w]=this._values[w].possiblyEvaluate(n,s,f);return v}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class zh{constructor(n,s){this._properties=n,this._values=Object.create(n.defaultPropertyValues),this._globalState=s}hasValue(n){return this._values[n].value!==void 0}getValue(n){return He(this._values[n].value)}setValue(n,s){this._values[n]=new Lu(this._values[n].property,s===null?void 0:He(s),this._globalState)}serialize(){const n={};for(const s of Object.keys(this._values)){const f=this.getValue(s);f!==void 0&&(n[s]=f)}return n}possiblyEvaluate(n,s,f){const v=new Fo(this._properties);for(const w of Object.keys(this._values))v._values[w]=this._values[w].possiblyEvaluate(n,s,f);return v}}class ta{constructor(n,s,f){this.property=n,this.value=s,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,f,v){return this.property.evaluate(this.value,this.parameters,n,s,f,v)}}class Fo{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class zt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,f){const v=zo[this.specification.type];return v?v(n,s,f):n}}class qt{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,f,v){return new ta(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},f,v)}:n.expression,s)}interpolate(n,s,f){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new ta(this,{kind:"constant",value:void 0},n.parameters);const v=zo[this.specification.type];if(v){const w=v(n.value.value,s.value.value,f);return new ta(this,{kind:"constant",value:w},n.parameters)}return n}evaluate(n,s,f,v,w,P){return n.kind==="constant"?n.value:n.evaluate(s,f,v,w,P)}}class hs extends qt{possiblyEvaluate(n,s,f,v){if(n.value===void 0)return new ta(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const w=n.expression.evaluate(s,null,{},f,v),P=n.property.specification.type==="resolvedImage"&&typeof w!="string"?w.name:w,T=this._calculate(P,P,P,s);return new ta(this,{kind:"constant",value:T},s)}if(n.expression.kind==="camera"){const w=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new ta(this,{kind:"constant",value:w},s)}return new ta(this,n.expression,s)}evaluate(n,s,f,v,w,P){if(n.kind==="source"){const T=n.evaluate(s,f,v,w,P);return this._calculate(T,T,T,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},f,v),n.evaluate({zoom:Math.floor(s.zoom)},f,v),n.evaluate({zoom:Math.floor(s.zoom)+1},f,v),s):n.value}_calculate(n,s,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:f,to:s}}interpolate(n){return n}}class Ff{constructor(n){this.specification=n}possiblyEvaluate(n,s,f,v){if(n.value!==void 0){if(n.expression.kind==="constant"){const w=n.expression.evaluate(s,null,{},f,v);return this._calculate(w,w,w,s)}return this._calculate(n.expression.evaluate(new Vr(Math.floor(s.zoom-1),s)),n.expression.evaluate(new Vr(Math.floor(s.zoom),s)),n.expression.evaluate(new Vr(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:f,to:s}}interpolate(n){return n}}class xn{constructor(n){this.specification=n}possiblyEvaluate(n,s,f,v){return!!n.expression.evaluate(s,null,{},f,v)}interpolate(){return!1}}class pi{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const f=n[s];f.specification.overridable&&this.overridableProperties.push(s);const v=this.defaultPropertyValues[s]=new Lu(f,void 0,void 0),w=this.defaultTransitionablePropertyValues[s]=new mo(f,void 0);this.defaultTransitioningPropertyValues[s]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=v.possiblyEvaluate({})}}}Dt("DataDrivenProperty",qt),Dt("DataConstantProperty",zt),Dt("CrossFadedDataDrivenProperty",hs),Dt("CrossFadedProperty",Ff),Dt("ColorRampProperty",xn);const Nh="-transition";class Ka extends Ot{constructor(n,s,f){if(super(),this.id=n.id,this.type=n.type,this._globalState=f,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter,this._featureFilter=as(n.filter,f)),s.layout&&(this._unevaluatedLayout=new zh(s.layout,f)),s.paint)){this._transitionablePaint=new Sr(s.paint,f);for(const v in n.paint)this.setPaintProperty(v,n.paint[v],{validate:!1});for(const v in n.layout)this.setLayoutProperty(v,n.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Fo(s.paint)}}setFilter(n){this.filter=n,this._featureFilter=as(n,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}getLayoutAffectingGlobalStateRefs(){const n=new Set;if(this._unevaluatedLayout)for(const s in this._unevaluatedLayout._values){const f=this._unevaluatedLayout._values[s];for(const v of f.getGlobalStateRefs())n.add(v)}for(const s of this._featureFilter.getGlobalStateRefs())n.add(s);return n}getPaintAffectingGlobalStateRefs(){var n;const s=new globalThis.Map;if(this._transitionablePaint)for(const f in this._transitionablePaint._values){const v=this._transitionablePaint._values[f].value;for(const w of v.getGlobalStateRefs()){const P=(n=s.get(w))!==null&&n!==void 0?n:[];P.push({name:f,value:v.value}),s.set(w,P)}}return s}setLayoutProperty(n,s,f={}){s!=null&&this._validate(Ic,`layers.${this.id}.layout.${n}`,n,s,f)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(Nh)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,f={}){if(s!=null&&this._validate(Mh,`layers.${this.id}.paint.${n}`,n,s,f))return!1;if(n.endsWith(Nh))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const v=this._transitionablePaint._values[n],w=v.property.specification["property-type"]==="cross-faded-data-driven",P=v.value.isDataDriven(),T=v.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const D=this._transitionablePaint._values[n].value;return D.isDataDriven()||P||w||this._handleOverridablePaintPropertyUpdate(n,T,D)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,f){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Nt(n,((s,f)=>!(s===void 0||f==="layout"&&!Object.keys(s).length||f==="paint"&&!Object.keys(s).length)))}_validate(n,s,f,v,w={}){return(!w||w.validate!==!1)&&Iu(this,n.call(Rl,{key:s,layerType:this.type,objectKey:f,value:v,styleSpec:ke,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof ta&&Ia(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const Xs={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class zu{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class tn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function wn(l,n=1){let s=0,f=0;return{members:l.map((v=>{const w=Xs[v.type].BYTES_PER_ELEMENT,P=s=Nu(s,Math.max(n,w)),T=v.components||1;return f=Math.max(f,w),s+=w*T,{name:v.name,type:v.type,components:T,offset:P}})),size:Nu(s,Math.max(f,n)),alignment:n}}function Nu(l,n){return Math.ceil(l/n)*n}class mi extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const f=this.length;return this.resize(f+1),this.emplace(f,n,s)}emplace(n,s,f){const v=2*n;return this.int16[v+0]=s,this.int16[v+1]=f,n}}mi.prototype.bytesPerElement=4,Dt("StructArrayLayout2i4",mi);class cn extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,f)}emplace(n,s,f,v){const w=3*n;return this.int16[w+0]=s,this.int16[w+1]=f,this.int16[w+2]=v,n}}cn.prototype.bytesPerElement=6,Dt("StructArrayLayout3i6",cn);class fs extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,f,v){const w=this.length;return this.resize(w+1),this.emplace(w,n,s,f,v)}emplace(n,s,f,v,w){const P=4*n;return this.int16[P+0]=s,this.int16[P+1]=f,this.int16[P+2]=v,this.int16[P+3]=w,n}}fs.prototype.bytesPerElement=8,Dt("StructArrayLayout4i8",fs);class kl extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,w,P){const T=this.length;return this.resize(T+1),this.emplace(T,n,s,f,v,w,P)}emplace(n,s,f,v,w,P,T){const D=6*n;return this.int16[D+0]=s,this.int16[D+1]=f,this.int16[D+2]=v,this.int16[D+3]=w,this.int16[D+4]=P,this.int16[D+5]=T,n}}kl.prototype.bytesPerElement=12,Dt("StructArrayLayout2i4i12",kl);class Ll extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,w,P){const T=this.length;return this.resize(T+1),this.emplace(T,n,s,f,v,w,P)}emplace(n,s,f,v,w,P,T){const D=4*n,L=8*n;return this.int16[D+0]=s,this.int16[D+1]=f,this.uint8[L+4]=v,this.uint8[L+5]=w,this.uint8[L+6]=P,this.uint8[L+7]=T,n}}Ll.prototype.bytesPerElement=8,Dt("StructArrayLayout2i4ub8",Ll);class go extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const f=this.length;return this.resize(f+1),this.emplace(f,n,s)}emplace(n,s,f){const v=2*n;return this.float32[v+0]=s,this.float32[v+1]=f,n}}go.prototype.bytesPerElement=8,Dt("StructArrayLayout2f8",go);class yo extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,w,P,T,D,L,F){const $=this.length;return this.resize($+1),this.emplace($,n,s,f,v,w,P,T,D,L,F)}emplace(n,s,f,v,w,P,T,D,L,F,$){const Z=10*n;return this.uint16[Z+0]=s,this.uint16[Z+1]=f,this.uint16[Z+2]=v,this.uint16[Z+3]=w,this.uint16[Z+4]=P,this.uint16[Z+5]=T,this.uint16[Z+6]=D,this.uint16[Z+7]=L,this.uint16[Z+8]=F,this.uint16[Z+9]=$,n}}yo.prototype.bytesPerElement=20,Dt("StructArrayLayout10ui20",yo);class ju extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,w,P,T,D,L,F,$,Z){const J=this.length;return this.resize(J+1),this.emplace(J,n,s,f,v,w,P,T,D,L,F,$,Z)}emplace(n,s,f,v,w,P,T,D,L,F,$,Z,J){const te=12*n;return this.int16[te+0]=s,this.int16[te+1]=f,this.int16[te+2]=v,this.int16[te+3]=w,this.uint16[te+4]=P,this.uint16[te+5]=T,this.uint16[te+6]=D,this.uint16[te+7]=L,this.int16[te+8]=F,this.int16[te+9]=$,this.int16[te+10]=Z,this.int16[te+11]=J,n}}ju.prototype.bytesPerElement=24,Dt("StructArrayLayout4i4ui4i24",ju);class Bu extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,f)}emplace(n,s,f,v){const w=3*n;return this.float32[w+0]=s,this.float32[w+1]=f,this.float32[w+2]=v,n}}Bu.prototype.bytesPerElement=12,Dt("StructArrayLayout3f12",Bu);class Lc extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}Lc.prototype.bytesPerElement=4,Dt("StructArrayLayout1ul4",Lc);class b extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,w,P,T,D,L){const F=this.length;return this.resize(F+1),this.emplace(F,n,s,f,v,w,P,T,D,L)}emplace(n,s,f,v,w,P,T,D,L,F){const $=10*n,Z=5*n;return this.int16[$+0]=s,this.int16[$+1]=f,this.int16[$+2]=v,this.int16[$+3]=w,this.int16[$+4]=P,this.int16[$+5]=T,this.uint32[Z+3]=D,this.uint16[$+8]=L,this.uint16[$+9]=F,n}}b.prototype.bytesPerElement=20,Dt("StructArrayLayout6i1ul2ui20",b);class t extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,w,P){const T=this.length;return this.resize(T+1),this.emplace(T,n,s,f,v,w,P)}emplace(n,s,f,v,w,P,T){const D=6*n;return this.int16[D+0]=s,this.int16[D+1]=f,this.int16[D+2]=v,this.int16[D+3]=w,this.int16[D+4]=P,this.int16[D+5]=T,n}}t.prototype.bytesPerElement=12,Dt("StructArrayLayout2i2i2i12",t);class u extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,w){const P=this.length;return this.resize(P+1),this.emplace(P,n,s,f,v,w)}emplace(n,s,f,v,w,P){const T=4*n,D=8*n;return this.float32[T+0]=s,this.float32[T+1]=f,this.float32[T+2]=v,this.int16[D+6]=w,this.int16[D+7]=P,n}}u.prototype.bytesPerElement=16,Dt("StructArrayLayout2f1f2i16",u);class d extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,w,P){const T=this.length;return this.resize(T+1),this.emplace(T,n,s,f,v,w,P)}emplace(n,s,f,v,w,P,T){const D=16*n,L=4*n,F=8*n;return this.uint8[D+0]=s,this.uint8[D+1]=f,this.float32[L+1]=v,this.float32[L+2]=w,this.int16[F+6]=P,this.int16[F+7]=T,n}}d.prototype.bytesPerElement=16,Dt("StructArrayLayout2ub2f2i16",d);class _ extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,f)}emplace(n,s,f,v){const w=3*n;return this.uint16[w+0]=s,this.uint16[w+1]=f,this.uint16[w+2]=v,n}}_.prototype.bytesPerElement=6,Dt("StructArrayLayout3ui6",_);class S extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,f,v,w,P,T,D,L,F,$,Z,J,te,oe,ue,de){const Le=this.length;return this.resize(Le+1),this.emplace(Le,n,s,f,v,w,P,T,D,L,F,$,Z,J,te,oe,ue,de)}emplace(n,s,f,v,w,P,T,D,L,F,$,Z,J,te,oe,ue,de,Le){const xe=24*n,Ce=12*n,Ge=48*n;return this.int16[xe+0]=s,this.int16[xe+1]=f,this.uint16[xe+2]=v,this.uint16[xe+3]=w,this.uint32[Ce+2]=P,this.uint32[Ce+3]=T,this.uint32[Ce+4]=D,this.uint16[xe+10]=L,this.uint16[xe+11]=F,this.uint16[xe+12]=$,this.float32[Ce+7]=Z,this.float32[Ce+8]=J,this.uint8[Ge+36]=te,this.uint8[Ge+37]=oe,this.uint8[Ge+38]=ue,this.uint32[Ce+10]=de,this.int16[xe+22]=Le,n}}S.prototype.bytesPerElement=48,Dt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",S);class A extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,f,v,w,P,T,D,L,F,$,Z,J,te,oe,ue,de,Le,xe,Ce,Ge,Ye,dt,Tt,_t,Et,Vt,bt){const wt=this.length;return this.resize(wt+1),this.emplace(wt,n,s,f,v,w,P,T,D,L,F,$,Z,J,te,oe,ue,de,Le,xe,Ce,Ge,Ye,dt,Tt,_t,Et,Vt,bt)}emplace(n,s,f,v,w,P,T,D,L,F,$,Z,J,te,oe,ue,de,Le,xe,Ce,Ge,Ye,dt,Tt,_t,Et,Vt,bt,wt){const tt=32*n,Qt=16*n;return this.int16[tt+0]=s,this.int16[tt+1]=f,this.int16[tt+2]=v,this.int16[tt+3]=w,this.int16[tt+4]=P,this.int16[tt+5]=T,this.int16[tt+6]=D,this.int16[tt+7]=L,this.uint16[tt+8]=F,this.uint16[tt+9]=$,this.uint16[tt+10]=Z,this.uint16[tt+11]=J,this.uint16[tt+12]=te,this.uint16[tt+13]=oe,this.uint16[tt+14]=ue,this.uint16[tt+15]=de,this.uint16[tt+16]=Le,this.uint16[tt+17]=xe,this.uint16[tt+18]=Ce,this.uint16[tt+19]=Ge,this.uint16[tt+20]=Ye,this.uint16[tt+21]=dt,this.uint16[tt+22]=Tt,this.uint32[Qt+12]=_t,this.float32[Qt+13]=Et,this.float32[Qt+14]=Vt,this.uint16[tt+30]=bt,this.uint16[tt+31]=wt,n}}A.prototype.bytesPerElement=64,Dt("StructArrayLayout8i15ui1ul2f2ui64",A);class I extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}I.prototype.bytesPerElement=4,Dt("StructArrayLayout1f4",I);class O extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,f)}emplace(n,s,f,v){const w=3*n;return this.uint16[6*n+0]=s,this.float32[w+1]=f,this.float32[w+2]=v,n}}O.prototype.bytesPerElement=12,Dt("StructArrayLayout1ui2f12",O);class B extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,f)}emplace(n,s,f,v){const w=4*n;return this.uint32[2*n+0]=s,this.uint16[w+2]=f,this.uint16[w+3]=v,n}}B.prototype.bytesPerElement=8,Dt("StructArrayLayout1ul2ui8",B);class U extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const f=this.length;return this.resize(f+1),this.emplace(f,n,s)}emplace(n,s,f){const v=2*n;return this.uint16[v+0]=s,this.uint16[v+1]=f,n}}U.prototype.bytesPerElement=4,Dt("StructArrayLayout2ui4",U);class G extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}G.prototype.bytesPerElement=2,Dt("StructArrayLayout1ui2",G);class V extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,f,v){const w=this.length;return this.resize(w+1),this.emplace(w,n,s,f,v)}emplace(n,s,f,v,w){const P=4*n;return this.float32[P+0]=s,this.float32[P+1]=f,this.float32[P+2]=v,this.float32[P+3]=w,n}}V.prototype.bytesPerElement=16,Dt("StructArrayLayout4f16",V);class Q extends zu{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new C(this.anchorPointX,this.anchorPointY)}}Q.prototype.size=20;class ae extends b{get(n){return new Q(this,n)}}Dt("CollisionBoxArray",ae);class ce extends zu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ce.prototype.size=48;class he extends S{get(n){return new ce(this,n)}}Dt("PlacedSymbolArray",he);class fe extends zu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}fe.prototype.size=64;class pe extends A{get(n){return new fe(this,n)}}Dt("SymbolInstanceArray",pe);class be extends I{getoffsetX(n){return this.float32[1*n+0]}}Dt("GlyphOffsetArray",be);class me extends cn{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Dt("SymbolLineVertexArray",me);class we extends zu{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}we.prototype.size=12;class Ee extends O{get(n){return new we(this,n)}}Dt("TextAnchorOffsetArray",Ee);class ge extends zu{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ge.prototype.size=8;class Ie extends B{get(n){return new ge(this,n)}}Dt("FeatureIndexArray",Ie);class Ze extends mi{}class Fe extends mi{}class Ve extends mi{}class Xe extends kl{}class Pt extends Ll{}class xt extends go{}class lt extends yo{}class jt extends ju{}class vr extends Bu{}class Or extends Lc{}class hn extends t{}class Wr extends d{}class Zr extends _{}class rn extends U{}const Qr=wn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Xr}=Qr;class Er{constructor(n=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=n}prepareSegment(n,s,f,v){const w=this.segments[this.segments.length-1];return n>Er.MAX_VERTEX_ARRAY_LENGTH&&Lt(`Max vertices per segment is ${Er.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Er.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!w||w.vertexLength+n>Er.MAX_VERTEX_ARRAY_LENGTH||w.sortKey!==v?this.createNewSegment(s,f,v):w}createNewSegment(n,s,f){const v={vertexOffset:n.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0,vaos:{}};return f!==void 0&&(v.sortKey=f),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(v),v}getOrCreateLatestSegment(n,s,f){return this.prepareSegment(0,n,s,f)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,f,v){return new Er([{vertexOffset:n,primitiveOffset:s,vertexLength:f,primitiveLength:v,vaos:{},sortKey:0}])}}function ei(l,n){return 256*(l=Ft(Math.floor(l),0,255))+Ft(Math.floor(n),0,255)}Er.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Dt("SegmentVector",Er);const Hn=wn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ra,Ks,ds,na={exports:{}},ps={exports:{}},Ys={exports:{}},zc=(function(){if(ds)return na.exports;ds=1;var l=(ra||(ra=1,ps.exports=function(s,f){var v,w,P,T,D,L,F,$;for(w=s.length-(v=3&s.length),P=f,D=3432918353,L=461845907,$=0;$<w;)F=255&s.charCodeAt($)|(255&s.charCodeAt(++$))<<8|(255&s.charCodeAt(++$))<<16|(255&s.charCodeAt(++$))<<24,++$,P=27492+(65535&(T=5*(65535&(P=(P^=F=(65535&(F=(F=(65535&F)*D+(((F>>>16)*D&65535)<<16)&4294967295)<<15|F>>>17))*L+(((F>>>16)*L&65535)<<16)&4294967295)<<13|P>>>19))+((5*(P>>>16)&65535)<<16)&4294967295))+((58964+(T>>>16)&65535)<<16);switch(F=0,v){case 3:F^=(255&s.charCodeAt($+2))<<16;case 2:F^=(255&s.charCodeAt($+1))<<8;case 1:P^=F=(65535&(F=(F=(65535&(F^=255&s.charCodeAt($)))*D+(((F>>>16)*D&65535)<<16)&4294967295)<<15|F>>>17))*L+(((F>>>16)*L&65535)<<16)&4294967295}return P^=s.length,P=2246822507*(65535&(P^=P>>>16))+((2246822507*(P>>>16)&65535)<<16)&4294967295,P=3266489909*(65535&(P^=P>>>13))+((3266489909*(P>>>16)&65535)<<16)&4294967295,(P^=P>>>16)>>>0}),ps.exports),n=(Ks||(Ks=1,Ys.exports=function(s,f){for(var v,w=s.length,P=f^w,T=0;w>=4;)v=1540483477*(65535&(v=255&s.charCodeAt(T)|(255&s.charCodeAt(++T))<<8|(255&s.charCodeAt(++T))<<16|(255&s.charCodeAt(++T))<<24))+((1540483477*(v>>>16)&65535)<<16),P=1540483477*(65535&P)+((1540483477*(P>>>16)&65535)<<16)^(v=1540483477*(65535&(v^=v>>>24))+((1540483477*(v>>>16)&65535)<<16)),w-=4,++T;switch(w){case 3:P^=(255&s.charCodeAt(T+2))<<16;case 2:P^=(255&s.charCodeAt(T+1))<<8;case 1:P=1540483477*(65535&(P^=255&s.charCodeAt(T)))+((1540483477*(P>>>16)&65535)<<16)}return P=1540483477*(65535&(P^=P>>>13))+((1540483477*(P>>>16)&65535)<<16),(P^=P>>>15)>>>0}),Ys.exports);return na.exports=l,na.exports.murmur3=l,na.exports.murmur2=n,na.exports})(),ms=E(zc);class gi{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,f,v){this.ids.push(Uo(n)),this.positions.push(s,f,v)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Uo(n);let f=0,v=this.ids.length-1;for(;f<v;){const P=f+v>>1;this.ids[P]>=s?v=P:f=P+1}const w=[];for(;this.ids[f]===s;)w.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return w}static serialize(n,s){const f=new Float64Array(n.ids),v=new Uint32Array(n.positions);return $o(f,v,0,f.length-1),s&&s.push(f.buffer,v.buffer),{ids:f,positions:v}}static deserialize(n){const s=new gi;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function Uo(l){const n=+l;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:ms(String(l))}function $o(l,n,s,f){for(;s<f;){const v=l[s+f>>1];let w=s-1,P=f+1;for(;;){do w++;while(l[w]<v);do P--;while(l[P]>v);if(w>=P)break;Qs(l,w,P),Qs(n,3*w,3*P),Qs(n,3*w+1,3*P+1),Qs(n,3*w+2,3*P+2)}P-s<f-P?($o(l,n,s,P),s=P+1):($o(l,n,P+1,f),f=P)}}function Qs(l,n,s){const f=l[n];l[n]=l[s],l[s]=f}Dt("FeaturePositionMap",gi);class Fr{constructor(n,s){this.gl=n.gl,this.location=s}}class yn extends Fr{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Ni extends Fr{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Mn extends Fr{constructor(n,s){super(n,s),this.current=_r.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const jh=new Float32Array(16);function Bh(l){return[ei(255*l.r,255*l.g),ei(255*l.b,255*l.a)]}class Fu{constructor(n,s,f){this.value=n,this.uniformNames=s.map((v=>`u_${v}`)),this.type=f}setUniform(n,s,f){n.set(f.constantOr(this.value))}getBinding(n,s,f){return this.type==="color"?new Mn(n,s):new yn(n,s)}}class vo{constructor(n,s){this.uniformNames=s.map((f=>`u_${f}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,f,v){const w=v==="u_pattern_to"?this.patternTo:v==="u_pattern_from"?this.patternFrom:v==="u_pixel_ratio_to"?this.pixelRatioTo:v==="u_pixel_ratio_from"?this.pixelRatioFrom:null;w&&n.set(w)}getBinding(n,s,f){return f.substr(0,9)==="u_pattern"?new Ni(n,s):new yn(n,s)}}class Vo{constructor(n,s,f,v){this.expression=n,this.type=f,this.maxValue=0,this.paintVertexAttributes=s.map((w=>({name:`a_${w}`,type:"Float32",components:f==="color"?2:1,offset:0}))),this.paintVertexArray=new v}populatePaintArray(n,s,f){const v=this.paintVertexArray.length,w=this.expression.evaluate(new Vr(0,f),s,{},f.canonical,[],f.formattedSection);this.paintVertexArray.resize(n),this._setPaintValue(v,n,w)}updatePaintArray(n,s,f,v,w){const P=this.expression.evaluate(new Vr(0,w),f,v);this._setPaintValue(n,s,P)}_setPaintValue(n,s,f){if(this.type==="color"){const v=Bh(f);for(let w=n;w<s;w++)this.paintVertexArray.emplace(w,v[0],v[1])}else{for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class kn{constructor(n,s,f,v,w,P){this.expression=n,this.uniformNames=s.map((T=>`u_${T}_t`)),this.type=f,this.useIntegerZoom=v,this.zoom=w,this.maxValue=0,this.paintVertexAttributes=s.map((T=>({name:`a_${T}`,type:"Float32",components:f==="color"?4:2,offset:0}))),this.paintVertexArray=new P}populatePaintArray(n,s,f){const v=this.expression.evaluate(new Vr(this.zoom,f),s,{},f.canonical,[],f.formattedSection),w=this.expression.evaluate(new Vr(this.zoom+1,f),s,{},f.canonical,[],f.formattedSection),P=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(P,n,v,w)}updatePaintArray(n,s,f,v,w){const P=this.expression.evaluate(new Vr(this.zoom,w),f,v),T=this.expression.evaluate(new Vr(this.zoom+1,w),f,v);this._setPaintValue(n,s,P,T)}_setPaintValue(n,s,f,v){if(this.type==="color"){const w=Bh(f),P=Bh(v);for(let T=n;T<s;T++)this.paintVertexArray.emplace(T,w[0],w[1],P[0],P[1])}else{for(let w=n;w<s;w++)this.paintVertexArray.emplace(w,f,v);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(v))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const f=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,v=Ft(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);n.set(v)}getBinding(n,s,f){return new yn(n,s)}}class Rn{constructor(n,s,f,v,w,P){this.expression=n,this.type=s,this.useIntegerZoom=f,this.zoom=v,this.layerId=P,this.zoomInPaintVertexArray=new w,this.zoomOutPaintVertexArray=new w}populatePaintArray(n,s,f){const v=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(v,n,s.patterns&&s.patterns[this.layerId],f.imagePositions)}updatePaintArray(n,s,f,v,w){this._setPaintValues(n,s,f.patterns&&f.patterns[this.layerId],w.imagePositions)}_setPaintValues(n,s,f,v){if(!v||!f)return;const{min:w,mid:P,max:T}=f,D=v[w],L=v[P],F=v[T];if(D&&L&&F)for(let $=n;$<s;$++)this.zoomInPaintVertexArray.emplace($,L.tl[0],L.tl[1],L.br[0],L.br[1],D.tl[0],D.tl[1],D.br[0],D.br[1],L.pixelRatio,D.pixelRatio),this.zoomOutPaintVertexArray.emplace($,L.tl[0],L.tl[1],L.br[0],L.br[1],F.tl[0],F.tl[1],F.br[0],F.br[1],L.pixelRatio,F.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Hn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Hn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ho{constructor(n,s,f){this.binders={},this._buffers=[];const v=[];for(const w in n.paint._values){if(!f(w))continue;const P=n.paint.get(w);if(!(P instanceof ta&&Ia(P.property.specification)))continue;const T=ys(w,n.type),D=P.value,L=P.property.specification.type,F=P.property.useIntegerZoom,$=P.property.specification["property-type"],Z=$==="cross-faded"||$==="cross-faded-data-driven";if(D.kind==="constant")this.binders[w]=Z?new vo(D.value,T):new Fu(D.value,T,L),v.push(`/u_${w}`);else if(D.kind==="source"||Z){const J=Ya(w,L,"source");this.binders[w]=Z?new Rn(D,L,F,s,J,n.id):new Vo(D,T,L,J),v.push(`/a_${w}`)}else{const J=Ya(w,L,"composite");this.binders[w]=new kn(D,T,L,F,s,J),v.push(`/z_${w}`)}}this.cacheKey=v.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof Vo||s instanceof kn?s.maxValue:0}populatePaintArrays(n,s,f){for(const v in this.binders){const w=this.binders[v];(w instanceof Vo||w instanceof kn||w instanceof Rn)&&w.populatePaintArray(n,s,f)}}setConstantPatternPositions(n,s){for(const f in this.binders){const v=this.binders[f];v instanceof vo&&v.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,f,v,w){let P=!1;for(const T in n){const D=s.getPositions(T);for(const L of D){const F=f.feature(L.index);for(const $ in this.binders){const Z=this.binders[$];if((Z instanceof Vo||Z instanceof kn||Z instanceof Rn)&&Z.expression.isStateDependent===!0){const J=v.paint.get($);Z.expression=J.value,Z.updatePaintArray(L.start,L.end,F,n[T],w),P=!0}}}}return P}defines(){const n=[];for(const s in this.binders){const f=this.binders[s];(f instanceof Fu||f instanceof vo)&&n.push(...f.uniformNames.map((v=>`#define HAS_UNIFORM_${v}`)))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const f=this.binders[s];if(f instanceof Vo||f instanceof kn)for(let v=0;v<f.paintVertexAttributes.length;v++)n.push(f.paintVertexAttributes[v].name);else if(f instanceof Rn)for(let v=0;v<Hn.members.length;v++)n.push(Hn.members[v].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const f=this.binders[s];if(f instanceof Fu||f instanceof vo||f instanceof kn)for(const v of f.uniformNames)n.push(v)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const f=[];for(const v in this.binders){const w=this.binders[v];if(w instanceof Fu||w instanceof vo||w instanceof kn){for(const P of w.uniformNames)if(s[P]){const T=w.getBinding(n,s[P],P);f.push({name:P,property:v,binding:T})}}}return f}setUniforms(n,s,f,v){for(const{name:w,property:P,binding:T}of s)this.binders[P].setUniform(T,v,f.get(P),w)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const f=this.binders[s];if(n&&f instanceof Rn){const v=n.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;v&&this._buffers.push(v)}else(f instanceof Vo||f instanceof kn)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(n){for(const s in this.binders){const f=this.binders[s];(f instanceof Vo||f instanceof kn||f instanceof Rn)&&f.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof Vo||s instanceof kn||s instanceof Rn)&&s.destroy()}}}class gs{constructor(n,s,f=()=>!0){this.programConfigurations={};for(const v of n)this.programConfigurations[v.id]=new Ho(v,s,f);this.needsUpload=!1,this._featureMap=new gi,this._bufferOffset=0}populatePaintArrays(n,s,f,v){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(n,s,v);s.id!==void 0&&this._featureMap.add(s.id,f,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,f,v){for(const w of f)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(n,this._featureMap,s,w,v)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function ys(l,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(`${n}-`,"").replace(/-/g,"_")]}function Ya(l,n,s){const f={color:{source:go,composite:V},number:{source:I,composite:go}},v=(function(w){return{"line-pattern":{source:lt,composite:lt},"fill-pattern":{source:lt,composite:lt},"fill-extrusion-pattern":{source:lt,composite:lt}}[w]})(l);return v&&v[s]||f[n][s]}Dt("ConstantBinder",Fu),Dt("CrossFadedConstantBinder",vo),Dt("SourceExpressionBinder",Vo),Dt("CrossFadedCompositeBinder",Rn),Dt("CompositeExpressionBinder",kn),Dt("ProgramConfiguration",Ho,{omit:["_buffers"]}),Dt("ProgramConfigurationSet",gs);const Ln=Math.pow(2,14)-1,zl=-Ln-1;function Nl(l){const n=Ct/l.extent,s=l.loadGeometry();for(let f=0;f<s.length;f++){const v=s[f];for(let w=0;w<v.length;w++){const P=v[w],T=Math.round(P.x*n),D=Math.round(P.y*n);P.x=Ft(T,zl,Ln),P.y=Ft(D,zl,Ln),(T<P.x||T>P.x+1||D<P.y||D>P.y+1)&&Lt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function jl(l,n){return{type:l.type,id:l.id,properties:l.properties,geometry:n?Nl(l):[]}}const gm=-32768;function py(l,n,s,f,v){l.emplaceBack(gm+8*n+f,gm+8*s+v)}class Bl{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Fe,this.indexArray=new Zr,this.segments=new Er,this.programConfigurations=new gs(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(n,s,f){const v=this.layers[0],w=[];let P=null,T=!1,D=v.type==="heatmap";if(v.type==="circle"){const F=v;P=F.layout.get("circle-sort-key"),T=!P.isConstant(),D=D||F.paint.get("circle-pitch-alignment")==="map"}const L=D?s.subdivisionGranularity.circle:1;for(const{feature:F,id:$,index:Z,sourceLayerIndex:J}of n){const te=this.layers[0]._featureFilter.needGeometry,oe=jl(F,te);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),oe,f))continue;const ue=T?P.evaluate(oe,{},f):void 0,de={id:$,properties:F.properties,type:F.type,sourceLayerIndex:J,index:Z,geometry:te?oe.geometry:Nl(F),patterns:{},sortKey:ue};w.push(de)}T&&w.sort(((F,$)=>F.sortKey-$.sortKey));for(const F of w){const{geometry:$,index:Z,sourceLayerIndex:J}=F,te=n[Z].feature;this.addFeature(F,$,Z,f,L),s.featureIndex.insert(te,$,Z,J,this.index)}}update(n,s,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,{imagePositions:f})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Xr),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,f,v,w=1){let P;switch(w){case 1:P=[0,7];break;case 3:P=[0,2,5,7];break;case 5:P=[0,1,3,4,6,7];break;case 7:P=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${w}; valid values are 1, 3, 5, 7.`)}const T=P.length;for(const D of s)for(const L of D){const F=L.x,$=L.y;if(F<0||F>=Ct||$<0||$>=Ct)continue;const Z=this.segments.prepareSegment(T*T,this.layoutVertexArray,this.indexArray,n.sortKey),J=Z.vertexLength;for(let te=0;te<T;te++)for(let oe=0;oe<T;oe++)py(this.layoutVertexArray,F,$,P[oe],P[te]);for(let te=0;te<T-1;te++)for(let oe=0;oe<T-1;oe++){const ue=J+te*T+oe,de=J+(te+1)*T+oe;this.indexArray.emplaceBack(ue,de+1,ue+1),this.indexArray.emplaceBack(ue,de,de+1)}Z.vertexLength+=T*T,Z.primitiveLength+=(T-1)*(T-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{imagePositions:{},canonical:v})}}function Uf(l,n){for(let s=0;s<l.length;s++)if(Uh(n,l[s]))return!0;for(let s=0;s<n.length;s++)if(Uh(l,n[s]))return!0;return!!Fh(l,n)}function $f(l,n,s){return!!Uh(l,n)||!!Vf(n,l,s)}function ym(l,n){if(l.length===1)return _m(n,l[0]);for(let s=0;s<n.length;s++){const f=n[s];for(let v=0;v<f.length;v++)if(Uh(l,f[v]))return!0}for(let s=0;s<l.length;s++)if(_m(n,l[s]))return!0;for(let s=0;s<n.length;s++)if(Fh(l,n[s]))return!0;return!1}function my(l,n,s){if(l.length>1){if(Fh(l,n))return!0;for(let f=0;f<n.length;f++)if(Vf(n[f],l,s))return!0}for(let f=0;f<l.length;f++)if(Vf(l[f],n,s))return!0;return!1}function Fh(l,n){if(l.length===0||n.length===0)return!1;for(let s=0;s<l.length-1;s++){const f=l[s],v=l[s+1];for(let w=0;w<n.length-1;w++)if(gy(f,v,n[w],n[w+1]))return!0}return!1}function gy(l,n,s,f){return wr(l,s,f)!==wr(n,s,f)&&wr(l,n,s)!==wr(l,n,f)}function Vf(l,n,s){const f=s*s;if(n.length===1)return l.distSqr(n[0])<f;for(let v=1;v<n.length;v++)if(vm(l,n[v-1],n[v])<f)return!0;return!1}function vm(l,n,s){const f=n.distSqr(s);if(f===0)return l.distSqr(n);const v=((l.x-n.x)*(s.x-n.x)+(l.y-n.y)*(s.y-n.y))/f;return l.distSqr(v<0?n:v>1?s:s.sub(n)._mult(v)._add(n))}function _m(l,n){let s,f,v,w=!1;for(let P=0;P<l.length;P++){s=l[P];for(let T=0,D=s.length-1;T<s.length;D=T++)f=s[T],v=s[D],f.y>n.y!=v.y>n.y&&n.x<(v.x-f.x)*(n.y-f.y)/(v.y-f.y)+f.x&&(w=!w)}return w}function Uh(l,n){let s=!1;for(let f=0,v=l.length-1;f<l.length;v=f++){const w=l[f],P=l[v];w.y>n.y!=P.y>n.y&&n.x<(P.x-w.x)*(n.y-w.y)/(P.y-w.y)+w.x&&(s=!s)}return s}function yy(l,n,s){const f=s[0],v=s[2];if(l.x<f.x&&n.x<f.x||l.x>v.x&&n.x>v.x||l.y<f.y&&n.y<f.y||l.y>v.y&&n.y>v.y)return!1;const w=wr(l,n,s[0]);return w!==wr(l,n,s[1])||w!==wr(l,n,s[2])||w!==wr(l,n,s[3])}function qn(l,n,s){const f=n.paint.get(l).value;return f.kind==="constant"?f.value:s.programConfigurations.get(n.id).getMaxValue(l)}function yi(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function Hf(l,n,s,f,v){if(!n[0]&&!n[1])return l;const w=C.convert(n)._mult(v);s==="viewport"&&w._rotate(-f);const P=[];for(let T=0;T<l.length;T++)P.push(l[T].sub(w));return P}function vy({queryGeometry:l,size:n},s){return $f(l,s,n)}function _y({queryGeometry:l,size:n,transform:s,unwrappedTileID:f,getElevation:v},w){return $f(l,w,n*(s.projectTileCoordinates(w.x,w.y,f,v).signedDistanceFromCamera/s.cameraToCenterDistance))}function by({queryGeometry:l,size:n,transform:s,unwrappedTileID:f,getElevation:v},w){const P=s.projectTileCoordinates(w.x,w.y,f,v).signedDistanceFromCamera,T=n*(s.cameraToCenterDistance/P);return $f(l,Gf(w,s,f,v),T)}function xy({queryGeometry:l,size:n,transform:s,unwrappedTileID:f,getElevation:v},w){return $f(l,Gf(w,s,f,v),n)}function qf({queryGeometry:l,size:n,transform:s,unwrappedTileID:f,getElevation:v,pitchAlignment:w="map",pitchScale:P="map"},T){const D=w==="map"?P==="map"?vy:_y:P==="map"?by:xy,L={queryGeometry:l,size:n,transform:s,unwrappedTileID:f,getElevation:v};for(const F of T)for(const $ of F)if(D(L,$))return!0;return!1}function Gf(l,n,s,f){const v=n.projectTileCoordinates(l.x,l.y,s,f).point;return new C((.5*v.x+.5)*n.width,(.5*-v.y+.5)*n.height)}let bm,xm;Dt("CircleBucket",Bl,{omit:["layers"]});var wy={get paint(){return xm=xm||new pi({"circle-radius":new qt(ke.paint_circle["circle-radius"]),"circle-color":new qt(ke.paint_circle["circle-color"]),"circle-blur":new qt(ke.paint_circle["circle-blur"]),"circle-opacity":new qt(ke.paint_circle["circle-opacity"]),"circle-translate":new zt(ke.paint_circle["circle-translate"]),"circle-translate-anchor":new zt(ke.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new zt(ke.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new zt(ke.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new qt(ke.paint_circle["circle-stroke-width"]),"circle-stroke-color":new qt(ke.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new qt(ke.paint_circle["circle-stroke-opacity"])})},get layout(){return bm=bm||new pi({"circle-sort-key":new qt(ke.layout_circle["circle-sort-key"])})}};class wm extends Ka{constructor(n,s){super(n,wy,s)}createBucket(n){return new Bl(n)}queryRadius(n){const s=n;return qn("circle-radius",this,s)+qn("circle-stroke-width",this,s)+yi(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:n,feature:s,featureState:f,geometry:v,transform:w,pixelsToTileUnits:P,unwrappedTileID:T,getElevation:D}){const L=Hf(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-w.bearingInRadians,P),F=this.paint.get("circle-radius").evaluate(s,f)+this.paint.get("circle-stroke-width").evaluate(s,f),$=this.paint.get("circle-pitch-scale"),Z=this.paint.get("circle-pitch-alignment");let J,te;return Z==="map"?(J=L,te=F*P):(J=(function(oe,ue,de,Le){return oe.map((xe=>Gf(xe,ue,de,Le)))})(L,w,T,D),te=F),qf({queryGeometry:J,size:te,transform:w,unwrappedTileID:T,getElevation:D,pitchAlignment:Z,pitchScale:$},v)}}class ap extends Bl{}let op;Dt("HeatmapBucket",ap,{omit:["layers"]});var Sy={get paint(){return op=op||new pi({"heatmap-radius":new qt(ke.paint_heatmap["heatmap-radius"]),"heatmap-weight":new qt(ke.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new zt(ke.paint_heatmap["heatmap-intensity"]),"heatmap-color":new xn(ke.paint_heatmap["heatmap-color"]),"heatmap-opacity":new zt(ke.paint_heatmap["heatmap-opacity"])})}};function Wf(l,{width:n,height:s},f,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==n*s*f)throw new RangeError(`mismatched image size. expected: ${v.length} but got: ${n*s*f}`)}else v=new Uint8Array(n*s*f);return l.width=n,l.height=s,l.data=v,l}function Zf(l,{width:n,height:s},f){if(n===l.width&&s===l.height)return;const v=Wf({},{width:n,height:s},f);Xf(l,v,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,n),height:Math.min(l.height,s)},f),l.width=n,l.height=s,l.data=v.data}function Xf(l,n,s,f,v,w){if(v.width===0||v.height===0)return n;if(v.width>l.width||v.height>l.height||s.x>l.width-v.width||s.y>l.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>n.width||v.height>n.height||f.x>n.width-v.width||f.y>n.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const P=l.data,T=n.data;if(P===T)throw new Error("srcData equals dstData, so image is already copied");for(let D=0;D<v.height;D++){const L=((s.y+D)*l.width+s.x)*w,F=((f.y+D)*n.width+f.x)*w;for(let $=0;$<v.width*w;$++)T[F+$]=P[L+$]}return n}class $h{constructor(n,s){Wf(this,n,1,s)}resize(n){Zf(this,n,1)}clone(){return new $h({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,f,v,w){Xf(n,s,f,v,w,1)}}class ia{constructor(n,s){Wf(this,n,4,s)}resize(n){Zf(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new ia({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,f,v,w){Xf(n,s,f,v,w,4)}setPixel(n,s,f){const v=4*(n*this.width+s);this.data[v+0]=Math.round(255*f.r/f.a),this.data[v+1]=Math.round(255*f.g/f.a),this.data[v+2]=Math.round(255*f.b/f.a),this.data[v+3]=Math.round(255*f.a)}}function Sm(l){const n={},s=l.resolution||256,f=l.clips?l.clips.length:1,v=l.image||new ia({width:s,height:f});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const w=(P,T,D)=>{n[l.evaluationKey]=D;const L=l.expression.evaluate(n);v.setPixel(P/4/s,T/4,L)};if(l.clips)for(let P=0,T=0;P<f;++P,T+=4*s)for(let D=0,L=0;D<s;D++,L+=4){const F=D/(s-1),{start:$,end:Z}=l.clips[P];w(T,L,$*(1-F)+Z*F)}else for(let P=0,T=0;P<s;P++,T+=4)w(0,T,P/(s-1));return v}Dt("AlphaImage",$h),Dt("RGBAImage",ia);const vs="big-fb";class Pm extends Ka{createBucket(n){return new ap(n)}constructor(n,s){super(n,Sy,s),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Sm({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(vs)&&this.heatmapFbos.delete(vs)}queryRadius(n){return qn("heatmap-radius",this,n)}queryIntersectsFeature({queryGeometry:n,feature:s,featureState:f,geometry:v,transform:w,pixelsToTileUnits:P,unwrappedTileID:T,getElevation:D}){return qf({queryGeometry:n,size:this.paint.get("heatmap-radius").evaluate(s,f)*P,transform:w,unwrappedTileID:T,getElevation:D},v)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Py;var Ay={get paint(){return Py=Py||new pi({"hillshade-illumination-direction":new zt(ke.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new zt(ke.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new zt(ke.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new zt(ke.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new zt(ke.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new zt(ke.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new zt(ke.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new zt(ke.paint_hillshade["hillshade-method"])})}};class Fl extends Ka{constructor(n,s){super(n,Ay,s),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let n=this.paint.get("hillshade-illumination-direction").values,s=this.paint.get("hillshade-illumination-altitude").values,f=this.paint.get("hillshade-highlight-color").values,v=this.paint.get("hillshade-shadow-color").values;const w=Math.max(n.length,s.length,f.length,v.length);n=n.concat(Array(w-n.length).fill(n.at(-1))),s=s.concat(Array(w-s.length).fill(s.at(-1))),f=f.concat(Array(w-f.length).fill(f.at(-1))),v=v.concat(Array(w-v.length).fill(v.at(-1)));const P=s.map(To);return{directionRadians:n.map(To),altitudeRadians:P,shadowColor:v,highlightColor:f}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let Am;var sp={get paint(){return Am=Am||new pi({"color-relief-opacity":new zt(ke["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new xn(ke["paint_color-relief"]["color-relief-color"])})}};class Nc{constructor(n,s,f,v){this.context=n,this.format=f,this.texture=n.gl.createTexture(),this.update(s,v)}update(n,s,f){const{width:v,height:w}=n,P=!(this.size&&this.size[0]===v&&this.size[1]===w||f),{context:T}=this,{gl:D}=T;if(this.useMipmap=!!(s&&s.useMipmap),D.bindTexture(D.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===D.RGBA&&(!s||s.premultiply!==!1)),P)this.size=[v,w],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||Bn(n)?D.texImage2D(D.TEXTURE_2D,0,this.format,this.format,D.UNSIGNED_BYTE,n):D.texImage2D(D.TEXTURE_2D,0,this.format,v,w,0,this.format,D.UNSIGNED_BYTE,n.data);else{const{x:L,y:F}=f||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||Bn(n)?D.texSubImage2D(D.TEXTURE_2D,0,L,F,D.RGBA,D.UNSIGNED_BYTE,n):D.texSubImage2D(D.TEXTURE_2D,0,L,F,v,w,D.RGBA,D.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&D.generateMipmap(D.TEXTURE_2D),T.pixelStoreUnpackFlipY.setDefault(),T.pixelStoreUnpack.setDefault(),T.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(n,s,f){const{context:v}=this,{gl:w}=v;w.bindTexture(w.TEXTURE_2D,this.texture),f!==w.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=w.LINEAR),n!==this.filter&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,n),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,f||n),this.filter=n),s!==this.wrap&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,s),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class zn{constructor(n,s,f,v=1,w=1,P=1,T=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void Lt(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const D=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=v,this.greenFactor=w,this.blueFactor=P,this.baseShift=T;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let L=0;L<D;L++)this.data[this._idx(-1,L)]=this.data[this._idx(0,L)],this.data[this._idx(D,L)]=this.data[this._idx(D-1,L)],this.data[this._idx(L,-1)]=this.data[this._idx(L,0)],this.data[this._idx(L,D)]=this.data[this._idx(L,D-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(D,-1)]=this.data[this._idx(D-1,0)],this.data[this._idx(-1,D)]=this.data[this._idx(0,D-1)],this.data[this._idx(D,D)]=this.data[this._idx(D-1,D-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let L=0;L<D;L++)for(let F=0;F<D;F++){const $=this.get(L,F);$>this.max&&(this.max=$),$<this.min&&(this.min=$)}}get(n,s){const f=new Uint8Array(this.data.buffer),v=4*this._idx(n,s);return this.unpack(f[v],f[v+1],f[v+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,f){return n*this.redFactor+s*this.greenFactor+f*this.blueFactor-this.baseShift}pack(n){return Cy(n,this.getUnpackVector())}getPixels(){return new ia({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,f){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let v=s*this.dim,w=s*this.dim+this.dim,P=f*this.dim,T=f*this.dim+this.dim;switch(s){case-1:v=w-1;break;case 1:w=v+1}switch(f){case-1:P=T-1;break;case 1:T=P+1}const D=-s*this.dim,L=-f*this.dim;for(let F=P;F<T;F++)for(let $=v;$<w;$++)this.data[this._idx($,F)]=n.data[this._idx($+D,F+L)]}}function Cy(l,n){const s=n[0],f=n[1],v=n[2],w=n[3],P=Math.min(s,f,v),T=Math.round((l+w)/P);return{r:Math.floor(T*P/s)%256,g:Math.floor(T*P/f)%256,b:Math.floor(T*P/v)%256}}Dt("DEMData",zn);class f_ extends Ka{constructor(n,s){super(n,sp,s)}_createColorRamp(n){const s={elevationStops:[],colorStops:[]},f=this._transitionablePaint._values["color-relief-color"].value.expression;if(f instanceof $s&&f._styleExpression.expression instanceof Ci){this.colorRampExpression=f;const P=f._styleExpression.expression;s.elevationStops=P.labels,s.colorStops=[];for(const T of s.elevationStops)s.colorStops.push(P.evaluate({globals:{elevation:T}}))}if(s.elevationStops.length<1&&(s.elevationStops=[0],s.colorStops=[_r.transparent]),s.elevationStops.length<2&&(s.elevationStops.push(s.elevationStops[0]+1),s.colorStops.push(s.colorStops[0])),s.elevationStops.length<=n)return s;const v={elevationStops:[],colorStops:[]},w=(s.elevationStops.length-1)/(n-1);for(let P=0;P<s.elevationStops.length-.5;P+=w)v.elevationStops.push(s.elevationStops[Math.round(P)]),v.colorStops.push(s.colorStops[Math.round(P)]);return Lt(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),v}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(n,s,f){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const v=this._createColorRamp(s),w=new ia({width:v.colorStops.length,height:1}),P=new ia({width:v.colorStops.length,height:1});for(let T=0;T<v.elevationStops.length;T++){const D=Cy(v.elevationStops[T],f);P.setPixel(0,T,new _r(D.r/255,D.g/255,D.b/255,1)),w.setPixel(0,T,v.colorStops[T])}return this.colorRampTextures={elevationTexture:new Nc(n,P,n.gl.RGBA),colorTexture:new Nc(n,w,n.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const Ty=wn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Kf}=Ty;function Js(l,n,s){const f=s.patternDependencies;let v=!1;for(const w of n){const P=w.paint.get(`${l}-pattern`);P.isConstant()||(v=!0);const T=P.constantOr(null);T&&(v=!0,f[T.to]=!0,f[T.from]=!0)}return v}function lp(l,n,s,f,v){const{zoom:w}=f,P=v.patternDependencies;for(const T of n){const D=T.paint.get(`${l}-pattern`).value;if(D.kind!=="constant"){let L=D.evaluate({zoom:w-1},s,{},v.availableImages),F=D.evaluate({zoom:w},s,{},v.availableImages),$=D.evaluate({zoom:w+1},s,{},v.availableImages);L=L&&L.name?L.name:L,F=F&&F.name?F.name:F,$=$&&$.name?$.name:$,P[L]=!0,P[F]=!0,P[$]=!0,s.patterns[T.id]={min:L,mid:F,max:$}}}return s}function Cm(l,n,s,f,v){let w;if(v===(function(P,T,D,L){let F=0;for(let $=T,Z=D-L;$<D;$+=L)F+=(P[Z]-P[$])*(P[$+1]+P[Z+1]),Z=$;return F})(l,n,s,f)>0)for(let P=n;P<s;P+=f)w=Im(P/f|0,l[P],l[P+1],w);else for(let P=s-f;P>=n;P-=f)w=Im(P/f|0,l[P],l[P+1],w);return w&&jc(w,w.next)&&(Yf(w),w=w.next),w}function _s(l,n){if(!l)return l;n||(n=l);let s,f=l;do if(s=!1,f.steiner||!jc(f,f.next)&&Gn(f.prev,f,f.next)!==0)f=f.next;else{if(Yf(f),f=n=f.prev,f===f.next)break;s=!0}while(s||f!==n);return n}function Qa(l,n,s,f,v,w,P){if(!l)return;!P&&w&&(function(D,L,F,$){let Z=D;do Z.z===0&&(Z.z=bs(Z.x,Z.y,L,F,$)),Z.prevZ=Z.prev,Z.nextZ=Z.next,Z=Z.next;while(Z!==D);Z.prevZ.nextZ=null,Z.prevZ=null,(function(J){let te,oe=1;do{let ue,de=J;J=null;let Le=null;for(te=0;de;){te++;let xe=de,Ce=0;for(let Ye=0;Ye<oe&&(Ce++,xe=xe.nextZ,xe);Ye++);let Ge=oe;for(;Ce>0||Ge>0&&xe;)Ce!==0&&(Ge===0||!xe||de.z<=xe.z)?(ue=de,de=de.nextZ,Ce--):(ue=xe,xe=xe.nextZ,Ge--),Le?Le.nextZ=ue:J=ue,ue.prevZ=Le,Le=ue;de=xe}Le.nextZ=null,oe*=2}while(te>1)})(Z)})(l,f,v,w);let T=l;for(;l.prev!==l.next;){const D=l.prev,L=l.next;if(w?Tm(l,f,v,w):Ey(l))n.push(D.i,l.i,L.i),Yf(l),l=L.next,T=L.next;else if((l=L)===T){P?P===1?Qa(l=My(_s(l),n),n,s,f,v,w,2):P===2&&Em(l,n,s,f,v,w):Qa(_s(l),n,s,f,v,w,1);break}}}function Ey(l){const n=l.prev,s=l,f=l.next;if(Gn(n,s,f)>=0)return!1;const v=n.x,w=s.x,P=f.x,T=n.y,D=s.y,L=f.y,F=Math.min(v,w,P),$=Math.min(T,D,L),Z=Math.max(v,w,P),J=Math.max(T,D,L);let te=f.next;for(;te!==n;){if(te.x>=F&&te.x<=Z&&te.y>=$&&te.y<=J&&Vh(v,T,w,D,P,L,te.x,te.y)&&Gn(te.prev,te,te.next)>=0)return!1;te=te.next}return!0}function Tm(l,n,s,f){const v=l.prev,w=l,P=l.next;if(Gn(v,w,P)>=0)return!1;const T=v.x,D=w.x,L=P.x,F=v.y,$=w.y,Z=P.y,J=Math.min(T,D,L),te=Math.min(F,$,Z),oe=Math.max(T,D,L),ue=Math.max(F,$,Z),de=bs(J,te,n,s,f),Le=bs(oe,ue,n,s,f);let xe=l.prevZ,Ce=l.nextZ;for(;xe&&xe.z>=de&&Ce&&Ce.z<=Le;){if(xe.x>=J&&xe.x<=oe&&xe.y>=te&&xe.y<=ue&&xe!==v&&xe!==P&&Vh(T,F,D,$,L,Z,xe.x,xe.y)&&Gn(xe.prev,xe,xe.next)>=0||(xe=xe.prevZ,Ce.x>=J&&Ce.x<=oe&&Ce.y>=te&&Ce.y<=ue&&Ce!==v&&Ce!==P&&Vh(T,F,D,$,L,Z,Ce.x,Ce.y)&&Gn(Ce.prev,Ce,Ce.next)>=0))return!1;Ce=Ce.nextZ}for(;xe&&xe.z>=de;){if(xe.x>=J&&xe.x<=oe&&xe.y>=te&&xe.y<=ue&&xe!==v&&xe!==P&&Vh(T,F,D,$,L,Z,xe.x,xe.y)&&Gn(xe.prev,xe,xe.next)>=0)return!1;xe=xe.prevZ}for(;Ce&&Ce.z<=Le;){if(Ce.x>=J&&Ce.x<=oe&&Ce.y>=te&&Ce.y<=ue&&Ce!==v&&Ce!==P&&Vh(T,F,D,$,L,Z,Ce.x,Ce.y)&&Gn(Ce.prev,Ce,Ce.next)>=0)return!1;Ce=Ce.nextZ}return!0}function My(l,n){let s=l;do{const f=s.prev,v=s.next.next;!jc(f,v)&&Rm(f,s,s.next,v)&&_o(f,v)&&_o(v,f)&&(n.push(f.i,s.i,v.i),Yf(s),Yf(s.next),s=l=v),s=s.next}while(s!==l);return _s(s)}function Em(l,n,s,f,v,w){let P=l;do{let T=P.next.next;for(;T!==P.prev;){if(P.i!==T.i&&ji(P,T)){let D=Dm(P,T);return P=_s(P,P.next),D=_s(D,D.next),Qa(P,n,s,f,v,w,0),void Qa(D,n,s,f,v,w,0)}T=T.next}P=P.next}while(P!==l)}function Mm(l,n){let s=l.x-n.x;return s===0&&(s=l.y-n.y,s===0)&&(s=(l.next.y-l.y)/(l.next.x-l.x)-(n.next.y-n.y)/(n.next.x-n.x)),s}function up(l,n){const s=(function(v,w){let P=w;const T=v.x,D=v.y;let L,F=-1/0;if(jc(v,P))return P;do{if(jc(v,P.next))return P.next;if(D<=P.y&&D>=P.next.y&&P.next.y!==P.y){const oe=P.x+(D-P.y)*(P.next.x-P.x)/(P.next.y-P.y);if(oe<=T&&oe>F&&(F=oe,L=P.x<P.next.x?P:P.next,oe===T))return L}P=P.next}while(P!==w);if(!L)return null;const $=L,Z=L.x,J=L.y;let te=1/0;P=L;do{if(T>=P.x&&P.x>=Z&&T!==P.x&&cp(D<J?T:F,D,Z,J,D<J?F:T,D,P.x,P.y)){const oe=Math.abs(D-P.y)/(T-P.x);_o(P,v)&&(oe<te||oe===te&&(P.x>L.x||P.x===L.x&&Ry(L,P)))&&(L=P,te=oe)}P=P.next}while(P!==$);return L})(l,n);if(!s)return n;const f=Dm(s,l);return _s(f,f.next),_s(s,s.next)}function Ry(l,n){return Gn(l.prev,l,n.prev)<0&&Gn(n.next,l,l.next)<0}function bs(l,n,s,f,v){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-s)*v|0)|l<<8))|l<<4))|l<<2))|l<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-f)*v|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function ai(l){let n=l,s=l;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==l);return s}function cp(l,n,s,f,v,w,P,T){return(v-P)*(n-T)>=(l-P)*(w-T)&&(l-P)*(f-T)>=(s-P)*(n-T)&&(s-P)*(w-T)>=(v-P)*(f-T)}function Vh(l,n,s,f,v,w,P,T){return!(l===P&&n===T)&&cp(l,n,s,f,v,w,P,T)}function ji(l,n){return l.next.i!==n.i&&l.prev.i!==n.i&&!(function(s,f){let v=s;do{if(v.i!==s.i&&v.next.i!==s.i&&v.i!==f.i&&v.next.i!==f.i&&Rm(v,v.next,s,f))return!0;v=v.next}while(v!==s);return!1})(l,n)&&(_o(l,n)&&_o(n,l)&&(function(s,f){let v=s,w=!1;const P=(s.x+f.x)/2,T=(s.y+f.y)/2;do v.y>T!=v.next.y>T&&v.next.y!==v.y&&P<(v.next.x-v.x)*(T-v.y)/(v.next.y-v.y)+v.x&&(w=!w),v=v.next;while(v!==s);return w})(l,n)&&(Gn(l.prev,l,n.prev)||Gn(l,n.prev,n))||jc(l,n)&&Gn(l.prev,l,l.next)>0&&Gn(n.prev,n,n.next)>0)}function Gn(l,n,s){return(n.y-l.y)*(s.x-n.x)-(n.x-l.x)*(s.y-n.y)}function jc(l,n){return l.x===n.x&&l.y===n.y}function Rm(l,n,s,f){const v=aa(Gn(l,n,s)),w=aa(Gn(l,n,f)),P=aa(Gn(s,f,l)),T=aa(Gn(s,f,n));return v!==w&&P!==T||!(v!==0||!vn(l,s,n))||!(w!==0||!vn(l,f,n))||!(P!==0||!vn(s,l,f))||!(T!==0||!vn(s,n,f))}function vn(l,n,s){return n.x<=Math.max(l.x,s.x)&&n.x>=Math.min(l.x,s.x)&&n.y<=Math.max(l.y,s.y)&&n.y>=Math.min(l.y,s.y)}function aa(l){return l>0?1:l<0?-1:0}function _o(l,n){return Gn(l.prev,l,l.next)<0?Gn(l,n,l.next)>=0&&Gn(l,l.prev,n)>=0:Gn(l,n,l.prev)<0||Gn(l,l.next,n)<0}function Dm(l,n){const s=Qf(l.i,l.x,l.y),f=Qf(n.i,n.x,n.y),v=l.next,w=n.prev;return l.next=n,n.prev=l,s.next=v,v.prev=s,f.next=s,s.prev=f,w.next=f,f.prev=w,f}function Im(l,n,s,f){const v=Qf(l,n,s);return f?(v.next=f.next,v.prev=f,f.next.prev=v,f.next=v):(v.prev=v,v.next=v),v}function Yf(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function Qf(l,n,s){return{i:l,x:n,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Bi{constructor(n,s){if(s>n)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=n,this._minGranularity=s}getGranularityForZoomLevel(n){return Math.max(Math.floor(this._baseZoomGranularity/(1<<n)),this._minGranularity,1)}}class Ja{constructor(n){this.fill=n.fill,this.line=n.line,this.tile=n.tile,this.stencil=n.stencil,this.circle=n.circle}}Ja.noSubdivision=new Ja({fill:new Bi(0,0),line:new Bi(0,0),tile:new Bi(0,0),stencil:new Bi(0,0),circle:1}),Dt("SubdivisionGranularityExpression",Bi),Dt("SubdivisionGranularitySetting",Ja);const Bc=-32768,oa=32767;class Dy{constructor(n,s){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=n,this._granularityCellSize=Ct/n,this._canonical=s}_getKey(n,s){return(n+=32768)<<16|s+32768}_vertexToIndex(n,s){if(n<-32768||s<-32768||n>32767||s>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const f=0|Math.round(n),v=0|Math.round(s),w=this._getKey(f,v);if(this._vertexDictionary.has(w))return this._vertexDictionary.get(w);const P=this._vertexBuffer.length/2;return this._vertexDictionary.set(w,P),this._vertexBuffer.push(f,v),P}_subdivideTrianglesScanline(n){if(this._granularity<2)return(function(v,w){const P=[];for(let T=0;T<w.length;T+=3){const D=w[T],L=w[T+1],F=w[T+2],$=v[2*D],Z=v[2*D+1];(v[2*L]-$)*(v[2*F+1]-Z)-(v[2*L+1]-Z)*(v[2*F]-$)>0?(P.push(D),P.push(F),P.push(L)):(P.push(D),P.push(L),P.push(F))}return P})(this._vertexBuffer,n);const s=[],f=n.length;for(let v=0;v<f;v+=3){const w=[n[v+0],n[v+1],n[v+2]],P=[this._vertexBuffer[2*n[v+0]+0],this._vertexBuffer[2*n[v+0]+1],this._vertexBuffer[2*n[v+1]+0],this._vertexBuffer[2*n[v+1]+1],this._vertexBuffer[2*n[v+2]+0],this._vertexBuffer[2*n[v+2]+1]];let T=1/0,D=1/0,L=-1/0,F=-1/0;for(let oe=0;oe<3;oe++){const ue=P[2*oe],de=P[2*oe+1];T=Math.min(T,ue),L=Math.max(L,ue),D=Math.min(D,de),F=Math.max(F,de)}if(T===L||D===F)continue;const $=Math.floor(T/this._granularityCellSize),Z=Math.ceil(L/this._granularityCellSize),J=Math.floor(D/this._granularityCellSize),te=Math.ceil(F/this._granularityCellSize);if($!==Z||J!==te)for(let oe=J;oe<te;oe++){const ue=this._scanlineGenerateVertexRingForCellRow(oe,P,w);Uu(this._vertexBuffer,ue,s)}else s.push(...w)}return s}_scanlineGenerateVertexRingForCellRow(n,s,f){const v=n*this._granularityCellSize,w=v+this._granularityCellSize,P=[];for(let T=0;T<3;T++){const D=s[2*T],L=s[2*T+1],F=s[2*(T+1)%6],$=s[(2*(T+1)+1)%6],Z=s[2*(T+2)%6],J=s[(2*(T+2)+1)%6],te=F-D,oe=$-L,ue=te===0,de=oe===0,Le=(v-L)/oe,xe=(w-L)/oe,Ce=Math.min(Le,xe),Ge=Math.max(Le,xe);if(!de&&(Ce>=1||Ge<=0)||de&&(L<v||L>w)){$>=v&&$<=w&&P.push(f[(T+1)%3]);continue}!de&&Ce>0&&P.push(this._vertexToIndex(D+te*Ce,L+oe*Ce));const Ye=D+te*Math.max(Ce,0),dt=D+te*Math.min(Ge,1);ue||this._generateIntraEdgeVertices(P,D,L,F,$,Ye,dt),!de&&Ge<1&&P.push(this._vertexToIndex(D+te*Ge,L+oe*Ge)),(de||$>=v&&$<=w)&&P.push(f[(T+1)%3]),!de&&($<=v||$>=w)&&this._generateInterEdgeVertices(P,D,L,F,$,Z,J,dt,v,w)}return P}_generateIntraEdgeVertices(n,s,f,v,w,P,T){const D=v-s,L=w-f,F=L===0,$=F?Math.min(s,v):Math.min(P,T),Z=F?Math.max(s,v):Math.max(P,T),J=Math.floor($/this._granularityCellSize)+1,te=Math.ceil(Z/this._granularityCellSize)-1;if(F?s<v:P<T)for(let oe=J;oe<=te;oe++){const ue=oe*this._granularityCellSize;n.push(this._vertexToIndex(ue,f+L*(ue-s)/D))}else for(let oe=te;oe>=J;oe--){const ue=oe*this._granularityCellSize;n.push(this._vertexToIndex(ue,f+L*(ue-s)/D))}}_generateInterEdgeVertices(n,s,f,v,w,P,T,D,L,F){const $=w-f,Z=P-v,J=T-w,te=(L-w)/J,oe=(F-w)/J,ue=Math.min(te,oe),de=Math.max(te,oe),Le=v+Z*ue;let xe=Math.floor(Math.min(Le,D)/this._granularityCellSize)+1,Ce=Math.ceil(Math.max(Le,D)/this._granularityCellSize)-1,Ge=D<Le;const Ye=J===0;if(Ye&&(T===L||T===F))return;if(Ye||ue>=1||de<=0){const Tt=f-T,_t=P+(s-P)*Math.min((L-T)/Tt,(F-T)/Tt);xe=Math.floor(Math.min(_t,D)/this._granularityCellSize)+1,Ce=Math.ceil(Math.max(_t,D)/this._granularityCellSize)-1,Ge=D<_t}const dt=$>0?F:L;if(Ge)for(let Tt=xe;Tt<=Ce;Tt++)n.push(this._vertexToIndex(Tt*this._granularityCellSize,dt));else for(let Tt=Ce;Tt>=xe;Tt--)n.push(this._vertexToIndex(Tt*this._granularityCellSize,dt))}_generateOutline(n){const s=[];for(const f of n){const v=bo(f,this._granularity,!0),w=this._pointArrayToIndices(v),P=[];for(let T=1;T<w.length;T++)P.push(w[T-1]),P.push(w[T]);s.push(P)}return s}_handlePoles(n){let s=!1,f=!1;this._canonical&&(this._canonical.y===0&&(s=!0),this._canonical.y===(1<<this._canonical.z)-1&&(f=!0)),(s||f)&&this._fillPoles(n,s,f)}_ensureNoPoleVertices(){const n=this._vertexBuffer;for(let s=0;s<n.length;s+=2){const f=n[s+1];f===Bc&&(n[s+1]=-32767),f===oa&&(n[s+1]=32766)}}_generatePoleQuad(n,s,f,v,w,P){v>w!=(P===Bc)?(n.push(s),n.push(f),n.push(this._vertexToIndex(v,P)),n.push(f),n.push(this._vertexToIndex(w,P)),n.push(this._vertexToIndex(v,P))):(n.push(f),n.push(s),n.push(this._vertexToIndex(v,P)),n.push(this._vertexToIndex(w,P)),n.push(f),n.push(this._vertexToIndex(v,P)))}_fillPoles(n,s,f){const v=this._vertexBuffer,w=Ct,P=n.length;for(let T=2;T<P;T+=3){const D=n[T-2],L=n[T-1],F=n[T],$=v[2*D],Z=v[2*D+1],J=v[2*L],te=v[2*L+1],oe=v[2*F],ue=v[2*F+1];s&&(Z===0&&te===0&&this._generatePoleQuad(n,D,L,$,J,Bc),te===0&&ue===0&&this._generatePoleQuad(n,L,F,J,oe,Bc),ue===0&&Z===0&&this._generatePoleQuad(n,F,D,oe,$,Bc)),f&&(Z===w&&te===w&&this._generatePoleQuad(n,D,L,$,J,oa),te===w&&ue===w&&this._generatePoleQuad(n,L,F,J,oe,oa),ue===w&&Z===w&&this._generatePoleQuad(n,F,D,oe,$,oa))}}_initializeVertices(n){for(let s=0;s<n.length;s+=2)this._vertexToIndex(n[s],n[s+1])}subdividePolygonInternal(n,s){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:f,holeIndices:v}=(function(T){const D=[],L=[];for(const F of T)if(F.length!==0){F!==T[0]&&D.push(L.length/2);for(let $=0;$<F.length;$++)L.push(F[$].x),L.push(F[$].y)}return{flattened:L,holeIndices:D}})(n);let w;this._initializeVertices(f);try{const T=(function(L,F,$=2){const Z=F&&F.length,J=Z?F[0]*$:L.length;let te=Cm(L,0,J,$,!0);const oe=[];if(!te||te.next===te.prev)return oe;let ue,de,Le;if(Z&&(te=(function(xe,Ce,Ge,Ye){const dt=[];for(let Tt=0,_t=Ce.length;Tt<_t;Tt++){const Et=Cm(xe,Ce[Tt]*Ye,Tt<_t-1?Ce[Tt+1]*Ye:xe.length,Ye,!1);Et===Et.next&&(Et.steiner=!0),dt.push(ai(Et))}dt.sort(Mm);for(let Tt=0;Tt<dt.length;Tt++)Ge=up(dt[Tt],Ge);return Ge})(L,F,te,$)),L.length>80*$){ue=L[0],de=L[1];let xe=ue,Ce=de;for(let Ge=$;Ge<J;Ge+=$){const Ye=L[Ge],dt=L[Ge+1];Ye<ue&&(ue=Ye),dt<de&&(de=dt),Ye>xe&&(xe=Ye),dt>Ce&&(Ce=dt)}Le=Math.max(xe-ue,Ce-de),Le=Le!==0?32767/Le:0}return Qa(te,oe,$,ue,de,Le,0),oe})(f,v),D=this._convertIndices(f,T);w=this._subdivideTrianglesScanline(D)}catch(T){console.error(T)}let P=[];return s&&(P=this._generateOutline(n)),this._ensureNoPoleVertices(),this._handlePoles(w),{verticesFlattened:this._vertexBuffer,indicesTriangles:w,indicesLineList:P}}_convertIndices(n,s){const f=[];for(let v=0;v<s.length;v++)f.push(this._vertexToIndex(n[2*s[v]],n[2*s[v]+1]));return f}_pointArrayToIndices(n){const s=[];for(let f=0;f<n.length;f++){const v=n[f];s.push(this._vertexToIndex(v.x,v.y))}return s}}function Ul(l,n,s,f=!0){return new Dy(s,n).subdividePolygonInternal(l,f)}function bo(l,n,s=!1){if(!l||l.length<1)return[];if(l.length<2)return[];const f=l[0],v=l[l.length-1],w=s&&(f.x!==v.x||f.y!==v.y);if(n<2)return w?[...l,l[0]]:[...l];const P=Math.floor(Ct/n),T=[];T.push(new C(l[0].x,l[0].y));const D=l.length,L=w?D:D-1;for(let F=0;F<L;F++){const $=l[F],Z=F<D-1?l[F+1]:l[0],J=$.x,te=$.y,oe=Z.x,ue=Z.y,de=J!==oe,Le=te!==ue;if(!de&&!Le)continue;const xe=oe-J,Ce=ue-te,Ge=Math.abs(xe),Ye=Math.abs(Ce);let dt=J,Tt=te;for(;;){const Et=xe>0?(Math.floor(dt/P)+1)*P:(Math.ceil(dt/P)-1)*P,Vt=Ce>0?(Math.floor(Tt/P)+1)*P:(Math.ceil(Tt/P)-1)*P,bt=Math.abs(dt-Et),wt=Math.abs(Tt-Vt),tt=Math.abs(dt-oe),Qt=Math.abs(Tt-ue),rr=de?bt/Ge:Number.POSITIVE_INFINITY,Ut=Le?wt/Ye:Number.POSITIVE_INFINITY;if((tt<=bt||!de)&&(Qt<=wt||!Le))break;if(rr<Ut&&de||!Le){dt=Et,Tt+=Ce*rr;const Bt=new C(dt,Math.round(Tt));T[T.length-1].x===Bt.x&&T[T.length-1].y===Bt.y||T.push(Bt)}else{dt+=xe*Ut,Tt=Vt;const Bt=new C(Math.round(dt),Tt);T[T.length-1].x===Bt.x&&T[T.length-1].y===Bt.y||T.push(Bt)}}const _t=new C(oe,ue);T[T.length-1].x===_t.x&&T[T.length-1].y===_t.y||T.push(_t)}return T}function Uu(l,n,s){if(n.length===0)throw new Error("Subdivision vertex ring is empty.");let f=0,v=l[2*n[0]];for(let D=1;D<n.length;D++){const L=l[2*n[D]];L<v&&(v=L,f=D)}const w=n.length;let P=f,T=(P+1)%w;for(;;){const D=P-1>=0?P-1:w-1,L=(T+1)%w,F=l[2*n[D]],$=l[2*n[L]],Z=l[2*n[P]],J=l[2*n[P]+1],te=l[2*n[T]+1];let oe=!1;if(F<$)oe=!0;else if(F>$)oe=!1;else{const ue=te-J,de=-(l[2*n[T]]-Z),Le=J<te?1:-1;((F-Z)*ue+(l[2*n[D]+1]-J)*de)*Le>(($-Z)*ue+(l[2*n[L]+1]-J)*de)*Le&&(oe=!0)}if(oe){const ue=n[D],de=n[P],Le=n[T];ue!==de&&ue!==Le&&de!==Le&&s.push(Le,de,ue),P--,P<0&&(P=w-1)}else{const ue=n[L],de=n[P],Le=n[T];ue!==de&&ue!==Le&&de!==Le&&s.push(Le,de,ue),T++,T>=w&&(T=0)}if(D===L)break}}function hp(l,n,s,f,v,w,P,T,D){const L=v.length/2,F=P&&T&&D;if(L<Er.MAX_VERTEX_ARRAY_LENGTH){const $=n.prepareSegment(L,s,f),Z=$.vertexLength;for(let oe=0;oe<w.length;oe+=3)f.emplaceBack(Z+w[oe],Z+w[oe+1],Z+w[oe+2]);let J,te;$.vertexLength+=L,$.primitiveLength+=w.length/3,F&&(te=P.prepareSegment(L,s,T),J=te.vertexLength,te.vertexLength+=L);for(let oe=0;oe<v.length;oe+=2)l(v[oe],v[oe+1]);if(F)for(let oe=0;oe<D.length;oe++){const ue=D[oe];for(let de=1;de<ue.length;de+=2)T.emplaceBack(J+ue[de-1],J+ue[de]);te.primitiveLength+=ue.length/2}}else(function($,Z,J,te,oe,ue){const de=[];for(let Ye=0;Ye<te.length/2;Ye++)de.push(-1);const Le={count:0};let xe=0,Ce=$.getOrCreateLatestSegment(Z,J),Ge=Ce.vertexLength;for(let Ye=2;Ye<oe.length;Ye+=3){const dt=oe[Ye-2],Tt=oe[Ye-1],_t=oe[Ye];let Et=de[dt]<xe,Vt=de[Tt]<xe,bt=de[_t]<xe;Ce.vertexLength+((Et?1:0)+(Vt?1:0)+(bt?1:0))>Er.MAX_VERTEX_ARRAY_LENGTH&&(Ce=$.createNewSegment(Z,J),xe=Le.count,Et=!0,Vt=!0,bt=!0,Ge=0);const wt=Fc(de,te,ue,Le,dt,Et,Ce),tt=Fc(de,te,ue,Le,Tt,Vt,Ce),Qt=Fc(de,te,ue,Le,_t,bt,Ce);J.emplaceBack(Ge+wt-xe,Ge+tt-xe,Ge+Qt-xe),Ce.primitiveLength++}})(n,s,f,v,w,l),F&&(function($,Z,J,te,oe,ue){const de=[];for(let Ye=0;Ye<te.length/2;Ye++)de.push(-1);const Le={count:0};let xe=0,Ce=$.getOrCreateLatestSegment(Z,J),Ge=Ce.vertexLength;for(let Ye=0;Ye<oe.length;Ye++){const dt=oe[Ye];for(let Tt=1;Tt<oe[Ye].length;Tt+=2){const _t=dt[Tt-1],Et=dt[Tt];let Vt=de[_t]<xe,bt=de[Et]<xe;Ce.vertexLength+((Vt?1:0)+(bt?1:0))>Er.MAX_VERTEX_ARRAY_LENGTH&&(Ce=$.createNewSegment(Z,J),xe=Le.count,Vt=!0,bt=!0,Ge=0);const wt=Fc(de,te,ue,Le,_t,Vt,Ce),tt=Fc(de,te,ue,Le,Et,bt,Ce);J.emplaceBack(Ge+wt-xe,Ge+tt-xe),Ce.primitiveLength++}}})(P,s,T,v,D,l),n.forceNewSegmentOnNextPrepare(),P?.forceNewSegmentOnNextPrepare()}function Fc(l,n,s,f,v,w,P){if(w){const T=f.count;return s(n[2*v],n[2*v+1]),l[v]=f.count,f.count++,P.vertexLength++,T}return l[v]}class qo{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ve,this.indexArray=new Zr,this.indexArray2=new rn,this.programConfigurations=new gs(n.layers,n.zoom),this.segments=new Er,this.segments2=new Er,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(n,s,f){this.hasPattern=Js("fill",this.layers,s);const v=this.layers[0].layout.get("fill-sort-key"),w=!v.isConstant(),P=[];for(const{feature:T,id:D,index:L,sourceLayerIndex:F}of n){const $=this.layers[0]._featureFilter.needGeometry,Z=jl(T,$);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),Z,f))continue;const J=w?v.evaluate(Z,{},f,s.availableImages):void 0,te={id:D,properties:T.properties,type:T.type,sourceLayerIndex:F,index:L,geometry:$?Z.geometry:Nl(T),patterns:{},sortKey:J};P.push(te)}w&&P.sort(((T,D)=>T.sortKey-D.sortKey));for(const T of P){const{geometry:D,index:L,sourceLayerIndex:F}=T;if(this.hasPattern){const $=lp("fill",this.layers,T,{zoom:this.zoom},s);this.patternFeatures.push($)}else this.addFeature(T,D,L,f,{},s.subdivisionGranularity);s.featureIndex.insert(n[L].feature,D,L,F,this.index)}}update(n,s,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,{imagePositions:f})}addFeatures(n,s,f){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,s,f,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Kf),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,f,v,w,P){for(const T of wu(s,500)){const D=Ul(T,v,P.fill.getGranularityForZoomLevel(v.z)),L=this.layoutVertexArray;hp(((F,$)=>{L.emplaceBack(F,$)}),this.segments,this.layoutVertexArray,this.indexArray,D.verticesFlattened,D.indicesTriangles,this.segments2,this.indexArray2,D.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{imagePositions:w,canonical:v})}}let Om,Uc;Dt("FillBucket",qo,{omit:["layers","patternFeatures"]});var Jf={get paint(){return Uc=Uc||new pi({"fill-antialias":new zt(ke.paint_fill["fill-antialias"]),"fill-opacity":new qt(ke.paint_fill["fill-opacity"]),"fill-color":new qt(ke.paint_fill["fill-color"]),"fill-outline-color":new qt(ke.paint_fill["fill-outline-color"]),"fill-translate":new zt(ke.paint_fill["fill-translate"]),"fill-translate-anchor":new zt(ke.paint_fill["fill-translate-anchor"]),"fill-pattern":new hs(ke.paint_fill["fill-pattern"])})},get layout(){return Om=Om||new pi({"fill-sort-key":new qt(ke.layout_fill["fill-sort-key"])})}};class ed extends Ka{constructor(n,s){super(n,Jf,s)}recalculate(n,s){super.recalculate(n,s);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new qo(n)}queryRadius(){return yi(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:n,geometry:s,transform:f,pixelsToTileUnits:v}){return ym(Hf(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-f.bearingInRadians,v),s)}isTileClipped(){return!0}}const Hh=wn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Iy=wn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Oy}=Hh;class el{constructor(n,s,f,v,w){this.properties={},this.extent=f,this.type=0,this.id=void 0,this._pbf=n,this._geometry=-1,this._keys=v,this._values=w,n.readFields(ky,this,s)}loadGeometry(){const n=this._pbf;n.pos=this._geometry;const s=n.readVarint()+n.pos,f=[];let v,w=1,P=0,T=0,D=0;for(;n.pos<s;){if(P<=0){const L=n.readVarint();w=7&L,P=L>>3}if(P--,w===1||w===2)T+=n.readSVarint(),D+=n.readSVarint(),w===1&&(v&&f.push(v),v=[]),v&&v.push(new C(T,D));else{if(w!==7)throw new Error(`unknown command ${w}`);v&&v.push(v[0].clone())}}return v&&f.push(v),f}bbox(){const n=this._pbf;n.pos=this._geometry;const s=n.readVarint()+n.pos;let f=1,v=0,w=0,P=0,T=1/0,D=-1/0,L=1/0,F=-1/0;for(;n.pos<s;){if(v<=0){const $=n.readVarint();f=7&$,v=$>>3}if(v--,f===1||f===2)w+=n.readSVarint(),P+=n.readSVarint(),w<T&&(T=w),w>D&&(D=w),P<L&&(L=P),P>F&&(F=P);else if(f!==7)throw new Error(`unknown command ${f}`)}return[T,L,D,F]}toGeoJSON(n,s,f){const v=this.extent*Math.pow(2,f),w=this.extent*n,P=this.extent*s,T=this.loadGeometry();function D(Z){return[360*(Z.x+w)/v-180,360/Math.PI*Math.atan(Math.exp((1-2*(Z.y+P)/v)*Math.PI))-90]}function L(Z){return Z.map(D)}let F;if(this.type===1){const Z=[];for(const te of T)Z.push(te[0]);const J=L(Z);F=Z.length===1?{type:"Point",coordinates:J[0]}:{type:"MultiPoint",coordinates:J}}else if(this.type===2){const Z=T.map(L);F=Z.length===1?{type:"LineString",coordinates:Z[0]}:{type:"MultiLineString",coordinates:Z}}else{if(this.type!==3)throw new Error("unknown feature type");{const Z=(function(te){const oe=te.length;if(oe<=1)return[te];const ue=[];let de,Le;for(let xe=0;xe<oe;xe++){const Ce=fp(te[xe]);Ce!==0&&(Le===void 0&&(Le=Ce<0),Le===Ce<0?(de&&ue.push(de),de=[te[xe]]):de&&de.push(te[xe]))}return de&&ue.push(de),ue})(T),J=[];for(const te of Z)J.push(te.map(L));F=J.length===1?{type:"Polygon",coordinates:J[0]}:{type:"MultiPolygon",coordinates:J}}}const $={type:"Feature",geometry:F,properties:this.properties};return this.id!=null&&($.id=this.id),$}}function ky(l,n,s){l===1?n.id=s.readVarint():l===2?(function(f,v){const w=f.readVarint()+f.pos;for(;f.pos<w;){const P=v._keys[f.readVarint()],T=v._values[f.readVarint()];v.properties[P]=T}})(s,n):l===3?n.type=s.readVarint():l===4&&(n._geometry=s.pos)}function fp(l){let n=0;for(let s,f,v=0,w=l.length,P=w-1;v<w;P=v++)s=l[v],f=l[P],n+=(f.x-s.x)*(s.y+f.y);return n}el.types=["Unknown","Point","LineString","Polygon"];class km{constructor(n,s){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(d_,this,s),this.length=this._features.length}feature(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];const s=this._pbf.readVarint()+this._pbf.pos;return new el(this._pbf,s,this.extent,this._keys,this._values)}}function d_(l,n,s){l===15?n.version=s.readVarint():l===1?n.name=s.readString():l===5?n.extent=s.readVarint():l===2?n._features.push(s.pos):l===3?n._keys.push(s.readString()):l===4&&n._values.push((function(f){let v=null;const w=f.readVarint()+f.pos;for(;f.pos<w;){const P=f.readVarint()>>3;v=P===1?f.readString():P===2?f.readFloat():P===3?f.readDouble():P===4?f.readVarint64():P===5?f.readVarint():P===6?f.readSVarint():P===7?f.readBoolean():null}if(v==null)throw new Error("unknown feature value");return v})(s))}class Ly{constructor(n,s){this.layers=n.readFields(nn,{},s)}}function nn(l,n,s){if(l===3){const f=new km(s,s.readVarint()+s.pos);f.length&&(n[f.name]=f)}}const fn=Math.pow(2,13);function Cr(l,n,s,f,v,w,P,T){l.emplaceBack(n,s,2*Math.floor(f*fn)+P,v*fn*2,w*fn*2,Math.round(T))}class Nr{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Xe,this.centroidVertexArray=new Ze,this.indexArray=new Zr,this.programConfigurations=new gs(n.layers,n.zoom),this.segments=new Er,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(n,s,f){this.features=[],this.hasPattern=Js("fill-extrusion",this.layers,s);for(const{feature:v,id:w,index:P,sourceLayerIndex:T}of n){const D=this.layers[0]._featureFilter.needGeometry,L=jl(v,D);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),L,f))continue;const F={id:w,sourceLayerIndex:T,index:P,geometry:D?L.geometry:Nl(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push(lp("fill-extrusion",this.layers,F,{zoom:this.zoom},s)):this.addFeature(F,F.geometry,P,f,{},s.subdivisionGranularity),s.featureIndex.insert(v,F.geometry,P,T,this.index,!0)}}addFeatures(n,s,f){for(const v of this.features){const{geometry:w}=v;this.addFeature(v,w,v.index,s,f,n.subdivisionGranularity)}}update(n,s,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,{imagePositions:f})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Oy),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,Iy.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,f,v,w,P){for(const T of wu(s,500)){const D={x:0,y:0,sampleCount:0},L=this.layoutVertexArray.length;this.processPolygon(D,v,n,T,P);const F=this.layoutVertexArray.length-L,$=Math.floor(D.x/D.sampleCount),Z=Math.floor(D.y/D.sampleCount);for(let J=0;J<F;J++)this.centroidVertexArray.emplaceBack($,Z)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{imagePositions:w,canonical:v})}processPolygon(n,s,f,v,w){if(v.length<1||$l(v[0]))return;for(const $ of v)$.length!==0&&an(n,$);const P={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},T=w.fill.getGranularityForZoomLevel(s.z),D=el.types[f.type]==="Polygon";for(const $ of v){if($.length===0||$l($))continue;const Z=bo($,T,D);this._generateSideFaces(Z,P)}if(!D)return;const L=Ul(v,s,T,!1),F=this.layoutVertexArray;hp((($,Z)=>{Cr(F,$,Z,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,L.verticesFlattened,L.indicesTriangles)}_generateSideFaces(n,s){let f=0;for(let v=1;v<n.length;v++){const w=n[v],P=n[v-1];if(xo(w,P))continue;s.segment.vertexLength+4>Er.MAX_VERTEX_ARRAY_LENGTH&&(s.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const T=w.sub(P)._perp()._unit(),D=P.dist(w);f+D>32768&&(f=0),Cr(this.layoutVertexArray,w.x,w.y,T.x,T.y,0,0,f),Cr(this.layoutVertexArray,w.x,w.y,T.x,T.y,0,1,f),f+=D,Cr(this.layoutVertexArray,P.x,P.y,T.x,T.y,0,0,f),Cr(this.layoutVertexArray,P.x,P.y,T.x,T.y,0,1,f);const L=s.segment.vertexLength;this.indexArray.emplaceBack(L,L+2,L+1),this.indexArray.emplaceBack(L+1,L+2,L+3),s.segment.vertexLength+=4,s.segment.primitiveLength+=2}}}function an(l,n){for(let s=0;s<n.length;s++){const f=n[s];s===n.length-1&&n[0].x===f.x&&n[0].y===f.y||(l.x+=f.x,l.y+=f.y,l.sampleCount++)}}function xo(l,n){return l.x===n.x&&(l.x<0||l.x>Ct)||l.y===n.y&&(l.y<0||l.y>Ct)}function $l(l){return l.every((n=>n.x<0))||l.every((n=>n.x>Ct))||l.every((n=>n.y<0))||l.every((n=>n.y>Ct))}let $c;Dt("FillExtrusionBucket",Nr,{omit:["layers","features"]});var Lm={get paint(){return $c=$c||new pi({"fill-extrusion-opacity":new zt(ke["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new qt(ke["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new zt(ke["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new zt(ke["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new hs(ke["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new qt(ke["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new qt(ke["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new zt(ke["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Vl extends Ka{constructor(n,s){super(n,Lm,s)}createBucket(n){return new Nr(n)}queryRadius(){return yi(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:n,feature:s,featureState:f,geometry:v,transform:w,pixelsToTileUnits:P,pixelPosMatrix:T}){const D=Hf(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-w.bearingInRadians,P),L=this.paint.get("fill-extrusion-height").evaluate(s,f),F=this.paint.get("fill-extrusion-base").evaluate(s,f),$=(function(J,te){const oe=[];for(const ue of J){const de=[ue.x,ue.y,0,1];It(de,de,te),oe.push(new C(de[0]/de[3],de[1]/de[3]))}return oe})(D,T),Z=(function(J,te,oe,ue){const de=[],Le=[],xe=ue[8]*te,Ce=ue[9]*te,Ge=ue[10]*te,Ye=ue[11]*te,dt=ue[8]*oe,Tt=ue[9]*oe,_t=ue[10]*oe,Et=ue[11]*oe;for(const Vt of J){const bt=[],wt=[];for(const tt of Vt){const Qt=tt.x,rr=tt.y,Ut=ue[0]*Qt+ue[4]*rr+ue[12],Bt=ue[1]*Qt+ue[5]*rr+ue[13],Ar=ue[2]*Qt+ue[6]*rr+ue[14],on=ue[3]*Qt+ue[7]*rr+ue[15],li=Ar+Ge,Ei=on+Ye,_a=Ut+dt,ba=Bt+Tt,Mi=Ar+_t,sn=on+Et,Wn=new C((Ut+xe)/Ei,(Bt+Ce)/Ei);Wn.z=li/Ei,bt.push(Wn);const _i=new C(_a/sn,ba/sn);_i.z=Mi/sn,wt.push(_i)}de.push(bt),Le.push(wt)}return[de,Le]})(v,F,L,T);return(function(J,te,oe){let ue=1/0;ym(oe,te)&&(ue=Hl(oe,te[0]));for(let de=0;de<te.length;de++){const Le=te[de],xe=J[de];for(let Ce=0;Ce<Le.length-1;Ce++){const Ge=Le[Ce],Ye=[Ge,Le[Ce+1],xe[Ce+1],xe[Ce],Ge];Uf(oe,Ye)&&(ue=Math.min(ue,Hl(oe,Ye)))}}return ue!==1/0&&ue})(Z[0],Z[1],$)}}function Sn(l,n){return l.x*n.x+l.y*n.y}function Hl(l,n){if(l.length===1){let s=0;const f=n[s++];let v;for(;!v||f.equals(v);)if(v=n[s++],!v)return 1/0;for(;s<n.length;s++){const w=n[s],P=l[0],T=v.sub(f),D=w.sub(f),L=P.sub(f),F=Sn(T,T),$=Sn(T,D),Z=Sn(D,D),J=Sn(L,T),te=Sn(L,D),oe=F*Z-$*$,ue=(Z*J-$*te)/oe,de=(F*te-$*J)/oe,Le=f.z*(1-ue-de)+v.z*ue+w.z*de;if(isFinite(Le))return Le}return 1/0}{let s=1/0;for(const f of n)s=Math.min(s,f.z);return s}}const Vc=wn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:zm}=Vc,Go=wn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:qh}=Go,td=Math.cos(Math.PI/180*37.5),Na=Math.pow(2,14)/.5;class rd{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((s=>{this.gradients[s.id]={}})),this.layoutVertexArray=new Pt,this.layoutVertexArray2=new xt,this.indexArray=new Zr,this.programConfigurations=new gs(n.layers,n.zoom),this.segments=new Er,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(n,s,f){this.hasPattern=Js("line",this.layers,s);const v=this.layers[0].layout.get("line-sort-key"),w=!v.isConstant(),P=[];for(const{feature:T,id:D,index:L,sourceLayerIndex:F}of n){const $=this.layers[0]._featureFilter.needGeometry,Z=jl(T,$);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),Z,f))continue;const J=w?v.evaluate(Z,{},f):void 0,te={id:D,properties:T.properties,type:T.type,sourceLayerIndex:F,index:L,geometry:$?Z.geometry:Nl(T),patterns:{},sortKey:J};P.push(te)}w&&P.sort(((T,D)=>T.sortKey-D.sortKey));for(const T of P){const{geometry:D,index:L,sourceLayerIndex:F}=T;if(this.hasPattern){const $=lp("line",this.layers,T,{zoom:this.zoom},s);this.patternFeatures.push($)}else this.addFeature(T,D,L,f,{},s.subdivisionGranularity);s.featureIndex.insert(n[L].feature,D,L,F,this.index)}}update(n,s,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,{imagePositions:f})}addFeatures(n,s,f){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,s,f,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,qh)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,zm),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,f,v,w,P){const T=this.layers[0].layout,D=T.get("line-join").evaluate(n,{}),L=T.get("line-cap"),F=T.get("line-miter-limit"),$=T.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const Z of s)this.addLine(Z,n,D,L,F,$,v,P);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{imagePositions:w,canonical:v})}addLine(n,s,f,v,w,P,T,D){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,n=bo(n,T?D.line.getGranularityForZoomLevel(T.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let xe=0;xe<n.length-1;xe++)this.totalDistance+=n[xe].dist(n[xe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const L=el.types[s.type]==="Polygon";let F=n.length;for(;F>=2&&n[F-1].equals(n[F-2]);)F--;let $=0;for(;$<F-1&&n[$].equals(n[$+1]);)$++;if(F<(L?3:2))return;f==="bevel"&&(w=1.05);const Z=this.overscaling<=16?122880/(512*this.overscaling):0,J=this.segments.prepareSegment(10*F,this.layoutVertexArray,this.indexArray);let te,oe,ue,de,Le;this.e1=this.e2=-1,L&&(te=n[F-2],Le=n[$].sub(te)._unit()._perp());for(let xe=$;xe<F;xe++){if(ue=xe===F-1?L?n[$+1]:void 0:n[xe+1],ue&&n[xe].equals(ue))continue;Le&&(de=Le),te&&(oe=te),te=n[xe],Le=ue?ue.sub(te)._unit()._perp():de,de=de||Le;let Ce=de.add(Le);Ce.x===0&&Ce.y===0||Ce._unit();const Ge=de.x*Le.x+de.y*Le.y,Ye=Ce.x*Le.x+Ce.y*Le.y,dt=Ye!==0?1/Ye:1/0,Tt=2*Math.sqrt(2-2*Ye),_t=Ye<td&&oe&&ue,Et=de.x*Le.y-de.y*Le.x>0;if(_t&&xe>$){const wt=te.dist(oe);if(wt>2*Z){const tt=te.sub(te.sub(oe)._mult(Z/wt)._round());this.updateDistance(oe,tt),this.addCurrentVertex(tt,de,0,0,J),oe=tt}}const Vt=oe&&ue;let bt=Vt?f:L?"butt":v;if(Vt&&bt==="round"&&(dt<P?bt="miter":dt<=2&&(bt="fakeround")),bt==="miter"&&dt>w&&(bt="bevel"),bt==="bevel"&&(dt>2&&(bt="flipbevel"),dt<w&&(bt="miter")),oe&&this.updateDistance(oe,te),bt==="miter")Ce._mult(dt),this.addCurrentVertex(te,Ce,0,0,J);else if(bt==="flipbevel"){if(dt>100)Ce=Le.mult(-1);else{const wt=dt*de.add(Le).mag()/de.sub(Le).mag();Ce._perp()._mult(wt*(Et?-1:1))}this.addCurrentVertex(te,Ce,0,0,J),this.addCurrentVertex(te,Ce.mult(-1),0,0,J)}else if(bt==="bevel"||bt==="fakeround"){const wt=-Math.sqrt(dt*dt-1),tt=Et?wt:0,Qt=Et?0:wt;if(oe&&this.addCurrentVertex(te,de,tt,Qt,J),bt==="fakeround"){const rr=Math.round(180*Tt/Math.PI/20);for(let Ut=1;Ut<rr;Ut++){let Bt=Ut/rr;if(Bt!==.5){const on=Bt-.5;Bt+=Bt*on*(Bt-1)*((1.0904+Ge*(Ge*(3.55645-1.43519*Ge)-3.2452))*on*on+(.848013+Ge*(.215638*Ge-1.06021)))}const Ar=Le.sub(de)._mult(Bt)._add(de)._unit()._mult(Et?-1:1);this.addHalfVertex(te,Ar.x,Ar.y,!1,Et,0,J)}}ue&&this.addCurrentVertex(te,Le,-tt,-Qt,J)}else if(bt==="butt")this.addCurrentVertex(te,Ce,0,0,J);else if(bt==="square"){const wt=oe?1:-1;this.addCurrentVertex(te,Ce,wt,wt,J)}else bt==="round"&&(oe&&(this.addCurrentVertex(te,de,0,0,J),this.addCurrentVertex(te,de,1,1,J,!0)),ue&&(this.addCurrentVertex(te,Le,-1,-1,J,!0),this.addCurrentVertex(te,Le,0,0,J)));if(_t&&xe<F-1){const wt=te.dist(ue);if(wt>2*Z){const tt=te.add(ue.sub(te)._mult(Z/wt)._round());this.updateDistance(te,tt),this.addCurrentVertex(tt,Le,0,0,J),te=tt}}}}addCurrentVertex(n,s,f,v,w,P=!1){const T=s.y*v-s.x,D=-s.y-s.x*v;this.addHalfVertex(n,s.x+s.y*f,s.y-s.x*f,P,!1,f,w),this.addHalfVertex(n,T,D,P,!0,-v,w),this.distance>Na/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,f,v,w,P))}addHalfVertex({x:n,y:s},f,v,w,P,T,D){const L=.5*(this.lineClips?this.scaledDistance*(Na-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(w?1:0),(s<<1)+(P?1:0),Math.round(63*f)+128,Math.round(63*v)+128,1+(T===0?0:T<0?-1:1)|(63&L)<<2,L>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const F=D.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,F,this.e2),D.primitiveLength++),P?this.e2=F:this.e1=F}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let dp,nd;Dt("LineBucket",rd,{omit:["layers","patternFeatures"]});var id={get paint(){return nd=nd||new pi({"line-opacity":new qt(ke.paint_line["line-opacity"]),"line-color":new qt(ke.paint_line["line-color"]),"line-translate":new zt(ke.paint_line["line-translate"]),"line-translate-anchor":new zt(ke.paint_line["line-translate-anchor"]),"line-width":new qt(ke.paint_line["line-width"]),"line-gap-width":new qt(ke.paint_line["line-gap-width"]),"line-offset":new qt(ke.paint_line["line-offset"]),"line-blur":new qt(ke.paint_line["line-blur"]),"line-dasharray":new Ff(ke.paint_line["line-dasharray"]),"line-pattern":new hs(ke.paint_line["line-pattern"]),"line-gradient":new xn(ke.paint_line["line-gradient"])})},get layout(){return dp=dp||new pi({"line-cap":new zt(ke.layout_line["line-cap"]),"line-join":new qt(ke.layout_line["line-join"]),"line-miter-limit":new zt(ke.layout_line["line-miter-limit"]),"line-round-limit":new zt(ke.layout_line["line-round-limit"]),"line-sort-key":new qt(ke.layout_line["line-sort-key"])})}};class $u extends qt{possiblyEvaluate(n,s){return s=new Vr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,f,v){return s=Jt({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,f,v)}}let vi;class Vu extends Ka{constructor(n,s){super(n,id,s),this.gradientVersion=0,vi||(vi=new $u(id.paint.properties["line-width"].specification),vi.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!(function(f){return f._styleExpression!==void 0})(s)&&s._styleExpression.expression instanceof On,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=vi.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new rd(n)}queryRadius(n){const s=n,f=Hc(qn("line-width",this,s),qn("line-gap-width",this,s)),v=qn("line-offset",this,s);return f/2+Math.abs(v)+yi(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:n,feature:s,featureState:f,geometry:v,transform:w,pixelsToTileUnits:P}){const T=Hf(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-w.bearingInRadians,P),D=P/2*Hc(this.paint.get("line-width").evaluate(s,f),this.paint.get("line-gap-width").evaluate(s,f)),L=this.paint.get("line-offset").evaluate(s,f);return L&&(v=(function(F,$){const Z=[];for(let J=0;J<F.length;J++){const te=F[J],oe=[];for(let ue=0;ue<te.length;ue++){const de=te[ue-1],Le=te[ue],xe=te[ue+1],Ce=ue===0?new C(0,0):Le.sub(de)._unit()._perp(),Ge=ue===te.length-1?new C(0,0):xe.sub(Le)._unit()._perp(),Ye=Ce._add(Ge)._unit(),dt=Ye.x*Ge.x+Ye.y*Ge.y;dt!==0&&Ye._mult(1/dt),oe.push(Ye._mult($)._add(Le))}Z.push(oe)}return Z})(v,L*P)),(function(F,$,Z){for(let J=0;J<$.length;J++){const te=$[J];if(F.length>=3){for(let oe=0;oe<te.length;oe++)if(Uh(F,te[oe]))return!0}if(my(F,te,Z))return!0}return!1})(T,v,D)}isTileClipped(){return!0}}function Hc(l,n){return n>0?n+2*l:l}const Gh=wn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Nm=wn([{name:"a_projected_pos",components:3,type:"Float32"}],4);wn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const jm=wn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);wn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Bm=wn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ad=wn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Fm(l,n,s){return l.sections.forEach((f=>{f.text=(function(v,w,P){const T=w.layout.get("text-transform").evaluate(P,{});return T==="uppercase"?v=v.toLocaleUpperCase():T==="lowercase"&&(v=v.toLocaleLowerCase()),po.applyArabicShaping&&(v=po.applyArabicShaping(v)),v})(f.text,n,s)})),l}wn([{name:"triangle",components:3,type:"Uint16"}]),wn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),wn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),wn([{type:"Float32",name:"offsetX"}]),wn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),wn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const sa={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var oi=24;const ja=4294967296,Um=1/ja,$m=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Vm{constructor(n=new Uint8Array(16)){this.buf=ArrayBuffer.isView(n)?n:new Uint8Array(n),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(n,s,f=this.length){for(;this.pos<f;){const v=this.readVarint(),w=v>>3,P=this.pos;this.type=7&v,n(w,s,this),this.pos===P&&this.skip(v)}return s}readMessage(n,s){return this.readFields(n,s,this.readVarint()+this.pos)}readFixed32(){const n=this.dataView.getUint32(this.pos,!0);return this.pos+=4,n}readSFixed32(){const n=this.dataView.getInt32(this.pos,!0);return this.pos+=4,n}readFixed64(){const n=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*ja;return this.pos+=8,n}readSFixed64(){const n=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*ja;return this.pos+=8,n}readFloat(){const n=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,n}readDouble(){const n=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,n}readVarint(n){const s=this.buf;let f,v;return v=s[this.pos++],f=127&v,v<128?f:(v=s[this.pos++],f|=(127&v)<<7,v<128?f:(v=s[this.pos++],f|=(127&v)<<14,v<128?f:(v=s[this.pos++],f|=(127&v)<<21,v<128?f:(v=s[this.pos],f|=(15&v)<<28,(function(w,P,T){const D=T.buf;let L,F;if(F=D[T.pos++],L=(112&F)>>4,F<128||(F=D[T.pos++],L|=(127&F)<<3,F<128)||(F=D[T.pos++],L|=(127&F)<<10,F<128)||(F=D[T.pos++],L|=(127&F)<<17,F<128)||(F=D[T.pos++],L|=(127&F)<<24,F<128)||(F=D[T.pos++],L|=(1&F)<<31,F<128))return wo(w,L,P);throw new Error("Expected varint not more than 10 bytes")})(f,n,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const n=this.readVarint();return n%2==1?(n+1)/-2:n/2}readBoolean(){return!!this.readVarint()}readString(){const n=this.readVarint()+this.pos,s=this.pos;return this.pos=n,n-s>=12&&$m?$m.decode(this.buf.subarray(s,n)):(function(f,v,w){let P="",T=v;for(;T<w;){const D=f[T];let L,F,$,Z=null,J=D>239?4:D>223?3:D>191?2:1;if(T+J>w)break;J===1?D<128&&(Z=D):J===2?(L=f[T+1],(192&L)==128&&(Z=(31&D)<<6|63&L,Z<=127&&(Z=null))):J===3?(L=f[T+1],F=f[T+2],(192&L)==128&&(192&F)==128&&(Z=(15&D)<<12|(63&L)<<6|63&F,(Z<=2047||Z>=55296&&Z<=57343)&&(Z=null))):J===4&&(L=f[T+1],F=f[T+2],$=f[T+3],(192&L)==128&&(192&F)==128&&(192&$)==128&&(Z=(15&D)<<18|(63&L)<<12|(63&F)<<6|63&$,(Z<=65535||Z>=1114112)&&(Z=null))),Z===null?(Z=65533,J=1):Z>65535&&(Z-=65536,P+=String.fromCharCode(Z>>>10&1023|55296),Z=56320|1023&Z),P+=String.fromCharCode(Z),T+=J}return P})(this.buf,s,n)}readBytes(){const n=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,n);return this.pos=n,s}readPackedVarint(n=[],s){const f=this.readPackedEnd();for(;this.pos<f;)n.push(this.readVarint(s));return n}readPackedSVarint(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readSVarint());return n}readPackedBoolean(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readBoolean());return n}readPackedFloat(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readFloat());return n}readPackedDouble(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readDouble());return n}readPackedFixed32(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readFixed32());return n}readPackedSFixed32(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readSFixed32());return n}readPackedFixed64(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readFixed64());return n}readPackedSFixed64(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readSFixed64());return n}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(n){const s=7&n;if(s===0)for(;this.buf[this.pos++]>127;);else if(s===2)this.pos=this.readVarint()+this.pos;else if(s===5)this.pos+=4;else{if(s!==1)throw new Error(`Unimplemented type: ${s}`);this.pos+=8}}writeTag(n,s){this.writeVarint(n<<3|s)}realloc(n){let s=this.length||16;for(;s<this.pos+n;)s*=2;if(s!==this.length){const f=new Uint8Array(s);f.set(this.buf),this.buf=f,this.dataView=new DataView(f.buffer),this.length=s}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(n){this.realloc(4),this.dataView.setInt32(this.pos,n,!0),this.pos+=4}writeSFixed32(n){this.realloc(4),this.dataView.setInt32(this.pos,n,!0),this.pos+=4}writeFixed64(n){this.realloc(8),this.dataView.setInt32(this.pos,-1&n,!0),this.dataView.setInt32(this.pos+4,Math.floor(n*Um),!0),this.pos+=8}writeSFixed64(n){this.realloc(8),this.dataView.setInt32(this.pos,-1&n,!0),this.dataView.setInt32(this.pos+4,Math.floor(n*Um),!0),this.pos+=8}writeVarint(n){(n=+n||0)>268435455||n<0?(function(s,f){let v,w;if(s>=0?(v=s%4294967296|0,w=s/4294967296|0):(v=~(-s%4294967296),w=~(-s/4294967296),4294967295^v?v=v+1|0:(v=0,w=w+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),(function(P,T,D){D.buf[D.pos++]=127&P|128,P>>>=7,D.buf[D.pos++]=127&P|128,P>>>=7,D.buf[D.pos++]=127&P|128,P>>>=7,D.buf[D.pos++]=127&P|128,D.buf[D.pos]=127&(P>>>=7)})(v,0,f),(function(P,T){const D=(7&P)<<4;T.buf[T.pos++]|=D|((P>>>=3)?128:0),P&&(T.buf[T.pos++]=127&P|((P>>>=7)?128:0),P&&(T.buf[T.pos++]=127&P|((P>>>=7)?128:0),P&&(T.buf[T.pos++]=127&P|((P>>>=7)?128:0),P&&(T.buf[T.pos++]=127&P|((P>>>=7)?128:0),P&&(T.buf[T.pos++]=127&P)))))})(w,f)})(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))}writeSVarint(n){this.writeVarint(n<0?2*-n-1:2*n)}writeBoolean(n){this.writeVarint(+n)}writeString(n){n=String(n),this.realloc(4*n.length),this.pos++;const s=this.pos;this.pos=(function(v,w,P){for(let T,D,L=0;L<w.length;L++){if(T=w.charCodeAt(L),T>55295&&T<57344){if(!D){T>56319||L+1===w.length?(v[P++]=239,v[P++]=191,v[P++]=189):D=T;continue}if(T<56320){v[P++]=239,v[P++]=191,v[P++]=189,D=T;continue}T=D-55296<<10|T-56320|65536,D=null}else D&&(v[P++]=239,v[P++]=191,v[P++]=189,D=null);T<128?v[P++]=T:(T<2048?v[P++]=T>>6|192:(T<65536?v[P++]=T>>12|224:(v[P++]=T>>18|240,v[P++]=T>>12&63|128),v[P++]=T>>6&63|128),v[P++]=63&T|128)}return P})(this.buf,n,this.pos);const f=this.pos-s;f>=128&&od(s,f,this),this.pos=s-1,this.writeVarint(f),this.pos+=f}writeFloat(n){this.realloc(4),this.dataView.setFloat32(this.pos,n,!0),this.pos+=4}writeDouble(n){this.realloc(8),this.dataView.setFloat64(this.pos,n,!0),this.pos+=8}writeBytes(n){const s=n.length;this.writeVarint(s),this.realloc(s);for(let f=0;f<s;f++)this.buf[this.pos++]=n[f]}writeRawMessage(n,s){this.pos++;const f=this.pos;n(s,this);const v=this.pos-f;v>=128&&od(f,v,this),this.pos=f-1,this.writeVarint(v),this.pos+=v}writeMessage(n,s,f){this.writeTag(n,2),this.writeRawMessage(s,f)}writePackedVarint(n,s){s.length&&this.writeMessage(n,Hm,s)}writePackedSVarint(n,s){s.length&&this.writeMessage(n,Wh,s)}writePackedBoolean(n,s){s.length&&this.writeMessage(n,jy,s)}writePackedFloat(n,s){s.length&&this.writeMessage(n,zy,s)}writePackedDouble(n,s){s.length&&this.writeMessage(n,Ny,s)}writePackedFixed32(n,s){s.length&&this.writeMessage(n,qm,s)}writePackedSFixed32(n,s){s.length&&this.writeMessage(n,Gm,s)}writePackedFixed64(n,s){s.length&&this.writeMessage(n,p_,s)}writePackedSFixed64(n,s){s.length&&this.writeMessage(n,m_,s)}writeBytesField(n,s){this.writeTag(n,2),this.writeBytes(s)}writeFixed32Field(n,s){this.writeTag(n,5),this.writeFixed32(s)}writeSFixed32Field(n,s){this.writeTag(n,5),this.writeSFixed32(s)}writeFixed64Field(n,s){this.writeTag(n,1),this.writeFixed64(s)}writeSFixed64Field(n,s){this.writeTag(n,1),this.writeSFixed64(s)}writeVarintField(n,s){this.writeTag(n,0),this.writeVarint(s)}writeSVarintField(n,s){this.writeTag(n,0),this.writeSVarint(s)}writeStringField(n,s){this.writeTag(n,2),this.writeString(s)}writeFloatField(n,s){this.writeTag(n,5),this.writeFloat(s)}writeDoubleField(n,s){this.writeTag(n,1),this.writeDouble(s)}writeBooleanField(n,s){this.writeVarintField(n,+s)}}function wo(l,n,s){return s?4294967296*n+(l>>>0):4294967296*(n>>>0)+(l>>>0)}function od(l,n,s){const f=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(f);for(let v=s.pos-1;v>=l;v--)s.buf[v+f]=s.buf[v]}function Hm(l,n){for(let s=0;s<l.length;s++)n.writeVarint(l[s])}function Wh(l,n){for(let s=0;s<l.length;s++)n.writeSVarint(l[s])}function zy(l,n){for(let s=0;s<l.length;s++)n.writeFloat(l[s])}function Ny(l,n){for(let s=0;s<l.length;s++)n.writeDouble(l[s])}function jy(l,n){for(let s=0;s<l.length;s++)n.writeBoolean(l[s])}function qm(l,n){for(let s=0;s<l.length;s++)n.writeFixed32(l[s])}function Gm(l,n){for(let s=0;s<l.length;s++)n.writeSFixed32(l[s])}function p_(l,n){for(let s=0;s<l.length;s++)n.writeFixed64(l[s])}function m_(l,n){for(let s=0;s<l.length;s++)n.writeSFixed64(l[s])}function g_(l,n,s){l===1&&s.readMessage(By,n)}function By(l,n,s){if(l===3){const{id:f,bitmap:v,width:w,height:P,left:T,top:D,advance:L}=s.readMessage(Fy,{});n.push({id:f,bitmap:new $h({width:w+6,height:P+6},v),metrics:{width:w,height:P,left:T,top:D,advance:L}})}}function Fy(l,n,s){l===1?n.id=s.readVarint():l===2?n.bitmap=s.readBytes():l===3?n.width=s.readVarint():l===4?n.height=s.readVarint():l===5?n.left=s.readSVarint():l===6?n.top=s.readSVarint():l===7&&(n.advance=s.readVarint())}function qc(l){let n=0,s=0;for(const P of l)n+=P.w*P.h,s=Math.max(s,P.w);l.sort(((P,T)=>T.h-P.h));const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let v=0,w=0;for(const P of l)for(let T=f.length-1;T>=0;T--){const D=f[T];if(!(P.w>D.w||P.h>D.h)){if(P.x=D.x,P.y=D.y,w=Math.max(w,P.y+P.h),v=Math.max(v,P.x+P.w),P.w===D.w&&P.h===D.h){const L=f.pop();L&&T<f.length&&(f[T]=L)}else P.h===D.h?(D.x+=P.w,D.w-=P.w):P.w===D.w?(D.y+=P.h,D.h-=P.h):(f.push({x:D.x+P.w,y:D.y,w:D.w-P.w,h:P.h}),D.y+=P.h,D.h-=P.h);break}}return{w:v,h:w,fill:n/(v*w)||0}}class Zh{constructor(n,{pixelRatio:s,version:f,stretchX:v,stretchY:w,content:P,textFitWidth:T,textFitHeight:D}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=v,this.stretchY=w,this.content=P,this.version=f,this.textFitWidth=T,this.textFitHeight=D}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Wm{constructor(n,s){const f={},v={};this.haveRenderCallbacks=[];const w=[];this.addImages(n,f,w),this.addImages(s,v,w);const{w:P,h:T}=qc(w),D=new ia({width:P||1,height:T||1});for(const L in n){const F=n[L],$=f[L].paddedRect;ia.copy(F.data,D,{x:0,y:0},{x:$.x+1,y:$.y+1},F.data)}for(const L in s){const F=s[L],$=v[L].paddedRect,Z=$.x+1,J=$.y+1,te=F.data.width,oe=F.data.height;ia.copy(F.data,D,{x:0,y:0},{x:Z,y:J},F.data),ia.copy(F.data,D,{x:0,y:oe-1},{x:Z,y:J-1},{width:te,height:1}),ia.copy(F.data,D,{x:0,y:0},{x:Z,y:J+oe},{width:te,height:1}),ia.copy(F.data,D,{x:te-1,y:0},{x:Z-1,y:J},{width:1,height:oe}),ia.copy(F.data,D,{x:0,y:0},{x:Z+te,y:J},{width:1,height:oe})}this.image=D,this.iconPositions=f,this.patternPositions=v}addImages(n,s,f){for(const v in n){const w=n[v],P={x:0,y:0,w:w.data.width+2,h:w.data.height+2};f.push(P),s[v]=new Zh(P,w),w.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in n.updatedImages)this.patchUpdatedImage(this.iconPositions[f],n.getImage(f),s),this.patchUpdatedImage(this.patternPositions[f],n.getImage(f),s)}patchUpdatedImage(n,s,f){if(!n||!s||n.version===s.version)return;n.version=s.version;const[v,w]=n.tl;f.update(s.data,void 0,{x:v,y:w})}}var ql;Dt("ImagePosition",Zh),Dt("ImageAtlas",Wm),y.ao=void 0,(ql=y.ao||(y.ao={}))[ql.none=0]="none",ql[ql.horizontal=1]="horizontal",ql[ql.vertical=2]="vertical",ql[ql.horizontalOnly=3]="horizontalOnly";class Xh{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(n,s,f){const v=new Xh;return v.scale=n||1,v.fontStack=s,v.verticalAlign=f||"bottom",v}static forImage(n,s){const f=new Xh;return f.imageName=n,f.verticalAlign=s||"bottom",f}}class Gc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const f=new Gc;for(let v=0;v<n.sections.length;v++){const w=n.sections[v];w.image?f.addImageSection(w):f.addTextSection(w,s)}return f}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=(function(n){let s="";for(let f=0;f<n.length;f++){const v=n.charCodeAt(f+1)||null,w=n.charCodeAt(f-1)||null;s+=v&&Ol(v)&&!sa[n[f+1]]||w&&Ol(w)&&!sa[n[f-1]]||!sa[n[f]]?n[f]:sa[n[f]]}return s})(this.text)}trim(){let n=0;for(let f=0;f<this.text.length&&ld[this.text.charCodeAt(f)];f++)n++;let s=this.text.length;for(let f=this.text.length-1;f>=0&&f>=n&&ld[this.text.charCodeAt(f)];f--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const f=new Gc;return f.text=this.text.substring(n,s),f.sectionIndex=this.sectionIndex.slice(n,s),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((n,s)=>Math.max(n,this.sections[s].scale)),0)}getMaxImageSize(n){let s=0,f=0;for(let v=0;v<this.length();v++){const w=this.getSection(v);if(w.imageName){const P=n[w.imageName];if(!P)continue;const T=P.displaySize;s=Math.max(s,T[0]),f=Math.max(f,T[1])}}return{maxImageWidth:s,maxImageHeight:f}}addTextSection(n,s){this.text+=n.text,this.sections.push(Xh.forText(n.scale,n.fontStack||s,n.verticalAlign));const f=this.sections.length-1;for(let v=0;v<n.text.length;++v)this.sectionIndex.push(f)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void Lt("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(Xh.forImage(s,n.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Lt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function sd(l,n,s,f,v,w,P,T,D,L,F,$,Z,J,te){const oe=Gc.fromFeature(l,v);let ue;$===y.ao.vertical&&oe.verticalizePunctuation();const{processBidirectionalText:de,processStyledBidirectionalText:Le}=po;if(de&&oe.sections.length===1){ue=[];const Ge=de(oe.toString(),Ym(oe,L,w,n,f,J));for(const Ye of Ge){const dt=new Gc;dt.text=Ye,dt.sections=oe.sections;for(let Tt=0;Tt<Ye.length;Tt++)dt.sectionIndex.push(0);ue.push(dt)}}else if(Le){ue=[];const Ge=Le(oe.text,oe.sectionIndex,Ym(oe,L,w,n,f,J));for(const Ye of Ge){const dt=new Gc;dt.text=Ye[0],dt.sectionIndex=Ye[1],dt.sections=oe.sections,ue.push(dt)}}else ue=(function(Ge,Ye){const dt=[],Tt=Ge.text;let _t=0;for(const Et of Ye)dt.push(Ge.substring(_t,Et)),_t=Et;return _t<Tt.length&&dt.push(Ge.substring(_t,Tt.length)),dt})(oe,Ym(oe,L,w,n,f,J));const xe=[],Ce={positionedLines:xe,text:oe.toString(),top:F[1],bottom:F[1],left:F[0],right:F[0],writingMode:$,iconsInText:!1,verticalizable:!1};return(function(Ge,Ye,dt,Tt,_t,Et,Vt,bt,wt,tt,Qt,rr){let Ut=0,Bt=0,Ar=0,on=0;const li=bt==="right"?1:bt==="left"?0:.5,Ei=oi/rr;let _a=0;for(const sn of _t){sn.trim();const Wn=sn.getMaxScale(),_i={positionedGlyphs:[],lineOffset:0};Ge.positionedLines[_a]=_i;const Zn=_i.positionedGlyphs;let Ui=0;if(!sn.length()){Bt+=Et,++_a;continue}const xa=y_(Tt,sn,Ei);for(let Fa=0;Fa<sn.length();Fa++){const Nn=sn.getSection(Fa),o=sn.getSectionIndex(Fa),h=sn.getCharCode(Fa),m=Kh(wt,Qt,h);let x;if(Nn.imageName){if(Ge.iconsInText=!0,Nn.scale=Nn.scale*Ei,x=mp(Nn,m,Wn,xa,Tt),!x)continue;Ui=Math.max(Ui,x.imageOffset)}else if(x=Jm(Nn,h,m,xa,Ye,dt),!x)continue;const{rect:R,metrics:z,baselineOffset:Y}=x;Zn.push({glyph:h,imageName:Nn.imageName,x:Ut,y:Bt+Y+-17,vertical:m,scale:Nn.scale,fontStack:Nn.fontStack,sectionIndex:o,metrics:z,rect:R}),m?(Ge.verticalizable=!0,Ut+=(Nn.imageName?z.advance:oi)*Nn.scale+tt):Ut+=z.advance*Nn.scale+tt}Zn.length!==0&&(Ar=Math.max(Ut-tt,Ar),eg(Zn,0,Zn.length-1,li)),Ut=0,_i.lineOffset=Math.max(Ui,(Wn-1)*oi);const ui=Et*Wn+Ui;Bt+=ui,on=Math.max(ui,on),++_a}const{horizontalAlign:ba,verticalAlign:Mi}=Qm(Vt);(function(sn,Wn,_i,Zn,Ui,xa,ui,Fa,Nn){const o=(Wn-_i)*Ui;let h=0;h=xa!==ui?-Fa*Zn- -17:-Zn*Nn*ui+.5*ui;for(const m of sn)for(const x of m.positionedGlyphs)x.x+=o,x.y+=h})(Ge.positionedLines,li,ba,Mi,Ar,on,Et,Bt,_t.length),Ge.top+=-Mi*Bt,Ge.bottom=Ge.top+Bt,Ge.left+=-ba*Ar,Ge.right=Ge.left+Ar})(Ce,n,s,f,ue,P,T,D,$,L,Z,te),!(function(Ge){for(const Ye of Ge)if(Ye.positionedGlyphs.length!==0)return!1;return!0})(xe)&&Ce}const ld={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},pp={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Uy={40:!0};function Zm(l,n,s,f,v,w){if(n.imageName){const P=f[n.imageName];return P?P.displaySize[0]*n.scale*oi/w+v:0}{const P=s[n.fontStack],T=P&&P[l];return T?T.metrics.advance*n.scale+v:0}}function dn(l,n,s,f){const v=Math.pow(l-n,2);return f?l<n?v/2:2*v:v+Math.abs(s)*s}function Xm(l,n,s){let f=0;return l===10&&(f-=1e4),s&&(f+=150),l!==40&&l!==65288||(f+=50),n!==41&&n!==65289||(f+=50),f}function $y(l,n,s,f,v,w){let P=null,T=dn(n,s,v,w);for(const D of f){const L=dn(n-D.x,s,v,w)+D.badness;L<=T&&(P=D,T=L)}return{index:l,x:n,priorBreak:P,badness:T}}function Km(l){return l?Km(l.priorBreak).concat(l.index):[]}function Ym(l,n,s,f,v,w){if(!l)return[];const P=[],T=(function($,Z,J,te,oe,ue){let de=0;for(let Le=0;Le<$.length();Le++){const xe=$.getSection(Le);de+=Zm($.getCharCode(Le),xe,te,oe,Z,ue)}return de/Math.max(1,Math.ceil(de/J))})(l,n,s,f,v,w),D=l.text.indexOf("")>=0;let L=0;for(let $=0;$<l.length();$++){const Z=l.getSection($),J=l.getCharCode($);if(ld[J]||(L+=Zm(J,Z,f,v,n,w)),$<l.length()-1){const te=!((F=J)<11904)&&(!!fr["CJK Compatibility Forms"](F)||!!fr["CJK Compatibility"](F)||!!fr["CJK Strokes"](F)||!!fr["CJK Symbols and Punctuation"](F)||!!fr["Enclosed CJK Letters and Months"](F)||!!fr["Halfwidth and Fullwidth Forms"](F)||!!fr["Ideographic Description Characters"](F)||!!fr["Vertical Forms"](F)||kh.test(String.fromCodePoint(F)));(pp[J]||te||Z.imageName||$!==l.length()-2&&Uy[l.getCharCode($+1)])&&P.push($y($+1,L,T,P,Xm(J,l.getCharCode($+1),te&&D),!1))}}var F;return Km($y(l.length(),L,T,P,0,!0))}function Qm(l){let n=.5,s=.5;switch(l){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function y_(l,n,s){const f=n.getMaxScale()*oi,{maxImageWidth:v,maxImageHeight:w}=n.getMaxImageSize(l),P=Math.max(f,w*s);return{verticalLineContentWidth:Math.max(f,v*s),horizontalLineContentHeight:P}}function ud(l){switch(l){case"top":return 0;case"center":return .5;default:return 1}}function Kh(l,n,s){return!(l===y.ao.horizontal||!n&&!kc(s)||n&&(ld[s]||(f=s,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(f)))));var f}function Jm(l,n,s,f,v,w){const P=w[l.fontStack],T=(function(L,F,$,Z){if(L&&L.rect)return L;const J=F[$.fontStack],te=J&&J[Z];return te?{rect:null,metrics:te.metrics}:null})(P&&P[n],v,l,n);if(T===null)return null;let D;if(s)D=f.verticalLineContentWidth-l.scale*oi;else{const L=ud(l.verticalAlign);D=(f.horizontalLineContentHeight-l.scale*oi)*L}return{rect:T.rect,metrics:T.metrics,baselineOffset:D}}function mp(l,n,s,f,v){const w=v[l.imageName];if(!w)return null;const P=w.paddedRect,T=w.displaySize,D={width:T[0],height:T[1],left:1,top:-3,advance:n?T[1]:T[0]};let L;if(n)L=f.verticalLineContentWidth-T[1]*l.scale;else{const F=ud(l.verticalAlign);L=(f.horizontalLineContentHeight-T[1]*l.scale)*F}return{rect:P,metrics:D,baselineOffset:L,imageOffset:(n?T[0]:T[1])*l.scale-oi*s}}function eg(l,n,s,f){if(f===0)return;const v=l[s],w=(l[s].x+v.metrics.advance*v.scale)*f;for(let P=n;P<=s;P++)l[P].x-=w}function Wc(l,n,s){const{horizontalAlign:f,verticalAlign:v}=Qm(s),w=n[0]-l.displaySize[0]*f,P=n[1]-l.displaySize[1]*v;return{image:l,top:P,bottom:P+l.displaySize[1],left:w,right:w+l.displaySize[0]}}function xs(l){var n,s;let f=l.left,v=l.top,w=l.right-f,P=l.bottom-v;const T=(n=l.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",D=(s=l.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",L=(l.image.content[2]-l.image.content[0])/(l.image.content[3]-l.image.content[1]);if(D==="proportional"){if(T==="stretchOnly"&&w/P<L||T==="proportional"){const F=Math.ceil(P*L);f*=F/w,w=F}}else if(T==="proportional"&&D==="stretchOnly"&&L!==0&&w/P>L){const F=Math.ceil(w/L);v*=F/P,P=F}return{x1:f,y1:v,x2:f+w,y2:v+P}}function Yh(l,n,s,f,v,w){const P=l.image;let T;if(P.content){const ue=P.content,de=P.pixelRatio||1;T=[ue[0]/de,ue[1]/de,P.displaySize[0]-ue[2]/de,P.displaySize[1]-ue[3]/de]}const D=n.left*w,L=n.right*w;let F,$,Z,J;s==="width"||s==="both"?(J=v[0]+D-f[3],$=v[0]+L+f[1]):(J=v[0]+(D+L-P.displaySize[0])/2,$=J+P.displaySize[0]);const te=n.top*w,oe=n.bottom*w;return s==="height"||s==="both"?(F=v[1]+te-f[0],Z=v[1]+oe+f[2]):(F=v[1]+(te+oe-P.displaySize[1])/2,Z=F+P.displaySize[1]),{image:P,top:F,right:$,bottom:Z,left:J,collisionPadding:T}}const Gl=128,Wl=32640;function tg(l,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Vr(l+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:v}=s;let w=0;for(;w<f.length&&f[w]<=l;)w++;w=Math.max(0,w-1);let P=w;for(;P<f.length&&f[P]<l+1;)P++;P=Math.min(f.length-1,P);const T=f[w],D=f[P];return s.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:D,interpolationType:v}:{kind:"camera",minZoom:T,maxZoom:D,minSize:s.evaluate(new Vr(T)),maxSize:s.evaluate(new Vr(D)),interpolationType:v}}}function gp(l,n,s){let f="never";const v=l.get(n);return v?f=v:l.get(s)&&(f="always"),f}const Vy=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function yp(l,n,s,f,v,w,P,T,D,L,F,$,Z){const J=T?Math.min(Wl,Math.round(T[0])):0,te=T?Math.min(Wl,Math.round(T[1])):0;l.emplaceBack(n,s,Math.round(32*f),Math.round(32*v),w,P,(J<<1)+(D?1:0),te,16*L,16*F,256*$,256*Z)}function cd(l,n,s){l.emplaceBack(n.x,n.y,s),l.emplaceBack(n.x,n.y,s),l.emplaceBack(n.x,n.y,s),l.emplaceBack(n.x,n.y,s)}function Hy(l){for(const n of l.sections)if(cs(n.text))return!0;return!1}class vp{constructor(n){this.layoutVertexArray=new jt,this.indexArray=new Zr,this.programConfigurations=n,this.segments=new Er,this.dynamicLayoutVertexArray=new vr,this.opacityVertexArray=new Or,this.hasVisibleVertices=!1,this.placedSymbolArray=new he}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,f,v){this.isEmpty()||(f&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Gh.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,Nm.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,Vy,!0),this.opacityVertexBuffer.itemSize=1),(f||v)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Dt("SymbolBuffers",vp);class rg{constructor(n,s,f){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new f,this.segments=new Er,this.collisionVertexArray=new Wr}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,jm.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Dt("CollisionBuffers",rg);class Hu{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((P=>P.id)),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=tg(this.zoom,s["text-size"]),this.iconSizeData=tg(this.zoom,s["icon-size"]);const f=this.layers[0].layout,v=f.get("symbol-sort-key"),w=f.get("symbol-z-order");this.canOverlap=gp(f,"text-overlap","text-allow-overlap")!=="never"||gp(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=w!=="viewport-y"&&!v.isConstant(),this.sortFeaturesByY=(w==="viewport-y"||w==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map((P=>y.ao[P]))),this.stateDependentLayerIds=this.layers.filter((P=>P.isStateDependent())).map((P=>P.id)),this.sourceID=n.sourceID}createArrays(){this.text=new vp(new gs(this.layers,this.zoom,(n=>/^text/.test(n)))),this.icon=new vp(new gs(this.layers,this.zoom,(n=>/^icon/.test(n)))),this.glyphOffsetArray=new be,this.lineVertexArray=new me,this.symbolInstances=new pe,this.textAnchorOffsets=new Ee}calculateGlyphDependencies(n,s,f,v,w){for(let P=0;P<n.length;P++)if(s[n.charCodeAt(P)]=!0,(f||v)&&w){const T=sa[n.charAt(P)];T&&(s[T.charCodeAt(0)]=!0)}}populate(n,s,f){const v=this.layers[0],w=v.layout,P=w.get("text-font"),T=w.get("text-field"),D=w.get("icon-image"),L=(T.value.kind!=="constant"||T.value.value instanceof Qn&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(P.value.kind!=="constant"||P.value.value.length>0),F=D.value.kind!=="constant"||!!D.value.value||Object.keys(D.parameters).length>0,$=w.get("symbol-sort-key");if(this.features=[],!L&&!F)return;const Z=s.iconDependencies,J=s.glyphDependencies,te=s.availableImages,oe=new Vr(this.zoom);for(const{feature:ue,id:de,index:Le,sourceLayerIndex:xe}of n){const Ce=v._featureFilter.needGeometry,Ge=jl(ue,Ce);if(!v._featureFilter.filter(oe,Ge,f))continue;let Ye,dt;if(Ce||(Ge.geometry=Nl(ue)),L){const _t=v.getValueAndResolveTokens("text-field",Ge,f,te),Et=Qn.factory(_t),Vt=this.hasRTLText=this.hasRTLText||Hy(Et);(!Vt||po.getRTLTextPluginStatus()==="unavailable"||Vt&&po.isParsed())&&(Ye=Fm(Et,v,Ge))}if(F){const _t=v.getValueAndResolveTokens("icon-image",Ge,f,te);dt=_t instanceof Ai?_t:Ai.fromString(_t)}if(!Ye&&!dt)continue;const Tt=this.sortFeaturesByKey?$.evaluate(Ge,{},f):void 0;if(this.features.push({id:de,text:Ye,icon:dt,index:Le,sourceLayerIndex:xe,geometry:Ge.geometry,properties:ue.properties,type:el.types[ue.type],sortKey:Tt}),dt&&(Z[dt.name]=!0),Ye){const _t=P.evaluate(Ge,{},f).join(","),Et=w.get("text-rotation-alignment")!=="viewport"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(y.ao.vertical)>=0;for(const Vt of Ye.sections)if(Vt.image)Z[Vt.image.name]=!0;else{const bt=Oc(Ye.toString()),wt=Vt.fontStack||_t,tt=J[wt]=J[wt]||{};this.calculateGlyphDependencies(Vt.text,tt,Et,this.allowVerticalPlacement,bt)}}}w.get("symbol-placement")==="line"&&(this.features=(function(ue){const de={},Le={},xe=[];let Ce=0;function Ge(_t){xe.push(ue[_t]),Ce++}function Ye(_t,Et,Vt){const bt=Le[_t];return delete Le[_t],Le[Et]=bt,xe[bt].geometry[0].pop(),xe[bt].geometry[0]=xe[bt].geometry[0].concat(Vt[0]),bt}function dt(_t,Et,Vt){const bt=de[Et];return delete de[Et],de[_t]=bt,xe[bt].geometry[0].shift(),xe[bt].geometry[0]=Vt[0].concat(xe[bt].geometry[0]),bt}function Tt(_t,Et,Vt){const bt=Vt?Et[0][Et[0].length-1]:Et[0][0];return`${_t}:${bt.x}:${bt.y}`}for(let _t=0;_t<ue.length;_t++){const Et=ue[_t],Vt=Et.geometry,bt=Et.text?Et.text.toString():null;if(!bt){Ge(_t);continue}const wt=Tt(bt,Vt),tt=Tt(bt,Vt,!0);if(wt in Le&&tt in de&&Le[wt]!==de[tt]){const Qt=dt(wt,tt,Vt),rr=Ye(wt,tt,xe[Qt].geometry);delete de[wt],delete Le[tt],Le[Tt(bt,xe[rr].geometry,!0)]=rr,xe[Qt].geometry=null}else wt in Le?Ye(wt,tt,Vt):tt in de?dt(wt,tt,Vt):(Ge(_t),de[wt]=Ce-1,Le[tt]=Ce-1)}return xe.filter((_t=>_t.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((ue,de)=>ue.sortKey-de.sortKey))}update(n,s,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,{imagePositions:f}),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,{imagePositions:f}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const f=this.lineVertexArray.length;if(n.segment!==void 0){let v=n.dist(s[n.segment+1]),w=n.dist(s[n.segment]);const P={};for(let T=n.segment+1;T<s.length;T++)P[T]={x:s[T].x,y:s[T].y,tileUnitDistanceFromAnchor:v},T<s.length-1&&(v+=s[T+1].dist(s[T]));for(let T=n.segment||0;T>=0;T--)P[T]={x:s[T].x,y:s[T].y,tileUnitDistanceFromAnchor:w},T>0&&(w+=s[T-1].dist(s[T]));for(let T=0;T<s.length;T++){const D=P[T];this.lineVertexArray.emplaceBack(D.x,D.y,D.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(n,s,f,v,w,P,T,D,L,F,$,Z){const J=n.indexArray,te=n.layoutVertexArray,oe=n.segments.prepareSegment(4*s.length,te,J,this.canOverlap?P.sortKey:void 0),ue=this.glyphOffsetArray.length,de=oe.vertexLength,Le=this.allowVerticalPlacement&&T===y.ao.vertical?Math.PI/2:0,xe=P.text&&P.text.sections;for(let Ce=0;Ce<s.length;Ce++){const{tl:Ge,tr:Ye,bl:dt,br:Tt,tex:_t,pixelOffsetTL:Et,pixelOffsetBR:Vt,minFontScaleX:bt,minFontScaleY:wt,glyphOffset:tt,isSDF:Qt,sectionIndex:rr}=s[Ce],Ut=oe.vertexLength,Bt=tt[1];yp(te,D.x,D.y,Ge.x,Bt+Ge.y,_t.x,_t.y,f,Qt,Et.x,Et.y,bt,wt),yp(te,D.x,D.y,Ye.x,Bt+Ye.y,_t.x+_t.w,_t.y,f,Qt,Vt.x,Et.y,bt,wt),yp(te,D.x,D.y,dt.x,Bt+dt.y,_t.x,_t.y+_t.h,f,Qt,Et.x,Vt.y,bt,wt),yp(te,D.x,D.y,Tt.x,Bt+Tt.y,_t.x+_t.w,_t.y+_t.h,f,Qt,Vt.x,Vt.y,bt,wt),cd(n.dynamicLayoutVertexArray,D,Le),J.emplaceBack(Ut,Ut+2,Ut+1),J.emplaceBack(Ut+1,Ut+2,Ut+3),oe.vertexLength+=4,oe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(tt[0]),Ce!==s.length-1&&rr===s[Ce+1].sectionIndex||n.programConfigurations.populatePaintArrays(te.length,P,P.index,{imagePositions:{},canonical:Z,formattedSection:xe&&xe[rr]})}n.placedSymbolArray.emplaceBack(D.x,D.y,ue,this.glyphOffsetArray.length-ue,de,L,F,D.segment,f?f[0]:0,f?f[1]:0,v[0],v[1],T,0,!1,0,$)}_addCollisionDebugVertex(n,s,f,v,w,P){return s.emplaceBack(0,0),n.emplaceBack(f.x,f.y,v,w,Math.round(P.x),Math.round(P.y))}addCollisionDebugVertices(n,s,f,v,w,P,T){const D=w.segments.prepareSegment(4,w.layoutVertexArray,w.indexArray),L=D.vertexLength,F=w.layoutVertexArray,$=w.collisionVertexArray,Z=T.anchorX,J=T.anchorY;this._addCollisionDebugVertex(F,$,P,Z,J,new C(n,s)),this._addCollisionDebugVertex(F,$,P,Z,J,new C(f,s)),this._addCollisionDebugVertex(F,$,P,Z,J,new C(f,v)),this._addCollisionDebugVertex(F,$,P,Z,J,new C(n,v)),D.vertexLength+=4;const te=w.indexArray;te.emplaceBack(L,L+1),te.emplaceBack(L+1,L+2),te.emplaceBack(L+2,L+3),te.emplaceBack(L+3,L),D.primitiveLength+=4}addDebugCollisionBoxes(n,s,f,v){for(let w=n;w<s;w++){const P=this.collisionBoxArray.get(w);this.addCollisionDebugVertices(P.x1,P.y1,P.x2,P.y2,v?this.textCollisionBox:this.iconCollisionBox,P.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new rg(hn,Bm.members,rn),this.iconCollisionBox=new rg(hn,Bm.members,rn);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,f,v,w,P,T,D,L){const F={};for(let $=s;$<f;$++){const Z=n.get($);F.textBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},F.textFeatureIndex=Z.featureIndex;break}for(let $=v;$<w;$++){const Z=n.get($);F.verticalTextBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},F.verticalTextFeatureIndex=Z.featureIndex;break}for(let $=P;$<T;$++){const Z=n.get($);F.iconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},F.iconFeatureIndex=Z.featureIndex;break}for(let $=D;$<L;$++){const Z=n.get($);F.verticalIconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},F.verticalIconFeatureIndex=Z.featureIndex;break}return F}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const f=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const f=n.placedSymbolArray.get(s),v=f.vertexStartIndex+4*f.numGlyphs;for(let w=f.vertexStartIndex;w<v;w+=4)n.indexArray.emplaceBack(w,w+2,w+1),n.indexArray.emplaceBack(w+1,w+2,w+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),f=Math.cos(n),v=[],w=[],P=[];for(let T=0;T<this.symbolInstances.length;++T){P.push(T);const D=this.symbolInstances.get(T);v.push(0|Math.round(s*D.anchorX+f*D.anchorY)),w.push(D.featureIndex)}return P.sort(((T,D)=>v[T]-v[D]||w[D]-w[T])),P}addToSortKeyRanges(n,s){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===s?f.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const f=this.symbolInstances.get(s);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach(((v,w,P)=>{v>=0&&P.indexOf(v)===w&&this.addIndicesForPlacedSymbol(this.text,v)})),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let _p,qy;Dt("SymbolBucket",Hu,{omit:["layers","collisionBoxArray","features","compareText"]}),Hu.MAX_GLYPHS=65535,Hu.addDynamicAttributes=cd;var ng={get paint(){return qy=qy||new pi({"icon-opacity":new qt(ke.paint_symbol["icon-opacity"]),"icon-color":new qt(ke.paint_symbol["icon-color"]),"icon-halo-color":new qt(ke.paint_symbol["icon-halo-color"]),"icon-halo-width":new qt(ke.paint_symbol["icon-halo-width"]),"icon-halo-blur":new qt(ke.paint_symbol["icon-halo-blur"]),"icon-translate":new zt(ke.paint_symbol["icon-translate"]),"icon-translate-anchor":new zt(ke.paint_symbol["icon-translate-anchor"]),"text-opacity":new qt(ke.paint_symbol["text-opacity"]),"text-color":new qt(ke.paint_symbol["text-color"],{runtimeType:Fn,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new qt(ke.paint_symbol["text-halo-color"]),"text-halo-width":new qt(ke.paint_symbol["text-halo-width"]),"text-halo-blur":new qt(ke.paint_symbol["text-halo-blur"]),"text-translate":new zt(ke.paint_symbol["text-translate"]),"text-translate-anchor":new zt(ke.paint_symbol["text-translate-anchor"])})},get layout(){return _p=_p||new pi({"symbol-placement":new zt(ke.layout_symbol["symbol-placement"]),"symbol-spacing":new zt(ke.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new zt(ke.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new qt(ke.layout_symbol["symbol-sort-key"]),"symbol-z-order":new zt(ke.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new zt(ke.layout_symbol["icon-allow-overlap"]),"icon-overlap":new zt(ke.layout_symbol["icon-overlap"]),"icon-ignore-placement":new zt(ke.layout_symbol["icon-ignore-placement"]),"icon-optional":new zt(ke.layout_symbol["icon-optional"]),"icon-rotation-alignment":new zt(ke.layout_symbol["icon-rotation-alignment"]),"icon-size":new qt(ke.layout_symbol["icon-size"]),"icon-text-fit":new zt(ke.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new zt(ke.layout_symbol["icon-text-fit-padding"]),"icon-image":new qt(ke.layout_symbol["icon-image"]),"icon-rotate":new qt(ke.layout_symbol["icon-rotate"]),"icon-padding":new qt(ke.layout_symbol["icon-padding"]),"icon-keep-upright":new zt(ke.layout_symbol["icon-keep-upright"]),"icon-offset":new qt(ke.layout_symbol["icon-offset"]),"icon-anchor":new qt(ke.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new zt(ke.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new zt(ke.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new zt(ke.layout_symbol["text-rotation-alignment"]),"text-field":new qt(ke.layout_symbol["text-field"]),"text-font":new qt(ke.layout_symbol["text-font"]),"text-size":new qt(ke.layout_symbol["text-size"]),"text-max-width":new qt(ke.layout_symbol["text-max-width"]),"text-line-height":new zt(ke.layout_symbol["text-line-height"]),"text-letter-spacing":new qt(ke.layout_symbol["text-letter-spacing"]),"text-justify":new qt(ke.layout_symbol["text-justify"]),"text-radial-offset":new qt(ke.layout_symbol["text-radial-offset"]),"text-variable-anchor":new zt(ke.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new qt(ke.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new qt(ke.layout_symbol["text-anchor"]),"text-max-angle":new zt(ke.layout_symbol["text-max-angle"]),"text-writing-mode":new zt(ke.layout_symbol["text-writing-mode"]),"text-rotate":new qt(ke.layout_symbol["text-rotate"]),"text-padding":new zt(ke.layout_symbol["text-padding"]),"text-keep-upright":new zt(ke.layout_symbol["text-keep-upright"]),"text-transform":new qt(ke.layout_symbol["text-transform"]),"text-offset":new qt(ke.layout_symbol["text-offset"]),"text-allow-overlap":new zt(ke.layout_symbol["text-allow-overlap"]),"text-overlap":new zt(ke.layout_symbol["text-overlap"]),"text-ignore-placement":new zt(ke.layout_symbol["text-ignore-placement"]),"text-optional":new zt(ke.layout_symbol["text-optional"])})}};class Qh{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:Eo,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Dt("FormatSectionOverride",Qh,{omit:["defaultValue"]});class bp extends Ka{constructor(n,s){super(n,ng,s)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const v=[];for(const w of f)v.indexOf(w)<0&&v.push(w);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,f,v){const w=this.layout.get(n).evaluate(s,{},f,v),P=this._unevaluatedLayout._values[n];return P.isDataDriven()||is(P.value)||!w?w:(function(T,D){return D.replace(/{([^{}]+)}/g,((L,F)=>T&&F in T?String(T[F]):""))})(s.properties,w)}createBucket(n){return new Hu(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of ng.paint.overridableProperties){if(!bp.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),f=new Qh(s),v=new Ec(f,s.property.specification);let w=null;w=s.value.kind==="constant"||s.value.kind==="source"?new $s("source",v):new Cu("composite",v,s.value.zoomStops),this.paint._values[n]=new ta(s.property,w,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,f){return!(!this.layout||s.isDataDriven()||f.isDataDriven())&&bp.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const f=n.get("text-field"),v=ng.paint.properties[s];let w=!1;const P=T=>{for(const D of T)if(v.overrides&&v.overrides.hasOverride(D))return void(w=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Qn)P(f.value.value.sections);else if(f.value.kind==="source"||f.value.kind==="composite"){const T=L=>{w||(L instanceof Za&&er(L.value)===da?P(L.value.sections):L instanceof bl?P(L.sections):L.eachChild(T))},D=f.value;D._styleExpression&&T(D._styleExpression.expression)}return w}}let ig;var kr={get paint(){return ig=ig||new pi({"background-color":new zt(ke.paint_background["background-color"]),"background-pattern":new Ff(ke.paint_background["background-pattern"]),"background-opacity":new zt(ke.paint_background["background-opacity"])})}};class ag extends Ka{constructor(n,s){super(n,kr,s)}}let hd;var og={get paint(){return hd=hd||new pi({"raster-opacity":new zt(ke.paint_raster["raster-opacity"]),"raster-hue-rotate":new zt(ke.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new zt(ke.paint_raster["raster-brightness-min"]),"raster-brightness-max":new zt(ke.paint_raster["raster-brightness-max"]),"raster-saturation":new zt(ke.paint_raster["raster-saturation"]),"raster-contrast":new zt(ke.paint_raster["raster-contrast"]),"raster-resampling":new zt(ke.paint_raster["raster-resampling"]),"raster-fade-duration":new zt(ke.paint_raster["raster-fade-duration"])})}};class Gy extends Ka{constructor(n,s){super(n,og,s)}}class sg extends Ka{constructor(n,s){super(n,{},s),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class fd{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const xp={once:!0},qu=63710088e-1;class Zl{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Zl(ir(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,f=this.lat*s,v=n.lat*s,w=Math.sin(f)*Math.sin(v)+Math.cos(f)*Math.cos(v)*Math.cos((n.lng-this.lng)*s);return qu*Math.acos(Math.min(w,1))}static convert(n){if(n instanceof Zl)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Zl(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Zl(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Wy=2*Math.PI*qu;function Zy(l){return Wy*Math.cos(l*Math.PI/180)}function lg(l){return(180+l)/360}function ug(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function dd(l,n){return l/Zy(n)}function Jr(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function wp(l,n){return l*Zy(Jr(n))}class si{constructor(n,s,f=0){this.x=+n,this.y=+s,this.z=+f}static fromLngLat(n,s=0){const f=Zl.convert(n);return new si(lg(f.lng),ug(f.lat),dd(s,f.lat))}toLngLat(){return new Zl(360*this.x-180,Jr(this.y))}toAltitude(){return wp(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Wy*(n=Jr(this.y),1/Math.cos(n*Math.PI/180));var n}}function Xy(l,n,s){var f=2*Math.PI*6378137/256/Math.pow(2,s);return[l*f-2*Math.PI*6378137/2,n*f-2*Math.PI*6378137/2]}class pd{constructor(n,s,f){if(!(function(v,w,P){return!(v<0||v>25||P<0||P>=Math.pow(2,v)||w<0||w>=Math.pow(2,v))})(n,s,f))throw new Error(`x=${s}, y=${f}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=f,this.key=Zc(0,n,n,s,f)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,f){const v=(P=this.y,T=this.z,D=Xy(256*(w=this.x),256*(P=Math.pow(2,T)-P-1),T),L=Xy(256*(w+1),256*(P+1),T),D[0]+","+D[1]+","+L[0]+","+L[1]);var w,P,T,D,L;const F=(function($,Z,J){let te,oe="";for(let ue=$;ue>0;ue--)te=1<<ue-1,oe+=(Z&te?1:0)+(J&te?2:0);return oe})(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,F).replace(/{bbox-epsg-3857}/g,v)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new C((n.x*s-this.x)*Ct,(n.y*s-this.y)*Ct)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Sp{constructor(n,s){this.wrap=n,this.canonical=s,this.key=Zc(n,s.z,s.z,s.x,s.y)}}class va{constructor(n,s,f,v,w){if(this.terrainRttPosMatrix32f=null,n<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${f}`);this.overscaledZ=n,this.wrap=s,this.canonical=new pd(f,+v,+w),this.key=Zc(s,n,f,v,w)}clone(){return new va(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new va(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new va(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-n;return n>this.canonical.z?Zc(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):Zc(this.wrap*+s,n,n,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(n){if(n.wrap!==this.wrap||this.overscaledZ-n.overscaledZ<=0)return!1;if(n.overscaledZ===0)return this.overscaledZ>0;const s=this.canonical.z-n.canonical.z;return!(s<0)&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new va(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,f=2*this.canonical.x,v=2*this.canonical.y;return[new va(s,this.wrap,s,f,v),new va(s,this.wrap,s,f+1,v),new va(s,this.wrap,s,f,v+1),new va(s,this.wrap,s,f+1,v+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new va(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new va(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Sp(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new si(n.x-this.wrap,n.y))}}function Zc(l,n,s,f,v){(l*=2)<0&&(l=-1*l-1);const w=1<<s;return(w*w*l+w*v+f).toString(36)+s.toString(36)+n.toString(36)}function Jh(l,n){return n?l.properties[n]:l.id}Dt("CanonicalTileID",pd),Dt("OverscaledTileID",va,{omit:["terrainRttPosMatrix32f"]});class Xl{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(n){return this.minX=Math.min(this.minX,n.x),this.minY=Math.min(this.minY,n.y),this.maxX=Math.max(this.maxX,n.x),this.maxY=Math.max(this.maxY,n.y),this}expandBy(n){return this.minX-=n,this.minY-=n,this.maxX+=n,this.maxY+=n,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(n){return this.expandBy(-n)}map(n){const s=new Xl;return s.extend(n(new C(this.minX,this.minY))),s.extend(n(new C(this.maxX,this.minY))),s.extend(n(new C(this.minX,this.maxY))),s.extend(n(new C(this.maxX,this.maxY))),s}static fromPoints(n){const s=new Xl;for(const f of n)s.extend(f);return s}contains(n){return n.x>=this.minX&&n.x<=this.maxX&&n.y>=this.minY&&n.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(n){return!this.empty()&&!n.empty()&&n.minX>=this.minX&&n.maxX<=this.maxX&&n.minY>=this.minY&&n.maxY<=this.maxY}intersects(n){return!this.empty()&&!n.empty()&&n.minX<=this.maxX&&n.maxX>=this.minX&&n.minY<=this.maxY&&n.maxY>=this.minY}}class Pp{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const f=n[s];this._stringToNumber[f]=s,this._numberToString[s]=f}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Ky{constructor(n,s,f,v,w){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=f,n._y=v,this.properties=n.properties,this.id=w}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class cg{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Zs(Ct,16,0),this.grid3D=new Zs(Ct,16,0),this.featureIndexArray=new Ie,this.promoteId=s}insert(n,s,f,v,w,P){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,v,w);const D=P?this.grid3D:this.grid;for(let L=0;L<s.length;L++){const F=s[L],$=[1/0,1/0,-1/0,-1/0];for(let Z=0;Z<F.length;Z++){const J=F[Z];$[0]=Math.min($[0],J.x),$[1]=Math.min($[1],J.y),$[2]=Math.max($[2],J.x),$[3]=Math.max($[3],J.y)}$[0]<Ct&&$[1]<Ct&&$[2]>=0&&$[3]>=0&&D.insert(T,$[0],$[1],$[2],$[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ly(new Vm(this.rawTileData)).layers,this.sourceLayerCoder=new Pp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,f,v){this.loadVTLayers();const w=n.params,P=Ct/n.tileSize/n.scale,T=as(w.filter,w.globalState),D=n.queryGeometry,L=n.queryPadding*P,F=Xl.fromPoints(D),$=this.grid.query(F.minX-L,F.minY-L,F.maxX+L,F.maxY+L),Z=Xl.fromPoints(n.cameraQueryGeometry).expandBy(L),J=this.grid3D.query(Z.minX,Z.minY,Z.maxX,Z.maxY,((ue,de,Le,xe)=>(function(Ce,Ge,Ye,dt,Tt){for(const Et of Ce)if(Ge<=Et.x&&Ye<=Et.y&&dt>=Et.x&&Tt>=Et.y)return!0;const _t=[new C(Ge,Ye),new C(Ge,Tt),new C(dt,Tt),new C(dt,Ye)];if(Ce.length>2){for(const Et of _t)if(Uh(Ce,Et))return!0}for(let Et=0;Et<Ce.length-1;Et++)if(yy(Ce[Et],Ce[Et+1],_t))return!0;return!1})(n.cameraQueryGeometry,ue-L,de-L,Le+L,xe+L)));for(const ue of J)$.push(ue);$.sort(Qy);const te={};let oe;for(let ue=0;ue<$.length;ue++){const de=$[ue];if(de===oe)continue;oe=de;const Le=this.featureIndexArray.get(de);let xe=null;this.loadMatchingFeature(te,Le.bucketIndex,Le.sourceLayerIndex,Le.featureIndex,T,w.layers,w.availableImages,s,f,v,((Ce,Ge,Ye)=>(xe||(xe=Nl(Ce)),Ge.queryIntersectsFeature({queryGeometry:D,feature:Ce,featureState:Ye,geometry:xe,zoom:this.z,transform:n.transform,pixelsToTileUnits:P,pixelPosMatrix:n.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:n.getElevation}))))}return te}loadMatchingFeature(n,s,f,v,w,P,T,D,L,F,$){const Z=this.bucketLayerIDs[s];if(P&&!Z.some((ue=>P.has(ue))))return;const J=this.sourceLayerCoder.decode(f),te=this.vtLayers[J].feature(v);if(w.needGeometry){const ue=jl(te,!0);if(!w.filter(new Vr(this.tileID.overscaledZ),ue,this.tileID.canonical))return}else if(!w.filter(new Vr(this.tileID.overscaledZ),te))return;const oe=this.getId(te,J);for(let ue=0;ue<Z.length;ue++){const de=Z[ue];if(P&&!P.has(de))continue;const Le=D[de];if(!Le)continue;let xe={};oe&&F&&(xe=F.getState(Le.sourceLayer||"_geojsonTileLayer",oe));const Ce=Jt({},L[de]);Ce.paint=Yy(Ce.paint,Le.paint,te,xe,T),Ce.layout=Yy(Ce.layout,Le.layout,te,xe,T);const Ge=!$||$(te,Le,xe);if(!Ge)continue;const Ye=new Ky(te,this.z,this.x,this.y,oe);Ye.layer=Ce;let dt=n[de];dt===void 0&&(dt=n[de]=[]),dt.push({featureIndex:v,feature:Ye,intersectionZ:Ge})}}lookupSymbolFeatures(n,s,f,v,w,P,T,D){const L={};this.loadVTLayers();const F=as(w.filterSpec,w.globalState);for(const $ of n)this.loadMatchingFeature(L,f,v,$,F,P,T,D,s);return L}hasLayer(n){for(const s of this.bucketLayerIDs)for(const f of s)if(n===f)return!0;return!1}getId(n,s){var f;let v=n.id;return this.promoteId&&(v=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof v=="boolean"&&(v=Number(v)),v===void 0&&(!((f=n.properties)===null||f===void 0)&&f.cluster)&&this.promoteId&&(v=Number(n.properties.cluster_id))),v}}function Yy(l,n,s,f,v){return Gt(l,((w,P)=>{const T=n instanceof Fo?n.get(P):null;return T&&T.evaluate?T.evaluate(s,f,v):T}))}function Qy(l,n){return n-l}function Jy(l,n,s,f,v){const w=[];for(let P=0;P<l.length;P++){const T=l[P];let D;for(let L=0;L<T.length-1;L++){let F=T[L],$=T[L+1];F.x<n&&$.x<n||(F.x<n?F=new C(n,F.y+(n-F.x)/($.x-F.x)*($.y-F.y))._round():$.x<n&&($=new C(n,F.y+(n-F.x)/($.x-F.x)*($.y-F.y))._round()),F.y<s&&$.y<s||(F.y<s?F=new C(F.x+(s-F.y)/($.y-F.y)*($.x-F.x),s)._round():$.y<s&&($=new C(F.x+(s-F.y)/($.y-F.y)*($.x-F.x),s)._round()),F.x>=f&&$.x>=f||(F.x>=f?F=new C(f,F.y+(f-F.x)/($.x-F.x)*($.y-F.y))._round():$.x>=f&&($=new C(f,F.y+(f-F.x)/($.x-F.x)*($.y-F.y))._round()),F.y>=v&&$.y>=v||(F.y>=v?F=new C(F.x+(v-F.y)/($.y-F.y)*($.x-F.x),v)._round():$.y>=v&&($=new C(F.x+(v-F.y)/($.y-F.y)*($.x-F.x),v)._round()),D&&F.equals(D[D.length-1])||(D=[F],w.push(D)),D.push($)))))}}return w}Dt("FeatureIndex",cg,{omit:["rawTileData","sourceLayerCoder"]});class Gu extends C{constructor(n,s,f,v){super(n,s),this.angle=f,v!==void 0&&(this.segment=v)}clone(){return new Gu(this.x,this.y,this.angle,this.segment)}}function Kl(l,n,s,f,v){if(n.segment===void 0||s===0)return!0;let w=n,P=n.segment+1,T=0;for(;T>-s/2;){if(P--,P<0)return!1;T-=l[P].dist(w),w=l[P]}T+=l[P].dist(l[P+1]),P++;const D=[];let L=0;for(;T<s/2;){const F=l[P],$=l[P+1];if(!$)return!1;let Z=l[P-1].angleTo(F)-F.angleTo($);for(Z=Math.abs((Z+3*Math.PI)%(2*Math.PI)-Math.PI),D.push({distance:T,angleDelta:Z}),L+=Z;T-D[0].distance>f;)L-=D.shift().angleDelta;if(L>v)return!1;P++,T+=F.dist($)}return!0}function hg(l){let n=0;for(let s=0;s<l.length-1;s++)n+=l[s].dist(l[s+1]);return n}function Ap(l,n,s){return l?.6*n*s:0}function e0(l,n){return Math.max(l?l.right-l.left:0,n?n.right-n.left:0)}function v_(l,n,s,f,v,w){const P=Ap(s,v,w),T=e0(s,f)*w;let D=0;const L=hg(l)/2;for(let F=0;F<l.length-1;F++){const $=l[F],Z=l[F+1],J=$.dist(Z);if(D+J>L){const te=(L-D)/J,oe=zo.number($.x,Z.x,te),ue=zo.number($.y,Z.y,te),de=new Gu(oe,ue,Z.angleTo($),F);return de._round(),!P||Kl(l,de,T,P,n)?de:void 0}D+=J}}function fg(l,n,s,f,v,w,P,T,D){const L=Ap(f,w,P),F=e0(f,v),$=F*P,Z=l[0].x===0||l[0].x===D||l[0].y===0||l[0].y===D;return n-$<n/4&&(n=$+n/4),t0(l,Z?n/2*T%n:(F/2+2*w)*P*T%n,n,L,s,$,Z,!1,D)}function t0(l,n,s,f,v,w,P,T,D){const L=w/2,F=hg(l);let $=0,Z=n-s,J=[];for(let te=0;te<l.length-1;te++){const oe=l[te],ue=l[te+1],de=oe.dist(ue),Le=ue.angleTo(oe);for(;Z+s<$+de;){Z+=s;const xe=(Z-$)/de,Ce=zo.number(oe.x,ue.x,xe),Ge=zo.number(oe.y,ue.y,xe);if(Ce>=0&&Ce<D&&Ge>=0&&Ge<D&&Z-L>=0&&Z+L<=F){const Ye=new Gu(Ce,Ge,Le,te);Ye._round(),f&&!Kl(l,Ye,w,f,v)||J.push(Ye)}}$+=de}return T||J.length||P||(J=t0(l,$/2,s,f,v,w,P,!0,D)),J}function Wo(l,n,s,f){const v=[],w=l.image,P=w.pixelRatio,T=w.paddedRect.w-2,D=w.paddedRect.h-2;let L={x1:l.left,y1:l.top,x2:l.right,y2:l.bottom};const F=w.stretchX||[[0,T]],$=w.stretchY||[[0,D]],Z=(tt,Qt)=>tt+Qt[1]-Qt[0],J=F.reduce(Z,0),te=$.reduce(Z,0),oe=T-J,ue=D-te;let de=0,Le=J,xe=0,Ce=te,Ge=0,Ye=oe,dt=0,Tt=ue;if(w.content&&f){const tt=w.content,Qt=tt[2]-tt[0],rr=tt[3]-tt[1];(w.textFitWidth||w.textFitHeight)&&(L=xs(l)),de=ef(F,0,tt[0]),xe=ef($,0,tt[1]),Le=ef(F,tt[0],tt[2]),Ce=ef($,tt[1],tt[3]),Ge=tt[0]-de,dt=tt[1]-xe,Ye=Qt-Le,Tt=rr-Ce}const _t=L.x1,Et=L.y1,Vt=L.x2-_t,bt=L.y2-Et,wt=(tt,Qt,rr,Ut)=>{const Bt=md(tt.stretch-de,Le,Vt,_t),Ar=Wu(tt.fixed-Ge,Ye,tt.stretch,J),on=md(Qt.stretch-xe,Ce,bt,Et),li=Wu(Qt.fixed-dt,Tt,Qt.stretch,te),Ei=md(rr.stretch-de,Le,Vt,_t),_a=Wu(rr.fixed-Ge,Ye,rr.stretch,J),ba=md(Ut.stretch-xe,Ce,bt,Et),Mi=Wu(Ut.fixed-dt,Tt,Ut.stretch,te),sn=new C(Bt,on),Wn=new C(Ei,on),_i=new C(Ei,ba),Zn=new C(Bt,ba),Ui=new C(Ar/P,li/P),xa=new C(_a/P,Mi/P),ui=n*Math.PI/180;if(ui){const o=Math.sin(ui),h=Math.cos(ui),m=[h,-o,o,h];sn._matMult(m),Wn._matMult(m),Zn._matMult(m),_i._matMult(m)}const Fa=tt.stretch+tt.fixed,Nn=Qt.stretch+Qt.fixed;return{tl:sn,tr:Wn,bl:Zn,br:_i,tex:{x:w.paddedRect.x+1+Fa,y:w.paddedRect.y+1+Nn,w:rr.stretch+rr.fixed-Fa,h:Ut.stretch+Ut.fixed-Nn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ui,pixelOffsetBR:xa,minFontScaleX:Ye/P/Vt,minFontScaleY:Tt/P/bt,isSDF:s}};if(f&&(w.stretchX||w.stretchY)){const tt=dg(F,oe,J),Qt=dg($,ue,te);for(let rr=0;rr<tt.length-1;rr++){const Ut=tt[rr],Bt=tt[rr+1];for(let Ar=0;Ar<Qt.length-1;Ar++)v.push(wt(Ut,Qt[Ar],Bt,Qt[Ar+1]))}}else v.push(wt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:D+1}));return v}function ef(l,n,s){let f=0;for(const v of l)f+=Math.max(n,Math.min(s,v[1]))-Math.max(n,Math.min(s,v[0]));return f}function dg(l,n,s){const f=[{fixed:-1,stretch:0}];for(const[v,w]of l){const P=f[f.length-1];f.push({fixed:v-P.stretch,stretch:P.stretch}),f.push({fixed:v-P.stretch,stretch:P.stretch+(w-v)})}return f.push({fixed:n+1,stretch:s}),f}function md(l,n,s,f){return l/n*s+f}function Wu(l,n,s,f){return l-n*s/f}Dt("Anchor",Gu);class Ba{constructor(n,s,f,v,w,P,T,D,L,F){var $;if(this.boxStartIndex=n.length,L){let Z=P.top,J=P.bottom;const te=P.collisionPadding;te&&(Z-=te[1],J+=te[3]);let oe=J-Z;oe>0&&(oe=Math.max(10,oe),this.circleDiameter=oe)}else{const Z=!(($=P.image)===null||$===void 0)&&$.content&&(P.image.textFitWidth||P.image.textFitHeight)?xs(P):{x1:P.left,y1:P.top,x2:P.right,y2:P.bottom};Z.y1=Z.y1*T-D[0],Z.y2=Z.y2*T+D[2],Z.x1=Z.x1*T-D[3],Z.x2=Z.x2*T+D[1];const J=P.collisionPadding;if(J&&(Z.x1-=J[0]*T,Z.y1-=J[1]*T,Z.x2+=J[2]*T,Z.y2+=J[3]*T),F){const te=new C(Z.x1,Z.y1),oe=new C(Z.x2,Z.y1),ue=new C(Z.x1,Z.y2),de=new C(Z.x2,Z.y2),Le=F*Math.PI/180;te._rotate(Le),oe._rotate(Le),ue._rotate(Le),de._rotate(Le),Z.x1=Math.min(te.x,oe.x,ue.x,de.x),Z.x2=Math.max(te.x,oe.x,ue.x,de.x),Z.y1=Math.min(te.y,oe.y,ue.y,de.y),Z.y2=Math.max(te.y,oe.y,ue.y,de.y)}n.emplaceBack(s.x,s.y,Z.x1,Z.y1,Z.x2,Z.y2,f,v,w)}this.boxEndIndex=n.length}}class r0{constructor(n=[],s=(f,v)=>f<v?-1:f>v?1:0){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:f}=this,v=s[n];for(;n>0;){const w=n-1>>1,P=s[w];if(f(v,P)>=0)break;s[n]=P,n=w}s[n]=v}_down(n){const{data:s,compare:f}=this,v=this.length>>1,w=s[n];for(;n<v;){let P=1+(n<<1);const T=P+1;if(T<this.length&&f(s[T],s[P])<0&&(P=T),f(s[P],w)>=0)break;s[n]=s[P],n=P}s[n]=w}}function Cp(l,n=1,s=!1){const f=Xl.fromPoints(l[0]),v=Math.min(f.width(),f.height());let w=v/2;const P=new r0([],Yl),{minX:T,minY:D,maxX:L,maxY:F}=f;if(v===0)return new C(T,D);for(let J=T;J<L;J+=v)for(let te=D;te<F;te+=v)P.push(new tf(J+w,te+w,w,l));let $=(function(J){let te=0,oe=0,ue=0;const de=J[0];for(let Le=0,xe=de.length,Ce=xe-1;Le<xe;Ce=Le++){const Ge=de[Le],Ye=de[Ce],dt=Ge.x*Ye.y-Ye.x*Ge.y;oe+=(Ge.x+Ye.x)*dt,ue+=(Ge.y+Ye.y)*dt,te+=3*dt}return new tf(oe/te,ue/te,0,J)})(l),Z=P.length;for(;P.length;){const J=P.pop();(J.d>$.d||!$.d)&&($=J,s&&console.log("found best %d after %d probes",Math.round(1e4*J.d)/1e4,Z)),J.max-$.d<=n||(w=J.h/2,P.push(new tf(J.p.x-w,J.p.y-w,w,l)),P.push(new tf(J.p.x+w,J.p.y-w,w,l)),P.push(new tf(J.p.x-w,J.p.y+w,w,l)),P.push(new tf(J.p.x+w,J.p.y+w,w,l)),Z+=4)}return s&&(console.log(`num probes: ${Z}`),console.log(`best distance: ${$.d}`)),$.p}function Yl(l,n){return n.max-l.max}function tf(l,n,s,f){this.p=new C(l,n),this.h=s,this.d=(function(v,w){let P=!1,T=1/0;for(let D=0;D<w.length;D++){const L=w[D];for(let F=0,$=L.length,Z=$-1;F<$;Z=F++){const J=L[F],te=L[Z];J.y>v.y!=te.y>v.y&&v.x<(te.x-J.x)*(v.y-J.y)/(te.y-J.y)+J.x&&(P=!P),T=Math.min(T,vm(v,J,te))}}return(P?1:-1)*Math.sqrt(T)})(this.p,f),this.max=this.d+this.h*Math.SQRT2}var Fi;y.aE=void 0,(Fi=y.aE||(y.aE={}))[Fi.center=1]="center",Fi[Fi.left=2]="left",Fi[Fi.right=3]="right",Fi[Fi.top=4]="top",Fi[Fi.bottom=5]="bottom",Fi[Fi["top-left"]=6]="top-left",Fi[Fi["top-right"]=7]="top-right",Fi[Fi["bottom-left"]=8]="bottom-left",Fi[Fi["bottom-right"]=9]="bottom-right";const Zu=Number.POSITIVE_INFINITY;function pg(l,n){return n[1]!==Zu?(function(s,f,v){let w=0,P=0;switch(f=Math.abs(f),v=Math.abs(v),s){case"top-right":case"top-left":case"top":P=v-7;break;case"bottom-right":case"bottom-left":case"bottom":P=7-v}switch(s){case"top-right":case"bottom-right":case"right":w=-f;break;case"top-left":case"bottom-left":case"left":w=f}return[w,P]})(l,n[0],n[1]):(function(s,f){let v=0,w=0;f<0&&(f=0);const P=f/Math.SQRT2;switch(s){case"top-right":case"top-left":w=P-7;break;case"bottom-right":case"bottom-left":w=7-P;break;case"bottom":w=7-f;break;case"top":w=f-7}switch(s){case"top-right":case"bottom-right":v=-P;break;case"top-left":case"bottom-left":v=P;break;case"left":v=f;break;case"right":v=-f}return[v,w]})(l,n[0])}function n0(l,n,s){var f;const v=l.layout,w=(f=v.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(n,{},s);if(w){const T=w.values,D=[];for(let L=0;L<T.length;L+=2){const F=D[L]=T[L],$=T[L+1].map((Z=>Z*oi));F.startsWith("top")?$[1]-=7:F.startsWith("bottom")&&($[1]+=7),D[L+1]=$}return new Pi(D)}const P=v.get("text-variable-anchor");if(P){let T;T=l._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[v.get("text-radial-offset").evaluate(n,{},s)*oi,Zu]:v.get("text-offset").evaluate(n,{},s).map((L=>L*oi));const D=[];for(const L of P)D.push(L,pg(L,T));return new Pi(D)}return null}function mg(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function __(l,n,s,f,v,w,P,T,D,L,F,$){let Z=w.textMaxSize.evaluate(n,{});Z===void 0&&(Z=P);const J=l.layers[0].layout,te=J.get("icon-offset").evaluate(n,{},F),oe=a0(s.horizontal),ue=P/24,de=l.tilePixelRatio*ue,Le=l.tilePixelRatio*Z/24,xe=l.tilePixelRatio*T,Ce=l.tilePixelRatio*J.get("symbol-spacing"),Ge=J.get("text-padding")*l.tilePixelRatio,Ye=(function(rr,Ut,Bt,Ar=1){const on=rr.get("icon-padding").evaluate(Ut,{},Bt),li=on&&on.values;return[li[0]*Ar,li[1]*Ar,li[2]*Ar,li[3]*Ar]})(J,n,F,l.tilePixelRatio),dt=J.get("text-max-angle")/180*Math.PI,Tt=J.get("text-rotation-alignment")!=="viewport"&&J.get("symbol-placement")!=="point",_t=J.get("icon-rotation-alignment")==="map"&&J.get("symbol-placement")!=="point",Et=J.get("symbol-placement"),Vt=Ce/2,bt=J.get("icon-text-fit");let wt;f&&bt!=="none"&&(l.allowVerticalPlacement&&s.vertical&&(wt=Yh(f,s.vertical,bt,J.get("icon-text-fit-padding"),te,ue)),oe&&(f=Yh(f,oe,bt,J.get("icon-text-fit-padding"),te,ue)));const tt=F?$.line.getGranularityForZoomLevel(F.z):1,Qt=(rr,Ut)=>{Ut.x<0||Ut.x>=Ct||Ut.y<0||Ut.y>=Ct||(function(Bt,Ar,on,li,Ei,_a,ba,Mi,sn,Wn,_i,Zn,Ui,xa,ui,Fa,Nn,o,h,m,x,R,z,Y,se){const Ae=Bt.addToLineVertexArray(Ar,on);let We,ut,mt,Ke,Qe=0,dr=0,ur=0,ln=0,Be=-1,ze=-1;const $e={};let pt=ms("");if(Bt.allowVerticalPlacement&&li.vertical){const Ua=Mi.layout.get("text-rotate").evaluate(x,{},Y)+90;mt=new Ba(sn,Ar,Wn,_i,Zn,li.vertical,Ui,xa,ui,Ua),ba&&(Ke=new Ba(sn,Ar,Wn,_i,Zn,ba,Nn,o,ui,Ua))}if(Ei){const Ua=Mi.layout.get("icon-rotate").evaluate(x,{}),ws=Mi.layout.get("icon-text-fit")!=="none",_d=Wo(Ei,Ua,z,ws),Jl=ba?Wo(ba,Ua,z,ws):void 0;ut=new Ba(sn,Ar,Wn,_i,Zn,Ei,Nn,o,!1,Ua),Qe=4*_d.length;const bd=Bt.iconSizeData;let Qu=null;bd.kind==="source"?(Qu=[Gl*Mi.layout.get("icon-size").evaluate(x,{})],Qu[0]>Wl&&Lt(`${Bt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):bd.kind==="composite"&&(Qu=[Gl*R.compositeIconSizes[0].evaluate(x,{},Y),Gl*R.compositeIconSizes[1].evaluate(x,{},Y)],(Qu[0]>Wl||Qu[1]>Wl)&&Lt(`${Bt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Bt.addSymbols(Bt.icon,_d,Qu,m,h,x,y.ao.none,Ar,Ae.lineStartIndex,Ae.lineLength,-1,Y),Be=Bt.icon.placedSymbolArray.length-1,Jl&&(dr=4*Jl.length,Bt.addSymbols(Bt.icon,Jl,Qu,m,h,x,y.ao.vertical,Ar,Ae.lineStartIndex,Ae.lineLength,-1,Y),ze=Bt.icon.placedSymbolArray.length-1)}const Wt=Object.keys(li.horizontal);for(const Ua of Wt){const ws=li.horizontal[Ua];if(!We){pt=ms(ws.text);const Jl=Mi.layout.get("text-rotate").evaluate(x,{},Y);We=new Ba(sn,Ar,Wn,_i,Zn,ws,Ui,xa,ui,Jl)}const _d=ws.positionedLines.length===1;if(ur+=i0(Bt,Ar,ws,_a,Mi,ui,x,Fa,Ae,li.vertical?y.ao.horizontal:y.ao.horizontalOnly,_d?Wt:[Ua],$e,Be,R,Y),_d)break}li.vertical&&(ln+=i0(Bt,Ar,li.vertical,_a,Mi,ui,x,Fa,Ae,y.ao.vertical,["vertical"],$e,ze,R,Y));const Rr=We?We.boxStartIndex:Bt.collisionBoxArray.length,nr=We?We.boxEndIndex:Bt.collisionBoxArray.length,hr=mt?mt.boxStartIndex:Bt.collisionBoxArray.length,$i=mt?mt.boxEndIndex:Bt.collisionBoxArray.length,qr=ut?ut.boxStartIndex:Bt.collisionBoxArray.length,Yu=ut?ut.boxEndIndex:Bt.collisionBoxArray.length,x_=Ke?Ke.boxStartIndex:Bt.collisionBoxArray.length,u4=Ke?Ke.boxEndIndex:Bt.collisionBoxArray.length;let Ql=-1;const l0=(Ua,ws)=>Ua&&Ua.circleDiameter?Math.max(Ua.circleDiameter,ws):ws;Ql=l0(We,Ql),Ql=l0(mt,Ql),Ql=l0(ut,Ql),Ql=l0(Ke,Ql);const a2=Ql>-1?1:0;a2&&(Ql*=se/oi),Bt.glyphOffsetArray.length>=Hu.MAX_GLYPHS&&Lt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),x.sortKey!==void 0&&Bt.addToSortKeyRanges(Bt.symbolInstances.length,x.sortKey);const c4=n0(Mi,x,Y),[h4,f4]=(function(Ua,ws){const _d=Ua.length,Jl=ws?.values;if(Jl?.length>0)for(let bd=0;bd<Jl.length;bd+=2){const Qu=Jl[bd+1];Ua.emplaceBack(y.aE[Jl[bd]],Qu[0],Qu[1])}return[_d,Ua.length]})(Bt.textAnchorOffsets,c4);Bt.symbolInstances.emplaceBack(Ar.x,Ar.y,$e.right>=0?$e.right:-1,$e.center>=0?$e.center:-1,$e.left>=0?$e.left:-1,$e.vertical||-1,Be,ze,pt,Rr,nr,hr,$i,qr,Yu,x_,u4,Wn,ur,ln,Qe,dr,a2,0,Ui,Ql,h4,f4)})(l,Ut,rr,s,f,v,wt,l.layers[0],l.collisionBoxArray,n.index,n.sourceLayerIndex,l.index,de,[Ge,Ge,Ge,Ge],Tt,D,xe,Ye,_t,te,n,w,L,F,P)};if(Et==="line")for(const rr of Jy(n.geometry,0,0,Ct,Ct)){const Ut=bo(rr,tt),Bt=fg(Ut,Ce,dt,s.vertical||oe,f,24,Le,l.overscaling,Ct);for(const Ar of Bt)oe&&b_(l,oe.text,Vt,Ar)||Qt(Ut,Ar)}else if(Et==="line-center"){for(const rr of n.geometry)if(rr.length>1){const Ut=bo(rr,tt),Bt=v_(Ut,dt,s.vertical||oe,f,24,Le);Bt&&Qt(Ut,Bt)}}else if(n.type==="Polygon")for(const rr of wu(n.geometry,0)){const Ut=Cp(rr,16);Qt(bo(rr[0],tt,!0),new Gu(Ut.x,Ut.y,0))}else if(n.type==="LineString")for(const rr of n.geometry){const Ut=bo(rr,tt);Qt(Ut,new Gu(Ut[0].x,Ut[0].y,0))}else if(n.type==="Point")for(const rr of n.geometry)for(const Ut of rr)Qt([Ut],new Gu(Ut.x,Ut.y,0))}function i0(l,n,s,f,v,w,P,T,D,L,F,$,Z,J,te){const oe=(function(Le,xe,Ce,Ge,Ye,dt,Tt,_t){const Et=Ge.layout.get("text-rotate").evaluate(dt,{})*Math.PI/180,Vt=[];for(const bt of xe.positionedLines)for(const wt of bt.positionedGlyphs){if(!wt.rect)continue;const tt=wt.rect||{};let Qt=4,rr=!0,Ut=1,Bt=0;const Ar=(Ye||_t)&&wt.vertical,on=wt.metrics.advance*wt.scale/2;if(_t&&xe.verticalizable&&(Bt=bt.lineOffset/2-(wt.imageName?-(oi-wt.metrics.width*wt.scale)/2:(wt.scale-1)*oi)),wt.imageName){const o=Tt[wt.imageName];rr=o.sdf,Ut=o.pixelRatio,Qt=1/Ut}const li=Ye?[wt.x+on,wt.y]:[0,0];let Ei=Ye?[0,0]:[wt.x+on+Ce[0],wt.y+Ce[1]-Bt],_a=[0,0];Ar&&(_a=Ei,Ei=[0,0]);const ba=wt.metrics.isDoubleResolution?2:1,Mi=(wt.metrics.left-Qt)*wt.scale-on+Ei[0],sn=(-wt.metrics.top-Qt)*wt.scale+Ei[1],Wn=Mi+tt.w/ba*wt.scale/Ut,_i=sn+tt.h/ba*wt.scale/Ut,Zn=new C(Mi,sn),Ui=new C(Wn,sn),xa=new C(Mi,_i),ui=new C(Wn,_i);if(Ar){const o=new C(-on,on- -17),h=-Math.PI/2,m=12-on,x=new C(22-m,-(wt.imageName?m:0)),R=new C(..._a);Zn._rotateAround(h,o)._add(x)._add(R),Ui._rotateAround(h,o)._add(x)._add(R),xa._rotateAround(h,o)._add(x)._add(R),ui._rotateAround(h,o)._add(x)._add(R)}if(Et){const o=Math.sin(Et),h=Math.cos(Et),m=[h,-o,o,h];Zn._matMult(m),Ui._matMult(m),xa._matMult(m),ui._matMult(m)}const Fa=new C(0,0),Nn=new C(0,0);Vt.push({tl:Zn,tr:Ui,bl:xa,br:ui,tex:tt,writingMode:xe.writingMode,glyphOffset:li,sectionIndex:wt.sectionIndex,isSDF:rr,pixelOffsetTL:Fa,pixelOffsetBR:Nn,minFontScaleX:0,minFontScaleY:0})}return Vt})(0,s,T,v,w,P,f,l.allowVerticalPlacement),ue=l.textSizeData;let de=null;ue.kind==="source"?(de=[Gl*v.layout.get("text-size").evaluate(P,{})],de[0]>Wl&&Lt(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ue.kind==="composite"&&(de=[Gl*J.compositeTextSizes[0].evaluate(P,{},te),Gl*J.compositeTextSizes[1].evaluate(P,{},te)],(de[0]>Wl||de[1]>Wl)&&Lt(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),l.addSymbols(l.text,oe,de,T,w,P,L,n,D.lineStartIndex,D.lineLength,Z,te);for(const Le of F)$[Le]=l.text.placedSymbolArray.length-1;return 4*oe.length}function a0(l){for(const n in l)return l[n];return null}function b_(l,n,s,f){const v=l.compareText;if(n in v){const w=v[n];for(let P=w.length-1;P>=0;P--)if(f.dist(w[P])<s)return!0}else v[n]=[];return v[n].push(f),!1}const o0=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Tp{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,f]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const v=f>>4;if(v!==1)throw new Error(`Got v${v} data when expected v1.`);const w=o0[15&f];if(!w)throw new Error("Unrecognized array type.");const[P]=new Uint16Array(n,2,1),[T]=new Uint32Array(n,4,1);return new Tp(T,P,w,n)}constructor(n,s=64,f=Float64Array,v){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=f,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const w=o0.indexOf(this.ArrayType),P=2*n*this.ArrayType.BYTES_PER_ELEMENT,T=n*this.IndexArrayType.BYTES_PER_ELEMENT,D=(8-T%8)%8;if(w<0)throw new Error(`Unexpected typed array class: ${f}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+T+D,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+P+T+D),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+T+D,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+w]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=n,this.coords[this._pos++]=s,f}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return Xu(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,f,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:P,nodeSize:T}=this,D=[0,w.length-1,0],L=[];for(;D.length;){const F=D.pop()||0,$=D.pop()||0,Z=D.pop()||0;if($-Z<=T){for(let ue=Z;ue<=$;ue++){const de=P[2*ue],Le=P[2*ue+1];de>=n&&de<=f&&Le>=s&&Le<=v&&L.push(w[ue])}continue}const J=Z+$>>1,te=P[2*J],oe=P[2*J+1];te>=n&&te<=f&&oe>=s&&oe<=v&&L.push(w[J]),(F===0?n<=te:s<=oe)&&(D.push(Z),D.push(J-1),D.push(1-F)),(F===0?f>=te:v>=oe)&&(D.push(J+1),D.push($),D.push(1-F))}return L}within(n,s,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:w,nodeSize:P}=this,T=[0,v.length-1,0],D=[],L=f*f;for(;T.length;){const F=T.pop()||0,$=T.pop()||0,Z=T.pop()||0;if($-Z<=P){for(let ue=Z;ue<=$;ue++)Xc(w[2*ue],w[2*ue+1],n,s)<=L&&D.push(v[ue]);continue}const J=Z+$>>1,te=w[2*J],oe=w[2*J+1];Xc(te,oe,n,s)<=L&&D.push(v[J]),(F===0?n-f<=te:s-f<=oe)&&(T.push(Z),T.push(J-1),T.push(1-F)),(F===0?n+f>=te:s+f>=oe)&&(T.push(J+1),T.push($),T.push(1-F))}return D}}function Xu(l,n,s,f,v,w){if(v-f<=s)return;const P=f+v>>1;rf(l,n,P,f,v,w),Xu(l,n,s,f,P-1,1-w),Xu(l,n,s,P+1,v,1-w)}function rf(l,n,s,f,v,w){for(;v>f;){if(v-f>600){const L=v-f+1,F=s-f+1,$=Math.log(L),Z=.5*Math.exp(2*$/3),J=.5*Math.sqrt($*Z*(L-Z)/L)*(F-L/2<0?-1:1);rf(l,n,s,Math.max(f,Math.floor(s-F*Z/L+J)),Math.min(v,Math.floor(s+(L-F)*Z/L+J)),w)}const P=n[2*s+w];let T=f,D=v;for(nf(l,n,f,s),n[2*v+w]>P&&nf(l,n,f,v);T<D;){for(nf(l,n,T,D),T++,D--;n[2*T+w]<P;)T++;for(;n[2*D+w]>P;)D--}n[2*f+w]===P?nf(l,n,f,D):(D++,nf(l,n,D,v)),D<=s&&(f=D+1),s<=D&&(v=D-1)}}function nf(l,n,s,f){gg(l,s,f),gg(n,2*s,2*f),gg(n,2*s+1,2*f+1)}function gg(l,n,s){const f=l[n];l[n]=l[s],l[s]=f}function Xc(l,n,s,f){const v=l-s,w=n-f;return v*v+w*w}var Kc;y.cx=void 0,(Kc=y.cx||(y.cx={})).create="create",Kc.load="load",Kc.fullLoad="fullLoad";let gd=null,Ku=[];const yd=1e3/60,vd="loadTime",af="fullLoadTime",s0={mark(l){performance.mark(l)},frame(l){const n=l;gd!=null&&Ku.push(n-gd),gd=n},clearMetrics(){gd=null,Ku=[],performance.clearMeasures(vd),performance.clearMeasures(af);for(const l in y.cx)performance.clearMarks(y.cx[l])},getPerformanceMetrics(){performance.measure(vd,y.cx.create,y.cx.load),performance.measure(af,y.cx.create,y.cx.fullLoad);const l=performance.getEntriesByName(vd)[0].duration,n=performance.getEntriesByName(af)[0].duration,s=Ku.length,f=1/(Ku.reduce(((w,P)=>w+P),0)/s/1e3),v=Ku.filter((w=>w>yd)).reduce(((w,P)=>w+(P-yd)/yd),0);return{loadTime:l,fullLoadTime:n,fps:f,percentDroppedFrames:v/(s+v)*100,totalFrames:s}}};y.$=Ct,y.A=ie,y.B=function([l,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:l*Math.cos(n)*Math.sin(s),y:l*Math.sin(n)*Math.sin(s),z:l*Math.cos(s)}},y.C=zo,y.D=zt,y.E=Ot,y.F=Vr,y.G=Nf,y.H=function(l){if(zr==null){const n=l.navigator?l.navigator.userAgent:null;zr=!!l.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return zr},y.I=Zh,y.J=class{constructor(l,n){this.target=l,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new fd((()=>this.process())),this.subscription=Ea(this.target,"message",(s=>this.receive(s)),!1),this.globalScope=Dr(self)?l:window}registerMessageHandler(l,n){this.messageHandlers[l]=n}sendAsync(l,n){return new Promise(((s,f)=>{const v=Math.round(1e18*Math.random()).toString(36).substring(0,10),w=n?Ea(n.signal,"abort",(()=>{w?.unsubscribe(),delete this.resolveRejects[v];const D={id:v,type:"<cancel>",origin:location.origin,targetMapId:l.targetMapId,sourceMapId:this.mapId};this.target.postMessage(D)}),xp):null;this.resolveRejects[v]={resolve:D=>{w?.unsubscribe(),s(D)},reject:D=>{w?.unsubscribe(),f(D)}};const P=[],T=Object.assign(Object.assign({},l),{id:v,sourceMapId:this.mapId,origin:location.origin,data:fo(l.data,P)});this.target.postMessage(T,{transfer:P})}))}receive(l){const n=l.data,s=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!=="resource://android"&&location.origin!=="resource://android"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[s];const f=this.abortControllers[s];return delete this.abortControllers[s],void(f&&f.abort())}if(Dr(self)||n.mustQueue)return this.tasks[s]=n,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,n)}}process(){if(this.taskQueue.length===0)return;const l=this.taskQueue.shift(),n=this.tasks[l];delete this.tasks[l],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(l,n)}processTask(l,n){return c(this,void 0,void 0,(function*(){if(n.type==="<response>"){const v=this.resolveRejects[l];return delete this.resolveRejects[l],v?void(n.error?v.reject(Il(n.error)):v.resolve(Il(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(l,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=Il(n.data),f=new AbortController;this.abortControllers[l]=f;try{const v=yield this.messageHandlers[n.type](n.sourceMapId,s,f);this.completeTask(l,null,v)}catch(v){this.completeTask(l,v)}}))}completeTask(l,n,s){const f=[];delete this.abortControllers[l];const v={id:l,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?fo(n):null,data:fo(s,f)};this.target.postMessage(v,{transfer:f})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},y.K=le,y.L=function(){var l=new ie(16);return ie!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},y.M=function(l,n,s){var f,v,w,P,T,D,L,F,$,Z,J,te,oe=s[0],ue=s[1],de=s[2];return n===l?(l[12]=n[0]*oe+n[4]*ue+n[8]*de+n[12],l[13]=n[1]*oe+n[5]*ue+n[9]*de+n[13],l[14]=n[2]*oe+n[6]*ue+n[10]*de+n[14],l[15]=n[3]*oe+n[7]*ue+n[11]*de+n[15]):(v=n[1],w=n[2],P=n[3],T=n[4],D=n[5],L=n[6],F=n[7],$=n[8],Z=n[9],J=n[10],te=n[11],l[0]=f=n[0],l[1]=v,l[2]=w,l[3]=P,l[4]=T,l[5]=D,l[6]=L,l[7]=F,l[8]=$,l[9]=Z,l[10]=J,l[11]=te,l[12]=f*oe+T*ue+$*de+n[12],l[13]=v*oe+D*ue+Z*de+n[13],l[14]=w*oe+L*ue+J*de+n[14],l[15]=P*oe+F*ue+te*de+n[15]),l},y.N=function(l,n,s){var f=s[0],v=s[1],w=s[2];return l[0]=n[0]*f,l[1]=n[1]*f,l[2]=n[2]*f,l[3]=n[3]*f,l[4]=n[4]*v,l[5]=n[5]*v,l[6]=n[6]*v,l[7]=n[7]*v,l[8]=n[8]*w,l[9]=n[9]*w,l[10]=n[10]*w,l[11]=n[11]*w,l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15],l},y.O=function(l,n,s){var f=n[0],v=n[1],w=n[2],P=n[3],T=n[4],D=n[5],L=n[6],F=n[7],$=n[8],Z=n[9],J=n[10],te=n[11],oe=n[12],ue=n[13],de=n[14],Le=n[15],xe=s[0],Ce=s[1],Ge=s[2],Ye=s[3];return l[0]=xe*f+Ce*T+Ge*$+Ye*oe,l[1]=xe*v+Ce*D+Ge*Z+Ye*ue,l[2]=xe*w+Ce*L+Ge*J+Ye*de,l[3]=xe*P+Ce*F+Ge*te+Ye*Le,l[4]=(xe=s[4])*f+(Ce=s[5])*T+(Ge=s[6])*$+(Ye=s[7])*oe,l[5]=xe*v+Ce*D+Ge*Z+Ye*ue,l[6]=xe*w+Ce*L+Ge*J+Ye*de,l[7]=xe*P+Ce*F+Ge*te+Ye*Le,l[8]=(xe=s[8])*f+(Ce=s[9])*T+(Ge=s[10])*$+(Ye=s[11])*oe,l[9]=xe*v+Ce*D+Ge*Z+Ye*ue,l[10]=xe*w+Ce*L+Ge*J+Ye*de,l[11]=xe*P+Ce*F+Ge*te+Ye*Le,l[12]=(xe=s[12])*f+(Ce=s[13])*T+(Ge=s[14])*$+(Ye=s[15])*oe,l[13]=xe*v+Ce*D+Ge*Z+Ye*ue,l[14]=xe*w+Ce*L+Ge*J+Ye*de,l[15]=xe*P+Ce*F+Ge*te+Ye*Le,l},y.P=C,y.Q=function(l,n){const s={};for(let f=0;f<n.length;f++){const v=n[f];v in l&&(s[v]=l[v])}return s},y.R=ia,y.S=Zl,y.T=Nc,y.U=ug,y.V=lg,y.W=W,y.X=K,y.Y=qi,y.Z=va,y._=c,y.a=re,y.a$=rt,y.a0=function(l,n){var s,f,v,w,P;if(!l)return n??{};if(!n)return l;let T=Object.assign({},l);if(n.removeAll&&(T={removeAll:!0}),n.remove){const D=new Set(n.remove);T.add&&(T.add=T.add.filter((F=>!D.has(F.id)))),T.update&&(T.update=T.update.filter((F=>!D.has(F.id))));const L=new Set(((s=l.add)!==null&&s!==void 0?s:[]).map((F=>F.id)));n.remove=n.remove.filter((F=>!L.has(F)))}if(n.remove){const D=new Set(T.remove?T.remove.concat(n.remove):n.remove);T.remove=Array.from(D.values())}if(n.add){const D=T.add?T.add.concat(n.add):n.add,L=new Map(D.map((F=>[F.id,F])));T.add=Array.from(L.values())}if(n.update){const D=new Map((f=T.update)===null||f===void 0?void 0:f.map((L=>[L.id,L])));for(const L of n.update){const F=(v=D.get(L.id))!==null&&v!==void 0?v:{id:L.id};L.newGeometry&&(F.newGeometry=L.newGeometry),L.addOrUpdateProperties&&(F.addOrUpdateProperties=((w=F.addOrUpdateProperties)!==null&&w!==void 0?w:[]).concat(L.addOrUpdateProperties)),L.removeProperties&&(F.removeProperties=((P=F.removeProperties)!==null&&P!==void 0?P:[]).concat(L.removeProperties)),L.removeAllProperties&&(F.removeAllProperties=!0),D.set(L.id,F)}T.update=Array.from(D.values())}return T.remove&&T.add&&(T.remove=T.remove.filter((D=>T.add.findIndex((L=>L.id===D))===-1))),T},y.a1=si,y.a2=Xl,y.a3=25,y.a4=pd,y.a5=l=>{const n=window.document.createElement("video");return n.muted=!0,new Promise((s=>{n.onloadstart=()=>{s(n)};for(const f of l){const v=window.document.createElement("source");qe(f)||(n.crossOrigin="Anonymous"),v.src=f,n.appendChild(v)}}))},y.a6=vt,y.a7=function(){return St++},y.a8=ae,y.a9=Hu,y.aA=function(l){let n=1/0,s=1/0,f=-1/0,v=-1/0;for(const w of l)n=Math.min(n,w.x),s=Math.min(s,w.y),f=Math.max(f,w.x),v=Math.max(v,w.y);return[n,s,f,v]},y.aB=oi,y.aC=Te,y.aD=function(l,n,s,f,v=!1){if(!s[0]&&!s[1])return[0,0];const w=v?f==="map"?-l.bearingInRadians:0:f==="viewport"?l.bearingInRadians:0;if(w){const P=Math.sin(w),T=Math.cos(w);s=[s[0]*T-s[1]*P,s[0]*P+s[1]*T]}return[v?s[0]:Te(n,s[0],l.zoom),v?s[1]:Te(n,s[1],l.zoom)]},y.aF=gp,y.aG=mg,y.aH=Qm,y.aI=Tp,y.aJ=wn,y.aK=Ja,y.aL=Ze,y.aM=Er,y.aN=Zr,y.aO=ir,y.aP=no,y.aQ=wp,y.aR=At,y.aS=ht,y.aT=function(l){var n=new ie(3);return n[0]=l[0],n[1]=l[1],n[2]=l[2],n},y.aU=function(l,n,s){return l[0]=n[0]-s[0],l[1]=n[1]-s[1],l[2]=n[2]-s[2],l},y.aV=function(l,n){var s=n[0],f=n[1],v=n[2],w=s*s+f*f+v*v;return w>0&&(w=1/Math.sqrt(w)),l[0]=n[0]*w,l[1]=n[1]*w,l[2]=n[2]*w,l},y.aW=ot,y.aX=function(l,n){return l[0]*n[0]+l[1]*n[1]+l[2]*n[2]},y.aY=function(l,n,s){return l[0]=n[0]*s[0],l[1]=n[1]*s[1],l[2]=n[2]*s[2],l[3]=n[3]*s[3],l},y.aZ=Me,y.a_=function(l,n,s){const f=n[0]*s[0]+n[1]*s[1]+n[2]*s[2];return f===0?null:(-(l[0]*s[0]+l[1]*s[1]+l[2]*s[2])-s[3])/f},y.aa=as,y.ab=jl,y.ac=Ky,y.ad=function(l){const n={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((s,f,v,w)=>{const P=v||w;return n[f]=!P||P.toLowerCase(),""})),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},y.ae=To,y.af=function(l){return Math.pow(2,l)},y.ag=ye,y.ah=Ft,y.ai=85.051129,y.aj=dd,y.ak=function(l){return Math.log(l)/Math.LN2},y.al=function(l){var n=l[0],s=l[1];return n*n+s*s},y.am=function(l,n){const s=[];for(const f in l)f in n||s.push(f);return s},y.an=function(l,n){let s=0,f=0;if(l.kind==="constant")f=l.layoutSize;else if(l.kind!=="source"){const{interpolationType:v,minZoom:w,maxZoom:P}=l,T=v?Ft(Ci.interpolationFactor(v,n,w,P),0,1):0;l.kind==="camera"?f=zo.number(l.minSize,l.maxSize,T):s=T}return{uSizeT:s,uSize:f}},y.ap=function(l,{uSize:n,uSizeT:s},{lowerSize:f,upperSize:v}){return l.kind==="source"?f/Gl:l.kind==="composite"?zo.number(f/Gl,v/Gl,s):n},y.aq=function(l,n){var s=n[0],f=n[1],v=n[2],w=n[3],P=n[4],T=n[5],D=n[6],L=n[7],F=n[8],$=n[9],Z=n[10],J=n[11],te=n[12],oe=n[13],ue=n[14],de=n[15],Le=s*T-f*P,xe=s*D-v*P,Ce=s*L-w*P,Ge=f*D-v*T,Ye=f*L-w*T,dt=v*L-w*D,Tt=F*oe-$*te,_t=F*ue-Z*te,Et=F*de-J*te,Vt=$*ue-Z*oe,bt=$*de-J*oe,wt=Z*de-J*ue,tt=Le*wt-xe*bt+Ce*Vt+Ge*Et-Ye*_t+dt*Tt;return tt?(l[0]=(T*wt-D*bt+L*Vt)*(tt=1/tt),l[1]=(v*bt-f*wt-w*Vt)*tt,l[2]=(oe*dt-ue*Ye+de*Ge)*tt,l[3]=(Z*Ye-$*dt-J*Ge)*tt,l[4]=(D*Et-P*wt-L*_t)*tt,l[5]=(s*wt-v*Et+w*_t)*tt,l[6]=(ue*Ce-te*dt-de*xe)*tt,l[7]=(F*dt-Z*Ce+J*xe)*tt,l[8]=(P*bt-T*Et+L*Tt)*tt,l[9]=(f*Et-s*bt-w*Tt)*tt,l[10]=(te*Ye-oe*Ce+de*Le)*tt,l[11]=($*Ce-F*Ye-J*Le)*tt,l[12]=(T*_t-P*Vt-D*Tt)*tt,l[13]=(s*Vt-f*_t+v*Tt)*tt,l[14]=(oe*xe-te*Ge-ue*Le)*tt,l[15]=(F*Ge-$*xe+Z*Le)*tt,l):null},y.ar=ct,y.as=function(l){var n=l[0],s=l[1];return Math.sqrt(n*n+s*s)},y.at=function(l){return l[0]=0,l[1]=0,l},y.au=function(l,n,s){return l[0]=n[0]*s,l[1]=n[1]*s,l},y.av=cd,y.aw=It,y.ax=function(l,n,s,f){const v=n.y-l.y,w=n.x-l.x,P=f.y-s.y,T=f.x-s.x,D=P*w-T*v;if(D===0)return null;const L=(T*(l.y-s.y)-P*(l.x-s.x))/D;return new C(l.x+L*w,l.y+L*v)},y.ay=Jy,y.az=Uf,y.b=Bn,y.b$=class extends u{},y.b0=function(l,n,s){return l[0]=n[0]*s,l[1]=n[1]*s,l[2]=n[2]*s,l[3]=n[3]*s,l},y.b1=function(l,n){return l[0]*n[0]+l[1]*n[1]+l[2]*n[2]+l[3]},y.b2=Sp,y.b3=Zc,y.b4=function(l,n,s,f,v){var w=1/Math.tan(n/2);if(l[0]=w/s,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=w,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,v!=null&&v!==1/0){var P=1/(f-v);l[10]=(v+f)*P,l[14]=2*v*f*P}else l[10]=-1,l[14]=-2*f;return l},y.b5=function(l){var n=new ie(16);return n[0]=l[0],n[1]=l[1],n[2]=l[2],n[3]=l[3],n[4]=l[4],n[5]=l[5],n[6]=l[6],n[7]=l[7],n[8]=l[8],n[9]=l[9],n[10]=l[10],n[11]=l[11],n[12]=l[12],n[13]=l[13],n[14]=l[14],n[15]=l[15],n},y.b6=function(l,n,s){var f=Math.sin(s),v=Math.cos(s),w=n[0],P=n[1],T=n[2],D=n[3],L=n[4],F=n[5],$=n[6],Z=n[7];return n!==l&&(l[8]=n[8],l[9]=n[9],l[10]=n[10],l[11]=n[11],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15]),l[0]=w*v+L*f,l[1]=P*v+F*f,l[2]=T*v+$*f,l[3]=D*v+Z*f,l[4]=L*v-w*f,l[5]=F*v-P*f,l[6]=$*v-T*f,l[7]=Z*v-D*f,l},y.b7=function(l,n,s){var f=Math.sin(s),v=Math.cos(s),w=n[4],P=n[5],T=n[6],D=n[7],L=n[8],F=n[9],$=n[10],Z=n[11];return n!==l&&(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15]),l[4]=w*v+L*f,l[5]=P*v+F*f,l[6]=T*v+$*f,l[7]=D*v+Z*f,l[8]=L*v-w*f,l[9]=F*v-P*f,l[10]=$*v-T*f,l[11]=Z*v-D*f,l},y.b8=function(){const l=new Float32Array(16);return ye(l),l},y.b9=function(){const l=new Float64Array(16);return ye(l),l},y.bA=function(l,n){const s=et(l,360),f=et(n,360),v=f-s,w=f>s?v-360:v+360;return Math.abs(v)<Math.abs(w)?v:w},y.bB=function(l){return l[0]=0,l[1]=0,l[2]=0,l},y.bC=function(l,n,s,f){const v=Math.sqrt(l*l+n*n),w=Math.sqrt(s*s+f*f);l/=v,n/=v,s/=w,f/=w;const P=Math.acos(l*s+n*f);return-n*s+l*f>0?P:-P},y.bD=function(l,n){const s=et(l,2*Math.PI),f=et(n,2*Math.PI);return Math.min(Math.abs(s-f),Math.abs(s-f+2*Math.PI),Math.abs(s-f-2*Math.PI))},y.bE=function(){const l={},n=ke.$version;for(const s in ke.$root){const f=ke.$root[s];if(f.required){let v=null;v=s==="version"?n:f.type==="array"?[]:{},v!=null&&(l[s]=v)}}return l},y.bF=Ih,y.bG=Se,y.bH=function l(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let f=0;f<n.length;f++)if(!l(n[f],s[f]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const f in n)if(!l(n[f],s[f]))return!1;return!0}return n===s},y.bI=function(l){l=l.slice();const n=Object.create(null);for(let s=0;s<l.length;s++)n[l[s].id]=l[s];for(let s=0;s<l.length;s++)"ref"in l[s]&&(l[s]=br(l[s],n[l[s].ref]));return l},y.bJ=function(l,n){if(l.type==="custom")return new sg(l,n);switch(l.type){case"background":return new ag(l,n);case"circle":return new wm(l,n);case"color-relief":return new f_(l,n);case"fill":return new ed(l,n);case"fill-extrusion":return new Vl(l,n);case"heatmap":return new Pm(l,n);case"hillshade":return new Fl(l,n);case"line":return new Vu(l,n);case"raster":return new Gy(l,n);case"symbol":return new bp(l,n)}},y.bK=He,y.bL=function(l,n){if(!l)return[{command:"setStyle",args:[n]}];let s=[];try{if(!$t(l.version,n.version))return[{command:"setStyle",args:[n]}];$t(l.center,n.center)||s.push({command:"setCenter",args:[n.center]}),$t(l.state,n.state)||s.push({command:"setGlobalState",args:[n.state]}),$t(l.centerAltitude,n.centerAltitude)||s.push({command:"setCenterAltitude",args:[n.centerAltitude]}),$t(l.zoom,n.zoom)||s.push({command:"setZoom",args:[n.zoom]}),$t(l.bearing,n.bearing)||s.push({command:"setBearing",args:[n.bearing]}),$t(l.pitch,n.pitch)||s.push({command:"setPitch",args:[n.pitch]}),$t(l.roll,n.roll)||s.push({command:"setRoll",args:[n.roll]}),$t(l.sprite,n.sprite)||s.push({command:"setSprite",args:[n.sprite]}),$t(l.glyphs,n.glyphs)||s.push({command:"setGlyphs",args:[n.glyphs]}),$t(l.transition,n.transition)||s.push({command:"setTransition",args:[n.transition]}),$t(l.light,n.light)||s.push({command:"setLight",args:[n.light]}),$t(l.terrain,n.terrain)||s.push({command:"setTerrain",args:[n.terrain]}),$t(l.sky,n.sky)||s.push({command:"setSky",args:[n.sky]}),$t(l.projection,n.projection)||s.push({command:"setProjection",args:[n.projection]});const f={},v=[];(function(P,T,D,L){let F;for(F in T=T||{},P=P||{})Object.prototype.hasOwnProperty.call(P,F)&&(Object.prototype.hasOwnProperty.call(T,F)||Yn(F,D,L));for(F in T)Object.prototype.hasOwnProperty.call(T,F)&&(Object.prototype.hasOwnProperty.call(P,F)?$t(P[F],T[F])||(P[F].type==="geojson"&&T[F].type==="geojson"&&Kr(P,T,F)?or(D,{command:"setGeoJSONSourceData",args:[F,T[F].data]}):ri(F,T,D,L)):Ur(F,T,D))})(l.sources,n.sources,v,f);const w=[];l.layers&&l.layers.forEach((P=>{"source"in P&&f[P.source]?s.push({command:"removeLayer",args:[P.id]}):w.push(P)})),s=s.concat(v),(function(P,T,D){T=T||[];const L=(P=P||[]).map(sr),F=T.map(sr),$=P.reduce(pn,{}),Z=T.reduce(pn,{}),J=L.slice(),te=Object.create(null);let oe,ue,de,Le,xe;for(let Ce=0,Ge=0;Ce<L.length;Ce++)oe=L[Ce],Object.prototype.hasOwnProperty.call(Z,oe)?Ge++:(or(D,{command:"removeLayer",args:[oe]}),J.splice(J.indexOf(oe,Ge),1));for(let Ce=0,Ge=0;Ce<F.length;Ce++)oe=F[F.length-1-Ce],J[J.length-1-Ce]!==oe&&(Object.prototype.hasOwnProperty.call($,oe)?(or(D,{command:"removeLayer",args:[oe]}),J.splice(J.lastIndexOf(oe,J.length-Ge),1)):Ge++,Le=J[J.length-Ce],or(D,{command:"addLayer",args:[Z[oe],Le]}),J.splice(J.length-Ce,0,oe),te[oe]=!0);for(let Ce=0;Ce<F.length;Ce++)if(oe=F[Ce],ue=$[oe],de=Z[oe],!te[oe]&&!$t(ue,de))if($t(ue.source,de.source)&&$t(ue["source-layer"],de["source-layer"])&&$t(ue.type,de.type)){for(xe in tr(ue.layout,de.layout,D,oe,null,"setLayoutProperty"),tr(ue.paint,de.paint,D,oe,null,"setPaintProperty"),$t(ue.filter,de.filter)||or(D,{command:"setFilter",args:[oe,de.filter]}),$t(ue.minzoom,de.minzoom)&&$t(ue.maxzoom,de.maxzoom)||or(D,{command:"setLayerZoomRange",args:[oe,de.minzoom,de.maxzoom]}),ue)Object.prototype.hasOwnProperty.call(ue,xe)&&xe!=="layout"&&xe!=="paint"&&xe!=="filter"&&xe!=="metadata"&&xe!=="minzoom"&&xe!=="maxzoom"&&(xe.indexOf("paint.")===0?tr(ue[xe],de[xe],D,oe,xe.slice(6),"setPaintProperty"):$t(ue[xe],de[xe])||or(D,{command:"setLayerProperty",args:[oe,xe,de[xe]]}));for(xe in de)Object.prototype.hasOwnProperty.call(de,xe)&&!Object.prototype.hasOwnProperty.call(ue,xe)&&xe!=="layout"&&xe!=="paint"&&xe!=="filter"&&xe!=="metadata"&&xe!=="minzoom"&&xe!=="maxzoom"&&(xe.indexOf("paint.")===0?tr(ue[xe],de[xe],D,oe,xe.slice(6),"setPaintProperty"):$t(ue[xe],de[xe])||or(D,{command:"setLayerProperty",args:[oe,xe,de[xe]]}))}else or(D,{command:"removeLayer",args:[oe]}),Le=J[J.lastIndexOf(oe)+1],or(D,{command:"addLayer",args:[de,Le]})})(w,n.layers,s)}catch(f){console.warn("Unable to compute style diff:",f),s=[{command:"setStyle",args:[n]}]}return s},y.bM=function(l){const n=[],s=l.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),l.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},y.bN=Gt,y.bO=Nt,y.bP=class extends Fr{constructor(l,n){super(l,n),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},y.bQ=Mn,y.bR=class extends Fr{constructor(l,n){super(l,n),this.current=jh}set(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let n=1;n<16;n++)if(l[n]!==this.current[n]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}},y.bS=Ni,y.bT=class extends Fr{constructor(l,n){super(l,n),this.current=[0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))}},y.bU=class extends Fr{constructor(l,n){super(l,n),this.current=[0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))}},y.bV=ve,y.bW=function(l,n){var s=Math.sin(n),f=Math.cos(n);return l[0]=f,l[1]=s,l[2]=0,l[3]=-s,l[4]=f,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},y.bX=function(l,n,s){var f=n[0],v=n[1],w=n[2];return l[0]=f*s[0]+v*s[3]+w*s[6],l[1]=f*s[1]+v*s[4]+w*s[7],l[2]=f*s[2]+v*s[5]+w*s[8],l},y.bY=function(l,n,s,f,v,w,P){var T=1/(n-s),D=1/(f-v),L=1/(w-P);return l[0]=-2*T,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*D,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*L,l[11]=0,l[12]=(n+s)*T,l[13]=(v+f)*D,l[14]=(P+w)*L,l[15]=1,l},y.bZ=class extends Fr{constructor(l,n){super(l,n),this.current=new Array}set(l){if(l!=this.current){this.current=l;const n=new Float32Array(4*l.length);for(let s=0;s<l.length;s++)n[4*s]=l[s].r,n[4*s+1]=l[s].g,n[4*s+2]=l[s].b,n[4*s+3]=l[s].a;this.gl.uniform4fv(this.location,n)}}},y.b_=class extends Fr{constructor(l,n){super(l,n),this.current=new Array}set(l){if(l!=this.current){this.current=l;const n=new Float32Array(l);this.gl.uniform1fv(this.location,n)}}},y.ba=function(){return new Float64Array(16)},y.bb=function(l,n,s){const f=new Float64Array(4);return Ue(f,l,n-90,s),f},y.bc=function(l,n,s,f){var v,w,P,T,D,L=n[0],F=n[1],$=n[2],Z=n[3],J=s[0],te=s[1],oe=s[2],ue=s[3];return(w=L*J+F*te+$*oe+Z*ue)<0&&(w=-w,J=-J,te=-te,oe=-oe,ue=-ue),1-w>ee?(v=Math.acos(w),P=Math.sin(v),T=Math.sin((1-f)*v)/P,D=Math.sin(f*v)/P):(T=1-f,D=f),l[0]=T*L+D*J,l[1]=T*F+D*te,l[2]=T*$+D*oe,l[3]=T*Z+D*ue,l},y.bd=function(l){const n=new Float64Array(9);var s,f,v,w,P,T,D,L,F,$,Z,J,te,oe,ue,de,Le,xe;$=(v=(f=l)[0])*(D=v+v),Z=(w=f[1])*D,te=(P=f[2])*D,oe=P*(L=w+w),de=(T=f[3])*D,Le=T*L,xe=T*(F=P+P),(s=n)[0]=1-(J=w*L)-(ue=P*F),s[3]=Z-xe,s[6]=te+Le,s[1]=Z+xe,s[4]=1-$-ue,s[7]=oe-de,s[2]=te-Le,s[5]=oe+de,s[8]=1-$-J;const Ce=no(-Math.asin(Ft(n[2],-1,1)));let Ge,Ye;return Math.hypot(n[5],n[8])<.001?(Ge=0,Ye=-no(Math.atan2(n[3],n[4]))):(Ge=no(n[5]===0&&n[8]===0?0:Math.atan2(n[5],n[8])),Ye=no(n[1]===0&&n[0]===0?0:Math.atan2(n[1],n[0]))),{roll:Ge,pitch:Ce+90,bearing:Ye}},y.be=function(l,n){return l.roll==n.roll&&l.pitch==n.pitch&&l.bearing==n.bearing},y.bf=_r,y.bg=yn,y.bh=Bc,y.bi=oa,y.bj=Bi,y.bk=st,y.bl=yt,y.bm=En,y.bn=function(l,n,s,f,v){return st(f,v,Ft((l-n)/(s-n),0,1))},y.bo=et,y.bp=function(){return new Float64Array(3)},y.bq=function(l,n,s,f){return l[0]=n[0]+s[0]*f,l[1]=n[1]+s[1]*f,l[2]=n[2]+s[2]*f,l},y.br=Ue,y.bs=function(l,n,s){var f=s[0],v=s[1],w=s[2],P=s[3],T=n[0],D=n[1],L=n[2],F=v*L-w*D,$=w*T-f*L,Z=f*D-v*T;return l[0]=T+P*(F+=F)+v*(Z+=Z)-w*($+=$),l[1]=D+P*$+w*F-f*Z,l[2]=L+P*Z+f*$-v*F,l},y.bt=function(l,n,s){const f=(v=[l[0],l[1],l[2],n[0],n[1],n[2],s[0],s[1],s[2]])[0]*((F=v[8])*(P=v[4])-(T=v[5])*(L=v[7]))+v[1]*(-F*(w=v[3])+T*(D=v[6]))+v[2]*(L*w-P*D);var v,w,P,T,D,L,F;if(f===0)return null;const $=ot([],[n[0],n[1],n[2]],[s[0],s[1],s[2]]),Z=ot([],[s[0],s[1],s[2]],[l[0],l[1],l[2]]),J=ot([],[l[0],l[1],l[2]],[n[0],n[1],n[2]]),te=At([],$,-l[3]);return ht(te,te,At([],Z,-n[3])),ht(te,te,At([],J,-s[3])),At(te,te,1/f),te},y.bu=qu,y.bv=function(){return new Float64Array(4)},y.bw=function(l,n,s,f){var v=[],w=[];return v[0]=n[0]-s[0],v[1]=n[1]-s[1],v[2]=n[2]-s[2],w[0]=v[0]*Math.cos(f)-v[1]*Math.sin(f),w[1]=v[0]*Math.sin(f)+v[1]*Math.cos(f),w[2]=v[2],l[0]=w[0]+s[0],l[1]=w[1]+s[1],l[2]=w[2]+s[2],l},y.bx=function(l,n,s,f){var v=[],w=[];return v[0]=n[0]-s[0],v[1]=n[1]-s[1],v[2]=n[2]-s[2],w[0]=v[0],w[1]=v[1]*Math.cos(f)-v[2]*Math.sin(f),w[2]=v[1]*Math.sin(f)+v[2]*Math.cos(f),l[0]=w[0]+s[0],l[1]=w[1]+s[1],l[2]=w[2]+s[2],l},y.by=function(l,n,s,f){var v=[],w=[];return v[0]=n[0]-s[0],v[1]=n[1]-s[1],v[2]=n[2]-s[2],w[0]=v[2]*Math.sin(f)+v[0]*Math.cos(f),w[1]=v[1],w[2]=v[2]*Math.cos(f)-v[0]*Math.sin(f),l[0]=w[0]+s[0],l[1]=w[1]+s[1],l[2]=w[2]+s[2],l},y.bz=function(l,n,s){var f=Math.sin(s),v=Math.cos(s),w=n[0],P=n[1],T=n[2],D=n[3],L=n[8],F=n[9],$=n[10],Z=n[11];return n!==l&&(l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15]),l[0]=w*v-L*f,l[1]=P*v-F*f,l[2]=T*v-$*f,l[3]=D*v-Z*f,l[8]=w*f+L*v,l[9]=P*f+F*v,l[10]=T*f+$*v,l[11]=D*f+Z*v,l},y.c=Re,y.c0=ad,y.c1=class extends _{},y.c2=vs,y.c3=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},y.c4=Sm,y.c5=function(l,n,s){var f=n[0],v=n[1],w=n[2],P=s[3]*f+s[7]*v+s[11]*w+s[15];return l[0]=(s[0]*f+s[4]*v+s[8]*w+s[12])/(P=P||1),l[1]=(s[1]*f+s[5]*v+s[9]*w+s[13])/P,l[2]=(s[2]*f+s[6]*v+s[10]*w+s[14])/P,l},y.c6=class extends fs{},y.c7=class extends G{},y.c8=function(l,n){return l[0]===n[0]&&l[1]===n[1]&&l[2]===n[2]&&l[3]===n[3]&&l[4]===n[4]&&l[5]===n[5]&&l[6]===n[6]&&l[7]===n[7]&&l[8]===n[8]&&l[9]===n[9]&&l[10]===n[10]&&l[11]===n[11]&&l[12]===n[12]&&l[13]===n[13]&&l[14]===n[14]&&l[15]===n[15]},y.c9=function(l,n){var s=l[0],f=l[1],v=l[2],w=l[3],P=l[4],T=l[5],D=l[6],L=l[7],F=l[8],$=l[9],Z=l[10],J=l[11],te=l[12],oe=l[13],ue=l[14],de=l[15],Le=n[0],xe=n[1],Ce=n[2],Ge=n[3],Ye=n[4],dt=n[5],Tt=n[6],_t=n[7],Et=n[8],Vt=n[9],bt=n[10],wt=n[11],tt=n[12],Qt=n[13],rr=n[14],Ut=n[15];return Math.abs(s-Le)<=ee*Math.max(1,Math.abs(s),Math.abs(Le))&&Math.abs(f-xe)<=ee*Math.max(1,Math.abs(f),Math.abs(xe))&&Math.abs(v-Ce)<=ee*Math.max(1,Math.abs(v),Math.abs(Ce))&&Math.abs(w-Ge)<=ee*Math.max(1,Math.abs(w),Math.abs(Ge))&&Math.abs(P-Ye)<=ee*Math.max(1,Math.abs(P),Math.abs(Ye))&&Math.abs(T-dt)<=ee*Math.max(1,Math.abs(T),Math.abs(dt))&&Math.abs(D-Tt)<=ee*Math.max(1,Math.abs(D),Math.abs(Tt))&&Math.abs(L-_t)<=ee*Math.max(1,Math.abs(L),Math.abs(_t))&&Math.abs(F-Et)<=ee*Math.max(1,Math.abs(F),Math.abs(Et))&&Math.abs($-Vt)<=ee*Math.max(1,Math.abs($),Math.abs(Vt))&&Math.abs(Z-bt)<=ee*Math.max(1,Math.abs(Z),Math.abs(bt))&&Math.abs(J-wt)<=ee*Math.max(1,Math.abs(J),Math.abs(wt))&&Math.abs(te-tt)<=ee*Math.max(1,Math.abs(te),Math.abs(tt))&&Math.abs(oe-Qt)<=ee*Math.max(1,Math.abs(oe),Math.abs(Qt))&&Math.abs(ue-rr)<=ee*Math.max(1,Math.abs(ue),Math.abs(rr))&&Math.abs(de-Ut)<=ee*Math.max(1,Math.abs(de),Math.abs(Ut))},y.cA=function(l,n){re.REGISTERED_PROTOCOLS[l]=n},y.cB=function(l){delete re.REGISTERED_PROTOCOLS[l]},y.cC=function(l,n){const s={};for(let v=0;v<l.length;v++){const w=n&&n[l[v].id]||kf(l[v]);n&&(n[l[v].id]=w);let P=s[w];P||(P=s[w]=[]),P.push(l[v])}const f=[];for(const v in s)f.push(s[v]);return f},y.cD=Dt,y.cE=Pp,y.cF=cg,y.cG=Wm,y.cH=function(l){l.bucket.createArrays(),l.bucket.tilePixelRatio=Ct/(512*l.bucket.overscaling),l.bucket.compareText={},l.bucket.iconsNeedLinear=!1;const n=l.bucket.layers[0],s=n.layout,f=n._unevaluatedLayout._values,v={layoutIconSize:f["icon-size"].possiblyEvaluate(new Vr(l.bucket.zoom+1),l.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new Vr(l.bucket.zoom+1),l.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new Vr(18))};if(l.bucket.textSizeData.kind==="composite"){const{minZoom:L,maxZoom:F}=l.bucket.textSizeData;v.compositeTextSizes=[f["text-size"].possiblyEvaluate(new Vr(L),l.canonical),f["text-size"].possiblyEvaluate(new Vr(F),l.canonical)]}if(l.bucket.iconSizeData.kind==="composite"){const{minZoom:L,maxZoom:F}=l.bucket.iconSizeData;v.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new Vr(L),l.canonical),f["icon-size"].possiblyEvaluate(new Vr(F),l.canonical)]}const w=s.get("text-line-height")*oi,P=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",T=s.get("text-keep-upright"),D=s.get("text-size");for(const L of l.bucket.features){const F=s.get("text-font").evaluate(L,{},l.canonical).join(","),$=D.evaluate(L,{},l.canonical),Z=v.layoutTextSize.evaluate(L,{},l.canonical),J=v.layoutIconSize.evaluate(L,{},l.canonical),te={horizontal:{},vertical:void 0},oe=L.text;let ue,de=[0,0];if(oe){const Ce=oe.toString(),Ge=s.get("text-letter-spacing").evaluate(L,{},l.canonical)*oi,Ye=Oh(Ce)?Ge:0,dt=s.get("text-anchor").evaluate(L,{},l.canonical),Tt=n0(n,L,l.canonical);if(!Tt){const bt=s.get("text-radial-offset").evaluate(L,{},l.canonical);de=bt?pg(dt,[bt*oi,Zu]):s.get("text-offset").evaluate(L,{},l.canonical).map((wt=>wt*oi))}let _t=P?"center":s.get("text-justify").evaluate(L,{},l.canonical);const Et=s.get("symbol-placement")==="point"?s.get("text-max-width").evaluate(L,{},l.canonical)*oi:1/0,Vt=()=>{l.bucket.allowVerticalPlacement&&Oc(Ce)&&(te.vertical=sd(oe,l.glyphMap,l.glyphPositions,l.imagePositions,F,Et,w,dt,"left",Ye,de,y.ao.vertical,!0,Z,$))};if(!P&&Tt){const bt=new Set;if(_t==="auto")for(let tt=0;tt<Tt.values.length;tt+=2)bt.add(mg(Tt.values[tt]));else bt.add(_t);let wt=!1;for(const tt of bt)if(!te.horizontal[tt])if(wt)te.horizontal[tt]=te.horizontal[0];else{const Qt=sd(oe,l.glyphMap,l.glyphPositions,l.imagePositions,F,Et,w,"center",tt,Ye,de,y.ao.horizontal,!1,Z,$);Qt&&(te.horizontal[tt]=Qt,wt=Qt.positionedLines.length===1)}Vt()}else{_t==="auto"&&(_t=mg(dt));const bt=sd(oe,l.glyphMap,l.glyphPositions,l.imagePositions,F,Et,w,dt,_t,Ye,de,y.ao.horizontal,!1,Z,$);bt&&(te.horizontal[_t]=bt),Vt(),Oc(Ce)&&P&&T&&(te.vertical=sd(oe,l.glyphMap,l.glyphPositions,l.imagePositions,F,Et,w,dt,_t,Ye,de,y.ao.vertical,!1,Z,$))}}let Le=!1;if(L.icon&&L.icon.name){const Ce=l.imageMap[L.icon.name];Ce&&(ue=Wc(l.imagePositions[L.icon.name],s.get("icon-offset").evaluate(L,{},l.canonical),s.get("icon-anchor").evaluate(L,{},l.canonical)),Le=!!Ce.sdf,l.bucket.sdfIcons===void 0?l.bucket.sdfIcons=Le:l.bucket.sdfIcons!==Le&&Lt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ce.pixelRatio!==l.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(l.bucket.iconsNeedLinear=!0))}const xe=a0(te.horizontal)||te.vertical;l.bucket.iconsInText=!!xe&&xe.iconsInText,(xe||ue)&&__(l.bucket,L,te,ue,l.imageMap,v,Z,J,de,Le,l.canonical,l.subdivisionGranularity)}l.showCollisionBoxes&&l.bucket.generateCollisionDebugBuffers()},y.cI=rd,y.cJ=qo,y.cK=Nr,y.cL=Ly,y.cM=Vm,y.cN=class{constructor(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let l=performance.getEntriesByName(this._marks.measure);return l.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),l=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),l}},y.cO=function(l,n,s,f,v){return c(this,void 0,void 0,(function*(){if(K())try{return yield qi(l,n,s,f,v)}catch{}return(function(w,P,T,D,L){const F=w.width,$=w.height;bi&&Ga||(bi=new OffscreenCanvas(F,$),Ga=bi.getContext("2d",{willReadFrequently:!0})),bi.width=F,bi.height=$,Ga.drawImage(w,0,0,F,$);const Z=Ga.getImageData(P,T,D,L);return Ga.clearRect(0,0,F,$),Z.data})(l,n,s,f,v)}))},y.cP=zn,y.cQ=E,y.cR=km,y.cS=el,y.cT=jo,y.cU=function(l,n){const s=new Map;if(l!=null)if(l.type==="Feature")s.set(Jh(l,n),l);else for(const f of l.features)s.set(Jh(f,n),f);return s},y.cV=function(l,n){if(l==null)return!0;if(l.type==="Feature")return Jh(l,n)!=null;if(l.type==="FeatureCollection"){const s=new Set;for(const f of l.features){const v=Jh(f,n);if(v==null||s.has(v))return!1;s.add(v)}return!0}return!1},y.cW=function(l,n,s){var f,v,w,P;if(n.removeAll&&l.clear(),n.remove)for(const T of n.remove)l.delete(T);if(n.add)for(const T of n.add){const D=Jh(T,s);D!=null&&l.set(D,T)}if(n.update)for(const T of n.update){let D=l.get(T.id);if(D==null)continue;const L=!T.removeAllProperties&&(((f=T.removeProperties)===null||f===void 0?void 0:f.length)>0||((v=T.addOrUpdateProperties)===null||v===void 0?void 0:v.length)>0);if((T.newGeometry||T.removeAllProperties||L)&&(D=Object.assign({},D),l.set(T.id,D),L&&(D.properties=Object.assign({},D.properties))),T.newGeometry&&(D.geometry=T.newGeometry),T.removeAllProperties)D.properties={};else if(((w=T.removeProperties)===null||w===void 0?void 0:w.length)>0)for(const F of T.removeProperties)Object.prototype.hasOwnProperty.call(D.properties,F)&&delete D.properties[F];if(((P=T.addOrUpdateProperties)===null||P===void 0?void 0:P.length)>0)for(const{key:F,value:$}of T.addOrUpdateProperties)D.properties[F]=$}},y.cX=po,y.ca=function(l,n){return l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7],l[8]=n[8],l[9]=n[9],l[10]=n[10],l[11]=n[11],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15],l},y.cb=l=>l.type==="symbol",y.cc=l=>l.type==="circle",y.cd=l=>l.type==="heatmap",y.ce=l=>l.type==="line",y.cf=l=>l.type==="fill",y.cg=l=>l.type==="fill-extrusion",y.ch=l=>l.type==="hillshade",y.ci=l=>l.type==="color-relief",y.cj=l=>l.type==="raster",y.ck=l=>l.type==="background",y.cl=l=>l.type==="custom",y.cm=Rt,y.cn=function(l,n,s){const f=nt(n.x-s.x,n.y-s.y),v=nt(l.x-s.x,l.y-s.y);var w,P;return no(Math.atan2(f[0]*v[1]-f[1]*v[0],(w=f)[0]*(P=v)[0]+w[1]*P[1]))},y.co=Zt,y.cp=function(l,n){return An[n]&&(l instanceof MouseEvent||l instanceof WheelEvent)},y.cq=function(l,n){return fa[n]&&"touches"in l},y.cr=function(l){return fa[l]||An[l]},y.cs=function(l,n,s){var f=n[0],v=n[1];return l[0]=s[0]*f+s[4]*v+s[12],l[1]=s[1]*f+s[5]*v+s[13],l},y.ct=function(l,n){const{x:s,y:f}=si.fromLngLat(n);return!(l<0||l>25||f<0||f>=1||s<0||s>=1)},y.cu=function(l,n){return l[0]=n[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=n[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=n[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},y.cv=class extends cn{},y.cw=s0,y.cy=function(l){return l.message===Gi},y.cz=_e,y.d=qe,y.e=Jt,y.f=l=>c(void 0,void 0,void 0,(function*(){if(l.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(l)],{type:"image/png"});try{return createImageBitmap(n)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),y.g=ne,y.h=l=>new Promise(((n,s)=>{const f=new Image;f.onload=()=>{n(f),URL.revokeObjectURL(f.src),f.onload=null,window.requestAnimationFrame((()=>{f.src=Kn}))},f.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const v=new Blob([new Uint8Array(l)],{type:"image/png"});f.src=l.byteLength?URL.createObjectURL(v):Kn})),y.i=Dr,y.j=(l,n)=>De(Jt(l,{type:"json"}),n),y.k=at,y.l=gt,y.m=De,y.n=(l,n)=>De(Jt(l,{type:"arrayBuffer"}),n),y.o=function(l){return new Vm(l).readFields(g_,[])},y.p=qc,y.q=$h,y.r=pi,y.s=Ea,y.t=Sr,y.u=fr,y.v=ke,y.w=Lt,y.x=ho,y.y=Iu,y.z=Rl})),p("worker",["./shared"],(function(y){class c{constructor(re,ne){this.keyCache={},re&&this.replace(re,ne)}replace(re,ne){this._layerConfigs={},this._layers={},this.update(re,[],ne)}update(re,ne,le){for(const Se of re){this._layerConfigs[Se.id]=Se;const De=this._layers[Se.id]=y.bJ(Se,le);De._featureFilter=y.aa(De.filter,le),this.keyCache[Se.id]&&delete this.keyCache[Se.id]}for(const Se of ne)delete this.keyCache[Se],delete this._layerConfigs[Se],delete this._layers[Se];this.familiesBySource={};const _e=y.cC(Object.values(this._layerConfigs),this.keyCache);for(const Se of _e){const De=Se.map((Ot=>this._layers[Ot.id])),qe=De[0];if(qe.visibility==="none")continue;const Oe=qe.source||"";let Je=this.familiesBySource[Oe];Je||(Je=this.familiesBySource[Oe]={});const gt=qe.sourceLayer||"_geojsonTileLayer";let at=Je[gt];at||(at=Je[gt]=[]),at.push(De)}}}class C{constructor(re){const ne={},le=[];for(const qe in re){const Oe=re[qe],Je=ne[qe]={};for(const gt in Oe){const at=Oe[+gt];if(!at||at.bitmap.width===0||at.bitmap.height===0)continue;const Ot={x:0,y:0,w:at.bitmap.width+2,h:at.bitmap.height+2};le.push(Ot),Je[gt]={rect:Ot,metrics:at.metrics}}}const{w:_e,h:Se}=y.p(le),De=new y.q({width:_e||1,height:Se||1});for(const qe in re){const Oe=re[qe];for(const Je in Oe){const gt=Oe[+Je];if(!gt||gt.bitmap.width===0||gt.bitmap.height===0)continue;const at=ne[qe][Je].rect;y.q.copy(gt.bitmap,De,{x:0,y:0},{x:at.x+1,y:at.y+1},gt.bitmap)}}this.image=De,this.positions=ne}}y.cD("GlyphAtlas",C);class E{constructor(re){this.tileID=new y.Z(re.tileID.overscaledZ,re.tileID.wrap,re.tileID.canonical.z,re.tileID.canonical.x,re.tileID.canonical.y),this.uid=re.uid,this.zoom=re.zoom,this.pixelRatio=re.pixelRatio,this.tileSize=re.tileSize,this.source=re.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=re.showCollisionBoxes,this.collectResourceTiming=!!re.collectResourceTiming,this.returnDependencies=!!re.returnDependencies,this.promoteId=re.promoteId,this.inFlightDependencies=[]}parse(re,ne,le,_e,Se){return y._(this,void 0,void 0,(function*(){this.status="parsing",this.data=re,this.collisionBoxArray=new y.a8;const De=new y.cE(Object.keys(re.layers).sort()),qe=new y.cF(this.tileID,this.promoteId);qe.bucketLayerIDs=[];const Oe={},Je={featureIndex:qe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:le,subdivisionGranularity:Se},gt=ne.familiesBySource[this.source];for(const tr in gt){const sr=re.layers[tr];if(!sr)continue;sr.version===1&&y.w(`Vector tile source "${this.source}" layer "${tr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const pn=De.encode(tr),vt=[];for(let Ii=0;Ii<sr.length;Ii++){const Cn=sr.feature(Ii),Yo=qe.getId(Cn,tr);vt.push({feature:Cn,id:Yo,index:Ii,sourceLayerIndex:pn})}for(const Ii of gt[tr]){const Cn=Ii[0];Cn.source!==this.source&&y.w(`layer.source = ${Cn.source} does not equal this.source = ${this.source}`),Cn.minzoom&&this.zoom<Math.floor(Cn.minzoom)||Cn.maxzoom&&this.zoom>=Cn.maxzoom||Cn.visibility!=="none"&&(M(Ii,this.zoom,le),(Oe[Cn.id]=Cn.createBucket({index:qe.bucketLayerIDs.length,layers:Ii,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:pn,sourceID:this.source})).populate(vt,Je,this.tileID.canonical),qe.bucketLayerIDs.push(Ii.map((Yo=>Yo.id))))}}const at=y.bN(Je.glyphDependencies,(tr=>Object.keys(tr).map(Number)));this.inFlightDependencies.forEach((tr=>tr?.abort())),this.inFlightDependencies=[];let Ot=Promise.resolve({});if(Object.keys(at).length){const tr=new AbortController;this.inFlightDependencies.push(tr),Ot=_e.sendAsync({type:"GG",data:{stacks:at,source:this.source,tileID:this.tileID,type:"glyphs"}},tr)}const ke=Object.keys(Je.iconDependencies);let ar=Promise.resolve({});if(ke.length){const tr=new AbortController;this.inFlightDependencies.push(tr),ar=_e.sendAsync({type:"GI",data:{icons:ke,source:this.source,tileID:this.tileID,type:"icons"}},tr)}const br=Object.keys(Je.patternDependencies);let $t=Promise.resolve({});if(br.length){const tr=new AbortController;this.inFlightDependencies.push(tr),$t=_e.sendAsync({type:"GI",data:{icons:br,source:this.source,tileID:this.tileID,type:"patterns"}},tr)}const[or,Ur,Yn]=yield Promise.all([Ot,ar,$t]),ri=new C(or),Kr=new y.cG(Ur,Yn);for(const tr in Oe){const sr=Oe[tr];sr instanceof y.a9?(M(sr.layers,this.zoom,le),y.cH({bucket:sr,glyphMap:or,glyphPositions:ri.positions,imageMap:Ur,imagePositions:Kr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Je.subdivisionGranularity})):sr.hasPattern&&(sr instanceof y.cI||sr instanceof y.cJ||sr instanceof y.cK)&&(M(sr.layers,this.zoom,le),sr.addFeatures(Je,this.tileID.canonical,Kr.patternPositions))}return this.status="done",{buckets:Object.values(Oe).filter((tr=>!tr.isEmpty())),featureIndex:qe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ri.image,imageAtlas:Kr,glyphMap:this.returnDependencies?or:null,iconMap:this.returnDependencies?Ur:null,glyphPositions:this.returnDependencies?ri.positions:null}}))}}function M(Re,re,ne){const le=new y.F(re);for(const _e of Re)_e.recalculate(le,ne)}class k{constructor(re,ne,le){this.actor=re,this.layerIndex=ne,this.availableImages=le,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(re,ne){return y._(this,void 0,void 0,(function*(){const le=yield y.n(re.request,ne);try{return{vectorTile:new y.cL(new y.cM(le.data)),rawData:le.data,cacheControl:le.cacheControl,expires:le.expires}}catch(_e){const Se=new Uint8Array(le.data);let De=`Unable to parse the tile at ${re.request.url}, `;throw De+=Se[0]===31&&Se[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${_e.message}`,new Error(De)}}))}loadTile(re){return y._(this,void 0,void 0,(function*(){const ne=re.uid,le=!!(re&&re.request&&re.request.collectResourceTiming)&&new y.cN(re.request),_e=new E(re);this.loading[ne]=_e;const Se=new AbortController;_e.abort=Se;try{const De=yield this.loadVectorTile(re,Se);if(delete this.loading[ne],!De)return null;const qe=De.rawData,Oe={};De.expires&&(Oe.expires=De.expires),De.cacheControl&&(Oe.cacheControl=De.cacheControl);const Je={};if(le){const at=le.finish();at&&(Je.resourceTiming=JSON.parse(JSON.stringify(at)))}_e.vectorTile=De.vectorTile;const gt=_e.parse(De.vectorTile,this.layerIndex,this.availableImages,this.actor,re.subdivisionGranularity);this.loaded[ne]=_e,this.fetching[ne]={rawTileData:qe,cacheControl:Oe,resourceTiming:Je};try{const at=yield gt;return y.e({rawTileData:qe.slice(0)},at,Oe,Je)}finally{delete this.fetching[ne]}}catch(De){throw delete this.loading[ne],_e.status="done",this.loaded[ne]=_e,De}}))}reloadTile(re){return y._(this,void 0,void 0,(function*(){const ne=re.uid;if(!this.loaded||!this.loaded[ne])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const le=this.loaded[ne];if(le.showCollisionBoxes=re.showCollisionBoxes,le.status==="parsing"){const _e=yield le.parse(le.vectorTile,this.layerIndex,this.availableImages,this.actor,re.subdivisionGranularity);let Se;if(this.fetching[ne]){const{rawTileData:De,cacheControl:qe,resourceTiming:Oe}=this.fetching[ne];delete this.fetching[ne],Se=y.e({rawTileData:De.slice(0)},_e,qe,Oe)}else Se=_e;return Se}if(le.status==="done"&&le.vectorTile)return le.parse(le.vectorTile,this.layerIndex,this.availableImages,this.actor,re.subdivisionGranularity)}))}abortTile(re){return y._(this,void 0,void 0,(function*(){const ne=this.loading,le=re.uid;ne&&ne[le]&&ne[le].abort&&(ne[le].abort.abort(),delete ne[le])}))}removeTile(re){return y._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[re.uid]&&delete this.loaded[re.uid]}))}}class N{constructor(){this.loaded={}}loadTile(re){return y._(this,void 0,void 0,(function*(){const{uid:ne,encoding:le,rawImageData:_e,redFactor:Se,greenFactor:De,blueFactor:qe,baseShift:Oe}=re,Je=_e.width+2,gt=_e.height+2,at=y.b(_e)?new y.R({width:Je,height:gt},yield y.cO(_e,-1,-1,Je,gt)):_e,Ot=new y.cP(ne,at,le,Se,De,qe,Oe);return this.loaded=this.loaded||{},this.loaded[ne]=Ot,Ot}))}removeTile(re){const ne=this.loaded,le=re.uid;ne&&ne[le]&&delete ne[le]}}var j,q,H=(function(){if(q)return j;function Re(ne,le){if(ne.length!==0){re(ne[0],le);for(var _e=1;_e<ne.length;_e++)re(ne[_e],!le)}}function re(ne,le){for(var _e=0,Se=0,De=0,qe=ne.length,Oe=qe-1;De<qe;Oe=De++){var Je=(ne[De][0]-ne[Oe][0])*(ne[Oe][1]+ne[De][1]),gt=_e+Je;Se+=Math.abs(_e)>=Math.abs(Je)?_e-gt+Je:Je-gt+_e,_e=gt}_e+Se>=0!=!!le&&ne.reverse()}return q=1,j=function ne(le,_e){var Se,De=le&&le.type;if(De==="FeatureCollection")for(Se=0;Se<le.features.length;Se++)ne(le.features[Se],_e);else if(De==="GeometryCollection")for(Se=0;Se<le.geometries.length;Se++)ne(le.geometries[Se],_e);else if(De==="Feature")ne(le.geometry,_e);else if(De==="Polygon")Re(le.coordinates,_e);else if(De==="MultiPolygon")for(Se=0;Se<le.coordinates.length;Se++)Re(le.coordinates[Se],_e);return le}})(),W=y.cQ(H);class K extends y.cS{constructor(re,ne){super(new y.cM,0,ne,[],[]),this.feature=re,this.type=re.type,this.properties=re.tags?re.tags:{},"id"in re&&(typeof re.id=="string"?this.id=parseInt(re.id,10):typeof re.id!="number"||isNaN(re.id)||(this.id=re.id))}loadGeometry(){const re=[],ne=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const le of ne){const _e=[];for(const Se of le)_e.push(new y.P(Se[0],Se[1]));re.push(_e)}return re}}class ee extends y.cR{constructor(re,ne){super(new y.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=ne?ne.version:1,this.extent=ne?ne.extent:4096,this.length=re.length,this.features=re}feature(re){return new K(this.features[re],this.extent)}}function ie(Re,re){re.writeVarintField(15,Re.version||1),re.writeStringField(1,Re.name||""),re.writeVarintField(5,Re.extent||4096);const ne={keys:[],values:[],keycache:{},valuecache:{}};for(let Se=0;Se<Re.length;Se++)ne.feature=Re.feature(Se),re.writeMessage(2,ve,ne);const le=ne.keys;for(const Se of le)re.writeStringField(3,Se);const _e=ne.values;for(const Se of _e)re.writeMessage(4,ht,Se)}function ve(Re,re){if(!Re.feature)return;const ne=Re.feature;ne.id!==void 0&&re.writeVarintField(1,ne.id),re.writeMessage(2,ye,Re),re.writeVarintField(3,ne.type),re.writeMessage(4,je,ne)}function ye(Re,re){for(const ne in Re.feature?.properties){let le=Re.feature.properties[ne],_e=Re.keycache[ne];if(le===null)continue;_e===void 0&&(Re.keys.push(ne),_e=Re.keys.length-1,Re.keycache[ne]=_e),re.writeVarint(_e),typeof le!="string"&&typeof le!="boolean"&&typeof le!="number"&&(le=JSON.stringify(le));const Se=typeof le+":"+le;let De=Re.valuecache[Se];De===void 0&&(Re.values.push(le),De=Re.values.length-1,Re.valuecache[Se]=De),re.writeVarint(De)}}function Pe(Re,re){return(re<<3)+(7&Re)}function Me(Re){return Re<<1^Re>>31}function je(Re,re){const ne=Re.loadGeometry(),le=Re.type;let _e=0,Se=0;for(const De of ne){let qe=1;le===1&&(qe=De.length),re.writeVarint(Pe(1,qe));const Oe=le===3?De.length-1:De.length;for(let Je=0;Je<Oe;Je++){Je===1&&le!==1&&re.writeVarint(Pe(2,Oe-1));const gt=De[Je].x-_e,at=De[Je].y-Se;re.writeVarint(Me(gt)),re.writeVarint(Me(at)),_e+=gt,Se+=at}Re.type===3&&re.writeVarint(Pe(7,1))}}function ht(Re,re){const ne=typeof Re;ne==="string"?re.writeStringField(1,Re):ne==="boolean"?re.writeBooleanField(7,Re):ne==="number"&&(Re%1!=0?re.writeDoubleField(3,Re):Re<0?re.writeSVarintField(6,Re):re.writeVarintField(5,Re))}const At={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Re=>Re},ot=Math.fround||(ft=new Float32Array(1),Re=>(ft[0]=+Re,ft[0]));var ft;class rt{constructor(re){this.options=Object.assign(Object.create(At),re),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(re){const{log:ne,minZoom:le,maxZoom:_e}=this.options;ne&&console.time("total time");const Se=`prepare ${re.length} points`;ne&&console.time(Se),this.points=re;const De=[];for(let Oe=0;Oe<re.length;Oe++){const Je=re[Oe];if(!Je.geometry)continue;const[gt,at]=Je.geometry.coordinates,Ot=ot(Ue(gt)),ke=ot(ct(at));De.push(Ot,ke,1/0,Oe,-1,1),this.options.reduce&&De.push(0)}let qe=this.trees[_e+1]=this._createTree(De);ne&&console.timeEnd(Se);for(let Oe=_e;Oe>=le;Oe--){const Je=+Date.now();qe=this.trees[Oe]=this._createTree(this._cluster(qe,Oe)),ne&&console.log("z%d: %d clusters in %dms",Oe,qe.numItems,+Date.now()-Je)}return ne&&console.timeEnd("total time"),this}getClusters(re,ne){let le=((re[0]+180)%360+360)%360-180;const _e=Math.max(-90,Math.min(90,re[1]));let Se=re[2]===180?180:((re[2]+180)%360+360)%360-180;const De=Math.max(-90,Math.min(90,re[3]));if(re[2]-re[0]>=360)le=-180,Se=180;else if(le>Se){const at=this.getClusters([le,_e,180,De],ne),Ot=this.getClusters([-180,_e,Se,De],ne);return at.concat(Ot)}const qe=this.trees[this._limitZoom(ne)],Oe=qe.range(Ue(le),ct(De),Ue(Se),ct(_e)),Je=qe.data,gt=[];for(const at of Oe){const Ot=this.stride*at;gt.push(Je[Ot+5]>1?It(Je,Ot,this.clusterProps):this.points[Je[Ot+3]])}return gt}getChildren(re){const ne=this._getOriginId(re),le=this._getOriginZoom(re),_e="No cluster with the specified id.",Se=this.trees[le];if(!Se)throw new Error(_e);const De=Se.data;if(ne*this.stride>=De.length)throw new Error(_e);const qe=this.options.radius/(this.options.extent*Math.pow(2,le-1)),Oe=Se.within(De[ne*this.stride],De[ne*this.stride+1],qe),Je=[];for(const gt of Oe){const at=gt*this.stride;De[at+4]===re&&Je.push(De[at+5]>1?It(De,at,this.clusterProps):this.points[De[at+3]])}if(Je.length===0)throw new Error(_e);return Je}getLeaves(re,ne,le){const _e=[];return this._appendLeaves(_e,re,ne=ne||10,le=le||0,0),_e}getTile(re,ne,le){const _e=this.trees[this._limitZoom(re)],Se=Math.pow(2,re),{extent:De,radius:qe}=this.options,Oe=qe/De,Je=(le-Oe)/Se,gt=(le+1+Oe)/Se,at={features:[]};return this._addTileFeatures(_e.range((ne-Oe)/Se,Je,(ne+1+Oe)/Se,gt),_e.data,ne,le,Se,at),ne===0&&this._addTileFeatures(_e.range(1-Oe/Se,Je,1,gt),_e.data,Se,le,Se,at),ne===Se-1&&this._addTileFeatures(_e.range(0,Je,Oe/Se,gt),_e.data,-1,le,Se,at),at.features.length?at:null}getClusterExpansionZoom(re){let ne=this._getOriginZoom(re)-1;for(;ne<=this.options.maxZoom;){const le=this.getChildren(re);if(ne++,le.length!==1)break;re=le[0].properties.cluster_id}return ne}_appendLeaves(re,ne,le,_e,Se){const De=this.getChildren(ne);for(const qe of De){const Oe=qe.properties;if(Oe&&Oe.cluster?Se+Oe.point_count<=_e?Se+=Oe.point_count:Se=this._appendLeaves(re,Oe.cluster_id,le,_e,Se):Se<_e?Se++:re.push(qe),re.length===le)break}return Se}_createTree(re){const ne=new y.aI(re.length/this.stride|0,this.options.nodeSize,Float32Array);for(let le=0;le<re.length;le+=this.stride)ne.add(re[le],re[le+1]);return ne.finish(),ne.data=re,ne}_addTileFeatures(re,ne,le,_e,Se,De){for(const qe of re){const Oe=qe*this.stride,Je=ne[Oe+5]>1;let gt,at,Ot;if(Je)gt=kt(ne,Oe,this.clusterProps),at=ne[Oe],Ot=ne[Oe+1];else{const br=this.points[ne[Oe+3]];gt=br.properties;const[$t,or]=br.geometry.coordinates;at=Ue($t),Ot=ct(or)}const ke={type:1,geometry:[[Math.round(this.options.extent*(at*Se-le)),Math.round(this.options.extent*(Ot*Se-_e))]],tags:gt};let ar;ar=Je||this.options.generateId?ne[Oe+3]:this.points[ne[Oe+3]].id,ar!==void 0&&(ke.id=ar),De.features.push(ke)}}_limitZoom(re){return Math.max(this.options.minZoom,Math.min(Math.floor(+re),this.options.maxZoom+1))}_cluster(re,ne){const{radius:le,extent:_e,reduce:Se,minPoints:De}=this.options,qe=le/(_e*Math.pow(2,ne)),Oe=re.data,Je=[],gt=this.stride;for(let at=0;at<Oe.length;at+=gt){if(Oe[at+2]<=ne)continue;Oe[at+2]=ne;const Ot=Oe[at],ke=Oe[at+1],ar=re.within(Oe[at],Oe[at+1],qe),br=Oe[at+5];let $t=br;for(const or of ar){const Ur=or*gt;Oe[Ur+2]>ne&&($t+=Oe[Ur+5])}if($t>br&&$t>=De){let or,Ur=Ot*br,Yn=ke*br,ri=-1;const Kr=(at/gt<<5)+(ne+1)+this.points.length;for(const tr of ar){const sr=tr*gt;if(Oe[sr+2]<=ne)continue;Oe[sr+2]=ne;const pn=Oe[sr+5];Ur+=Oe[sr]*pn,Yn+=Oe[sr+1]*pn,Oe[sr+4]=Kr,Se&&(or||(or=this._map(Oe,at,!0),ri=this.clusterProps.length,this.clusterProps.push(or)),Se(or,this._map(Oe,sr)))}Oe[at+4]=Kr,Je.push(Ur/$t,Yn/$t,1/0,Kr,-1,$t),Se&&Je.push(ri)}else{for(let or=0;or<gt;or++)Je.push(Oe[at+or]);if($t>1)for(const or of ar){const Ur=or*gt;if(!(Oe[Ur+2]<=ne)){Oe[Ur+2]=ne;for(let Yn=0;Yn<gt;Yn++)Je.push(Oe[Ur+Yn])}}}}return Je}_getOriginId(re){return re-this.points.length>>5}_getOriginZoom(re){return(re-this.points.length)%32}_map(re,ne,le){if(re[ne+5]>1){const De=this.clusterProps[re[ne+6]];return le?Object.assign({},De):De}const _e=this.points[re[ne+3]].properties,Se=this.options.map(_e);return le&&Se===_e?Object.assign({},Se):Se}}function It(Re,re,ne){return{type:"Feature",id:Re[re+3],properties:kt(Re,re,ne),geometry:{type:"Point",coordinates:[(le=Re[re],360*(le-.5)),nt(Re[re+1])]}};var le}function kt(Re,re,ne){const le=Re[re+5],_e=le>=1e4?`${Math.round(le/1e3)}k`:le>=1e3?Math.round(le/100)/10+"k":le,Se=Re[re+6],De=Se===-1?{}:Object.assign({},ne[Se]);return Object.assign(De,{cluster:!0,cluster_id:Re[re+3],point_count:le,point_count_abbreviated:_e})}function Ue(Re){return Re/360+.5}function ct(Re){const re=Math.sin(Re*Math.PI/180),ne=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return ne<0?0:ne>1?1:ne}function nt(Re){const re=(180-360*Re)*Math.PI/180;return 360*Math.atan(Math.exp(re))/Math.PI-90}function Ct(Re,re,ne,le){let _e=le;const Se=re+(ne-re>>1);let De,qe=ne-re;const Oe=Re[re],Je=Re[re+1],gt=Re[ne],at=Re[ne+1];for(let Ot=re+3;Ot<ne;Ot+=3){const ke=Te(Re[Ot],Re[Ot+1],Oe,Je,gt,at);if(ke>_e)De=Ot,_e=ke;else if(ke===_e){const ar=Math.abs(Ot-Se);ar<qe&&(De=Ot,qe=ar)}}_e>le&&(De-re>3&&Ct(Re,re,De,le),Re[De+2]=_e,ne-De>3&&Ct(Re,De,ne,le))}function Te(Re,re,ne,le,_e,Se){let De=_e-ne,qe=Se-le;if(De!==0||qe!==0){const Oe=((Re-ne)*De+(re-le)*qe)/(De*De+qe*qe);Oe>1?(ne=_e,le=Se):Oe>0&&(ne+=De*Oe,le+=qe*Oe)}return De=Re-ne,qe=re-le,De*De+qe*qe}function et(Re,re,ne,le){const _e={id:Re??null,type:re,geometry:ne,tags:le,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(re==="Point"||re==="MultiPoint"||re==="LineString")st(_e,ne);else if(re==="Polygon")st(_e,ne[0]);else if(re==="MultiLineString")for(const Se of ne)st(_e,Se);else if(re==="MultiPolygon")for(const Se of ne)st(_e,Se[0]);return _e}function st(Re,re){for(let ne=0;ne<re.length;ne+=3)Re.minX=Math.min(Re.minX,re[ne]),Re.minY=Math.min(Re.minY,re[ne+1]),Re.maxX=Math.max(Re.maxX,re[ne]),Re.maxY=Math.max(Re.maxY,re[ne+1])}function yt(Re,re,ne,le){if(!re.geometry)return;const _e=re.geometry.coordinates;if(_e&&_e.length===0)return;const Se=re.geometry.type,De=Math.pow(ne.tolerance/((1<<ne.maxZoom)*ne.extent),2);let qe=[],Oe=re.id;if(ne.promoteId?Oe=re.properties[ne.promoteId]:ne.generateId&&(Oe=le||0),Se==="Point")Rt(_e,qe);else if(Se==="MultiPoint")for(const Je of _e)Rt(Je,qe);else if(Se==="LineString")Zt(_e,qe,De,!1);else if(Se==="MultiLineString"){if(ne.lineMetrics){for(const Je of _e)qe=[],Zt(Je,qe,De,!1),Re.push(et(Oe,"LineString",qe,re.properties));return}Ft(_e,qe,De,!1)}else if(Se==="Polygon")Ft(_e,qe,De,!0);else{if(Se!=="MultiPolygon"){if(Se==="GeometryCollection"){for(const Je of re.geometry.geometries)yt(Re,{id:Oe,geometry:Je,properties:re.properties},ne,le);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Je of _e){const gt=[];Ft(Je,gt,De,!0),qe.push(gt)}}Re.push(et(Oe,Se,qe,re.properties))}function Rt(Re,re){re.push(ir(Re[0]),Jt(Re[1]),0)}function Zt(Re,re,ne,le){let _e,Se,De=0;for(let Oe=0;Oe<Re.length;Oe++){const Je=ir(Re[Oe][0]),gt=Jt(Re[Oe][1]);re.push(Je,gt,0),Oe>0&&(De+=le?(_e*gt-Je*Se)/2:Math.sqrt(Math.pow(Je-_e,2)+Math.pow(gt-Se,2))),_e=Je,Se=gt}const qe=re.length-3;re[2]=1,Ct(re,0,qe,ne),re[qe+2]=1,re.size=Math.abs(De),re.start=0,re.end=re.size}function Ft(Re,re,ne,le){for(let _e=0;_e<Re.length;_e++){const Se=[];Zt(Re[_e],Se,ne,le),re.push(Se)}}function ir(Re){return Re/360+.5}function Jt(Re){const re=Math.sin(Re*Math.PI/180),ne=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return ne<0?0:ne>1?1:ne}function St(Re,re,ne,le,_e,Se,De,qe){if(le/=re,Se>=(ne/=re)&&De<le)return Re;if(De<ne||Se>=le)return null;const Oe=[];for(const Je of Re){const gt=Je.geometry;let at=Je.type;const Ot=_e===0?Je.minX:Je.minY,ke=_e===0?Je.maxX:Je.maxY;if(Ot>=ne&&ke<le){Oe.push(Je);continue}if(ke<ne||Ot>=le)continue;let ar=[];if(at==="Point"||at==="MultiPoint")Gt(gt,ar,ne,le,_e);else if(at==="LineString")Nt(gt,ar,ne,le,_e,!1,qe.lineMetrics);else if(at==="MultiLineString")Ht(gt,ar,ne,le,_e,!1);else if(at==="Polygon")Ht(gt,ar,ne,le,_e,!0);else if(at==="MultiPolygon")for(const br of gt){const $t=[];Ht(br,$t,ne,le,_e,!0),$t.length&&ar.push($t)}if(ar.length){if(qe.lineMetrics&&at==="LineString"){for(const br of ar)Oe.push(et(Je.id,at,br,Je.tags));continue}at!=="LineString"&&at!=="MultiLineString"||(ar.length===1?(at="LineString",ar=ar[0]):at="MultiLineString"),at!=="Point"&&at!=="MultiPoint"||(at=ar.length===3?"Point":"MultiPoint"),Oe.push(et(Je.id,at,ar,Je.tags))}}return Oe.length?Oe:null}function Gt(Re,re,ne,le,_e){for(let Se=0;Se<Re.length;Se+=3){const De=Re[Se+_e];De>=ne&&De<=le&&Lt(re,Re[Se],Re[Se+1],Re[Se+2])}}function Nt(Re,re,ne,le,_e,Se,De){let qe=He(Re);const Oe=_e===0?wr:Dr;let Je,gt,at=Re.start;for(let $t=0;$t<Re.length-3;$t+=3){const or=Re[$t],Ur=Re[$t+1],Yn=Re[$t+2],ri=Re[$t+3],Kr=Re[$t+4],tr=_e===0?or:Ur,sr=_e===0?ri:Kr;let pn=!1;De&&(Je=Math.sqrt(Math.pow(or-ri,2)+Math.pow(Ur-Kr,2))),tr<ne?sr>ne&&(gt=Oe(qe,or,Ur,ri,Kr,ne),De&&(qe.start=at+Je*gt)):tr>le?sr<le&&(gt=Oe(qe,or,Ur,ri,Kr,le),De&&(qe.start=at+Je*gt)):Lt(qe,or,Ur,Yn),sr<ne&&tr>=ne&&(gt=Oe(qe,or,Ur,ri,Kr,ne),pn=!0),sr>le&&tr<=le&&(gt=Oe(qe,or,Ur,ri,Kr,le),pn=!0),!Se&&pn&&(De&&(qe.end=at+Je*gt),re.push(qe),qe=He(Re)),De&&(at+=Je)}let Ot=Re.length-3;const ke=Re[Ot],ar=Re[Ot+1],br=_e===0?ke:ar;br>=ne&&br<=le&&Lt(qe,ke,ar,Re[Ot+2]),Ot=qe.length-3,Se&&Ot>=3&&(qe[Ot]!==qe[0]||qe[Ot+1]!==qe[1])&&Lt(qe,qe[0],qe[1],qe[2]),qe.length&&re.push(qe)}function He(Re){const re=[];return re.size=Re.size,re.start=Re.start,re.end=Re.end,re}function Ht(Re,re,ne,le,_e,Se){for(const De of Re)Nt(De,re,ne,le,_e,Se,!1)}function Lt(Re,re,ne,le){Re.push(re,ne,le)}function wr(Re,re,ne,le,_e,Se){const De=(Se-re)/(le-re);return Lt(Re,Se,ne+(_e-ne)*De,1),De}function Dr(Re,re,ne,le,_e,Se){const De=(Se-ne)/(_e-ne);return Lt(Re,re+(le-re)*De,Se,1),De}function zr(Re,re){const ne=[];for(let le=0;le<Re.length;le++){const _e=Re[le],Se=_e.type;let De;if(Se==="Point"||Se==="MultiPoint"||Se==="LineString")De=Bn(_e.geometry,re);else if(Se==="MultiLineString"||Se==="Polygon"){De=[];for(const qe of _e.geometry)De.push(Bn(qe,re))}else if(Se==="MultiPolygon"){De=[];for(const qe of _e.geometry){const Oe=[];for(const Je of qe)Oe.push(Bn(Je,re));De.push(Oe)}}ne.push(et(_e.id,Se,De,_e.tags))}return ne}function Bn(Re,re){const ne=[];ne.size=Re.size,Re.start!==void 0&&(ne.start=Re.start,ne.end=Re.end);for(let le=0;le<Re.length;le+=3)ne.push(Re[le]+re,Re[le+1],Re[le+2]);return ne}function Kn(Re,re){if(Re.transformed)return Re;const ne=1<<Re.z,le=Re.x,_e=Re.y;for(const Se of Re.features){const De=Se.geometry,qe=Se.type;if(Se.geometry=[],qe===1)for(let Oe=0;Oe<De.length;Oe+=2)Se.geometry.push(qi(De[Oe],De[Oe+1],re,ne,le,_e));else for(let Oe=0;Oe<De.length;Oe++){const Je=[];for(let gt=0;gt<De[Oe].length;gt+=2)Je.push(qi(De[Oe][gt],De[Oe][gt+1],re,ne,le,_e));Se.geometry.push(Je)}}return Re.transformed=!0,Re}function qi(Re,re,ne,le,_e,Se){return[Math.round(ne*(Re*le-_e)),Math.round(ne*(re*le-Se))]}function bi(Re,re,ne,le,_e){const Se=re===_e.maxZoom?0:_e.tolerance/((1<<re)*_e.extent),De={features:[],numPoints:0,numSimplified:0,numFeatures:Re.length,source:null,x:ne,y:le,z:re,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const qe of Re)Ga(De,qe,Se,_e);return De}function Ga(Re,re,ne,le){const _e=re.geometry,Se=re.type,De=[];if(Re.minX=Math.min(Re.minX,re.minX),Re.minY=Math.min(Re.minY,re.minY),Re.maxX=Math.max(Re.maxX,re.maxX),Re.maxY=Math.max(Re.maxY,re.maxY),Se==="Point"||Se==="MultiPoint")for(let qe=0;qe<_e.length;qe+=3)De.push(_e[qe],_e[qe+1]),Re.numPoints++,Re.numSimplified++;else if(Se==="LineString")Ea(De,_e,Re,ne,!1,!1);else if(Se==="MultiLineString"||Se==="Polygon")for(let qe=0;qe<_e.length;qe++)Ea(De,_e[qe],Re,ne,Se==="Polygon",qe===0);else if(Se==="MultiPolygon")for(let qe=0;qe<_e.length;qe++){const Oe=_e[qe];for(let Je=0;Je<Oe.length;Je++)Ea(De,Oe[Je],Re,ne,!0,Je===0)}if(De.length){let qe=re.tags||null;if(Se==="LineString"&&le.lineMetrics){qe={};for(const Je in re.tags)qe[Je]=re.tags[Je];qe.mapbox_clip_start=_e.start/_e.size,qe.mapbox_clip_end=_e.end/_e.size}const Oe={geometry:De,type:Se==="Polygon"||Se==="MultiPolygon"?3:Se==="LineString"||Se==="MultiLineString"?2:1,tags:qe};re.id!==null&&(Oe.id=re.id),Re.features.push(Oe)}}function Ea(Re,re,ne,le,_e,Se){const De=le*le;if(le>0&&re.size<(_e?De:le))return void(ne.numPoints+=re.length/3);const qe=[];for(let Oe=0;Oe<re.length;Oe+=3)(le===0||re[Oe+2]>De)&&(ne.numSimplified++,qe.push(re[Oe],re[Oe+1])),ne.numPoints++;_e&&(function(Oe,Je){let gt=0;for(let at=0,Ot=Oe.length,ke=Ot-2;at<Ot;ke=at,at+=2)gt+=(Oe[at]-Oe[ke])*(Oe[at+1]+Oe[ke+1]);if(gt>0===Je)for(let at=0,Ot=Oe.length;at<Ot/2;at+=2){const ke=Oe[at],ar=Oe[at+1];Oe[at]=Oe[Ot-2-at],Oe[at+1]=Oe[Ot-1-at],Oe[Ot-2-at]=ke,Oe[Ot-1-at]=ar}})(qe,Se),Re.push(qe)}const To={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class no{constructor(re,ne){const le=(ne=this.options=(function(Se,De){for(const qe in De)Se[qe]=De[qe];return Se})(Object.create(To),ne)).debug;if(le&&console.time("preprocess data"),ne.maxZoom<0||ne.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ne.promoteId&&ne.generateId)throw new Error("promoteId and generateId cannot be used together.");let _e=(function(Se,De){const qe=[];if(Se.type==="FeatureCollection")for(let Oe=0;Oe<Se.features.length;Oe++)yt(qe,Se.features[Oe],De,Oe);else yt(qe,Se.type==="Feature"?Se:{geometry:Se},De);return qe})(re,ne);this.tiles={},this.tileCoords=[],le&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ne.indexMaxZoom,ne.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),_e=(function(Se,De){const qe=De.buffer/De.extent;let Oe=Se;const Je=St(Se,1,-1-qe,qe,0,-1,2,De),gt=St(Se,1,1-qe,2+qe,0,-1,2,De);return(Je||gt)&&(Oe=St(Se,1,-qe,1+qe,0,-1,2,De)||[],Je&&(Oe=zr(Je,1).concat(Oe)),gt&&(Oe=Oe.concat(zr(gt,-1)))),Oe})(_e,ne),_e.length&&this.splitTile(_e,0,0,0),le&&(_e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(re,ne,le,_e,Se,De,qe){const Oe=[re,ne,le,_e],Je=this.options,gt=Je.debug;for(;Oe.length;){_e=Oe.pop(),le=Oe.pop(),ne=Oe.pop(),re=Oe.pop();const at=1<<ne,Ot=fa(ne,le,_e);let ke=this.tiles[Ot];if(!ke&&(gt>1&&console.time("creation"),ke=this.tiles[Ot]=bi(re,ne,le,_e,Je),this.tileCoords.push({z:ne,x:le,y:_e}),gt)){gt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ne,le,_e,ke.numFeatures,ke.numPoints,ke.numSimplified),console.timeEnd("creation"));const pn=`z${ne}`;this.stats[pn]=(this.stats[pn]||0)+1,this.total++}if(ke.source=re,Se==null){if(ne===Je.indexMaxZoom||ke.numPoints<=Je.indexMaxPoints)continue}else{if(ne===Je.maxZoom||ne===Se)continue;if(Se!=null){const pn=Se-ne;if(le!==De>>pn||_e!==qe>>pn)continue}}if(ke.source=null,re.length===0)continue;gt>1&&console.time("clipping");const ar=.5*Je.buffer/Je.extent,br=.5-ar,$t=.5+ar,or=1+ar;let Ur=null,Yn=null,ri=null,Kr=null,tr=St(re,at,le-ar,le+$t,0,ke.minX,ke.maxX,Je),sr=St(re,at,le+br,le+or,0,ke.minX,ke.maxX,Je);re=null,tr&&(Ur=St(tr,at,_e-ar,_e+$t,1,ke.minY,ke.maxY,Je),Yn=St(tr,at,_e+br,_e+or,1,ke.minY,ke.maxY,Je),tr=null),sr&&(ri=St(sr,at,_e-ar,_e+$t,1,ke.minY,ke.maxY,Je),Kr=St(sr,at,_e+br,_e+or,1,ke.minY,ke.maxY,Je),sr=null),gt>1&&console.timeEnd("clipping"),Oe.push(Ur||[],ne+1,2*le,2*_e),Oe.push(Yn||[],ne+1,2*le,2*_e+1),Oe.push(ri||[],ne+1,2*le+1,2*_e),Oe.push(Kr||[],ne+1,2*le+1,2*_e+1)}}getTile(re,ne,le){re=+re,ne=+ne,le=+le;const _e=this.options,{extent:Se,debug:De}=_e;if(re<0||re>24)return null;const qe=1<<re,Oe=fa(re,ne=ne+qe&qe-1,le);if(this.tiles[Oe])return Kn(this.tiles[Oe],Se);De>1&&console.log("drilling down to z%d-%d-%d",re,ne,le);let Je,gt=re,at=ne,Ot=le;for(;!Je&&gt>0;)gt--,at>>=1,Ot>>=1,Je=this.tiles[fa(gt,at,Ot)];return Je&&Je.source?(De>1&&(console.log("found parent tile z%d-%d-%d",gt,at,Ot),console.time("drilling down")),this.splitTile(Je.source,gt,at,Ot,re,ne,le),De>1&&console.timeEnd("drilling down"),this.tiles[Oe]?Kn(this.tiles[Oe],Se):null):null}}function fa(Re,re,ne){return 32*((1<<Re)*ne+re)+Re}class An extends k{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(re,ne){return y._(this,void 0,void 0,(function*(){const le=re.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const _e=this._geoJSONIndex.getTile(le.z,le.x,le.y);if(!_e)return null;const Se=new ee(_e.features,{version:2,extent:y.$});let De=(function(qe){const Oe=new y.cM;return(function(Je,gt){for(const at in Je.layers)gt.writeMessage(3,ie,Je.layers[at])})(qe,Oe),Oe.finish()})(Se);return De.byteOffset===0&&De.byteLength===De.buffer.byteLength||(De=new Uint8Array(De)),{vectorTile:Se,rawData:De.buffer}}))}loadData(re){return y._(this,void 0,void 0,(function*(){var ne;(ne=this._pendingRequest)===null||ne===void 0||ne.abort();const le=!!(re&&re.request&&re.request.collectResourceTiming)&&new y.cN(re.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(re,this._pendingRequest);const _e=yield this._pendingData;this._geoJSONIndex=re.cluster?new rt((function({superclusterOptions:De,clusterProperties:qe}){if(!qe||!De)return De;const Oe={},Je={},gt={accumulated:null,zoom:0},at={properties:null},Ot=Object.keys(qe);for(const ke of Ot){const[ar,br]=qe[ke],$t=y.cT(br),or=y.cT(typeof ar=="string"?[ar,["accumulated"],["get",ke]]:ar);Oe[ke]=$t.value,Je[ke]=or.value}return De.map=ke=>{at.properties=ke;const ar={};for(const br of Ot)ar[br]=Oe[br].evaluate(gt,at);return ar},De.reduce=(ke,ar)=>{at.properties=ar;for(const br of Ot)gt.accumulated=ke[br],ke[br]=Je[br].evaluate(gt,at)},De})(re)).load(_e.features):(function(De,qe){return new no(De,qe)})(_e,re.geojsonVtOptions),this.loaded={};const Se={data:_e};if(le){const De=le.finish();De&&(Se.resourceTiming={},Se.resourceTiming[re.source]=JSON.parse(JSON.stringify(De)))}return Se}catch(_e){if(delete this._pendingRequest,y.cy(_e))return{abandoned:!0};throw _e}}))}getData(){return y._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(re){const ne=this.loaded;return ne&&ne[re.uid]?super.reloadTile(re):this.loadTile(re)}loadAndProcessGeoJSON(re,ne){return y._(this,void 0,void 0,(function*(){let le=yield this.loadGeoJSON(re,ne);if(delete this._pendingRequest,typeof le!="object")throw new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`);if(W(le,!0),re.filter){const _e=y.cT(re.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(_e.result==="error")throw new Error(_e.value.map((De=>`${De.key}: ${De.message}`)).join(", "));le={type:"FeatureCollection",features:le.features.filter((De=>_e.value.evaluate({zoom:0},De)))}}return le}))}loadGeoJSON(re,ne){return y._(this,void 0,void 0,(function*(){const{promoteId:le}=re;if(re.request){const _e=yield y.j(re.request,ne);return this._dataUpdateable=y.cV(_e.data,le)?y.cU(_e.data,le):void 0,_e.data}if(typeof re.data=="string")try{const _e=JSON.parse(re.data);return this._dataUpdateable=y.cV(_e,le)?y.cU(_e,le):void 0,_e}catch{throw new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`)}if(!re.dataDiff)throw new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${re.source}`);return y.cW(this._dataUpdateable,re.dataDiff,le),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(re){return y._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(re){return this._geoJSONIndex.getClusterExpansionZoom(re.clusterId)}getClusterChildren(re){return this._geoJSONIndex.getChildren(re.clusterId)}getClusterLeaves(re){return this._geoJSONIndex.getLeaves(re.clusterId,re.limit,re.offset)}}class Gi{constructor(re){this.self=re,this.actor=new y.J(re),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(ne,le)=>{if(this.externalWorkerSourceTypes[ne])throw new Error(`Worker source with name "${ne}" already registered.`);this.externalWorkerSourceTypes[ne]=le},this.self.addProtocol=y.cA,this.self.removeProtocol=y.cB,this.self.registerRTLTextPlugin=ne=>{y.cX.setMethods(ne)},this.actor.registerMessageHandler("LDT",((ne,le)=>this._getDEMWorkerSource(ne,le.source).loadTile(le))),this.actor.registerMessageHandler("RDT",((ne,le)=>y._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(ne,le.source).removeTile(le)})))),this.actor.registerMessageHandler("GCEZ",((ne,le)=>y._(this,void 0,void 0,(function*(){return this._getWorkerSource(ne,le.type,le.source).getClusterExpansionZoom(le)})))),this.actor.registerMessageHandler("GCC",((ne,le)=>y._(this,void 0,void 0,(function*(){return this._getWorkerSource(ne,le.type,le.source).getClusterChildren(le)})))),this.actor.registerMessageHandler("GCL",((ne,le)=>y._(this,void 0,void 0,(function*(){return this._getWorkerSource(ne,le.type,le.source).getClusterLeaves(le)})))),this.actor.registerMessageHandler("LD",((ne,le)=>this._getWorkerSource(ne,le.type,le.source).loadData(le))),this.actor.registerMessageHandler("GD",((ne,le)=>this._getWorkerSource(ne,le.type,le.source).getData())),this.actor.registerMessageHandler("LT",((ne,le)=>this._getWorkerSource(ne,le.type,le.source).loadTile(le))),this.actor.registerMessageHandler("RT",((ne,le)=>this._getWorkerSource(ne,le.type,le.source).reloadTile(le))),this.actor.registerMessageHandler("AT",((ne,le)=>this._getWorkerSource(ne,le.type,le.source).abortTile(le))),this.actor.registerMessageHandler("RMT",((ne,le)=>this._getWorkerSource(ne,le.type,le.source).removeTile(le))),this.actor.registerMessageHandler("RS",((ne,le)=>y._(this,void 0,void 0,(function*(){if(!this.workerSources[ne]||!this.workerSources[ne][le.type]||!this.workerSources[ne][le.type][le.source])return;const _e=this.workerSources[ne][le.type][le.source];delete this.workerSources[ne][le.type][le.source],_e.removeSource!==void 0&&_e.removeSource(le)})))),this.actor.registerMessageHandler("RM",(ne=>y._(this,void 0,void 0,(function*(){delete this.layerIndexes[ne],delete this.availableImages[ne],delete this.workerSources[ne],delete this.demWorkerSources[ne],this.globalStates.delete(ne)})))),this.actor.registerMessageHandler("SR",((ne,le)=>y._(this,void 0,void 0,(function*(){this.referrer=le})))),this.actor.registerMessageHandler("SRPS",((ne,le)=>this._syncRTLPluginState(ne,le))),this.actor.registerMessageHandler("IS",((ne,le)=>y._(this,void 0,void 0,(function*(){this.self.importScripts(le)})))),this.actor.registerMessageHandler("SI",((ne,le)=>this._setImages(ne,le))),this.actor.registerMessageHandler("UL",((ne,le)=>y._(this,void 0,void 0,(function*(){this._getLayerIndex(ne).update(le.layers,le.removedIds,this._getGlobalState(ne))})))),this.actor.registerMessageHandler("UGS",((ne,le)=>y._(this,void 0,void 0,(function*(){const _e=this._getGlobalState(ne);for(const Se in le)_e[Se]=le[Se]})))),this.actor.registerMessageHandler("SL",((ne,le)=>y._(this,void 0,void 0,(function*(){this._getLayerIndex(ne).replace(le,this._getGlobalState(ne))}))))}_getGlobalState(re){let ne=this.globalStates.get(re);return ne||(ne={},this.globalStates.set(re,ne)),ne}_setImages(re,ne){return y._(this,void 0,void 0,(function*(){this.availableImages[re]=ne;for(const le in this.workerSources[re]){const _e=this.workerSources[re][le];for(const Se in _e)_e[Se].availableImages=ne}}))}_syncRTLPluginState(re,ne){return y._(this,void 0,void 0,(function*(){return yield y.cX.syncState(ne,this.self.importScripts)}))}_getAvailableImages(re){let ne=this.availableImages[re];return ne||(ne=[]),ne}_getLayerIndex(re){let ne=this.layerIndexes[re];return ne||(ne=this.layerIndexes[re]=new c),ne}_getWorkerSource(re,ne,le){if(this.workerSources[re]||(this.workerSources[re]={}),this.workerSources[re][ne]||(this.workerSources[re][ne]={}),!this.workerSources[re][ne][le]){const _e={sendAsync:(Se,De)=>(Se.targetMapId=re,this.actor.sendAsync(Se,De))};switch(ne){case"vector":this.workerSources[re][ne][le]=new k(_e,this._getLayerIndex(re),this._getAvailableImages(re));break;case"geojson":this.workerSources[re][ne][le]=new An(_e,this._getLayerIndex(re),this._getAvailableImages(re));break;default:this.workerSources[re][ne][le]=new this.externalWorkerSourceTypes[ne](_e,this._getLayerIndex(re),this._getAvailableImages(re))}}return this.workerSources[re][ne][le]}_getDEMWorkerSource(re,ne){return this.demWorkerSources[re]||(this.demWorkerSources[re]={}),this.demWorkerSources[re][ne]||(this.demWorkerSources[re][ne]=new N),this.demWorkerSources[re][ne]}}return y.i(self)&&(self.worker=new Gi(self)),Gi})),p("index",["exports","./shared"],(function(y,c){var C="5.7.3";function E(){var b=new c.A(4);return c.A!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b}let M,k;const N={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(b,t,u){const d=requestAnimationFrame((S=>{_(),t(S)})),{unsubscribe:_}=c.s(b.signal,"abort",(()=>{_(),cancelAnimationFrame(d),u(c.c())}),!1)},frameAsync(b){return new Promise(((t,u)=>{this.frame(b,t,u)}))},getImageData(b,t=0){return this.getImageCanvasContext(b).getImageData(-t,-t,b.width+2*t,b.height+2*t)},getImageCanvasContext(b){const t=window.document.createElement("canvas"),u=t.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return t.width=b.width,t.height=b.height,u.drawImage(b,0,0,b.width,b.height),u},resolveURL:b=>(M||(M=document.createElement("a")),M.href=b,M.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(k==null&&(k=matchMedia("(prefers-reduced-motion: reduce)")),k.matches)}};class j{static testProp(t){if(!j.docStyle)return t[0];for(let u=0;u<t.length;u++)if(t[u]in j.docStyle)return t[u];return t[0]}static create(t,u,d){const _=window.document.createElement(t);return u!==void 0&&(_.className=u),d&&d.appendChild(_),_}static createNS(t,u){return window.document.createElementNS(t,u)}static disableDrag(){j.docStyle&&j.selectProp&&(j.userSelect=j.docStyle[j.selectProp],j.docStyle[j.selectProp]="none")}static enableDrag(){j.docStyle&&j.selectProp&&(j.docStyle[j.selectProp]=j.userSelect)}static setTransform(t,u){t.style[j.transformProp]=u}static addEventListener(t,u,d,_={}){t.addEventListener(u,d,"passive"in _?_:_.capture)}static removeEventListener(t,u,d,_={}){t.removeEventListener(u,d,"passive"in _?_:_.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",j.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",j.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",j.suppressClickInternal,!0)}),0)}static getScale(t){const u=t.getBoundingClientRect();return{x:u.width/t.offsetWidth||1,y:u.height/t.offsetHeight||1,boundingClientRect:u}}static getPoint(t,u,d){const _=u.boundingClientRect;return new c.P((d.clientX-_.left)/u.x-t.clientLeft,(d.clientY-_.top)/u.y-t.clientTop)}static mousePos(t,u){const d=j.getScale(t);return j.getPoint(t,d,u)}static touchPos(t,u){const d=[],_=j.getScale(t);for(let S=0;S<u.length;S++)d.push(j.getPoint(t,_,u[S]));return d}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}static sanitize(t){const u=new DOMParser().parseFromString(t,"text/html").body||document.createElement("body"),d=u.querySelectorAll("script");for(const _ of d)_.remove();return j.clean(u),u.innerHTML}static isPossiblyDangerous(t,u){const d=u.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(t)||!d.includes("javascript:")&&!d.includes("data:"))||!!t.startsWith("on")||void 0}static clean(t){const u=t.children;for(const d of u)j.removeAttributes(d),j.clean(d)}static removeAttributes(t){for(const{name:u,value:d}of t.attributes)j.isPossiblyDangerous(u,d)&&t.removeAttribute(u)}}j.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,j.selectProp=j.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),j.transformProp=j.testProp(["transform","WebkitTransform"]);const q={supported:!1,testSupport:function(b){!K&&W&&(ee?ie(b):H=b)}};let H,W,K=!1,ee=!1;function ie(b){const t=b.createTexture();b.bindTexture(b.TEXTURE_2D,t);try{if(b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,W),b.isContextLost())return;q.supported=!0}catch{}b.deleteTexture(t),K=!0}var ve;typeof document<"u"&&(W=document.createElement("img"),W.onload=()=>{H&&ie(H),H=null,ee=!0},W.onerror=()=>{K=!0,H=null},W.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(b){let t,u,d,_;b.resetRequestQueue=()=>{t=[],u=0,d=0,_={}},b.addThrottleControl=O=>{const B=d++;return _[B]=O,B},b.removeThrottleControl=O=>{delete _[O],A()},b.getImage=(O,B,U=!0)=>new Promise(((G,V)=>{q.supported&&(O.headers||(O.headers={}),O.headers.accept="image/webp,*/*"),c.e(O,{type:"image"}),t.push({abortController:B,requestParameters:O,supportImageRefresh:U,state:"queued",onError:Q=>{V(Q)},onSuccess:Q=>{G(Q)}}),A()}));const S=O=>c._(this,void 0,void 0,(function*(){O.state="running";const{requestParameters:B,supportImageRefresh:U,onError:G,onSuccess:V,abortController:Q}=O,ae=U===!1&&!c.i(self)&&!c.g(B.url)&&(!B.headers||Object.keys(B.headers).reduce(((fe,pe)=>fe&&pe==="accept"),!0));u++;const ce=ae?I(B,Q):c.m(B,Q);try{const fe=yield ce;delete O.abortController,O.state="completed",fe.data instanceof HTMLImageElement||c.b(fe.data)?V(fe):fe.data&&V({data:yield(he=fe.data,typeof createImageBitmap=="function"?c.f(he):c.h(he)),cacheControl:fe.cacheControl,expires:fe.expires})}catch(fe){delete O.abortController,G(fe)}finally{u--,A()}var he})),A=()=>{const O=(()=>{for(const B of Object.keys(_))if(_[B]())return!0;return!1})()?c.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let B=u;B<O&&t.length>0;B++){const U=t.shift();U.abortController.signal.aborted?B--:S(U)}},I=(O,B)=>new Promise(((U,G)=>{const V=new Image,Q=O.url,ae=O.credentials;ae&&ae==="include"?V.crossOrigin="use-credentials":(ae&&ae==="same-origin"||!c.d(Q))&&(V.crossOrigin="anonymous"),B.signal.addEventListener("abort",(()=>{V.src="",G(c.c())})),V.fetchPriority="high",V.onload=()=>{V.onerror=V.onload=null,U({data:V})},V.onerror=()=>{V.onerror=V.onload=null,B.signal.aborted||G(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},V.src=Q}))})(ve||(ve={})),ve.resetRequestQueue();class ye{constructor(t){this._transformRequestFn=t??null}transformRequest(t,u){return this._transformRequestFn&&this._transformRequestFn(t,u)||{url:t}}setTransformRequest(t){this._transformRequestFn=t}}function Pe(b){const t=[];if(typeof b=="string")t.push({id:"default",url:b});else if(b&&b.length>0){const u=[];for(const{id:d,url:_}of b){const S=`${d}${_}`;u.indexOf(S)===-1&&(u.push(S),t.push({id:d,url:_}))}}return t}function Me(b,t,u){try{const d=new URL(b);return d.pathname+=`${t}${u}`,d.toString()}catch{throw new Error(`Invalid sprite URL "${b}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function je(b){const{userImage:t}=b;return!!(t&&t.render&&t.render())&&(b.data.replace(new Uint8Array(t.data.buffer)),!0)}class ht extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:u,promiseResolve:d}of this.requestors)d(this._getImagesForIds(u));this.requestors=[]}}getImage(t){const u=this.images[t];if(u&&!u.data&&u.spriteData){const d=u.spriteData;u.data=new c.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),u.spriteData=null}return u}addImage(t,u){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,u)&&(this.images[t]=u)}_validate(t,u){let d=!0;const _=u.data||u.spriteData;return this._validateStretch(u.stretchX,_&&_.width)||(this.fire(new c.k(new Error(`Image "${t}" has invalid "stretchX" value`))),d=!1),this._validateStretch(u.stretchY,_&&_.height)||(this.fire(new c.k(new Error(`Image "${t}" has invalid "stretchY" value`))),d=!1),this._validateContent(u.content,u)||(this.fire(new c.k(new Error(`Image "${t}" has invalid "content" value`))),d=!1),d}_validateStretch(t,u){if(!t)return!0;let d=0;for(const _ of t){if(_[0]<d||_[1]<_[0]||u<_[1])return!1;d=_[1]}return!0}_validateContent(t,u){if(!t)return!0;if(t.length!==4)return!1;const d=u.spriteData,_=d&&d.width||u.data.width,S=d&&d.height||u.data.height;return!(t[0]<0||_<t[0]||t[1]<0||S<t[1]||t[2]<0||_<t[2]||t[3]<0||S<t[3]||t[2]<t[0]||t[3]<t[1])}updateImage(t,u,d=!0){const _=this.getImage(t);if(d&&(_.data.width!==u.data.width||_.data.height!==u.data.height))throw new Error(`size mismatch between old image (${_.data.width}x${_.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=_.version+1,this.images[t]=u,this.updatedImages[t]=!0}removeImage(t){const u=this.images[t];delete this.images[t],delete this.patterns[t],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t){return new Promise(((u,d)=>{let _=!0;if(!this.isLoaded())for(const S of t)this.images[S]||(_=!1);this.isLoaded()||_?u(this._getImagesForIds(t)):this.requestors.push({ids:t,promiseResolve:u})}))}_getImagesForIds(t){const u={};for(const d of t){let _=this.getImage(d);_||(this.fire(new c.l("styleimagemissing",{id:d})),_=this.getImage(d)),_?u[d]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,textFitWidth:_.textFitWidth,textFitHeight:_.textFitHeight,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:c.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return u}getPixelSize(){const{width:t,height:u}=this.atlasImage;return{width:t,height:u}}getPattern(t){const u=this.patterns[t],d=this.getImage(t);if(!d)return null;if(u&&u.position.version===d.version)return u.position;if(u)u.position.version=d.version;else{const _={w:d.data.width+2,h:d.data.height+2,x:0,y:0},S=new c.I(_,d);this.patterns[t]={bin:_,position:S}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const u=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new c.T(t,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const S in this.patterns)t.push(this.patterns[S].bin);const{w:u,h:d}=c.p(t),_=this.atlasImage;_.resize({width:u||1,height:d||1});for(const S in this.patterns){const{bin:A}=this.patterns[S],I=A.x+1,O=A.y+1,B=this.getImage(S).data,U=B.width,G=B.height;c.R.copy(B,_,{x:0,y:0},{x:I,y:O},{width:U,height:G}),c.R.copy(B,_,{x:0,y:G-1},{x:I,y:O-1},{width:U,height:1}),c.R.copy(B,_,{x:0,y:0},{x:I,y:O+G},{width:U,height:1}),c.R.copy(B,_,{x:U-1,y:0},{x:I-1,y:O},{width:1,height:G}),c.R.copy(B,_,{x:0,y:0},{x:I+U,y:O},{width:1,height:G})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const u of t){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const d=this.getImage(u);d||c.w(`Image with ID: "${u}" was not found`),je(d)&&this.updateImage(u,d)}}}const At=1e20;function ot(b,t,u,d,_,S,A,I,O){for(let B=t;B<t+d;B++)ft(b,u*S+B,S,_,A,I,O);for(let B=u;B<u+_;B++)ft(b,B*S+t,1,d,A,I,O)}function ft(b,t,u,d,_,S,A){S[0]=0,A[0]=-At,A[1]=At,_[0]=b[t];for(let I=1,O=0,B=0;I<d;I++){_[I]=b[t+I*u];const U=I*I;do{const G=S[O];B=(_[I]-_[G]+U-G*G)/(I-G)/2}while(B<=A[O]&&--O>-1);O++,S[O]=I,A[O]=B,A[O+1]=At}for(let I=0,O=0;I<d;I++){for(;A[O+1]<I;)O++;const B=S[O],U=I-B;b[t+I*u]=_[B]+U*U}}class rt{constructor(t,u,d){this.requestManager=t,this.localIdeographFontFamily=u,this.entries={},this.lang=d}setURL(t){this.url=t}getGlyphs(t){return c._(this,void 0,void 0,(function*(){const u=[];for(const S in t)for(const A of t[S])u.push(this._getAndCacheGlyphsPromise(S,A));const d=yield Promise.all(u),_={};for(const{stack:S,id:A,glyph:I}of d)_[S]||(_[S]={}),_[S][A]=I&&{id:I.id,bitmap:I.bitmap.clone(),metrics:I.metrics};return _}))}_getAndCacheGlyphsPromise(t,u){return c._(this,void 0,void 0,(function*(){let d=this.entries[t];d||(d=this.entries[t]={glyphs:{},requests:{},ranges:{}});let _=d.glyphs[u];if(_!==void 0)return{stack:t,id:u,glyph:_};if(_=this._tinySDF(d,t,u),_)return d.glyphs[u]=_,{stack:t,id:u,glyph:_};const S=Math.floor(u/256);if(256*S>65535)throw new Error("glyphs > 65535 not supported");if(d.ranges[S])return{stack:t,id:u,glyph:_};if(!this.url)throw new Error("glyphsUrl is not set");if(!d.requests[S]){const I=rt.loadGlyphRange(t,S,this.url,this.requestManager);d.requests[S]=I}const A=yield d.requests[S];for(const I in A)this._doesCharSupportLocalGlyph(+I)||(d.glyphs[+I]=A[+I]);return d.ranges[S]=!0,{stack:t,id:u,glyph:A[u]||null}}))}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(t))||c.u["CJK Unified Ideographs"](t)||c.u["Hangul Syllables"](t)||c.u.Hiragana(t)||c.u.Katakana(t)||c.u["CJK Symbols and Punctuation"](t)||c.u["Halfwidth and Fullwidth Forms"](t))}_tinySDF(t,u,d){const _=this.localIdeographFontFamily;if(!_||!this._doesCharSupportLocalGlyph(d))return;let S=t.tinySDF;if(!S){let I="400";/bold/i.test(u)?I="900":/medium/i.test(u)?I="500":/light/i.test(u)&&(I="200"),S=t.tinySDF=new rt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:_,fontWeight:I})}const A=S.draw(String.fromCharCode(d));return{id:d,bitmap:new c.q({width:A.width||60,height:A.height||60},A.data),metrics:{width:A.glyphWidth/2||24,height:A.glyphHeight/2||24,left:A.glyphLeft/2+.5||0,top:A.glyphTop/2-27.5||-8,advance:A.glyphAdvance/2||24,isDoubleResolution:!0}}}}rt.loadGlyphRange=function(b,t,u,d){return c._(this,void 0,void 0,(function*(){const _=256*t,S=_+255,A=d.transformRequest(u.replace("{fontstack}",b).replace("{range}",`${_}-${S}`),"Glyphs"),I=yield c.n(A,new AbortController);if(!I||!I.data)throw new Error(`Could not load glyph range. range: ${t}, ${_}-${S}`);const O={};for(const B of c.o(I.data))O[B.id]=B;return O}))},rt.TinySDF=class{constructor({fontSize:b=24,buffer:t=3,radius:u=8,cutoff:d=.25,fontFamily:_="sans-serif",fontWeight:S="normal",fontStyle:A="normal",lang:I=null}={}){this.buffer=t,this.cutoff=d,this.radius=u,this.lang=I;const O=this.size=b+4*t,B=this._createCanvas(O),U=this.ctx=B.getContext("2d",{willReadFrequently:!0});U.font=`${A} ${S} ${b}px ${_}`,U.textBaseline="alphabetic",U.textAlign="left",U.fillStyle="black",this.gridOuter=new Float64Array(O*O),this.gridInner=new Float64Array(O*O),this.f=new Float64Array(O),this.z=new Float64Array(O+1),this.v=new Uint16Array(O)}_createCanvas(b){const t=document.createElement("canvas");return t.width=t.height=b,t}draw(b){const{width:t,actualBoundingBoxAscent:u,actualBoundingBoxDescent:d,actualBoundingBoxLeft:_,actualBoundingBoxRight:S}=this.ctx.measureText(b),A=Math.ceil(u),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(S-_))),O=Math.min(this.size-this.buffer,A+Math.ceil(d)),B=I+2*this.buffer,U=O+2*this.buffer,G=Math.max(B*U,0),V=new Uint8ClampedArray(G),Q={data:V,width:B,height:U,glyphWidth:I,glyphHeight:O,glyphTop:A,glyphLeft:0,glyphAdvance:t};if(I===0||O===0)return Q;const{ctx:ae,buffer:ce,gridInner:he,gridOuter:fe}=this;this.lang&&(ae.lang=this.lang),ae.clearRect(ce,ce,I,O),ae.fillText(b,ce,ce+A);const pe=ae.getImageData(ce,ce,I,O);fe.fill(At,0,G),he.fill(0,0,G);for(let be=0;be<O;be++)for(let me=0;me<I;me++){const we=pe.data[4*(be*I+me)+3]/255;if(we===0)continue;const Ee=(be+ce)*B+me+ce;if(we===1)fe[Ee]=0,he[Ee]=At;else{const ge=.5-we;fe[Ee]=ge>0?ge*ge:0,he[Ee]=ge<0?ge*ge:0}}ot(fe,0,0,B,U,B,this.f,this.v,this.z),ot(he,ce,ce,I,O,B,this.f,this.v,this.z);for(let be=0;be<G;be++){const me=Math.sqrt(fe[be])-Math.sqrt(he[be]);V[be]=Math.round(255-255*(me/this.radius+this.cutoff))}return Q}};class It{constructor(){this.specification=c.v.light.position}possiblyEvaluate(t,u){return c.B(t.expression.evaluate(u))}interpolate(t,u,d){return{x:c.C.number(t.x,u.x,d),y:c.C.number(t.y,u.y,d),z:c.C.number(t.z,u.z,d)}}}let kt;class Ue extends c.E{constructor(t){super(),kt=kt||new c.r({anchor:new c.D(c.v.light.anchor),position:new It,color:new c.D(c.v.light.color),intensity:new c.D(c.v.light.intensity)}),this._transitionable=new c.t(kt,void 0),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,u={}){if(!this._validate(c.x,t,u))for(const d in t){const _=t[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),_):this._transitionable.setValue(d,_)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,u,d){return(!d||d.validate!==!1)&&c.y(this,t.call(c.z,{value:u,style:{glyphs:!0,sprite:!0},styleSpec:c.v}))}}const ct=new c.r({"sky-color":new c.D(c.v.sky["sky-color"]),"horizon-color":new c.D(c.v.sky["horizon-color"]),"fog-color":new c.D(c.v.sky["fog-color"]),"fog-ground-blend":new c.D(c.v.sky["fog-ground-blend"]),"horizon-fog-blend":new c.D(c.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new c.D(c.v.sky["sky-horizon-blend"]),"atmosphere-blend":new c.D(c.v.sky["atmosphere-blend"])});class nt extends c.E{constructor(t){super(),this._transitionable=new c.t(ct,void 0),this.setSky(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.F(0))}setSky(t,u={}){if(!this._validate(c.G,t,u)){t||(t={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const d in t){const _=t[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),_):this._transitionable.setValue(d,_)}}}getSky(){return this._transitionable.serialize()}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,u,d={}){return d?.validate!==!1&&c.y(this,t.call(c.z,c.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:c.v})))}calculateFogBlendOpacity(t){return t<60?0:t<70?(t-60)/10:1}}class Ct{constructor(t,u){this.width=t,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,u){const d=t.join(",")+String(u);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(t,u)),this.dashEntry[d]}getDashRanges(t,u,d){const _=[];let S=t.length%2==1?-t[t.length-1]*d:0,A=t[0]*d,I=!0;_.push({left:S,right:A,isDash:I,zeroLength:t[0]===0});let O=t[0];for(let B=1;B<t.length;B++){I=!I;const U=t[B];S=O*d,O+=U,A=O*d,_.push({left:S,right:A,isDash:I,zeroLength:U===0})}return _}addRoundDash(t,u,d){const _=u/2;for(let S=-d;S<=d;S++){const A=this.width*(this.nextRow+d+S);let I=0,O=t[I];for(let B=0;B<this.width;B++){B/O.right>1&&(O=t[++I]);const U=Math.abs(B-O.left),G=Math.abs(B-O.right),V=Math.min(U,G);let Q;const ae=S/d*(_+1);if(O.isDash){const ce=_-Math.abs(ae);Q=Math.sqrt(V*V+ce*ce)}else Q=_-Math.sqrt(V*V+ae*ae);this.data[A+B]=Math.max(0,Math.min(255,Q+128))}}}addRegularDash(t){for(let I=t.length-1;I>=0;--I){const O=t[I],B=t[I+1];O.zeroLength?t.splice(I,1):B&&B.isDash===O.isDash&&(B.left=O.left,t.splice(I,1))}const u=t[0],d=t[t.length-1];u.isDash===d.isDash&&(u.left=d.left-this.width,d.right=u.right+this.width);const _=this.width*this.nextRow;let S=0,A=t[S];for(let I=0;I<this.width;I++){I/A.right>1&&(A=t[++S]);const O=Math.abs(I-A.left),B=Math.abs(I-A.right),U=Math.min(O,B);this.data[_+I]=Math.max(0,Math.min(255,(A.isDash?U:-U)+128))}}addDash(t,u){const d=u?7:0,_=2*d+1;if(this.nextRow+_>this.height)return c.w("LineAtlas out of space"),null;let S=0;for(let I=0;I<t.length;I++)S+=t[I];if(S!==0){const I=this.width/S,O=this.getDashRanges(t,this.width,I);u?this.addRoundDash(O,I,d):this.addRegularDash(O)}const A={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:S};return this.nextRow+=_,this.dirty=!0,A}bind(t){const u=t.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}const Te="maplibre_preloaded_worker_pool";class et{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<et.workerCount;)this.workers.push(new Worker(c.a.WORKER_URL));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.numActive()===0&&(this.workers.forEach((u=>{u.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Te]}numActive(){return Object.keys(this.active).length}}const st=Math.floor(N.hardwareConcurrency/2);let yt,Rt;function Zt(){return yt||(yt=new et),yt}et.workerCount=c.H(globalThis)?Math.max(Math.min(st,3),1):1;class Ft{constructor(t,u){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=u;const d=this.workerPool.acquire(u);for(let _=0;_<d.length;_++){const S=new c.J(d[_],u);S.name=`Worker ${_}`,this.actors.push(S)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,u){const d=[];for(const _ of this.actors)d.push(_.sendAsync({type:t,data:u}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(t=!0){this.actors.forEach((u=>{u.remove()})),this.actors=[],t&&this.workerPool.release(this.id)}registerMessageHandler(t,u){for(const d of this.actors)d.registerMessageHandler(t,u)}}function ir(){return Rt||(Rt=new Ft(Zt(),c.K),Rt.registerMessageHandler("GR",((b,t,u)=>c.m(t,u)))),Rt}function Jt(b,t){const u=c.L();return c.M(u,u,[1,1,0]),c.N(u,u,[.5*b.width,.5*b.height,1]),b.calculatePosMatrix?c.O(u,u,b.calculatePosMatrix(t.toUnwrapped())):u}function St(b,t,u,d,_,S,A){var I;const O=(function(V,Q,ae){if(V)for(const ce of V){const he=Q[ce];if(he&&he.source===ae&&he.type==="fill-extrusion")return!0}else for(const ce in Q){const he=Q[ce];if(he.source===ae&&he.type==="fill-extrusion")return!0}return!1})((I=_?.layers)!==null&&I!==void 0?I:null,t,b.id),B=S.maxPitchScaleFactor(),U=b.tilesIn(d,B,O);U.sort(Gt);const G=[];for(const V of U)G.push({wrappedTileID:V.tileID.wrapped().key,queryResults:V.tile.queryRenderedFeatures(t,u,b._state,V.queryGeometry,V.cameraQueryGeometry,V.scale,_,S,B,Jt(b.transform,V.tileID),A?(Q,ae)=>A(V.tileID,Q,ae):void 0)});return(function(V,Q){for(const ae in V)for(const ce of V[ae])Nt(ce,Q);return V})((function(V){const Q={},ae={};for(const ce of V){const he=ce.queryResults,fe=ce.wrappedTileID,pe=ae[fe]=ae[fe]||{};for(const be in he){const me=he[be],we=pe[be]=pe[be]||{},Ee=Q[be]=Q[be]||[];for(const ge of me)we[ge.featureIndex]||(we[ge.featureIndex]=!0,Ee.push(ge))}}return Q})(G),b)}function Gt(b,t){const u=b.tileID,d=t.tileID;return u.overscaledZ-d.overscaledZ||u.canonical.y-d.canonical.y||u.wrap-d.wrap||u.canonical.x-d.canonical.x}function Nt(b,t){const u=b.feature,d=t.getFeatureState(u.layer["source-layer"],u.id);u.source=u.layer.source,u.layer["source-layer"]&&(u.sourceLayer=u.layer["source-layer"]),u.state=d}function He(b,t,u){return c._(this,void 0,void 0,(function*(){let d=b;if(b.url?d=(yield c.j(t.transformRequest(b.url,"Source"),u)).data:yield N.frameAsync(u),!d)return null;const _=c.Q(c.e(d,b),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(_.vectorLayerIds=d.vector_layers.map((S=>S.id))),_}))}class Ht{constructor(t,u){t&&(u?this.setSouthWest(t).setNorthEast(u):Array.isArray(t)&&(t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof c.S?new c.S(t.lng,t.lat):c.S.convert(t),this}setSouthWest(t){return this._sw=t instanceof c.S?new c.S(t.lng,t.lat):c.S.convert(t),this}extend(t){const u=this._sw,d=this._ne;let _,S;if(t instanceof c.S)_=t,S=t;else{if(!(t instanceof Ht))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(Ht.convert(t)):this.extend(c.S.convert(t)):t&&("lng"in t||"lon"in t)&&"lat"in t?this.extend(c.S.convert(t)):this;if(_=t._sw,S=t._ne,!_||!S)return this}return u||d?(u.lng=Math.min(_.lng,u.lng),u.lat=Math.min(_.lat,u.lat),d.lng=Math.max(S.lng,d.lng),d.lat=Math.max(S.lat,d.lat)):(this._sw=new c.S(_.lng,_.lat),this._ne=new c.S(S.lng,S.lat)),this}getCenter(){return new c.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.S(this.getWest(),this.getNorth())}getSouthEast(){return new c.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:u,lat:d}=c.S.convert(t);let _=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&_}static convert(t){return t instanceof Ht?t:t&&new Ht(t)}static fromLngLat(t,u=0){const d=360*u/40075017,_=d/Math.cos(Math.PI/180*t.lat);return new Ht(new c.S(t.lng-_,t.lat-d),new c.S(t.lng+_,t.lat+d))}adjustAntiMeridian(){const t=new c.S(this._sw.lng,this._sw.lat),u=new c.S(this._ne.lng,this._ne.lat);return new Ht(t,t.lng>u.lng?new c.S(u.lng+360,u.lat):u)}}class Lt{constructor(t,u,d){this.bounds=Ht.convert(this.validateBounds(t)),this.minzoom=u||0,this.maxzoom=d||24}validateBounds(t){return Array.isArray(t)&&t.length===4?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const u=Math.pow(2,t.z),d=Math.floor(c.V(this.bounds.getWest())*u),_=Math.floor(c.U(this.bounds.getNorth())*u),S=Math.ceil(c.V(this.bounds.getEast())*u),A=Math.ceil(c.U(this.bounds.getSouth())*u);return t.x>=d&&t.x<S&&t.y>=_&&t.y<A}}class wr extends c.E{constructor(t,u,d,_){if(super(),this.id=t,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.Q(u,["url","scheme","tileSize","promoteId"])),this._options=c.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const t=yield He(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),t&&(c.e(this,t),t.bounds&&(this.tileBounds=new Lt(t.bounds,this.minzoom,this.maxzoom)),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.l("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this._loaded=!0,this.fire(new c.k(t))}}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.abort(),t(),this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return c.e({},this._options)}loadTile(t){return c._(this,void 0,void 0,(function*(){const u=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(u,"Tile"),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};d.request.collectResourceTiming=this._collectResourceTiming;let _="RT";if(t.actor&&t.state!=="expired"){if(t.state==="loading")return new Promise(((S,A)=>{t.reloadPromise={resolve:S,reject:A}}))}else t.actor=this.dispatcher.getActor(),_="LT";t.abortController=new AbortController;try{const S=yield t.actor.sendAsync({type:_,data:d},t.abortController);if(delete t.abortController,t.aborted)return;this._afterTileLoadWorkerResponse(t,S)}catch(S){if(delete t.abortController,t.aborted)return;if(S&&S.status!==404)throw S;this._afterTileLoadWorkerResponse(t,null)}}))}_afterTileLoadWorkerResponse(t,u){if(u&&u.resourceTiming&&(t.resourceTiming=u.resourceTiming),u&&this.map._refreshExpiredTiles&&t.setExpiryData(u),t.loadVectorData(u,this.map.painter),t.reloadPromise){const d=t.reloadPromise;t.reloadPromise=null,this.loadTile(t).then(d.resolve).catch(d.reject)}}abortTile(t){return c._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.actor&&(yield t.actor.sendAsync({type:"AT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}unloadTile(t){return c._(this,void 0,void 0,(function*(){t.unloadVectorData(),t.actor&&(yield t.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Dr extends c.E{constructor(t,u,d,_){super(),this.id=t,this.dispatcher=d,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},u),c.e(this,c.Q(u,["url","scheme","tileSize"]))}load(){return c._(this,arguments,void 0,(function*(t=!1){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield He(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,u&&(c.e(this,u),u.bounds&&(this.tileBounds=new Lt(u.bounds,this.minzoom,this.maxzoom)),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:t})))}catch(u){this._tileJSONRequest=null,this._loaded=!0,this.fire(new c.k(u))}}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(t){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),t(),this.load(!0)}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}serialize(){return c.e({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t){return c._(this,void 0,void 0,(function*(){const u=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.abortController=new AbortController;try{const d=yield ve.getImage(this.map._requestManager.transformRequest(u,"Tile"),t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&(d.cacheControl||d.expires)&&t.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const _=this.map.painter.context,S=_.gl,A=d.data;t.texture=this.map.painter.getTileTexture(A.width),t.texture?t.texture.update(A,{useMipmap:!0}):(t.texture=new c.T(_,A,S.RGBA,{useMipmap:!0}),t.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE,S.LINEAR_MIPMAP_NEAREST)),t.state="loaded"}}catch(d){if(delete t.abortController,t.aborted)t.state="unloaded";else if(d)throw t.state="errored",d}}))}abortTile(t){return c._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController)}))}unloadTile(t){return c._(this,void 0,void 0,(function*(){t.texture&&this.map.painter.saveTileTexture(t.texture)}))}hasTransition(){return!1}}class zr extends Dr{constructor(t,u,d,_){super(t,u,d,_),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(t){return c._(this,void 0,void 0,(function*(){const u=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(u,"Tile");t.neighboringTiles=this._getNeighboringTiles(t.tileID),t.abortController=new AbortController;try{const _=yield ve.getImage(d,t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(_&&_.data){const S=_.data;this.map._refreshExpiredTiles&&(_.cacheControl||_.expires)&&t.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const A=c.b(S)&&c.W()?S:yield this.readImageNow(S),I={type:this.type,uid:t.uid,source:this.id,rawImageData:A,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!t.actor||t.state==="expired"){t.actor=this.dispatcher.getActor();const O=yield t.actor.sendAsync({type:"LDT",data:I});t.dem=O,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded"}}}catch(_){if(delete t.abortController,t.aborted)t.state="unloaded";else if(_)throw t.state="errored",_}}))}readImageNow(t){return c._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&c.X()){const u=t.width+2,d=t.height+2;try{return new c.R({width:u,height:d},yield c.Y(t,-1,-1,u,d))}catch{}}return N.getImageData(t,1)}))}_getNeighboringTiles(t){const u=t.canonical,d=Math.pow(2,u.z),_=(u.x-1+d)%d,S=u.x===0?t.wrap-1:t.wrap,A=(u.x+1+d)%d,I=u.x+1===d?t.wrap+1:t.wrap,O={};return O[new c.Z(t.overscaledZ,S,u.z,_,u.y).key]={backfilled:!1},O[new c.Z(t.overscaledZ,I,u.z,A,u.y).key]={backfilled:!1},u.y>0&&(O[new c.Z(t.overscaledZ,S,u.z,_,u.y-1).key]={backfilled:!1},O[new c.Z(t.overscaledZ,t.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},O[new c.Z(t.overscaledZ,I,u.z,A,u.y-1).key]={backfilled:!1}),u.y+1<d&&(O[new c.Z(t.overscaledZ,S,u.z,_,u.y+1).key]={backfilled:!1},O[new c.Z(t.overscaledZ,t.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},O[new c.Z(t.overscaledZ,I,u.z,A,u.y+1).key]={backfilled:!1}),O}unloadTile(t){return c._(this,void 0,void 0,(function*(){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&(yield t.actor.sendAsync({type:"RDT",data:{type:this.type,uid:t.uid,source:this.id}}))}))}}class Bn extends c.E{constructor(t,u,d,_){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:u.data},this.actor=d.getActor(),this.setEventedParent(_),this._data=u.data,this._options=c.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId,u.clusterMaxZoom!==void 0&&this.maxzoom<=u.clusterMaxZoom&&c.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${u.clusterMaxZoom}".`),this.workerOptions=c.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(u.buffer!==void 0?u.buffer:128),tolerance:this._pixelsToTileUnits(u.tolerance!==void 0?u.tolerance:.375),extent:c.$,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(u.clusterMaxZoom),minPoints:Math.max(2,u.clusterMinPoints||2),extent:c.$,radius:this._pixelsToTileUnits(u.clusterRadius||50),log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(t){return t*(c.$/this.tileSize)}_getClusterMaxZoom(t){const u=t?Math.round(t):this.maxzoom-1;return Number.isInteger(t)||t===void 0||c.w(`Integer expected for option 'clusterMaxZoom': provided value "${t}" rounded to "${u}"`),u}load(){return c._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._pendingWorkerUpdate={data:t},this._updateWorkerData(),this}updateData(t){return this._pendingWorkerUpdate.diff=c.a0(this._pendingWorkerUpdate.diff,t),this._updateWorkerData(),this}getData(){return c._(this,void 0,void 0,(function*(){const t=c.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:t})}))}getCoordinatesFromGeometry(t){return t.type==="GeometryCollection"?t.geometries.map((u=>u.coordinates)).flat(1/0):t.coordinates.flat(1/0)}getBounds(){return c._(this,void 0,void 0,(function*(){const t=new Ht,u=yield this.getData();let d;switch(u.type){case"FeatureCollection":d=u.features.map((_=>this.getCoordinatesFromGeometry(_.geometry))).flat(1/0);break;case"Feature":d=this.getCoordinatesFromGeometry(u.geometry);break;default:d=this.getCoordinatesFromGeometry(u)}if(d.length==0)return t;for(let _=0;_<d.length-1;_+=2)t.extend([d[_],d[_+1]]);return t}))}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t&&(t.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(t.clusterRadius)),t.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(t.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(t){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:t,source:this.id}})}getClusterChildren(t){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:t,source:this.id}})}getClusterLeaves(t,u,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:t,limit:u,offset:d}})}_updateWorkerData(){return c._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;const{data:t,diff:u}=this._pendingWorkerUpdate;if(!t&&!u)return void c.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const d=c.e({type:this.type},this.workerOptions);t?(typeof t=="string"?(d.request=this.map._requestManager.transformRequest(N.resolveURL(t),"Source"),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(t),this._pendingWorkerUpdate.data=void 0):u&&(d.dataDiff=u,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new c.l("dataloading",{dataType:"source"}));try{const _=yield this.actor.sendAsync({type:"LD",data:d});if(this._isUpdatingWorker=!1,this._removed||_.abandoned)return void this.fire(new c.l("dataabort",{dataType:"source"}));this._data=_.data;let S=null;_.resourceTiming&&_.resourceTiming[this.id]&&(S=_.resourceTiming[this.id].slice(0));const A={dataType:"source"};this._collectResourceTiming&&S&&S.length>0&&c.e(A,{resourceTiming:S}),this.fire(new c.l("data",Object.assign(Object.assign({},A),{sourceDataType:"metadata"}))),this.fire(new c.l("data",Object.assign(Object.assign({},A),{sourceDataType:"content"})))}catch(_){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new c.l("dataabort",{dataType:"source"}));this.fire(new c.k(_))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}}))}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(t){return c._(this,void 0,void 0,(function*(){const u=t.actor?"RT":"LT";t.actor=this.actor;const d={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};t.abortController=new AbortController;const _=yield this.actor.sendAsync({type:u,data:d},t.abortController);delete t.abortController,t.unloadVectorData(),t.aborted||t.loadVectorData(_,this.map.painter,u==="RT")}))}abortTile(t){return c._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.aborted=!0}))}unloadTile(t){return c._(this,void 0,void 0,(function*(){t.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return c.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Kn extends c.E{constructor(t,u,d,_){super(),this.flippedWindingOrder=!1,this.id=t,this.dispatcher=d,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=u}load(t){return c._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const u=yield ve.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,u&&u.data&&(this.image=u.data,t&&(this.coordinates=t),this._finishLoading())}catch(u){this._request=null,this._loaded=!0,this.fire(new c.k(u))}}))}loaded(){return this._loaded}updateImage(t){return t.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=t.url,this.load(t.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(t){this.coordinates=t;const u=t.map(c.a1.fromLngLat);var d;return this.tileID=(function(_){const S=c.a2.fromPoints(_),A=S.width(),I=S.height(),O=Math.max(A,I),B=Math.max(0,Math.floor(-Math.log(O)/Math.LN2)),U=Math.pow(2,B);return new c.a4(B,Math.floor((S.minX+S.maxX)/2*U),Math.floor((S.minY+S.maxY)/2*U))})(u),this.terrainTileRanges=this._getOverlappingTileRanges(u),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=u.map((_=>this.tileID.getTilePoint(_)._round())),this.flippedWindingOrder=((d=this.tileCoords)[1].x-d[0].x)*(d[2].y-d[0].y)-(d[1].y-d[0].y)*(d[2].x-d[0].x)<0,this.fire(new c.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const t=this.map.painter.context,u=t.gl;this.texture||(this.texture=new c.T(t,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let d=!1;for(const _ in this.tiles){const S=this.tiles[_];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,d=!0)}d&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(t){return c._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={}):t.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(t){const{minX:u,minY:d,maxX:_,maxY:S}=c.a2.fromPoints(t),A={};for(let I=0;I<=c.a3;I++){const O=Math.pow(2,I),B=Math.floor(u*O),U=Math.floor(d*O),G=Math.floor(_*O),V=Math.floor(S*O);A[I]={minTileX:B,minTileY:U,maxTileX:G,maxTileY:V}}return A}}class qi extends Kn{constructor(t,u,d,_){super(t,u,d,_),this.roundZoom=!0,this.type="video",this.options=u}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!1;const t=this.options;this.urls=[];for(const u of t.urls)this.urls.push(this.map._requestManager.transformRequest(u,"Source").url);try{const u=yield c.a5(this.urls);if(this._loaded=!0,!u)return;this.video=u,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(u){this.fire(new c.k(u))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const u=this.video.seekable;t<u.start(0)||t>u.end(0)?this.fire(new c.k(new c.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const t=this.map.painter.context,u=t.gl;this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new c.T(t,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let d=!1;for(const _ in this.tiles){const S=this.tiles[_];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,d=!0)}d&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class bi extends Kn{constructor(t,u,d,_){super(t,u,d,_),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some((S=>!Array.isArray(S)||S.length!==2||S.some((A=>typeof A!="number"))))||this.fire(new c.k(new c.a6(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.k(new c.a6(`sources.${t}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new c.k(new c.a6(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new c.k(new c.a6(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.k(new c.a6(`sources.${t}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,d=u.gl;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new c.T(u,this.canvas,d.RGBA,{premultiply:!0});let _=!1;for(const S in this.tiles){const A=this.tiles[S];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,_=!0)}_&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const Ga={},Ea=b=>{switch(b){case"geojson":return Bn;case"image":return Kn;case"raster":return Dr;case"raster-dem":return zr;case"vector":return wr;case"video":return qi;case"canvas":return bi}return Ga[b]},To="RTLPluginLoaded";class no extends c.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=ir()}_syncState(t){return this.status=t,this.dispatcher.broadcast("SRPS",{pluginStatus:t,pluginURL:this.url}).catch((u=>{throw this.status="error",u}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(t){return c._(this,arguments,void 0,(function*(u,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=N.resolveURL(u),!this.url)throw new Error(`requested url ${u} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return c._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new c.l(To))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let fa=null;function An(){return fa||(fa=new no),fa}class Gi{constructor(t,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=t,this.uid=c.a7(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const u=t+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,u,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=(function(_,S){const A={};if(!S)return A;for(const I of _){const O=I.layerIds.map((B=>S.getLayer(B))).filter(Boolean);if(O.length!==0){I.layers=O,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map((B=>O.filter((U=>U.id===B))[0])));for(const B of O)A[B.id]=I}}return A})(t.buckets,u?.style),this.hasSymbolBuckets=!1;for(const _ in this.buckets){const S=this.buckets[_];if(S instanceof c.a9){if(this.hasSymbolBuckets=!0,!d)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _ in this.buckets){const S=this.buckets[_];if(S instanceof c.a9&&S.hasRTLText){this.hasRTLText=!0,An().lazyLoad();break}}this.queryPadding=0;for(const _ in this.buckets){const S=this.buckets[_];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(_).queryRadius(S))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new c.a8}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const d in this.buckets){const _=this.buckets[d];_.uploadPending()&&_.upload(t)}const u=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new c.T(t,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new c.T(t,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,u,d,_,S,A,I,O,B,U,G){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:S,scale:A,tileSize:this.tileSize,pixelPosMatrix:U,transform:O,params:I,queryPadding:this.queryPadding*B,getElevation:G},t,u,d):{}}querySourceFeatures(t,u){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const _=d.loadVTLayers(),S=u&&u.sourceLayer?u.sourceLayer:"",A=_._geojsonTileLayer||_[S];if(!A)return;const I=c.aa(u?.filter,u?.globalState),{z:O,x:B,y:U}=this.tileID.canonical,G={z:O,x:B,y:U};for(let V=0;V<A.length;V++){const Q=A.feature(V);if(I.needGeometry){const he=c.ab(Q,!0);if(!I.filter(new c.F(this.tileID.overscaledZ),he,this.tileID.canonical))continue}else if(!I.filter(new c.F(this.tileID.overscaledZ),Q))continue;const ae=d.getId(Q,S),ce=new c.ac(Q,O,B,U,ae);ce.tile=G,t.push(ce)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const u=this.expirationTime;if(t.cacheControl){const d=c.ad(t.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const d=Date.now();let _=!1;if(this.expirationTime>d)_=!1;else if(u)if(this.expirationTime<u)_=!0;else{const S=this.expirationTime-u;S?this.expirationTime=d+Math.max(S,3e4):_=!0}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const _ in this.buckets){if(!u.style.hasLayer(_))continue;const S=this.buckets[_],A=S.layers[0].sourceLayer||"_geojsonTileLayer",I=d[A],O=t[A];if(!I||!O||Object.keys(O).length===0)continue;S.update(O,I,this.imageAtlas&&this.imageAtlas.patternPositions||{});const B=u&&u.style&&u.style.getLayer(_);B&&(this.queryPadding=Math.max(this.queryPadding,B.queryRadius(S)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<N.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=N.now()+t}setDependencies(t,u){const d={};for(const _ of u)d[_]=!0;this.dependencies[t]=d}hasDependency(t,u){for(const d of t){const _=this.dependencies[d];if(_){for(const S of u)if(_[S])return!0}}return!1}}class Re{constructor(t,u){this.max=t,this.onRemove=u,this.reset()}reset(){for(const t in this.data)for(const u of this.data[t])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(t,u,d){const _=t.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);const S={value:u,timeout:void 0};if(d!==void 0&&(S.timeout=setTimeout((()=>{this.remove(t,S)}),d)),this.data[_].push(S),this.order.push(_),this.order.length>this.max){const A=this._getAndRemoveByKey(this.order[0]);A&&this.onRemove(A)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const u=this.data[t].shift();return u.timeout&&clearTimeout(u.timeout),this.data[t].length===0&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),u.value}getByKey(t){const u=this.data[t];return u?u[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,u){if(!this.has(t))return this;const d=t.wrapped().key,_=u===void 0?0:this.data[d].indexOf(u),S=this.data[d][_];return this.data[d].splice(_,1),S.timeout&&clearTimeout(S.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(S.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(t){const u=[];for(const d in this.data)for(const _ of this.data[d])t(_.value)||u.push(_);for(const d of u)this.remove(d.value.tileID,d)}}class re{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,u,d){const _=String(u);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][_]=this.stateChanges[t][_]||{},c.e(this.stateChanges[t][_],d),this.deletedStates[t]===null){this.deletedStates[t]={};for(const S in this.state[t])S!==_&&(this.deletedStates[t][S]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][_]===null){this.deletedStates[t][_]={};for(const S in this.state[t][_])d[S]||(this.deletedStates[t][_][S]=null)}else for(const S in d)this.deletedStates[t]&&this.deletedStates[t][_]&&this.deletedStates[t][_][S]===null&&delete this.deletedStates[t][_][S]}removeFeatureState(t,u,d){if(this.deletedStates[t]===null)return;const _=String(u);if(this.deletedStates[t]=this.deletedStates[t]||{},d&&u!==void 0)this.deletedStates[t][_]!==null&&(this.deletedStates[t][_]=this.deletedStates[t][_]||{},this.deletedStates[t][_][d]=null);else if(u!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][_])for(d in this.deletedStates[t][_]={},this.stateChanges[t][_])this.deletedStates[t][_][d]=null;else this.deletedStates[t][_]=null;else this.deletedStates[t]=null}getState(t,u){const d=String(u),_=c.e({},(this.state[t]||{})[d],(this.stateChanges[t]||{})[d]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){const S=this.deletedStates[t][u];if(S===null)return{};for(const A in S)delete _[A]}return _}initializeTileState(t,u){t.setFeatureState(this.state,u)}coalesceChanges(t,u){const d={};for(const _ in this.stateChanges){this.state[_]=this.state[_]||{};const S={};for(const A in this.stateChanges[_])this.state[_][A]||(this.state[_][A]={}),c.e(this.state[_][A],this.stateChanges[_][A]),S[A]=this.state[_][A];d[_]=S}for(const _ in this.deletedStates){this.state[_]=this.state[_]||{};const S={};if(this.deletedStates[_]===null)for(const A in this.state[_])S[A]={},this.state[_][A]={};else for(const A in this.deletedStates[_]){if(this.deletedStates[_][A]===null)this.state[_][A]={};else for(const I of Object.keys(this.deletedStates[_][A]))delete this.state[_][A][I];S[A]=this.state[_][A]}d[_]=d[_]||{},c.e(d[_],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const _ in t)t[_].setFeatureState(d,u)}}const ne=89.25;function le(b,t){const u=c.ah(t.lat,-c.ai,c.ai);return new c.P(c.V(t.lng)*b,c.U(u)*b)}function _e(b,t){return new c.a1(t.x/b,t.y/b).toLngLat()}function Se(b){return b.cameraToCenterDistance*Math.min(.85*Math.tan(c.ae(90-b.pitch)),Math.tan(c.ae(ne-b.pitch)))}function De(b,t){const u=b.canonical,d=t/c.af(u.z),_=u.x+Math.pow(2,u.z)*b.wrap,S=c.ag(new Float64Array(16));return c.M(S,S,[_*d,u.y*d,0]),c.N(S,S,[d/c.$,d/c.$,1]),S}function qe(b,t,u,d,_){const S=c.a1.fromLngLat(b,t),A=_*c.aj(1,b.lat),I=A*Math.cos(c.ae(u)),O=Math.sqrt(A*A-I*I),B=O*Math.sin(c.ae(-d)),U=O*Math.cos(c.ae(-d));return new c.a1(S.x+B,S.y+U,S.z+I)}function Oe(b,t,u){const d=t.intersectsFrustum(b);if(!u||d===0)return d;const _=t.intersectsPlane(u);return _===0?0:d===2&&_===2?2:1}function Je(b,t,u){let d=0;const _=(u-t)/10;for(let S=0;S<10;S++)d+=_*Math.pow(Math.cos(t+(S+.5)/10*(u-t)),b);return d}function gt(b,t){return function(u,d,_,S,A){const I=2*((b-1)/c.ak(Math.cos(c.ae(ne-A))/Math.cos(c.ae(ne)))-1),O=Math.acos(_/S),B=2*Je(I-1,0,c.ae(A/2)),U=Math.min(c.ae(ne),O+c.ae(A/2)),G=Je(I-1,Math.min(U,O-c.ae(A/2)),U),V=Math.atan(d/_),Q=Math.hypot(d,_);let ae=u;return ae+=c.ak(S/Q/Math.max(.5,Math.cos(c.ae(A/2)))),ae+=I*c.ak(Math.cos(V))/2,ae-=c.ak(Math.max(1,G/B/t))/2,ae}}const at=gt(9.314,3);function Ot(b,t){const u=(t.roundZoom?Math.round:Math.floor)(b.zoom+c.ak(b.tileSize/t.tileSize));return Math.max(0,u)}function ke(b,t){const u=b.getCameraFrustum(),d=b.getClippingPlane(),_=b.screenPointToMercatorCoordinate(b.getCameraPoint()),S=c.a1.fromLngLat(b.center,b.elevation);_.z=S.z+Math.cos(b.pitchInRadians)*b.cameraToCenterDistance/b.worldSize;const A=b.getCoveringTilesDetailsProvider(),I=A.allowVariableZoom(b,t),O=Ot(b,t),B=t.minzoom||0,U=t.maxzoom!==void 0?t.maxzoom:b.maxZoom,G=Math.min(Math.max(0,O),U),V=Math.pow(2,G),Q=[V*_.x,V*_.y,0],ae=[V*S.x,V*S.y,0],ce=Math.hypot(S.x-_.x,S.y-_.y),he=Math.abs(S.z-_.z),fe=Math.hypot(ce,he),pe=we=>({zoom:0,x:0,y:0,wrap:we,fullyVisible:!1}),be=[],me=[];if(b.renderWorldCopies&&A.allowWorldCopies())for(let we=1;we<=3;we++)be.push(pe(-we)),be.push(pe(we));for(be.push(pe(0));be.length>0;){const we=be.pop(),Ee=we.x,ge=we.y;let Ie=we.fullyVisible;const Ze={x:Ee,y:ge,z:we.zoom},Fe=A.getTileBoundingVolume(Ze,we.wrap,b.elevation,t);if(!Ie){const xt=Oe(u,Fe,d);if(xt===0)continue;Ie=xt===2}const Ve=A.distanceToTile2d(_.x,_.y,Ze,Fe);let Xe=O;I&&(Xe=(t.calculateTileZoom||at)(b.zoom+c.ak(b.tileSize/t.tileSize),Ve,he,fe,b.fov)),Xe=(t.roundZoom?Math.round:Math.floor)(Xe),Xe=Math.max(0,Xe);const Pt=Math.min(Xe,U);if(we.wrap=A.getWrap(S,Ze,we.wrap),we.zoom>=Pt){if(we.zoom<B)continue;const xt=G-we.zoom,lt=Q[0]-.5-(Ee<<xt),jt=Q[1]-.5-(ge<<xt),vr=t.reparseOverscaled?Math.max(we.zoom,Xe):we.zoom;me.push({tileID:new c.Z(we.zoom===U?vr:we.zoom,we.wrap,we.zoom,Ee,ge),distanceSq:c.al([ae[0]-.5-Ee,ae[1]-.5-ge]),tileDistanceToCamera:Math.sqrt(lt*lt+jt*jt)})}else for(let xt=0;xt<4;xt++)be.push({zoom:we.zoom+1,x:(Ee<<1)+xt%2,y:(ge<<1)+(xt>>1),wrap:we.wrap,fullyVisible:Ie})}return me.sort(((we,Ee)=>we.distanceSq-Ee.distanceSq)).map((we=>we.tileID))}const ar=c.a2.fromPoints([new c.P(0,0),new c.P(c.$,c.$)]);class br extends c.E{constructor(t,u,d){super(),this.id=t,this.dispatcher=d,this.on("data",(_=>this._dataHandler(_))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((_,S,A,I)=>{const O=new(Ea(S.type))(_,S,A,I);if(O.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${O.id}`);return O})(t,u,d,this),this._tiles={},this._cache=new Re(0,(_=>this._unloadTile(_))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new re,this._didEmitContent=!1,this._updated=!1}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._maxTileCacheZoomLevels=t?t._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const t in this._tiles){const u=this._tiles[t];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,u,d){return c._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(t),this._tileLoaded(t,u,d)}catch(_){t.state="errored",_.status!==404?this._source.fire(new c.k(_,{tile:t})):this.update(this.transform,this.terrain)}}))}_unloadTile(t){this._source.unloadTile&&this._source.unloadTile(t)}_abortTile(t){this._source.abortTile&&this._source.abortTile(t),this._source.fire(new c.l("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const d=this._tiles[u];d.upload(t),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((t=>t.tileID)).sort($t).map((t=>t.key))}getRenderableIds(t){const u=[];for(const d in this._tiles)this._isIdRenderable(d,t)&&u.push(this._tiles[d]);return t?u.sort(((d,_)=>{const S=d.tileID,A=_.tileID,I=new c.P(S.canonical.x,S.canonical.y)._rotate(-this.transform.bearingInRadians),O=new c.P(A.canonical.x,A.canonical.y)._rotate(-this.transform.bearingInRadians);return S.overscaledZ-A.overscaledZ||O.y-I.y||O.x-I.x})).map((d=>d.tileID.key)):u.map((d=>d.tileID)).sort($t).map((d=>d.key))}hasRenderableParent(t){const u=this.findLoadedParent(t,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(t,u){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(u||!this._tiles[t].holdingForFade())}reload(t){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const u in this._tiles)t?this._reloadTile(u,"expired"):this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")}}_reloadTile(t,u){return c._(this,void 0,void 0,(function*(){const d=this._tiles[t];d&&(d.state!=="loading"&&(d.state=u),yield this._loadTile(d,t,u))}))}_tileLoaded(t,u,d){t.timeAdded=N.now(),d==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(u,t),this.getSource().type==="raster-dem"&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new c.l("data",{dataType:"source",tile:t,coord:t.tileID}))}_backfillDEM(t){const u=this.getRenderableIds();for(let _=0;_<u.length;_++){const S=u[_];if(t.neighboringTiles&&t.neighboringTiles[S]){const A=this.getTileByID(S);d(t,A),d(A,t)}}function d(_,S){_.needsHillshadePrepare=!0,_.needsTerrainPrepare=!0;let A=S.tileID.canonical.x-_.tileID.canonical.x;const I=S.tileID.canonical.y-_.tileID.canonical.y,O=Math.pow(2,_.tileID.canonical.z),B=S.tileID.key;A===0&&I===0||Math.abs(I)>1||(Math.abs(A)>1&&(Math.abs(A+O)===1?A+=O:Math.abs(A-O)===1&&(A-=O)),S.dem&&_.dem&&(_.dem.backfillBorder(S.dem,A,I),_.neighboringTiles&&_.neighboringTiles[B]&&(_.neighboringTiles[B].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,u){const d=Object.values(t),_=this._getLoadedDescendents(d);for(const S of d){const A=_[S.key];if(!A)continue;const I=S.overscaledZ+br.maxUnderzooming;let O=1/0;for(const B of A){const U=B.tileID.overscaledZ;U<=I&&U<O&&(O=U)}if(O!==1/0)for(const B of A)B.tileID.overscaledZ===O&&(u[B.tileID.key]=B.tileID)}}_getLoadedDescendents(t){var u;const d={};for(const _ in this._tiles){const S=this._tiles[_];if(S.hasData())for(const A of t)S.tileID.isChildOf(A)&&(d[u=A.key]||(d[u]=[])).push(S)}return d}findLoadedParent(t,u){if(t.key in this._loadedParentTiles){const d=this._loadedParentTiles[t.key];return d&&d.tileID.overscaledZ>=u?d:null}for(let d=t.overscaledZ-1;d>=u;d--){const _=t.scaledTo(d),S=this._getLoadedTile(_);if(S)return S}}findLoadedSibling(t){return this._getLoadedTile(t)}_getLoadedTile(t){const u=this._tiles[t.key];return u&&u.hasData()?u:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){const u=Math.ceil(t.width/this._source.tileSize)+1,d=Math.ceil(t.height/this._source.tileSize)+1,_=Math.floor(u*d*(this._maxTileCacheZoomLevels===null?c.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),S=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(S)}handleWrapJump(t){const u=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);if(this._prevLng=t,u){const d={};for(const _ in this._tiles){const S=this._tiles[_];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+u),d[S.tileID.key]=S}this._tiles=d;for(const _ in this._timers)clearTimeout(this._timers[_]),delete this._timers[_];for(const _ in this._tiles)this._setTileReloadTimer(_,this._tiles[_])}}_updateCoveredAndRetainedTiles(t,u,d,_){const S={},A={},I=Object.keys(t),O=N.now();for(const B of I){const U=t[B],G=this._tiles[B];if(!G||G.fadeEndTime!==0&&G.fadeEndTime<=O)continue;const V=this.findLoadedParent(U,u),Q=this.findLoadedSibling(U),ae=V||Q||null;ae&&(this._addTile(ae.tileID),S[ae.tileID.key]=ae.tileID),A[B]=U}this._retainLoadedChildren(A,t);for(const B in S)t[B]||(this._coveredTiles[B]=!0,t[B]=S[B]);if(_){const B={},U={};for(const G of d)this._tiles[G.key].hasData()?B[G.key]=G:U[G.key]=G;for(const G in U){const V=U[G].children(this._source.maxzoom);this._tiles[V[0].key]&&this._tiles[V[1].key]&&this._tiles[V[2].key]&&this._tiles[V[3].key]&&(B[V[0].key]=t[V[0].key]=V[0],B[V[1].key]=t[V[1].key]=V[1],B[V[2].key]=t[V[2].key]=V[2],B[V[3].key]=t[V[3].key]=V[3],delete U[G])}for(const G in U){const V=U[G],Q=this.findLoadedParent(V,this._source.minzoom),ae=this.findLoadedSibling(V),ce=Q||ae||null;if(ce){B[ce.tileID.key]=t[ce.tileID.key]=ce.tileID;for(const he in B)B[he].isChildOf(ce.tileID)&&delete B[he]}}for(const G in this._tiles)B[G]||(this._coveredTiles[G]=!0)}}update(t,u){if(!this._sourceLoaded||this._paused)return;let d;this.transform=t,this.terrain=u,this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((B=>new c.Z(B.canonical.z,B.wrap,B.canonical.z,B.canonical.x,B.canonical.y))):(d=ke(t,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(d=d.filter((B=>this._source.hasTile(B))))):d=[];const _=Ot(t,this._source),S=Math.max(_-br.maxOverzooming,this._source.minzoom);if(this.usedForTerrain){const B={};for(const U of d)if(U.canonical.z>this._source.minzoom){const G=U.scaledTo(U.canonical.z-1);B[G.key]=G;const V=U.scaledTo(Math.max(this._source.minzoom,Math.min(U.canonical.z,5)));B[V.key]=V}d=d.concat(Object.values(B))}const A=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new c.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const I=this._updateRetainedTiles(d,_);or(this._source.type)&&this._updateCoveredAndRetainedTiles(I,S,d,u);for(const B in I)this._tiles[B].clearFadeHold();const O=c.am(this._tiles,I);for(const B of O){const U=this._tiles[B];U.hasSymbolBuckets&&!U.holdingForFade()?U.setHoldDuration(this.map._fadeDuration):U.hasSymbolBuckets&&!U.symbolFadeFinished()||this._removeTile(B)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,u){var d;const _={},S={},A=Math.max(u-br.maxOverzooming,this._source.minzoom),I={};for(const O of t){const B=this._addTile(O);_[O.key]=O,B.hasData()||u<this._source.maxzoom&&(I[O.key]=O)}this._retainLoadedChildren(I,_);for(const O of t){let B=this._tiles[O.key];if(B.hasData())continue;if(u+1>this._source.maxzoom){const G=O.children(this._source.maxzoom)[0],V=this.getTile(G);if(V&&V.hasData()){_[G.key]=G;continue}}else{const G=O.children(this._source.maxzoom);if(G.length===4&&_[G[0].key]&&_[G[1].key]&&_[G[2].key]&&_[G[3].key]||G.length===1&&_[G[0].key])continue}let U=B.wasRequested();for(let G=O.overscaledZ-1;G>=A;--G){const V=O.scaledTo(G);if(S[V.key])break;if(S[V.key]=!0,B=this.getTile(V),!B&&U&&(B=this._addTile(V)),B){const Q=B.hasData();if((Q||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||U)&&(_[V.key]=V),U=B.wasRequested(),Q)break}}}return _}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const u=[];let d,_=this._tiles[t].tileID;for(;_.overscaledZ>0;){if(_.key in this._loadedParentTiles){d=this._loadedParentTiles[_.key];break}u.push(_.key);const S=_.scaledTo(_.overscaledZ-1);if(d=this._getLoadedTile(S),d)break;_=S}for(const S of u)this._loadedParentTiles[S]=d}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const t in this._tiles){const u=this._tiles[t].tileID,d=this._getLoadedTile(u);this._loadedSiblingTiles[u.key]=d}}_addTile(t){let u=this._tiles[t.key];if(u)return u;u=this._cache.getAndRemove(t),u&&(this._setTileReloadTimer(t.key,u),u.tileID=t,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,u)));const d=u;return u||(u=new Gi(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(u,t.key,u.state)),u.uses++,this._tiles[t.key]=u,d||this._source.fire(new c.l("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(t,u){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const d=u.getExpiryTimeout();d&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),d))}refreshTiles(t){for(const u in this._tiles)(this._isIdRenderable(u)||this._tiles[u].state=="errored")&&t.some((d=>d.equals(this._tiles[u].tileID.canonical)))&&this._reloadTile(u,"expired")}_removeTile(t){const u=this._tiles[t];u&&(u.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}_dataHandler(t){const u=t.sourceDataType;t.dataType==="source"&&u==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&t.dataType==="source"&&u==="content"&&(this.reload(t.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(t,u,d){const _=[],S=this.transform;if(!S)return _;const A=S.getCoveringTilesDetailsProvider().allowWorldCopies(),I=d?S.getCameraQueryGeometry(t):t,O=Q=>S.screenPointToMercatorCoordinate(Q,this.terrain),B=this.transformBbox(t,O,!A),U=this.transformBbox(I,O,!A),G=this.getIds(),V=c.a2.fromPoints(U);for(let Q=0;Q<G.length;Q++){const ae=this._tiles[G[Q]];if(ae.holdingForFade())continue;const ce=A?[ae.tileID]:[ae.tileID.unwrapTo(-1),ae.tileID.unwrapTo(0)],he=Math.pow(2,S.zoom-ae.tileID.overscaledZ),fe=u*ae.queryPadding*c.$/ae.tileSize/he;for(const pe of ce){const be=V.map((me=>pe.getTilePoint(new c.a1(me.x,me.y))));if(be.expandBy(fe),be.intersects(ar)){const me=B.map((Ee=>pe.getTilePoint(Ee))),we=U.map((Ee=>pe.getTilePoint(Ee)));_.push({tile:ae,tileID:A?pe:pe.unwrapTo(0),queryGeometry:me,cameraQueryGeometry:we,scale:he})}}}return _}transformBbox(t,u,d){let _=t.map(u);if(d){const S=c.a2.fromPoints(t);S.shrinkBy(.001*Math.min(S.width(),S.height()));const A=S.map(u);c.a2.fromPoints(_).covers(A)||(_=_.map((I=>I.x>.5?new c.a1(I.x-1,I.y,I.z):I)))}return _}getVisibleCoordinates(t){const u=this.getRenderableIds(t).map((d=>this._tiles[d].tileID));return this.transform&&this.transform.populateCache(u),u}hasTransition(){if(this._source.hasTransition())return!0;if(or(this._source.type)){const t=N.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=t)return!0}return!1}setFeatureState(t,u,d){this._state.updateState(t=t||"_geojsonTileLayer",u,d)}removeFeatureState(t,u,d){this._state.removeFeatureState(t=t||"_geojsonTileLayer",u,d)}getFeatureState(t,u){return this._state.getState(t=t||"_geojsonTileLayer",u)}setDependencies(t,u,d){const _=this._tiles[t];_&&_.setDependencies(u,d)}reloadTilesForDependencies(t,u){for(const d in this._tiles)this._tiles[d].hasDependency(t,u)&&this._reloadTile(d,"reloading");this._cache.filter((d=>!d.hasDependency(t,u)))}}function $t(b,t){const u=Math.abs(2*b.wrap)-+(b.wrap<0),d=Math.abs(2*t.wrap)-+(t.wrap<0);return b.overscaledZ-t.overscaledZ||d-u||t.canonical.y-b.canonical.y||t.canonical.x-b.canonical.x}function or(b){return b==="raster"||b==="image"||b==="video"}br.maxOverzooming=10,br.maxUnderzooming=3;class Ur{constructor(t,u){this.reset(t,u)}reset(t,u){this.points=t||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(this.points.length===1)return this.points[0];t=c.ah(t,0,1);let u=1,d=this._distances[u];const _=t*this.paddedLength+this.padding;for(;d<_&&u<this._distances.length;)d=this._distances[++u];const S=u-1,A=this._distances[S],I=d-A,O=I>0?(_-A)/I:0;return this.points[S].mult(1-O).add(this.points[u].mult(O))}}function Yn(b,t){let u=!0;return b==="always"||b!=="never"&&t!=="never"||(u=!1),u}class ri{constructor(t,u,d){const _=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(t/d),this.yCellCount=Math.ceil(u/d);for(let A=0;A<this.xCellCount*this.yCellCount;A++)_.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=u,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,u,d,_,S){this._forEachCell(u,d,_,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(u),this.bboxes.push(d),this.bboxes.push(_),this.bboxes.push(S)}insertCircle(t,u,d,_){this._forEachCell(u-_,d-_,u+_,d+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(u),this.circles.push(d),this.circles.push(_)}_insertBoxCell(t,u,d,_,S,A){this.boxCells[S].push(A)}_insertCircleCell(t,u,d,_,S,A){this.circleCells[S].push(A)}_query(t,u,d,_,S,A,I){if(d<0||t>this.width||_<0||u>this.height)return[];const O=[];if(t<=0&&u<=0&&this.width<=d&&this.height<=_){if(S)return[{key:null,x1:t,y1:u,x2:d,y2:_}];for(let B=0;B<this.boxKeys.length;B++)O.push({key:this.boxKeys[B],x1:this.bboxes[4*B],y1:this.bboxes[4*B+1],x2:this.bboxes[4*B+2],y2:this.bboxes[4*B+3]});for(let B=0;B<this.circleKeys.length;B++){const U=this.circles[3*B],G=this.circles[3*B+1],V=this.circles[3*B+2];O.push({key:this.circleKeys[B],x1:U-V,y1:G-V,x2:U+V,y2:G+V})}}else this._forEachCell(t,u,d,_,this._queryCell,O,{hitTest:S,overlapMode:A,seenUids:{box:{},circle:{}}},I);return O}query(t,u,d,_){return this._query(t,u,d,_,!1,null)}hitTest(t,u,d,_,S,A){return this._query(t,u,d,_,!0,S,A).length>0}hitTestCircle(t,u,d,_,S){const A=t-d,I=t+d,O=u-d,B=u+d;if(I<0||A>this.width||B<0||O>this.height)return!1;const U=[];return this._forEachCell(A,O,I,B,this._queryCellCircle,U,{hitTest:!0,overlapMode:_,circle:{x:t,y:u,radius:d},seenUids:{box:{},circle:{}}},S),U.length>0}_queryCell(t,u,d,_,S,A,I,O){const{seenUids:B,hitTest:U,overlapMode:G}=I,V=this.boxCells[S];if(V!==null){const ae=this.bboxes;for(const ce of V)if(!B.box[ce]){B.box[ce]=!0;const he=4*ce,fe=this.boxKeys[ce];if(t<=ae[he+2]&&u<=ae[he+3]&&d>=ae[he+0]&&_>=ae[he+1]&&(!O||O(fe))&&(!U||!Yn(G,fe.overlapMode))&&(A.push({key:fe,x1:ae[he],y1:ae[he+1],x2:ae[he+2],y2:ae[he+3]}),U))return!0}}const Q=this.circleCells[S];if(Q!==null){const ae=this.circles;for(const ce of Q)if(!B.circle[ce]){B.circle[ce]=!0;const he=3*ce,fe=this.circleKeys[ce];if(this._circleAndRectCollide(ae[he],ae[he+1],ae[he+2],t,u,d,_)&&(!O||O(fe))&&(!U||!Yn(G,fe.overlapMode))){const pe=ae[he],be=ae[he+1],me=ae[he+2];if(A.push({key:fe,x1:pe-me,y1:be-me,x2:pe+me,y2:be+me}),U)return!0}}}return!1}_queryCellCircle(t,u,d,_,S,A,I,O){const{circle:B,seenUids:U,overlapMode:G}=I,V=this.boxCells[S];if(V!==null){const ae=this.bboxes;for(const ce of V)if(!U.box[ce]){U.box[ce]=!0;const he=4*ce,fe=this.boxKeys[ce];if(this._circleAndRectCollide(B.x,B.y,B.radius,ae[he+0],ae[he+1],ae[he+2],ae[he+3])&&(!O||O(fe))&&!Yn(G,fe.overlapMode))return A.push(!0),!0}}const Q=this.circleCells[S];if(Q!==null){const ae=this.circles;for(const ce of Q)if(!U.circle[ce]){U.circle[ce]=!0;const he=3*ce,fe=this.circleKeys[ce];if(this._circlesCollide(ae[he],ae[he+1],ae[he+2],B.x,B.y,B.radius)&&(!O||O(fe))&&!Yn(G,fe.overlapMode))return A.push(!0),!0}}}_forEachCell(t,u,d,_,S,A,I,O){const B=this._convertToXCellCoord(t),U=this._convertToYCellCoord(u),G=this._convertToXCellCoord(d),V=this._convertToYCellCoord(_);for(let Q=B;Q<=G;Q++)for(let ae=U;ae<=V;ae++)if(S.call(this,t,u,d,_,this.xCellCount*ae+Q,A,I,O))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,u,d,_,S,A){const I=_-t,O=S-u,B=d+A;return B*B>I*I+O*O}_circleAndRectCollide(t,u,d,_,S,A,I){const O=(A-_)/2,B=Math.abs(t-(_+O));if(B>O+d)return!1;const U=(I-S)/2,G=Math.abs(u-(S+U));if(G>U+d)return!1;if(B<=O||G<=U)return!0;const V=B-O,Q=G-U;return V*V+Q*Q<=d*d}}function Kr(b,t,u){const d=c.L();if(!b){const{vecSouth:G,vecEast:V}=sr(t),Q=E();Q[0]=V[0],Q[1]=V[1],Q[2]=G[0],Q[3]=G[1],_=Q,(U=(A=(S=Q)[0])*(B=S[3])-(O=S[2])*(I=S[1]))&&(_[0]=B*(U=1/U),_[1]=-I*U,_[2]=-O*U,_[3]=A*U),d[0]=Q[0],d[1]=Q[1],d[4]=Q[2],d[5]=Q[3]}var _,S,A,I,O,B,U;return c.N(d,d,[1/u,1/u,1]),d}function tr(b,t,u,d){if(b){const _=c.L();if(!t){const{vecSouth:S,vecEast:A}=sr(u);_[0]=A[0],_[1]=A[1],_[4]=S[0],_[5]=S[1]}return c.N(_,_,[d,d,1]),_}return u.pixelsToClipSpaceMatrix}function sr(b){const t=Math.cos(b.rollInRadians),u=Math.sin(b.rollInRadians),d=Math.cos(b.pitchInRadians),_=Math.cos(b.bearingInRadians),S=Math.sin(b.bearingInRadians),A=c.ar();A[0]=-_*d*u-S*t,A[1]=-S*d*u+_*t;const I=c.as(A);I<1e-9?c.at(A):c.au(A,A,1/I);const O=c.ar();O[0]=_*d*t-S*u,O[1]=S*d*t+_*u;const B=c.as(O);return B<1e-9?c.at(O):c.au(O,O,1/B),{vecEast:O,vecSouth:A}}function pn(b,t,u,d){let _;d?(_=[b,t,d(b,t),1],c.aw(_,_,u)):(_=[b,t,0,1],cl(_,_,u));const S=_[3];return{point:new c.P(_[0]/S,_[1]/S),signedDistanceFromCamera:S,isOccluded:!1}}function vt(b,t){return .5+b/t*.5}function Ii(b,t){return b.x>=-t[0]&&b.x<=t[0]&&b.y>=-t[1]&&b.y<=t[1]}function Cn(b,t,u,d,_,S,A,I,O,B,U,G,V){const Q=u?b.textSizeData:b.iconSizeData,ae=c.an(Q,t.transform.zoom),ce=[256/t.width*2+1,256/t.height*2+1],he=u?b.text.dynamicLayoutVertexArray:b.icon.dynamicLayoutVertexArray;he.clear();const fe=b.lineVertexArray,pe=u?b.text.placedSymbolArray:b.icon.placedSymbolArray,be=t.transform.width/t.transform.height;let me=!1;for(let we=0;we<pe.length;we++){const Ee=pe.get(we);if(Ee.hidden||Ee.writingMode===c.ao.vertical&&!me){Mo(Ee.numGlyphs,he);continue}me=!1;const ge=new c.P(Ee.anchorX,Ee.anchorY),Ie={getElevation:V,pitchedLabelPlaneMatrix:d,lineVertexArray:fe,pitchWithMap:S,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:t.transform,tileAnchorPoint:ge,unwrappedTileID:O,width:B,height:U,translation:G},Ze=mn(Ee.anchorX,Ee.anchorY,Ie);if(!Ii(Ze.point,ce)){Mo(Ee.numGlyphs,he);continue}const Fe=vt(t.transform.cameraToCenterDistance,Ze.signedDistanceFromCamera),Ve=c.ap(Q,ae,Ee),Xe=S?Ve*t.transform.getPitchedTextCorrection(Ee.anchorX,Ee.anchorY,O)/Fe:Ve*Fe,Pt=Mt({projectionContext:Ie,pitchedLabelPlaneMatrixInverse:_,symbol:Ee,fontSize:Xe,flip:!1,keepUpright:A,glyphOffsetArray:b.glyphOffsetArray,dynamicLayoutVertexArray:he,aspectRatio:be,rotateToLine:I});me=Pt.useVertical,(Pt.notEnoughRoom||me||Pt.needsFlipping&&Mt({projectionContext:Ie,pitchedLabelPlaneMatrixInverse:_,symbol:Ee,fontSize:Xe,flip:!0,keepUpright:A,glyphOffsetArray:b.glyphOffsetArray,dynamicLayoutVertexArray:he,aspectRatio:be,rotateToLine:I}).notEnoughRoom)&&Mo(Ee.numGlyphs,he)}u?b.text.dynamicLayoutVertexBuffer.updateData(he):b.icon.dynamicLayoutVertexBuffer.updateData(he)}function Yo(b,t,u,d,_,S,A,I){const O=S.glyphStartIndex+S.numGlyphs,B=S.lineStartIndex,U=S.lineStartIndex+S.lineLength,G=t.getoffsetX(S.glyphStartIndex),V=t.getoffsetX(O-1),Q=da(b*G,u,d,_,S.segment,B,U,I,A);if(!Q)return null;const ae=da(b*V,u,d,_,S.segment,B,U,I,A);return ae?I.projectionCache.anyProjectionOccluded?null:{first:Q,last:ae}:null}function Eo(b,t,u,d){return b===c.ao.horizontal&&Math.abs(u.y-t.y)>Math.abs(u.x-t.x)*d?{useVertical:!0}:(b===c.ao.vertical?t.y<u.y:t.x>u.x)?{needsFlipping:!0}:null}function Mt(b){const{projectionContext:t,pitchedLabelPlaneMatrixInverse:u,symbol:d,fontSize:_,flip:S,keepUpright:A,glyphOffsetArray:I,dynamicLayoutVertexArray:O,aspectRatio:B,rotateToLine:U}=b,G=_/24,V=d.lineOffsetX*G,Q=d.lineOffsetY*G;let ae;if(d.numGlyphs>1){const ce=d.glyphStartIndex+d.numGlyphs,he=d.lineStartIndex,fe=d.lineStartIndex+d.lineLength,pe=Yo(G,I,V,Q,S,d,U,t);if(!pe)return{notEnoughRoom:!0};const be=Wa(pe.first.point.x,pe.first.point.y,t,u),me=Wa(pe.last.point.x,pe.last.point.y,t,u);if(A&&!S){const we=Eo(d.writingMode,be,me,B);if(we)return we}ae=[pe.first];for(let we=d.glyphStartIndex+1;we<ce-1;we++){const Ee=da(G*I.getoffsetX(we),V,Q,S,d.segment,he,fe,t,U);if(!Ee)return{notEnoughRoom:!0};ae.push(Ee)}ae.push(pe.last)}else{if(A&&!S){const he=Fn(t.tileAnchorPoint.x,t.tileAnchorPoint.y,t).point,fe=d.lineStartIndex+d.segment+1,pe=new c.P(t.lineVertexArray.getx(fe),t.lineVertexArray.gety(fe)),be=Fn(pe.x,pe.y,t),me=be.signedDistanceFromCamera>0?be.point:mr(t.tileAnchorPoint,pe,he,1,t),we=Wa(he.x,he.y,t,u),Ee=Wa(me.x,me.y,t,u),ge=Eo(d.writingMode,we,Ee,B);if(ge)return ge}const ce=da(G*I.getoffsetX(d.glyphStartIndex),V,Q,S,d.segment,d.lineStartIndex,d.lineStartIndex+d.lineLength,t,U);if(!ce||t.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ae=[ce]}for(const ce of ae)c.av(O,ce.point,ce.angle);return{}}function mr(b,t,u,d,_){const S=b.add(b.sub(t)._unit()),A=Fn(S.x,S.y,_).point,I=u.sub(A);return u.add(I._mult(d/I.mag()))}function cr(b,t,u){const d=t.projectionCache;if(d.projections[b])return d.projections[b];const _=new c.P(t.lineVertexArray.getx(b),t.lineVertexArray.gety(b)),S=Fn(_.x,_.y,t);if(S.signedDistanceFromCamera>0)return d.projections[b]=S.point,d.anyProjectionOccluded=d.anyProjectionOccluded||S.isOccluded,S.point;const A=b-u.direction;return mr(u.distanceFromAnchor===0?t.tileAnchorPoint:new c.P(t.lineVertexArray.getx(A),t.lineVertexArray.gety(A)),_,u.previousVertex,u.absOffsetX-u.distanceFromAnchor+1,t)}function Fn(b,t,u){const d=b+u.translation[0],_=t+u.translation[1];let S;return u.pitchWithMap?(S=pn(d,_,u.pitchedLabelPlaneMatrix,u.getElevation),S.isOccluded=!1):(S=u.transform.projectTileCoordinates(d,_,u.unwrappedTileID,u.getElevation),S.point.x=(.5*S.point.x+.5)*u.width,S.point.y=(.5*-S.point.y+.5)*u.height),S}function Wa(b,t,u,d){if(u.pitchWithMap){const _=[b,t,0,1];return c.aw(_,_,d),u.transform.projectTileCoordinates(_[0]/_[3],_[1]/_[3],u.unwrappedTileID,u.getElevation).point}return{x:b/u.width*2-1,y:1-t/u.height*2}}function mn(b,t,u){return u.transform.projectTileCoordinates(b,t,u.unwrappedTileID,u.getElevation)}function gr(b,t,u){return b._unit()._perp()._mult(t*u)}function oc(b,t,u,d,_,S,A,I,O){if(I.projectionCache.offsets[b])return I.projectionCache.offsets[b];const B=u.add(t);if(b+O.direction<d||b+O.direction>=_)return I.projectionCache.offsets[b]=B,B;const U=cr(b+O.direction,I,O),G=gr(U.sub(u),A,O.direction),V=u.add(G),Q=U.add(G);return I.projectionCache.offsets[b]=c.ax(S,B,V,Q)||B,I.projectionCache.offsets[b]}function da(b,t,u,d,_,S,A,I,O){const B=d?b-t:b+t;let U=B>0?1:-1,G=0;d&&(U*=-1,G=Math.PI),U<0&&(G+=Math.PI);let V,Q=U>0?S+_:S+_+1;I.projectionCache.cachedAnchorPoint?V=I.projectionCache.cachedAnchorPoint:(V=Fn(I.tileAnchorPoint.x,I.tileAnchorPoint.y,I).point,I.projectionCache.cachedAnchorPoint=V);let ae,ce,he=V,fe=V,pe=0,be=0;const me=Math.abs(B),we=[];let Ee;for(;pe+be<=me;){if(Q+=U,Q<S||Q>=A)return null;pe+=be,fe=he,ce=ae;const Ze={absOffsetX:me,direction:U,distanceFromAnchor:pe,previousVertex:fe};if(he=cr(Q,I,Ze),u===0)we.push(fe),Ee=he.sub(fe);else{let Fe;const Ve=he.sub(fe);Fe=Ve.mag()===0?gr(cr(Q+U,I,Ze).sub(he),u,U):gr(Ve,u,U),ce||(ce=fe.add(Fe)),ae=oc(Q,Fe,he,S,A,ce,u,I,Ze),we.push(ce),Ee=ae.sub(ce)}be=Ee.mag()}const ge=Ee._mult((me-pe)/be)._add(ce||fe),Ie=G+Math.atan2(he.y-fe.y,he.x-fe.x);return we.push(ge),{point:ge,angle:O?Ie:0,path:we}}const Qo=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Mo(b,t){for(let u=0;u<b;u++){const d=t.length;t.resize(d+4),t.float32.set(Qo,3*d)}}function cl(b,t,u){const d=t[0],_=t[1];return b[0]=u[0]*d+u[4]*_+u[12],b[1]=u[1]*d+u[5]*_+u[13],b[3]=u[3]*d+u[7]*_+u[15],b}const Tn=100;class ph{constructor(t,u=new ri(t.width+200,t.height+200,25),d=new ri(t.width+200,t.height+200,25)){this.transform=t,this.grid=u,this.ignoredGrid=d,this.pitchFactor=Math.cos(t.pitch*Math.PI/180)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+Tn,this.screenBottomBoundary=t.height+Tn,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,u,d,_,S,A,I,O,B,U,G,V){const Q=this.projectAndGetPerspectiveRatio(t.anchorPointX+O[0],t.anchorPointY+O[1],S,U,V),ae=d*Q.perspectiveRatio;let ce;if(A||I)ce=this._projectCollisionBox(t,ae,_,S,A,I,O,Q,U,G,V);else{const Ee=Q.x+(G?G.x*ae:0),ge=Q.y+(G?G.y*ae:0);ce={allPointsOccluded:!1,box:[Ee+t.x1*ae,ge+t.y1*ae,Ee+t.x2*ae,ge+t.y2*ae]}}const[he,fe,pe,be]=ce.box,me=A?ce.allPointsOccluded:Q.isOccluded;let we=me;return we||(we=Q.perspectiveRatio<this.perspectiveRatioCutoff),we||(we=!this.isInsideGrid(he,fe,pe,be)),we||u!=="always"&&this.grid.hitTest(he,fe,pe,be,u,B)?{box:[he,fe,pe,be],placeable:!1,offscreen:!1,occluded:me}:{box:[he,fe,pe,be],placeable:!0,offscreen:this.isOffscreen(he,fe,pe,be),occluded:me}}placeCollisionCircles(t,u,d,_,S,A,I,O,B,U,G,V,Q,ae){const ce=[],he=new c.P(u.anchorX,u.anchorY),fe=this.getPerspectiveRatio(he.x,he.y,A,ae),pe=(B?S*this.transform.getPitchedTextCorrection(u.anchorX,u.anchorY,A)/fe:S*fe)/c.aB,be={getElevation:ae,pitchedLabelPlaneMatrix:I,lineVertexArray:d,pitchWithMap:B,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:he,unwrappedTileID:A,width:this.transform.width,height:this.transform.height,translation:Q},me=Yo(pe,_,u.lineOffsetX*pe,u.lineOffsetY*pe,!1,u,!1,be);let we=!1,Ee=!1,ge=!0;if(me){const Ie=.5*G*fe+V,Ze=new c.P(-100,-100),Fe=new c.P(this.screenRightBoundary,this.screenBottomBoundary),Ve=new Ur,Xe=me.first,Pt=me.last;let xt=[];for(let vr=Xe.path.length-1;vr>=1;vr--)xt.push(Xe.path[vr]);for(let vr=1;vr<Pt.path.length;vr++)xt.push(Pt.path[vr]);const lt=2.5*Ie;if(B){const vr=this.projectPathToScreenSpace(xt,be);xt=vr.some((Or=>Or.signedDistanceFromCamera<=0))?[]:vr.map((Or=>Or.point))}let jt=[];if(xt.length>0){const vr=xt[0].clone(),Or=xt[0].clone();for(let hn=1;hn<xt.length;hn++)vr.x=Math.min(vr.x,xt[hn].x),vr.y=Math.min(vr.y,xt[hn].y),Or.x=Math.max(Or.x,xt[hn].x),Or.y=Math.max(Or.y,xt[hn].y);jt=vr.x>=Ze.x&&Or.x<=Fe.x&&vr.y>=Ze.y&&Or.y<=Fe.y?[xt]:Or.x<Ze.x||vr.x>Fe.x||Or.y<Ze.y||vr.y>Fe.y?[]:c.ay([xt],Ze.x,Ze.y,Fe.x,Fe.y)}for(const vr of jt){Ve.reset(vr,.25*Ie);let Or=0;Or=Ve.length<=.5*Ie?1:Math.ceil(Ve.paddedLength/lt)+1;for(let hn=0;hn<Or;hn++){const Wr=hn/Math.max(Or-1,1),Zr=Ve.lerp(Wr),rn=Zr.x+Tn,Qr=Zr.y+Tn;ce.push(rn,Qr,Ie,0);const Xr=rn-Ie,Er=Qr-Ie,ei=rn+Ie,Hn=Qr+Ie;if(ge=ge&&this.isOffscreen(Xr,Er,ei,Hn),Ee=Ee||this.isInsideGrid(Xr,Er,ei,Hn),t!=="always"&&this.grid.hitTestCircle(rn,Qr,Ie,t,U)&&(we=!0,!O))return{circles:[],offscreen:!1,collisionDetected:we}}}}return{circles:!O&&we||!Ee||fe<this.perspectiveRatioCutoff?[]:ce,offscreen:ge,collisionDetected:we}}projectPathToScreenSpace(t,u){const d=(function(_,S){const A=c.L();return c.aq(A,S.pitchedLabelPlaneMatrix),_.map((I=>{const O=pn(I.x,I.y,A,S.getElevation),B=S.transform.projectTileCoordinates(O.point.x,O.point.y,S.unwrappedTileID,S.getElevation);return B.point.x=(.5*B.point.x+.5)*S.width,B.point.y=(.5*-B.point.y+.5)*S.height,B}))})(t,u);return(function(_){let S=0,A=0,I=0,O=0;for(let B=0;B<_.length;B++)_[B].isOccluded?(I=B+1,O=0):(O++,O>A&&(A=O,S=I));return _.slice(S,S+A)})(d)}queryRenderedSymbols(t){if(t.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[],d=new c.a2;for(const G of t){const V=new c.P(G.x+Tn,G.y+Tn);d.extend(V),u.push(V)}const{minX:_,minY:S,maxX:A,maxY:I}=d,O=this.grid.query(_,S,A,I).concat(this.ignoredGrid.query(_,S,A,I)),B={},U={};for(const G of O){const V=G.key;if(B[V.bucketInstanceId]===void 0&&(B[V.bucketInstanceId]={}),B[V.bucketInstanceId][V.featureIndex])continue;const Q=[new c.P(G.x1,G.y1),new c.P(G.x2,G.y1),new c.P(G.x2,G.y2),new c.P(G.x1,G.y2)];c.az(u,Q)&&(B[V.bucketInstanceId][V.featureIndex]=!0,U[V.bucketInstanceId]===void 0&&(U[V.bucketInstanceId]=[]),U[V.bucketInstanceId].push(V.featureIndex))}return U}insertCollisionBox(t,u,d,_,S,A){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:S,collisionGroupID:A,overlapMode:u},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,u,d,_,S,A){const I=d?this.ignoredGrid:this.grid,O={bucketInstanceId:_,featureIndex:S,collisionGroupID:A,overlapMode:u};for(let B=0;B<t.length;B+=4)I.insertCircle(O,t[B],t[B+1],t[B+2])}projectAndGetPerspectiveRatio(t,u,d,_,S){if(S){let A;_?(A=[t,u,_(t,u),1],c.aw(A,A,S)):(A=[t,u,0,1],cl(A,A,S));const I=A[3];return{x:(A[0]/I+1)/2*this.transform.width+Tn,y:(-A[1]/I+1)/2*this.transform.height+Tn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/I*.5,isOccluded:!1,signedDistanceFromCamera:I}}{const A=this.transform.projectTileCoordinates(t,u,d,_);return{x:(A.point.x+1)/2*this.transform.width+Tn,y:(1-A.point.y)/2*this.transform.height+Tn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/A.signedDistanceFromCamera*.5,isOccluded:A.isOccluded,signedDistanceFromCamera:A.signedDistanceFromCamera}}}getPerspectiveRatio(t,u,d,_){const S=this.transform.projectTileCoordinates(t,u,d,_);return .5+this.transform.cameraToCenterDistance/S.signedDistanceFromCamera*.5}isOffscreen(t,u,d,_){return d<Tn||t>=this.screenRightBoundary||_<Tn||u>this.screenBottomBoundary}isInsideGrid(t,u,d,_){return d>=0&&t<this.gridRightBoundary&&_>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const t=c.ag([]);return c.M(t,t,[-100,-100,0]),t}_projectCollisionBox(t,u,d,_,S,A,I,O,B,U,G){let V=1,Q=0,ae=0,ce=1;const he=t.anchorPointX+I[0],fe=t.anchorPointY+I[1];if(A&&!S){const xt=this.projectAndGetPerspectiveRatio(he+1,fe,_,B,G),lt=xt.x-O.x,jt=Math.atan((xt.y-O.y)/lt)+(lt<0?Math.PI:0),vr=Math.sin(jt),Or=Math.cos(jt);V=Or,Q=vr,ae=-vr,ce=Or}else if(!A&&S){const xt=sr(this.transform);V=xt.vecEast[0],Q=xt.vecEast[1],ae=xt.vecSouth[0],ce=xt.vecSouth[1]}let pe=O.x,be=O.y,me=u;S&&(pe=he,be=fe,me=Math.pow(2,-(this.transform.zoom-d.overscaledZ)),me*=this.transform.getPitchedTextCorrection(he,fe,_),U||(me*=c.ah(.5+O.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),U&&(pe+=V*U.x*me+ae*U.y*me,be+=Q*U.x*me+ce*U.y*me);const we=t.x1*me,Ee=t.x2*me,ge=(we+Ee)/2,Ie=t.y1*me,Ze=t.y2*me,Fe=(Ie+Ze)/2,Ve=[{offsetX:we,offsetY:Ie},{offsetX:ge,offsetY:Ie},{offsetX:Ee,offsetY:Ie},{offsetX:Ee,offsetY:Fe},{offsetX:Ee,offsetY:Ze},{offsetX:ge,offsetY:Ze},{offsetX:we,offsetY:Ze},{offsetX:we,offsetY:Fe}];let Xe=[];for(const{offsetX:xt,offsetY:lt}of Ve)Xe.push(new c.P(pe+V*xt+ae*lt,be+Q*xt+ce*lt));let Pt=!1;if(S){const xt=Xe.map((lt=>this.projectAndGetPerspectiveRatio(lt.x,lt.y,_,B,G)));Pt=xt.some((lt=>!lt.isOccluded)),Xe=xt.map((lt=>new c.P(lt.x,lt.y)))}else Pt=!0;return{box:c.aA(Xe),allPointsOccluded:!Pt}}}class xi{constructor(t,u,d,_){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?u:-u))):_&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class $r{constructor(t,u,d,_,S){this.text=new xi(t?t.text:null,u,d,S),this.icon=new xi(t?t.icon:null,u,_,S)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ro{constructor(t,u,d){this.text=t,this.icon=u,this.skipFade=d}}class hl{constructor(t,u,d,_,S){this.bucketInstanceId=t,this.featureIndex=u,this.sourceLayerIndex=d,this.bucketIndex=_,this.tileID=S}}class mh{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const u=++this.maxGroupID;this.collisionGroups[t]={ID:u,predicate:d=>d.collisionGroupID===u}}return this.collisionGroups[t]}}function Ma(b,t,u,d,_){const{horizontalAlign:S,verticalAlign:A}=c.aH(b);return new c.P(-(S-.5)*t+d[0]*_,-(A-.5)*u+d[1]*_)}class Do{constructor(t,u,d,_,S){this.transform=t.clone(),this.terrain=u,this.collisionIndex=new ph(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new mh(_),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(t){const u=this.terrain;return u?(d,_)=>u.getElevation(t,d,_):null}getBucketParts(t,u,d,_){const S=d.getBucket(u),A=d.latestFeatureIndex;if(!S||!A||u.id!==S.layerIds[0])return;const I=d.collisionBoxArray,O=S.layers[0].layout,B=S.layers[0].paint,U=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),G=d.tileSize/c.$,V=d.tileID.toUnwrapped(),Q=O.get("text-rotation-alignment")==="map",ae=c.aC(d,1,this.transform.zoom),ce=c.aD(this.collisionIndex.transform,d,B.get("text-translate"),B.get("text-translate-anchor")),he=c.aD(this.collisionIndex.transform,d,B.get("icon-translate"),B.get("icon-translate-anchor")),fe=Kr(Q,this.transform,ae);this.retainedQueryData[S.bucketInstanceId]=new hl(S.bucketInstanceId,A,S.sourceLayerIndex,S.index,d.tileID);const pe={bucket:S,layout:O,translationText:ce,translationIcon:he,unwrappedTileID:V,pitchedLabelPlaneMatrix:fe,scale:U,textPixelRatio:G,holdingForFade:d.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:c.an(S.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(S.sourceID)};if(_)for(const be of S.sortKeyRanges){const{sortKey:me,symbolInstanceStart:we,symbolInstanceEnd:Ee}=be;t.push({sortKey:me,symbolInstanceStart:we,symbolInstanceEnd:Ee,parameters:pe})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:S.symbolInstances.length,parameters:pe})}attemptAnchorPlacement(t,u,d,_,S,A,I,O,B,U,G,V,Q,ae,ce,he,fe,pe,be,me){const we=c.aE[t.textAnchor],Ee=[t.textOffset0,t.textOffset1],ge=Ma(we,d,_,Ee,S),Ie=this.collisionIndex.placeCollisionBox(u,V,O,B,U,I,A,he,G.predicate,be,ge,me);if((!pe||this.collisionIndex.placeCollisionBox(pe,V,O,B,U,I,A,fe,G.predicate,be,ge,me).placeable)&&Ie.placeable){let Ze;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID].text&&(Ze=this.prevPlacement.variableOffsets[Q.crossTileID].anchor),Q.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Q.crossTileID]={textOffset:Ee,width:d,height:_,anchor:we,textBoxScale:S,prevAnchor:Ze},this.markUsedJustification(ae,we,Q,ce),ae.allowVerticalPlacement&&(this.markUsedOrientation(ae,ce,Q),this.placedOrientations[Q.crossTileID]=ce),{shift:ge,placedGlyphBoxes:Ie}}}placeLayerBucketPart(t,u,d){const{bucket:_,layout:S,translationText:A,translationIcon:I,unwrappedTileID:O,pitchedLabelPlaneMatrix:B,textPixelRatio:U,holdingForFade:G,collisionBoxArray:V,partiallyEvaluatedTextSize:Q,collisionGroup:ae}=t.parameters,ce=S.get("text-optional"),he=S.get("icon-optional"),fe=c.aF(S,"text-overlap","text-allow-overlap"),pe=fe==="always",be=c.aF(S,"icon-overlap","icon-allow-overlap"),me=be==="always",we=S.get("text-rotation-alignment")==="map",Ee=S.get("text-pitch-alignment")==="map",ge=S.get("icon-text-fit")!=="none",Ie=S.get("symbol-z-order")==="viewport-y",Ze=pe&&(me||!_.hasIconData()||he),Fe=me&&(pe||!_.hasTextData()||ce);!_.collisionArrays&&V&&_.deserializeCollisionBoxes(V);const Ve=this.retainedQueryData[_.bucketInstanceId].tileID,Xe=this._getTerrainElevationFunc(Ve),Pt=this.transform.getFastPathSimpleProjectionMatrix(Ve),xt=(lt,jt,vr)=>{var Or,hn;if(u[lt.crossTileID])return;if(G)return void(this.placements[lt.crossTileID]=new Ro(!1,!1,!1));let Wr=!1,Zr=!1,rn=!0,Qr=null,Xr={box:null,placeable:!1,offscreen:null,occluded:!1},Er={placeable:!1},ei=null,Hn=null,ra=null,Ks=0,ds=0,na=0;jt.textFeatureIndex?Ks=jt.textFeatureIndex:lt.useRuntimeCollisionCircles&&(Ks=lt.featureIndex),jt.verticalTextFeatureIndex&&(ds=jt.verticalTextFeatureIndex);const ps=jt.textBox;if(ps){const gi=Fr=>{let yn=c.ao.horizontal;if(_.allowVerticalPlacement&&!Fr&&this.prevPlacement){const Ni=this.prevPlacement.placedOrientations[lt.crossTileID];Ni&&(this.placedOrientations[lt.crossTileID]=Ni,yn=Ni,this.markUsedOrientation(_,yn,lt))}return yn},Uo=(Fr,yn)=>{if(_.allowVerticalPlacement&&lt.numVerticalGlyphVertices>0&&jt.verticalTextBox){for(const Ni of _.writingModes)if(Ni===c.ao.vertical?(Xr=yn(),Er=Xr):Xr=Fr(),Xr&&Xr.placeable)break}else Xr=Fr()},$o=lt.textAnchorOffsetStartIndex,Qs=lt.textAnchorOffsetEndIndex;if(Qs===$o){const Fr=(yn,Ni)=>{const Mn=this.collisionIndex.placeCollisionBox(yn,fe,U,Ve,O,Ee,we,A,ae.predicate,Xe,void 0,Pt);return Mn&&Mn.placeable&&(this.markUsedOrientation(_,Ni,lt),this.placedOrientations[lt.crossTileID]=Ni),Mn};Uo((()=>Fr(ps,c.ao.horizontal)),(()=>{const yn=jt.verticalTextBox;return _.allowVerticalPlacement&&lt.numVerticalGlyphVertices>0&&yn?Fr(yn,c.ao.vertical):{box:null,offscreen:null}})),gi(Xr&&Xr.placeable)}else{let Fr=c.aE[(hn=(Or=this.prevPlacement)===null||Or===void 0?void 0:Or.variableOffsets[lt.crossTileID])===null||hn===void 0?void 0:hn.anchor];const yn=(Mn,jh,Bh)=>{const Fu=Mn.x2-Mn.x1,vo=Mn.y2-Mn.y1,Vo=lt.textBoxScale,kn=ge&&be==="never"?jh:null;let Rn=null,Ho=fe==="never"?1:2,gs="never";Fr&&Ho++;for(let ys=0;ys<Ho;ys++){for(let Ya=$o;Ya<Qs;Ya++){const Ln=_.textAnchorOffsets.get(Ya);if(Fr&&Ln.textAnchor!==Fr)continue;const zl=this.attemptAnchorPlacement(Ln,Mn,Fu,vo,Vo,we,Ee,U,Ve,O,ae,gs,lt,_,Bh,A,I,kn,Xe);if(zl&&(Rn=zl.placedGlyphBoxes,Rn&&Rn.placeable))return Wr=!0,Qr=zl.shift,Rn}Fr?Fr=null:gs=fe}return d&&!Rn&&(Rn={box:this.collisionIndex.placeCollisionBox(ps,"always",U,Ve,O,Ee,we,A,ae.predicate,Xe,void 0,Pt).box,offscreen:!1,placeable:!1,occluded:!1}),Rn};Uo((()=>yn(ps,jt.iconBox,c.ao.horizontal)),(()=>{const Mn=jt.verticalTextBox;return _.allowVerticalPlacement&&(!Xr||!Xr.placeable)&&lt.numVerticalGlyphVertices>0&&Mn?yn(Mn,jt.verticalIconBox,c.ao.vertical):{box:null,occluded:!0,offscreen:null}})),Xr&&(Wr=Xr.placeable,rn=Xr.offscreen);const Ni=gi(Xr&&Xr.placeable);if(!Wr&&this.prevPlacement){const Mn=this.prevPlacement.variableOffsets[lt.crossTileID];Mn&&(this.variableOffsets[lt.crossTileID]=Mn,this.markUsedJustification(_,Mn.anchor,lt,Ni))}}}if(ei=Xr,Wr=ei&&ei.placeable,rn=ei&&ei.offscreen,lt.useRuntimeCollisionCircles){const gi=_.text.placedSymbolArray.get(lt.centerJustifiedTextSymbolIndex),Uo=c.ap(_.textSizeData,Q,gi),$o=S.get("text-padding");Hn=this.collisionIndex.placeCollisionCircles(fe,gi,_.lineVertexArray,_.glyphOffsetArray,Uo,O,B,d,Ee,ae.predicate,lt.collisionCircleDiameter,$o,A,Xe),Hn.circles.length&&Hn.collisionDetected&&!d&&c.w("Collisions detected, but collision boxes are not shown"),Wr=pe||Hn.circles.length>0&&!Hn.collisionDetected,rn=rn&&Hn.offscreen}if(jt.iconFeatureIndex&&(na=jt.iconFeatureIndex),jt.iconBox){const gi=Uo=>this.collisionIndex.placeCollisionBox(Uo,be,U,Ve,O,Ee,we,I,ae.predicate,Xe,ge&&Qr?Qr:void 0,Pt);Er&&Er.placeable&&jt.verticalIconBox?(ra=gi(jt.verticalIconBox),Zr=ra.placeable):(ra=gi(jt.iconBox),Zr=ra.placeable),rn=rn&&ra.offscreen}const Ys=ce||lt.numHorizontalGlyphVertices===0&&lt.numVerticalGlyphVertices===0,zc=he||lt.numIconVertices===0;Ys||zc?zc?Ys||(Zr=Zr&&Wr):Wr=Zr&&Wr:Zr=Wr=Zr&&Wr;const ms=Zr&&ra.placeable;if(Wr&&ei.placeable&&this.collisionIndex.insertCollisionBox(ei.box,fe,S.get("text-ignore-placement"),_.bucketInstanceId,Er&&Er.placeable&&ds?ds:Ks,ae.ID),ms&&this.collisionIndex.insertCollisionBox(ra.box,be,S.get("icon-ignore-placement"),_.bucketInstanceId,na,ae.ID),Hn&&Wr&&this.collisionIndex.insertCollisionCircles(Hn.circles,fe,S.get("text-ignore-placement"),_.bucketInstanceId,Ks,ae.ID),d&&this.storeCollisionData(_.bucketInstanceId,vr,jt,ei,ra,Hn),lt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(_.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[lt.crossTileID]=new Ro((Wr||Ze)&&!ei?.occluded,(Zr||Fe)&&!ra?.occluded,rn||_.justReloaded),u[lt.crossTileID]=!0};if(Ie){if(t.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const lt=_.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let jt=lt.length-1;jt>=0;--jt){const vr=lt[jt];xt(_.symbolInstances.get(vr),_.collisionArrays[vr],vr)}}else for(let lt=t.symbolInstanceStart;lt<t.symbolInstanceEnd;lt++)xt(_.symbolInstances.get(lt),_.collisionArrays[lt],lt);_.justReloaded=!1}storeCollisionData(t,u,d,_,S,A){if(d.textBox||d.iconBox){let I,O;this.collisionBoxArrays.has(t)?I=this.collisionBoxArrays.get(t):(I=new Map,this.collisionBoxArrays.set(t,I)),I.has(u)?O=I.get(u):(O={text:null,icon:null},I.set(u,O)),d.textBox&&(O.text=_.box),d.iconBox&&(O.icon=S.box)}if(A){let I=this.collisionCircleArrays[t];I===void 0&&(I=this.collisionCircleArrays[t]=[]);for(let O=0;O<A.circles.length;O+=4)I.push(A.circles[O+0]-Tn),I.push(A.circles[O+1]-Tn),I.push(A.circles[O+2]),I.push(A.collisionDetected?1:0)}}markUsedJustification(t,u,d,_){let S;S=_===c.ao.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[c.aG(u)];const A=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const I of A)I>=0&&(t.text.placedSymbolArray.get(I).crossTileID=S>=0&&I!==S?0:d.crossTileID)}markUsedOrientation(t,u,d){const _=u===c.ao.horizontal||u===c.ao.horizontalOnly?u:0,S=u===c.ao.vertical?u:0,A=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const I of A)t.text.placedSymbolArray.get(I).placedOrientation=_;d.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=S)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let d=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const _=u?u.symbolFadeChange(t):1,S=u?u.opacities:{},A=u?u.variableOffsets:{},I=u?u.placedOrientations:{};for(const O in this.placements){const B=this.placements[O],U=S[O];U?(this.opacities[O]=new $r(U,_,B.text,B.icon),d=d||B.text!==U.text.placed||B.icon!==U.icon.placed):(this.opacities[O]=new $r(null,_,B.text,B.icon,B.skipFade),d=d||B.text||B.icon)}for(const O in S){const B=S[O];if(!this.opacities[O]){const U=new $r(B,_,!1,!1);U.isHidden()||(this.opacities[O]=U,d=d||B.text.placed||B.icon.placed)}}for(const O in A)this.variableOffsets[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.variableOffsets[O]=A[O]);for(const O in I)this.placedOrientations[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.placedOrientations[O]=I[O]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=t:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:t)}updateLayerOpacities(t,u){const d={};for(const _ of u){const S=_.getBucket(t);S&&_.latestFeatureIndex&&t.id===S.layerIds[0]&&this.updateBucketOpacities(S,_.tileID,d,_.collisionBoxArray)}}updateBucketOpacities(t,u,d,_){t.hasTextData()&&(t.text.opacityVertexArray.clear(),t.text.hasVisibleVertices=!1),t.hasIconData()&&(t.icon.opacityVertexArray.clear(),t.icon.hasVisibleVertices=!1),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const S=t.layers[0],A=S.layout,I=new $r(null,0,!1,!1,!0),O=A.get("text-allow-overlap"),B=A.get("icon-allow-overlap"),U=S._unevaluatedLayout.hasValue("text-variable-anchor")||S._unevaluatedLayout.hasValue("text-variable-anchor-offset"),G=A.get("text-rotation-alignment")==="map",V=A.get("text-pitch-alignment")==="map",Q=A.get("icon-text-fit")!=="none",ae=new $r(null,0,O&&(B||!t.hasIconData()||A.get("icon-optional")),B&&(O||!t.hasTextData()||A.get("text-optional")),!0);!t.collisionArrays&&_&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(_);const ce=(fe,pe,be)=>{for(let me=0;me<pe/4;me++)fe.opacityVertexArray.emplaceBack(be);fe.hasVisibleVertices=fe.hasVisibleVertices||be!==fu},he=this.collisionBoxArrays.get(t.bucketInstanceId);for(let fe=0;fe<t.symbolInstances.length;fe++){const pe=t.symbolInstances.get(fe),{numHorizontalGlyphVertices:be,numVerticalGlyphVertices:me,crossTileID:we}=pe;let Ee=this.opacities[we];d[we]?Ee=I:Ee||(Ee=ae,this.opacities[we]=Ee),d[we]=!0;const ge=pe.numIconVertices>0,Ie=this.placedOrientations[pe.crossTileID],Ze=Ie===c.ao.vertical,Fe=Ie===c.ao.horizontal||Ie===c.ao.horizontalOnly;if(be>0||me>0){const Xe=hu(Ee.text);ce(t.text,be,Ze?fu:Xe),ce(t.text,me,Fe?fu:Xe);const Pt=Ee.text.isHidden();[pe.rightJustifiedTextSymbolIndex,pe.centerJustifiedTextSymbolIndex,pe.leftJustifiedTextSymbolIndex].forEach((jt=>{jt>=0&&(t.text.placedSymbolArray.get(jt).hidden=Pt||Ze?1:0)})),pe.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(pe.verticalPlacedTextSymbolIndex).hidden=Pt||Fe?1:0);const xt=this.variableOffsets[pe.crossTileID];xt&&this.markUsedJustification(t,xt.anchor,pe,Ie);const lt=this.placedOrientations[pe.crossTileID];lt&&(this.markUsedJustification(t,"left",pe,lt),this.markUsedOrientation(t,lt,pe))}if(ge){const Xe=hu(Ee.icon),Pt=!(Q&&pe.verticalPlacedIconSymbolIndex&&Ze);pe.placedIconSymbolIndex>=0&&(ce(t.icon,pe.numIconVertices,Pt?Xe:fu),t.icon.placedSymbolArray.get(pe.placedIconSymbolIndex).hidden=Ee.icon.isHidden()),pe.verticalPlacedIconSymbolIndex>=0&&(ce(t.icon,pe.numVerticalIconVertices,Pt?fu:Xe),t.icon.placedSymbolArray.get(pe.verticalPlacedIconSymbolIndex).hidden=Ee.icon.isHidden())}const Ve=he&&he.has(fe)?he.get(fe):{text:null,icon:null};if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const Xe=t.collisionArrays[fe];if(Xe){let Pt=new c.P(0,0);if(Xe.textBox||Xe.verticalTextBox){let xt=!0;if(U){const lt=this.variableOffsets[we];lt?(Pt=Ma(lt.anchor,lt.width,lt.height,lt.textOffset,lt.textBoxScale),G&&Pt._rotate(V?-this.transform.bearingInRadians:this.transform.bearingInRadians)):xt=!1}if(Xe.textBox||Xe.verticalTextBox){let lt;Xe.textBox&&(lt=Ze),Xe.verticalTextBox&&(lt=Fe),sc(t.textCollisionBox.collisionVertexArray,Ee.text.placed,!xt||lt,Ve.text,Pt.x,Pt.y)}}if(Xe.iconBox||Xe.verticalIconBox){const xt=!!(!Fe&&Xe.verticalIconBox);let lt;Xe.iconBox&&(lt=xt),Xe.verticalIconBox&&(lt=!xt),sc(t.iconCollisionBox.collisionVertexArray,Ee.icon.placed,lt,Ve.icon,Q?Pt.x:0,Q?Pt.y:0)}}}}if(t.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);t.bucketInstanceId in this.collisionCircleArrays&&(t.collisionCircleArray=this.collisionCircleArrays[t.bucketInstanceId],delete this.collisionCircleArrays[t.bucketInstanceId])}symbolFadeChange(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,u){const d=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*d>t}setStale(){this.stale=!0}}function sc(b,t,u,d,_,S){d&&d.length!==0||(d=[0,0,0,0]);const A=d[0]-Tn,I=d[1]-Tn,O=d[2]-Tn,B=d[3]-Tn;b.emplaceBack(t?1:0,u?1:0,_||0,S||0,A,I),b.emplaceBack(t?1:0,u?1:0,_||0,S||0,O,I),b.emplaceBack(t?1:0,u?1:0,_||0,S||0,O,B),b.emplaceBack(t?1:0,u?1:0,_||0,S||0,A,B)}const Vd=Math.pow(2,25),yf=Math.pow(2,24),wi=Math.pow(2,17),vf=Math.pow(2,16),cm=Math.pow(2,9),gh=Math.pow(2,8),Hd=Math.pow(2,1);function hu(b){if(b.opacity===0&&!b.placed)return 0;if(b.opacity===1&&b.placed)return 4294967295;const t=b.placed?1:0,u=Math.floor(127*b.opacity);return u*Vd+t*yf+u*wi+t*vf+u*cm+t*gh+u*Hd+t}const fu=0;class pa{constructor(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,u,d,_,S){const A=this._bucketParts;for(;this._currentTileIndex<t.length;)if(u.getBucketParts(A,_,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,A.sort(((I,O)=>I.sortKey-O.sortKey)));this._currentPartIndex<A.length;)if(u.placeLayerBucketPart(A[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,S())return!0;return!1}}class lc{constructor(t,u,d,_,S,A,I,O){this.placement=new Do(t,u,A,I,O),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=S,this._done=!1}isDone(){return this._done}continuePlacement(t,u,d){const _=N.now(),S=()=>!this._forceFullPlacement&&N.now()-_>2;for(;this._currentPlacementIndex>=0;){const A=u[t[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(A.type==="symbol"&&(!A.minzoom||A.minzoom<=I)&&(!A.maxzoom||A.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new pa(A)),this._inProgressLayer.continuePlacement(d[A.source],this.placement,this._showCollisionBoxes,A,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const fl=512/c.$/2;class uc{constructor(t,u,d){this.tileID=t,this.bucketInstanceId=d,this._symbolsByKey={};const _=new Map;for(let S=0;S<u.length;S++){const A=u.get(S),I=A.key,O=_.get(I);O?O.push(A):_.set(I,[A])}for(const[S,A]of _){const I={positions:A.map((O=>({x:Math.floor(O.anchorX*fl),y:Math.floor(O.anchorY*fl)}))),crossTileIDs:A.map((O=>O.crossTileID))};if(I.positions.length>128){const O=new c.aI(I.positions.length,16,Uint16Array);for(const{x:B,y:U}of I.positions)O.add(B,U);O.finish(),delete I.positions,I.index=O}this._symbolsByKey[S]=I}}getScaledCoordinates(t,u){const{x:d,y:_,z:S}=this.tileID.canonical,{x:A,y:I,z:O}=u.canonical,B=fl/Math.pow(2,O-S),U=(I*c.$+t.anchorY)*B,G=_*c.$*fl;return{x:Math.floor((A*c.$+t.anchorX)*B-d*c.$*fl),y:Math.floor(U-G)}}findMatches(t,u,d){const _=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let S=0;S<t.length;S++){const A=t.get(S);if(A.crossTileID)continue;const I=this._symbolsByKey[A.key];if(!I)continue;const O=this.getScaledCoordinates(A,u);if(I.index){const B=I.index.range(O.x-_,O.y-_,O.x+_,O.y+_).sort();for(const U of B){const G=I.crossTileIDs[U];if(!d[G]){d[G]=!0,A.crossTileID=G;break}}}else if(I.positions)for(let B=0;B<I.positions.length;B++){const U=I.positions[B],G=I.crossTileIDs[B];if(Math.abs(U.x-O.x)<=_&&Math.abs(U.y-O.y)<=_&&!d[G]){d[G]=!0,A.crossTileID=G;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:t})=>t))}}class Is{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class qd{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const u=Math.round((t-this.lng)/360);if(u!==0)for(const d in this.indexes){const _=this.indexes[d],S={};for(const A in _){const I=_[A];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+u),S[I.tileID.key]=I}this.indexes[d]=S}this.lng=t}addBucket(t,u,d){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let S=0;S<u.symbolInstances.length;S++)u.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const _=this.usedCrossTileIDs[t.overscaledZ];for(const S in this.indexes){const A=this.indexes[S];if(Number(S)>t.overscaledZ)for(const I in A){const O=A[I];O.tileID.isChildOf(t)&&O.findMatches(u.symbolInstances,t,_)}else{const I=A[t.scaledTo(Number(S)).key];I&&I.findMatches(u.symbolInstances,t,_)}}for(let S=0;S<u.symbolInstances.length;S++){const A=u.symbolInstances.get(S);A.crossTileID||(A.crossTileID=d.generate(),_[A.crossTileID]=!0)}return this.indexes[t.overscaledZ]===void 0&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new uc(t,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(t,u){for(const d of u.getCrossTileIDsLists())for(const _ of d)delete this.usedCrossTileIDs[t][_]}removeStaleBuckets(t){let u=!1;for(const d in this.indexes){const _=this.indexes[d];for(const S in _)t[_[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,_[S]),delete _[S],u=!0)}return u}}class dl{constructor(){this.layerIndexes={},this.crossTileIDs=new Is,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,u,d){let _=this.layerIndexes[t.id];_===void 0&&(_=this.layerIndexes[t.id]=new qd);let S=!1;const A={};_.handleWrapJump(d);for(const I of u){const O=I.getBucket(t);O&&t.id===O.layerIds[0]&&(O.bucketInstanceId||(O.bucketInstanceId=++this.maxBucketInstanceId),_.addBucket(I.tileID,O,this.crossTileIDs)&&(S=!0),A[O.bucketInstanceId]=!0)}return _.removeStaleBuckets(A)&&(S=!0),S}pruneUnusedLayers(t){const u={};t.forEach((d=>{u[d]=!0}));for(const d in this.layerIndexes)u[d]||delete this.layerIndexes[d]}}var Io="void main() {fragColor=vec4(1.0);}";const io={prelude:xr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:xr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:xr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:xr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:xr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:xr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:xr(Io,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:xr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:xr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:xr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:xr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:xr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:xr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:xr(Io,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:xr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:xr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:xr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:xr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:xr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:xr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:xr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:xr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:xr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:xr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:xr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:xr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:xr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:xr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:xr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:xr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:xr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:xr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:xr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:xr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:xr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:xr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function xr(b,t){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=t.match(/in ([\w]+) ([\w]+)/g),_=b.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=S?S.concat(_):_,I={};return{fragmentSource:b=b.replace(u,((O,B,U,G,V)=>(I[V]=!0,B==="define"?`
#ifndef HAS_UNIFORM_u_${V}
in ${U} ${G} ${V};
#else
uniform ${U} ${G} u_${V};
#endif
`:`
#ifdef HAS_UNIFORM_u_${V}
    ${U} ${G} ${V} = u_${V};
#endif
`))),vertexSource:t=t.replace(u,((O,B,U,G,V)=>{const Q=G==="float"?"vec2":"vec4",ae=V.match(/color/)?"color":Q;return I[V]?B==="define"?`
#ifndef HAS_UNIFORM_u_${V}
uniform lowp float u_${V}_t;
in ${U} ${Q} a_${V};
out ${U} ${G} ${V};
#else
uniform ${U} ${G} u_${V};
#endif
`:ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${V}
    ${V} = a_${V};
#else
    ${U} ${G} ${V} = u_${V};
#endif
`:`
#ifndef HAS_UNIFORM_u_${V}
    ${V} = unpack_mix_${ae}(a_${V}, u_${V}_t);
#else
    ${U} ${G} ${V} = u_${V};
#endif
`:B==="define"?`
#ifndef HAS_UNIFORM_u_${V}
uniform lowp float u_${V}_t;
in ${U} ${Q} a_${V};
#else
uniform ${U} ${G} u_${V};
#endif
`:ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${V}
    ${U} ${G} ${V} = a_${V};
#else
    ${U} ${G} ${V} = u_${V};
#endif
`:`
#ifndef HAS_UNIFORM_u_${V}
    ${U} ${G} ${V} = unpack_mix_${ae}(a_${V}, u_${V}_t);
#else
    ${U} ${G} ${V} = u_${V};
#endif
`})),staticAttributes:d,staticUniforms:A}}class Os{constructor(t,u,d){this.vertexBuffer=t,this.indexBuffer=u,this.segments=d}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Oo=c.aJ([{name:"a_pos",type:"Int16",components:2}]);const Jo="#define PROJECTION_MERCATOR",pl="mercator";class _r{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return pl}get shaderDefine(){return Jo}get shaderPreludeCode(){return io.projectionMercator}get vertexShaderPreludeCode(){return io.projectionMercator.vertexSource}get subdivisionGranularity(){return c.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(t){}getMeshFromTileID(t,u,d,_,S){if(this._cachedMesh)return this._cachedMesh;const A=new c.aL;A.emplaceBack(0,0),A.emplaceBack(c.$,0),A.emplaceBack(0,c.$),A.emplaceBack(c.$,c.$);const I=t.createVertexBuffer(A,Oo.members),O=c.aM.simpleSegment(0,0,4,2),B=new c.aN;B.emplaceBack(1,0,2),B.emplaceBack(1,2,3);const U=t.createIndexBuffer(B);return this._cachedMesh=new Os(I,U,O),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(t){}}class es{constructor(t=0,u=0,d=0,_=0){if(isNaN(t)||t<0||isNaN(u)||u<0||isNaN(d)||d<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=u,this.left=d,this.right=_}interpolate(t,u,d){return u.top!=null&&t.top!=null&&(this.top=c.C.number(t.top,u.top,d)),u.bottom!=null&&t.bottom!=null&&(this.bottom=c.C.number(t.bottom,u.bottom,d)),u.left!=null&&t.left!=null&&(this.left=c.C.number(t.left,u.left,d)),u.right!=null&&t.right!=null&&(this.right=c.C.number(t.right,u.right,d)),this}getCenter(t,u){const d=c.ah((this.left+t-this.right)/2,0,t),_=c.ah((this.top+u-this.bottom)/2,0,u);return new c.P(d,_)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new es(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function du(b,t){if(!b.renderWorldCopies||b.lngRange)return;const u=t.lng-b.center.lng;t.lng+=u>180?-360:u<-180?360:0}function ts(b){return Math.max(0,Math.floor(b))}class Qn{constructor(t,u,d,_,S,A){this._callbacks=t,this._tileSize=512,this._renderWorldCopies=A===void 0||!!A,this._minZoom=u||0,this._maxZoom=d||22,this._minPitch=_??0,this._maxPitch=S??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new c.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ts(this._zoom),this._scale=c.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new es,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(t,u,d){this._latRange=t.latRange,this._lngRange=t.lngRange,this._width=t.width,this._height=t.height,this._center=t.center,this._elevation=t.elevation,this._minElevationForCurrentTile=t.minElevationForCurrentTile,this._zoom=t.zoom,this._tileZoom=ts(this._zoom),this._scale=c.af(this._zoom),this._bearingInRadians=t.bearingInRadians,this._fovInRadians=t.fovInRadians,this._pitchInRadians=t.pitchInRadians,this._rollInRadians=t.rollInRadians,this._unmodified=t.unmodified,this._edgeInsets=new es(t.padding.top,t.padding.bottom,t.padding.left,t.padding.right),this._minZoom=t.minZoom,this._maxZoom=t.maxZoom,this._minPitch=t.minPitch,this._maxPitch=t.maxPitch,this._renderWorldCopies=t.renderWorldCopies,this._cameraToCenterDistance=t.cameraToCenterDistance,this._nearZ=t.nearZ,this._farZ=t.farZ,this._autoCalculateNearFarZ=!d&&t.autoCalculateNearFarZ,u&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(t){this._minElevationForCurrentTile=t}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(t){this._minZoom!==t&&(this._minZoom=t,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(t){this._minPitch!==t&&(this._minPitch=t,this.setPitch(Math.max(this.pitch,t)))}get maxPitch(){return this._maxPitch}setMaxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.setPitch(Math.min(this.pitch,t)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(t){t===void 0?t=!0:t===null&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(t){const u=c.aO(t,-180,180)*Math.PI/180;var d,_,S,A,I,O,B,U,G;this._bearingInRadians!==u&&(this._unmodified=!1,this._bearingInRadians=u,this._calcMatrices(),this._rotationMatrix=E(),d=this._rotationMatrix,S=-this._bearingInRadians,A=(_=this._rotationMatrix)[0],I=_[1],O=_[2],B=_[3],U=Math.sin(S),G=Math.cos(S),d[0]=A*G+O*U,d[1]=I*G+B*U,d[2]=A*-U+O*G,d[3]=I*-U+B*G)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(t){const u=c.ah(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==u&&(this._unmodified=!1,this._pitchInRadians=u,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(t){const u=t/180*Math.PI;this._rollInRadians!==u&&(this._unmodified=!1,this._rollInRadians=u,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return c.aP(this._fovInRadians)}setFov(t){t=c.ah(t,.1,150),this.fov!==t&&(this._unmodified=!1,this._fovInRadians=c.ae(t),this._calcMatrices())}get zoom(){return this._zoom}setZoom(t){const u=this.getConstrained(this._center,t).zoom;this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this._tileZoom=Math.max(0,Math.floor(u)),this._scale=c.af(u),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(t){t!==this._elevation&&(this._elevation=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(t,u){this._autoCalculateNearFarZ=!1,this._nearZ=t,this._farZ=u,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,u,d){this._unmodified=!1,this._edgeInsets.interpolate(t,u,d),this._constrain(),this._calcMatrices()}resize(t,u,d=!0){this._width=t,this._height=u,d&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Ht([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(t){t?(this._lngRange=[t.getWest(),t.getEast()],this._latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-c.ai,c.ai])}getConstrained(t,u){return this._callbacks.getConstrained(t,u)}getCameraQueryGeometry(t,u){if(u.length===1)return[u[0],t];{const{minX:d,minY:_,maxX:S,maxY:A}=c.a2.fromPoints(u).extend(t);return[new c.P(d,_),new c.P(S,_),new c.P(S,A),new c.P(d,A),new c.P(d,_)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const t=this._unmodified,{center:u,zoom:d}=this.getConstrained(this.center,this.zoom);this.setCenter(u),this.setZoom(d),this._unmodified=t,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let t=c.ag(new Float64Array(16));c.N(t,t,[this._width/2,-this._height/2,1]),c.M(t,t,[1,-1,0]),this._clipSpaceToPixelsMatrix=t,t=c.ag(new Float64Array(16)),c.N(t,t,[1,-1,1]),c.M(t,t,[-1,-1,0]),c.N(t,t,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=t,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(t,u,d,_){const S=d!==void 0?d:this.bearing,A=_=_!==void 0?_:this.pitch,I=c.a1.fromLngLat(t,u),O=-Math.cos(c.ae(A)),B=Math.sin(c.ae(A)),U=B*Math.sin(c.ae(S)),G=-B*Math.cos(c.ae(S));let V=this.elevation;const Q=u-V;let ae;O*Q>=0||Math.abs(O)<.1?(ae=1e4,V=u+ae*O):ae=-Q/O;let ce,he,fe=c.aQ(1,I.y),pe=0;do{if(pe+=1,pe>10)break;he=ae/fe,ce=new c.a1(I.x+U*he,I.y+G*he),fe=1/ce.meterInMercatorCoordinateUnits()}while(Math.abs(ae-he*fe)>1e-12);return{center:ce.toLngLat(),elevation:V,zoom:c.ak(this.height/2/Math.tan(this.fovInRadians/2)/he/this.tileSize)}}recalculateZoomAndCenter(t){if(this.elevation-t==0)return;const u=c.aj(1,this.center.lat)*this.worldSize,d=this.cameraToCenterDistance/u,_=c.a1.fromLngLat(this.center,this.elevation),S=qe(this.center,this.elevation,this.pitch,this.bearing,d);this._elevation=t;const A=this.calculateCenterFromCameraLngLatAlt(S.toLngLat(),c.aQ(S.z,_.y),this.bearing,this.pitch);this._elevation=A.elevation,this._center=A.center,this.setZoom(A.zoom)}getCameraPoint(){const t=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(t*Math.sin(this.rollInRadians),t*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const t=c.aj(1,this.center.lat)*this.worldSize;return qe(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/t).toLngLat()}getMercatorTileCoordinates(t){if(!t)return[0,0,1,1];const u=t.canonical.z>=0?1<<t.canonical.z:Math.pow(2,t.canonical.z);return[t.canonical.x/u,t.canonical.y/u,1/u/c.$,1/u/c.$]}}class ni{constructor(t,u){this.min=t,this.max=u,this.center=c.aR([],c.aS([],this.min,this.max),.5)}quadrant(t){const u=[t%2==0,t<2],d=c.aT(this.min),_=c.aT(this.max);for(let S=0;S<u.length;S++)d[S]=u[S]?this.min[S]:this.center[S],_[S]=u[S]?this.center[S]:this.max[S];return _[2]=this.max[2],new ni(d,_)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersectsFrustum(t){let u=!0;for(let d=0;d<t.planes.length;d++){const _=this.intersectsPlane(t.planes[d]);if(_===0)return 0;_===1&&(u=!1)}return u?2:t.aabb.min[0]>this.max[0]||t.aabb.min[1]>this.max[1]||t.aabb.min[2]>this.max[2]||t.aabb.max[0]<this.min[0]||t.aabb.max[1]<this.min[1]||t.aabb.max[2]<this.min[2]?0:1}intersectsPlane(t){let u=t[3],d=t[3];for(let _=0;_<3;_++)t[_]>0?(u+=t[_]*this.min[_],d+=t[_]*this.max[_]):(d+=t[_]*this.min[_],u+=t[_]*this.max[_]);return u>=0?2:d<0?0:1}}class Si{distanceToTile2d(t,u,d,_){const S=_.distanceX([t,u]),A=_.distanceY([t,u]);return Math.hypot(S,A)}getWrap(t,u,d){return d}getTileBoundingVolume(t,u,d,_){var S,A;let I=0,O=0;if(_?.terrain){const U=new c.Z(t.z,u,t.z,t.x,t.y),G=_.terrain.getMinMaxElevation(U);I=(S=G.minElevation)!==null&&S!==void 0?S:Math.min(0,d),O=(A=G.maxElevation)!==null&&A!==void 0?A:Math.max(0,d)}const B=1<<t.z;return new ni([u+t.x/B,t.y/B,I],[u+(t.x+1)/B,(t.y+1)/B,O])}allowVariableZoom(t,u){const d=t.fov*(Math.abs(Math.cos(t.rollInRadians))*t.height+Math.abs(Math.sin(t.rollInRadians))*t.width)/t.height,_=c.ah(78.5-d/2,0,60);return!!u.terrain||t.pitch>_}allowWorldCopies(){return!0}prepareNextFrame(){}}class Un{constructor(t,u,d){this.points=t,this.planes=u,this.aabb=d}static fromInvProjectionMatrix(t,u=1,d=0,_,S){const A=S?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],I=Math.pow(2,d),O=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((V=>(function(Q,ae,ce,he){const fe=c.aw([],Q,ae),pe=1/fe[3]/ce*he;return c.aY(fe,fe,[pe,pe,1/fe[3],pe])})(V,t,u,I)));_&&(function(V,Q,ae,ce){const he=ce?4:0,fe=ce?0:4;let pe=0;const be=[],me=[];for(let ge=0;ge<4;ge++){const Ie=c.aU([],V[ge+fe],V[ge+he]),Ze=c.aZ(Ie);c.aR(Ie,Ie,1/Ze),be.push(Ze),me.push(Ie)}for(let ge=0;ge<4;ge++){const Ie=c.a_(V[ge+he],me[ge],ae);pe=Ie!==null&&Ie>=0?Math.max(pe,Ie):Math.max(pe,be[ge])}const we=(function(ge,Ie){const Ze=c.aU([],ge[Ie[0]],ge[Ie[1]]),Fe=c.aU([],ge[Ie[2]],ge[Ie[1]]),Ve=[0,0,0,0];return c.aV(Ve,c.aW([],Ze,Fe)),Ve[3]=-c.aX(Ve,ge[Ie[0]]),Ve})(V,Q),Ee=(function(ge,Ie){const Ze=c.a$(ge),Fe=c.b0([],ge,1/Ze),Ve=c.aU([],Ie,c.aR([],Fe,c.aX(Ie,Fe))),Xe=c.a$(Ve);if(Xe>0){const Pt=Math.sqrt(1-Fe[3]*Fe[3]),xt=c.aR([],Fe,-Fe[3]),lt=c.aS([],xt,c.aR([],Ve,Pt/Xe));return c.b1(Ie,lt)}return null})(ae,we);if(Ee!==null){const ge=Ee/c.aX(me[0],we);pe=Math.min(pe,ge)}for(let ge=0;ge<4;ge++){const Ie=Math.min(pe,be[ge]);V[ge+fe]=[V[ge+he][0]+me[ge][0]*Ie,V[ge+he][1]+me[ge][1]*Ie,V[ge+he][2]+me[ge][2]*Ie,1]}})(O,A[0],_,S);const B=A.map((V=>{const Q=c.aU([],O[V[0]],O[V[1]]),ae=c.aU([],O[V[2]],O[V[1]]),ce=c.aV([],c.aW([],Q,ae)),he=-c.aX(ce,O[V[1]]);return ce.concat(he)})),U=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],G=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const V of O)for(let Q=0;Q<3;Q++)U[Q]=Math.min(U[Q],V[Q]),G[Q]=Math.max(G[Q],V[Q]);return new Un(O,B,new ni(U,G))}}class Br{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,u,d){return this._helper.interpolatePadding(t,u,d)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,u,d=!0){this._helper.resize(t,u,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}overrideNearFarZ(t,u){this._helper.overrideNearFarZ(t,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t,u){}constructor(t,u,d,_,S){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Qn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(A,I)=>this.getConstrained(A,I)},t,u,d,_,S),this._coveringTilesDetailsProvider=new Si}clone(){const t=new Br;return t.apply(this),t}apply(t,u,d){this._helper.apply(t,u,d)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(t){const u=[new c.b2(0,t)];if(this._helper._renderWorldCopies){const d=this.screenPointToMercatorCoordinate(new c.P(0,0)),_=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,0)),S=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,this._helper._height)),A=this.screenPointToMercatorCoordinate(new c.P(0,this._helper._height)),I=Math.floor(Math.min(d.x,_.x,S.x,A.x)),O=Math.floor(Math.max(d.x,_.x,S.x,A.x)),B=1;for(let U=I-B;U<=O+B;U++)U!==0&&u.push(new c.b2(U,t))}return u}getCameraFrustum(){return Un.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){const u=this.screenPointToLocation(this.centerPoint,t),d=t?t.getElevationForLngLatZoom(u,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(d)}setLocationAtPoint(t,u){const d=c.aj(this.elevation,this.center.lat),_=this.screenPointToMercatorCoordinateAtZ(u,d),S=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,d),A=c.a1.fromLngLat(t),I=new c.a1(A.x-(_.x-S.x),A.y-(_.y-S.y));this.setCenter(I?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(t,u){return u?this.coordinatePoint(c.a1.fromLngLat(t),u.getElevationForLngLatZoom(t,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(c.a1.fromLngLat(t))}screenPointToLocation(t,u){var d;return(d=this.screenPointToMercatorCoordinate(t,u))===null||d===void 0?void 0:d.toLngLat()}screenPointToMercatorCoordinate(t,u){if(u){const d=u.pointCoordinate(t);if(d!=null)return d}return this.screenPointToMercatorCoordinateAtZ(t)}screenPointToMercatorCoordinateAtZ(t,u){const d=u||0,_=[t.x,t.y,0,1],S=[t.x,t.y,1,1];c.aw(_,_,this._pixelMatrixInverse),c.aw(S,S,this._pixelMatrixInverse);const A=_[3],I=S[3],O=_[1]/A,B=S[1]/I,U=_[2]/A,G=S[2]/I,V=U===G?0:(d-U)/(G-U);return new c.a1(c.C.number(_[0]/A,S[0]/I,V)/this.worldSize,c.C.number(O,B,V)/this.worldSize,d)}coordinatePoint(t,u=0,d=this._pixelMatrix){const _=[t.x*this.worldSize,t.y*this.worldSize,u,1];return c.aw(_,_,d),new c.P(_[0]/_[3],_[1]/_[3])}getBounds(){const t=Math.max(0,this._helper._height/2-Se(this));return new Ht().extend(this.screenPointToLocation(new c.P(0,t))).extend(this.screenPointToLocation(new c.P(this._helper._width,t))).extend(this.screenPointToLocation(new c.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new c.P(0,this._helper._height)))}isPointOnMapSurface(t,u){return u?u.pointCoordinate(t)!=null:t.y>this.height/2-Se(this)}calculatePosMatrix(t,u=!1,d){var _;const S=(_=t.key)!==null&&_!==void 0?_:c.b3(t.wrap,t.canonical.z,t.canonical.z,t.canonical.x,t.canonical.y),A=u?this._alignedPosMatrixCache:this._posMatrixCache;if(A.has(S)){const B=A.get(S);return d?B.f32:B.f64}const I=De(t,this.worldSize);c.O(I,u?this._alignedProjMatrix:this._viewProjMatrix,I);const O={f64:I,f32:new Float32Array(I)};return A.set(S,O),d?O.f32:O.f64}calculateFogMatrix(t){const u=t.key,d=this._fogMatrixCacheF32;if(d.has(u))return d.get(u);const _=De(t,this.worldSize);return c.O(_,this._fogMatrix,_),d.set(u,new Float32Array(_)),d.get(u)}getConstrained(t,u){u=c.ah(+u,this.minZoom,this.maxZoom);const d={center:new c.S(t.lng,t.lat),zoom:u};let _=this._helper._lngRange;if(!this._helper._renderWorldCopies&&_===null){const be=179.9999999999;_=[-be,be]}const S=this.tileSize*c.af(d.zoom);let A=0,I=S,O=0,B=S,U=0,G=0;const{x:V,y:Q}=this.size;if(this._helper._latRange){const be=this._helper._latRange;A=c.U(be[1])*S,I=c.U(be[0])*S,I-A<Q&&(U=Q/(I-A))}_&&(O=c.aO(c.V(_[0])*S,0,S),B=c.aO(c.V(_[1])*S,0,S),B<O&&(B+=S),B-O<V&&(G=V/(B-O)));const{x:ae,y:ce}=le(S,t);let he,fe;const pe=Math.max(G||0,U||0);if(pe){const be=new c.P(G?(B+O)/2:ae,U?(I+A)/2:ce);return d.center=_e(S,be).wrap(),d.zoom+=c.ak(pe),d}if(this._helper._latRange){const be=Q/2;ce-be<A&&(fe=A+be),ce+be>I&&(fe=I-be)}if(_){const be=(O+B)/2;let me=ae;this._helper._renderWorldCopies&&(me=c.aO(ae,be-S/2,be+S/2));const we=V/2;me-we<O&&(he=O+we),me+we>B&&(he=B-we)}if(he!==void 0||fe!==void 0){const be=new c.P(he??ae,fe??ce);d.center=_e(S,be).wrap()}return d}calculateCenterFromCameraLngLatAlt(t,u,d,_){return this._helper.calculateCenterFromCameraLngLatAlt(t,u,d,_)}_calculateNearFarZIfNeeded(t,u,d){if(!this._helper.autoCalculateNearFarZ)return;const _=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),S=t-_*this._helper._pixelPerMeter/Math.cos(u),A=_<0?S:t,I=Math.PI/2+this.pitchInRadians,O=c.ae(this.fov)*(Math.abs(Math.cos(c.ae(this.roll)))*this.height+Math.abs(Math.sin(c.ae(this.roll)))*this.width)/this.height*(.5+d.y/this.height),B=Math.sin(O)*A/Math.sin(c.ah(Math.PI-I-O,.01,Math.PI-.01)),U=Se(this),G=Math.atan(U/this._helper.cameraToCenterDistance),V=c.ae(.75),Q=G>V?2*G*(.5+d.y/(2*U)):V,ae=Math.sin(Q)*A/Math.sin(c.ah(Math.PI-I-Q,.01,Math.PI-.01)),ce=Math.min(B,ae);this._helper._farZ=1.01*(Math.cos(Math.PI/2-u)*ce+A),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const t=this.centerOffset,u=le(this.worldSize,this.center),d=u.x,_=u.y;this._helper._pixelPerMeter=c.aj(1,this.center.lat)*this.worldSize;const S=c.ae(Math.min(this.pitch,ne)),A=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(S));let I;this._calculateNearFarZIfNeeded(A,S,t),I=new Float64Array(16),c.b4(I,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),c.aq(this._invProjMatrix,I),I[8]=2*-t.x/this._helper._width,I[9]=2*t.y/this._helper._height,this._projectionMatrix=c.b5(I),c.N(I,I,[1,-1,1]),c.M(I,I,[0,0,-this._helper.cameraToCenterDistance]),c.b6(I,I,-this.rollInRadians),c.b7(I,I,this.pitchInRadians),c.b6(I,I,-this.bearingInRadians),c.M(I,I,[-d,-_,0]),this._mercatorMatrix=c.N([],I,[this.worldSize,this.worldSize,this.worldSize]),c.N(I,I,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=c.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,I),c.M(I,I,[0,0,-this.elevation]),this._viewProjMatrix=I,this._invViewProjMatrix=c.aq([],I);const O=[0,0,-1,1];c.aw(O,O,this._invViewProjMatrix),this._cameraPosition=[O[0]/O[3],O[1]/O[3],O[2]/O[3]],this._fogMatrix=new Float64Array(16),c.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,A,this._helper._farZ),this._fogMatrix[8]=2*-t.x/this.width,this._fogMatrix[9]=2*t.y/this.height,c.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),c.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),c.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),c.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),c.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),c.M(this._fogMatrix,this._fogMatrix,[-d,-_,0]),c.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),c.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=c.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,I);const B=this._helper._width%2/2,U=this._helper._height%2/2,G=Math.cos(this.bearingInRadians),V=Math.sin(-this.bearingInRadians),Q=d-Math.round(d)+G*B+V*U,ae=_-Math.round(_)+G*U+V*B,ce=new Float64Array(I);if(c.M(ce,ce,[Q>.5?Q-1:Q,ae>.5?ae-1:ae,0]),this._alignedProjMatrix=ce,I=c.aq(new Float64Array(16),this._pixelMatrix),!I)throw new Error("failed to invert matrix");this._pixelMatrixInverse=I,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const t=this.screenPointToMercatorCoordinate(new c.P(0,0)),u=[t.x*this.worldSize,t.y*this.worldSize,0,1];return c.aw(u,u,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const t=c.aj(1,this.center.lat)*this.worldSize;return qe(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/t).toLngLat()}lngLatToCameraDepth(t,u){const d=c.a1.fromLngLat(t),_=[d.x*this.worldSize,d.y*this.worldSize,u,1];return c.aw(_,_,this._viewProjMatrix),_[2]/_[3]}getProjectionData(t){const{overscaledTileID:u,aligned:d,applyTerrainMatrix:_}=t,S=this._helper.getMercatorTileCoordinates(u),A=u?this.calculatePosMatrix(u,d,!0):null;let I;return I=u&&u.terrainRttPosMatrix32f&&_?u.terrainRttPosMatrix32f:A||c.b8(),{mainMatrix:I,tileMercatorCoords:S,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:I}}isLocationOccluded(t){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(t,u,d){return 1}transformLightDirection(t){return c.aT(t)}getRayDirectionFromPixel(t){throw new Error("Not implemented.")}projectTileCoordinates(t,u,d,_){const S=this.calculatePosMatrix(d);let A;_?(A=[t,u,_(t,u),1],c.aw(A,A,S)):(A=[t,u,0,1],cl(A,A,S));const I=A[3];return{point:new c.P(A[0]/I,A[1]/I),signedDistanceFromCamera:I,isOccluded:!1}}populateCache(t){for(const u of t)this.calculatePosMatrix(u)}getMatrixForModel(t,u){const d=c.a1.fromLngLat(t,u),_=d.meterInMercatorCoordinateUnits(),S=c.b9();return c.M(S,S,[d.x,d.y,d.z]),c.b6(S,S,Math.PI),c.b7(S,S,Math.PI/2),c.N(S,S,[-_,_,_]),S}getProjectionDataForCustomLayer(t=!0){const u=new c.Z(0,0,0,0,0),d=this.getProjectionData({overscaledTileID:u,applyGlobeMatrix:t}),_=De(u,this.worldSize);c.O(_,this._viewProjMatrix,_),d.tileMercatorCoords=[0,0,1,1];const S=[c.$,c.$,this.worldSize/this._helper.pixelsPerMeter],A=c.ba();return c.N(A,_,S),d.fallbackMatrix=A,d.mainMatrix=A,d}getFastPathSimpleProjectionMatrix(t){return this.calculatePosMatrix(t)}}function ko(){c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Pi(b){if(b.useSlerp)if(b.k<1){const t=c.bb(b.startEulerAngles.roll,b.startEulerAngles.pitch,b.startEulerAngles.bearing),u=c.bb(b.endEulerAngles.roll,b.endEulerAngles.pitch,b.endEulerAngles.bearing),d=new Float64Array(4);c.bc(d,t,u,b.k);const _=c.bd(d);b.tr.setRoll(_.roll),b.tr.setPitch(_.pitch),b.tr.setBearing(_.bearing)}else b.tr.setRoll(b.endEulerAngles.roll),b.tr.setPitch(b.endEulerAngles.pitch),b.tr.setBearing(b.endEulerAngles.bearing);else b.tr.setRoll(c.C.number(b.startEulerAngles.roll,b.endEulerAngles.roll,b.k)),b.tr.setPitch(c.C.number(b.startEulerAngles.pitch,b.endEulerAngles.pitch,b.k)),b.tr.setBearing(c.C.number(b.startEulerAngles.bearing,b.endEulerAngles.bearing,b.k))}function Ai(b,t,u,d,_){const S=_.padding,A=le(_.worldSize,u.getNorthWest()),I=le(_.worldSize,u.getNorthEast()),O=le(_.worldSize,u.getSouthEast()),B=le(_.worldSize,u.getSouthWest()),U=c.ae(-d),G=A.rotate(U),V=I.rotate(U),Q=O.rotate(U),ae=B.rotate(U),ce=new c.P(Math.max(G.x,V.x,ae.x,Q.x),Math.max(G.y,V.y,ae.y,Q.y)),he=new c.P(Math.min(G.x,V.x,ae.x,Q.x),Math.min(G.y,V.y,ae.y,Q.y)),fe=ce.sub(he),pe=(_.width-(S.left+S.right+t.left+t.right))/fe.x,be=(_.height-(S.top+S.bottom+t.top+t.bottom))/fe.y;if(be<0||pe<0)return void ko();const me=Math.min(c.ak(_.scale*Math.min(pe,be)),b.maxZoom),we=c.P.convert(b.offset),Ee=new c.P((t.left-t.right)/2,(t.top-t.bottom)/2).rotate(c.ae(d)),ge=we.add(Ee).mult(_.scale/c.af(me));return{center:_e(_.worldSize,A.add(O).div(2).sub(ge)),zoom:me,bearing:d}}class En{get useGlobeControls(){return!1}handlePanInertia(t,u){const d=t.mag(),_=Math.abs(Se(u));return{easingOffset:t.mult(Math.min(.75*_/d,1)),easingCenter:u.center}}handleMapControlsRollPitchBearingZoom(t,u){t.bearingDelta&&u.setBearing(u.bearing+t.bearingDelta),t.pitchDelta&&u.setPitch(u.pitch+t.pitchDelta),t.rollDelta&&u.setRoll(u.roll+t.rollDelta),t.zoomDelta&&u.setZoom(u.zoom+t.zoomDelta)}handleMapControlsPan(t,u,d){t.around.distSqr(u.centerPoint)<.01||u.setLocationAtPoint(d,t.around)}cameraForBoxAndBearing(t,u,d,_,S){return Ai(t,u,d,_,S)}handleJumpToCenterZoom(t,u){t.zoom!==(u.zoom!==void 0?+u.zoom:t.zoom)&&t.setZoom(+u.zoom),u.center!==void 0&&t.setCenter(c.S.convert(u.center))}handleEaseTo(t,u){const d=t.zoom,_=t.padding,S={roll:t.roll,pitch:t.pitch,bearing:t.bearing},A={roll:u.roll===void 0?t.roll:u.roll,pitch:u.pitch===void 0?t.pitch:u.pitch,bearing:u.bearing===void 0?t.bearing:u.bearing},I=u.zoom!==void 0,O=!t.isPaddingEqual(u.padding);let B=!1;const U=I?+u.zoom:t.zoom;let G=t.centerPoint.add(u.offsetAsPoint);const V=t.screenPointToLocation(G),{center:Q,zoom:ae}=t.getConstrained(c.S.convert(u.center||V),U??d);du(t,Q);const ce=le(t.worldSize,V),he=le(t.worldSize,Q).sub(ce),fe=c.af(ae-d);return B=ae!==d,{easeFunc:pe=>{if(B&&t.setZoom(c.C.number(d,ae,pe)),c.be(S,A)||Pi({startEulerAngles:S,endEulerAngles:A,tr:t,k:pe,useSlerp:S.roll!=A.roll}),O&&(t.interpolatePadding(_,u.padding,pe),G=t.centerPoint.add(u.offsetAsPoint)),u.around)t.setLocationAtPoint(u.around,u.aroundPoint);else{const be=c.af(t.zoom-d),me=ae>d?Math.min(2,fe):Math.max(.5,fe),we=Math.pow(me,1-pe),Ee=_e(t.worldSize,ce.add(he.mult(pe*we)).mult(be));t.setLocationAtPoint(t.renderWorldCopies?Ee.wrap():Ee,G)}},isZooming:B,elevationCenter:Q}}handleFlyTo(t,u){const d=u.zoom!==void 0,_=t.zoom,S=t.getConstrained(c.S.convert(u.center||u.locationAtOffset),d?+u.zoom:_),A=S.center,I=S.zoom;du(t,A);const O=le(t.worldSize,u.locationAtOffset),B=le(t.worldSize,A).sub(O),U=B.mag(),G=c.af(I-_);let V;if(u.minZoom!==void 0){const Q=Math.min(+u.minZoom,_,I),ae=t.getConstrained(A,Q).zoom;V=c.af(ae-_)}return{easeFunc:(Q,ae,ce,he)=>{t.setZoom(Q===1?I:_+c.ak(ae));const fe=Q===1?A:_e(t.worldSize,O.add(B.mult(ce)).mult(ae));t.setLocationAtPoint(t.renderWorldCopies?fe.wrap():fe,he)},scaleOfZoom:G,targetCenter:A,scaleOfMinZoom:V,pixelPathLength:U}}}class Yr{constructor(t,u,d){this.blendFunction=t,this.blendColor=u,this.mask=d}}Yr.Replace=[1,0],Yr.disabled=new Yr(Yr.Replace,c.bf.transparent,[!1,!1,!1,!1]),Yr.unblended=new Yr(Yr.Replace,c.bf.transparent,[!0,!0,!0,!0]),Yr.alphaBlended=new Yr([1,771],c.bf.transparent,[!0,!0,!0,!0]);const Lo=2305;class er{constructor(t,u,d){this.enable=t,this.mode=u,this.frontFace=d}}er.disabled=new er(!1,1029,Lo),er.backCCW=new er(!0,1029,Lo),er.frontCCW=new er(!0,1028,Lo);class lr{constructor(t,u,d){this.func=t,this.mask=u,this.range=d}}lr.ReadOnly=!1,lr.ReadWrite=!0,lr.disabled=new lr(519,lr.ReadOnly,[0,1]);const Za=7680;class Tr{constructor(t,u,d,_,S,A){this.test=t,this.ref=u,this.mask=d,this.fail=_,this.depthFail=S,this.pass=A}}Tr.disabled=new Tr({func:519,mask:0},0,0,Za,Za,Za);const un=new WeakMap;function Oi(b){var t;if(un.has(b))return un.get(b);{const u=(t=b.getParameter(b.VERSION))===null||t===void 0?void 0:t.startsWith("WebGL 2.0");return un.set(b,u),u}}class Ra{get awaitingQuery(){return!!this._readbackQueue}constructor(t){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=t;const u=t.context,d=u.gl;this._texFormat=d.RGBA,this._texType=d.UNSIGNED_BYTE;const _=new c.aL;_.emplaceBack(-1,-1),_.emplaceBack(2,-1),_.emplaceBack(-1,2);const S=new c.aN;S.emplaceBack(0,1,2),this._fullscreenTriangle=new Os(u.createVertexBuffer(_,Oo.members),u.createIndexBuffer(S),c.aM.simpleSegment(0,0,_.length,S.length)),this._resultBuffer=new Uint8Array(4),u.activeTexture.set(d.TEXTURE1);const A=d.createTexture();d.bindTexture(d.TEXTURE_2D,A),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texImage2D(d.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=u.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(A),Oi(d)&&(this._pbo=d.createBuffer(),d.bindBuffer(d.PIXEL_PACK_BUFFER,this._pbo),d.bufferData(d.PIXEL_PACK_BUFFER,4,d.STREAM_READ),d.bindBuffer(d.PIXEL_PACK_BUFFER,null))}destroy(){const t=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),t.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(t,u){const d=this._updateCount;return this._readbackQueue?d>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():d>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(t,u),this._updateCount++,this._measuredError}_bindFramebuffer(){const t=this._cachedRenderContext.context,u=t.gl;t.activeTexture.set(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,this._fbo.colorAttachment.get()),t.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(t,u){const d=this._cachedRenderContext.context,_=d.gl;if(this._bindFramebuffer(),d.viewport.set([0,0,this._texWidth,this._texHeight]),d.clear({color:c.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(d,_.TRIANGLES,lr.disabled,Tr.disabled,Yr.unblended,er.disabled,((S,A)=>({u_input:S,u_output_expected:A}))(t,u),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Oi(_)){_.bindBuffer(_.PIXEL_PACK_BUFFER,this._pbo),_.readBuffer(_.COLOR_ATTACHMENT0),_.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),_.bindBuffer(_.PIXEL_PACK_BUFFER,null);const S=_.fenceSync(_.SYNC_GPU_COMMANDS_COMPLETE,0);_.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:S}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const t=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Oi(t)){const u=t.clientWaitSync(this._readbackQueue.sync,0,0);if(u===t.WAIT_FAILED)return c.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(u===t.TIMEOUT_EXPIRED)return;t.bindBuffer(t.PIXEL_PACK_BUFFER,this._pbo),t.getBufferSubData(t.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),t.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Ra._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(t){let u=0;return u+=t[0]/256,u+=t[1]/65536,u+=t[2]/16777216,t[3]<127&&(u=-u),u/128}}const ks=c.$/128;function _f(b,t){const u=b.granularity!==void 0?Math.max(b.granularity,1):1,d=u+(b.generateBorders?2:0),_=u+(b.extendToNorthPole||b.generateBorders?1:0)+(b.extendToSouthPole||b.generateBorders?1:0),S=d+1,A=_+1,I=b.generateBorders?-1:0,O=b.generateBorders||b.extendToNorthPole?-1:0,B=u+(b.generateBorders?1:0),U=u+(b.generateBorders||b.extendToSouthPole?1:0),G=S*A,V=d*_*6,Q=S*A>65536;if(Q&&t==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ae=Q||t==="32bit",ce=new Int16Array(2*G);let he=0;for(let be=O;be<=U;be++)for(let me=I;me<=B;me++){let we=me/u*c.$;me===-1&&(we=-ks),me===u+1&&(we=c.$+ks);let Ee=be/u*c.$;be===-1&&(Ee=b.extendToNorthPole?c.bh:-ks),be===u+1&&(Ee=b.extendToSouthPole?c.bi:c.$+ks),ce[he++]=we,ce[he++]=Ee}const fe=ae?new Uint32Array(V):new Uint16Array(V);let pe=0;for(let be=0;be<_;be++)for(let me=0;me<d;me++){const we=me+1+be*S,Ee=me+(be+1)*S,ge=me+1+(be+1)*S;fe[pe++]=me+be*S,fe[pe++]=Ee,fe[pe++]=we,fe[pe++]=we,fe[pe++]=Ee,fe[pe++]=ge}return{vertices:ce.buffer.slice(0),indices:fe.buffer.slice(0),uses32bitIndices:ae}}const Ls=new c.aK({fill:new c.bj(128,2),line:new c.bj(512,0),tile:new c.bj(128,32),stencil:new c.bj(128,1),circle:3});class ml{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return io.projectionGlobe}get vertexShaderPreludeCode(){return io.projectionMercator.vertexSource}get subdivisionGranularity(){return Ls}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(t){this._errorMeasurement||(this._errorMeasurement=new Ra(t));const u=c.U(this._errorQueryLatitudeDegrees),d=2*Math.atan(Math.exp(Math.PI-u*Math.PI*2))-.5*Math.PI,_=this._errorMeasurement.updateErrorLoop(u,d),S=N.now();_!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=_,this._errorMeasurementLastChangeTime=S);const A=Math.min(Math.max((S-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=c.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,c.bl(A))}_getMeshKey(t){return`${t.granularity.toString(36)}_${t.generateBorders?"b":""}${t.extendToNorthPole?"n":""}${t.extendToSouthPole?"s":""}`}getMeshFromTileID(t,u,d,_,S){const A=(S==="stencil"?Ls.stencil:Ls.tile).getGranularityForZoomLevel(u.z);return this._getMesh(t,{granularity:A,generateBorders:d,extendToNorthPole:u.y===0&&_,extendToSouthPole:u.y===(1<<u.z)-1&&_})}_getMesh(t,u){const d=this._getMeshKey(u);if(d in this._tileMeshCache)return this._tileMeshCache[d];const _=(function(S,A){const I=_f(A,"16bit"),O=c.aL.deserialize({arrayBuffer:I.vertices,length:I.vertices.byteLength/2/2}),B=c.aN.deserialize({arrayBuffer:I.indices,length:I.indices.byteLength/2/3});return new Os(S.createVertexBuffer(O,Oo.members),S.createIndexBuffer(B),c.aM.simpleSegment(0,0,O.length,B.length))})(t,u);return this._tileMeshCache[d]=_,_}recalculate(t){}hasTransition(){const t=N.now();let u=!1;return u=u||(t-this._errorMeasurementLastChangeTime)/1e3<.7,u=u||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,u}setErrorQueryLatitudeDegrees(t){this._errorQueryLatitudeDegrees=t}}const zs=new c.r({type:new c.D(c.v.projection.type)});class gl extends c.E{constructor(t){super(),this._transitionable=new c.t(zs,void 0),this.setProjection(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.F(0)),this._mercatorProjection=new _r,this._verticalPerspectiveProjection=new ml}get transitionState(){const t=this.properties.get("type");if(typeof t=="string"&&t==="mercator")return 0;if(typeof t=="string"&&t==="vertical-perspective")return 1;if(t instanceof c.bm){if(t.from==="vertical-perspective"&&t.to==="mercator")return 1-t.transition;if(t.from==="mercator"&&t.to==="vertical-perspective")return t.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(t){this._mercatorProjection.updateGPUdependent(t),this._verticalPerspectiveProjection.updateGPUdependent(t)}getMeshFromTileID(t,u,d,_,S){return this.currentProjection.getMeshFromTileID(t,u,d,_,S)}setProjection(t){this._transitionable.setValue("type",t?.type||"mercator")}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}setErrorQueryLatitudeDegrees(t){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(t),this._mercatorProjection.setErrorQueryLatitudeDegrees(t)}}function cc(b){const t=pu(b.worldSize,b.center.lat);return 2*Math.PI*t}function ao(b,t,u,d,_){const S=1/(1<<_),A=t/c.$*S+d*S,I=c.bo((b/c.$*S+u*S)*Math.PI*2+Math.PI,2*Math.PI),O=2*Math.atan(Math.exp(Math.PI-A*Math.PI*2))-.5*Math.PI,B=Math.cos(O),U=new Float64Array(3);return U[0]=Math.sin(I)*B,U[1]=Math.sin(O),U[2]=Math.cos(I)*B,U}function fi(b){return(function(t,u){const d=Math.cos(u),_=new Float64Array(3);return _[0]=Math.sin(t)*d,_[1]=Math.sin(u),_[2]=Math.cos(t)*d,_})(b.lng*Math.PI/180,b.lat*Math.PI/180)}function pu(b,t){return b/(2*Math.PI)/Math.cos(t*Math.PI/180)}function yl(b){const t=Math.asin(b[1])/Math.PI*180,u=Math.sqrt(b[0]*b[0]+b[2]*b[2]);if(u>1e-6){const d=b[0]/u,_=Math.acos(b[2]/u),S=(d>0?_:-_)/Math.PI*180;return new c.S(c.aO(S,-180,180),t)}return new c.S(0,t)}function vl(b){return Math.cos(b*Math.PI/180)}function On(b,t){const u=vl(b),d=vl(t);return c.ak(d/u)}function Gd(b,t){const u=b.rotate(t.bearingInRadians),d=t.zoom+On(t.center.lat,0),_=c.bk(1/vl(t.center.lat),1/vl(Math.min(Math.abs(t.center.lat),60)),c.bn(d,7,3,0,1)),S=360/cc({worldSize:t.worldSize,center:{lat:t.center.lat}});return new c.S(t.center.lng-u.x*S*_,c.ah(t.center.lat+u.y*S,-c.ai,c.ai))}function hc(b){const t=.5*b,u=Math.sin(t),d=Math.cos(t);return Math.log(u+d)-Math.log(d-u)}function bf(b,t,u,d){const _=b.lat+u*d;if(Math.abs(u)>1){const S=(Math.sign(b.lat+u)!==Math.sign(b.lat)?-Math.abs(b.lat):Math.abs(b.lat))*Math.PI/180,A=Math.abs(b.lat+u)*Math.PI/180,I=hc(S+d*(A-S)),O=hc(S),B=hc(A);return new c.S(b.lng+t*((I-O)/(B-O)),_)}return new c.S(b.lng+t*d,_)}class Wd{constructor(t){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=t}swapBuffers(){if(!this._hadAnyChanges)return;const t=this._cachePrevious;this._cachePrevious=this._cache,this._cache=t,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(t,u,d,_){const S=`${t.z}_${t.x}_${t.y}_${_?.terrain?"t":""}`,A=this._cache.get(S);if(A)return A;const I=this._cachePrevious.get(S);if(I)return this._cache.set(S,I),I;const O=this._boundingVolumeFactory(t,u,d,_);return this._cache.set(S,O),this._hadAnyChanges=!0,O}}class mu{constructor(t,u,d,_){this.min=d,this.max=_,this.points=t,this.planes=u}static fromAabb(t,u){const d=[];for(let _=0;_<8;_++)d.push([1&~_?t[0]:u[0],(_>>1&1)==1?u[1]:t[1],(_>>2&1)==1?u[2]:t[2]]);return new mu(d,[[-1,0,0,u[0]],[1,0,0,-t[0]],[0,-1,0,u[1]],[0,1,0,-t[1]],[0,0,-1,u[2]],[0,0,1,-t[2]]],t,u)}static fromCenterSizeAngles(t,u,d){const _=c.br([],d[0],d[1],d[2]),S=c.bs([],[u[0],0,0],_),A=c.bs([],[0,u[1],0],_),I=c.bs([],[0,0,u[2]],_),O=[...t],B=[...t];for(let G=0;G<8;G++)for(let V=0;V<3;V++){const Q=t[V]+S[V]*(1&~G?-1:1)+A[V]*((G>>1&1)==1?1:-1)+I[V]*((G>>2&1)==1?1:-1);O[V]=Math.min(O[V],Q),B[V]=Math.max(B[V],Q)}const U=[];for(let G=0;G<8;G++){const V=[...t];c.aS(V,V,c.aR([],S,1&~G?-1:1)),c.aS(V,V,c.aR([],A,(G>>1&1)==1?1:-1)),c.aS(V,V,c.aR([],I,(G>>2&1)==1?1:-1)),U.push(V)}return new mu(U,[[...S,-c.aX(S,U[0])],[...A,-c.aX(A,U[0])],[...I,-c.aX(I,U[0])],[-S[0],-S[1],-S[2],-c.aX(S,U[7])],[-A[0],-A[1],-A[2],-c.aX(A,U[7])],[-I[0],-I[1],-I[2],-c.aX(I,U[7])]],O,B)}intersectsFrustum(t){let u=!0;const d=this.points.length,_=this.planes.length,S=t.planes.length,A=t.points.length;for(let I=0;I<S;I++){const O=t.planes[I];let B=0;for(let U=0;U<d;U++){const G=this.points[U];O[0]*G[0]+O[1]*G[1]+O[2]*G[2]+O[3]>=0&&B++}if(B===0)return 0;B<d&&(u=!1)}if(u)return 2;for(let I=0;I<_;I++){const O=this.planes[I];let B=0;for(let U=0;U<A;U++){const G=t.points[U];O[0]*G[0]+O[1]*G[1]+O[2]*G[2]+O[3]>=0&&B++}if(B===0)return 0}return 1}intersectsPlane(t){const u=this.points.length;let d=0;for(let _=0;_<u;_++){const S=this.points[_];t[0]*S[0]+t[1]*S[1]+t[2]*S[2]+t[3]>=0&&d++}return d===u?2:d===0?0:1}}function Ci(b,t,u){const d=b-t;return d<0?-d:Math.max(0,d-u)}function fc(b,t,u,d,_){const S=b-u;let A;return A=S<0?Math.min(-S,1+S-_):S>1?Math.min(Math.max(S-_,0),1-S):0,Math.max(A,Ci(t,d,_))}class zo{constructor(){this._boundingVolumeCache=new Wd(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(t,u,d,_){const S=1<<d.z,A=1/S,I=d.x/S,O=d.y/S;let B=2;return B=Math.min(B,fc(t,u,I,O,A)),B=Math.min(B,fc(t,u,I+.5,-O-A,A)),B=Math.min(B,fc(t,u,I+.5,2-O-A,A)),B}getWrap(t,u,d){const _=1<<u.z,S=1/_,A=u.x/_,I=Ci(t.x,A,S),O=Ci(t.x,A-1,S),B=Ci(t.x,A+1,S),U=Math.min(I,O,B);return U===B?1:U===O?-1:0}allowVariableZoom(t,u){return Ot(t,u)>4}allowWorldCopies(){return!1}getTileBoundingVolume(t,u,d,_){return this._boundingVolumeCache.getTileBoundingVolume(t,u,d,_)}_computeTileBoundingVolume(t,u,d,_){var S,A;let I=0,O=0;if(_?.terrain){const B=new c.Z(t.z,u,t.z,t.x,t.y),U=_.terrain.getMinMaxElevation(B);I=(S=U.minElevation)!==null&&S!==void 0?S:Math.min(0,d),O=(A=U.maxElevation)!==null&&A!==void 0?A:Math.max(0,d)}if(I/=c.bu,O/=c.bu,I+=1,O+=1,t.z<=0)return mu.fromAabb([-O,-O,-O],[O,O,O]);if(t.z===1)return mu.fromAabb([t.x===0?-O:0,t.y===0?0:-O,-O],[t.x===0?0:O,t.y===0?O:0,O]);{const B=[ao(0,0,t.x,t.y,t.z),ao(c.$,0,t.x,t.y,t.z),ao(c.$,c.$,t.x,t.y,t.z),ao(0,c.$,t.x,t.y,t.z)],U=[];for(const Ve of B)U.push(c.aR([],Ve,O));if(O!==I)for(const Ve of B)U.push(c.aR([],Ve,I));t.y===0&&U.push([0,1,0]),t.y===(1<<t.z)-1&&U.push([0,-1,0]);const G=[1,1,1],V=[-1,-1,-1];for(const Ve of U)for(let Xe=0;Xe<3;Xe++)G[Xe]=Math.min(G[Xe],Ve[Xe]),V[Xe]=Math.max(V[Xe],Ve[Xe]);const Q=ao(c.$/2,c.$/2,t.x,t.y,t.z),ae=c.aW([],[0,1,0],Q);c.aV(ae,ae);const ce=c.aW([],Q,ae);c.aV(ce,ce);const he=c.aW([],B[2],B[1]);c.aV(he,he);const fe=c.aW([],B[0],B[3]);c.aV(fe,fe),U.push(c.aR([],Q,O)),t.y>=(1<<t.z)/2&&U.push(c.aR([],ao(c.$/2,0,t.x,t.y,t.z),O)),t.y<(1<<t.z)/2&&U.push(c.aR([],ao(c.$/2,c.$,t.x,t.y,t.z),O));const pe=_l(Q,U),be=_l(ce,U),me=[-Q[0],-Q[1],-Q[2],pe.max],we=[Q[0],Q[1],Q[2],-pe.min],Ee=[-ce[0],-ce[1],-ce[2],be.max],ge=[ce[0],ce[1],ce[2],-be.min],Ie=[...he,0],Ze=[...fe,0],Fe=[];return t.y===0?Fe.push(c.bt(Ze,Ie,me),c.bt(Ze,Ie,we)):Fe.push(c.bt(Ee,Ie,me),c.bt(Ee,Ie,we),c.bt(Ee,Ze,me),c.bt(Ee,Ze,we)),t.y===(1<<t.z)-1?Fe.push(c.bt(Ze,Ie,me),c.bt(Ze,Ie,we)):Fe.push(c.bt(ge,Ie,me),c.bt(ge,Ie,we),c.bt(ge,Ze,me),c.bt(ge,Ze,we)),new mu(Fe,[me,we,Ee,ge,Ie,Ze],G,V)}}}function _l(b,t){let u=1/0,d=-1/0;for(const _ of t){const S=c.aX(b,_);u=Math.min(u,S),d=Math.max(d,S)}return{min:u,max:d}}class dc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,u,d){return this._helper.interpolatePadding(t,u,d)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,u){this._helper.resize(t,u)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}overrideNearFarZ(t,u){this._helper.overrideNearFarZ(t,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t){}constructor(){this._cachedClippingPlane=c.bv(),this._projectionMatrix=c.b9(),this._globeViewProjMatrix32f=c.b8(),this._globeViewProjMatrixNoCorrection=c.b9(),this._globeViewProjMatrixNoCorrectionInverted=c.b9(),this._globeProjMatrixInverted=c.b9(),this._cameraPosition=c.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Qn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(t,u)=>this.getConstrained(t,u)}),this._coveringTilesDetailsProvider=new zo}clone(){const t=new dc;return t.apply(this),t}apply(t,u){this._globeLatitudeErrorCorrectionRadians=u||0,this._helper.apply(t)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const t=c.bp();return t[0]=this._cameraPosition[0],t[1]=this._cameraPosition[1],t[2]=this._cameraPosition[2],t}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(t){const{overscaledTileID:u,applyGlobeMatrix:d}=t,_=this._helper.getMercatorTileCoordinates(u);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:_,clippingPlane:this._cachedClippingPlane,projectionTransition:d?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(t){const u=this.pitchInRadians,d=this.cameraToCenterDistance/t,_=Math.sin(u)*d,S=Math.cos(u)*d+1,A=1/Math.sqrt(_*_+S*S)*1;let I=-_,O=S;const B=Math.sqrt(I*I+O*O);I/=B,O/=B;const U=[0,I,O];c.bw(U,U,[0,0,0],-this.bearingInRadians),c.bx(U,U,[0,0,0],-1*this.center.lat*Math.PI/180),c.by(U,U,[0,0,0],this.center.lng*Math.PI/180);const G=1/c.aZ(U);return c.aR(U,U,G),[...U,-A*G]}isLocationOccluded(t){return!this.isSurfacePointVisible(fi(t))}transformLightDirection(t){const u=this._helper._center.lng*Math.PI/180,d=this._helper._center.lat*Math.PI/180,_=Math.cos(d),S=[Math.sin(u)*_,Math.sin(d),Math.cos(u)*_],A=[S[2],0,-S[0]],I=[0,0,0];c.aW(I,A,S),c.aV(A,A),c.aV(I,I);const O=[0,0,0];return c.aV(O,[A[0]*t[0]+I[0]*t[1]+S[0]*t[2],A[1]*t[0]+I[1]*t[1]+S[1]*t[2],A[2]*t[0]+I[2]*t[1]+S[2]*t[2]]),O}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(t,u,d){const _=(function(I,O,B){const U=1/(1<<B.z);return new c.a1(I/c.$*U+B.x*U,O/c.$*U+B.y*U)})(t,u,d.canonical),S=(A=_.y,[c.bo(_.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-A*Math.PI*2))-.5*Math.PI]);var A;return this.getCircleRadiusCorrection()/Math.cos(S[1])}projectTileCoordinates(t,u,d,_){const S=d.canonical,A=ao(t,u,S.x,S.y,S.z),I=1+(_?_(t,u):0)/c.bu,O=[A[0]*I,A[1]*I,A[2]*I,1];c.aw(O,O,this._globeViewProjMatrixNoCorrection);const B=this._cachedClippingPlane,U=B[0]*A[0]+B[1]*A[1]+B[2]*A[2]+B[3]<0;return{point:new c.P(O[0]/O[3],O[1]/O[3]),signedDistanceFromCamera:O[3],isOccluded:U}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const t=pu(this.worldSize,this.center.lat),u=c.ba(),d=c.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*t),c.b4(u,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const _=this.centerOffset;u[8]=2*-_.x/this._helper._width,u[9]=2*_.y/this._helper._height,this._projectionMatrix=c.b5(u),this._globeProjMatrixInverted=c.ba(),c.aq(this._globeProjMatrixInverted,u),c.M(u,u,[0,0,-this.cameraToCenterDistance]),c.b6(u,u,this.rollInRadians),c.b7(u,u,-this.pitchInRadians),c.b6(u,u,this.bearingInRadians),c.M(u,u,[0,0,-t]);const S=c.bp();S[0]=t,S[1]=t,S[2]=t,c.b7(d,u,this.center.lat*Math.PI/180),c.bz(d,d,-this.center.lng*Math.PI/180),c.N(d,d,S),this._globeViewProjMatrixNoCorrection=d,c.b7(u,u,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),c.bz(u,u,-this.center.lng*Math.PI/180),c.N(u,u,S),this._globeViewProjMatrix32f=new Float32Array(u),this._globeViewProjMatrixNoCorrectionInverted=c.ba(),c.aq(this._globeViewProjMatrixNoCorrectionInverted,d);const A=c.bp();this._cameraPosition=c.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/t,c.bw(this._cameraPosition,this._cameraPosition,A,-this.rollInRadians),c.bx(this._cameraPosition,this._cameraPosition,A,this.pitchInRadians),c.bw(this._cameraPosition,this._cameraPosition,A,-this.bearingInRadians),c.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),c.bx(this._cameraPosition,this._cameraPosition,A,-this.center.lat*Math.PI/180),c.by(this._cameraPosition,this._cameraPosition,A,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(t);const I=c.b5(this._globeViewProjMatrixNoCorrectionInverted);c.N(I,I,[1,1,-1]),this._cachedFrustum=Un.fromInvProjectionMatrix(I,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(t){c.w("calculateFogMatrix is not supported on globe projection.");const u=c.ba();return c.ag(u),u}getVisibleUnwrappedCoordinates(t){return[new c.b2(0,t)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){t&&c.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,u){if(!this._globeViewProjMatrixNoCorrection)return 1;const d=fi(t);c.aR(d,d,1+u/c.bu);const _=c.bv();return c.aw(_,[d[0],d[1],d[2],1],this._globeViewProjMatrixNoCorrection),_[2]/_[3]}populateCache(t){}getBounds(){const t=.5*this.width,u=.5*this.height,d=[new c.P(0,0),new c.P(t,0),new c.P(this.width,0),new c.P(this.width,u),new c.P(this.width,this.height),new c.P(t,this.height),new c.P(0,this.height),new c.P(0,u)],_=[];for(const G of d)_.push(this.unprojectScreenPoint(G));let S=0,A=0,I=0,O=0;const B=this.center;for(const G of _){const V=c.bA(B.lng,G.lng),Q=c.bA(B.lat,G.lat);V<A&&(A=V),V>S&&(S=V),Q<O&&(O=Q),Q>I&&(I=Q)}const U=[B.lng+A,B.lat+O,B.lng+S,B.lat+I];return this.isSurfacePointOnScreen([0,1,0])&&(U[3]=90,U[0]=-180,U[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(U[1]=-90,U[0]=-180,U[2]=180),new Ht(U)}getConstrained(t,u){const d=c.ah(t.lat,-c.ai,c.ai),_=c.ah(+u,this.minZoom+On(0,d),this.maxZoom);return{center:new c.S(t.lng,d),zoom:_}}calculateCenterFromCameraLngLatAlt(t,u,d,_){return this._helper.calculateCenterFromCameraLngLatAlt(t,u,d,_)}setLocationAtPoint(t,u){const d=fi(this.unprojectScreenPoint(u)),_=fi(t),S=c.bp();c.bB(S);const A=c.bp();c.by(A,d,S,-this.center.lng*Math.PI/180),c.bx(A,A,S,this.center.lat*Math.PI/180);const I=_[0]*_[0]+_[2]*_[2],O=A[0]*A[0];if(I<O)return;const B=Math.sqrt(I-O),U=-B,G=c.bC(_[0],_[2],A[0],B),V=c.bC(_[0],_[2],A[0],U),Q=c.bp();c.by(Q,_,S,-G);const ae=c.bC(Q[1],Q[2],A[1],A[2]),ce=c.bp();c.by(ce,_,S,-V);const he=c.bC(ce[1],ce[2],A[1],A[2]),fe=.5*Math.PI,pe=ae>=-fe&&ae<=fe,be=he>=-fe&&he<=fe;let me,we;if(pe&&be){const Ze=this.center.lng*Math.PI/180,Fe=this.center.lat*Math.PI/180;c.bD(G,Ze)+c.bD(ae,Fe)<c.bD(V,Ze)+c.bD(he,Fe)?(me=G,we=ae):(me=V,we=he)}else if(pe)me=G,we=ae;else{if(!be)return;me=V,we=he}const Ee=me/Math.PI*180,ge=we/Math.PI*180,Ie=this.center.lat;this.setCenter(new c.S(Ee,c.ah(ge,-90,90))),this.setZoom(this.zoom+On(Ie,this.center.lat))}locationToScreenPoint(t,u){const d=fi(t);if(u){const _=u.getElevationForLngLatZoom(t,this._helper._tileZoom);c.aR(d,d,1+_/c.bu)}return this._projectSurfacePointToScreen(d)}_projectSurfacePointToScreen(t){const u=c.bv();return c.aw(u,[...t,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],new c.P((.5*u[0]+.5)*this.width,(.5*-u[1]+.5)*this.height)}screenPointToMercatorCoordinate(t,u){if(u){const d=u.pointCoordinate(t);if(d)return d}return c.a1.fromLngLat(this.unprojectScreenPoint(t))}screenPointToLocation(t,u){var d;return(d=this.screenPointToMercatorCoordinate(t,u))===null||d===void 0?void 0:d.toLngLat()}isPointOnMapSurface(t,u){const d=this._cameraPosition,_=this.getRayDirectionFromPixel(t);return!!this.rayPlanetIntersection(d,_)}getRayDirectionFromPixel(t){const u=c.bv();u[0]=t.x/this.width*2-1,u[1]=-1*(t.y/this.height*2-1),u[2]=1,u[3]=1,c.aw(u,u,this._globeViewProjMatrixNoCorrectionInverted),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3];const d=c.bp();d[0]=u[0]-this._cameraPosition[0],d[1]=u[1]-this._cameraPosition[1],d[2]=u[2]-this._cameraPosition[2];const _=c.bp();return c.aV(_,d),_}isSurfacePointVisible(t){const u=this._cachedClippingPlane;return u[0]*t[0]+u[1]*t[1]+u[2]*t[2]+u[3]>=0}isSurfacePointOnScreen(t){if(!this.isSurfacePointVisible(t))return!1;const u=c.bv();return c.aw(u,[...t,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3],u[0]>-1&&u[0]<1&&u[1]>-1&&u[1]<1&&u[2]>-1&&u[2]<1}rayPlanetIntersection(t,u){const d=c.aX(t,u),_=c.bp(),S=c.bp();c.aR(S,u,d),c.aU(_,t,S);const A=1-c.aX(_,_);if(A<0)return null;const I=c.aX(t,t)-1,O=-d+(d<0?1:-1)*Math.sqrt(A),B=I/O,U=O;return{tMin:Math.min(B,U),tMax:Math.max(B,U)}}unprojectScreenPoint(t){const u=this._cameraPosition,d=this.getRayDirectionFromPixel(t),_=this.rayPlanetIntersection(u,d);if(_){const U=c.bp();c.aS(U,u,[d[0]*_.tMin,d[1]*_.tMin,d[2]*_.tMin]);const G=c.bp();return c.aV(G,U),yl(G)}const S=this._cachedClippingPlane,A=S[0]*d[0]+S[1]*d[1]+S[2]*d[2],I=-c.b1(S,u)/A,O=c.bp();if(I>0)c.aS(O,u,[d[0]*I,d[1]*I,d[2]*I]);else{const U=c.bp();c.aS(U,u,[2*d[0],2*d[1],2*d[2]]);const G=c.b1(this._cachedClippingPlane,U);c.aU(O,U,[this._cachedClippingPlane[0]*G,this._cachedClippingPlane[1]*G,this._cachedClippingPlane[2]*G])}const B=(function(U){const G=c.bp();return G[0]=U[0]*-U[3],G[1]=U[1]*-U[3],G[2]=U[2]*-U[3],{center:G,radius:Math.sqrt(1-U[3]*U[3])}})(S);return yl((function(U,G,V){const Q=c.bp();c.aU(Q,V,U);const ae=c.bp();return c.bq(ae,U,Q,G/c.a$(Q)),ae})(B.center,B.radius,O))}getMatrixForModel(t,u){const d=c.S.convert(t),_=1/c.bu,S=c.b9();return c.bz(S,S,d.lng/180*Math.PI),c.b7(S,S,-d.lat/180*Math.PI),c.M(S,S,[0,0,1+u/c.bu]),c.b7(S,S,.5*Math.PI),c.N(S,S,[_,_,_]),S}getProjectionDataForCustomLayer(t=!0){const u=this.getProjectionData({overscaledTileID:new c.Z(0,0,0,0,0),applyGlobeMatrix:t});return u.tileMercatorCoords=[0,0,1,1],u}getFastPathSimpleProjectionMatrix(t){}}class pc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,u,d){return this._helper.interpolatePadding(t,u,d)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,u,d=!0){this._helper.resize(t,u,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}overrideNearFarZ(t,u){this._helper.overrideNearFarZ(t,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(t,u){this._globeness=t,this._globeLatitudeErrorCorrectionRadians=u,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Qn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(t,u)=>this.getConstrained(t,u)}),this._globeness=1,this._mercatorTransform=new Br,this._verticalPerspectiveTransform=new dc}clone(){const t=new pc;return t._globeness=this._globeness,t._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,t.apply(this),t}apply(t){this._helper.apply(t),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(t){const u=this._mercatorTransform.getProjectionData(t),d=this._verticalPerspectiveTransform.getProjectionData(t);return{mainMatrix:this.isGlobeRendering?d.mainMatrix:u.mainMatrix,clippingPlane:d.clippingPlane,tileMercatorCoords:d.tileMercatorCoords,projectionTransition:t.applyGlobeMatrix?this._globeness:0,fallbackMatrix:u.fallbackMatrix}}isLocationOccluded(t){return this.currentTransform.isLocationOccluded(t)}transformLightDirection(t){return this.currentTransform.transformLightDirection(t)}getPixelScale(){return c.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return c.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(t,u,d){const _=this._mercatorTransform.getPitchedTextCorrection(t,u,d),S=this._verticalPerspectiveTransform.getPitchedTextCorrection(t,u,d);return c.bk(_,S,this._globeness)}projectTileCoordinates(t,u,d,_){return this.currentTransform.projectTileCoordinates(t,u,d,_)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(t){return this.currentTransform.calculateFogMatrix(t)}getVisibleUnwrappedCoordinates(t){return this.currentTransform.getVisibleUnwrappedCoordinates(t)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(t){this._mercatorTransform.recalculateZoomAndCenter(t),this._verticalPerspectiveTransform.recalculateZoomAndCenter(t)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,u){return this.currentTransform.lngLatToCameraDepth(t,u)}populateCache(t){this._mercatorTransform.populateCache(t),this._verticalPerspectiveTransform.populateCache(t)}getBounds(){return this.currentTransform.getBounds()}getConstrained(t,u){return this.currentTransform.getConstrained(t,u)}calculateCenterFromCameraLngLatAlt(t,u,d,_){return this._helper.calculateCenterFromCameraLngLatAlt(t,u,d,_)}setLocationAtPoint(t,u){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(t,u),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(t,u),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(t,u){return this.currentTransform.locationToScreenPoint(t,u)}screenPointToMercatorCoordinate(t,u){return this.currentTransform.screenPointToMercatorCoordinate(t,u)}screenPointToLocation(t,u){return this.currentTransform.screenPointToLocation(t,u)}isPointOnMapSurface(t,u){return this.currentTransform.isPointOnMapSurface(t,u)}getRayDirectionFromPixel(t){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(t)}getMatrixForModel(t,u){return this.currentTransform.getMatrixForModel(t,u)}getProjectionDataForCustomLayer(t=!0){const u=this._mercatorTransform.getProjectionDataForCustomLayer(t);if(!this.isGlobeRendering)return u;const d=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(t);return d.fallbackMatrix=u.mainMatrix,d}getFastPathSimpleProjectionMatrix(t){return this.currentTransform.getFastPathSimpleProjectionMatrix(t)}}class ki{get useGlobeControls(){return!0}handlePanInertia(t,u){const d=Gd(t,u);return Math.abs(d.lng-u.center.lng)>180&&(d.lng=u.center.lng+179.5*Math.sign(d.lng-u.center.lng)),{easingCenter:d,easingOffset:new c.P(0,0)}}handleMapControlsRollPitchBearingZoom(t,u){const d=t.around,_=u.screenPointToLocation(d);t.bearingDelta&&u.setBearing(u.bearing+t.bearingDelta),t.pitchDelta&&u.setPitch(u.pitch+t.pitchDelta),t.rollDelta&&u.setRoll(u.roll+t.rollDelta);const S=u.zoom;t.zoomDelta&&u.setZoom(u.zoom+t.zoomDelta);const A=u.zoom-S;if(A===0)return;const I=c.bA(u.center.lng,_.lng),O=I/(Math.abs(I/180)+1),B=c.bA(u.center.lat,_.lat),U=u.getRayDirectionFromPixel(d),G=u.cameraPosition,V=-1*c.aX(G,U),Q=c.bp();c.aS(Q,G,[U[0]*V,U[1]*V,U[2]*V]);const ae=c.aZ(Q)-1,ce=Math.exp(.5*-Math.max(ae-.3,0)),he=pu(u.worldSize,u.center.lat)/Math.min(u.width,u.height),fe=c.bn(he,.9,.5,1,.25),pe=(1-c.af(-A))*Math.min(ce,fe),be=u.center.lat,me=u.zoom,we=new c.S(u.center.lng+O*pe,c.ah(u.center.lat+B*pe,-c.ai,c.ai));u.setLocationAtPoint(_,d);const Ee=u.center,ge=c.bn(Math.abs(I),45,85,0,1),Ie=c.bn(he,.75,.35,0,1),Ze=Math.pow(Math.max(ge,Ie),.25),Fe=c.bA(Ee.lng,we.lng),Ve=c.bA(Ee.lat,we.lat);u.setCenter(new c.S(Ee.lng+Fe*Ze,Ee.lat+Ve*Ze).wrap()),u.setZoom(me+On(be,u.center.lat))}handleMapControlsPan(t,u,d){if(!t.panDelta)return;const _=u.center.lat,S=u.zoom;u.setCenter(Gd(t.panDelta,u).wrap()),u.setZoom(S+On(_,u.center.lat))}cameraForBoxAndBearing(t,u,d,_,S){const A=Ai(t,u,d,_,S),I=u.left/S.width*2-1,O=(S.width-u.right)/S.width*2-1,B=u.top/S.height*-2+1,U=(S.height-u.bottom)/S.height*-2+1,G=c.bA(d.getWest(),d.getEast())<0,V=G?d.getEast():d.getWest(),Q=G?d.getWest():d.getEast(),ae=Math.max(d.getNorth(),d.getSouth()),ce=Math.min(d.getNorth(),d.getSouth()),he=V+.5*c.bA(V,Q),fe=ae+.5*c.bA(ae,ce),pe=S.clone();pe.setCenter(A.center),pe.setBearing(A.bearing),pe.setPitch(0),pe.setRoll(0),pe.setZoom(A.zoom);const be=pe.modelViewProjectionMatrix,me=[fi(d.getNorthWest()),fi(d.getNorthEast()),fi(d.getSouthWest()),fi(d.getSouthEast()),fi(new c.S(Q,fe)),fi(new c.S(V,fe)),fi(new c.S(he,ae)),fi(new c.S(he,ce))],we=fi(A.center);let Ee=Number.POSITIVE_INFINITY;for(const ge of me)I<0&&(Ee=ki.getLesserNonNegativeNonNull(Ee,ki.solveVectorScale(ge,we,be,"x",I))),O>0&&(Ee=ki.getLesserNonNegativeNonNull(Ee,ki.solveVectorScale(ge,we,be,"x",O))),B>0&&(Ee=ki.getLesserNonNegativeNonNull(Ee,ki.solveVectorScale(ge,we,be,"y",B))),U<0&&(Ee=ki.getLesserNonNegativeNonNull(Ee,ki.solveVectorScale(ge,we,be,"y",U)));if(Number.isFinite(Ee)&&Ee!==0)return A.zoom=pe.zoom+c.ak(Ee),A;ko()}handleJumpToCenterZoom(t,u){const d=t.center.lat,_=t.getConstrained(u.center?c.S.convert(u.center):t.center,t.zoom).center;t.setCenter(_.wrap());const S=u.zoom!==void 0?+u.zoom:t.zoom+On(d,_.lat);t.zoom!==S&&t.setZoom(S)}handleEaseTo(t,u){const d=t.zoom,_=t.center,S=t.padding,A={roll:t.roll,pitch:t.pitch,bearing:t.bearing},I={roll:u.roll===void 0?t.roll:u.roll,pitch:u.pitch===void 0?t.pitch:u.pitch,bearing:u.bearing===void 0?t.bearing:u.bearing},O=u.zoom!==void 0,B=!t.isPaddingEqual(u.padding);let U=!1;const G=u.center?c.S.convert(u.center):_,V=t.getConstrained(G,d).center;du(t,V);const Q=t.clone();Q.setCenter(V),Q.setZoom(O?+u.zoom:d+On(_.lat,G.lat)),Q.setBearing(u.bearing);const ae=new c.P(c.ah(t.centerPoint.x+u.offsetAsPoint.x,0,t.width),c.ah(t.centerPoint.y+u.offsetAsPoint.y,0,t.height));Q.setLocationAtPoint(V,ae);const ce=(u.offset&&u.offsetAsPoint.mag())>0?Q.center:V,he=O?+u.zoom:d+On(_.lat,ce.lat),fe=d+On(_.lat,0),pe=he+On(ce.lat,0),be=c.bA(_.lng,ce.lng),me=c.bA(_.lat,ce.lat),we=c.af(pe-fe);return U=he!==d,{easeFunc:Ee=>{if(c.be(A,I)||Pi({startEulerAngles:A,endEulerAngles:I,tr:t,k:Ee,useSlerp:A.roll!=I.roll}),B&&t.interpolatePadding(S,u.padding,Ee),u.around)c.w("Easing around a point is not supported under globe projection."),t.setLocationAtPoint(u.around,u.aroundPoint);else{const ge=pe>fe?Math.min(2,we):Math.max(.5,we),Ie=Math.pow(ge,1-Ee),Ze=bf(_,be,me,Ee*Ie);t.setCenter(Ze.wrap())}if(U){const ge=c.C.number(fe,pe,Ee)+On(0,t.center.lat);t.setZoom(ge)}},isZooming:U,elevationCenter:ce}}handleFlyTo(t,u){const d=u.zoom!==void 0,_=t.center,S=t.zoom,A=t.padding,I=!t.isPaddingEqual(u.padding),O=t.getConstrained(c.S.convert(u.center||u.locationAtOffset),S).center,B=d?+u.zoom:t.zoom+On(t.center.lat,O.lat),U=t.clone();U.setCenter(O),U.setZoom(B),U.setBearing(u.bearing);const G=new c.P(c.ah(t.centerPoint.x+u.offsetAsPoint.x,0,t.width),c.ah(t.centerPoint.y+u.offsetAsPoint.y,0,t.height));U.setLocationAtPoint(O,G);const V=U.center;du(t,V);const Q=(function(me,we,Ee){const ge=fi(we),Ie=fi(Ee),Ze=c.aX(ge,Ie),Fe=Math.acos(Ze),Ve=cc(me);return Fe/(2*Math.PI)*Ve})(t,_,V),ae=S+On(_.lat,0),ce=B+On(V.lat,0),he=c.af(ce-ae);let fe;if(typeof u.minZoom=="number"){const me=+u.minZoom+On(V.lat,0),we=Math.min(me,ae,ce)+On(0,V.lat),Ee=t.getConstrained(V,we).zoom+On(V.lat,0);fe=c.af(Ee-ae)}const pe=c.bA(_.lng,V.lng),be=c.bA(_.lat,V.lat);return{easeFunc:(me,we,Ee,ge)=>{const Ie=bf(_,pe,be,Ee);I&&t.interpolatePadding(A,u.padding,me);const Ze=me===1?V:Ie;t.setCenter(Ze.wrap());const Fe=ae+c.ak(we);t.setZoom(me===1?B:Fe+On(0,Ze.lat))},scaleOfZoom:he,targetCenter:V,scaleOfMinZoom:fe,pixelPathLength:Q}}static solveVectorScale(t,u,d,_,S){const A=_==="x"?[d[0],d[4],d[8],d[12]]:[d[1],d[5],d[9],d[13]],I=[d[3],d[7],d[11],d[15]],O=t[0]*A[0]+t[1]*A[1]+t[2]*A[2],B=t[0]*I[0]+t[1]*I[1]+t[2]*I[2],U=u[0]*A[0]+u[1]*A[1]+u[2]*A[2],G=u[0]*I[0]+u[1]*I[1]+u[2]*I[2];return U+S*B===O+S*G||I[3]*(O-U)+A[3]*(G-B)+O*G==U*B?null:(U+A[3]-S*G-S*I[3])/(U-O-S*G+S*B)}static getLesserNonNegativeNonNull(t,u){return u!==null&&u>=0&&u<t?u:t}}class xf{constructor(t){this._globe=t,this._mercatorCameraHelper=new En,this._verticalPerspectiveCameraHelper=new ki}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(t,u){return this.currentHelper.handlePanInertia(t,u)}handleMapControlsRollPitchBearingZoom(t,u){return this.currentHelper.handleMapControlsRollPitchBearingZoom(t,u)}handleMapControlsPan(t,u,d){this.currentHelper.handleMapControlsPan(t,u,d)}cameraForBoxAndBearing(t,u,d,_,S){return this.currentHelper.cameraForBoxAndBearing(t,u,d,_,S)}handleJumpToCenterZoom(t,u){this.currentHelper.handleJumpToCenterZoom(t,u)}handleEaseTo(t,u){return this.currentHelper.handleEaseTo(t,u)}handleFlyTo(t,u){return this.currentHelper.handleFlyTo(t,u)}}const yh=(b,t)=>c.y(b,t&&t.filter((u=>u.identifier!=="source.canvas"))),hm=c.bE();class wf extends c.E{constructor(t,u={}){var d,_;super(),this._rtlPluginLoaded=()=>{for(const A in this.sourceCaches){const I=this.sourceCaches[A].getSource().type;I!=="vector"&&I!=="geojson"||this.sourceCaches[A].reload()}},this.map=t,this.dispatcher=new Ft(Zt(),t._getMapId()),this.dispatcher.registerMessageHandler("GG",((A,I)=>this.getGlyphs(A,I))),this.dispatcher.registerMessageHandler("GI",((A,I)=>this.getImages(A,I))),this.imageManager=new ht,this.imageManager.setEventedParent(this);const S=((d=t._container)===null||d===void 0?void 0:d.lang)||typeof document<"u"&&((_=document.documentElement)===null||_===void 0?void 0:_.lang)||void 0;this.glyphManager=new rt(t._requestManager,u.localIdeographFontFamily,S),this.lineAtlas=new Ct(256,512),this.crossTileSymbolIndex=new dl,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",c.bG()),An().on(To,this._rtlPluginLoaded),this.on("data",(A=>{if(A.dataType!=="source"||A.sourceDataType!=="metadata")return;const I=this.sourceCaches[A.sourceId];if(!I)return;const O=I.getSource();if(O&&O.vectorLayerIds)for(const B in this._layers){const U=this._layers[B];U.source===O.id&&this._validateLayer(U)}}))}setGlobalStateProperty(t,u){var d,_,S;this._checkLoaded();const A=u===null?(S=(_=(d=this.stylesheet.state)===null||d===void 0?void 0:d[t])===null||_===void 0?void 0:_.default)!==null&&S!==void 0?S:null:u;if(c.bH(A,this._globalState[t]))return this;this._globalState[t]=A,this._applyGlobalStateChanges([t])}getGlobalState(){return this._globalState}setGlobalState(t){this._checkLoaded();const u=[];for(const d in t)!c.bH(this._globalState[d],t[d].default)&&(u.push(d),this._globalState[d]=t[d].default);this._applyGlobalStateChanges(u)}_applyGlobalStateChanges(t){if(t.length===0)return;const u=new Set,d={};for(const _ of t){d[_]=this._globalState[_];for(const S in this._layers){const A=this._layers[S],I=A.getLayoutAffectingGlobalStateRefs(),O=A.getPaintAffectingGlobalStateRefs();if(I.has(_)&&u.add(A.source),O.has(_))for(const{name:B,value:U}of O.get(_))this._updatePaintProperty(A,B,U)}}this.dispatcher.broadcast("UGS",d);for(const _ in this.sourceCaches)u.has(_)&&(this._reloadSource(_),this._changed=!0)}loadURL(t,u={},d){this.fire(new c.l("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const _=this.map._requestManager.transformRequest(t,"Style");this._loadStyleRequest=new AbortController;const S=this._loadStyleRequest;c.j(_,this._loadStyleRequest).then((A=>{this._loadStyleRequest=null,this._load(A.data,u,d)})).catch((A=>{this._loadStyleRequest=null,A&&!S.signal.aborted&&this.fire(new c.k(A))}))}loadJSON(t,u={},d){this.fire(new c.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,N.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,u.validate=u.validate!==!1,this._load(t,u,d)})).catch((()=>{}))}loadEmpty(){this.fire(new c.l("dataloading",{dataType:"style"})),this._load(hm,{validate:!1})}_load(t,u,d){var _,S;let A=u.transformStyle?u.transformStyle(d,t):t;if(!u.validate||!yh(this,c.z(A))){A=Object.assign({},A),this._loaded=!0,this.stylesheet=A;for(const I in A.sources)this.addSource(I,A.sources[I],{validate:!1});A.sprite?this._loadSprite(A.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(A.glyphs),this._createLayers(),this.light=new Ue(this.stylesheet.light),this._setProjectionInternal(((_=this.stylesheet.projection)===null||_===void 0?void 0:_.type)||"mercator"),this.sky=new nt(this.stylesheet.sky),this.map.setTerrain((S=this.stylesheet.terrain)!==null&&S!==void 0?S:null),this.fire(new c.l("data",{dataType:"style"})),this.fire(new c.l("style.load"))}}_createLayers(){var t;const u=c.bI(this.stylesheet.layers);this.setGlobalState((t=this.stylesheet.state)!==null&&t!==void 0?t:null),this.dispatcher.broadcast("SL",u),this._order=u.map((d=>d.id)),this._layers={},this._serializedLayers=null;for(const d of u){const _=c.bJ(d,this._globalState);_.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=_}}_loadSprite(t,u=!1,d=void 0){let _;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(S,A,I,O){return c._(this,void 0,void 0,(function*(){const B=Pe(S),U=I>1?"@2x":"",G={},V={};for(const{id:Q,url:ae}of B){const ce=A.transformRequest(Me(ae,U,".json"),"SpriteJSON");G[Q]=c.j(ce,O);const he=A.transformRequest(Me(ae,U,".png"),"SpriteImage");V[Q]=ve.getImage(he,O)}return yield Promise.all([...Object.values(G),...Object.values(V)]),(function(Q,ae){return c._(this,void 0,void 0,(function*(){const ce={};for(const he in Q){ce[he]={};const fe=N.getImageCanvasContext((yield ae[he]).data),pe=(yield Q[he]).data;for(const be in pe){const{width:me,height:we,x:Ee,y:ge,sdf:Ie,pixelRatio:Ze,stretchX:Fe,stretchY:Ve,content:Xe,textFitWidth:Pt,textFitHeight:xt}=pe[be];ce[he][be]={data:null,pixelRatio:Ze,sdf:Ie,stretchX:Fe,stretchY:Ve,content:Xe,textFitWidth:Pt,textFitHeight:xt,spriteData:{width:me,height:we,x:Ee,y:ge,context:fe}}}}return ce}))})(G,V)}))})(t,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((S=>{if(this._spriteRequest=null,S)for(const A in S){this._spritesImagesIds[A]=[];const I=this._spritesImagesIds[A]?this._spritesImagesIds[A].filter((O=>!(O in S))):[];for(const O of I)this.imageManager.removeImage(O),this._changedImages[O]=!0;for(const O in S[A]){const B=A==="default"?O:`${A}:${O}`;this._spritesImagesIds[A].push(B),B in this.imageManager.images?this.imageManager.updateImage(B,S[A][O],!1):this.imageManager.addImage(B,S[A][O]),u&&(this._changedImages[B]=!0)}}})).catch((S=>{this._spriteRequest=null,_=S,this.fire(new c.k(_))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"})),d&&d(_)}))}_unloadSprite(){for(const t of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(t),this._changedImages[t]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}_validateLayer(t){const u=this.sourceCaches[t.source];if(!u)return;const d=t.sourceLayer;if(!d)return;const _=u.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(d)===-1)&&this.fire(new c.k(new Error(`Source layer "${d}" does not exist on source "${_.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(t,u=!1){const d=this._serializedAllLayers();if(!t||t.length===0)return Object.values(u?c.bK(d):d);const _=[];for(const S of t)if(d[S]){const A=u?c.bK(d[S]):d[S];_.push(A)}return _}_serializedAllLayers(){let t=this._serializedLayers;if(t)return t;t=this._serializedLayers={};const u=Object.keys(this._layers);for(const d of u){const _=this._layers[d];_.type!=="custom"&&(t[d]=_.serialize())}return t}hasTransitions(){var t,u,d;if(!((t=this.light)===null||t===void 0)&&t.hasTransition()||!((u=this.sky)===null||u===void 0)&&u.hasTransition()||!((d=this.projection)===null||d===void 0)&&d.hasTransition())return!0;for(const _ in this.sourceCaches)if(this.sourceCaches[_].hasTransition())return!0;for(const _ in this._layers)if(this._layers[_].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;const u=this._changed;if(u){const _=Object.keys(this._updatedLayers),S=Object.keys(this._removedLayers);(_.length||S.length)&&this._updateWorkerLayers(_,S);for(const A in this._updatedSources){const I=this._updatedSources[A];if(I==="reload")this._reloadSource(A);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(A)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const A in this._updatedPaintProps)this._layers[A].updateTransitions(t);this.light.updateTransitions(t),this.sky.updateTransitions(t),this._resetUpdates()}const d={};for(const _ in this.sourceCaches){const S=this.sourceCaches[_];d[_]=S.used,S.used=!1}for(const _ of this._order){const S=this._layers[_];S.recalculate(t,this._availableImages),!S.isHidden(t.zoom)&&S.source&&(this.sourceCaches[S.source].used=!0)}for(const _ in d){const S=this.sourceCaches[_];!!d[_]!=!!S.used&&S.fire(new c.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:_}))}this.light.recalculate(t),this.sky.recalculate(t),this.projection.recalculate(t),this.z=t.zoom,u&&this.fire(new c.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(t,u){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(t,!1),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(t,u={}){var d;this._checkLoaded();const _=this.serialize();if(t=u.transformStyle?u.transformStyle(_,t):t,((d=u.validate)===null||d===void 0||d)&&yh(this,c.z(t)))return!1;(t=c.bK(t)).layers=c.bI(t.layers);const S=c.bL(_,t),A=this._getOperationsToPerform(S);if(A.unimplemented.length>0)throw new Error(`Unimplemented: ${A.unimplemented.join(", ")}.`);if(A.operations.length===0)return!1;for(const I of A.operations)I();return this.stylesheet=t,this._serializedLayers=null,!0}_getOperationsToPerform(t){const u=[],d=[];for(const _ of t)switch(_.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":u.push((()=>this.addLayer.apply(this,_.args)));break;case"removeLayer":u.push((()=>this.removeLayer.apply(this,_.args)));break;case"setPaintProperty":u.push((()=>this.setPaintProperty.apply(this,_.args)));break;case"setLayoutProperty":u.push((()=>this.setLayoutProperty.apply(this,_.args)));break;case"setFilter":u.push((()=>this.setFilter.apply(this,_.args)));break;case"addSource":u.push((()=>this.addSource.apply(this,_.args)));break;case"removeSource":u.push((()=>this.removeSource.apply(this,_.args)));break;case"setLayerZoomRange":u.push((()=>this.setLayerZoomRange.apply(this,_.args)));break;case"setLight":u.push((()=>this.setLight.apply(this,_.args)));break;case"setGeoJSONSourceData":u.push((()=>this.setGeoJSONSourceData.apply(this,_.args)));break;case"setGlyphs":u.push((()=>this.setGlyphs.apply(this,_.args)));break;case"setSprite":u.push((()=>this.setSprite.apply(this,_.args)));break;case"setTerrain":u.push((()=>this.map.setTerrain.apply(this,_.args)));break;case"setSky":u.push((()=>this.setSky.apply(this,_.args)));break;case"setProjection":this.setProjection.apply(this,_.args);break;case"setGlobalState":u.push((()=>this.setGlobalState.apply(this,_.args)));break;case"setTransition":u.push((()=>{}));break;default:d.push(_.command)}return{operations:u,unimplemented:d}}addImage(t,u){if(this.getImage(t))return this.fire(new c.k(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,u),this._afterImageUpdated(t)}updateImage(t,u){this.imageManager.updateImage(t,u)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new c.k(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,u,d={}){if(this._checkLoaded(),this.sourceCaches[t]!==void 0)throw new Error(`Source "${t}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(c.z.source,`sources.${t}`,u,null,d))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const _=this.sourceCaches[t]=new br(t,u,this.dispatcher);_.style=this,_.setEventedParent(this,(()=>({isSourceLoaded:_.loaded(),source:_.serialize(),sourceId:t}))),_.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===t)return this.fire(new c.k(new Error(`Source "${t}" cannot be removed while layer "${d}" is using it.`)));const u=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],u.fire(new c.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,u){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error(`There is no source with this ID=${t}`);const d=this.sourceCaches[t].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(u),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(t,u,d={}){this._checkLoaded();const _=t.id;if(this.getLayer(_))return void this.fire(new c.k(new Error(`Layer "${_}" already exists on this map.`)));let S;if(t.type==="custom"){if(yh(this,c.bM(t)))return;S=c.bJ(t,this._globalState)}else{if("source"in t&&typeof t.source=="object"&&(this.addSource(_,t.source),t=c.bK(t),t=c.e(t,{source:_})),this._validate(c.z.layer,`layers.${_}`,t,{arrayIndex:-1},d))return;S=c.bJ(t,this._globalState),this._validateLayer(S),S.setEventedParent(this,{layer:{id:_}})}const A=u?this._order.indexOf(u):this._order.length;if(u&&A===-1)this.fire(new c.k(new Error(`Cannot add layer "${_}" before non-existing layer "${u}".`)));else{if(this._order.splice(A,0,_),this._layerOrderChanged=!0,this._layers[_]=S,this._removedLayers[_]&&S.source&&S.type!=="custom"){const I=this._removedLayers[_];delete this._removedLayers[_],I.type!==S.type?this._updatedSources[S.source]="clear":(this._updatedSources[S.source]="reload",this.sourceCaches[S.source].pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map)}}moveLayer(t,u){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new c.k(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===u)return;const d=this._order.indexOf(t);this._order.splice(d,1);const _=u?this._order.indexOf(u):this._order.length;u&&_===-1?this.fire(new c.k(new Error(`Cannot move layer "${t}" before non-existing layer "${u}".`))):(this._order.splice(_,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const u=this._layers[t];if(!u)return void this.fire(new c.k(new Error(`Cannot remove non-existing layer "${t}".`)));u.setEventedParent(null);const d=this._order.indexOf(t);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=u,delete this._layers[t],this._serializedLayers&&delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],u.onRemove&&u.onRemove(this.map)}getLayer(t){return this._layers[t]}getLayersOrder(){return[...this._order]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,u,d){this._checkLoaded();const _=this.getLayer(t);_?_.minzoom===u&&_.maxzoom===d||(u!=null&&(_.minzoom=u),d!=null&&(_.maxzoom=d),this._updateLayer(_)):this.fire(new c.k(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,u,d={}){this._checkLoaded();const _=this.getLayer(t);if(_){if(!c.bH(_.filter,u))return u==null?(_.setFilter(void 0),void this._updateLayer(_)):void(this._validate(c.z.filter,`layers.${_.id}.filter`,u,null,d)||(_.setFilter(c.bK(u)),this._updateLayer(_)))}else this.fire(new c.k(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return c.bK(this.getLayer(t).filter)}setLayoutProperty(t,u,d,_={}){this._checkLoaded();const S=this.getLayer(t);S?c.bH(S.getLayoutProperty(u),d)||(S.setLayoutProperty(u,d,_),this._updateLayer(S)):this.fire(new c.k(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,u){const d=this.getLayer(t);if(d)return d.getLayoutProperty(u);this.fire(new c.k(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,u,d,_={}){this._checkLoaded();const S=this.getLayer(t);S?c.bH(S.getPaintProperty(u),d)||this._updatePaintProperty(S,u,d,_):this.fire(new c.k(new Error(`Cannot style non-existing layer "${t}".`)))}_updatePaintProperty(t,u,d,_={}){t.setPaintProperty(u,d,_)&&this._updateLayer(t),this._changed=!0,this._updatedPaintProps[t.id]=!0,this._serializedLayers=null}getPaintProperty(t,u){return this.getLayer(t).getPaintProperty(u)}setFeatureState(t,u){this._checkLoaded();const d=t.source,_=t.sourceLayer,S=this.sourceCaches[d];if(S===void 0)return void this.fire(new c.k(new Error(`The source '${d}' does not exist in the map's style.`)));const A=S.getSource().type;A==="geojson"&&_?this.fire(new c.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):A!=="vector"||_?(t.id===void 0&&this.fire(new c.k(new Error("The feature id parameter must be provided."))),S.setFeatureState(_,t.id,u)):this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,u){this._checkLoaded();const d=t.source,_=this.sourceCaches[d];if(_===void 0)return void this.fire(new c.k(new Error(`The source '${d}' does not exist in the map's style.`)));const S=_.getSource().type,A=S==="vector"?t.sourceLayer:void 0;S!=="vector"||A?u&&typeof t.id!="string"&&typeof t.id!="number"?this.fire(new c.k(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(A,t.id,u):this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();const u=t.source,d=t.sourceLayer,_=this.sourceCaches[u];if(_!==void 0)return _.getSource().type!=="vector"||d?(t.id===void 0&&this.fire(new c.k(new Error("The feature id parameter must be provided."))),_.getFeatureState(d,t.id)):void this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.k(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const t=c.bN(this.sourceCaches,(S=>S.serialize())),u=this._serializeByIds(this._order,!0),d=this.map.getTerrain()||void 0,_=this.stylesheet;return c.bO({version:_.version,name:_.name,metadata:_.metadata,light:_.light,sky:_.sky,center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,sprite:_.sprite,glyphs:_.glyphs,transition:_.transition,projection:_.projection,sources:t,layers:u,terrain:d},(S=>S!==void 0))}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&this.sourceCaches[t.source].getSource().type!=="raster"&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(t){const u=A=>this._layers[A].type==="fill-extrusion",d={},_=[];for(let A=this._order.length-1;A>=0;A--){const I=this._order[A];if(u(I)){d[I]=A;for(const O of t){const B=O[I];if(B)for(const U of B)_.push(U)}}}_.sort(((A,I)=>I.intersectionZ-A.intersectionZ));const S=[];for(let A=this._order.length-1;A>=0;A--){const I=this._order[A];if(u(I))for(let O=_.length-1;O>=0;O--){const B=_[O].feature;if(d[B.layer.id]<A)break;S.push(B),_.pop()}else for(const O of t){const B=O[I];if(B)for(const U of B)S.push(U.feature)}}return S}queryRenderedFeatures(t,u,d){u&&u.filter&&this._validate(c.z.filter,"queryRenderedFeatures.filter",u.filter,null,u);const _={};if(u&&u.layers){if(!(Array.isArray(u.layers)||u.layers instanceof Set))return this.fire(new c.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const B of u.layers){const U=this._layers[B];if(!U)return this.fire(new c.k(new Error(`The layer '${B}' does not exist in the map's style and cannot be queried for features.`))),[];_[U.source]=!0}}const S=[];u.availableImages=this._availableImages;const A=this._serializedAllLayers(),I=u.layers instanceof Set?u.layers:Array.isArray(u.layers)?new Set(u.layers):null,O=Object.assign(Object.assign({},u),{layers:I,globalState:this._globalState});for(const B in this.sourceCaches)u.layers&&!_[B]||S.push(St(this.sourceCaches[B],this._layers,A,t,O,d,this.map.terrain?(U,G,V)=>this.map.terrain.getElevation(U,G,V):void 0));return this.placement&&S.push((function(B,U,G,V,Q,ae,ce){const he={},fe=ae.queryRenderedSymbols(V),pe=[];for(const be of Object.keys(fe).map(Number))pe.push(ce[be]);pe.sort(Gt);for(const be of pe){const me=be.featureIndex.lookupSymbolFeatures(fe[be.bucketInstanceId],U,be.bucketIndex,be.sourceLayerIndex,{filterSpec:Q.filter,globalState:Q.globalState},Q.layers,Q.availableImages,B);for(const we in me){const Ee=he[we]=he[we]||[],ge=me[we];ge.sort(((Ie,Ze)=>{const Fe=be.featureSortOrder;if(Fe){const Ve=Fe.indexOf(Ie.featureIndex);return Fe.indexOf(Ze.featureIndex)-Ve}return Ze.featureIndex-Ie.featureIndex}));for(const Ie of ge)Ee.push(Ie)}}return(function(be,me,we){for(const Ee in be)for(const ge of be[Ee])Nt(ge,we[me[Ee].source]);return be})(he,B,G)})(this._layers,A,this.sourceCaches,t,O,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(S)}querySourceFeatures(t,u){u?.filter&&this._validate(c.z.filter,"querySourceFeatures.filter",u.filter,null,u);const d=this.sourceCaches[t];return d?(function(_,S){const A=_.getRenderableIds().map((B=>_.getTileByID(B))),I=[],O={};for(let B=0;B<A.length;B++){const U=A[B],G=U.tileID.canonical.key;O[G]||(O[G]=!0,U.querySourceFeatures(I,S))}return I})(d,u?Object.assign(Object.assign({},u),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(t,u={}){this._checkLoaded();const d=this.light.getLight();let _=!1;for(const A in t)if(!c.bH(t[A],d[A])){_=!0;break}if(!_)return;const S={now:N.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,u),this.light.updateTransitions(S)}getProjection(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.projection}setProjection(t){if(this._checkLoaded(),this.projection){if(this.projection.name===t.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=t,this._setProjectionInternal(t.type)}getSky(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.sky}setSky(t,u={}){this._checkLoaded();const d=this.getSky();let _=!1;if(!t&&!d)return;if(t&&!d)_=!0;else if(!t&&d)_=!0;else for(const A in t)if(!c.bH(t[A],d[A])){_=!0;break}if(!_)return;const S={now:N.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=t,this.sky.setSky(t,u),this.sky.updateTransitions(S)}_setProjectionInternal(t){const u=(function(d){if(Array.isArray(d)){const _=new gl({type:d});return{projection:_,transform:new pc,cameraHelper:new xf(_)}}switch(d){case"mercator":return{projection:new _r,transform:new Br,cameraHelper:new En};case"globe":{const _=new gl({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:_,transform:new pc,cameraHelper:new xf(_)}}case"vertical-perspective":return{projection:new ml,transform:new dc,cameraHelper:new ki};default:return c.w(`Unknown projection name: ${d}. Falling back to mercator projection.`),{projection:new _r,transform:new Br,cameraHelper:new En}}})(t);this.projection=u.projection,this.map.migrateProjection(u.transform,u.cameraHelper);for(const d in this.sourceCaches)this.sourceCaches[d].reload()}_validate(t,u,d,_,S={}){return(!S||S.validate!==!1)&&yh(this,t.call(c.z,c.e({key:u,style:this.serialize(),value:d,styleSpec:c.v},_)))}_remove(t=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),An().off(To,this._rtlPluginLoaded);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const d=this.sourceCaches[u];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),t&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(t)}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(const u in this.sourceCaches)this.sourceCaches[u].update(t,this.map.terrain)}_generateCollisionBoxes(){for(const t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(t,u,d,_,S=!1){let A=!1,I=!1;const O={};for(const B of this._order){const U=this._layers[B];if(U.type!=="symbol")continue;if(!O[U.source]){const V=this.sourceCaches[U.source];O[U.source]=V.getRenderableIds(!0).map((Q=>V.getTileByID(Q))).sort(((Q,ae)=>ae.tileID.overscaledZ-Q.tileID.overscaledZ||(Q.tileID.isLessThan(ae.tileID)?-1:1)))}const G=this.crossTileSymbolIndex.addLayer(U,O[U.source],t.center.lng);A=A||G}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((S=S||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(N.now(),t.zoom))&&(this.pauseablePlacement=new lc(t,this.map.terrain,this._order,S,u,d,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,O),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(N.now()),I=!0),A&&this.pauseablePlacement.placement.setStale()),I||A)for(const B of this._order){const U=this._layers[B];U.type==="symbol"&&this.placement.updateLayerOpacities(U,O[U.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(N.now())}_releaseSymbolFadeTiles(){for(const t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,u){return c._(this,void 0,void 0,(function*(){const d=yield this.imageManager.getImages(u.icons);this._updateTilesForChangedImages();const _=this.sourceCaches[u.source];return _&&_.setDependencies(u.tileID.key,u.type,u.icons),d}))}getGlyphs(t,u){return c._(this,void 0,void 0,(function*(){const d=yield this.glyphManager.getGlyphs(u.stacks),_=this.sourceCaches[u.source];return _&&_.setDependencies(u.tileID.key,u.type,[""]),d}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(t,u={}){this._checkLoaded(),t&&this._validate(c.z.glyphs,"glyphs",t,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=t,this.glyphManager.entries={},this.glyphManager.setURL(t))}addSprite(t,u,d={},_){this._checkLoaded();const S=[{id:t,url:u}],A=[...Pe(this.stylesheet.sprite),...S];this._validate(c.z.sprite,"sprite",A,null,d)||(this.stylesheet.sprite=A,this._loadSprite(S,!0,_))}removeSprite(t){this._checkLoaded();const u=Pe(this.stylesheet.sprite);if(u.find((d=>d.id===t))){if(this._spritesImagesIds[t])for(const d of this._spritesImagesIds[t])this.imageManager.removeImage(d),this._changedImages[d]=!0;u.splice(u.findIndex((d=>d.id===t)),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[t],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}else this.fire(new c.k(new Error(`Sprite "${t}" doesn't exists on this map.`)))}getSprite(){return Pe(this.stylesheet.sprite)}setSprite(t,u={},d){this._checkLoaded(),t&&this._validate(c.z.sprite,"sprite",t,null,u)||(this.stylesheet.sprite=t,t?this._loadSprite(t,!0,d):(this._unloadSprite(),d&&d(null)))}}var fm=c.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class dm{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,u,d,_,S,A,I,O,B){this.context=t;let U=this.boundPaintVertexBuffers.length!==_.length;for(let G=0;!U&&G<_.length;G++)this.boundPaintVertexBuffers[G]!==_[G]&&(U=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==d||U||this.boundIndexBuffer!==S||this.boundVertexOffset!==A||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==O||this.boundDynamicVertexBuffer3!==B?this.freshBind(u,d,_,S,A,I,O,B):(t.bindVertexArray.set(this.vao),I&&I.bind(),S&&S.dynamicDraw&&S.bind(),O&&O.bind(),B&&B.bind())}freshBind(t,u,d,_,S,A,I,O){const B=t.numAttributes,U=this.context,G=U.gl;this.vao&&this.destroy(),this.vao=U.createVertexArray(),U.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=_,this.boundVertexOffset=S,this.boundDynamicVertexBuffer=A,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=O,u.enableAttributes(G,t);for(const V of d)V.enableAttributes(G,t);A&&A.enableAttributes(G,t),I&&I.enableAttributes(G,t),O&&O.enableAttributes(G,t),u.bind(),u.setVertexAttribPointers(G,t,S);for(const V of d)V.bind(),V.setVertexAttribPointers(G,t,S);A&&(A.bind(),A.setVertexAttribPointers(G,t,S)),_&&_.bind(),I&&(I.bind(),I.setVertexAttribPointers(G,t,S)),O&&(O.bind(),O.setVertexAttribPointers(G,t,S)),U.currentNumAttributes=B}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const vh=(b,t,u,d,_)=>({u_texture:0,u_ele_delta:b,u_fog_matrix:t,u_fog_color:u?u.properties.get("fog-color"):c.bf.white,u_fog_ground_blend:u?u.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:_?0:u?u.calculateFogBlendOpacity(d):0,u_horizon_color:u?u.properties.get("horizon-color"):c.bf.white,u_horizon_fog_blend:u?u.properties.get("horizon-fog-blend"):1,u_is_globe_mode:_?1:0}),Sf={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function bl(b){const t=[];for(let u=0;u<b.length;u++){if(b[u]===null)continue;const d=b[u].split(" ");t.push(d.pop())}return t}class Pf{constructor(t,u,d,_,S,A,I,O,B=[]){const U=t.gl;this.program=U.createProgram();const G=bl(u.staticAttributes),V=d?d.getBinderAttributes():[],Q=G.concat(V),ae=io.prelude.staticUniforms?bl(io.prelude.staticUniforms):[],ce=I.staticUniforms?bl(I.staticUniforms):[],he=u.staticUniforms?bl(u.staticUniforms):[],fe=d?d.getBinderUniforms():[],pe=ae.concat(ce).concat(he).concat(fe),be=[];for(const Fe of pe)be.indexOf(Fe)<0&&be.push(Fe);const me=d?d.defines():[];Oi(U)&&me.unshift("#version 300 es"),S&&me.push("#define OVERDRAW_INSPECTOR;"),A&&me.push("#define TERRAIN3D;"),O&&me.push(O),B&&me.push(...B);let we=me.concat(io.prelude.fragmentSource,I.fragmentSource,u.fragmentSource).join(`
`),Ee=me.concat(io.prelude.vertexSource,I.vertexSource,u.vertexSource).join(`
`);Oi(U)||(we=(function(Fe){return Fe.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(we),Ee=(function(Fe){return Fe.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(Ee));const ge=U.createShader(U.FRAGMENT_SHADER);if(U.isContextLost())return void(this.failedToCreate=!0);if(U.shaderSource(ge,we),U.compileShader(ge),!U.getShaderParameter(ge,U.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${U.getShaderInfoLog(ge)}`);U.attachShader(this.program,ge);const Ie=U.createShader(U.VERTEX_SHADER);if(U.isContextLost())return void(this.failedToCreate=!0);if(U.shaderSource(Ie,Ee),U.compileShader(Ie),!U.getShaderParameter(Ie,U.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${U.getShaderInfoLog(Ie)}`);U.attachShader(this.program,Ie),this.attributes={};const Ze={};this.numAttributes=Q.length;for(let Fe=0;Fe<this.numAttributes;Fe++)Q[Fe]&&(U.bindAttribLocation(this.program,Fe,Q[Fe]),this.attributes[Q[Fe]]=Fe);if(U.linkProgram(this.program),!U.getProgramParameter(this.program,U.LINK_STATUS))throw new Error(`Program failed to link: ${U.getProgramInfoLog(this.program)}`);U.deleteShader(Ie),U.deleteShader(ge);for(let Fe=0;Fe<be.length;Fe++){const Ve=be[Fe];if(Ve&&!Ze[Ve]){const Xe=U.getUniformLocation(this.program,Ve);Xe&&(Ze[Ve]=Xe)}}this.fixedUniforms=_(t,Ze),this.terrainUniforms=((Fe,Ve)=>({u_depth:new c.bP(Fe,Ve.u_depth),u_terrain:new c.bP(Fe,Ve.u_terrain),u_terrain_dim:new c.bg(Fe,Ve.u_terrain_dim),u_terrain_matrix:new c.bR(Fe,Ve.u_terrain_matrix),u_terrain_unpack:new c.bS(Fe,Ve.u_terrain_unpack),u_terrain_exaggeration:new c.bg(Fe,Ve.u_terrain_exaggeration)}))(t,Ze),this.projectionUniforms=((Fe,Ve)=>({u_projection_matrix:new c.bR(Fe,Ve.u_projection_matrix),u_projection_tile_mercator_coords:new c.bS(Fe,Ve.u_projection_tile_mercator_coords),u_projection_clipping_plane:new c.bS(Fe,Ve.u_projection_clipping_plane),u_projection_transition:new c.bg(Fe,Ve.u_projection_transition),u_projection_fallback_matrix:new c.bR(Fe,Ve.u_projection_fallback_matrix)}))(t,Ze),this.binderUniforms=d?d.getUniforms(t,Ze):[]}draw(t,u,d,_,S,A,I,O,B,U,G,V,Q,ae,ce,he,fe,pe,be){const me=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(d),t.setStencilMode(_),t.setColorMode(S),t.setCullFace(A),O){t.activeTexture.set(me.TEXTURE2),me.bindTexture(me.TEXTURE_2D,O.depthTexture),t.activeTexture.set(me.TEXTURE3),me.bindTexture(me.TEXTURE_2D,O.texture);for(const Ee in this.terrainUniforms)this.terrainUniforms[Ee].set(O[Ee])}if(B)for(const Ee in B)this.projectionUniforms[Sf[Ee]].set(B[Ee]);if(I)for(const Ee in this.fixedUniforms)this.fixedUniforms[Ee].set(I[Ee]);he&&he.setUniforms(t,this.binderUniforms,ae,{zoom:ce});let we=0;switch(u){case me.LINES:we=2;break;case me.TRIANGLES:we=3;break;case me.LINE_STRIP:we=1}for(const Ee of Q.get()){const ge=Ee.vaos||(Ee.vaos={});(ge[U]||(ge[U]=new dm)).bind(t,this,G,he?he.getPaintVertexBuffers():[],V,Ee.vertexOffset,fe,pe,be),me.drawElements(u,Ee.primitiveLength*we,me.UNSIGNED_SHORT,Ee.primitiveOffset*we*2)}}}function gu(b,t,u){const d=1/c.aC(u,1,t.transform.tileZoom),_=Math.pow(2,u.tileID.overscaledZ),S=u.tileSize*Math.pow(2,t.transform.tileZoom)/_,A=S*(u.tileID.canonical.x+u.tileID.wrap*_),I=S*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[d,b.fromScale,b.toScale],u_fade:b.t,u_pixel_coord_upper:[A>>16,I>>16],u_pixel_coord_lower:[65535&A,65535&I]}}const Wi=(b,t,u,d)=>{const _=b.style.light,S=_.properties.get("position"),A=[S.x,S.y,S.z],I=c.bV();_.properties.get("anchor")==="viewport"&&c.bW(I,b.transform.bearingInRadians),c.bX(A,A,I);const O=b.transform.transformLightDirection(A),B=_.properties.get("color");return{u_lightpos:A,u_lightpos_globe:O,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[B.r,B.g,B.b],u_vertical_gradient:+t,u_opacity:u,u_fill_translate:d}},pm=(b,t,u,d,_,S,A)=>c.e(Wi(b,t,u,d),gu(S,b,A),{u_height_factor:-Math.pow(2,_.overscaledZ)/A.tileSize/8}),mc=(b,t,u,d)=>c.e(gu(t,b,u),{u_fill_translate:d}),yu=(b,t)=>({u_world:b,u_fill_translate:t}),vu=(b,t,u,d,_)=>c.e(mc(b,t,u,_),{u_world:d}),Zd=(b,t,u,d,_)=>{const S=b.transform;let A,I,O=0;if(u.paint.get("circle-pitch-alignment")==="map"){const B=c.aC(t,1,S.zoom);A=!0,I=[B,B],O=B/(c.$*Math.pow(2,t.tileID.overscaledZ))*2*Math.PI*_}else A=!1,I=S.pixelsToGLUnits;return{u_camera_to_center_distance:S.cameraToCenterDistance,u_scale_with_map:+(u.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+A,u_device_pixel_ratio:b.pixelRatio,u_extrude_scale:I,u_globe_extrude_scale:O,u_translate:d}},gc=b=>({u_pixel_extrude_scale:[1/b.width,1/b.height]}),_u=b=>({u_viewport_size:[b.width,b.height]}),xl=(b,t=1)=>({u_color:b,u_overlay:0,u_overlay_scale:t}),Xd=(b,t,u,d)=>{const _=c.aC(b,1,t)/(c.$*Math.pow(2,b.tileID.overscaledZ))*2*Math.PI*d;return{u_extrude_scale:c.aC(b,1,t),u_intensity:u,u_globe_extrude_scale:_}},Af=(b,t,u,d)=>{const _=c.L();c.bY(_,0,b.width,b.height,0,0,1);const S=b.context.gl;return{u_matrix:_,u_world:[S.drawingBufferWidth,S.drawingBufferHeight],u_image:u,u_color_ramp:d,u_opacity:t.paint.get("heatmap-opacity")}},Kd=(b,t,u)=>{const d=u.paint.get("hillshade-accent-color");let _;switch(u.paint.get("hillshade-method")){case"basic":_=4;break;case"combined":_=1;break;case"igor":_=2;break;case"multidirectional":_=3;break;default:_=0}const S=u.getIlluminationProperties();for(let A=0;A<S.directionRadians.length;A++)u.paint.get("hillshade-illumination-anchor")==="viewport"&&(S.directionRadians[A]+=b.transform.bearingInRadians);return{u_image:0,u_latrange:wl(0,t.tileID),u_exaggeration:u.paint.get("hillshade-exaggeration"),u_altitudes:S.altitudeRadians,u_azimuths:S.directionRadians,u_accent:d,u_method:_,u_highlights:S.highlightColor,u_shadows:S.shadowColor}},Cf=(b,t)=>{const u=t.stride,d=c.L();return c.bY(d,0,c.$,-c.$,0,0,1),c.M(d,d,[0,-c.$,0]),{u_matrix:d,u_image:1,u_dimension:[u,u],u_zoom:b.overscaledZ,u_unpack:t.getUnpackVector()}};function wl(b,t){const u=Math.pow(2,t.canonical.z),d=t.canonical.y;return[new c.a1(0,d/u).toLngLat().lat,new c.a1(0,(d+1)/u).toLngLat().lat]}const bu=(b,t,u=0)=>({u_image:0,u_unpack:t.getUnpackVector(),u_dimension:[t.stride,t.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:u,u_opacity:b.paint.get("color-relief-opacity")}),_h=(b,t,u,d)=>{const _=b.transform;return{u_translation:_c(b,t,u),u_ratio:d/c.aC(t,1,_.zoom),u_device_pixel_ratio:b.pixelRatio,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},yc=(b,t,u,d,_)=>c.e(_h(b,t,u,d),{u_image:0,u_image_height:_}),Tf=(b,t,u,d,_)=>{const S=b.transform,A=vc(t,S);return{u_translation:_c(b,t,u),u_texsize:t.imageAtlasTexture.size,u_ratio:d/c.aC(t,1,S.zoom),u_device_pixel_ratio:b.pixelRatio,u_image:0,u_scale:[A,_.fromScale,_.toScale],u_fade:_.t,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},Ns=(b,t,u,d,_,S)=>{const A=b.lineAtlas,I=vc(t,b.transform),O=u.layout.get("line-cap")==="round",B=A.getDash(_.from,O),U=A.getDash(_.to,O),G=B.width*S.fromScale,V=U.width*S.toScale;return c.e(_h(b,t,u,d),{u_patternscale_a:[I/G,-B.height/2],u_patternscale_b:[I/V,-U.height/2],u_sdfgamma:A.width/(256*Math.min(G,V)*b.pixelRatio)/2,u_image:0,u_tex_y_a:B.y,u_tex_y_b:U.y,u_mix:S.t})};function vc(b,t){return 1/c.aC(b,1,t.tileZoom)}function _c(b,t,u){return c.aD(b.transform,t,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const xu=(b,t,u,d,_)=>{return{u_tl_parent:b,u_scale_parent:t,u_buffer_scale:1,u_fade_t:u.mix,u_opacity:u.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(A=d.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(S=d.paint.get("raster-contrast"),S>0?1/(1-S):1+S),u_spin_weights:Yd(d.paint.get("raster-hue-rotate")),u_coords_top:[_[0].x,_[0].y,_[1].x,_[1].y],u_coords_bottom:[_[3].x,_[3].y,_[2].x,_[2].y]};var S,A};function Yd(b){b*=Math.PI/180;const t=Math.sin(b),u=Math.cos(b);return[(2*u+1)/3,(-Math.sqrt(3)*t-u+1)/3,(Math.sqrt(3)*t-u+1)/3]}const wu=(b,t,u,d,_,S,A,I,O,B,U,G,V)=>{const Q=A.transform;return{u_is_size_zoom_constant:+(b==="constant"||b==="source"),u_is_size_feature_constant:+(b==="constant"||b==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:Q.cameraToCenterDistance,u_pitch:Q.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:Q.width/Q.height,u_fade_change:A.options.fadeDuration?A.symbolFadeChange:1,u_label_plane_matrix:I,u_coord_matrix:O,u_is_text:+U,u_pitch_with_map:+d,u_is_along_line:_,u_is_variable_anchor:S,u_texsize:G,u_texture:0,u_translation:B,u_pitched_scale:V}},Qd=(b,t,u,d,_,S,A,I,O,B,U,G,V,Q)=>{const ae=A.transform;return c.e(wu(b,t,u,d,_,S,A,I,O,B,U,G,Q),{u_gamma_scale:d?Math.cos(ae.pitch*Math.PI/180)*ae.cameraToCenterDistance:1,u_device_pixel_ratio:A.pixelRatio,u_is_halo:1})},mm=(b,t,u,d,_,S,A,I,O,B,U,G,V)=>c.e(Qd(b,t,u,d,_,S,A,I,O,B,!0,U,0,V),{u_texsize_icon:G,u_texture_icon:1}),Jd=(b,t)=>({u_opacity:b,u_color:t}),ep=(b,t,u,d,_)=>c.e((function(S,A,I,O){const B=I.imageManager.getPattern(S.from.toString()),U=I.imageManager.getPattern(S.to.toString()),{width:G,height:V}=I.imageManager.getPixelSize(),Q=Math.pow(2,O.tileID.overscaledZ),ae=O.tileSize*Math.pow(2,I.transform.tileZoom)/Q,ce=ae*(O.tileID.canonical.x+O.tileID.wrap*Q),he=ae*O.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:B.tl,u_pattern_br_a:B.br,u_pattern_tl_b:U.tl,u_pattern_br_b:U.br,u_texsize:[G,V],u_mix:A.t,u_pattern_size_a:B.displaySize,u_pattern_size_b:U.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/c.aC(O,1,I.transform.tileZoom),u_pixel_coord_upper:[ce>>16,he>>16],u_pixel_coord_lower:[65535&ce,65535&he]}})(u,_,t,d),{u_opacity:b}),Ef=(b,t)=>{},Zi={fillExtrusion:(b,t)=>({u_lightpos:new c.bT(b,t.u_lightpos),u_lightpos_globe:new c.bT(b,t.u_lightpos_globe),u_lightintensity:new c.bg(b,t.u_lightintensity),u_lightcolor:new c.bT(b,t.u_lightcolor),u_vertical_gradient:new c.bg(b,t.u_vertical_gradient),u_opacity:new c.bg(b,t.u_opacity),u_fill_translate:new c.bU(b,t.u_fill_translate)}),fillExtrusionPattern:(b,t)=>({u_lightpos:new c.bT(b,t.u_lightpos),u_lightpos_globe:new c.bT(b,t.u_lightpos_globe),u_lightintensity:new c.bg(b,t.u_lightintensity),u_lightcolor:new c.bT(b,t.u_lightcolor),u_vertical_gradient:new c.bg(b,t.u_vertical_gradient),u_height_factor:new c.bg(b,t.u_height_factor),u_opacity:new c.bg(b,t.u_opacity),u_fill_translate:new c.bU(b,t.u_fill_translate),u_image:new c.bP(b,t.u_image),u_texsize:new c.bU(b,t.u_texsize),u_pixel_coord_upper:new c.bU(b,t.u_pixel_coord_upper),u_pixel_coord_lower:new c.bU(b,t.u_pixel_coord_lower),u_scale:new c.bT(b,t.u_scale),u_fade:new c.bg(b,t.u_fade)}),fill:(b,t)=>({u_fill_translate:new c.bU(b,t.u_fill_translate)}),fillPattern:(b,t)=>({u_image:new c.bP(b,t.u_image),u_texsize:new c.bU(b,t.u_texsize),u_pixel_coord_upper:new c.bU(b,t.u_pixel_coord_upper),u_pixel_coord_lower:new c.bU(b,t.u_pixel_coord_lower),u_scale:new c.bT(b,t.u_scale),u_fade:new c.bg(b,t.u_fade),u_fill_translate:new c.bU(b,t.u_fill_translate)}),fillOutline:(b,t)=>({u_world:new c.bU(b,t.u_world),u_fill_translate:new c.bU(b,t.u_fill_translate)}),fillOutlinePattern:(b,t)=>({u_world:new c.bU(b,t.u_world),u_image:new c.bP(b,t.u_image),u_texsize:new c.bU(b,t.u_texsize),u_pixel_coord_upper:new c.bU(b,t.u_pixel_coord_upper),u_pixel_coord_lower:new c.bU(b,t.u_pixel_coord_lower),u_scale:new c.bT(b,t.u_scale),u_fade:new c.bg(b,t.u_fade),u_fill_translate:new c.bU(b,t.u_fill_translate)}),circle:(b,t)=>({u_camera_to_center_distance:new c.bg(b,t.u_camera_to_center_distance),u_scale_with_map:new c.bP(b,t.u_scale_with_map),u_pitch_with_map:new c.bP(b,t.u_pitch_with_map),u_extrude_scale:new c.bU(b,t.u_extrude_scale),u_device_pixel_ratio:new c.bg(b,t.u_device_pixel_ratio),u_globe_extrude_scale:new c.bg(b,t.u_globe_extrude_scale),u_translate:new c.bU(b,t.u_translate)}),collisionBox:(b,t)=>({u_pixel_extrude_scale:new c.bU(b,t.u_pixel_extrude_scale)}),collisionCircle:(b,t)=>({u_viewport_size:new c.bU(b,t.u_viewport_size)}),debug:(b,t)=>({u_color:new c.bQ(b,t.u_color),u_overlay:new c.bP(b,t.u_overlay),u_overlay_scale:new c.bg(b,t.u_overlay_scale)}),depth:Ef,clippingMask:Ef,heatmap:(b,t)=>({u_extrude_scale:new c.bg(b,t.u_extrude_scale),u_intensity:new c.bg(b,t.u_intensity),u_globe_extrude_scale:new c.bg(b,t.u_globe_extrude_scale)}),heatmapTexture:(b,t)=>({u_matrix:new c.bR(b,t.u_matrix),u_world:new c.bU(b,t.u_world),u_image:new c.bP(b,t.u_image),u_color_ramp:new c.bP(b,t.u_color_ramp),u_opacity:new c.bg(b,t.u_opacity)}),hillshade:(b,t)=>({u_image:new c.bP(b,t.u_image),u_latrange:new c.bU(b,t.u_latrange),u_exaggeration:new c.bg(b,t.u_exaggeration),u_altitudes:new c.b_(b,t.u_altitudes),u_azimuths:new c.b_(b,t.u_azimuths),u_accent:new c.bQ(b,t.u_accent),u_method:new c.bP(b,t.u_method),u_shadows:new c.bZ(b,t.u_shadows),u_highlights:new c.bZ(b,t.u_highlights)}),hillshadePrepare:(b,t)=>({u_matrix:new c.bR(b,t.u_matrix),u_image:new c.bP(b,t.u_image),u_dimension:new c.bU(b,t.u_dimension),u_zoom:new c.bg(b,t.u_zoom),u_unpack:new c.bS(b,t.u_unpack)}),colorRelief:(b,t)=>({u_image:new c.bP(b,t.u_image),u_unpack:new c.bS(b,t.u_unpack),u_dimension:new c.bU(b,t.u_dimension),u_elevation_stops:new c.bP(b,t.u_elevation_stops),u_color_stops:new c.bP(b,t.u_color_stops),u_color_ramp_size:new c.bP(b,t.u_color_ramp_size),u_opacity:new c.bg(b,t.u_opacity)}),line:(b,t)=>({u_translation:new c.bU(b,t.u_translation),u_ratio:new c.bg(b,t.u_ratio),u_device_pixel_ratio:new c.bg(b,t.u_device_pixel_ratio),u_units_to_pixels:new c.bU(b,t.u_units_to_pixels)}),lineGradient:(b,t)=>({u_translation:new c.bU(b,t.u_translation),u_ratio:new c.bg(b,t.u_ratio),u_device_pixel_ratio:new c.bg(b,t.u_device_pixel_ratio),u_units_to_pixels:new c.bU(b,t.u_units_to_pixels),u_image:new c.bP(b,t.u_image),u_image_height:new c.bg(b,t.u_image_height)}),linePattern:(b,t)=>({u_translation:new c.bU(b,t.u_translation),u_texsize:new c.bU(b,t.u_texsize),u_ratio:new c.bg(b,t.u_ratio),u_device_pixel_ratio:new c.bg(b,t.u_device_pixel_ratio),u_image:new c.bP(b,t.u_image),u_units_to_pixels:new c.bU(b,t.u_units_to_pixels),u_scale:new c.bT(b,t.u_scale),u_fade:new c.bg(b,t.u_fade)}),lineSDF:(b,t)=>({u_translation:new c.bU(b,t.u_translation),u_ratio:new c.bg(b,t.u_ratio),u_device_pixel_ratio:new c.bg(b,t.u_device_pixel_ratio),u_units_to_pixels:new c.bU(b,t.u_units_to_pixels),u_patternscale_a:new c.bU(b,t.u_patternscale_a),u_patternscale_b:new c.bU(b,t.u_patternscale_b),u_sdfgamma:new c.bg(b,t.u_sdfgamma),u_image:new c.bP(b,t.u_image),u_tex_y_a:new c.bg(b,t.u_tex_y_a),u_tex_y_b:new c.bg(b,t.u_tex_y_b),u_mix:new c.bg(b,t.u_mix)}),raster:(b,t)=>({u_tl_parent:new c.bU(b,t.u_tl_parent),u_scale_parent:new c.bg(b,t.u_scale_parent),u_buffer_scale:new c.bg(b,t.u_buffer_scale),u_fade_t:new c.bg(b,t.u_fade_t),u_opacity:new c.bg(b,t.u_opacity),u_image0:new c.bP(b,t.u_image0),u_image1:new c.bP(b,t.u_image1),u_brightness_low:new c.bg(b,t.u_brightness_low),u_brightness_high:new c.bg(b,t.u_brightness_high),u_saturation_factor:new c.bg(b,t.u_saturation_factor),u_contrast_factor:new c.bg(b,t.u_contrast_factor),u_spin_weights:new c.bT(b,t.u_spin_weights),u_coords_top:new c.bS(b,t.u_coords_top),u_coords_bottom:new c.bS(b,t.u_coords_bottom)}),symbolIcon:(b,t)=>({u_is_size_zoom_constant:new c.bP(b,t.u_is_size_zoom_constant),u_is_size_feature_constant:new c.bP(b,t.u_is_size_feature_constant),u_size_t:new c.bg(b,t.u_size_t),u_size:new c.bg(b,t.u_size),u_camera_to_center_distance:new c.bg(b,t.u_camera_to_center_distance),u_pitch:new c.bg(b,t.u_pitch),u_rotate_symbol:new c.bP(b,t.u_rotate_symbol),u_aspect_ratio:new c.bg(b,t.u_aspect_ratio),u_fade_change:new c.bg(b,t.u_fade_change),u_label_plane_matrix:new c.bR(b,t.u_label_plane_matrix),u_coord_matrix:new c.bR(b,t.u_coord_matrix),u_is_text:new c.bP(b,t.u_is_text),u_pitch_with_map:new c.bP(b,t.u_pitch_with_map),u_is_along_line:new c.bP(b,t.u_is_along_line),u_is_variable_anchor:new c.bP(b,t.u_is_variable_anchor),u_texsize:new c.bU(b,t.u_texsize),u_texture:new c.bP(b,t.u_texture),u_translation:new c.bU(b,t.u_translation),u_pitched_scale:new c.bg(b,t.u_pitched_scale)}),symbolSDF:(b,t)=>({u_is_size_zoom_constant:new c.bP(b,t.u_is_size_zoom_constant),u_is_size_feature_constant:new c.bP(b,t.u_is_size_feature_constant),u_size_t:new c.bg(b,t.u_size_t),u_size:new c.bg(b,t.u_size),u_camera_to_center_distance:new c.bg(b,t.u_camera_to_center_distance),u_pitch:new c.bg(b,t.u_pitch),u_rotate_symbol:new c.bP(b,t.u_rotate_symbol),u_aspect_ratio:new c.bg(b,t.u_aspect_ratio),u_fade_change:new c.bg(b,t.u_fade_change),u_label_plane_matrix:new c.bR(b,t.u_label_plane_matrix),u_coord_matrix:new c.bR(b,t.u_coord_matrix),u_is_text:new c.bP(b,t.u_is_text),u_pitch_with_map:new c.bP(b,t.u_pitch_with_map),u_is_along_line:new c.bP(b,t.u_is_along_line),u_is_variable_anchor:new c.bP(b,t.u_is_variable_anchor),u_texsize:new c.bU(b,t.u_texsize),u_texture:new c.bP(b,t.u_texture),u_gamma_scale:new c.bg(b,t.u_gamma_scale),u_device_pixel_ratio:new c.bg(b,t.u_device_pixel_ratio),u_is_halo:new c.bP(b,t.u_is_halo),u_translation:new c.bU(b,t.u_translation),u_pitched_scale:new c.bg(b,t.u_pitched_scale)}),symbolTextAndIcon:(b,t)=>({u_is_size_zoom_constant:new c.bP(b,t.u_is_size_zoom_constant),u_is_size_feature_constant:new c.bP(b,t.u_is_size_feature_constant),u_size_t:new c.bg(b,t.u_size_t),u_size:new c.bg(b,t.u_size),u_camera_to_center_distance:new c.bg(b,t.u_camera_to_center_distance),u_pitch:new c.bg(b,t.u_pitch),u_rotate_symbol:new c.bP(b,t.u_rotate_symbol),u_aspect_ratio:new c.bg(b,t.u_aspect_ratio),u_fade_change:new c.bg(b,t.u_fade_change),u_label_plane_matrix:new c.bR(b,t.u_label_plane_matrix),u_coord_matrix:new c.bR(b,t.u_coord_matrix),u_is_text:new c.bP(b,t.u_is_text),u_pitch_with_map:new c.bP(b,t.u_pitch_with_map),u_is_along_line:new c.bP(b,t.u_is_along_line),u_is_variable_anchor:new c.bP(b,t.u_is_variable_anchor),u_texsize:new c.bU(b,t.u_texsize),u_texsize_icon:new c.bU(b,t.u_texsize_icon),u_texture:new c.bP(b,t.u_texture),u_texture_icon:new c.bP(b,t.u_texture_icon),u_gamma_scale:new c.bg(b,t.u_gamma_scale),u_device_pixel_ratio:new c.bg(b,t.u_device_pixel_ratio),u_is_halo:new c.bP(b,t.u_is_halo),u_translation:new c.bU(b,t.u_translation),u_pitched_scale:new c.bg(b,t.u_pitched_scale)}),background:(b,t)=>({u_opacity:new c.bg(b,t.u_opacity),u_color:new c.bQ(b,t.u_color)}),backgroundPattern:(b,t)=>({u_opacity:new c.bg(b,t.u_opacity),u_image:new c.bP(b,t.u_image),u_pattern_tl_a:new c.bU(b,t.u_pattern_tl_a),u_pattern_br_a:new c.bU(b,t.u_pattern_br_a),u_pattern_tl_b:new c.bU(b,t.u_pattern_tl_b),u_pattern_br_b:new c.bU(b,t.u_pattern_br_b),u_texsize:new c.bU(b,t.u_texsize),u_mix:new c.bg(b,t.u_mix),u_pattern_size_a:new c.bU(b,t.u_pattern_size_a),u_pattern_size_b:new c.bU(b,t.u_pattern_size_b),u_scale_a:new c.bg(b,t.u_scale_a),u_scale_b:new c.bg(b,t.u_scale_b),u_pixel_coord_upper:new c.bU(b,t.u_pixel_coord_upper),u_pixel_coord_lower:new c.bU(b,t.u_pixel_coord_lower),u_tile_units_to_pixels:new c.bg(b,t.u_tile_units_to_pixels)}),terrain:(b,t)=>({u_texture:new c.bP(b,t.u_texture),u_ele_delta:new c.bg(b,t.u_ele_delta),u_fog_matrix:new c.bR(b,t.u_fog_matrix),u_fog_color:new c.bQ(b,t.u_fog_color),u_fog_ground_blend:new c.bg(b,t.u_fog_ground_blend),u_fog_ground_blend_opacity:new c.bg(b,t.u_fog_ground_blend_opacity),u_horizon_color:new c.bQ(b,t.u_horizon_color),u_horizon_fog_blend:new c.bg(b,t.u_horizon_fog_blend),u_is_globe_mode:new c.bg(b,t.u_is_globe_mode)}),terrainDepth:(b,t)=>({u_ele_delta:new c.bg(b,t.u_ele_delta)}),terrainCoords:(b,t)=>({u_texture:new c.bP(b,t.u_texture),u_terrain_coords_id:new c.bg(b,t.u_terrain_coords_id),u_ele_delta:new c.bg(b,t.u_ele_delta)}),projectionErrorMeasurement:(b,t)=>({u_input:new c.bg(b,t.u_input),u_output_expected:new c.bg(b,t.u_output_expected)}),atmosphere:(b,t)=>({u_sun_pos:new c.bT(b,t.u_sun_pos),u_atmosphere_blend:new c.bg(b,t.u_atmosphere_blend),u_globe_position:new c.bT(b,t.u_globe_position),u_globe_radius:new c.bg(b,t.u_globe_radius),u_inv_proj_matrix:new c.bR(b,t.u_inv_proj_matrix)}),sky:(b,t)=>({u_sky_color:new c.bQ(b,t.u_sky_color),u_horizon_color:new c.bQ(b,t.u_horizon_color),u_horizon:new c.bU(b,t.u_horizon),u_horizon_normal:new c.bU(b,t.u_horizon_normal),u_sky_horizon_blend:new c.bg(b,t.u_sky_horizon_blend),u_sky_blend:new c.bg(b,t.u_sky_blend)})};class Su{constructor(t,u,d){this.context=t;const _=t.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const bc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class No{constructor(t,u,d,_){this.length=u.length,this.attributes=d,this.itemSize=u.bytesPerElement,this.dynamicDraw=_,this.context=t;const S=t.gl;this.buffer=S.createBuffer(),t.bindVertexBuffer.set(this.buffer),S.bufferData(S.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,u){for(let d=0;d<this.attributes.length;d++){const _=u.attributes[this.attributes[d].name];_!==void 0&&t.enableVertexAttribArray(_)}}setVertexAttribPointers(t,u,d){for(let _=0;_<this.attributes.length;_++){const S=this.attributes[_],A=u.attributes[S.name];A!==void 0&&t.vertexAttribPointer(A,S.components,t[bc[S.type]],!1,this.itemSize,S.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ir{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class bh extends Ir{getDefault(){return c.bf.transparent}set(t){const u=this.current;(t.r!==u.r||t.g!==u.g||t.b!==u.b||t.a!==u.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class xc extends Ir{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class tp extends Ir{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class js extends Ir{getDefault(){return[!0,!0,!0,!0]}set(t){const u=this.current;(t[0]!==u[0]||t[1]!==u[1]||t[2]!==u[2]||t[3]!==u[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class rs extends Ir{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class Sl extends Ir{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class Mf extends Ir{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const u=this.current;(t.func!==u.func||t.ref!==u.ref||t.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class rp extends Ir{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const u=this.current;(t[0]!==u[0]||t[1]!==u[1]||t[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class Pl extends Ir{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;t?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=t,this.dirty=!1}}class Pu extends Ir{getDefault(){return[0,1]}set(t){const u=this.current;(t[0]!==u[0]||t[1]!==u[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class xh extends Ir{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;t?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=t,this.dirty=!1}}class np extends Ir{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class Bs extends Ir{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;t?u.enable(u.BLEND):u.disable(u.BLEND),this.current=t,this.dirty=!1}}class wc extends Ir{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const u=this.current;(t[0]!==u[0]||t[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class Sc extends Ir{getDefault(){return c.bf.transparent}set(t){const u=this.current;(t.r!==u.r||t.g!==u.g||t.b!==u.b||t.a!==u.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Pc extends Ir{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class Rf extends Ir{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;t?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=t,this.dirty=!1}}class Al extends Ir{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class Ac extends Ir{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class Cl extends Ir{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class Da extends Ir{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class wh extends Ir{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const u=this.current;(t[0]!==u[0]||t[1]!==u[1]||t[2]!==u[2]||t[3]!==u[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Xa extends Ir{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class Sh extends Ir{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class di extends Ir{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class Xi extends Ir{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ns extends Ir{getDefault(){return null}set(t){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Tl extends Ir{getDefault(){return null}set(t){var u;if(t===this.current&&!this.dirty)return;const d=this.gl;Oi(d)?d.bindVertexArray(t):(u=d.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(t),this.current=t,this.dirty=!1}}class El extends Ir{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class Cc extends Ir{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class Fs extends Ir{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class Ia extends Ir{constructor(t,u){super(t),this.context=t,this.parent=u}getDefault(){return null}}class Df extends Ia{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class Au extends Ia{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class yr extends Ia{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,t),this.current=t,this.dirty=!1}}const Tc="Framebuffer is not complete";class Oa{constructor(t,u,d,_,S){this.context=t,this.width=u,this.height=d;const A=t.gl,I=this.framebuffer=A.createFramebuffer();if(this.colorAttachment=new Df(t,I),_)this.depthAttachment=S?new yr(t,I):new Au(t,I);else if(S)throw new Error("Stencil cannot be set without depth");if(A.checkFramebufferStatus(A.FRAMEBUFFER)!==A.FRAMEBUFFER_COMPLETE)throw new Error(Tc)}destroy(){const t=this.context.gl,u=this.colorAttachment.get();if(u&&t.deleteTexture(u),this.depthAttachment){const d=this.depthAttachment.get();d&&t.deleteRenderbuffer(d)}t.deleteFramebuffer(this.framebuffer)}}class Ph{constructor(t){var u,d;if(this.gl=t,this.clearColor=new bh(this),this.clearDepth=new xc(this),this.clearStencil=new tp(this),this.colorMask=new js(this),this.depthMask=new rs(this),this.stencilMask=new Sl(this),this.stencilFunc=new Mf(this),this.stencilOp=new rp(this),this.stencilTest=new Pl(this),this.depthRange=new Pu(this),this.depthTest=new xh(this),this.depthFunc=new np(this),this.blend=new Bs(this),this.blendFunc=new wc(this),this.blendColor=new Sc(this),this.blendEquation=new Pc(this),this.cullFace=new Rf(this),this.cullFaceSide=new Al(this),this.frontFace=new Ac(this),this.program=new Cl(this),this.activeTexture=new Da(this),this.viewport=new wh(this),this.bindFramebuffer=new Xa(this),this.bindRenderbuffer=new Sh(this),this.bindTexture=new di(this),this.bindVertexBuffer=new Xi(this),this.bindElementBuffer=new ns(this),this.bindVertexArray=new Tl(this),this.pixelStoreUnpack=new El(this),this.pixelStoreUnpackPremultiplyAlpha=new Cc(this),this.pixelStoreUnpackFlipY=new Fs(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),Oi(t)){this.HALF_FLOAT=t.HALF_FLOAT;const _=t.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=t.RGBA16F)!==null&&u!==void 0?u:_?.RGBA16F_EXT,this.RGB16F=(d=t.RGB16F)!==null&&d!==void 0?d:_?.RGB16F_EXT,t.getExtension("EXT_color_buffer_float")}else{t.getExtension("EXT_color_buffer_half_float"),t.getExtension("OES_texture_half_float_linear");const _=t.getExtension("OES_texture_half_float");this.HALF_FLOAT=_?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,u){return new Su(this,t,u)}createVertexBuffer(t,u,d){return new No(this,t,u,d)}createRenderbuffer(t,u,d){const _=this.gl,S=_.createRenderbuffer();return this.bindRenderbuffer.set(S),_.renderbufferStorage(_.RENDERBUFFER,t,u,d),this.bindRenderbuffer.set(null),S}createFramebuffer(t,u,d,_){return new Oa(this,t,u,d,_)}clear({color:t,depth:u,stencil:d}){const _=this.gl;let S=0;t&&(S|=_.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(S|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),d!==void 0&&(S|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),_.clear(S)}setCullFace(t){t.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){c.bH(t.blendFunction,Yr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}createVertexArray(){var t;return Oi(this.gl)?this.gl.createVertexArray():(t=this.gl.getExtension("OES_vertex_array_object"))===null||t===void 0?void 0:t.createVertexArrayOES()}deleteVertexArray(t){var u;return Oi(this.gl)?this.gl.deleteVertexArray(t):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(t)}unbindVAO(){this.bindVertexArray.set(null)}}let Li;function If(b,t,u,d,_){const S=b.context,A=b.transform,I=S.gl,O=b.useProgram("collisionBox"),B=[];let U=0,G=0;for(let fe=0;fe<d.length;fe++){const pe=d[fe],be=t.getTile(pe).getBucket(u);if(!be)continue;const me=_?be.textCollisionBox:be.iconCollisionBox,we=be.collisionCircleArray;we.length>0&&(B.push({circleArray:we,circleOffset:G,coord:pe}),U+=we.length/4,G=U),me&&O.draw(S,I.LINES,lr.disabled,Tr.disabled,b.colorModeForRenderPass(),er.disabled,gc(b.transform),b.style.map.terrain&&b.style.map.terrain.getTerrainData(pe),A.getProjectionData({overscaledTileID:pe,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),u.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,null,b.transform.zoom,null,null,me.collisionVertexBuffer)}if(!_||!B.length)return;const V=b.useProgram("collisionCircle"),Q=new c.b$;Q.resize(4*U),Q._trim();let ae=0;for(const fe of B)for(let pe=0;pe<fe.circleArray.length/4;pe++){const be=4*pe,me=fe.circleArray[be+0],we=fe.circleArray[be+1],Ee=fe.circleArray[be+2],ge=fe.circleArray[be+3];Q.emplace(ae++,me,we,Ee,ge,0),Q.emplace(ae++,me,we,Ee,ge,1),Q.emplace(ae++,me,we,Ee,ge,2),Q.emplace(ae++,me,we,Ee,ge,3)}(!Li||Li.length<2*U)&&(Li=(function(fe){const pe=2*fe,be=new c.c1;be.resize(pe),be._trim();for(let me=0;me<pe;me++){const we=6*me;be.uint16[we+0]=4*me+0,be.uint16[we+1]=4*me+1,be.uint16[we+2]=4*me+2,be.uint16[we+3]=4*me+2,be.uint16[we+4]=4*me+3,be.uint16[we+5]=4*me+0}return be})(U));const ce=S.createIndexBuffer(Li,!0),he=S.createVertexBuffer(Q,c.c0.members,!0);for(const fe of B){const pe=_u(b.transform);V.draw(S,I.TRIANGLES,lr.disabled,Tr.disabled,b.colorModeForRenderPass(),er.disabled,pe,b.style.map.terrain&&b.style.map.terrain.getTerrainData(fe.coord),null,u.id,he,ce,c.aM.simpleSegment(0,2*fe.circleOffset,fe.circleArray.length,fe.circleArray.length/2),null,b.transform.zoom,null,null,null)}he.destroy(),ce.destroy()}const Ah=c.ag(new Float32Array(16));function Us(b,t,u,d,_,S){const{horizontalAlign:A,verticalAlign:I}=c.aH(b);return new c.P((-(A-.5)*t/_+d[0])*S,(-(I-.5)*u/_+d[1])*S)}function Of(b,t,u,d,_,S){const A=t.tileAnchorPoint.add(new c.P(t.translation[0],t.translation[1]));if(t.pitchWithMap){let I=d.mult(S);u||(I=I.rotate(-_));const O=A.add(I);return pn(O.x,O.y,t.pitchedLabelPlaneMatrix,t.getElevation).point}if(u){const I=Fn(t.tileAnchorPoint.x+1,t.tileAnchorPoint.y,t).point.sub(b),O=Math.atan(I.y/I.x)+(I.x<0?Math.PI:0);return b.add(d.rotate(O))}return b.add(d)}function Ec(b,t,u,d,_,S,A,I,O,B,U,G){const V=b.text.placedSymbolArray,Q=b.text.dynamicLayoutVertexArray,ae=b.icon.dynamicLayoutVertexArray,ce={};Q.clear();for(let he=0;he<V.length;he++){const fe=V.get(he),pe=fe.hidden||!fe.crossTileID||b.allowVerticalPlacement&&!fe.placedOrientation?null:d[fe.crossTileID];if(pe){const be=new c.P(fe.anchorX,fe.anchorY),me={getElevation:G,width:_.width,height:_.height,pitchedLabelPlaneMatrix:S,pitchWithMap:u,transform:_,tileAnchorPoint:be,translation:B,unwrappedTileID:U},we=u?mn(be.x,be.y,me):Fn(be.x,be.y,me),Ee=vt(_.cameraToCenterDistance,we.signedDistanceFromCamera);let ge=c.ap(b.textSizeData,I,fe)*Ee/c.aB;u&&(ge*=b.tilePixelRatio/A);const{width:Ie,height:Ze,anchor:Fe,textOffset:Ve,textBoxScale:Xe}=pe,Pt=Us(Fe,Ie,Ze,Ve,Xe,ge),xt=_.getPitchedTextCorrection(be.x+B[0],be.y+B[1],U),lt=Of(we.point,me,t,Pt,-_.bearingInRadians,xt),jt=b.allowVerticalPlacement&&fe.placedOrientation===c.ao.vertical?Math.PI/2:0;for(let vr=0;vr<fe.numGlyphs;vr++)c.av(Q,lt,jt);O&&fe.associatedIconIndex>=0&&(ce[fe.associatedIconIndex]={shiftedAnchor:lt,angle:jt})}else Mo(fe.numGlyphs,Q)}if(O){ae.clear();const he=b.icon.placedSymbolArray;for(let fe=0;fe<he.length;fe++){const pe=he.get(fe);if(pe.hidden)Mo(pe.numGlyphs,ae);else{const be=ce[fe];if(be)for(let me=0;me<pe.numGlyphs;me++)c.av(ae,be.shiftedAnchor,be.angle);else Mo(pe.numGlyphs,ae)}}b.icon.dynamicLayoutVertexBuffer.updateData(ae)}b.text.dynamicLayoutVertexBuffer.updateData(Q)}function is(b,t,u){return u.iconsInText&&t?"symbolTextAndIcon":b?"symbolSDF":"symbolIcon"}function jo(b,t,u,d,_,S,A,I,O,B,U,G,V){const Q=b.context,ae=Q.gl,ce=b.transform,he=I==="map",fe=O==="map",pe=I!=="viewport"&&u.layout.get("symbol-placement")!=="point",be=he&&!fe&&!pe,me=!u.layout.get("symbol-sort-key").isConstant();let we=!1;const Ee=b.getDepthModeForSublayer(0,lr.ReadOnly),ge=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ie=[],Ze=ce.getCircleRadiusCorrection();for(const Fe of d){const Ve=t.getTile(Fe),Xe=Ve.getBucket(u);if(!Xe)continue;const Pt=_?Xe.text:Xe.icon;if(!Pt||!Pt.segments.get().length||!Pt.hasVisibleVertices)continue;const xt=Pt.programConfigurations.get(u.id),lt=_||Xe.sdfIcons,jt=_?Xe.textSizeData:Xe.iconSizeData,vr=fe||ce.pitch!==0,Or=b.useProgram(is(lt,_,Xe),xt),hn=c.an(jt,ce.zoom),Wr=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Fe);let Zr,rn,Qr,Xr,Er=[0,0],ei=null;if(_)rn=Ve.glyphAtlasTexture,Qr=ae.LINEAR,Zr=Ve.glyphAtlasTexture.size,Xe.iconsInText&&(Er=Ve.imageAtlasTexture.size,ei=Ve.imageAtlasTexture,Xr=vr||b.options.rotating||b.options.zooming||jt.kind==="composite"||jt.kind==="camera"?ae.LINEAR:ae.NEAREST);else{const Fr=u.layout.get("icon-size").constantOr(0)!==1||Xe.iconsNeedLinear;rn=Ve.imageAtlasTexture,Qr=lt||b.options.rotating||b.options.zooming||Fr||vr?ae.LINEAR:ae.NEAREST,Zr=Ve.imageAtlasTexture.size}const Hn=c.aC(Ve,1,b.transform.zoom),ra=Kr(he,b.transform,Hn),Ks=c.L();c.aq(Ks,ra);const ds=tr(fe,he,b.transform,Hn),na=c.aD(ce,Ve,S,A),ps=ce.getProjectionData({overscaledTileID:Fe,applyGlobeMatrix:!V,applyTerrainMatrix:!0}),Ys=ge&&Xe.hasTextData(),zc=u.layout.get("icon-text-fit")!=="none"&&Ys&&Xe.hasIconData();if(pe){const Fr=b.style.map.terrain?(Ni,Mn)=>b.style.map.terrain.getElevation(Fe,Ni,Mn):null,yn=u.layout.get("text-rotation-alignment")==="map";Cn(Xe,b,_,ra,Ks,fe,B,yn,Fe.toUnwrapped(),ce.width,ce.height,na,Fr)}const ms=_&&ge||zc,gi=pe||ms?Ah:fe?ra:b.transform.clipSpaceToPixelsMatrix,Uo=lt&&u.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let $o;$o=lt?Xe.iconsInText?mm(jt.kind,hn,be,fe,pe,ms,b,gi,ds,na,Zr,Er,Ze):Qd(jt.kind,hn,be,fe,pe,ms,b,gi,ds,na,_,Zr,0,Ze):wu(jt.kind,hn,be,fe,pe,ms,b,gi,ds,na,_,Zr,Ze);const Qs={program:Or,buffers:Pt,uniformValues:$o,projectionData:ps,atlasTexture:rn,atlasTextureIcon:ei,atlasInterpolation:Qr,atlasInterpolationIcon:Xr,isSDF:lt,hasHalo:Uo};if(me&&Xe.canOverlap){we=!0;const Fr=Pt.segments.get();for(const yn of Fr)Ie.push({segments:new c.aM([yn]),sortKey:yn.sortKey,state:Qs,terrainData:Wr})}else Ie.push({segments:Pt.segments,sortKey:0,state:Qs,terrainData:Wr})}we&&Ie.sort(((Fe,Ve)=>Fe.sortKey-Ve.sortKey));for(const Fe of Ie){const Ve=Fe.state;if(Q.activeTexture.set(ae.TEXTURE0),Ve.atlasTexture.bind(Ve.atlasInterpolation,ae.CLAMP_TO_EDGE),Ve.atlasTextureIcon&&(Q.activeTexture.set(ae.TEXTURE1),Ve.atlasTextureIcon&&Ve.atlasTextureIcon.bind(Ve.atlasInterpolationIcon,ae.CLAMP_TO_EDGE)),Ve.isSDF){const Xe=Ve.uniformValues;Ve.hasHalo&&(Xe.u_is_halo=1,$s(Ve.buffers,Fe.segments,u,b,Ve.program,Ee,U,G,Xe,Ve.projectionData,Fe.terrainData)),Xe.u_is_halo=0}$s(Ve.buffers,Fe.segments,u,b,Ve.program,Ee,U,G,Ve.uniformValues,Ve.projectionData,Fe.terrainData)}}function $s(b,t,u,d,_,S,A,I,O,B,U){const G=d.context;_.draw(G,G.gl.TRIANGLES,S,A,I,er.backCCW,O,U,B,u.id,b.layoutVertexBuffer,b.indexBuffer,t,u.paint,d.transform.zoom,b.programConfigurations.get(u.id),b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer)}function Cu(b,t,u,d,_){const S=b.context,A=S.gl,I=Tr.disabled,O=new Yr([A.ONE,A.ONE],c.bf.transparent,[!0,!0,!0,!0]),B=t.getBucket(u);if(!B)return;const U=d.key;let G=u.heatmapFbos.get(U);G||(G=zi(S,t.tileSize,t.tileSize),u.heatmapFbos.set(U,G)),S.bindFramebuffer.set(G.framebuffer),S.viewport.set([0,0,t.tileSize,t.tileSize]),S.clear({color:c.bf.transparent});const V=B.programConfigurations.get(u.id),Q=b.useProgram("heatmap",V,!_),ae=b.transform.getProjectionData({overscaledTileID:t.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ce=b.style.map.terrain.getTerrainData(d);Q.draw(S,A.TRIANGLES,lr.disabled,I,O,er.disabled,Xd(t,b.transform.zoom,u.paint.get("heatmap-intensity"),1),ce,ae,u.id,B.layoutVertexBuffer,B.indexBuffer,B.segments,u.paint,b.transform.zoom,V)}function ka(b,t,u,d,_){const S=b.context,A=S.gl,I=b.transform;S.setColorMode(b.colorModeForRenderPass());const O=oo(S,t),B=u.key,U=t.heatmapFbos.get(B);if(!U)return;S.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,U.colorAttachment.get()),S.activeTexture.set(A.TEXTURE1),O.bind(A.LINEAR,A.CLAMP_TO_EDGE);const G=I.getProjectionData({overscaledTileID:u,applyTerrainMatrix:_,applyGlobeMatrix:!d});b.useProgram("heatmapTexture").draw(S,A.TRIANGLES,lr.disabled,Tr.disabled,b.colorModeForRenderPass(),er.disabled,Af(b,t,0,1),null,G,t.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments,t.paint,I.zoom),U.destroy(),t.heatmapFbos.delete(B)}function zi(b,t,u){var d,_;const S=b.gl,A=S.createTexture();S.bindTexture(S.TEXTURE_2D,A),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,S.LINEAR);const I=(d=b.HALF_FLOAT)!==null&&d!==void 0?d:S.UNSIGNED_BYTE,O=(_=b.RGBA16F)!==null&&_!==void 0?_:S.RGBA;S.texImage2D(S.TEXTURE_2D,0,O,t,u,0,S.RGBA,I,null);const B=b.createFramebuffer(t,u,!1,!1);return B.colorAttachment.set(A),B}function oo(b,t){return t.colorRampTexture||(t.colorRampTexture=new c.T(b,t.colorRamp,b.gl.RGBA)),t.colorRampTexture}function La(b,t,u,d,_){if(!u||!d||!d.imageAtlas)return;const S=d.imageAtlas.patternPositions;let A=S[u.to.toString()],I=S[u.from.toString()];if(!A&&I&&(A=I),!I&&A&&(I=A),!A||!I){const O=_.getPaintProperty(t);A=S[O],I=S[O]}A&&I&&b.setConstantPatternPositions(A,I)}function Ki(b,t,u,d,_,S,A,I){const O=b.context.gl,B="fill-pattern",U=u.paint.get(B),G=U&&U.constantOr(1),V=u.getCrossfadeParameters();let Q,ae,ce,he,fe;const pe=b.transform,be=u.paint.get("fill-translate"),me=u.paint.get("fill-translate-anchor");A?(ae=G&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Q=O.LINES):(ae=G?"fillPattern":"fill",Q=O.TRIANGLES);const we=U.constantOr(null);for(const Ee of d){const ge=t.getTile(Ee);if(G&&!ge.patternsLoaded())continue;const Ie=ge.getBucket(u);if(!Ie)continue;const Ze=Ie.programConfigurations.get(u.id),Fe=b.useProgram(ae,Ze),Ve=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ee);G&&(b.context.activeTexture.set(O.TEXTURE0),ge.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),Ze.updatePaintBuffers(V)),La(Ze,B,we,ge,u);const Xe=pe.getProjectionData({overscaledTileID:Ee,applyGlobeMatrix:!I,applyTerrainMatrix:!0}),Pt=c.aD(pe,ge,be,me);if(A){he=Ie.indexBuffer2,fe=Ie.segments2;const lt=[O.drawingBufferWidth,O.drawingBufferHeight];ce=ae==="fillOutlinePattern"&&G?vu(b,V,ge,lt,Pt):yu(lt,Pt)}else he=Ie.indexBuffer,fe=Ie.segments,ce=G?mc(b,V,ge,Pt):{u_fill_translate:Pt};const xt=b.stencilModeForClipping(Ee);Fe.draw(b.context,Q,_,xt,S,er.backCCW,ce,Ve,Xe,u.id,Ie.layoutVertexBuffer,he,fe,u.paint,b.transform.zoom,Ze)}}function so(b,t,u,d,_,S,A,I){const O=b.context,B=O.gl,U="fill-extrusion-pattern",G=u.paint.get(U),V=G.constantOr(1),Q=u.getCrossfadeParameters(),ae=u.paint.get("fill-extrusion-opacity"),ce=G.constantOr(null),he=b.transform;for(const fe of d){const pe=t.getTile(fe),be=pe.getBucket(u);if(!be)continue;const me=b.style.map.terrain&&b.style.map.terrain.getTerrainData(fe),we=be.programConfigurations.get(u.id),Ee=b.useProgram(V?"fillExtrusionPattern":"fillExtrusion",we);V&&(b.context.activeTexture.set(B.TEXTURE0),pe.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),we.updatePaintBuffers(Q));const ge=he.getProjectionData({overscaledTileID:fe,applyGlobeMatrix:!I,applyTerrainMatrix:!0});La(we,U,ce,pe,u);const Ie=c.aD(he,pe,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Ze=u.paint.get("fill-extrusion-vertical-gradient"),Fe=V?pm(b,Ze,ae,Ie,fe,Q,pe):Wi(b,Ze,ae,Ie);Ee.draw(O,O.gl.TRIANGLES,_,S,A,er.backCCW,Fe,me,ge,u.id,be.layoutVertexBuffer,be.indexBuffer,be.segments,u.paint,b.transform.zoom,we,b.style.map.terrain&&be.centroidVertexBuffer)}}function Ch(b,t,u,d,_,S,A,I,O){var B;const U=b.style.projection,G=b.context,V=b.transform,Q=G.gl,ae=[`#define NUM_ILLUMINATION_SOURCES ${u.paint.get("hillshade-highlight-color").values.length}`],ce=b.useProgram("hillshade",null,!1,ae),he=!b.options.moving;for(const fe of d){const pe=t.getTile(fe),be=pe.fbo;if(!be)continue;const me=U.getMeshFromTileID(G,fe.canonical,I,!0,"raster"),we=(B=b.style.map.terrain)===null||B===void 0?void 0:B.getTerrainData(fe);G.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_2D,be.colorAttachment.get());const Ee=V.getProjectionData({overscaledTileID:fe,aligned:he,applyGlobeMatrix:!O,applyTerrainMatrix:!0});ce.draw(G,Q.TRIANGLES,S,_[fe.overscaledZ],A,er.backCCW,Kd(b,pe,u),we,Ee,u.id,me.vertexBuffer,me.indexBuffer,me.segments)}}function as(b,t,u,d,_,S,A,I,O){var B;const U=b.style.projection,G=b.context,V=b.transform,Q=G.gl,ae=b.useProgram("colorRelief"),ce=!b.options.moving;let he=!0,fe=0;for(const pe of d){const be=t.getTile(pe),me=be.dem;if(he){const Fe=Q.getParameter(Q.MAX_TEXTURE_SIZE),{elevationTexture:Ve,colorTexture:Xe}=u.getColorRampTextures(G,Fe,me.getUnpackVector());G.activeTexture.set(Q.TEXTURE1),Ve.bind(Q.NEAREST,Q.CLAMP_TO_EDGE),G.activeTexture.set(Q.TEXTURE4),Xe.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),he=!1,fe=Ve.size[0]}if(!me||!me.data)continue;const we=me.stride,Ee=me.getPixels();if(G.activeTexture.set(Q.TEXTURE0),G.pixelStoreUnpackPremultiplyAlpha.set(!1),be.demTexture=be.demTexture||b.getTileTexture(we),be.demTexture){const Fe=be.demTexture;Fe.update(Ee,{premultiply:!1}),Fe.bind(Q.LINEAR,Q.CLAMP_TO_EDGE)}else be.demTexture=new c.T(G,Ee,Q.RGBA,{premultiply:!1}),be.demTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE);const ge=U.getMeshFromTileID(G,pe.canonical,I,!0,"raster"),Ie=(B=b.style.map.terrain)===null||B===void 0?void 0:B.getTerrainData(pe),Ze=V.getProjectionData({overscaledTileID:pe,aligned:ce,applyGlobeMatrix:!O,applyTerrainMatrix:!0});ae.draw(G,Q.TRIANGLES,S,_[pe.overscaledZ],A,er.backCCW,bu(u,be.dem,fe),Ie,Ze,u.id,ge.vertexBuffer,ge.indexBuffer,ge.segments)}}const Mc=[new c.P(0,0),new c.P(c.$,0),new c.P(c.$,c.$),new c.P(0,c.$)];function ii(b,t,u,d,_,S,A,I,O=!1,B=!1){const U=d[d.length-1].overscaledZ,G=b.context,V=G.gl,Q=b.useProgram("raster"),ae=b.transform,ce=b.style.projection,he=b.colorModeForRenderPass(),fe=!b.options.moving;for(const pe of d){const be=b.getDepthModeForSublayer(pe.overscaledZ-U,u.paint.get("raster-opacity")===1?lr.ReadWrite:lr.ReadOnly,V.LESS),me=t.getTile(pe);me.registerFadeDuration(u.paint.get("raster-fade-duration"));const we=t.findLoadedParent(pe,0),Ee=t.findLoadedSibling(pe),ge=gn(me,we||Ee||null,t,u,b.transform,b.style.map.terrain);let Ie,Ze;const Fe=u.paint.get("raster-resampling")==="nearest"?V.NEAREST:V.LINEAR;G.activeTexture.set(V.TEXTURE0),me.texture.bind(Fe,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST),G.activeTexture.set(V.TEXTURE1),we?(we.texture.bind(Fe,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST),Ie=Math.pow(2,we.tileID.overscaledZ-me.tileID.overscaledZ),Ze=[me.tileID.canonical.x*Ie%1,me.tileID.canonical.y*Ie%1]):me.texture.bind(Fe,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST),me.texture.useMipmap&&G.extTextureFilterAnisotropic&&b.transform.pitch>20&&V.texParameterf(V.TEXTURE_2D,G.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,G.extTextureFilterAnisotropicMax);const Ve=b.style.map.terrain&&b.style.map.terrain.getTerrainData(pe),Xe=ae.getProjectionData({overscaledTileID:pe,aligned:fe,applyGlobeMatrix:!B,applyTerrainMatrix:!0}),Pt=xu(Ze||[0,0],Ie||1,ge,u,I),xt=ce.getMeshFromTileID(G,pe.canonical,S,A,"raster");Q.draw(G,V.TRIANGLES,be,_?_[pe.overscaledZ]:Tr.disabled,he,O?er.frontCCW:er.backCCW,Pt,Ve,Xe,u.id,xt.vertexBuffer,xt.indexBuffer,xt.segments)}}function gn(b,t,u,d,_,S){const A=d.paint.get("raster-fade-duration");if(!S&&A>0){const I=N.now(),O=(I-b.timeAdded)/A,B=t?(I-t.timeAdded)/A:-1,U=u.getSource(),G=Ot(_,{tileSize:U.tileSize,roundZoom:U.roundZoom}),V=!t||Math.abs(t.tileID.overscaledZ-G)>Math.abs(b.tileID.overscaledZ-G),Q=V&&b.refreshedUponExpiration?1:c.ah(V?O:1-B,0,1);return b.refreshedUponExpiration&&O>=1&&(b.refreshedUponExpiration=!1),t?{opacity:1,mix:1-Q}:{opacity:Q,mix:0}}return{opacity:1,mix:0}}const jr=new c.bf(1,0,0,1),Vs=new c.bf(0,1,0,1),lo=new c.bf(0,0,1,1),Tu=new c.bf(1,0,1,1),os=new c.bf(0,1,1,1);function kf(b,t,u,d){Gr(b,0,t+u/2,b.transform.width,u,d)}function Th(b,t,u,d){Gr(b,t-u/2,0,u,b.transform.height,d)}function Gr(b,t,u,d,_,S){const A=b.context,I=A.gl;I.enable(I.SCISSOR_TEST),I.scissor(t*b.pixelRatio,u*b.pixelRatio,d*b.pixelRatio,_*b.pixelRatio),A.clear({color:S}),I.disable(I.SCISSOR_TEST)}function uo(b,t,u){const d=b.context,_=d.gl,S=b.useProgram("debug"),A=lr.disabled,I=Tr.disabled,O=b.colorModeForRenderPass(),B="$debug",U=b.style.map.terrain&&b.style.map.terrain.getTerrainData(u);d.activeTexture.set(_.TEXTURE0);const G=t.getTileByID(u.key).latestRawTileData,V=Math.floor((G&&G.byteLength||0)/1024),Q=t.getTile(u).tileSize,ae=512/Math.min(Q,512)*(u.overscaledZ/b.transform.zoom)*.5;let ce=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(ce+=` => ${u.overscaledZ}`),(function(fe,pe){fe.initDebugOverlayCanvas();const be=fe.debugOverlayCanvas,me=fe.context.gl,we=fe.debugOverlayCanvas.getContext("2d");we.clearRect(0,0,be.width,be.height),we.shadowColor="white",we.shadowBlur=2,we.lineWidth=1.5,we.strokeStyle="white",we.textBaseline="top",we.font="bold 36px Open Sans, sans-serif",we.fillText(pe,5,5),we.strokeText(pe,5,5),fe.debugOverlayTexture.update(be),fe.debugOverlayTexture.bind(me.LINEAR,me.CLAMP_TO_EDGE)})(b,`${ce} ${V}kB`);const he=b.transform.getProjectionData({overscaledTileID:u,applyGlobeMatrix:!0,applyTerrainMatrix:!0});S.draw(d,_.TRIANGLES,A,I,Yr.alphaBlended,er.disabled,xl(c.bf.transparent,ae),null,he,B,b.debugBuffer,b.quadTriangleIndexBuffer,b.debugSegments),S.draw(d,_.LINE_STRIP,A,I,O,er.disabled,xl(c.bf.red),U,he,B,b.debugBuffer,b.tileBorderIndexBuffer,b.debugSegments)}function ma(b,t,u,d){const{isRenderingGlobe:_}=d,S=b.context,A=S.gl,I=b.transform,O=b.colorModeForRenderPass(),B=b.getDepthModeFor3D(),U=b.useProgram("terrain");S.bindFramebuffer.set(null),S.viewport.set([0,0,b.width,b.height]);for(const G of u){const V=t.getTerrainMesh(G.tileID),Q=b.renderToTexture.getTexture(G),ae=t.getTerrainData(G.tileID);S.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,Q.texture);const ce=t.getMeshFrameDelta(I.zoom),he=I.calculateFogMatrix(G.tileID.toUnwrapped()),fe=vh(ce,he,b.style.sky,I.pitch,_),pe=I.getProjectionData({overscaledTileID:G.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});U.draw(S,A.TRIANGLES,B,Tr.disabled,O,er.backCCW,fe,ae,pe,"terrain",V.vertexBuffer,V.indexBuffer,V.segments)}}function Hs(b,t){if(!t.mesh){const u=new c.aL;u.emplaceBack(-1,-1),u.emplaceBack(1,-1),u.emplaceBack(1,1),u.emplaceBack(-1,1);const d=new c.aN;d.emplaceBack(0,1,2),d.emplaceBack(0,2,3),t.mesh=new Os(b.createVertexBuffer(u,Oo.members),b.createIndexBuffer(d),c.aM.simpleSegment(0,0,u.length,d.length))}return t.mesh}class Eu{constructor(t,u){this.context=new Ph(t),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=br.maxUnderzooming+br.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new dl}resize(t,u,d){if(this.width=Math.floor(t*d),this.height=Math.floor(u*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style._order)this.style._layers[_].resize()}setup(){const t=this.context,u=new c.aL;u.emplaceBack(0,0),u.emplaceBack(c.$,0),u.emplaceBack(0,c.$),u.emplaceBack(c.$,c.$),this.tileExtentBuffer=t.createVertexBuffer(u,Oo.members),this.tileExtentSegments=c.aM.simpleSegment(0,0,4,2);const d=new c.aL;d.emplaceBack(0,0),d.emplaceBack(c.$,0),d.emplaceBack(0,c.$),d.emplaceBack(c.$,c.$),this.debugBuffer=t.createVertexBuffer(d,Oo.members),this.debugSegments=c.aM.simpleSegment(0,0,4,5);const _=new c.c6;_.emplaceBack(0,0,0,0),_.emplaceBack(c.$,0,c.$,0),_.emplaceBack(0,c.$,0,c.$),_.emplaceBack(c.$,c.$,c.$,c.$),this.rasterBoundsBuffer=t.createVertexBuffer(_,fm.members),this.rasterBoundsSegments=c.aM.simpleSegment(0,0,4,2);const S=new c.aL;S.emplaceBack(0,0),S.emplaceBack(c.$,0),S.emplaceBack(0,c.$),S.emplaceBack(c.$,c.$),this.rasterBoundsBufferPosOnly=t.createVertexBuffer(S,Oo.members),this.rasterBoundsSegmentsPosOnly=c.aM.simpleSegment(0,0,4,5);const A=new c.aL;A.emplaceBack(0,0),A.emplaceBack(1,0),A.emplaceBack(0,1),A.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(A,Oo.members),this.viewportSegments=c.aM.simpleSegment(0,0,4,2);const I=new c.c7;I.emplaceBack(0),I.emplaceBack(1),I.emplaceBack(3),I.emplaceBack(2),I.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(I);const O=new c.aN;O.emplaceBack(1,0,2),O.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(O);const B=this.context.gl;this.stencilClearMode=new Tr({func:B.ALWAYS,mask:0},0,255,B.ZERO,B.ZERO,B.ZERO),this.tileExtentMesh=new Os(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const t=this.context,u=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=c.L();c.bY(d,0,this.width,this.height,0,0,1),c.N(d,d,[u.drawingBufferWidth,u.drawingBufferHeight,0]);const _={mainMatrix:d,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:d};this.useProgram("clippingMask",null,!0).draw(t,u.TRIANGLES,lr.disabled,this.stencilClearMode,Yr.disabled,er.disabled,null,null,_,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,u,d){if(this.currentStencilSource===t.source||!t.isTileClipped()||!u||!u.length)return;this.currentStencilSource=t.source,this.nextStencilID+u.length>256&&this.clearStencil();const _=this.context;_.setColorMode(Yr.disabled),_.setDepthMode(lr.disabled);const S={};for(const A of u)S[A.key]=this.nextStencilID++;this._renderTileMasks(S,u,d,!0),this._renderTileMasks(S,u,d,!1),this._tileClippingMaskIDs=S}_renderTileMasks(t,u,d,_){const S=this.context,A=S.gl,I=this.style.projection,O=this.transform,B=this.useProgram("clippingMask");for(const U of u){const G=t[U.key],V=this.style.map.terrain&&this.style.map.terrain.getTerrainData(U),Q=I.getMeshFromTileID(this.context,U.canonical,_,!0,"stencil"),ae=O.getProjectionData({overscaledTileID:U,applyGlobeMatrix:!d,applyTerrainMatrix:!0});B.draw(S,A.TRIANGLES,lr.disabled,new Tr({func:A.ALWAYS,mask:0},G,255,A.KEEP,A.KEEP,A.REPLACE),Yr.disabled,d?er.disabled:er.backCCW,null,V,ae,"$clipping",Q.vertexBuffer,Q.indexBuffer,Q.segments)}}_renderTilesDepthBuffer(){const t=this.context,u=t.gl,d=this.style.projection,_=this.transform,S=this.useProgram("depth"),A=this.getDepthModeFor3D(),I=ke(_,{tileSize:_.tileSize});for(const O of I){const B=this.style.map.terrain&&this.style.map.terrain.getTerrainData(O),U=d.getMeshFromTileID(this.context,O.canonical,!0,!0,"raster"),G=_.getProjectionData({overscaledTileID:O,applyGlobeMatrix:!0,applyTerrainMatrix:!0});S.draw(t,u.TRIANGLES,A,Tr.disabled,Yr.disabled,er.backCCW,null,B,G,"$clipping",U.vertexBuffer,U.indexBuffer,U.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,u=this.context.gl;return new Tr({func:u.NOTEQUAL,mask:255},t,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(t){const u=this.context.gl;return new Tr({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,u.KEEP,u.KEEP,u.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(t){const u=this.context.gl,d=t.sort(((A,I)=>I.overscaledZ-A.overscaledZ)),_=d[d.length-1].overscaledZ,S=d[0].overscaledZ-_+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const A={};for(let I=0;I<S;I++)A[I+_]=new Tr({func:u.GEQUAL,mask:255},I+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=S,[A,d]}return[{[_]:Tr.disabled},d]}stencilConfigForOverlapTwoPass(t){const u=this.context.gl,d=t.sort(((A,I)=>I.overscaledZ-A.overscaledZ)),_=d[d.length-1].overscaledZ,S=d[0].overscaledZ-_+1;if(this.clearStencil(),S>1){const A={},I={};for(let O=0;O<S;O++)A[O+_]=new Tr({func:u.GREATER,mask:255},S+1+O,255,u.KEEP,u.KEEP,u.REPLACE),I[O+_]=new Tr({func:u.GREATER,mask:255},1+O,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID=2*S+1,[A,I,d]}return this.nextStencilID=3,[{[_]:new Tr({func:u.GREATER,mask:255},2,255,u.KEEP,u.KEEP,u.REPLACE)},{[_]:new Tr({func:u.GREATER,mask:255},1,255,u.KEEP,u.KEEP,u.REPLACE)},d]}colorModeForRenderPass(){const t=this.context.gl;return this._showOverdrawInspector?new Yr([t.CONSTANT_COLOR,t.ONE],new c.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Yr.unblended:Yr.alphaBlended}getDepthModeForSublayer(t,u,d){if(!this.opaquePassEnabledForLayer())return lr.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new lr(d||this.context.gl.LEQUAL,u,[_,_])}getDepthModeFor3D(){return new lr(this.context.gl.LEQUAL,lr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,u){var d,_;this.style=t,this.options=u,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(N.now()),this.imageManager.beginFrame();const S=this.style._order,A=this.style.sourceCaches,I={},O={},B={},U={isRenderingToTexture:!1,isRenderingGlobe:((d=t.projection)===null||d===void 0?void 0:d.transitionState)>0};for(const V in A){const Q=A[V];Q.used&&Q.prepare(this.context),I[V]=Q.getVisibleCoordinates(!1),O[V]=I[V].slice().reverse(),B[V]=Q.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let V=0;V<S.length;V++)if(this.style._layers[S[V]].is3D()){this.opaquePassCutoff=V;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const V of S){const Q=this.style._layers[V];if(!Q.hasOffscreenPass()||Q.isHidden(this.transform.zoom))continue;const ae=O[Q.source];(Q.type==="custom"||ae.length)&&this.renderLayer(this,A[Q.source],Q,ae,U)}if((_=this.style.projection)===null||_===void 0||_.updateGPUdependent({context:this.context,useProgram:V=>this.useProgram(V)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?c.bf.black:c.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(V,Q){const ae=V.context,ce=ae.gl,he=((Ee,ge,Ie)=>{const Ze=Math.cos(ge.rollInRadians),Fe=Math.sin(ge.rollInRadians),Ve=Se(ge),Xe=ge.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Ee.properties.get("sky-color"),u_horizon_color:Ee.properties.get("horizon-color"),u_horizon:[(ge.width/2-Ve*Fe)*Ie,(ge.height/2+Ve*Ze)*Ie],u_horizon_normal:[-Fe,Ze],u_sky_horizon_blend:Ee.properties.get("sky-horizon-blend")*ge.height/2*Ie,u_sky_blend:Xe}})(Q,V.style.map.transform,V.pixelRatio),fe=new lr(ce.LEQUAL,lr.ReadWrite,[0,1]),pe=Tr.disabled,be=V.colorModeForRenderPass(),me=V.useProgram("sky"),we=Hs(ae,Q);me.draw(ae,ce.TRIANGLES,fe,pe,be,er.disabled,he,null,void 0,"sky",we.vertexBuffer,we.indexBuffer,we.segments)})(this,this.style.sky),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=S.length-1;this.currentLayer>=0;this.currentLayer--){const V=this.style._layers[S[this.currentLayer]],Q=A[V.source],ae=I[V.source];this._renderTileClippingMasks(V,ae,!1),this.renderLayer(this,Q,V,ae,U)}this.renderPass="translucent";let G=!1;for(this.currentLayer=0;this.currentLayer<S.length;this.currentLayer++){const V=this.style._layers[S[this.currentLayer]],Q=A[V.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(V,U))continue;this.opaquePassEnabledForLayer()||G||(G=!0,U.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ae=(V.type==="symbol"?B:O)[V.source];this._renderTileClippingMasks(V,I[V.source],!!this.renderToTexture),this.renderLayer(this,Q,V,ae,U)}if(U.isRenderingGlobe&&(function(V,Q,ae){const ce=V.context,he=ce.gl,fe=V.useProgram("atmosphere"),pe=new lr(he.LEQUAL,lr.ReadOnly,[0,1]),be=V.transform,me=(function(Xe,Pt){const xt=Xe.properties.get("position"),lt=[-xt.x,-xt.y,-xt.z],jt=c.ag(new Float64Array(16));return Xe.properties.get("anchor")==="map"&&(c.b6(jt,jt,Pt.rollInRadians),c.b7(jt,jt,-Pt.pitchInRadians),c.b6(jt,jt,Pt.bearingInRadians),c.b7(jt,jt,Pt.center.lat*Math.PI/180),c.bz(jt,jt,-Pt.center.lng*Math.PI/180)),c.c5(lt,lt,jt),lt})(ae,V.transform),we=be.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ee=Q.properties.get("atmosphere-blend")*we.projectionTransition;if(Ee===0)return;const ge=pu(be.worldSize,be.center.lat),Ie=be.inverseProjectionMatrix,Ze=new Float64Array(4);Ze[3]=1,c.aw(Ze,Ze,be.modelViewProjectionMatrix),Ze[0]/=Ze[3],Ze[1]/=Ze[3],Ze[2]/=Ze[3],Ze[3]=1,c.aw(Ze,Ze,Ie),Ze[0]/=Ze[3],Ze[1]/=Ze[3],Ze[2]/=Ze[3],Ze[3]=1;const Fe=((Xe,Pt,xt,lt,jt)=>({u_sun_pos:Xe,u_atmosphere_blend:Pt,u_globe_position:xt,u_globe_radius:lt,u_inv_proj_matrix:jt}))(me,Ee,[Ze[0],Ze[1],Ze[2]],ge,Ie),Ve=Hs(ce,Q);fe.draw(ce,he.TRIANGLES,pe,Tr.disabled,Yr.alphaBlended,er.disabled,Fe,null,null,"atmosphere",Ve.vertexBuffer,Ve.indexBuffer,Ve.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const V=(function(Q,ae){let ce=null;const he=Object.values(Q._layers).flatMap((me=>me.source&&!me.isHidden(ae)?[Q.sourceCaches[me.source]]:[])),fe=he.filter((me=>me.getSource().type==="vector")),pe=he.filter((me=>me.getSource().type!=="vector")),be=me=>{(!ce||ce.getSource().maxzoom<me.getSource().maxzoom)&&(ce=me)};return fe.forEach((me=>be(me))),ce||pe.forEach((me=>be(me))),ce})(this.style,this.transform.zoom);V&&(function(Q,ae,ce){for(let he=0;he<ce.length;he++)uo(Q,ae,ce[he])})(this,V,V.getVisibleCoordinates())}this.options.showPadding&&(function(V){const Q=V.transform.padding;kf(V,V.transform.height-(Q.top||0),3,jr),kf(V,Q.bottom||0,3,Vs),Th(V,Q.left||0,3,lo),Th(V,V.transform.width-(Q.right||0),3,Tu);const ae=V.transform.centerPoint;(function(ce,he,fe,pe){Gr(ce,he-1,fe-10,2,20,pe),Gr(ce,he-10,fe-1,20,2,pe)})(V,ae.x,V.transform.height-ae.y,os)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(t){if(!this.style||!this.style.map||!this.style.map.terrain)return;const u=this.terrainFacilitator.matrix,d=this.transform.modelViewProjectionMatrix;let _=this.terrainFacilitator.dirty;_||(_=t?!c.c8(u,d):!c.c9(u,d)),_||(_=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),_&&(c.ca(u,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(S,A){const I=S.context,O=I.gl,B=S.transform,U=Yr.unblended,G=new lr(O.LEQUAL,lr.ReadWrite,[0,1]),V=A.sourceCache.getRenderableTiles(),Q=S.useProgram("terrainDepth");I.bindFramebuffer.set(A.getFramebuffer("depth").framebuffer),I.viewport.set([0,0,S.width/devicePixelRatio,S.height/devicePixelRatio]),I.clear({color:c.bf.transparent,depth:1});for(const ae of V){const ce=A.getTerrainMesh(ae.tileID),he=A.getTerrainData(ae.tileID),fe=B.getProjectionData({overscaledTileID:ae.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),pe={u_ele_delta:A.getMeshFrameDelta(B.zoom)};Q.draw(I,O.TRIANGLES,G,Tr.disabled,U,er.backCCW,pe,he,fe,"terrain",ce.vertexBuffer,ce.indexBuffer,ce.segments)}I.bindFramebuffer.set(null),I.viewport.set([0,0,S.width,S.height])})(this,this.style.map.terrain),(function(S,A){const I=S.context,O=I.gl,B=S.transform,U=Yr.unblended,G=new lr(O.LEQUAL,lr.ReadWrite,[0,1]),V=A.getCoordsTexture(),Q=A.sourceCache.getRenderableTiles(),ae=S.useProgram("terrainCoords");I.bindFramebuffer.set(A.getFramebuffer("coords").framebuffer),I.viewport.set([0,0,S.width/devicePixelRatio,S.height/devicePixelRatio]),I.clear({color:c.bf.transparent,depth:1}),A.coordsIndex=[];for(const ce of Q){const he=A.getTerrainMesh(ce.tileID),fe=A.getTerrainData(ce.tileID);I.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,V.texture);const pe={u_terrain_coords_id:(255-A.coordsIndex.length)/255,u_texture:0,u_ele_delta:A.getMeshFrameDelta(B.zoom)},be=B.getProjectionData({overscaledTileID:ce.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ae.draw(I,O.TRIANGLES,G,Tr.disabled,U,er.backCCW,pe,fe,be,"terrain",he.vertexBuffer,he.indexBuffer,he.segments),A.coordsIndex.push(ce.tileID.key)}I.bindFramebuffer.set(null),I.viewport.set([0,0,S.width,S.height])})(this,this.style.map.terrain))}renderLayer(t,u,d,_,S){d.isHidden(this.transform.zoom)||(d.type==="background"||d.type==="custom"||(_||[]).length)&&(this.id=d.id,c.cb(d)?(function(A,I,O,B,U,G){if(A.renderPass!=="translucent")return;const{isRenderingToTexture:V}=G,Q=Tr.disabled,ae=A.colorModeForRenderPass();(O._unevaluatedLayout.hasValue("text-variable-anchor")||O._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(ce,he,fe,pe,be,me,we,Ee,ge){const Ie=he.transform,Ze=he.style.map.terrain,Fe=be==="map",Ve=me==="map";for(const Xe of ce){const Pt=pe.getTile(Xe),xt=Pt.getBucket(fe);if(!xt||!xt.text||!xt.text.segments.get().length)continue;const lt=c.an(xt.textSizeData,Ie.zoom),jt=c.aC(Pt,1,he.transform.zoom),vr=Kr(Fe,he.transform,jt),Or=fe.layout.get("icon-text-fit")!=="none"&&xt.hasIconData();if(lt){const hn=Math.pow(2,Ie.zoom-Pt.tileID.overscaledZ),Wr=Ze?(Zr,rn)=>Ze.getElevation(Xe,Zr,rn):null;Ec(xt,Fe,Ve,ge,Ie,vr,hn,lt,Or,c.aD(Ie,Pt,we,Ee),Xe.toUnwrapped(),Wr)}}})(B,A,O,I,O.layout.get("text-rotation-alignment"),O.layout.get("text-pitch-alignment"),O.paint.get("text-translate"),O.paint.get("text-translate-anchor"),U),O.paint.get("icon-opacity").constantOr(1)!==0&&jo(A,I,O,B,!1,O.paint.get("icon-translate"),O.paint.get("icon-translate-anchor"),O.layout.get("icon-rotation-alignment"),O.layout.get("icon-pitch-alignment"),O.layout.get("icon-keep-upright"),Q,ae,V),O.paint.get("text-opacity").constantOr(1)!==0&&jo(A,I,O,B,!0,O.paint.get("text-translate"),O.paint.get("text-translate-anchor"),O.layout.get("text-rotation-alignment"),O.layout.get("text-pitch-alignment"),O.layout.get("text-keep-upright"),Q,ae,V),I.map.showCollisionBoxes&&(If(A,I,O,B,!0),If(A,I,O,B,!1))})(t,u,d,_,this.style.placement.variableOffsets,S):c.cc(d)?(function(A,I,O,B,U){if(A.renderPass!=="translucent")return;const{isRenderingToTexture:G}=U,V=O.paint.get("circle-opacity"),Q=O.paint.get("circle-stroke-width"),ae=O.paint.get("circle-stroke-opacity"),ce=!O.layout.get("circle-sort-key").isConstant();if(V.constantOr(1)===0&&(Q.constantOr(1)===0||ae.constantOr(1)===0))return;const he=A.context,fe=he.gl,pe=A.transform,be=A.getDepthModeForSublayer(0,lr.ReadOnly),me=Tr.disabled,we=A.colorModeForRenderPass(),Ee=[],ge=pe.getCircleRadiusCorrection();for(let Ie=0;Ie<B.length;Ie++){const Ze=B[Ie],Fe=I.getTile(Ze),Ve=Fe.getBucket(O);if(!Ve)continue;const Xe=O.paint.get("circle-translate"),Pt=O.paint.get("circle-translate-anchor"),xt=c.aD(pe,Fe,Xe,Pt),lt=Ve.programConfigurations.get(O.id),jt=A.useProgram("circle",lt),vr=Ve.layoutVertexBuffer,Or=Ve.indexBuffer,hn=A.style.map.terrain&&A.style.map.terrain.getTerrainData(Ze),Wr={programConfiguration:lt,program:jt,layoutVertexBuffer:vr,indexBuffer:Or,uniformValues:Zd(A,Fe,O,xt,ge),terrainData:hn,projectionData:pe.getProjectionData({overscaledTileID:Ze,applyGlobeMatrix:!G,applyTerrainMatrix:!0})};if(ce){const Zr=Ve.segments.get();for(const rn of Zr)Ee.push({segments:new c.aM([rn]),sortKey:rn.sortKey,state:Wr})}else Ee.push({segments:Ve.segments,sortKey:0,state:Wr})}ce&&Ee.sort(((Ie,Ze)=>Ie.sortKey-Ze.sortKey));for(const Ie of Ee){const{programConfiguration:Ze,program:Fe,layoutVertexBuffer:Ve,indexBuffer:Xe,uniformValues:Pt,terrainData:xt,projectionData:lt}=Ie.state;Fe.draw(he,fe.TRIANGLES,be,me,we,er.backCCW,Pt,xt,lt,O.id,Ve,Xe,Ie.segments,O.paint,A.transform.zoom,Ze)}})(t,u,d,_,S):c.cd(d)?(function(A,I,O,B,U){if(O.paint.get("heatmap-opacity")===0)return;const G=A.context,{isRenderingToTexture:V,isRenderingGlobe:Q}=U;if(A.style.map.terrain){for(const ae of B){const ce=I.getTile(ae);I.hasRenderableParent(ae)||(A.renderPass==="offscreen"?Cu(A,ce,O,ae,Q):A.renderPass==="translucent"&&ka(A,O,ae,V,Q))}G.viewport.set([0,0,A.width,A.height])}else A.renderPass==="offscreen"?(function(ae,ce,he,fe){const pe=ae.context,be=pe.gl,me=ae.transform,we=Tr.disabled,Ee=new Yr([be.ONE,be.ONE],c.bf.transparent,[!0,!0,!0,!0]);(function(ge,Ie,Ze){const Fe=ge.gl;ge.activeTexture.set(Fe.TEXTURE1),ge.viewport.set([0,0,Ie.width/4,Ie.height/4]);let Ve=Ze.heatmapFbos.get(c.c2);Ve?(Fe.bindTexture(Fe.TEXTURE_2D,Ve.colorAttachment.get()),ge.bindFramebuffer.set(Ve.framebuffer)):(Ve=zi(ge,Ie.width/4,Ie.height/4),Ze.heatmapFbos.set(c.c2,Ve))})(pe,ae,he),pe.clear({color:c.bf.transparent});for(let ge=0;ge<fe.length;ge++){const Ie=fe[ge];if(ce.hasRenderableParent(Ie))continue;const Ze=ce.getTile(Ie),Fe=Ze.getBucket(he);if(!Fe)continue;const Ve=Fe.programConfigurations.get(he.id),Xe=ae.useProgram("heatmap",Ve),Pt=me.getProjectionData({overscaledTileID:Ie,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),xt=me.getCircleRadiusCorrection();Xe.draw(pe,be.TRIANGLES,lr.disabled,we,Ee,er.backCCW,Xd(Ze,me.zoom,he.paint.get("heatmap-intensity"),xt),null,Pt,he.id,Fe.layoutVertexBuffer,Fe.indexBuffer,Fe.segments,he.paint,me.zoom,Ve)}pe.viewport.set([0,0,ae.width,ae.height])})(A,I,O,B):A.renderPass==="translucent"&&(function(ae,ce){const he=ae.context,fe=he.gl;he.setColorMode(ae.colorModeForRenderPass());const pe=ce.heatmapFbos.get(c.c2);pe&&(he.activeTexture.set(fe.TEXTURE0),fe.bindTexture(fe.TEXTURE_2D,pe.colorAttachment.get()),he.activeTexture.set(fe.TEXTURE1),oo(he,ce).bind(fe.LINEAR,fe.CLAMP_TO_EDGE),ae.useProgram("heatmapTexture").draw(he,fe.TRIANGLES,lr.disabled,Tr.disabled,ae.colorModeForRenderPass(),er.disabled,Af(ae,ce,0,1),null,null,ce.id,ae.viewportBuffer,ae.quadTriangleIndexBuffer,ae.viewportSegments,ce.paint,ae.transform.zoom))})(A,O)})(t,u,d,_,S):c.ce(d)?(function(A,I,O,B,U){if(A.renderPass!=="translucent")return;const{isRenderingToTexture:G}=U,V=O.paint.get("line-opacity"),Q=O.paint.get("line-width");if(V.constantOr(1)===0||Q.constantOr(1)===0)return;const ae=A.getDepthModeForSublayer(0,lr.ReadOnly),ce=A.colorModeForRenderPass(),he=O.paint.get("line-dasharray"),fe=O.paint.get("line-pattern"),pe=fe.constantOr(1),be=O.paint.get("line-gradient"),me=O.getCrossfadeParameters(),we=pe?"linePattern":he?"lineSDF":be?"lineGradient":"line",Ee=A.context,ge=Ee.gl,Ie=A.transform;let Ze=!0;for(const Fe of B){const Ve=I.getTile(Fe);if(pe&&!Ve.patternsLoaded())continue;const Xe=Ve.getBucket(O);if(!Xe)continue;const Pt=Xe.programConfigurations.get(O.id),xt=A.context.program.get(),lt=A.useProgram(we,Pt),jt=Ze||lt.program!==xt,vr=A.style.map.terrain&&A.style.map.terrain.getTerrainData(Fe),Or=fe.constantOr(null);if(Or&&Ve.imageAtlas){const Qr=Ve.imageAtlas,Xr=Qr.patternPositions[Or.to.toString()],Er=Qr.patternPositions[Or.from.toString()];Xr&&Er&&Pt.setConstantPatternPositions(Xr,Er)}const hn=Ie.getProjectionData({overscaledTileID:Fe,applyGlobeMatrix:!G,applyTerrainMatrix:!0}),Wr=Ie.getPixelScale(),Zr=pe?Tf(A,Ve,O,Wr,me):he?Ns(A,Ve,O,Wr,he,me):be?yc(A,Ve,O,Wr,Xe.lineClipsArray.length):_h(A,Ve,O,Wr);if(pe)Ee.activeTexture.set(ge.TEXTURE0),Ve.imageAtlasTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),Pt.updatePaintBuffers(me);else if(he&&(jt||A.lineAtlas.dirty))Ee.activeTexture.set(ge.TEXTURE0),A.lineAtlas.bind(Ee);else if(be){const Qr=Xe.gradients[O.id];let Xr=Qr.texture;if(O.gradientVersion!==Qr.version){let Er=256;if(O.stepInterpolant){const ei=I.getSource().maxzoom,Hn=Fe.canonical.z===ei?Math.ceil(1<<A.transform.maxZoom-Fe.canonical.z):1;Er=c.ah(c.c3(Xe.maxLineLength/c.$*1024*Hn),256,Ee.maxTextureSize)}Qr.gradient=c.c4({expression:O.gradientExpression(),evaluationKey:"lineProgress",resolution:Er,image:Qr.gradient||void 0,clips:Xe.lineClipsArray}),Qr.texture?Qr.texture.update(Qr.gradient):Qr.texture=new c.T(Ee,Qr.gradient,ge.RGBA),Qr.version=O.gradientVersion,Xr=Qr.texture}Ee.activeTexture.set(ge.TEXTURE0),Xr.bind(O.stepInterpolant?ge.NEAREST:ge.LINEAR,ge.CLAMP_TO_EDGE)}const rn=A.stencilModeForClipping(Fe);lt.draw(Ee,ge.TRIANGLES,ae,rn,ce,er.disabled,Zr,vr,hn,O.id,Xe.layoutVertexBuffer,Xe.indexBuffer,Xe.segments,O.paint,A.transform.zoom,Pt,Xe.layoutVertexBuffer2),Ze=!1}})(t,u,d,_,S):c.cf(d)?(function(A,I,O,B,U){const G=O.paint.get("fill-color"),V=O.paint.get("fill-opacity");if(V.constantOr(1)===0)return;const{isRenderingToTexture:Q}=U,ae=A.colorModeForRenderPass(),ce=O.paint.get("fill-pattern"),he=A.opaquePassEnabledForLayer()&&!ce.constantOr(1)&&G.constantOr(c.bf.transparent).a===1&&V.constantOr(0)===1?"opaque":"translucent";if(A.renderPass===he){const fe=A.getDepthModeForSublayer(1,A.renderPass==="opaque"?lr.ReadWrite:lr.ReadOnly);Ki(A,I,O,B,fe,ae,!1,Q)}if(A.renderPass==="translucent"&&O.paint.get("fill-antialias")){const fe=A.getDepthModeForSublayer(O.getPaintProperty("fill-outline-color")?2:0,lr.ReadOnly);Ki(A,I,O,B,fe,ae,!0,Q)}})(t,u,d,_,S):c.cg(d)?(function(A,I,O,B,U){const G=O.paint.get("fill-extrusion-opacity");if(G===0)return;const{isRenderingToTexture:V}=U;if(A.renderPass==="translucent"){const Q=new lr(A.context.gl.LEQUAL,lr.ReadWrite,A.depthRangeFor3D);if(G!==1||O.paint.get("fill-extrusion-pattern").constantOr(1))so(A,I,O,B,Q,Tr.disabled,Yr.disabled,V),so(A,I,O,B,Q,A.stencilModeFor3D(),A.colorModeForRenderPass(),V);else{const ae=A.colorModeForRenderPass();so(A,I,O,B,Q,Tr.disabled,ae,V)}}})(t,u,d,_,S):c.ch(d)?(function(A,I,O,B,U){if(A.renderPass!=="offscreen"&&A.renderPass!=="translucent")return;const{isRenderingToTexture:G}=U,V=A.context,Q=A.style.projection.useSubdivision,ae=A.getDepthModeForSublayer(0,lr.ReadOnly),ce=A.colorModeForRenderPass();if(A.renderPass==="offscreen")(function(he,fe,pe,be,me,we,Ee){const ge=he.context,Ie=ge.gl;for(const Ze of pe){const Fe=fe.getTile(Ze),Ve=Fe.dem;if(!Ve||!Ve.data||!Fe.needsHillshadePrepare)continue;const Xe=Ve.dim,Pt=Ve.stride,xt=Ve.getPixels();if(ge.activeTexture.set(Ie.TEXTURE1),ge.pixelStoreUnpackPremultiplyAlpha.set(!1),Fe.demTexture=Fe.demTexture||he.getTileTexture(Pt),Fe.demTexture){const jt=Fe.demTexture;jt.update(xt,{premultiply:!1}),jt.bind(Ie.NEAREST,Ie.CLAMP_TO_EDGE)}else Fe.demTexture=new c.T(ge,xt,Ie.RGBA,{premultiply:!1}),Fe.demTexture.bind(Ie.NEAREST,Ie.CLAMP_TO_EDGE);ge.activeTexture.set(Ie.TEXTURE0);let lt=Fe.fbo;if(!lt){const jt=new c.T(ge,{width:Xe,height:Xe,data:null},Ie.RGBA);jt.bind(Ie.LINEAR,Ie.CLAMP_TO_EDGE),lt=Fe.fbo=ge.createFramebuffer(Xe,Xe,!0,!1),lt.colorAttachment.set(jt.texture)}ge.bindFramebuffer.set(lt.framebuffer),ge.viewport.set([0,0,Xe,Xe]),he.useProgram("hillshadePrepare").draw(ge,Ie.TRIANGLES,me,we,Ee,er.disabled,Cf(Fe.tileID,Ve),null,null,be.id,he.rasterBoundsBuffer,he.quadTriangleIndexBuffer,he.rasterBoundsSegments),Fe.needsHillshadePrepare=!1}})(A,I,B,O,ae,Tr.disabled,ce),V.viewport.set([0,0,A.width,A.height]);else if(A.renderPass==="translucent")if(Q){const[he,fe,pe]=A.stencilConfigForOverlapTwoPass(B);Ch(A,I,O,pe,he,ae,ce,!1,G),Ch(A,I,O,pe,fe,ae,ce,!0,G)}else{const[he,fe]=A.getStencilConfigForOverlapAndUpdateStencilID(B);Ch(A,I,O,fe,he,ae,ce,!1,G)}})(t,u,d,_,S):c.ci(d)?(function(A,I,O,B,U){if(A.renderPass!=="translucent"||!B.length)return;const{isRenderingToTexture:G}=U,V=A.style.projection.useSubdivision,Q=A.getDepthModeForSublayer(0,lr.ReadOnly),ae=A.colorModeForRenderPass();if(V){const[ce,he,fe]=A.stencilConfigForOverlapTwoPass(B);as(A,I,O,fe,ce,Q,ae,!1,G),as(A,I,O,fe,he,Q,ae,!0,G)}else{const[ce,he]=A.getStencilConfigForOverlapAndUpdateStencilID(B);as(A,I,O,he,ce,Q,ae,!1,G)}})(t,u,d,_,S):c.cj(d)?(function(A,I,O,B,U){if(A.renderPass!=="translucent"||O.paint.get("raster-opacity")===0||!B.length)return;const{isRenderingToTexture:G}=U,V=I.getSource(),Q=A.style.projection.useSubdivision;if(V instanceof Kn)ii(A,I,O,B,null,!1,!1,V.tileCoords,V.flippedWindingOrder,G);else if(Q){const[ae,ce,he]=A.stencilConfigForOverlapTwoPass(B);ii(A,I,O,he,ae,!1,!0,Mc,!1,G),ii(A,I,O,he,ce,!0,!0,Mc,!1,G)}else{const[ae,ce]=A.getStencilConfigForOverlapAndUpdateStencilID(B);ii(A,I,O,ce,ae,!1,!0,Mc,!1,G)}})(t,u,d,_,S):c.ck(d)?(function(A,I,O,B,U){const G=O.paint.get("background-color"),V=O.paint.get("background-opacity");if(V===0)return;const{isRenderingToTexture:Q}=U,ae=A.context,ce=ae.gl,he=A.style.projection,fe=A.transform,pe=fe.tileSize,be=O.paint.get("background-pattern");if(A.isPatternMissing(be))return;const me=!be&&G.a===1&&V===1&&A.opaquePassEnabledForLayer()?"opaque":"translucent";if(A.renderPass!==me)return;const we=Tr.disabled,Ee=A.getDepthModeForSublayer(0,me==="opaque"?lr.ReadWrite:lr.ReadOnly),ge=A.colorModeForRenderPass(),Ie=A.useProgram(be?"backgroundPattern":"background"),Ze=B||ke(fe,{tileSize:pe,terrain:A.style.map.terrain});be&&(ae.activeTexture.set(ce.TEXTURE0),A.imageManager.bind(A.context));const Fe=O.getCrossfadeParameters();for(const Ve of Ze){const Xe=fe.getProjectionData({overscaledTileID:Ve,applyGlobeMatrix:!Q,applyTerrainMatrix:!0}),Pt=be?ep(V,A,be,{tileID:Ve,tileSize:pe},Fe):Jd(V,G),xt=A.style.map.terrain&&A.style.map.terrain.getTerrainData(Ve),lt=he.getMeshFromTileID(ae,Ve.canonical,!1,!0,"raster");Ie.draw(ae,ce.TRIANGLES,Ee,we,ge,er.backCCW,Pt,xt,Xe,O.id,lt.vertexBuffer,lt.indexBuffer,lt.segments)}})(t,0,d,_,S):c.cl(d)&&(function(A,I,O,B){const{isRenderingGlobe:U}=B,G=A.context,V=O.implementation,Q=A.style.projection,ae=A.transform,ce=ae.getProjectionDataForCustomLayer(U),he={farZ:ae.farZ,nearZ:ae.nearZ,fov:ae.fov*Math.PI/180,modelViewProjectionMatrix:ae.modelViewProjectionMatrix,projectionMatrix:ae.projectionMatrix,shaderData:{variantName:Q.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Q.shaderPreludeCode.vertexSource}`,define:Q.shaderDefine},defaultProjectionData:ce},fe=V.renderingMode?V.renderingMode:"2d";if(A.renderPass==="offscreen"){const pe=V.prerender;pe&&(A.setCustomLayerDefaults(),G.setColorMode(A.colorModeForRenderPass()),pe.call(V,G.gl,he),G.setDirty(),A.setBaseState())}else if(A.renderPass==="translucent"){A.setCustomLayerDefaults(),G.setColorMode(A.colorModeForRenderPass()),G.setStencilMode(Tr.disabled);const pe=fe==="3d"?A.getDepthModeFor3D():A.getDepthModeForSublayer(0,lr.ReadOnly);G.setDepthMode(pe),V.render(G.gl,he),G.setDirty(),A.setBaseState(),G.bindFramebuffer.set(null)}})(t,0,d,S))}saveTileTexture(t){const u=this._tileTextures[t.size[0]];u?u.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const u=this._tileTextures[t];return u&&u.length>0?u.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const u=this.imageManager.getPattern(t.from.toString()),d=this.imageManager.getPattern(t.to.toString());return!u||!d}useProgram(t,u,d=!1,_=[]){this.cache=this.cache||{};const S=!!this.style.map.terrain,A=this.style.projection,I=d?io.projectionMercator:A.shaderPreludeCode,O=d?Jo:A.shaderDefine,B=t+(u?u.cacheKey:"")+`/${d?pl:A.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(S?"/terrain":"")+(_?`/${_.join("/")}`:"");return this.cache[B]||(this.cache[B]=new Pf(this.context,io[t],u,Zi[t],this._showOverdrawInspector,S,I,O,_)),this.cache[B]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new c.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:t,drawingBufferHeight:u}=this.context.gl;return this.width!==t||this.height!==u}}function ss(b,t){let u,d=!1,_=null,S=null;const A=()=>{_=null,d&&(b.apply(S,u),_=setTimeout(A,t),d=!1)};return(...I)=>(d=!0,S=this,u=I,_||A(),_)}class Yi{constructor(t){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let d;return u.split("&").map((_=>_.split("="))).forEach((_=>{_[0]===this._hashName&&(d=_)})),(d&&d[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(!this._isValidHash(u))return!1;const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:d,pitch:+(u[4]||0)}),!0},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,u)},this._removeHash=()=>{const u=this._getCurrentHash();if(u.length===0)return;const d=u.join("/");let _=d;_.split("&").length>0&&(_=_.split("&")[0]),this._hashName&&(_=`${this._hashName}=${d}`);let S=window.location.hash.replace(_,"");S.startsWith("#&")?S=S.slice(0,1)+S.slice(2):S==="#"&&(S="");let A=window.location.href.replace(/(#.+)?$/,S);A=A.replace("&&","&"),window.history.replaceState(window.history.state,null,A)},this._updateHash=ss(this._updateHashUnthrottled,300),this._hashName=t&&encodeURIComponent(t)}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(t){const u=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,_=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,_),A=Math.round(u.lng*S)/S,I=Math.round(u.lat*S)/S,O=this._map.getBearing(),B=this._map.getPitch();let U="";if(U+=t?`/${A}/${I}/${d}`:`${d}/${I}/${A}`,(O||B)&&(U+="/"+Math.round(10*O)/10),B&&(U+=`/${Math.round(B)}`),this._hashName){const G=this._hashName;let V=!1;const Q=window.location.hash.slice(1).split("&").map((ae=>{const ce=ae.split("=")[0];return ce===G?(V=!0,`${ce}=${U}`):ae})).filter((ae=>ae));return V||Q.push(`${G}=${U}`),`#${Q.join("&")}`}return`#${U}`}_isValidHash(t){if(t.length<3||t.some(isNaN))return!1;try{new c.S(+t[2],+t[1])}catch{return!1}const u=+t[0],d=+(t[3]||0),_=+(t[4]||0);return u>=this._map.getMinZoom()&&u<=this._map.getMaxZoom()&&d>=-180&&d<=180&&_>=this._map.getMinPitch()&&_<=this._map.getMaxPitch()}}const ga={linearity:.3,easing:c.cm(0,0,.3,1)},za=c.e({deceleration:2500,maxSpeed:1400},ga),Rc=c.e({deceleration:20,maxSpeed:1400},ga),Eh=c.e({deceleration:1e3,maxSpeed:360},ga),Mu=c.e({deceleration:1e3,maxSpeed:90},ga),Dc=c.e({deceleration:1e3,maxSpeed:360},ga);class qs{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:N.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,u=N.now();for(;t.length>0&&u-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,roll:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)u.zoom+=S.zoomDelta||0,u.bearing+=S.bearingDelta||0,u.pitch+=S.pitchDelta||0,u.roll+=S.rollDelta||0,S.panDelta&&u.pan._add(S.panDelta),S.around&&(u.around=S.around),S.pinchAround&&(u.pinchAround=S.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(u.pan.mag()){const S=ya(u.pan.mag(),d,c.e({},za,t||{})),A=u.pan.mult(S.amount/u.pan.mag()),I=this._map.cameraHelper.handlePanInertia(A,this._map.transform);_.center=I.easingCenter,_.offset=I.easingOffset,$n(_,S)}if(u.zoom){const S=ya(u.zoom,d,Rc);_.zoom=this._map.transform.zoom+S.amount,$n(_,S)}if(u.bearing){const S=ya(u.bearing,d,Eh);_.bearing=this._map.transform.bearing+c.ah(S.amount,-179,179),$n(_,S)}if(u.pitch){const S=ya(u.pitch,d,Mu);_.pitch=this._map.transform.pitch+S.amount,$n(_,S)}if(u.roll){const S=ya(u.roll,d,Dc);_.roll=this._map.transform.roll+c.ah(S.amount,-179,179),$n(_,S)}if(_.zoom||_.bearing){const S=u.pinchAround===void 0?u.around:u.pinchAround;_.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),c.e(_,{noMoveStart:!0})}}function $n(b,t){(!b.duration||b.duration<t.duration)&&(b.duration=t.duration,b.easing=t.easing)}function ya(b,t,u){const{maxSpeed:d,linearity:_,deceleration:S}=u,A=c.ah(b*_/(t/1e3),-d,d),I=Math.abs(A)/(S*_);return{easing:u.easing,duration:1e3*I,amount:A*(I/2)}}class Qi extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,u,d,_={}){d=d instanceof MouseEvent?d:new MouseEvent(t,d);const S=j.mousePos(u.getCanvas(),d),A=u.unproject(S);super(t,c.e({point:S,lngLat:A,originalEvent:d},_)),this._defaultPrevented=!1,this.target=u}}class Ru extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,u,d){const _=t==="touchend"?d.changedTouches:d.touches,S=j.touchPos(u.getCanvasContainer(),_),A=S.map((O=>u.unproject(O))),I=S.reduce(((O,B,U,G)=>O.add(B.div(G.length))),new c.P(0,0));super(t,{points:S,point:I,lngLats:A,lngLat:u.unproject(I),originalEvent:d}),this._defaultPrevented=!1}}class Lf extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,u,d){super(t,{originalEvent:d}),this._defaultPrevented=!1}}class ip{constructor(t,u){this._map=t,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Lf(t.type,this._map,t))}mousedown(t,u){return this._mousedownPos=u,this._firePreventable(new Qi(t.type,this._map,t))}mouseup(t){this._map.fire(new Qi(t.type,this._map,t))}click(t,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Qi(t.type,this._map,t))}dblclick(t){return this._firePreventable(new Qi(t.type,this._map,t))}mouseover(t){this._map.fire(new Qi(t.type,this._map,t))}mouseout(t){this._map.fire(new Qi(t.type,this._map,t))}touchstart(t){return this._firePreventable(new Ru(t.type,this._map,t))}touchmove(t){this._map.fire(new Ru(t.type,this._map,t))}touchend(t){this._map.fire(new Ru(t.type,this._map,t))}touchcancel(t){this._map.fire(new Ru(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Jn{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new Qi(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Qi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new Qi(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Gs{constructor(t){this._map=t}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(t){return this.transform.screenPointToLocation(c.P.convert(t),this._map.terrain)}}class Ml{constructor(t,u){this._map=t,this._tr=new Gs(t),this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,u){this.isEnabled()&&t.shiftKey&&t.button===0&&(j.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(t,u){if(!this._active)return;const d=u;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const _=this._startPos;this._lastPos=d,this._box||(this._box=j.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));const S=Math.min(_.x,d.x),A=Math.max(_.x,d.x),I=Math.min(_.y,d.y),O=Math.max(_.y,d.y);j.setTransform(this._box,`translate(${S}px,${I}px)`),this._box.style.width=A-S+"px",this._box.style.height=O-I+"px"}mouseupWindow(t,u){if(!this._active||t.button!==0)return;const d=this._startPos,_=u;if(this.reset(),j.suppressClick(),d.x!==_.x||d.y!==_.y)return this._map.fire(new c.l("boxzoomend",{originalEvent:t})),{cameraAnimation:S=>S.fitScreenCoordinates(d,_,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&t.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(j.remove(this._box),this._box=null),j.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,u){return this._map.fire(new c.l(t,{originalEvent:u}))}}function Ws(b,t){if(b.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${b.length}, points ${t.length}`);const u={};for(let d=0;d<b.length;d++)u[b[d].identifier]=t[d];return u}class Du{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,u,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=t.timeStamp),d.length===this.numTouches&&(this.centroid=(function(_){const S=new c.P(0,0);for(const A of _)S._add(A);return S.div(_.length)})(u),this.touches=Ws(d,u)))}touchmove(t,u,d){if(this.aborted||!this.centroid)return;const _=Ws(d,u);for(const S in this.touches){const A=_[S];(!A||A.dist(this.touches[S])>30)&&(this.aborted=!0)}}touchend(t,u,d){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class ls{constructor(t){this.singleTap=new Du(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,u,d){this.singleTap.touchstart(t,u,d)}touchmove(t,u,d){this.singleTap.touchmove(t,u,d)}touchend(t,u,d){const _=this.singleTap.touchend(t,u,d);if(_){const S=t.timeStamp-this.lastTime<500,A=!this.lastTap||this.lastTap.dist(_)<30;if(S&&A||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class Ti{constructor(t){this._tr=new Gs(t),this._zoomIn=new ls({numTouches:1,numTaps:2}),this._zoomOut=new ls({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,u,d){this._zoomIn.touchstart(t,u,d),this._zoomOut.touchstart(t,u,d)}touchmove(t,u,d){this._zoomIn.touchmove(t,u,d),this._zoomOut.touchmove(t,u,d)}touchend(t,u,d){const _=this._zoomIn.touchend(t,u,d),S=this._zoomOut.touchend(t,u,d),A=this._tr;return _?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:A.zoom+1,around:A.unproject(_)},{originalEvent:t})}):S?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:A.zoom-1,around:A.unproject(S)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ji{constructor(t){this._enabled=!!t.enable,this._moveStateManager=t.moveStateManager,this._clickTolerance=t.clickTolerance||1,this._moveFunction=t.move,this._activateOnStart=!!t.activateOnStart,t.assignEvents(this),this.reset()}reset(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}_move(...t){const u=this._moveFunction(...t);if(u.bearingDelta||u.pitchDelta||u.rollDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(t,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=Array.isArray(u)?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(t,u){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(t.preventDefault(),!this._moveStateManager.isValidMoveEvent(t))return void this.reset(t);const _=Array.isArray(u)?u[0]:u;return!this._moved&&_.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=_,this._move(d,_))}dragEnd(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&j.suppressClick(),this.reset(t))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const zf=0,co=2,Rl={[zf]:1,[co]:2};class ho{constructor(t){this._correctEvent=t.checkCorrectEvent}startMove(t){const u=j.mouseButton(t);this._eventButton=u}endMove(t){delete this._eventButton}isValidStartEvent(t){return this._correctEvent(t)}isValidMoveEvent(t){return!(function(u,d){const _=Rl[d];return u.buttons===void 0||(u.buttons&_)!==_})(t,this._eventButton)}isValidEndEvent(t){return j.mouseButton(t)===this._eventButton}}class Nf{constructor(){this._firstTouch=void 0}_isOneFingerTouch(t){return t.targetTouches.length===1}_isSameTouchEvent(t){return t.targetTouches[0].identifier===this._firstTouch}startMove(t){this._firstTouch=t.targetTouches[0].identifier}endMove(t){delete this._firstTouch}isValidStartEvent(t){return this._isOneFingerTouch(t)}isValidMoveEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}isValidEndEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}class Mh{constructor(t=new ho({checkCorrectEvent:()=>!0}),u=new Nf){this.mouseMoveStateManager=t,this.oneFingerTouchMoveStateManager=u}_executeRelevantHandler(t,u,d){return t instanceof MouseEvent?u(t):typeof TouchEvent<"u"&&t instanceof TouchEvent?d(t):void 0}startMove(t){this._executeRelevantHandler(t,(u=>this.mouseMoveStateManager.startMove(u)),(u=>this.oneFingerTouchMoveStateManager.startMove(u)))}endMove(t){this._executeRelevantHandler(t,(u=>this.mouseMoveStateManager.endMove(u)),(u=>this.oneFingerTouchMoveStateManager.endMove(u)))}isValidStartEvent(t){return this._executeRelevantHandler(t,(u=>this.mouseMoveStateManager.isValidStartEvent(u)),(u=>this.oneFingerTouchMoveStateManager.isValidStartEvent(u)))}isValidMoveEvent(t){return this._executeRelevantHandler(t,(u=>this.mouseMoveStateManager.isValidMoveEvent(u)),(u=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(u)))}isValidEndEvent(t){return this._executeRelevantHandler(t,(u=>this.mouseMoveStateManager.isValidEndEvent(u)),(u=>this.oneFingerTouchMoveStateManager.isValidEndEvent(u)))}}const Ic=b=>{b.mousedown=b.dragStart,b.mousemoveWindow=b.dragMove,b.mouseup=b.dragEnd,b.contextmenu=t=>{t.preventDefault()}};class Iu{constructor(t,u){this._clickTolerance=t.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0)}_shouldBePrevented(t){return t<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(t,u,d){return this._calculateTransform(t,u,d)}touchmove(t,u,d){if(this._active){if(!this._shouldBePrevented(d.length))return t.preventDefault(),this._calculateTransform(t,u,d);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",t)}}touchend(t,u,d){this._calculateTransform(t,u,d),this._active&&this._shouldBePrevented(d.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,u,d){d.length>0&&(this._active=!0);const _=Ws(d,u),S=new c.P(0,0),A=new c.P(0,0);let I=0;for(const B in _){const U=_[B],G=this._touches[B];G&&(S._add(U),A._add(U.sub(G)),I++,_[B]=U)}if(this._touches=_,this._shouldBePrevented(I)||!A.mag())return;const O=A.div(I);return this._sum._add(O),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(I),panDelta:O}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zs{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(t,u,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([u[0],u[1]]))}touchmove(t,u,d){if(!this._firstTwoTouches)return;t.preventDefault();const[_,S]=this._firstTwoTouches,A=ea(d,u,_),I=ea(d,u,S);if(!A||!I)return;const O=this._aroundCenter?null:A.add(I).div(2);return this._move([A,I],O,t)}touchend(t,u,d){if(!this._firstTwoTouches)return;const[_,S]=this._firstTwoTouches,A=ea(d,u,_),I=ea(d,u,S);A&&I||(this._active&&j.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&t.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function ea(b,t,u){for(let d=0;d<b.length;d++)if(b[d].identifier===u)return t[d]}function Dt(b,t){return Math.log(b/t)/Math.LN2}class Rh extends Zs{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,u){const d=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Dt(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Dt(this._distance,d),pinchAround:u}}}function Dl(b,t){return 180*b.angleWith(t)/Math.PI}class Dh extends Zs{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,u,d){const _=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Dl(this._vector,_),pinchAround:u}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const u=25/(Math.PI*this._minDiameter)*360,d=Dl(t,this._startVector);return Math.abs(d)<u}}function fo(b){return Math.abs(b.y)>Math.abs(b.x)}class Il extends Zs{constructor(t){super(),this._currentTouchCount=0,this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,u,d){super.touchstart(t,u,d),this._currentTouchCount=d.length}_start(t){this._lastPoints=t,fo(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,u,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const _=t[0].sub(this._lastPoints[0]),S=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(_,S,d.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(_.y+S.y)/2*-.5}):void 0}gestureBeginsVertically(t,u,d){if(this._valid!==void 0)return this._valid;const _=t.mag()>=2,S=u.mag()>=2;if(!_&&!S)return;if(!_||!S)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const A=t.y>0==u.y>0;return fo(t)&&fo(u)&&A}}const Ih={panStep:100,bearingStep:15,pitchStep:10};class fr{constructor(t){this._tr=new Gs(t);const u=Ih;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let u=0,d=0,_=0,S=0,A=0;switch(t.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:t.shiftKey?d=-1:(t.preventDefault(),S=-1);break;case 39:t.shiftKey?d=1:(t.preventDefault(),S=1);break;case 38:t.shiftKey?_=1:(t.preventDefault(),A=-1);break;case 40:t.shiftKey?_=-1:(t.preventDefault(),A=1);break;default:return}return this._rotationDisabled&&(d=0,_=0),{cameraAnimation:I=>{const O=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:Oc,zoom:u?Math.round(O.zoom)+u*(t.shiftKey?2:1):O.zoom,bearing:O.bearing+d*this._bearingStep,pitch:O.pitch+_*this._pitchStep,offset:[-S*this._panStep,-A*this._panStep],center:O.center},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Oc(b){return b*(2-b)}const Oh=4.000244140625,Bo=1/450;class us{constructor(t,u){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=t,this._tr=new Gs(t),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Bo}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&t.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(t){return!!this._map.cooperativeGestures.isEnabled()&&!(t.ctrlKey||this._map.cooperativeGestures.isBypassed(t))}wheel(t){if(!this.isEnabled())return;if(this._shouldBePrevented(t))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",t);let u=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const d=N.now(),_=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,u!==0&&u%Oh==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(_*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),t.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=t,this._delta-=u,this._active||this._start(t)),t.preventDefault()}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=j.mousePos(this._map.getCanvas(),t),d=this._tr;this._aroundPoint=this._aroundCenter?d.transform.locationToScreenPoint(c.S.convert(d.center)):u,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const t=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const I=t.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=I),typeof this._targetZoom=="number"&&(this._targetZoom+=I)}if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>Oh?this._wheelZoomRate:this._defaultZoomRate;let O=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&O!==0&&(O=1/O);const B=typeof this._targetZoom!="number"?t.scale:c.af(this._targetZoom);this._targetZoom=t.getConstrained(t.getCameraLngLat(),c.ak(B*O)).zoom,this._type==="wheel"&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom!="number"?t.zoom:this._targetZoom,d=this._startZoom,_=this._easing;let S,A=!1;if(this._type==="wheel"&&d&&_){const I=N.now()-this._lastWheelEventTime,O=Math.min((I+5)/200,1),B=_(O);S=c.C.number(d,u,B),O<1?this._frameId||(this._frameId=!0):A=!0}else S=u,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=S,{noInertia:!0,needsRenderFrame:!A,zoomDelta:S-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let u=c.co;if(this._prevEase){const d=this._prevEase,_=(N.now()-d.start)/d.duration,S=d.easing(_+.01)-d.easing(_),A=.27/Math.sqrt(S*S+1e-4)*.01,I=Math.sqrt(.0729-A*A);u=c.cm(A,I,.25,1)}return this._prevEase={start:N.now(),duration:t,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ou{constructor(t,u){this._clickZoom=t,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class kh{constructor(t){this._tr=new Gs(t),this.reset()}reset(){this._active=!1}dblclick(t,u){return t.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(t.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kc{constructor(){this._tap=new ls({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(t,u,d){if(!this._swipePoint)if(this._tapTime){const _=u[0],S=t.timeStamp-this._tapTime<500,A=this._tapPoint.dist(_)<30;S&&A?d.length>0&&(this._swipePoint=_,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(t,u,d)}touchmove(t,u,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const _=u[0],S=_.y-this._swipePoint.y;return this._swipePoint=_,t.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(t,u,d)}touchend(t,u,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const _=this._tap.touchend(t,u,d);_&&(this._tapTime=t.timeStamp,this._tapPoint=_)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ol{constructor(t,u,d){this._el=t,this._mousePan=u,this._touchPan=d}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ku{constructor(t,u,d,_){this._pitchWithRotate=t.pitchWithRotate,this._rollEnabled=t.rollEnabled,this._mouseRotate=u,this._mousePitch=d,this._mouseRoll=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Lh{constructor(t,u,d,_){this._el=t,this._touchZoom=u,this._touchRotate=d,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class jf{constructor(t,u){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=t,this._options=u,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const t=this._map.getCanvasContainer();t.classList.add("maplibregl-cooperative-gestures"),this._container=j.create("div","maplibregl-cooperative-gesture-screen",t);let u=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(u=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),_=document.createElement("div");_.className="maplibregl-desktop-message",_.textContent=u,this._container.appendChild(_);const S=document.createElement("div");S.className="maplibregl-mobile-message",S.textContent=d,this._container.appendChild(S),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(j.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(t){return t[this._bypassKey]}notifyGestureBlocked(t,u){this._enabled&&(this._map.fire(new c.l("cooperativegestureprevented",{gestureType:t,originalEvent:u})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const cs=b=>b.zoom||b.drag||b.roll||b.pitch||b.rotate;class po extends c.l{}function Vr(b){return b.panDelta&&b.panDelta.mag()||b.zoomDelta||b.bearingDelta||b.pitchDelta||b.rollDelta}class Bf{constructor(t,u){this.handleWindowEvent=_=>{this.handleEvent(_,`${_.type}Window`)},this.handleEvent=(_,S)=>{if(_.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const A=_.type==="renderFrame"?void 0:_,I={needsRenderFrame:!1},O={},B={};for(const{handlerName:V,handler:Q,allowed:ae}of this._handlers){if(!Q.isEnabled())continue;let ce;if(this._blockedByActive(B,ae,V))Q.reset();else if(Q[S||_.type]){if(c.cp(_,S||_.type)){const he=j.mousePos(this._map.getCanvas(),_);ce=Q[S||_.type](_,he)}else if(c.cq(_,S||_.type)){const he=this._getMapTouches(_.touches),fe=j.touchPos(this._map.getCanvas(),he);ce=Q[S||_.type](_,fe,he)}else c.cr(S||_.type)||(ce=Q[S||_.type](_));this.mergeHandlerResult(I,O,ce,V,A),ce&&ce.needsRenderFrame&&this._triggerRenderFrame()}(ce||Q.isActive())&&(B[V]=Q)}const U={};for(const V in this._previousActiveHandlers)B[V]||(U[V]=A);this._previousActiveHandlers=B,(Object.keys(U).length||Vr(I))&&(this._changes.push([I,O,U]),this._triggerRenderFrame()),(Object.keys(B).length||Vr(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:G}=I;G&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],G(this._map))},this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new qs(t),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[_,S,A]of this._listeners)j.addEventListener(_,S,_===document?this.handleWindowEvent:this.handleEvent,A)}destroy(){for(const[t,u,d]of this._listeners)j.removeEventListener(t,u,t===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(t){const u=this._map,d=u.getCanvasContainer();this._add("mapEvent",new ip(u,t));const _=u.boxZoom=new Ml(u,t);this._add("boxZoom",_),t.interactive&&t.boxZoom&&_.enable();const S=u.cooperativeGestures=new jf(u,t.cooperativeGestures);this._add("cooperativeGestures",S),t.cooperativeGestures&&S.enable();const A=new Ti(u),I=new kh(u);u.doubleClickZoom=new Ou(I,A),this._add("tapZoom",A),this._add("clickZoom",I),t.interactive&&t.doubleClickZoom&&u.doubleClickZoom.enable();const O=new kc;this._add("tapDragZoom",O);const B=u.touchPitch=new Il(u);this._add("touchPitch",B),t.interactive&&t.touchPitch&&u.touchPitch.enable(t.touchPitch);const U=()=>u.project(u.getCenter()),G=(function({enable:me,clickTolerance:we,aroundCenter:Ee=!0,minPixelCenterThreshold:ge=100,rotateDegreesPerPixelMoved:Ie=.8},Ze){const Fe=new ho({checkCorrectEvent:Ve=>j.mouseButton(Ve)===0&&Ve.ctrlKey||j.mouseButton(Ve)===2&&!Ve.ctrlKey});return new Ji({clickTolerance:we,move:(Ve,Xe)=>{const Pt=Ze();if(Ee&&Math.abs(Pt.y-Ve.y)>ge)return{bearingDelta:c.cn(new c.P(Ve.x,Xe.y),Xe,Pt)};let xt=(Xe.x-Ve.x)*Ie;return Ee&&Xe.y<Pt.y&&(xt=-xt),{bearingDelta:xt}},moveStateManager:Fe,enable:me,assignEvents:Ic})})(t,U),V=(function({enable:me,clickTolerance:we,pitchDegreesPerPixelMoved:Ee=-.5}){const ge=new ho({checkCorrectEvent:Ie=>j.mouseButton(Ie)===0&&Ie.ctrlKey||j.mouseButton(Ie)===2});return new Ji({clickTolerance:we,move:(Ie,Ze)=>({pitchDelta:(Ze.y-Ie.y)*Ee}),moveStateManager:ge,enable:me,assignEvents:Ic})})(t),Q=(function({enable:me,clickTolerance:we,rollDegreesPerPixelMoved:Ee=.3},ge){const Ie=new ho({checkCorrectEvent:Ze=>j.mouseButton(Ze)===2&&Ze.ctrlKey});return new Ji({clickTolerance:we,move:(Ze,Fe)=>{const Ve=ge();let Xe=(Fe.x-Ze.x)*Ee;return Fe.y<Ve.y&&(Xe=-Xe),{rollDelta:Xe}},moveStateManager:Ie,enable:me,assignEvents:Ic})})(t,U);u.dragRotate=new ku(t,G,V,Q),this._add("mouseRotate",G,["mousePitch"]),this._add("mousePitch",V,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Q,["mousePitch"]),t.interactive&&t.dragRotate&&u.dragRotate.enable();const ae=(function({enable:me,clickTolerance:we}){const Ee=new ho({checkCorrectEvent:ge=>j.mouseButton(ge)===0&&!ge.ctrlKey});return new Ji({clickTolerance:we,move:(ge,Ie)=>({around:Ie,panDelta:Ie.sub(ge)}),activateOnStart:!0,moveStateManager:Ee,enable:me,assignEvents:Ic})})(t),ce=new Iu(t,u);u.dragPan=new Ol(d,ae,ce),this._add("mousePan",ae),this._add("touchPan",ce,["touchZoom","touchRotate"]),t.interactive&&t.dragPan&&u.dragPan.enable(t.dragPan);const he=new Dh,fe=new Rh;u.touchZoomRotate=new Lh(d,fe,he,O),this._add("touchRotate",he,["touchPan","touchZoom"]),this._add("touchZoom",fe,["touchPan","touchRotate"]),t.interactive&&t.touchZoomRotate&&u.touchZoomRotate.enable(t.touchZoomRotate);const pe=u.scrollZoom=new us(u,(()=>this._triggerRenderFrame()));this._add("scrollZoom",pe,["mousePan"]),t.interactive&&t.scrollZoom&&u.scrollZoom.enable(t.scrollZoom);const be=u.keyboard=new fr(u);this._add("keyboard",be),t.interactive&&t.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new Jn(u))}_add(t,u,d){this._handlers.push({handlerName:t,handler:u,allowed:d}),this._handlersById[t]=u}stop(t){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!cs(this._eventsInProgress)||this.isZooming()}_blockedByActive(t,u,d){for(const _ in t)if(_!==d&&(!u||u.indexOf(_)<0))return!0;return!1}_getMapTouches(t){const u=[];for(const d of t)this._el.contains(d.target)&&u.push(d);return u}mergeHandlerResult(t,u,d,_,S){if(!d)return;c.e(t,d);const A={handlerName:_,originalEvent:d.originalEvent||S};d.zoomDelta!==void 0&&(u.zoom=A),d.panDelta!==void 0&&(u.drag=A),d.rollDelta!==void 0&&(u.roll=A),d.pitchDelta!==void 0&&(u.pitch=A),d.bearingDelta!==void 0&&(u.rotate=A)}_applyChanges(){const t={},u={},d={};for(const[_,S,A]of this._changes)_.panDelta&&(t.panDelta=(t.panDelta||new c.P(0,0))._add(_.panDelta)),_.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+_.pitchDelta),_.rollDelta&&(t.rollDelta=(t.rollDelta||0)+_.rollDelta),_.around!==void 0&&(t.around=_.around),_.pinchAround!==void 0&&(t.pinchAround=_.pinchAround),_.noInertia&&(t.noInertia=_.noInertia),c.e(u,S),c.e(d,A);this._updateMapTransform(t,u,d),this._changes=[]}_updateMapTransform(t,u,d){const _=this._map,S=_._getTransformForUpdate(),A=_.terrain;if(!(Vr(t)||A&&this._terrainMovement))return this._fireEvents(u,d,!0);_._stop(!0);let{panDelta:I,zoomDelta:O,bearingDelta:B,pitchDelta:U,rollDelta:G,around:V,pinchAround:Q}=t;Q!==void 0&&(V=Q),V=V||_.transform.centerPoint,A&&!S.isPointOnMapSurface(V)&&(V=S.centerPoint);const ae={panDelta:I,zoomDelta:O,rollDelta:G,pitchDelta:U,bearingDelta:B,around:V};this._map.cameraHelper.useGlobeControls&&!S.isPointOnMapSurface(V)&&(V=S.centerPoint);const ce=V.distSqr(S.centerPoint)<.01?S.center:S.screenPointToLocation(I?V.sub(I):V);A?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ae,S),this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?S.setCenter(S.screenPointToLocation(S.centerPoint.sub(I))):this._map.cameraHelper.handleMapControlsPan(ae,S,ce):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(ae,S,ce))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ae,S),this._map.cameraHelper.handleMapControlsPan(ae,S,ce)),_._applyUpdatedTransform(S),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(u,d,!0)}_fireEvents(t,u,d){const _=cs(this._eventsInProgress),S=cs(t),A={};for(const G in t){const{originalEvent:V}=t[G];this._eventsInProgress[G]||(A[`${G}start`]=V),this._eventsInProgress[G]=t[G]}!_&&S&&this._fireEvent("movestart",S.originalEvent);for(const G in A)this._fireEvent(G,A[G]);S&&this._fireEvent("move",S.originalEvent);for(const G in t){const{originalEvent:V}=t[G];this._fireEvent(G,V)}const I={};let O;for(const G in this._eventsInProgress){const{handlerName:V,originalEvent:Q}=this._eventsInProgress[G];this._handlersById[V].isActive()||(delete this._eventsInProgress[G],O=u[V]||Q,I[`${G}end`]=O)}for(const G in I)this._fireEvent(G,I[G]);const B=cs(this._eventsInProgress),U=(_||S)&&!B;if(U&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const G=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&G.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(G)}if(d&&U){this._updatingCamera=!0;const G=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),V=Q=>Q!==0&&-this._bearingSnap<Q&&Q<this._bearingSnap;!G||!G.essential&&N.prefersReducedMotion?(this._map.fire(new c.l("moveend",{originalEvent:O})),V(this._map.getBearing())&&this._map.resetNorth()):(V(G.bearing||this._map.getBearing())&&(G.bearing=0),G.freezeElevation=!0,this._map.easeTo(G,{originalEvent:O})),this._updatingCamera=!1}}_fireEvent(t,u){this._map.fire(new c.l(t,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{delete this._frameId,this.handleEvent(new po("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Lu extends c.E{constructor(t,u,d){super(),this._renderFrameCallback=()=>{const _=Math.min((N.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(_)),_<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=d.bearingSnap,this.cameraHelper=u,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(t,u){t.apply(this.transform),this.transform=t,this.cameraHelper=u}getCenter(){return new c.S(this.transform.center.lng,this.transform.center.lat)}setCenter(t,u){return this.jumpTo({center:t},u)}getCenterElevation(){return this.transform.elevation}setCenterElevation(t,u){return this.jumpTo({elevation:t},u),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(t){this._centerClampedToGround=t}panBy(t,u,d){return t=c.P.convert(t).mult(-1),this.panTo(this.transform.center,c.e({offset:t},u),d)}panTo(t,u,d){return this.easeTo(c.e({center:t},u),d)}getZoom(){return this.transform.zoom}setZoom(t,u){return this.jumpTo({zoom:t},u),this}zoomTo(t,u,d){return this.easeTo(c.e({zoom:t},u),d)}zoomIn(t,u){return this.zoomTo(this.getZoom()+1,t,u),this}zoomOut(t,u){return this.zoomTo(this.getZoom()-1,t,u),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(t,u){return t!=this.transform.fov&&(this.transform.setFov(t),this.fire(new c.l("movestart",u)).fire(new c.l("move",u)).fire(new c.l("moveend",u))),this}getBearing(){return this.transform.bearing}setBearing(t,u){return this.jumpTo({bearing:t},u),this}getPadding(){return this.transform.padding}setPadding(t,u){return this.jumpTo({padding:t},u),this}rotateTo(t,u,d){return this.easeTo(c.e({bearing:t},u),d)}resetNorth(t,u){return this.rotateTo(0,c.e({duration:1e3},t),u),this}resetNorthPitch(t,u){return this.easeTo(c.e({bearing:0,pitch:0,roll:0,duration:1e3},t),u),this}snapToNorth(t,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,u):this}getPitch(){return this.transform.pitch}setPitch(t,u){return this.jumpTo({pitch:t},u),this}getRoll(){return this.transform.roll}setRoll(t,u){return this.jumpTo({roll:t},u),this}cameraForBounds(t,u){t=Ht.convert(t).adjustAntiMeridian();const d=u&&u.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),d,u)}_cameraForBoxAndBearing(t,u,d,_){const S={top:0,bottom:0,right:0,left:0};if(typeof(_=c.e({padding:S,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){const B=_.padding;_.padding={top:B,bottom:B,right:B,left:B}}const A=c.e(S,_.padding);_.padding=A;const I=this.transform,O=new Ht(t,u);return this.cameraHelper.cameraForBoxAndBearing(_,A,O,d,I)}fitBounds(t,u,d){return this._fitInternal(this.cameraForBounds(t,u),u,d)}fitScreenCoordinates(t,u,d,_,S){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(c.P.convert(t)),this.transform.screenPointToLocation(c.P.convert(u)),d,_),_,S)}_fitInternal(t,u,d){return t?(delete(u=c.e(t,u)).padding,u.linear?this.easeTo(u,d):this.flyTo(u,d)):this}jumpTo(t,u){this.stop();const d=this._getTransformForUpdate();let _=!1,S=!1,A=!1;const I=d.zoom;this.cameraHelper.handleJumpToCenterZoom(d,t);const O=d.zoom!==I;return"elevation"in t&&d.elevation!==+t.elevation&&d.setElevation(+t.elevation),"bearing"in t&&d.bearing!==+t.bearing&&(_=!0,d.setBearing(+t.bearing)),"pitch"in t&&d.pitch!==+t.pitch&&(S=!0,d.setPitch(+t.pitch)),"roll"in t&&d.roll!==+t.roll&&(A=!0,d.setRoll(+t.roll)),t.padding==null||d.isPaddingEqual(t.padding)||d.setPadding(t.padding),this._applyUpdatedTransform(d),this.fire(new c.l("movestart",u)).fire(new c.l("move",u)),O&&this.fire(new c.l("zoomstart",u)).fire(new c.l("zoom",u)).fire(new c.l("zoomend",u)),_&&this.fire(new c.l("rotatestart",u)).fire(new c.l("rotate",u)).fire(new c.l("rotateend",u)),S&&this.fire(new c.l("pitchstart",u)).fire(new c.l("pitch",u)).fire(new c.l("pitchend",u)),A&&this.fire(new c.l("rollstart",u)).fire(new c.l("roll",u)).fire(new c.l("rollend",u)),this.fire(new c.l("moveend",u))}calculateCameraOptionsFromTo(t,u,d,_=0){const S=c.a1.fromLngLat(t,u),A=c.a1.fromLngLat(d,_),I=A.x-S.x,O=A.y-S.y,B=A.z-S.z,U=Math.hypot(I,O,B);if(U===0)throw new Error("Can't calculate camera options with same From and To");const G=Math.hypot(I,O),V=c.ak(this.transform.cameraToCenterDistance/U/this.transform.tileSize),Q=180*Math.atan2(I,-O)/Math.PI;let ae=180*Math.acos(G/U)/Math.PI;return ae=B<0?90-ae:90+ae,{center:A.toLngLat(),elevation:_,zoom:V,pitch:ae,bearing:Q}}calculateCameraOptionsFromCameraLngLatAltRotation(t,u,d,_,S){const A=this.transform.calculateCenterFromCameraLngLatAlt(t,u,d,_);return{center:A.center,elevation:A.elevation,zoom:A.zoom,bearing:d,pitch:_,roll:S}}easeTo(t,u){this._stop(!1,t.easeId),((t=c.e({offset:[0,0],duration:500,easing:c.co},t)).animate===!1||!t.essential&&N.prefersReducedMotion)&&(t.duration=0);const d=this._getTransformForUpdate(),_=this.getBearing(),S=d.pitch,A=d.roll,I="bearing"in t?this._normalizeBearing(t.bearing,_):_,O="pitch"in t?+t.pitch:S,B="roll"in t?this._normalizeBearing(t.roll,A):A,U="padding"in t?t.padding:d.padding,G=c.P.convert(t.offset);let V,Q;t.around&&(V=c.S.convert(t.around),Q=d.locationToScreenPoint(V));const ae={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ce=this.cameraHelper.handleEaseTo(d,{bearing:I,pitch:O,roll:B,padding:U,around:V,aroundPoint:Q,offsetAsPoint:G,offset:t.offset,zoom:t.zoom,center:t.center});return this._rotating=this._rotating||_!==I,this._pitching=this._pitching||O!==S,this._rolling=this._rolling||B!==A,this._padding=!d.isPaddingEqual(U),this._zooming=this._zooming||ce.isZooming,this._easeId=t.easeId,this._prepareEase(u,t.noMoveStart,ae),this.terrain&&this._prepareElevation(ce.elevationCenter),this._ease((he=>{ce.easeFunc(he),this.terrain&&!t.freezeElevation&&this._updateElevation(he),this._applyUpdatedTransform(d),this._fireMoveEvents(u)}),(he=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(u,he)}),t),this}_prepareEase(t,u,d={}){this._moving=!0,u||d.moving||this.fire(new c.l("movestart",t)),this._zooming&&!d.zooming&&this.fire(new c.l("zoomstart",t)),this._rotating&&!d.rotating&&this.fire(new c.l("rotatestart",t)),this._pitching&&!d.pitching&&this.fire(new c.l("pitchstart",t)),this._rolling&&!d.rolling&&this.fire(new c.l("rollstart",t))}_prepareElevation(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(t,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(t){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(t<1&&u!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=t*(d-(u-(d*t+this._elevationStart))/(1-t)),this._elevationTarget=u}this.transform.setElevation(c.C.number(this._elevationStart,this._elevationTarget,t))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(t){if(!this.terrain&&t.elevation>=0&&t.pitch<=90)return{};const u=t.getCameraLngLat(),d=t.getCameraAltitude(),_=this.terrain?this.terrain.getElevationForLngLatZoom(u,t.zoom):0;if(d<_){const S=this.calculateCameraOptionsFromTo(u,_,t.center,t.elevation);return{pitch:S.pitch,zoom:S.zoom}}return{}}_applyUpdatedTransform(t){const u=[];if(u.push((_=>this._elevateCameraIfInsideTerrain(_))),this.transformCameraUpdate&&u.push((_=>this.transformCameraUpdate(_))),!u.length)return;const d=t.clone();for(const _ of u){const S=d.clone(),{center:A,zoom:I,roll:O,pitch:B,bearing:U,elevation:G}=_(S);A&&S.setCenter(A),G!==void 0&&S.setElevation(G),I!==void 0&&S.setZoom(I),O!==void 0&&S.setRoll(O),B!==void 0&&S.setPitch(B),U!==void 0&&S.setBearing(U),d.apply(S)}this.transform.apply(d)}_fireMoveEvents(t){this.fire(new c.l("move",t)),this._zooming&&this.fire(new c.l("zoom",t)),this._rotating&&this.fire(new c.l("rotate",t)),this._pitching&&this.fire(new c.l("pitch",t)),this._rolling&&this.fire(new c.l("roll",t))}_afterEase(t,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const d=this._zooming,_=this._rotating,S=this._pitching,A=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,d&&this.fire(new c.l("zoomend",t)),_&&this.fire(new c.l("rotateend",t)),S&&this.fire(new c.l("pitchend",t)),A&&this.fire(new c.l("rollend",t)),this.fire(new c.l("moveend",t))}flyTo(t,u){if(!t.essential&&N.prefersReducedMotion){const Xe=c.Q(t,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Xe,u)}this.stop(),t=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.co},t);const d=this._getTransformForUpdate(),_=d.bearing,S=d.pitch,A=d.roll,I=d.padding,O="bearing"in t?this._normalizeBearing(t.bearing,_):_,B="pitch"in t?+t.pitch:S,U="roll"in t?this._normalizeBearing(t.roll,A):A,G="padding"in t?t.padding:d.padding,V=c.P.convert(t.offset);let Q=d.centerPoint.add(V);const ae=d.screenPointToLocation(Q),ce=this.cameraHelper.handleFlyTo(d,{bearing:O,pitch:B,roll:U,padding:G,locationAtOffset:ae,offsetAsPoint:V,center:t.center,minZoom:t.minZoom,zoom:t.zoom});let he=t.curve;const fe=Math.max(d.width,d.height),pe=fe/ce.scaleOfZoom,be=ce.pixelPathLength;typeof ce.scaleOfMinZoom=="number"&&(he=Math.sqrt(fe/ce.scaleOfMinZoom/be*2));const me=he*he;function we(Xe){const Pt=(pe*pe-fe*fe+(Xe?-1:1)*me*me*be*be)/(2*(Xe?pe:fe)*me*be);return Math.log(Math.sqrt(Pt*Pt+1)-Pt)}function Ee(Xe){return(Math.exp(Xe)-Math.exp(-Xe))/2}function ge(Xe){return(Math.exp(Xe)+Math.exp(-Xe))/2}const Ie=we(!1);let Ze=function(Xe){return ge(Ie)/ge(Ie+he*Xe)},Fe=function(Xe){return fe*((ge(Ie)*(Ee(Pt=Ie+he*Xe)/ge(Pt))-Ee(Ie))/me)/be;var Pt},Ve=(we(!0)-Ie)/he;if(Math.abs(be)<2e-6||!isFinite(Ve)){if(Math.abs(fe-pe)<1e-6)return this.easeTo(t,u);const Xe=pe<fe?-1:1;Ve=Math.abs(Math.log(pe/fe))/he,Fe=()=>0,Ze=Pt=>Math.exp(Xe*he*Pt)}return t.duration="duration"in t?+t.duration:1e3*Ve/("screenSpeed"in t?+t.screenSpeed/he:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=_!==O,this._pitching=B!==S,this._rolling=U!==A,this._padding=!d.isPaddingEqual(G),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(ce.targetCenter),this._ease((Xe=>{const Pt=Xe*Ve,xt=1/Ze(Pt),lt=Fe(Pt);this._rotating&&d.setBearing(c.C.number(_,O,Xe)),this._pitching&&d.setPitch(c.C.number(S,B,Xe)),this._rolling&&d.setRoll(c.C.number(A,U,Xe)),this._padding&&(d.interpolatePadding(I,G,Xe),Q=d.centerPoint.add(V)),ce.easeFunc(Xe,xt,lt,Q),this.terrain&&!t.freezeElevation&&this._updateElevation(Xe),this._applyUpdatedTransform(d),this._fireMoveEvents(u)}),(()=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(u)}),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,u){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,u)}return t||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(t,u,d){d.animate===!1||d.duration===0?(t(1),u()):(this._easeStart=N.now(),this._easeOptions=d,this._onEaseFrame=t,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(t,u){t=c.aO(t,-180,180);const d=Math.abs(t-u);return Math.abs(t-360-u)<d&&(t-=360),Math.abs(t+360-u)<d&&(t+=360),t}queryTerrainElevation(t){return this.terrain?this.terrain.getElevationForLngLatZoom(c.S.convert(t),this.transform.tileZoom):null}}const mo={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Sr{constructor(t=mo){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=t}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options.compact,this._container=j.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=j.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=j.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){j.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,u){const d=this._map._getUIString(`AttributionControl.${u}`);t.title=d,t.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((_=>typeof _!="string"?"":_))):typeof this.options.customAttribution=="string"&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const u=this._map.style.sourceCaches;for(const _ in u){const S=u[_];if(S.used||S.usedForTerrain){const A=S.getSource();A.attribution&&t.indexOf(A.attribution)<0&&t.push(A.attribution)}}t=t.filter((_=>String(_).trim())),t.sort(((_,S)=>_.length-S.length)),t=t.filter(((_,S)=>{for(let A=S+1;A<t.length;A++)if(t[A].indexOf(_)>=0)return!1;return!0}));const d=t.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,t.length?(this._innerContainer.innerHTML=j.sanitize(d),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Hr{constructor(t={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const d=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=t}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=j.create("div","maplibregl-ctrl");const u=j.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){j.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Vn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const u=++this._id;return this._queue.push({callback:t,id:u,cancelled:!1}),u}remove(t){const u=this._currentlyRunning,d=u?this._queue.concat(u):this._queue;for(const _ of d)if(_.id===t)return void(_.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const d of u)if(!d.cancelled&&(d.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var zh=c.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class ta extends c.E{constructor(t){super(),this._lastTilesetChange=N.now(),this.sourceCache=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=t._source.tileSize*2**this.deltaZoom,t.usedForTerrain=!0,t.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(t,u){this.sourceCache.update(t,u),this._renderableTilesKeys=[];const d={};for(const _ of ke(t,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))d[_.key]=!0,this._renderableTilesKeys.push(_.key),this._tiles[_.key]||(_.terrainRttPosMatrix32f=new Float64Array(16),c.bY(_.terrainRttPosMatrix32f,0,c.$,c.$,0,0,1),this._tiles[_.key]=new Gi(_,this.tileSize),this._lastTilesetChange=N.now());for(const _ in this._tiles)d[_]||delete this._tiles[_]}freeRtt(t){for(const u in this._tiles){const d=this._tiles[u];(!t||d.tileID.equals(t)||d.tileID.isChildOf(t)||t.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((t=>this.getTileByID(t)))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t,u){return u?this._getTerrainCoordsForTileRanges(t,u):this._getTerrainCoordsForRegularTile(t)}_getTerrainCoordsForRegularTile(t){const u={};for(const d of this._renderableTilesKeys){const _=this._tiles[d].tileID,S=t.clone(),A=c.ba();if(_.canonical.equals(t.canonical))c.bY(A,0,c.$,c.$,0,0,1);else if(_.canonical.isChildOf(t.canonical)){const I=_.canonical.z-t.canonical.z,O=_.canonical.x-(_.canonical.x>>I<<I),B=_.canonical.y-(_.canonical.y>>I<<I),U=c.$>>I;c.bY(A,0,U,U,0,0,1),c.M(A,A,[-O*U,-B*U,0])}else{if(!t.canonical.isChildOf(_.canonical))continue;{const I=t.canonical.z-_.canonical.z,O=t.canonical.x-(t.canonical.x>>I<<I),B=t.canonical.y-(t.canonical.y>>I<<I),U=c.$>>I;c.bY(A,0,c.$,c.$,0,0,1),c.M(A,A,[O*U,B*U,0]),c.N(A,A,[1/2**I,1/2**I,0])}}S.terrainRttPosMatrix32f=new Float32Array(A),u[d]=S}return u}_getTerrainCoordsForTileRanges(t,u){const d={};for(const _ of this._renderableTilesKeys){const S=this._tiles[_].tileID;if(!this._isWithinTileRanges(S,u))continue;const A=t.clone(),I=c.ba();if(S.canonical.z===t.canonical.z){const O=t.canonical.x-S.canonical.x,B=t.canonical.y-S.canonical.y;c.bY(I,0,c.$,c.$,0,0,1),c.M(I,I,[O*c.$,B*c.$,0])}else if(S.canonical.z>t.canonical.z){const O=S.canonical.z-t.canonical.z,B=S.canonical.x-(S.canonical.x>>O<<O),U=S.canonical.y-(S.canonical.y>>O<<O),G=t.canonical.x-(S.canonical.x>>O),V=t.canonical.y-(S.canonical.y>>O),Q=c.$>>O;c.bY(I,0,Q,Q,0,0,1),c.M(I,I,[-B*Q+G*c.$,-U*Q+V*c.$,0])}else{const O=t.canonical.z-S.canonical.z,B=t.canonical.x-(t.canonical.x>>O<<O),U=t.canonical.y-(t.canonical.y>>O<<O),G=(t.canonical.x>>O)-S.canonical.x,V=(t.canonical.y>>O)-S.canonical.y,Q=c.$<<O;c.bY(I,0,Q,Q,0,0,1),c.M(I,I,[B*c.$+G*Q,U*c.$+V*Q,0])}A.terrainRttPosMatrix32f=new Float32Array(I),d[_]=A}return d}getSourceTile(t,u){const d=this.sourceCache._source;let _=t.overscaledZ-this.deltaZoom;if(_>d.maxzoom&&(_=d.maxzoom),_<d.minzoom)return null;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(_).key);let S=this.sourceCache.getTileByID(this._sourceTileCache[t.key]);if((!S||!S.dem)&&u)for(;_>=d.minzoom&&(!S||!S.dem);)S=this.sourceCache.getTileByID(t.scaledTo(_--).key);return S}anyTilesAfterTime(t=Date.now()){return this._lastTilesetChange>=t}_isWithinTileRanges(t,u){return u[t.canonical.z]&&t.canonical.x>=u[t.canonical.z].minTileX&&t.canonical.x<=u[t.canonical.z].maxTileX&&t.canonical.y>=u[t.canonical.z].minTileY&&t.canonical.y<=u[t.canonical.z].maxTileY}}class Fo{constructor(t,u,d){this._meshCache={},this.painter=t,this.sourceCache=new ta(u),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(t,u,d,_=c.$){var S;if(!(u>=0&&u<_&&d>=0&&d<_))return 0;const A=this.getTerrainData(t),I=(S=A.tile)===null||S===void 0?void 0:S.dem;if(!I)return 0;const O=c.cs([],[u/_*c.$,d/_*c.$],A.u_terrain_matrix),B=[O[0]*I.dim,O[1]*I.dim],U=Math.floor(B[0]),G=Math.floor(B[1]),V=B[0]-U,Q=B[1]-G;return I.get(U,G)*(1-V)*(1-Q)+I.get(U+1,G)*V*(1-Q)+I.get(U,G+1)*(1-V)*Q+I.get(U+1,G+1)*V*Q}getElevationForLngLatZoom(t,u){if(!c.ct(u,t.wrap()))return 0;const{tileID:d,mercatorX:_,mercatorY:S}=this._getOverscaledTileIDFromLngLatZoom(t,u);return this.getElevation(d,_%c.$,S%c.$,c.$)}getElevation(t,u,d,_=c.$){return this.getDEMElevation(t,u,d,_)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){const _=this.painter.context,S=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new c.T(_,S,_.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new c.T(_,new c.R({width:1,height:1}),_.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.ag([])}const u=this.sourceCache.getSourceTile(t,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const _=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new c.T(_,u.dem.getPixels(),_.gl.RGBA,{premultiply:!1}),u.demTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const d=u&&u+u.tileID.key+t.key;if(d&&!this._demMatrixCache[d]){const _=this.sourceCache.sourceCache._source.maxzoom;let S=t.canonical.z-u.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=_?S=t.canonical.z-_:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const A=t.canonical.x-(t.canonical.x>>S<<S),I=t.canonical.y-(t.canonical.y>>S<<S),O=c.cu(new Float64Array(16),[1/(c.$<<S),1/(c.$<<S),0]);c.M(O,O,[A*c.$,I*c.$,0]),this._demMatrixCache[t.key]={matrix:O,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(t){const u=this.painter,d=u.width/devicePixelRatio,_=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===_||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new c.T(u.context,{width:d,height:_,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new c.T(u.context,{width:d,height:_,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(d,_,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,d,_))),this._fbo.colorAttachment.set(t==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const t=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let S=0,A=0;S<this._coordsTextureSize;S++)for(let I=0;I<this._coordsTextureSize;I++,A+=4)u[A+0]=255&I,u[A+1]=255&S,u[A+2]=I>>8<<4|S>>8,u[A+3]=0;const d=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),_=new c.T(t,d,t.gl.RGBA,{premultiply:!1});return _.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=_,_}pointCoordinate(t){this.painter.maybeDrawDepthAndCoords(!0);const u=new Uint8Array(4),d=this.painter.context,_=d.gl,S=Math.round(t.x*this.painter.pixelRatio/devicePixelRatio),A=Math.round(t.y*this.painter.pixelRatio/devicePixelRatio),I=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),_.readPixels(S,I-A-1,1,1,_.RGBA,_.UNSIGNED_BYTE,u),d.bindFramebuffer.set(null);const O=u[0]+(u[2]>>4<<8),B=u[1]+((15&u[2])<<8),U=this.coordsIndex[255-u[3]],G=U&&this.sourceCache.getTileByID(U);if(!G)return null;const V=this._coordsTextureSize,Q=(1<<G.tileID.canonical.z)*V;return new c.a1((G.tileID.canonical.x*V+O)/Q+G.tileID.wrap,(G.tileID.canonical.y*V+B)/Q,this.getElevation(G.tileID,O,B,V))}depthAtPoint(t){const u=new Uint8Array(4),d=this.painter.context,_=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),_.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,_.RGBA,_.UNSIGNED_BYTE,u),d.bindFramebuffer.set(null),(u[0]/16777216+u[1]/65536+u[2]/256+u[3])/256}getTerrainMesh(t){var u;const d=((u=this.painter.style.projection)===null||u===void 0?void 0:u.transitionState)>0,_=d&&t.canonical.y===0,S=d&&t.canonical.y===(1<<t.canonical.z)-1,A=`m_${_?"n":""}_${S?"s":""}`;if(this._meshCache[A])return this._meshCache[A];const I=this.painter.context,O=new c.cv,B=new c.aN,U=this.meshSize,G=c.$/U,V=U*U;for(let ge=0;ge<=U;ge++)for(let Ie=0;Ie<=U;Ie++)O.emplaceBack(Ie*G,ge*G,0);for(let ge=0;ge<V;ge+=U+1)for(let Ie=0;Ie<U;Ie++)B.emplaceBack(Ie+ge,U+Ie+ge+1,U+Ie+ge+2),B.emplaceBack(Ie+ge,U+Ie+ge+2,Ie+ge+1);const Q=O.length,ae=Q+(U+1),ce=(U+1)*U,he=_?c.bh:0,fe=_?0:1,pe=S?c.bi:c.$,be=S?0:1;for(let ge=0;ge<=U;ge++)O.emplaceBack(ge*G,he,fe);for(let ge=0;ge<=U;ge++)O.emplaceBack(ge*G,pe,be);for(let ge=0;ge<U;ge++)B.emplaceBack(ce+ge,ae+ge,ae+ge+1),B.emplaceBack(ce+ge,ae+ge+1,ce+ge+1),B.emplaceBack(0+ge,Q+ge+1,Q+ge),B.emplaceBack(0+ge,0+ge+1,Q+ge+1);const me=O.length,we=me+2*(U+1);for(const ge of[0,1])for(let Ie=0;Ie<=U;Ie++)for(const Ze of[0,1])O.emplaceBack(ge*c.$,Ie*G,Ze);for(let ge=0;ge<2*U;ge+=2)B.emplaceBack(me+ge,me+ge+1,me+ge+3),B.emplaceBack(me+ge,me+ge+3,me+ge+2),B.emplaceBack(we+ge,we+ge+3,we+ge+1),B.emplaceBack(we+ge,we+ge+2,we+ge+3);const Ee=new Os(I.createVertexBuffer(O,zh.members),I.createIndexBuffer(B),c.aM.simpleSegment(0,0,O.length,B.length));return this._meshCache[A]=Ee,Ee}getMeshFrameDelta(t){return 2*Math.PI*c.bu/Math.pow(2,Math.max(t,0))/5}getMinTileElevationForLngLatZoom(t,u){var d;const{tileID:_}=this._getOverscaledTileIDFromLngLatZoom(t,u);return(d=this.getMinMaxElevation(_).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(t){const u=this.getTerrainData(t).tile,d={minElevation:null,maxElevation:null};return u&&u.dem&&(d.minElevation=u.dem.min*this.exaggeration,d.maxElevation=u.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(t,u){const d=c.a1.fromLngLat(t.wrap()),_=(1<<u)*c.$,S=d.x*_,A=d.y*_,I=Math.floor(S/c.$),O=Math.floor(A/c.$);return{tileID:new c.Z(u,0,u,I,O),mercatorX:S,mercatorY:A}}}class zt{constructor(t,u,d){this._context=t,this._size=u,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const t of this._objects)t.texture.destroy(),t.fbo.destroy()}_createObject(t){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new c.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(d.texture),{id:t,fbo:u,texture:d,stamp:-1,inUse:!1}}getObjectForId(t){return this._objects[t]}useObject(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((u=>t.id!==u)),this._recentlyUsed.push(t.id)}stampObject(t){t.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const t=this._createObject(this._objects.length);return this._objects.push(t),t}freeObject(t){t.inUse=!1}freeAllObjects(){for(const t of this._objects)this.freeObject(t)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((t=>!t.inUse))===!1}}const qt={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class hs{constructor(t,u){this.painter=t,this.terrain=u,this.pool=new zt(t.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}prepareForRender(t,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=t._order.filter((d=>!t._layers[d].isHidden(u))),this._coordsAscending={};for(const d in t.sourceCaches){this._coordsAscending[d]={};const _=t.sourceCaches[d].getVisibleCoordinates(),S=t.sourceCaches[d].getSource(),A=S instanceof Kn?S.terrainTileRanges:null;for(const I of _){const O=this.terrain.sourceCache.getTerrainCoords(I,A);for(const B in O)this._coordsAscending[d][B]||(this._coordsAscending[d][B]=[]),this._coordsAscending[d][B].push(O[B])}}this._coordsAscendingStr={};for(const d of t._order){const _=t._layers[d],S=_.source;if(qt[_.type]&&!this._coordsAscendingStr[S]){this._coordsAscendingStr[S]={};for(const A in this._coordsAscending[S])this._coordsAscendingStr[S][A]=this._coordsAscending[S][A].map((I=>I.key)).sort().join()}}for(const d of this._renderableTiles)for(const _ in this._coordsAscendingStr){const S=this._coordsAscendingStr[_][d.tileID.key];S&&S!==d.rttCoords[_]&&(d.rtt=[])}}renderLayer(t,u){if(t.isHidden(this.painter.transform.zoom))return!1;const d=Object.assign(Object.assign({},u),{isRenderingToTexture:!0}),_=t.type,S=this.painter,A=this._renderableLayerIds[this._renderableLayerIds.length-1]===t.id;if(qt[_]&&(this._prevType&&qt[this._prevType]||this._stacks.push([]),this._prevType=_,this._stacks[this._stacks.length-1].push(t.id),!A))return!0;if(qt[this._prevType]||qt[_]&&A){this._prevType=_;const I=this._stacks.length-1,O=this._stacks[I]||[];for(const B of this._renderableTiles){if(this.pool.isFull()&&(ma(this.painter,this.terrain,this._rttTiles,d),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(B),B.rtt[I]){const G=this.pool.getObjectForId(B.rtt[I].id);if(G.stamp===B.rtt[I].stamp){this.pool.useObject(G);continue}}const U=this.pool.getOrCreateFreeObject();this.pool.useObject(U),this.pool.stampObject(U),B.rtt[I]={id:U.id,stamp:U.stamp},S.context.bindFramebuffer.set(U.fbo.framebuffer),S.context.clear({color:c.bf.transparent,stencil:0}),S.currentStencilSource=void 0;for(let G=0;G<O.length;G++){const V=S.style._layers[O[G]],Q=V.source?this._coordsAscending[V.source][B.tileID.key]:[B.tileID];S.context.viewport.set([0,0,U.fbo.width,U.fbo.height]),S._renderTileClippingMasks(V,Q,!0),S.renderLayer(S,S.style.sourceCaches[V.source],V,Q,d),V.source&&(B.rttCoords[V.source]=this._coordsAscendingStr[V.source][B.tileID.key])}}return ma(this.painter,this.terrain,this._rttTiles,d),this._rttTiles=[],this.pool.freeAllObjects(),qt[_]}return!1}}const Ff={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},xn=C,pi={hash:!1,interactive:!0,bearingSnap:7,attributionControl:mo,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Nh={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Ka{constructor(t,u,d=!1){this.mousedown=S=>{this.startMove(S,j.mousePos(this.element,S)),j.addEventListener(window,"mousemove",this.mousemove),j.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=S=>{this.move(S,j.mousePos(this.element,S))},this.mouseup=S=>{this._rotatePitchHandler.dragEnd(S),this.offTemp()},this.touchstart=S=>{S.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=j.touchPos(this.element,S.targetTouches)[0],this.startMove(S,this._startPos),j.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),j.addEventListener(window,"touchend",this.touchend))},this.touchmove=S=>{S.targetTouches.length!==1?this.reset():(this._lastPos=j.touchPos(this.element,S.targetTouches)[0],this.move(S,this._lastPos))},this.touchend=S=>{S.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=u;const _=new Mh;this._rotatePitchHandler=new Ji({clickTolerance:3,move:(S,A)=>{const I=u.getBoundingClientRect(),O=new c.P((I.bottom-I.top)/2,(I.right-I.left)/2);return{bearingDelta:c.cn(new c.P(S.x,A.y),A,O),pitchDelta:d?-.5*(A.y-S.y):void 0}},moveStateManager:_,enable:!0,assignEvents:()=>{}}),this.map=t,j.addEventListener(u,"mousedown",this.mousedown),j.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),j.addEventListener(u,"touchcancel",this.reset)}startMove(t,u){this._rotatePitchHandler.dragStart(t,u),j.disableDrag()}move(t,u){const d=this.map,{bearingDelta:_,pitchDelta:S}=this._rotatePitchHandler.dragMove(t,u)||{};_&&d.setBearing(d.getBearing()+_),S&&d.setPitch(d.getPitch()+S)}off(){const t=this.element;j.removeEventListener(t,"mousedown",this.mousedown),j.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),j.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),j.removeEventListener(window,"touchend",this.touchend),j.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){j.enableDrag(),j.removeEventListener(window,"mousemove",this.mousemove),j.removeEventListener(window,"mouseup",this.mouseup),j.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),j.removeEventListener(window,"touchend",this.touchend)}}let Xs;function zu(b,t,u,d=!1){if(d||!u.getCoveringTilesDetailsProvider().allowWorldCopies())return b?.wrap();const _=new c.S(b.lng,b.lat);if(b=new c.S(b.lng,b.lat),t){const S=new c.S(b.lng-360,b.lat),A=new c.S(b.lng+360,b.lat),I=u.locationToScreenPoint(b).distSqr(t);u.locationToScreenPoint(S).distSqr(t)<I?b=S:u.locationToScreenPoint(A).distSqr(t)<I&&(b=A)}for(;Math.abs(b.lng-u.center.lng)>180;){const S=u.locationToScreenPoint(b);if(S.x>=0&&S.y>=0&&S.x<=u.width&&S.y<=u.height)break;b.lng>u.center.lng?b.lng-=360:b.lng+=360}return b.lng!==_.lng&&u.isPointOnMapSurface(u.locationToScreenPoint(b))?b:_}const tn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function wn(b,t,u){const d=b.classList;for(const _ in tn)d.remove(`maplibregl-${u}-anchor-${_}`);d.add(`maplibregl-${u}-anchor-${t}`)}class Nu extends c.E{constructor(t){if(super(),this._onKeyPress=u=>{const d=u.code,_=u.charCode||u.keyCode;d!=="Space"&&d!=="Enter"&&_!==32&&_!==13||this.togglePopup()},this._onMapClick=u=>{const d=u.originalEvent.target,_=this._element;this._popup&&(d===_||_.contains(d))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const d=this._map.loaded()&&!this._map.isMoving();(u?.type==="terrain"||u?.type==="render"&&!d)&&this._map.once("render",this._update),this._lngLat=zu(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let S="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?S="rotateX(0deg)":this._pitchAlignment==="map"&&(S=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||u&&u.type!=="moveend"||(this._pos=this._pos.round()),j.setTransform(this._element,`${tn[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${S} ${_}`),N.frameAsync(new AbortController).then((()=>{this._updateOpacity(u&&u.type==="moveend")})).catch((()=>{}))},this._onMove=u=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.l("dragstart"))),this.fire(new c.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.l("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._subpixelPositioning=t&&t.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment!=="auto"?t.pitchAlignment:this._rotationAlignment,this.setOpacity(t?.opacity,t?.opacityWhenCovered),t&&t.element)this._element=t.element,this._offset=c.P.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=j.create("div");const u=j.createNS("http://www.w3.org/2000/svg","svg"),d=41,_=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${d}px`),u.setAttributeNS(null,"width",`${_}px`),u.setAttributeNS(null,"viewBox",`0 0 ${_} ${d}`);const S=j.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"stroke","none"),S.setAttributeNS(null,"stroke-width","1"),S.setAttributeNS(null,"fill","none"),S.setAttributeNS(null,"fill-rule","evenodd");const A=j.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"fill-rule","nonzero");const I=j.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const O=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const fe of O){const pe=j.createNS("http://www.w3.org/2000/svg","ellipse");pe.setAttributeNS(null,"opacity","0.04"),pe.setAttributeNS(null,"cx","10.5"),pe.setAttributeNS(null,"cy","5.80029008"),pe.setAttributeNS(null,"rx",fe.rx),pe.setAttributeNS(null,"ry",fe.ry),I.appendChild(pe)}const B=j.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"fill",this._color);const U=j.createNS("http://www.w3.org/2000/svg","path");U.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),B.appendChild(U);const G=j.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"opacity","0.25"),G.setAttributeNS(null,"fill","#000000");const V=j.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),G.appendChild(V);const Q=j.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Q.setAttributeNS(null,"fill","#FFFFFF");const ae=j.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ce=j.createNS("http://www.w3.org/2000/svg","circle");ce.setAttributeNS(null,"fill","#000000"),ce.setAttributeNS(null,"opacity","0.25"),ce.setAttributeNS(null,"cx","5.5"),ce.setAttributeNS(null,"cy","5.5"),ce.setAttributeNS(null,"r","5.4999962");const he=j.createNS("http://www.w3.org/2000/svg","circle");he.setAttributeNS(null,"fill","#FFFFFF"),he.setAttributeNS(null,"cx","5.5"),he.setAttributeNS(null,"cy","5.5"),he.setAttributeNS(null,"r","5.4999962"),ae.appendChild(ce),ae.appendChild(he),A.appendChild(I),A.appendChild(B),A.appendChild(G),A.appendChild(Q),A.appendChild(ae),u.appendChild(A),u.setAttributeNS(null,"height",d*this._scale+"px"),u.setAttributeNS(null,"width",_*this._scale+"px"),this._element.appendChild(u),this._offset=c.P.convert(t&&t.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(u=>{u.preventDefault()})),this._element.addEventListener("mousedown",(u=>{u.preventDefault()})),wn(this._element,this._anchor,"marker"),t&&t.className)for(const u of t.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(t){return this.remove(),this._map=t,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",t._getUIString("Marker.Title")),t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("terrain",this._update),t.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),j.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=c.S.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const _=Math.abs(13.5)/Math.SQRT2;t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=t,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(t){return this._subpixelPositioning=t,this}getPopup(){return this._popup}togglePopup(){const t=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:t?(t.isOpen()?t.remove():(t.setLngLat(this._lngLat),t.addTo(this._map)),this):this}_updateOpacity(t=!1){var u,d;const _=(u=this._map)===null||u===void 0?void 0:u.terrain,S=this._map.transform.isLocationOccluded(this._lngLat);if(!_||S){const Q=S?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Q&&(this._element.style.opacity=Q))}if(t)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const A=this._map,I=A.terrain.depthAtPoint(this._pos),O=A.terrain.getElevationForLngLatZoom(this._lngLat,A.transform.tileZoom);if(A.transform.lngLatToCameraDepth(this._lngLat,O)-I<.006)return void(this._element.style.opacity=this._opacity);const B=-this._offset.y/A.transform.pixelsPerMeter,U=Math.sin(A.getPitch()*Math.PI/180)*B,G=A.terrain.depthAtPoint(new c.P(this._pos.x,this._pos.y-this._offset.y)),V=A.transform.lngLatToCameraDepth(this._lngLat,O+U)-G>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&V&&this._popup.remove(),this._element.style.opacity=V?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(t){return this._offset=c.P.convert(t),this._update(),this}addClassName(t){this._element.classList.add(t)}removeClassName(t){this._element.classList.remove(t)}toggleClassName(t){return this._element.classList.toggle(t)}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&t!=="auto"?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(t,u){return(this._opacity===void 0||t===void 0&&u===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),t!==void 0&&(this._opacity=t),u!==void 0&&(this._opacityWhenCovered=u),this._map&&this._updateOpacity(!0),this}}const mi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let cn=0,fs=!1;const kl={maxWidth:100,unit:"metric"};function Ll(b,t,u){const d=u&&u.maxWidth||100,_=b._container.clientHeight/2,S=b._container.clientWidth/2,A=b.unproject([S-d/2,_]),I=b.unproject([S+d/2,_]),O=Math.round(b.project(I).x-b.project(A).x),B=Math.min(d,O,b._container.clientWidth),U=A.distanceTo(I);if(u&&u.unit==="imperial"){const G=3.2808*U;G>5280?go(t,B,G/5280,b._getUIString("ScaleControl.Miles")):go(t,B,G,b._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?go(t,B,U/1852,b._getUIString("ScaleControl.NauticalMiles")):U>=1e3?go(t,B,U/1e3,b._getUIString("ScaleControl.Kilometers")):go(t,B,U,b._getUIString("ScaleControl.Meters"))}function go(b,t,u,d){const _=(function(S){const A=Math.pow(10,`${Math.floor(S)}`.length-1);let I=S/A;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:(function(O){const B=Math.pow(10,Math.ceil(-Math.log(O)/Math.LN10));return Math.round(O*B)/B})(I),A*I})(u);b.style.width=t*(_/u)+"px",b.innerHTML=`${_}&nbsp;${d}`}const yo={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},ju=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Bu(b){if(b){if(typeof b=="number"){const t=Math.round(Math.abs(b)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,b),"top-left":new c.P(t,t),"top-right":new c.P(-t,t),bottom:new c.P(0,-b),"bottom-left":new c.P(t,-t),"bottom-right":new c.P(-t,-t),left:new c.P(b,0),right:new c.P(-b,0)}}if(b instanceof c.P||Array.isArray(b)){const t=c.P.convert(b);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:c.P.convert(b.center||[0,0]),top:c.P.convert(b.top||[0,0]),"top-left":c.P.convert(b["top-left"]||[0,0]),"top-right":c.P.convert(b["top-right"]||[0,0]),bottom:c.P.convert(b.bottom||[0,0]),"bottom-left":c.P.convert(b["bottom-left"]||[0,0]),"bottom-right":c.P.convert(b["bottom-right"]||[0,0]),left:c.P.convert(b.left||[0,0]),right:c.P.convert(b.right||[0,0])}}return Bu(new c.P(0,0))}const Lc=C;y.AJAXError=c.cz,y.Event=c.l,y.Evented=c.E,y.LngLat=c.S,y.MercatorCoordinate=c.a1,y.Point=c.P,y.addProtocol=c.cA,y.config=c.a,y.removeProtocol=c.cB,y.AttributionControl=Sr,y.BoxZoomHandler=Ml,y.CanvasSource=bi,y.CooperativeGesturesHandler=jf,y.DoubleClickZoomHandler=Ou,y.DragPanHandler=Ol,y.DragRotateHandler=ku,y.EdgeInsets=es,y.FullscreenControl=class extends c.E{constructor(b={}){super(),this._onFullscreenChange=()=>{var t;let u=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((t=u?.shadowRoot)===null||t===void 0)&&t.fullscreenElement;)u=u.shadowRoot.fullscreenElement;u===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,b&&b.container&&(b.container instanceof HTMLElement?this._container=b.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(b){return this._map=b,this._container||(this._container=this._map.getContainer()),this._controlContainer=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){j.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const b=this._fullscreenButton=j.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);j.create("span","maplibregl-ctrl-icon",b).setAttribute("aria-hidden","true"),b.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const b=this._getTitle();this._fullscreenButton.setAttribute("aria-label",b),this._fullscreenButton.title=b}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new c.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},y.GeoJSONSource=Bn,y.GeolocateControl=class extends c.E{constructor(b){super(),this._onSuccess=t=>{if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new c.l("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(t),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.l("geolocate",t)),this._finish()}},this._updateCamera=t=>{const u=new c.S(t.coords.longitude,t.coords.latitude),d=t.coords.accuracy,_=this._map.getBearing(),S=c.e({bearing:_},this.options.fitBoundsOptions),A=Ht.fromLngLat(u,d);this._map.fitBounds(A,S,{geolocateSource:!0})},this._updateMarker=t=>{if(t){const u=new c.S(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=t.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=t=>{if(this._map){if(t.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(t.code===3&&fs)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.l("error",t)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=j.create("button","maplibregl-ctrl-geolocate",this._container),j.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=t=>{if(this._map){if(t===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=j.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Nu({element:this._dotElement}),this._circleElement=j.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Nu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(u=>{const d=u?.[0]instanceof ResizeObserverEntry;u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.l("trackuserlocationend")),this.fire(new c.l("userlocationlostfocus")))}))}},this.options=c.e({},mi,b)}onAdd(b){return this._map=b,this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return c._(this,arguments,void 0,(function*(t=!1){if(Xs!==void 0&&!t)return Xs;if(window.navigator.permissions===void 0)return Xs=!!window.navigator.geolocation,Xs;try{Xs=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Xs=!!window.navigator.geolocation}return Xs}))})().then((t=>this._finishSetupUI(t))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),j.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,cn=0,fs=!1}_isOutOfMapMaxBounds(b){const t=this._map.getMaxBounds(),u=b.coords;return t&&(u.longitude<t.getWest()||u.longitude>t.getEast()||u.latitude<t.getSouth()||u.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const b=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&b))return;const t=this._map.project(b),u=this._map.unproject([t.x+100,t.y]),d=b.distanceTo(u)/100,_=2*this._accuracy/d;this._circleElement.style.width=`${_.toFixed(2)}px`,this._circleElement.style.height=`${_.toFixed(2)}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":cn--,fs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.l("trackuserlocationstart")),this.fire(new c.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let b;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),cn++,cn>1?(b={maximumAge:6e5,timeout:0},fs=!0):(b=this.options.positionOptions,fs=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,b)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},y.GlobeControl=class{constructor(){this._toggleProjection=()=>{var b;const t=(b=this._map.getProjection())===null||b===void 0?void 0:b.type;this._map.setProjection(t!=="mercator"&&t?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var b;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((b=this._map.getProjection())===null||b===void 0?void 0:b.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(b){return this._map=b,this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=j.create("button","maplibregl-ctrl-globe",this._container),j.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){j.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},y.Hash=Yi,y.ImageSource=Kn,y.KeyboardHandler=fr,y.LngLatBounds=Ht,y.LogoControl=Hr,y.Map=class extends Lu{constructor(b){var t,u;c.cw.mark(c.cx.create);const d=Object.assign(Object.assign(Object.assign({},pi),b),{canvasContextAttributes:Object.assign(Object.assign({},pi.canvasContextAttributes),b.canvasContextAttributes)});if(d.minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(d.maxPitch!=null&&d.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const _=new Br,S=new En;if(d.minZoom!==void 0&&_.setMinZoom(d.minZoom),d.maxZoom!==void 0&&_.setMaxZoom(d.maxZoom),d.minPitch!==void 0&&_.setMinPitch(d.minPitch),d.maxPitch!==void 0&&_.setMaxPitch(d.maxPitch),d.renderWorldCopies!==void 0&&_.setRenderWorldCopies(d.renderWorldCopies),super(_,S,{bearingSnap:d.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Vn,this._controls=[],this._mapId=c.a7(),this._contextLost=I=>{I.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new c.l("webglcontextlost",{originalEvent:I}))},this._contextRestored=I=>{this._setupPainter(),this.resize(),this._update(),this.fire(new c.l("webglcontextrestored",{originalEvent:I}))},this._onMapScroll=I=>{if(I.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=d.interactive,this._maxTileCacheSize=d.maxTileCacheSize,this._maxTileCacheZoomLevels=d.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},d.canvasContextAttributes),this._trackResize=d.trackResize===!0,this._bearingSnap=d.bearingSnap,this._centerClampedToGround=d.centerClampedToGround,this._refreshExpiredTiles=d.refreshExpiredTiles===!0,this._fadeDuration=d.fadeDuration,this._crossSourceCollisions=d.crossSourceCollisions===!0,this._collectResourceTiming=d.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Ff),d.locale),this._clickTolerance=d.clickTolerance,this._overridePixelRatio=d.pixelRatio,this._maxCanvasSize=d.maxCanvasSize,this.transformCameraUpdate=d.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=d.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ve.addThrottleControl((()=>this.isMoving())),this._requestManager=new ye(d.transformRequest),typeof d.container=="string"){if(this._container=document.getElementById(d.container),!this._container)throw new Error(`Container '${d.container}' not found.`)}else{if(!(d.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=d.container}if(d.maxBounds&&this.setMaxBounds(d.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let I=!1;const O=ss((B=>{this._trackResize&&!this._removed&&(this.resize(B),this.redraw())}),50);this._resizeObserver=new ResizeObserver((B=>{I?O(B):I=!0})),this._resizeObserver.observe(this._container)}this.handlers=new Bf(this,d),this._hash=d.hash&&new Yi(typeof d.hash=="string"&&d.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:d.center,elevation:d.elevation,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,roll:d.roll}),d.bounds&&(this.resize(),this.fitBounds(d.bounds,c.e({},d.fitBoundsOptions,{duration:0}))));const A=typeof d.style=="string"||((u=(t=d.style)===null||t===void 0?void 0:t.projection)===null||u===void 0?void 0:u.type)!=="globe";this.resize(null,A),this._localIdeographFontFamily=d.localIdeographFontFamily,this._validateStyle=d.validateStyle,d.style&&this.setStyle(d.style,{localIdeographFontFamily:d.localIdeographFontFamily}),d.attributionControl&&this.addControl(new Sr(typeof d.attributionControl=="boolean"?void 0:d.attributionControl)),d.maplibreLogo&&this.addControl(new Hr,d.logoPosition),this.on("style.load",(()=>{if(A||this._resizeTransform(),this.transform.unmodified){const I=c.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(I)}})),this.on("data",(I=>{this._update(I.dataType==="style"),this.fire(new c.l(`${I.dataType}data`,I))})),this.on("dataloading",(I=>{this.fire(new c.l(`${I.dataType}dataloading`,I))})),this.on("dataabort",(I=>{this.fire(new c.l("sourcedataabort",I))}))}_getMapId(){return this._mapId}setGlobalStateProperty(b,t){return this.style.setGlobalStateProperty(b,t),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(b,t){if(t===void 0&&(t=b.getDefaultPosition?b.getDefaultPosition():"top-right"),!b||!b.onAdd)return this.fire(new c.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=b.onAdd(this);this._controls.push(b);const d=this._controlPositions[t];return t.indexOf("bottom")!==-1?d.insertBefore(u,d.firstChild):d.appendChild(u),this}removeControl(b){if(!b||!b.onRemove)return this.fire(new c.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(b);return t>-1&&this._controls.splice(t,1),b.onRemove(this),this}hasControl(b){return this._controls.indexOf(b)>-1}coveringTiles(b){return ke(this.transform,b)}calculateCameraOptionsFromTo(b,t,u,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(b,t,u,d)}resize(b,t=!0){const[u,d]=this._containerDimensions(),_=this._getClampedPixelRatio(u,d);if(this._resizeCanvas(u,d,_),this.painter.resize(u,d,_),this.painter.overLimit()){const A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];const I=this._getClampedPixelRatio(u,d);this._resizeCanvas(u,d,I),this.painter.resize(u,d,I)}this._resizeTransform(t);const S=!this._moving;return S&&(this.stop(),this.fire(new c.l("movestart",b)).fire(new c.l("move",b))),this.fire(new c.l("resize",b)),S&&this.fire(new c.l("moveend",b)),this}_resizeTransform(b=!0){var t;const[u,d]=this._containerDimensions();this.transform.resize(u,d,b),(t=this._requestedCameraState)===null||t===void 0||t.resize(u,d,b)}_getClampedPixelRatio(b,t){const{0:u,1:d}=this._maxCanvasSize,_=this.getPixelRatio(),S=b*_,A=t*_;return Math.min(S>u?u/S:1,A>d?d/A:1)*_}getPixelRatio(){var b;return(b=this._overridePixelRatio)!==null&&b!==void 0?b:devicePixelRatio}setPixelRatio(b){this._overridePixelRatio=b,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(b){return this.transform.setMaxBounds(Ht.convert(b)),this._update()}setMinZoom(b){if((b=b??-2)>=-2&&b<=this.transform.maxZoom)return this.transform.setMinZoom(b),this._update(),this.getZoom()<b&&this.setZoom(b),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(b){if((b=b??22)>=this.transform.minZoom)return this.transform.setMaxZoom(b),this._update(),this.getZoom()>b&&this.setZoom(b),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(b){if((b=b??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(b>=0&&b<=this.transform.maxPitch)return this.transform.setMinPitch(b),this._update(),this.getPitch()<b&&this.setPitch(b),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(b){if((b=b??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(b>=this.transform.minPitch)return this.transform.setMaxPitch(b),this._update(),this.getPitch()>b&&this.setPitch(b),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(b){return this.transform.setRenderWorldCopies(b),this._update()}project(b){return this.transform.locationToScreenPoint(c.S.convert(b),this.style&&this.terrain)}unproject(b){return this.transform.screenPointToLocation(c.P.convert(b),this.terrain)}isMoving(){var b;return this._moving||((b=this.handlers)===null||b===void 0?void 0:b.isMoving())}isZooming(){var b;return this._zooming||((b=this.handlers)===null||b===void 0?void 0:b.isZooming())}isRotating(){var b;return this._rotating||((b=this.handlers)===null||b===void 0?void 0:b.isRotating())}_createDelegatedListener(b,t,u){if(b==="mouseenter"||b==="mouseover"){let d=!1;return{layers:t,listener:u,delegates:{mousemove:S=>{const A=t.filter((O=>this.getLayer(O))),I=A.length!==0?this.queryRenderedFeatures(S.point,{layers:A}):[];I.length?d||(d=!0,u.call(this,new Qi(b,this,S.originalEvent,{features:I}))):d=!1},mouseout:()=>{d=!1}}}}if(b==="mouseleave"||b==="mouseout"){let d=!1;return{layers:t,listener:u,delegates:{mousemove:A=>{const I=t.filter((O=>this.getLayer(O)));(I.length!==0?this.queryRenderedFeatures(A.point,{layers:I}):[]).length?d=!0:d&&(d=!1,u.call(this,new Qi(b,this,A.originalEvent)))},mouseout:A=>{d&&(d=!1,u.call(this,new Qi(b,this,A.originalEvent)))}}}}{const d=_=>{const S=t.filter((I=>this.getLayer(I))),A=S.length!==0?this.queryRenderedFeatures(_.point,{layers:S}):[];A.length&&(_.features=A,u.call(this,_),delete _.features)};return{layers:t,listener:u,delegates:{[b]:d}}}}_saveDelegatedListener(b,t){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(t)}_removeDelegatedListener(b,t,u){if(!this._delegatedListeners||!this._delegatedListeners[b])return;const d=this._delegatedListeners[b];for(let _=0;_<d.length;_++){const S=d[_];if(S.listener===u&&S.layers.length===t.length&&S.layers.every((A=>t.includes(A)))){for(const A in S.delegates)this.off(A,S.delegates[A]);return void d.splice(_,1)}}}on(b,t,u){if(u===void 0)return super.on(b,t);const d=typeof t=="string"?[t]:t,_=this._createDelegatedListener(b,d,u);this._saveDelegatedListener(b,_);for(const S in _.delegates)this.on(S,_.delegates[S]);return{unsubscribe:()=>{this._removeDelegatedListener(b,d,u)}}}once(b,t,u){if(u===void 0)return super.once(b,t);const d=typeof t=="string"?[t]:t,_=this._createDelegatedListener(b,d,u);for(const S in _.delegates){const A=_.delegates[S];_.delegates[S]=(...I)=>{this._removeDelegatedListener(b,d,u),A(...I)}}this._saveDelegatedListener(b,_);for(const S in _.delegates)this.once(S,_.delegates[S]);return this}off(b,t,u){return u===void 0?super.off(b,t):(this._removeDelegatedListener(b,typeof t=="string"?[t]:t,u),this)}queryRenderedFeatures(b,t){if(!this.style)return[];let u;const d=b instanceof c.P||Array.isArray(b),_=d?b:[[0,0],[this.transform.width,this.transform.height]];if(t=t||(d?{}:b)||{},_ instanceof c.P||typeof _[0]=="number")u=[c.P.convert(_)];else{const S=c.P.convert(_[0]),A=c.P.convert(_[1]);u=[S,new c.P(A.x,S.y),A,new c.P(S.x,A.y),S]}return this.style.queryRenderedFeatures(u,t,this.transform)}querySourceFeatures(b,t){return this.style.querySourceFeatures(b,t)}setStyle(b,t){return(t=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},t)).diff!==!1&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&b?(this._diffStyle(b,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(b,t))}setTransformRequest(b){return this._requestManager.setTransformRequest(b),this}_getUIString(b){const t=this._locale[b];if(t==null)throw new Error(`Missing UI string '${b}'`);return t}_updateStyle(b,t){var u,d;if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(b,t)));const _=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!b)),b?(this.style=new wf(this,t||{}),this.style.setEventedParent(this,{style:this.style}),typeof b=="string"?this.style.loadURL(b,t,_):this.style.loadJSON(b,t,_),this):((d=(u=this.style)===null||u===void 0?void 0:u.projection)===null||d===void 0||d.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new wf(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(b,t){if(typeof b=="string"){const u=this._requestManager.transformRequest(b,"Style");c.j(u,new AbortController).then((d=>{this._updateDiff(d.data,t)})).catch((d=>{d&&this.fire(new c.k(d))}))}else typeof b=="object"&&this._updateDiff(b,t)}_updateDiff(b,t){try{this.style.setState(b,t)&&this._update(!0)}catch(u){c.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(b,t)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(b,t){return this._lazyInitEmptyStyle(),this.style.addSource(b,t),this._update(!0)}isSourceLoaded(b){const t=this.style&&this.style.sourceCaches[b];if(t!==void 0)return t.loaded();this.fire(new c.k(new Error(`There is no source with ID '${b}'`)))}setTerrain(b){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),b){const t=this.style.sourceCaches[b.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${b.source}`);this.terrain===null&&t.reload();for(const u in this.style._layers){const d=this.style._layers[u];d.type==="hillshade"&&d.source===b.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),d.type==="color-relief"&&d.source===b.source&&c.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Fo(this.painter,t,b),this.painter.renderToTexture=new hs(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=u=>{var d;u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==b.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((d=u.source)===null||d===void 0?void 0:d.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new c.l("terrain",{terrain:b})),this}getTerrain(){var b,t;return(t=(b=this.terrain)===null||b===void 0?void 0:b.options)!==null&&t!==void 0?t:null}areTilesLoaded(){const b=this.style&&this.style.sourceCaches;for(const t in b){const u=b[t]._tiles;for(const d in u){const _=u[d];if(_.state!=="loaded"&&_.state!=="errored")return!1}}return!0}removeSource(b){return this.style.removeSource(b),this._update(!0)}getSource(b){return this.style.getSource(b)}setSourceTileLodParams(b,t,u){if(u){const d=this.getSource(u);if(!d)throw new Error(`There is no source with ID "${u}", cannot set LOD parameters`);d.calculateTileZoom=gt(Math.max(1,b),Math.max(1,t))}else for(const d in this.style.sourceCaches)this.style.sourceCaches[d].getSource().calculateTileZoom=gt(Math.max(1,b),Math.max(1,t));return this._update(!0),this}refreshTiles(b,t){const u=this.style.sourceCaches[b];if(!u)throw new Error(`There is no source cache with ID "${b}", cannot refresh tile`);t===void 0?u.reload(!0):u.refreshTiles(t.map((d=>new c.a4(d.z,d.x,d.y))))}addImage(b,t,u={}){const{pixelRatio:d=1,sdf:_=!1,stretchX:S,stretchY:A,content:I,textFitWidth:O,textFitHeight:B}=u;if(this._lazyInitEmptyStyle(),!(t instanceof HTMLImageElement||c.b(t))){if(t.width===void 0||t.height===void 0)return this.fire(new c.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:U,height:G,data:V}=t,Q=t;return this.style.addImage(b,{data:new c.R({width:U,height:G},new Uint8Array(V)),pixelRatio:d,stretchX:S,stretchY:A,content:I,textFitWidth:O,textFitHeight:B,sdf:_,version:0,userImage:Q}),Q.onAdd&&Q.onAdd(this,b),this}}{const{width:U,height:G,data:V}=N.getImageData(t);this.style.addImage(b,{data:new c.R({width:U,height:G},V),pixelRatio:d,stretchX:S,stretchY:A,content:I,textFitWidth:O,textFitHeight:B,sdf:_,version:0})}}updateImage(b,t){const u=this.style.getImage(b);if(!u)return this.fire(new c.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=t instanceof HTMLImageElement||c.b(t)?N.getImageData(t):t,{width:_,height:S,data:A}=d;if(_===void 0||S===void 0)return this.fire(new c.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==u.data.width||S!==u.data.height)return this.fire(new c.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(t instanceof HTMLImageElement||c.b(t));return u.data.replace(A,I),this.style.updateImage(b,u),this}getImage(b){return this.style.getImage(b)}hasImage(b){return b?!!this.style.getImage(b):(this.fire(new c.k(new Error("Missing required image id"))),!1)}removeImage(b){this.style.removeImage(b)}loadImage(b){return ve.getImage(this._requestManager.transformRequest(b,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(b,t){return this._lazyInitEmptyStyle(),this.style.addLayer(b,t),this._update(!0)}moveLayer(b,t){return this.style.moveLayer(b,t),this._update(!0)}removeLayer(b){return this.style.removeLayer(b),this._update(!0)}getLayer(b){return this.style.getLayer(b)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(b,t,u){return this.style.setLayerZoomRange(b,t,u),this._update(!0)}setFilter(b,t,u={}){return this.style.setFilter(b,t,u),this._update(!0)}getFilter(b){return this.style.getFilter(b)}setPaintProperty(b,t,u,d={}){return this.style.setPaintProperty(b,t,u,d),this._update(!0)}getPaintProperty(b,t){return this.style.getPaintProperty(b,t)}setLayoutProperty(b,t,u,d={}){return this.style.setLayoutProperty(b,t,u,d),this._update(!0)}getLayoutProperty(b,t){return this.style.getLayoutProperty(b,t)}setGlyphs(b,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(b,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(b,t,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(b,t,u,(d=>{d||this._update(!0)})),this}removeSprite(b){return this._lazyInitEmptyStyle(),this.style.removeSprite(b),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(b,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(b,t,(u=>{u||this._update(!0)})),this}setLight(b,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(b,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(b,t={}){return this._lazyInitEmptyStyle(),this.style.setSky(b,t),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(b,t){return this.style.setFeatureState(b,t),this._update()}removeFeatureState(b,t){return this.style.removeFeatureState(b,t),this._update()}getFeatureState(b){return this.style.getFeatureState(b)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let b=0,t=0;return this._container&&(b=this._container.clientWidth||400,t=this._container.clientHeight||300),[b,t]}_setupContainer(){const b=this._container;b.classList.add("maplibregl-map");const t=this._canvasContainer=j.create("div","maplibregl-canvas-container",b);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=j.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),d=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],d);const _=this._controlContainer=j.create("div","maplibregl-control-container",b),S=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((A=>{S[A]=j.create("div",`maplibregl-ctrl-${A} `,_)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(b,t,u){this._canvas.width=Math.floor(u*b),this._canvas.height=Math.floor(u*t),this._canvas.style.width=`${b}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const b=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let t=null;this._canvas.addEventListener("webglcontextcreationerror",(d=>{t={requestedAttributes:b},d&&(t.statusMessage=d.statusMessage,t.type=d.type)}),{once:!0});let u=null;if(u=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,b):this._canvas.getContext("webgl2",b)||this._canvas.getContext("webgl",b),!u){const d="Failed to initialize WebGL";throw t?(t.message=d,new Error(JSON.stringify(t))):new Error(d)}this.painter=new Eu(u,this.transform),q.testSupport(u)}migrateProjection(b,t){super.migrateProjection(b,t),this.painter.transform=b,this.fire(new c.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(b){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(b){return this._update(),this._renderTaskQueue.add(b)}_cancelRenderFrame(b){this._renderTaskQueue.remove(b)}_render(b){var t,u,d,_,S;const A=this._idleTriggered?this._fadeDuration:0,I=((t=this.style.projection)===null||t===void 0?void 0:t.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(b),this._removed)return;let O=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const G=this.transform.zoom,V=N.now();this.style.zoomHistory.update(G,V);const Q=new c.F(G,{now:V,fadeDuration:A,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ae=Q.crossFadingFactor();ae===1&&ae===this._crossFadingFactor||(O=!0,this._crossFadingFactor=ae),this.style.update(Q)}const B=((u=this.style.projection)===null||u===void 0?void 0:u.transitionState)>0!==I;(d=this.style.projection)===null||d===void 0||d.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((_=this.style.projection)===null||_===void 0?void 0:_.transitionState,(S=this.style.projection)===null||S===void 0?void 0:S.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||B)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,A,this._crossSourceCollisions,B),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:A,showPadding:this.showPadding}),this.fire(new c.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.cw.mark(c.cx.load),this.fire(new c.l("load"))),this.style&&(this.style.hasTransitions()||O)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const U=this._sourcesDirty||this._styleDirty||this._placementDirty;return U||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.l("idle")),!this._loaded||this._fullyLoaded||U||(this._fullyLoaded=!0,c.cw.mark(c.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var b;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ve.removeThrottleControl(this._imageQueueHandle),(b=this._resizeObserver)===null||b===void 0||b.disconnect();const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t?.loseContext&&t.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),j.remove(this._canvasContainer),j.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),c.cw.clearMetrics(),this._removed=!0,this.fire(new c.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,N.frame(this._frameRequest,(b=>{c.cw.frame(b),this._frameRequest=null;try{this._render(b)}catch(t){if(!c.cy(t)&&!(function(u){return u.message===Tc})(t))throw t}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())}get showPadding(){return!!this._showPadding}set showPadding(b){this._showPadding!==b&&(this._showPadding=b,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())}get repaint(){return!!this._repaint}set repaint(b){this._repaint!==b&&(this._repaint=b,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(b){this._vertices=b,this._update()}get version(){return xn}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(b){return this._lazyInitEmptyStyle(),this.style.setProjection(b),this._update(!0)}},y.MapMouseEvent=Qi,y.MapTouchEvent=Ru,y.MapWheelEvent=Lf,y.Marker=Nu,y.NavigationControl=class{constructor(b){this._updateZoomButtons=()=>{const t=this._map.getZoom(),u=t===this._map.getMaxZoom(),d=t===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(t,u)=>{const d=this._map._getUIString(`NavigationControl.${u}`);t.title=d,t.setAttribute("aria-label",d)},this.options=c.e({},Nh,b),this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(t=>this._map.zoomIn({},{originalEvent:t}))),j.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(t=>this._map.zoomOut({},{originalEvent:t}))),j.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})),this._compassIcon=j.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(b){return this._map=b,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ka(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){j.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(b,t){const u=j.create("button",b,this._container);return u.type="button",u.addEventListener("click",t),u}},y.Popup=class extends c.E{constructor(b){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&j.remove(this._content),this._container&&(j.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new c.l("close"))),this),this._onMouseUp=t=>{this._update(t.point)},this._onMouseMove=t=>{this._update(t.point)},this._onDrag=t=>{this._update(t.point)},this._update=t=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=j.create("div","maplibregl-popup",this._map.getContainer()),this._tip=j.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const A of this.options.className.split(" "))this._container.classList.add(A);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=zu(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!t)return;const u=this._flatPos=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&t?t:this._map.transform.locationToScreenPoint(this._lngLat));let d=this.options.anchor;const _=Bu(this.options.offset);if(!d){const A=this._container.offsetWidth,I=this._container.offsetHeight;let O;O=u.y+_.bottom.y<I?["top"]:u.y>this._map.transform.height-I?["bottom"]:[],u.x<A/2?O.push("left"):u.x>this._map.transform.width-A/2&&O.push("right"),d=O.length===0?"bottom":O.join("-")}let S=u.add(_[d]);this.options.subpixelPositioning||(S=S.round()),j.setTransform(this._container,`${tn[d]} translate(${S.x}px,${S.y}px)`),wn(this._container,d,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(yo),b)}addTo(b){return this._map&&this.remove(),this._map=b,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(b){return this._lngLat=c.S.convert(b),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(b){return this.setDOMContent(document.createTextNode(b))}setHTML(b){const t=document.createDocumentFragment(),u=document.createElement("body");let d;for(u.innerHTML=b;d=u.firstChild,d;)t.appendChild(d);return this.setDOMContent(t)}getMaxWidth(){var b;return(b=this._container)===null||b===void 0?void 0:b.style.maxWidth}setMaxWidth(b){return this.options.maxWidth=b,this._update(),this}setDOMContent(b){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=j.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(b),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(b){return this._container&&this._container.classList.add(b),this}removeClassName(b){return this._container&&this._container.classList.remove(b),this}setOffset(b){return this.options.offset=b,this._update(),this}toggleClassName(b){if(this._container)return this._container.classList.toggle(b)}setSubpixelPositioning(b){this.options.subpixelPositioning=b}_createCloseButton(){this.options.closeButton&&(this._closeButton=j.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const b=this._container.querySelector(ju);b&&b.focus()}},y.RasterDEMTileSource=zr,y.RasterTileSource=Dr,y.ScaleControl=class{constructor(b){this._onMove=()=>{Ll(this._map,this._container,this.options)},this.setUnit=t=>{this.options.unit=t,Ll(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},kl),b)}getDefaultPosition(){return"bottom-left"}onAdd(b){return this._map=b,this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-scale",b.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){j.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},y.ScrollZoomHandler=us,y.Style=wf,y.TerrainControl=class{constructor(b){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=b}onAdd(b){return this._map=b,this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=j.create("button","maplibregl-ctrl-terrain",this._container),j.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){j.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},y.TwoFingersTouchPitchHandler=Il,y.TwoFingersTouchRotateHandler=Dh,y.TwoFingersTouchZoomHandler=Rh,y.TwoFingersTouchZoomRotateHandler=Lh,y.VectorTileSource=wr,y.VideoSource=qi,y.addSourceType=(b,t)=>c._(void 0,void 0,void 0,(function*(){if(Ea(b))throw new Error(`A source type called "${b}" already exists.`);((u,d)=>{Ga[u]=d})(b,t)})),y.clearPrewarmedResources=function(){const b=yt;b&&(b.isPreloaded()&&b.numActive()===1?(b.release(Te),yt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},y.createTileMesh=_f,y.getMaxParallelImageRequests=function(){return c.a.MAX_PARALLEL_IMAGE_REQUESTS},y.getRTLTextPluginStatus=function(){return An().getRTLTextPluginStatus()},y.getVersion=function(){return Lc},y.getWorkerCount=function(){return et.workerCount},y.getWorkerUrl=function(){return c.a.WORKER_URL},y.importScriptInWorkers=function(b){return ir().broadcast("IS",b)},y.prewarm=function(){Zt().acquire(Te)},y.setMaxParallelImageRequests=function(b){c.a.MAX_PARALLEL_IMAGE_REQUESTS=b},y.setRTLTextPlugin=function(b,t){return An().setRTLTextPlugin(b,t)},y.setWorkerCount=function(b){et.workerCount=b},y.setWorkerUrl=function(b){c.a.WORKER_URL=b}}));var g=i;return g}))})(z0)),z0.exports}var M6=E6();const R6=au(M6),D6={"bosnia-herzegovina":"bosnia and herzegovina","bosnia and herzegovina":"bosnia and herzegovina","bosnia and herz.":"bosnia and herzegovina","bosnia and herz":"bosnia and herzegovina",macedonia:"north macedonia","macedonia (fyrom)":"north macedonia","the former yugoslav republic of macedonia":"north macedonia","united states of america":"united states",usa:"united states","u s a":"united states",us:"united states",america:"united states","u.s.a.":"united states","u. s. a.":"united states","u. s. a. ":"united states",uk:"united kingdom","united kingdom of great britain and northern ireland":"united kingdom","great britain":"united kingdom",britain:"united kingdom","south korea":"korea republic of","korea republic of":"korea republic of","republic of korea":"korea republic of","korea south":"korea republic of","s korea":"korea republic of","ro korea":"korea republic of","korea, south":"korea republic of","north korea":"korea democratic peoples republic of","democratic peoples republic of korea":"korea democratic peoples republic of",dprk:"korea democratic peoples republic of",russia:"russian federation","russian federation":"russian federation","russian fed":"russian federation","russian federation (the)":"russian federation","ivory coast":"cote divoire","cote d ivoire":"cote divoire","cote divoire":"cote divoire",cotedivoire:"cote divoire","guinea bissau":"guinea bissau","guinea-bissau":"guinea bissau","republic of guinea bissau":"guinea bissau",belarus:"belarus",belorussia:"belarus",byelorussia:"belarus","republic of belarus":"belarus",eswatini:"eswatini","kingdom of eswatini":"eswatini",swaziland:"eswatini","kingdom of swaziland":"eswatini",czechia:"czech republic","czech republic":"czech republic",prc:"china","people s republic of china":"china","people s republic of china (china)":"china",china:"china",iran:"iran","islamic republic of iran":"iran","iran islamic republic of":"iran","syrian arab republic":"syria",syria:"syria","viet nam":"vietnam",vietnam:"vietnam",moldova:"moldova","republic of moldova":"moldova","moldova republic of":"moldova",bolivia:"bolivia","bolivia plurinational state of":"bolivia",vatican:"vatican city","vatican city":"vatican city","holy see":"vatican city",turkiye:"turkey",turkey:"turkey","cape verde":"cape verde","cabo verde":"cape verde","congo republic":"congo republic","congo democratic republic":"democratic republic of the congo","democratic republic of the congo":"democratic republic of the congo","dr congo":"democratic republic of the congo",slovakia:"slovakia","slovak republic":"slovakia","north macedonia":"north macedonia","republic of north macedonia":"north macedonia",uae:"united arab emirates","u a e":"united arab emirates",drc:"democratic republic of the congo",ukraine:"ukraine"};function R_(e){return e.toLowerCase().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}function I6(e){return e>=7.5?"#006400":e>=7.25?"#0A8C0A":e>=7?"#228B22":e>=6.75?"#2E8B57":e>=6.5?"#32CD32":e>=6.25?"#7CFC00":e>=6?"#ADFF2F":e>=5.75?"#DFFF00":e>=5.5?"#FFFF00":e>=5.25?"#FFEF00":e>=5?"#FFD700":e>=4.75?"#FFA500":e>=4.5?"#FF8C00":e>=4.25?"#FF7F50":e>=4?"#FF6347":e>=3.75?"#FF4500":e>=3.5?"#FF0000":e>=3.25?"#DC143C":e>=3?"#B22222":e>=2.75?"#A52A2A":e>=2.5?"#8B0000":e>=2.25?"#800000":(e>=1.5,"#4B0000")}class O6{container=null;onAdd(r){const i=document.createElement("div");i.className="maplibregl-ctrl maplibregl-ctrl-group simple-zoom-ctrl",i.style.position="absolute",i.style.right="0px",i.style.transform="translateY(100%)",i.style.display="flex",i.style.flexDirection="column",i.style.gap="6px",i.style.background="rgba(255,255,255,0.9)",i.style.borderRadius="6px",i.style.padding="6px",i.style.boxShadow="0 1px 6px rgba(0,0,0,0.15)",i.style.userSelect="none";const a=(y,c)=>{const C=document.createElement("button");return C.innerText=y,C.title=y,C.style.width="24px",C.style.height="24px",C.style.display="flex",C.style.alignItems="center",C.style.justifyContent="center",C.style.border="none",C.style.background="transparent",C.style.cursor="pointer",C.style.fontSize="22px",C.onpointerdown=E=>E.stopPropagation(),C.onclick=c,C},p=a("+",()=>r.easeTo({zoom:r.getZoom()+1})),g=a("",()=>r.easeTo({zoom:r.getZoom()-1}));return i.appendChild(p),i.appendChild(g),this.container=i,i}onRemove(){this.container?.parentNode?.removeChild(this.container),this.container=null}}function Mp(e){return e?e.toLowerCase().normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s]/g,"").replace(/\s+/g," ").trim():""}function k6({mapContainerRef:e,callback:r,countryStats:i=[]}){const a=X.useRef(null),p=X.useRef(null);return X.useEffect(()=>{if(a.current)return;a.current=new R6.Map({container:e.current,style:"https://demotiles.maplibre.org/style.json",center:[43,43],zoom:3,attributionControl:!1}),a.current.addControl(new O6);const g={},y={},c={};for(const C of i)if(C?.Country_clean&&typeof C.Happiness=="number"){const E=C.Country_clean;g[E]=C.Happiness,C.Country&&typeof C.Country=="string"&&(y[C.Country]=E,c[Mp(C.Country)]=E);const M=R_(C.Country_clean);y[M]||(y[M]=E,c[Mp(M)]=E)}return Object.entries(D6).forEach(([C,E])=>{if(g[E]!==void 0){const M=R_(C);y[M]=E,y[C]=E,c[Mp(M)]=E,c[Mp(C)]=E}}),a.current.on("load",()=>{const E=["match",["downcase",["coalesce",["get","NAME"],["get","ADMIN"],["get","NAME_EN"],["get","BRK_NAME"]]]],M="#d9d9d9",k=new Set;for(const[q,H]of Object.entries(y)){const W=g[H];if(typeof W=="number"&&!isNaN(W)){const K=q.toLowerCase();k.has(K)||(E.push(K,I6(W)),k.add(K))}}E.push(M);const N="countries-fill";if(a.current?.getLayer(N))p.current=N,a.current.setPaintProperty(N,"fill-color",E),a.current.setPaintProperty(N,"fill-opacity",1);else{const H=(a.current.getStyle().layers||[]).find(W=>/country|countries|admin|ne_10m_admin_0_countries/i.test(W.id));H&&(p.current=H.id,a.current.setPaintProperty(H.id,"fill-color",E),a.current.setPaintProperty(H.id,"fill-opacity",1))}a.current?.setPaintProperty("crimea-fill","fill-color","#FFA500")}),a.current?.on("click",C=>{if(a.current?.queryRenderedFeatures(C.point,{layers:["crimea-fill"]})?.length)return;const M=p.current??"countries-fill",k=a.current?.queryRenderedFeatures(C.point,{layers:[M]});if(k?.length){const N=k[0],j=N.properties?.NAME||N.properties?.name||"",q=Mp(j),H=c[q]??c[Mp(R_(j))];r(H??q)}}),()=>{a.current?.remove(),a.current=null,p.current=null}},[i]),Ne.jsx("div",{ref:e,className:"w-full h-40"})}function L6(e){const r=e+"CollectionProvider",[i,a]=Xg(r),[p,g]=i(r,{collectionRef:{current:null},itemMap:new Map}),y=H=>{const{scope:W,children:K}=H,ee=Di.useRef(null),ie=Di.useRef(new Map).current;return Ne.jsx(p,{scope:W,itemMap:ie,collectionRef:ee,children:K})};y.displayName=r;const c=e+"CollectionSlot",C=kg(c),E=Di.forwardRef((H,W)=>{const{scope:K,children:ee}=H,ie=g(c,K),ve=nu(W,ie.collectionRef);return Ne.jsx(C,{ref:ve,children:ee})});E.displayName=c;const M=e+"CollectionItemSlot",k="data-radix-collection-item",N=kg(M),j=Di.forwardRef((H,W)=>{const{scope:K,children:ee,...ie}=H,ve=Di.useRef(null),ye=nu(W,ve),Pe=g(M,K);return Di.useEffect(()=>(Pe.itemMap.set(ve,{ref:ve,...ie}),()=>void Pe.itemMap.delete(ve))),Ne.jsx(N,{[k]:"",ref:ye,children:ee})});j.displayName=M;function q(H){const W=g(e+"CollectionConsumer",H);return Di.useCallback(()=>{const ee=W.collectionRef.current;if(!ee)return[];const ie=Array.from(ee.querySelectorAll(`[${k}]`));return Array.from(W.itemMap.values()).sort((Pe,Me)=>ie.indexOf(Pe.ref.current)-ie.indexOf(Me.ref.current))},[W.collectionRef,W.itemMap])}return[{Provider:y,Slot:E,ItemSlot:j},q,a]}function rc(e,r,{checkForDefaultPrevented:i=!0}={}){return function(p){if(e?.(p),i===!1||!p.defaultPrevented)return r?.(p)}}var Fp=globalThis?.document?X.useLayoutEffect:()=>{},z6=dx[" useInsertionEffect ".trim().toString()]||Fp;function Mv({prop:e,defaultProp:r,onChange:i=()=>{},caller:a}){const[p,g,y]=N6({defaultProp:r,onChange:i}),c=e!==void 0,C=c?e:p;{const M=X.useRef(e!==void 0);X.useEffect(()=>{const k=M.current;k!==c&&console.warn(`${a} is changing from ${k?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),M.current=c},[c,a])}const E=X.useCallback(M=>{if(c){const k=j6(M)?M(e):M;k!==e&&y.current?.(k)}else g(M)},[c,e,g,y]);return[C,E]}function N6({defaultProp:e,onChange:r}){const[i,a]=X.useState(e),p=X.useRef(i),g=X.useRef(r);return z6(()=>{g.current=r},[r]),X.useEffect(()=>{p.current!==i&&(g.current?.(i),p.current=i)},[i,p]),[i,a,g]}function j6(e){return typeof e=="function"}function B6(e,r){return X.useReducer((i,a)=>r[i][a]??i,e)}var Kg=e=>{const{present:r,children:i}=e,a=F6(r),p=typeof i=="function"?i({present:a.isPresent}):X.Children.only(i),g=nu(a.ref,U6(p));return typeof i=="function"||a.isPresent?X.cloneElement(p,{ref:g}):null};Kg.displayName="Presence";function F6(e){const[r,i]=X.useState(),a=X.useRef(null),p=X.useRef(e),g=X.useRef("none"),y=e?"mounted":"unmounted",[c,C]=B6(y,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return X.useEffect(()=>{const E=h0(a.current);g.current=c==="mounted"?E:"none"},[c]),Fp(()=>{const E=a.current,M=p.current;if(M!==e){const N=g.current,j=h0(E);e?C("MOUNT"):j==="none"||E?.display==="none"?C("UNMOUNT"):C(M&&N!==j?"ANIMATION_OUT":"UNMOUNT"),p.current=e}},[e,C]),Fp(()=>{if(r){let E;const M=r.ownerDocument.defaultView??window,k=j=>{const H=h0(a.current).includes(CSS.escape(j.animationName));if(j.target===r&&H&&(C("ANIMATION_END"),!p.current)){const W=r.style.animationFillMode;r.style.animationFillMode="forwards",E=M.setTimeout(()=>{r.style.animationFillMode==="forwards"&&(r.style.animationFillMode=W)})}},N=j=>{j.target===r&&(g.current=h0(a.current))};return r.addEventListener("animationstart",N),r.addEventListener("animationcancel",k),r.addEventListener("animationend",k),()=>{M.clearTimeout(E),r.removeEventListener("animationstart",N),r.removeEventListener("animationcancel",k),r.removeEventListener("animationend",k)}}else C("ANIMATION_END")},[r,C]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:X.useCallback(E=>{a.current=E?getComputedStyle(E):null,i(E)},[])}}function h0(e){return e?.animationName||"none"}function U6(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?e.ref:(r=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var $6=dx[" useId ".trim().toString()]||(()=>{}),V6=0;function Dg(e){const[r,i]=X.useState($6());return Fp(()=>{i(a=>a??String(V6++))},[e]),e||(r?`radix-${r}`:"")}var Rv="Collapsible",[H6,WC]=Xg(Rv),[q6,vx]=H6(Rv),ZC=X.forwardRef((e,r)=>{const{__scopeCollapsible:i,open:a,defaultOpen:p,disabled:g,onOpenChange:y,...c}=e,[C,E]=Mv({prop:a,defaultProp:p??!1,onChange:y,caller:Rv});return Ne.jsx(q6,{scope:i,disabled:g,contentId:Dg(),open:C,onOpenToggle:X.useCallback(()=>E(M=>!M),[E]),children:Ne.jsx(ro.div,{"data-state":bx(C),"data-disabled":g?"":void 0,...c,ref:r})})});ZC.displayName=Rv;var XC="CollapsibleTrigger",KC=X.forwardRef((e,r)=>{const{__scopeCollapsible:i,...a}=e,p=vx(XC,i);return Ne.jsx(ro.button,{type:"button","aria-controls":p.contentId,"aria-expanded":p.open||!1,"data-state":bx(p.open),"data-disabled":p.disabled?"":void 0,disabled:p.disabled,...a,ref:r,onClick:rc(e.onClick,p.onOpenToggle)})});KC.displayName=XC;var _x="CollapsibleContent",YC=X.forwardRef((e,r)=>{const{forceMount:i,...a}=e,p=vx(_x,e.__scopeCollapsible);return Ne.jsx(Kg,{present:i||p.open,children:({present:g})=>Ne.jsx(G6,{...a,ref:r,present:g})})});YC.displayName=_x;var G6=X.forwardRef((e,r)=>{const{__scopeCollapsible:i,present:a,children:p,...g}=e,y=vx(_x,i),[c,C]=X.useState(a),E=X.useRef(null),M=nu(r,E),k=X.useRef(0),N=k.current,j=X.useRef(0),q=j.current,H=y.open||c,W=X.useRef(H),K=X.useRef(void 0);return X.useEffect(()=>{const ee=requestAnimationFrame(()=>W.current=!1);return()=>cancelAnimationFrame(ee)},[]),Fp(()=>{const ee=E.current;if(ee){K.current=K.current||{transitionDuration:ee.style.transitionDuration,animationName:ee.style.animationName},ee.style.transitionDuration="0s",ee.style.animationName="none";const ie=ee.getBoundingClientRect();k.current=ie.height,j.current=ie.width,W.current||(ee.style.transitionDuration=K.current.transitionDuration,ee.style.animationName=K.current.animationName),C(a)}},[y.open,a]),Ne.jsx(ro.div,{"data-state":bx(y.open),"data-disabled":y.disabled?"":void 0,id:y.contentId,hidden:!H,...g,ref:M,style:{"--radix-collapsible-content-height":N?`${N}px`:void 0,"--radix-collapsible-content-width":q?`${q}px`:void 0,...e.style},children:H&&p})});function bx(e){return e?"open":"closed"}var W6=ZC,Z6=KC,X6=YC,K6=X.createContext(void 0);function Y6(e){const r=X.useContext(K6);return e||r||"ltr"}var ou="Accordion",Q6=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[xx,J6,eR]=L6(ou),[Dv]=Xg(ou,[eR,WC]),wx=WC(),QC=Di.forwardRef((e,r)=>{const{type:i,...a}=e,p=a,g=a;return Ne.jsx(xx.Provider,{scope:e.__scopeAccordion,children:i==="multiple"?Ne.jsx(iR,{...g,ref:r}):Ne.jsx(nR,{...p,ref:r})})});QC.displayName=ou;var[JC,tR]=Dv(ou),[eT,rR]=Dv(ou,{collapsible:!1}),nR=Di.forwardRef((e,r)=>{const{value:i,defaultValue:a,onValueChange:p=()=>{},collapsible:g=!1,...y}=e,[c,C]=Mv({prop:i,defaultProp:a??"",onChange:p,caller:ou});return Ne.jsx(JC,{scope:e.__scopeAccordion,value:Di.useMemo(()=>c?[c]:[],[c]),onItemOpen:C,onItemClose:Di.useCallback(()=>g&&C(""),[g,C]),children:Ne.jsx(eT,{scope:e.__scopeAccordion,collapsible:g,children:Ne.jsx(tT,{...y,ref:r})})})}),iR=Di.forwardRef((e,r)=>{const{value:i,defaultValue:a,onValueChange:p=()=>{},...g}=e,[y,c]=Mv({prop:i,defaultProp:a??[],onChange:p,caller:ou}),C=Di.useCallback(M=>c((k=[])=>[...k,M]),[c]),E=Di.useCallback(M=>c((k=[])=>k.filter(N=>N!==M)),[c]);return Ne.jsx(JC,{scope:e.__scopeAccordion,value:y,onItemOpen:C,onItemClose:E,children:Ne.jsx(eT,{scope:e.__scopeAccordion,collapsible:!0,children:Ne.jsx(tT,{...g,ref:r})})})}),[aR,Iv]=Dv(ou),tT=Di.forwardRef((e,r)=>{const{__scopeAccordion:i,disabled:a,dir:p,orientation:g="vertical",...y}=e,c=Di.useRef(null),C=nu(c,r),E=J6(i),k=Y6(p)==="ltr",N=rc(e.onKeyDown,j=>{if(!Q6.includes(j.key))return;const q=j.target,H=E().filter(je=>!je.ref.current?.disabled),W=H.findIndex(je=>je.ref.current===q),K=H.length;if(W===-1)return;j.preventDefault();let ee=W;const ie=0,ve=K-1,ye=()=>{ee=W+1,ee>ve&&(ee=ie)},Pe=()=>{ee=W-1,ee<ie&&(ee=ve)};switch(j.key){case"Home":ee=ie;break;case"End":ee=ve;break;case"ArrowRight":g==="horizontal"&&(k?ye():Pe());break;case"ArrowDown":g==="vertical"&&ye();break;case"ArrowLeft":g==="horizontal"&&(k?Pe():ye());break;case"ArrowUp":g==="vertical"&&Pe();break}const Me=ee%K;H[Me].ref.current?.focus()});return Ne.jsx(aR,{scope:i,disabled:a,direction:p,orientation:g,children:Ne.jsx(xx.Slot,{scope:i,children:Ne.jsx(ro.div,{...y,"data-orientation":g,ref:C,onKeyDown:a?void 0:N})})})}),$0="AccordionItem",[oR,Sx]=Dv($0),rT=Di.forwardRef((e,r)=>{const{__scopeAccordion:i,value:a,...p}=e,g=Iv($0,i),y=tR($0,i),c=wx(i),C=Dg(),E=a&&y.value.includes(a)||!1,M=g.disabled||e.disabled;return Ne.jsx(oR,{scope:i,open:E,disabled:M,triggerId:C,children:Ne.jsx(W6,{"data-orientation":g.orientation,"data-state":lT(E),...c,...p,ref:r,disabled:M,open:E,onOpenChange:k=>{k?y.onItemOpen(a):y.onItemClose(a)}})})});rT.displayName=$0;var nT="AccordionHeader",iT=Di.forwardRef((e,r)=>{const{__scopeAccordion:i,...a}=e,p=Iv(ou,i),g=Sx(nT,i);return Ne.jsx(ro.h3,{"data-orientation":p.orientation,"data-state":lT(g.open),"data-disabled":g.disabled?"":void 0,...a,ref:r})});iT.displayName=nT;var _b="AccordionTrigger",aT=Di.forwardRef((e,r)=>{const{__scopeAccordion:i,...a}=e,p=Iv(ou,i),g=Sx(_b,i),y=rR(_b,i),c=wx(i);return Ne.jsx(xx.ItemSlot,{scope:i,children:Ne.jsx(Z6,{"aria-disabled":g.open&&!y.collapsible||void 0,"data-orientation":p.orientation,id:g.triggerId,...c,...a,ref:r})})});aT.displayName=_b;var oT="AccordionContent",sT=Di.forwardRef((e,r)=>{const{__scopeAccordion:i,...a}=e,p=Iv(ou,i),g=Sx(oT,i),y=wx(i);return Ne.jsx(X6,{role:"region","aria-labelledby":g.triggerId,"data-orientation":p.orientation,...y,...a,ref:r,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});sT.displayName=oT;function lT(e){return e?"open":"closed"}var sR=QC,lR=rT,uR=iT,cR=aT,hR=sT;/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dR=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,i,a)=>a?a.toUpperCase():i.toLowerCase()),C2=e=>{const r=dR(e);return r.charAt(0).toUpperCase()+r.slice(1)},uT=(...e)=>e.filter((r,i,a)=>!!r&&r.trim()!==""&&a.indexOf(r)===i).join(" ").trim(),pR=e=>{for(const r in e)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=X.forwardRef(({color:e="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:p="",children:g,iconNode:y,...c},C)=>X.createElement("svg",{ref:C,...mR,width:r,height:r,stroke:e,strokeWidth:a?Number(i)*24/Number(r):i,className:uT("lucide",p),...!g&&!pR(c)&&{"aria-hidden":"true"},...c},[...y.map(([E,M])=>X.createElement(E,M)),...Array.isArray(g)?g:[g]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=(e,r)=>{const i=X.forwardRef(({className:a,...p},g)=>X.createElement(gR,{ref:g,iconNode:r,className:uT(`lucide-${fR(C2(e))}`,`lucide-${e}`,a),...p}));return i.displayName=C2(e),i};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],vR=cT("chevron-down",yR);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],bR=cT("x",_R);function xR({...e}){return Ne.jsx(sR,{"data-slot":"accordion",...e})}function f0({className:e,...r}){return Ne.jsx(lR,{"data-slot":"accordion-item",className:hi("border-b last:border-b-0",e),...r})}function d0({className:e,children:r,...i}){return Ne.jsx(uR,{className:"flex",children:Ne.jsxs(cR,{"data-slot":"accordion-trigger",className:hi("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",e),...i,children:[r,Ne.jsx(vR,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function p0({className:e,children:r,...i}){return Ne.jsx(hR,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...i,children:Ne.jsx("div",{className:hi("pt-0 pb-4",e),children:r})})}function wR(){return Ne.jsxs(xR,{type:"single",collapsible:!0,className:"w-full",defaultValue:"item-1",children:[Ne.jsxs(f0,{value:"item-1",children:[Ne.jsx(d0,{children:"What is this project?"}),Ne.jsx(p0,{className:"flex flex-col gap-4 text-balance",children:Ne.jsx("p",{children:"A data-driven explorer of national wellbeing. It combines public datasets to show what correlates with and drives a countrys happiness score. Each country page highlights its biggest positive and negative outliers."})})]}),Ne.jsxs(f0,{value:"item-2",children:[Ne.jsx(d0,{children:"How to read the map"}),Ne.jsx(p0,{className:"flex flex-col gap-4 text-balance",children:Ne.jsx("p",{children:"Colors show the official happiness score. Hover to see top metrics. Click a country to open its profile with charts and outlier cards."})})]}),Ne.jsxs(f0,{value:"item-3",children:[Ne.jsx(d0,{children:"Country profile"}),Ne.jsx(p0,{className:"flex flex-col gap-4 text-balance",children:Ne.jsx("p",{children:"Each profile shows three biggest strengths and three biggest weaknesses. Strengths are metrics where the country scores far above its expected value. Weaknesses are metrics where it scores far below expectations."})})]}),Ne.jsxs(f0,{value:"item-4",children:[Ne.jsx(d0,{children:"Data sources"}),Ne.jsx(p0,{className:"flex flex-col gap-4 text-balance",children:Ne.jsx("p",{children:"Data comes from public sources and curated datasets. Every country detail page links to the original source files and the year used. Source names, file names, and extraction dates can be found here."})})]})]})}function SR(e){return Object.prototype.toString.call(e)==="[object Object]"}function T2(e){return SR(e)||Array.isArray(e)}function PR(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Px(e,r){const i=Object.keys(e),a=Object.keys(r);if(i.length!==a.length)return!1;const p=JSON.stringify(Object.keys(e.breakpoints||{})),g=JSON.stringify(Object.keys(r.breakpoints||{}));return p!==g?!1:i.every(y=>{const c=e[y],C=r[y];return typeof c=="function"?`${c}`==`${C}`:!T2(c)||!T2(C)?c===C:Px(c,C)})}function E2(e){return e.concat().sort((r,i)=>r.name>i.name?1:-1).map(r=>r.options)}function AR(e,r){if(e.length!==r.length)return!1;const i=E2(e),a=E2(r);return i.every((p,g)=>{const y=a[g];return Px(p,y)})}function Ax(e){return typeof e=="number"}function bb(e){return typeof e=="string"}function Ov(e){return typeof e=="boolean"}function M2(e){return Object.prototype.toString.call(e)==="[object Object]"}function ci(e){return Math.abs(e)}function Cx(e){return Math.sign(e)}function Ig(e,r){return ci(e-r)}function CR(e,r){if(e===0||r===0||ci(e)<=ci(r))return 0;const i=Ig(ci(e),ci(r));return ci(i/e)}function TR(e){return Math.round(e*100)/100}function Lg(e){return zg(e).map(Number)}function ru(e){return e[Yg(e)]}function Yg(e){return Math.max(0,e.length-1)}function Tx(e,r){return r===Yg(e)}function R2(e,r=0){return Array.from(Array(e),(i,a)=>r+a)}function zg(e){return Object.keys(e)}function hT(e,r){return[e,r].reduce((i,a)=>(zg(a).forEach(p=>{const g=i[p],y=a[p],c=M2(g)&&M2(y);i[p]=c?hT(g,y):y}),i),{})}function xb(e,r){return typeof r.MouseEvent<"u"&&e instanceof r.MouseEvent}function ER(e,r){const i={start:a,center:p,end:g};function a(){return 0}function p(C){return g(C)/2}function g(C){return r-C}function y(C,E){return bb(e)?i[e](C):e(r,C,E)}return{measure:y}}function Ng(){let e=[];function r(p,g,y,c={passive:!0}){let C;if("addEventListener"in p)p.addEventListener(g,y,c),C=()=>p.removeEventListener(g,y,c);else{const E=p;E.addListener(y),C=()=>E.removeListener(y)}return e.push(C),a}function i(){e=e.filter(p=>p())}const a={add:r,clear:i};return a}function MR(e,r,i,a){const p=Ng(),g=1e3/60;let y=null,c=0,C=0;function E(){p.add(e,"visibilitychange",()=>{e.hidden&&q()})}function M(){j(),p.clear()}function k(W){if(!C)return;y||(y=W,i(),i());const K=W-y;for(y=W,c+=K;c>=g;)i(),c-=g;const ee=c/g;a(ee),C&&(C=r.requestAnimationFrame(k))}function N(){C||(C=r.requestAnimationFrame(k))}function j(){r.cancelAnimationFrame(C),y=null,c=0,C=0}function q(){y=null,c=0}return{init:E,destroy:M,start:N,stop:j,update:i,render:a}}function RR(e,r){const i=r==="rtl",a=e==="y",p=a?"y":"x",g=a?"x":"y",y=!a&&i?-1:1,c=M(),C=k();function E(q){const{height:H,width:W}=q;return a?H:W}function M(){return a?"top":i?"right":"left"}function k(){return a?"bottom":i?"left":"right"}function N(q){return q*y}return{scroll:p,cross:g,startEdge:c,endEdge:C,measureSize:E,direction:N}}function Od(e=0,r=0){const i=ci(e-r);function a(E){return E<e}function p(E){return E>r}function g(E){return a(E)||p(E)}function y(E){return g(E)?a(E)?e:r:E}function c(E){return i?E-i*Math.ceil((E-r)/i):E}return{length:i,max:r,min:e,constrain:y,reachedAny:g,reachedMax:p,reachedMin:a,removeOffset:c}}function fT(e,r,i){const{constrain:a}=Od(0,e),p=e+1;let g=y(r);function y(N){return i?ci((p+N)%p):a(N)}function c(){return g}function C(N){return g=y(N),k}function E(N){return M().set(c()+N)}function M(){return fT(e,c(),i)}const k={get:c,set:C,add:E,clone:M};return k}function DR(e,r,i,a,p,g,y,c,C,E,M,k,N,j,q,H,W,K,ee){const{cross:ie,direction:ve}=e,ye=["INPUT","SELECT","TEXTAREA"],Pe={passive:!1},Me=Ng(),je=Ng(),ht=Od(50,225).constrain(j.measure(20)),At={mouse:300,touch:400},ot={mouse:500,touch:600},ft=q?43:25;let rt=!1,It=0,kt=0,Ue=!1,ct=!1,nt=!1,Ct=!1;function Te(He){if(!ee)return;function Ht(wr){(Ov(ee)||ee(He,wr))&&Ft(wr)}const Lt=r;Me.add(Lt,"dragstart",wr=>wr.preventDefault(),Pe).add(Lt,"touchmove",()=>{},Pe).add(Lt,"touchend",()=>{}).add(Lt,"touchstart",Ht).add(Lt,"mousedown",Ht).add(Lt,"touchcancel",Jt).add(Lt,"contextmenu",Jt).add(Lt,"click",St,!0)}function et(){Me.clear(),je.clear()}function st(){const He=Ct?i:r;je.add(He,"touchmove",ir,Pe).add(He,"touchend",Jt).add(He,"mousemove",ir,Pe).add(He,"mouseup",Jt)}function yt(He){const Ht=He.nodeName||"";return ye.includes(Ht)}function Rt(){return(q?ot:At)[Ct?"mouse":"touch"]}function Zt(He,Ht){const Lt=k.add(Cx(He)*-1),wr=M.byDistance(He,!q).distance;return q||ci(He)<ht?wr:W&&Ht?wr*.5:M.byIndex(Lt.get(),0).distance}function Ft(He){const Ht=xb(He,a);Ct=Ht,nt=q&&Ht&&!He.buttons&&rt,rt=Ig(p.get(),y.get())>=2,!(Ht&&He.button!==0)&&(yt(He.target)||(Ue=!0,g.pointerDown(He),E.useFriction(0).useDuration(0),p.set(y),st(),It=g.readPoint(He),kt=g.readPoint(He,ie),N.emit("pointerDown")))}function ir(He){if(!xb(He,a)&&He.touches.length>=2)return Jt(He);const Lt=g.readPoint(He),wr=g.readPoint(He,ie),Dr=Ig(Lt,It),zr=Ig(wr,kt);if(!ct&&!Ct&&(!He.cancelable||(ct=Dr>zr,!ct)))return Jt(He);const Bn=g.pointerMove(He);Dr>H&&(nt=!0),E.useFriction(.3).useDuration(.75),c.start(),p.add(ve(Bn)),He.preventDefault()}function Jt(He){const Lt=M.byDistance(0,!1).index!==k.get(),wr=g.pointerUp(He)*Rt(),Dr=Zt(ve(wr),Lt),zr=CR(wr,Dr),Bn=ft-10*zr,Kn=K+zr/50;ct=!1,Ue=!1,je.clear(),E.useDuration(Bn).useFriction(Kn),C.distance(Dr,!q),Ct=!1,N.emit("pointerUp")}function St(He){nt&&(He.stopPropagation(),He.preventDefault(),nt=!1)}function Gt(){return Ue}return{init:Te,destroy:et,pointerDown:Gt}}function IR(e,r){let a,p;function g(k){return k.timeStamp}function y(k,N){const q=`client${(N||e.scroll)==="x"?"X":"Y"}`;return(xb(k,r)?k:k.touches[0])[q]}function c(k){return a=k,p=k,y(k)}function C(k){const N=y(k)-y(p),j=g(k)-g(a)>170;return p=k,j&&(a=k),N}function E(k){if(!a||!p)return 0;const N=y(p)-y(a),j=g(k)-g(a),q=g(k)-g(p)>170,H=N/j;return j&&!q&&ci(H)>.1?H:0}return{pointerDown:c,pointerMove:C,pointerUp:E,readPoint:y}}function OR(){function e(i){const{offsetTop:a,offsetLeft:p,offsetWidth:g,offsetHeight:y}=i;return{top:a,right:p+g,bottom:a+y,left:p,width:g,height:y}}return{measure:e}}function kR(e){function r(a){return e*(a/100)}return{measure:r}}function LR(e,r,i,a,p,g,y){const c=[e].concat(a);let C,E,M=[],k=!1;function N(W){return p.measureSize(y.measure(W))}function j(W){if(!g)return;E=N(e),M=a.map(N);function K(ee){for(const ie of ee){if(k)return;const ve=ie.target===e,ye=a.indexOf(ie.target),Pe=ve?E:M[ye],Me=N(ve?e:a[ye]);if(ci(Me-Pe)>=.5){W.reInit(),r.emit("resize");break}}}C=new ResizeObserver(ee=>{(Ov(g)||g(W,ee))&&K(ee)}),i.requestAnimationFrame(()=>{c.forEach(ee=>C.observe(ee))})}function q(){k=!0,C&&C.disconnect()}return{init:j,destroy:q}}function zR(e,r,i,a,p,g){let y=0,c=0,C=p,E=g,M=e.get(),k=0;function N(){const Pe=a.get()-e.get(),Me=!C;let je=0;return Me?(y=0,i.set(a),e.set(a),je=Pe):(i.set(e),y+=Pe/C,y*=E,M+=y,e.add(y),je=M-k),c=Cx(je),k=M,ye}function j(){const Pe=a.get()-r.get();return ci(Pe)<.001}function q(){return C}function H(){return c}function W(){return y}function K(){return ie(p)}function ee(){return ve(g)}function ie(Pe){return C=Pe,ye}function ve(Pe){return E=Pe,ye}const ye={direction:H,duration:q,velocity:W,seek:N,settled:j,useBaseFriction:ee,useBaseDuration:K,useFriction:ve,useDuration:ie};return ye}function NR(e,r,i,a,p){const g=p.measure(10),y=p.measure(50),c=Od(.1,.99);let C=!1;function E(){return!(C||!e.reachedAny(i.get())||!e.reachedAny(r.get()))}function M(j){if(!E())return;const q=e.reachedMin(r.get())?"min":"max",H=ci(e[q]-r.get()),W=i.get()-r.get(),K=c.constrain(H/y);i.subtract(W*K),!j&&ci(W)<g&&(i.set(e.constrain(i.get())),a.useDuration(25).useBaseFriction())}function k(j){C=!j}return{shouldConstrain:E,constrain:M,toggleActive:k}}function jR(e,r,i,a,p){const g=Od(-r+e,0),y=k(),c=M(),C=N();function E(q,H){return Ig(q,H)<=1}function M(){const q=y[0],H=ru(y),W=y.lastIndexOf(q),K=y.indexOf(H)+1;return Od(W,K)}function k(){return i.map((q,H)=>{const{min:W,max:K}=g,ee=g.constrain(q),ie=!H,ve=Tx(i,H);return ie?K:ve||E(W,ee)?W:E(K,ee)?K:ee}).map(q=>parseFloat(q.toFixed(3)))}function N(){if(r<=e+p)return[g.max];if(a==="keepSnaps")return y;const{min:q,max:H}=c;return y.slice(q,H)}return{snapsContained:C,scrollContainLimit:c}}function BR(e,r,i){const a=r[0],p=i?a-e:ru(r);return{limit:Od(p,a)}}function FR(e,r,i,a){const g=r.min+.1,y=r.max+.1,{reachedMin:c,reachedMax:C}=Od(g,y);function E(N){return N===1?C(i.get()):N===-1?c(i.get()):!1}function M(N){if(!E(N))return;const j=e*(N*-1);a.forEach(q=>q.add(j))}return{loop:M}}function UR(e){const{max:r,length:i}=e;function a(g){const y=g-r;return i?y/-i:0}return{get:a}}function $R(e,r,i,a,p){const{startEdge:g,endEdge:y}=e,{groupSlides:c}=p,C=k().map(r.measure),E=N(),M=j();function k(){return c(a).map(H=>ru(H)[y]-H[0][g]).map(ci)}function N(){return a.map(H=>i[g]-H[g]).map(H=>-ci(H))}function j(){return c(E).map(H=>H[0]).map((H,W)=>H+C[W])}return{snaps:E,snapsAligned:M}}function VR(e,r,i,a,p,g){const{groupSlides:y}=p,{min:c,max:C}=a,E=M();function M(){const N=y(g),j=!e||r==="keepSnaps";return i.length===1?[g]:j?N:N.slice(c,C).map((q,H,W)=>{const K=!H,ee=Tx(W,H);if(K){const ie=ru(W[0])+1;return R2(ie)}if(ee){const ie=Yg(g)-ru(W)[0]+1;return R2(ie,ru(W)[0])}return q})}return{slideRegistry:E}}function HR(e,r,i,a,p){const{reachedAny:g,removeOffset:y,constrain:c}=a;function C(q){return q.concat().sort((H,W)=>ci(H)-ci(W))[0]}function E(q){const H=e?y(q):c(q),W=r.map((ee,ie)=>({diff:M(ee-H,0),index:ie})).sort((ee,ie)=>ci(ee.diff)-ci(ie.diff)),{index:K}=W[0];return{index:K,distance:H}}function M(q,H){const W=[q,q+i,q-i];if(!e)return q;if(!H)return C(W);const K=W.filter(ee=>Cx(ee)===H);return K.length?C(K):ru(W)-i}function k(q,H){const W=r[q]-p.get(),K=M(W,H);return{index:q,distance:K}}function N(q,H){const W=p.get()+q,{index:K,distance:ee}=E(W),ie=!e&&g(W);if(!H||ie)return{index:K,distance:q};const ve=r[K]-ee,ye=q+M(ve,0);return{index:K,distance:ye}}return{byDistance:N,byIndex:k,shortcut:M}}function qR(e,r,i,a,p,g,y){function c(k){const N=k.distance,j=k.index!==r.get();g.add(N),N&&(a.duration()?e.start():(e.update(),e.render(1),e.update())),j&&(i.set(r.get()),r.set(k.index),y.emit("select"))}function C(k,N){const j=p.byDistance(k,N);c(j)}function E(k,N){const j=r.clone().set(k),q=p.byIndex(j.get(),N);c(q)}return{distance:C,index:E}}function GR(e,r,i,a,p,g,y,c){const C={passive:!0,capture:!0};let E=0;function M(j){if(!c)return;function q(H){if(new Date().getTime()-E>10)return;y.emit("slideFocusStart"),e.scrollLeft=0;const ee=i.findIndex(ie=>ie.includes(H));Ax(ee)&&(p.useDuration(0),a.index(ee,0),y.emit("slideFocus"))}g.add(document,"keydown",k,!1),r.forEach((H,W)=>{g.add(H,"focus",K=>{(Ov(c)||c(j,K))&&q(W)},C)})}function k(j){j.code==="Tab"&&(E=new Date().getTime())}return{init:M}}function Eg(e){let r=e;function i(){return r}function a(C){r=y(C)}function p(C){r+=y(C)}function g(C){r-=y(C)}function y(C){return Ax(C)?C:C.get()}return{get:i,set:a,add:p,subtract:g}}function dT(e,r){const i=e.scroll==="x"?y:c,a=r.style;let p=null,g=!1;function y(N){return`translate3d(${N}px,0px,0px)`}function c(N){return`translate3d(0px,${N}px,0px)`}function C(N){if(g)return;const j=TR(e.direction(N));j!==p&&(a.transform=i(j),p=j)}function E(N){g=!N}function M(){g||(a.transform="",r.getAttribute("style")||r.removeAttribute("style"))}return{clear:M,to:C,toggleActive:E}}function WR(e,r,i,a,p,g,y,c,C){const M=Lg(p),k=Lg(p).reverse(),N=K().concat(ee());function j(Me,je){return Me.reduce((ht,At)=>ht-p[At],je)}function q(Me,je){return Me.reduce((ht,At)=>j(ht,je)>0?ht.concat([At]):ht,[])}function H(Me){return g.map((je,ht)=>({start:je-a[ht]+.5+Me,end:je+r-.5+Me}))}function W(Me,je,ht){const At=H(je);return Me.map(ot=>{const ft=ht?0:-i,rt=ht?i:0,It=ht?"end":"start",kt=At[ot][It];return{index:ot,loopPoint:kt,slideLocation:Eg(-1),translate:dT(e,C[ot]),target:()=>c.get()>kt?ft:rt}})}function K(){const Me=y[0],je=q(k,Me);return W(je,i,!1)}function ee(){const Me=r-y[0]-1,je=q(M,Me);return W(je,-i,!0)}function ie(){return N.every(({index:Me})=>{const je=M.filter(ht=>ht!==Me);return j(je,r)<=.1})}function ve(){N.forEach(Me=>{const{target:je,translate:ht,slideLocation:At}=Me,ot=je();ot!==At.get()&&(ht.to(ot),At.set(ot))})}function ye(){N.forEach(Me=>Me.translate.clear())}return{canLoop:ie,clear:ye,loop:ve,loopPoints:N}}function ZR(e,r,i){let a,p=!1;function g(C){if(!i)return;function E(M){for(const k of M)if(k.type==="childList"){C.reInit(),r.emit("slidesChanged");break}}a=new MutationObserver(M=>{p||(Ov(i)||i(C,M))&&E(M)}),a.observe(e,{childList:!0})}function y(){a&&a.disconnect(),p=!0}return{init:g,destroy:y}}function XR(e,r,i,a){const p={};let g=null,y=null,c,C=!1;function E(){c=new IntersectionObserver(q=>{C||(q.forEach(H=>{const W=r.indexOf(H.target);p[W]=H}),g=null,y=null,i.emit("slidesInView"))},{root:e.parentElement,threshold:a}),r.forEach(q=>c.observe(q))}function M(){c&&c.disconnect(),C=!0}function k(q){return zg(p).reduce((H,W)=>{const K=parseInt(W),{isIntersecting:ee}=p[K];return(q&&ee||!q&&!ee)&&H.push(K),H},[])}function N(q=!0){if(q&&g)return g;if(!q&&y)return y;const H=k(q);return q&&(g=H),q||(y=H),H}return{init:E,destroy:M,get:N}}function KR(e,r,i,a,p,g){const{measureSize:y,startEdge:c,endEdge:C}=e,E=i[0]&&p,M=q(),k=H(),N=i.map(y),j=W();function q(){if(!E)return 0;const ee=i[0];return ci(r[c]-ee[c])}function H(){if(!E)return 0;const ee=g.getComputedStyle(ru(a));return parseFloat(ee.getPropertyValue(`margin-${C}`))}function W(){return i.map((ee,ie,ve)=>{const ye=!ie,Pe=Tx(ve,ie);return ye?N[ie]+M:Pe?N[ie]+k:ve[ie+1][c]-ee[c]}).map(ci)}return{slideSizes:N,slideSizesWithGaps:j,startGap:M,endGap:k}}function YR(e,r,i,a,p,g,y,c,C){const{startEdge:E,endEdge:M,direction:k}=e,N=Ax(i);function j(K,ee){return Lg(K).filter(ie=>ie%ee===0).map(ie=>K.slice(ie,ie+ee))}function q(K){return K.length?Lg(K).reduce((ee,ie,ve)=>{const ye=ru(ee)||0,Pe=ye===0,Me=ie===Yg(K),je=p[E]-g[ye][E],ht=p[E]-g[ie][M],At=!a&&Pe?k(y):0,ot=!a&&Me?k(c):0,ft=ci(ht-ot-(je+At));return ve&&ft>r+C&&ee.push(ie),Me&&ee.push(K.length),ee},[]).map((ee,ie,ve)=>{const ye=Math.max(ve[ie-1]||0);return K.slice(ye,ee)}):[]}function H(K){return N?j(K,i):q(K)}return{groupSlides:H}}function QR(e,r,i,a,p,g,y){const{align:c,axis:C,direction:E,startIndex:M,loop:k,duration:N,dragFree:j,dragThreshold:q,inViewThreshold:H,slidesToScroll:W,skipSnaps:K,containScroll:ee,watchResize:ie,watchSlides:ve,watchDrag:ye,watchFocus:Pe}=g,Me=2,je=OR(),ht=je.measure(r),At=i.map(je.measure),ot=RR(C,E),ft=ot.measureSize(ht),rt=kR(ft),It=ER(c,ft),kt=!k&&!!ee,Ue=k||!!ee,{slideSizes:ct,slideSizesWithGaps:nt,startGap:Ct,endGap:Te}=KR(ot,ht,At,i,Ue,p),et=YR(ot,ft,W,k,ht,At,Ct,Te,Me),{snaps:st,snapsAligned:yt}=$R(ot,It,ht,At,et),Rt=-ru(st)+ru(nt),{snapsContained:Zt,scrollContainLimit:Ft}=jR(ft,Rt,yt,ee,Me),ir=kt?Zt:yt,{limit:Jt}=BR(Rt,ir,k),St=fT(Yg(ir),M,k),Gt=St.clone(),Nt=Lg(i),He=({dragHandler:re,scrollBody:ne,scrollBounds:le,options:{loop:_e}})=>{_e||le.constrain(re.pointerDown()),ne.seek()},Ht=({scrollBody:re,translate:ne,location:le,offsetLocation:_e,previousLocation:Se,scrollLooper:De,slideLooper:qe,dragHandler:Oe,animation:Je,eventHandler:gt,scrollBounds:at,options:{loop:Ot}},ke)=>{const ar=re.settled(),br=!at.shouldConstrain(),$t=Ot?ar:ar&&br,or=$t&&!Oe.pointerDown();or&&Je.stop();const Ur=le.get()*ke+Se.get()*(1-ke);_e.set(Ur),Ot&&(De.loop(re.direction()),qe.loop()),ne.to(_e.get()),or&&gt.emit("settle"),$t||gt.emit("scroll")},Lt=MR(a,p,()=>He(Re),re=>Ht(Re,re)),wr=.68,Dr=ir[St.get()],zr=Eg(Dr),Bn=Eg(Dr),Kn=Eg(Dr),qi=Eg(Dr),bi=zR(zr,Kn,Bn,qi,N,wr),Ga=HR(k,ir,Rt,Jt,qi),Ea=qR(Lt,St,Gt,bi,Ga,qi,y),To=UR(Jt),no=Ng(),fa=XR(r,i,y,H),{slideRegistry:An}=VR(kt,ee,ir,Ft,et,Nt),Gi=GR(e,i,An,Ea,bi,no,y,Pe),Re={ownerDocument:a,ownerWindow:p,eventHandler:y,containerRect:ht,slideRects:At,animation:Lt,axis:ot,dragHandler:DR(ot,e,a,p,qi,IR(ot,p),zr,Lt,Ea,bi,Ga,St,y,rt,j,q,K,wr,ye),eventStore:no,percentOfView:rt,index:St,indexPrevious:Gt,limit:Jt,location:zr,offsetLocation:Kn,previousLocation:Bn,options:g,resizeHandler:LR(r,y,p,i,ot,ie,je),scrollBody:bi,scrollBounds:NR(Jt,Kn,qi,bi,rt),scrollLooper:FR(Rt,Jt,Kn,[zr,Kn,Bn,qi]),scrollProgress:To,scrollSnapList:ir.map(To.get),scrollSnaps:ir,scrollTarget:Ga,scrollTo:Ea,slideLooper:WR(ot,ft,Rt,ct,nt,st,ir,Kn,i),slideFocus:Gi,slidesHandler:ZR(r,y,ve),slidesInView:fa,slideIndexes:Nt,slideRegistry:An,slidesToScroll:et,target:qi,translate:dT(ot,r)};return Re}function JR(){let e={},r;function i(E){r=E}function a(E){return e[E]||[]}function p(E){return a(E).forEach(M=>M(r,E)),C}function g(E,M){return e[E]=a(E).concat([M]),C}function y(E,M){return e[E]=a(E).filter(k=>k!==M),C}function c(){e={}}const C={init:i,emit:p,off:y,on:g,clear:c};return C}const eD={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function tD(e){function r(g,y){return hT(g,y||{})}function i(g){const y=g.breakpoints||{},c=zg(y).filter(C=>e.matchMedia(C).matches).map(C=>y[C]).reduce((C,E)=>r(C,E),{});return r(g,c)}function a(g){return g.map(y=>zg(y.breakpoints||{})).reduce((y,c)=>y.concat(c),[]).map(e.matchMedia)}return{mergeOptions:r,optionsAtMedia:i,optionsMediaQueries:a}}function rD(e){let r=[];function i(g,y){return r=y.filter(({options:c})=>e.optionsAtMedia(c).active!==!1),r.forEach(c=>c.init(g,e)),y.reduce((c,C)=>Object.assign(c,{[C.name]:C}),{})}function a(){r=r.filter(g=>g.destroy())}return{init:i,destroy:a}}function V0(e,r,i){const a=e.ownerDocument,p=a.defaultView,g=tD(p),y=rD(g),c=Ng(),C=JR(),{mergeOptions:E,optionsAtMedia:M,optionsMediaQueries:k}=g,{on:N,off:j,emit:q}=C,H=ot;let W=!1,K,ee=E(eD,V0.globalOptions),ie=E(ee),ve=[],ye,Pe,Me;function je(){const{container:Nt,slides:He}=ie;Pe=(bb(Nt)?e.querySelector(Nt):Nt)||e.children[0];const Lt=bb(He)?Pe.querySelectorAll(He):He;Me=[].slice.call(Lt||Pe.children)}function ht(Nt){const He=QR(e,Pe,Me,a,p,Nt,C);if(Nt.loop&&!He.slideLooper.canLoop()){const Ht=Object.assign({},Nt,{loop:!1});return ht(Ht)}return He}function At(Nt,He){W||(ee=E(ee,Nt),ie=M(ee),ve=He||ve,je(),K=ht(ie),k([ee,...ve.map(({options:Ht})=>Ht)]).forEach(Ht=>c.add(Ht,"change",ot)),ie.active&&(K.translate.to(K.location.get()),K.animation.init(),K.slidesInView.init(),K.slideFocus.init(Gt),K.eventHandler.init(Gt),K.resizeHandler.init(Gt),K.slidesHandler.init(Gt),K.options.loop&&K.slideLooper.loop(),Pe.offsetParent&&Me.length&&K.dragHandler.init(Gt),ye=y.init(Gt,ve)))}function ot(Nt,He){const Ht=et();ft(),At(E({startIndex:Ht},Nt),He),C.emit("reInit")}function ft(){K.dragHandler.destroy(),K.eventStore.clear(),K.translate.clear(),K.slideLooper.clear(),K.resizeHandler.destroy(),K.slidesHandler.destroy(),K.slidesInView.destroy(),K.animation.destroy(),y.destroy(),c.clear()}function rt(){W||(W=!0,c.clear(),ft(),C.emit("destroy"),C.clear())}function It(Nt,He,Ht){!ie.active||W||(K.scrollBody.useBaseFriction().useDuration(He===!0?0:ie.duration),K.scrollTo.index(Nt,Ht||0))}function kt(Nt){const He=K.index.add(1).get();It(He,Nt,-1)}function Ue(Nt){const He=K.index.add(-1).get();It(He,Nt,1)}function ct(){return K.index.add(1).get()!==et()}function nt(){return K.index.add(-1).get()!==et()}function Ct(){return K.scrollSnapList}function Te(){return K.scrollProgress.get(K.offsetLocation.get())}function et(){return K.index.get()}function st(){return K.indexPrevious.get()}function yt(){return K.slidesInView.get()}function Rt(){return K.slidesInView.get(!1)}function Zt(){return ye}function Ft(){return K}function ir(){return e}function Jt(){return Pe}function St(){return Me}const Gt={canScrollNext:ct,canScrollPrev:nt,containerNode:Jt,internalEngine:Ft,destroy:rt,off:j,on:N,emit:q,plugins:Zt,previousScrollSnap:st,reInit:H,rootNode:ir,scrollNext:kt,scrollPrev:Ue,scrollProgress:Te,scrollSnapList:Ct,scrollTo:It,selectedScrollSnap:et,slideNodes:St,slidesInView:yt,slidesNotInView:Rt};return At(r,i),setTimeout(()=>C.emit("init"),0),Gt}V0.globalOptions=void 0;function Ex(e={},r=[]){const i=X.useRef(e),a=X.useRef(r),[p,g]=X.useState(),[y,c]=X.useState(),C=X.useCallback(()=>{p&&p.reInit(i.current,a.current)},[p]);return X.useEffect(()=>{Px(i.current,e)||(i.current=e,C())},[e,C]),X.useEffect(()=>{AR(a.current,r)||(a.current=r,C())},[r,C]),X.useEffect(()=>{if(PR()&&y){V0.globalOptions=Ex.globalOptions;const E=V0(y,i.current,a.current);return g(E),()=>E.destroy()}else g(void 0)},[y,g]),[c,p]}Ex.globalOptions=void 0;const pT=X.createContext(null);function mT(){const e=X.useContext(pT);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}function nD({orientation:e="horizontal",opts:r,setApi:i,plugins:a,className:p,children:g,...y}){const[c,C]=Ex({...r,axis:e==="horizontal"?"x":"y"},a),[E,M]=X.useState(!1),[k,N]=X.useState(!1),j=X.useCallback(K=>{K&&(M(K.canScrollPrev()),N(K.canScrollNext()))},[]),q=X.useCallback(()=>{C?.scrollPrev()},[C]),H=X.useCallback(()=>{C?.scrollNext()},[C]),W=X.useCallback(K=>{K.key==="ArrowLeft"?(K.preventDefault(),q()):K.key==="ArrowRight"&&(K.preventDefault(),H())},[q,H]);return X.useEffect(()=>{!C||!i||i(C)},[C,i]),X.useEffect(()=>{if(C)return j(C),C.on("reInit",j),C.on("select",j),()=>{C?.off("select",j)}},[C,j]),Ne.jsx(pT.Provider,{value:{carouselRef:c,api:C,opts:r,orientation:e||(r?.axis==="y"?"vertical":"horizontal"),scrollPrev:q,scrollNext:H,canScrollPrev:E,canScrollNext:k},children:Ne.jsx("div",{onKeyDownCapture:W,className:hi("relative",p),role:"region","aria-roledescription":"carousel","data-slot":"carousel",...y,children:g})})}function iD({className:e,...r}){const{carouselRef:i,orientation:a}=mT();return Ne.jsx("div",{ref:i,className:"overflow-hidden","data-slot":"carousel-content",children:Ne.jsx("div",{className:hi("flex",a==="horizontal"?"-ml-4":"-mt-4 flex-col",e),...r})})}function aD({className:e,...r}){const{orientation:i}=mT();return Ne.jsx("div",{role:"group","aria-roledescription":"slide","data-slot":"carousel-item",className:hi("min-w-0 shrink-0 grow-0 basis-full",i==="horizontal"?"pl-4":"pt-4",e),...r})}function oD({className:e,...r}){return Ne.jsx("div",{"data-slot":"card",className:hi("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function sD({className:e,...r}){return Ne.jsx("div",{"data-slot":"card-header",className:hi("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function lD({className:e,...r}){return Ne.jsx("div",{"data-slot":"card-title",className:hi("leading-none font-semibold",e),...r})}function uD({className:e,...r}){return Ne.jsx("div",{"data-slot":"card-content",className:hi("px-6",e),...r})}const cD=[{metric:"Median Salary",weight_signed:.6558076975,weight_magnitude:.6558076975},{metric:"Average Salary",weight_signed:.6523718342,weight_magnitude:.6523718342},{metric:"Lowest Salary",weight_signed:.6485308062,weight_magnitude:.6485308062},{metric:"Highest Salary",weight_signed:.652181275,weight_magnitude:.652181275},{metric:"Infant Survival Rate",weight_signed:.2322032702,weight_magnitude:.2322032702},{metric:"Alcohol Consumption Rate",weight_signed:.5697201294,weight_magnitude:.5697201294},{metric:"Life Expectancy",weight_signed:.7416090513,weight_magnitude:.7416090513},{metric:"Netflix (USD/month)",weight_signed:.68233766,weight_magnitude:.68233766},{metric:"Women Safety Index",weight_signed:.7713289613,weight_magnitude:.7713289613},{metric:"Average Winter Temperature",weight_signed:-.4293739779,weight_magnitude:.4293739779},{metric:"Average Summer Temperature",weight_signed:-.4283984286,weight_magnitude:.4283984286},{metric:"Population",weight_signed:-.0219677181,weight_magnitude:.0219677181},{metric:"Energy Per Capita",weight_signed:.5801967755,weight_magnitude:.5801967755},{metric:"% of Power from Fossil Fuels",weight_signed:-.1362477334,weight_magnitude:.1362477334},{metric:"% of Power from Nuclear",weight_signed:.2760217511,weight_magnitude:.2760217511},{metric:"% of Power from Renewables",weight_signed:.0225333231,weight_magnitude:.0225333231},{metric:"% of Agricultural Land",weight_signed:-.2509434126,weight_magnitude:.2509434126},{metric:"% of Forest Land",weight_signed:.1552674975,weight_magnitude:.1552674975},{metric:"Territory",weight_signed:.1241759612,weight_magnitude:.1241759612},{metric:"Average Rainfall",weight_signed:.0560770183,weight_magnitude:.0560770183},{metric:"Corruption",weight_signed:.0494015891,weight_magnitude:.0494015891},{metric:"Wheat Production (tonnes)",weight_signed:.0991311381,weight_magnitude:.0991311381},{metric:"Rye Production (tonnes)",weight_signed:-.0566746652,weight_magnitude:.0566746652},{metric:"Potatoes Production (tonnes)",weight_signed:-.1034607974,weight_magnitude:.1034607974},{metric:"Meat, chicken Production (tonnes)",weight_signed:.0025616182,weight_magnitude:.0025616182},{metric:"Avocados Production (tonnes)",weight_signed:-.0224689248,weight_magnitude:.0224689248},{metric:"Petrol Price (USD/liter)",weight_signed:.4486226673,weight_magnitude:.4486226673},{metric:"Daily Oil Consumption (Barrels)",weight_signed:.1522584044,weight_magnitude:.1522584044},{metric:"CO2 Emissions (ton per capita)",weight_signed:.5727786876,weight_magnitude:.5727786876}];var D_={},I_={},D2;function hD(){return D2||(D2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(i){return i==="__proto__"}e.isUnsafeProperty=r})(I_)),I_}var O_={},I2;function gT(){return I2||(I2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(i){switch(typeof i){case"number":case"symbol":return!1;case"string":return i.includes(".")||i.includes("[")||i.includes("]")}}e.isDeepKey=r})(O_)),O_}var k_={},O2;function yT(){return O2||(O2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(i){return typeof i=="string"||typeof i=="symbol"?i:Object.is(i?.valueOf?.(),-0)?"-0":String(i)}e.toKey=r})(k_)),k_}var L_={},k2;function Mx(){return k2||(k2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(i){const a=[],p=i.length;if(p===0)return a;let g=0,y="",c="",C=!1;for(i.charCodeAt(0)===46&&(a.push(""),g++);g<p;){const E=i[g];c?E==="\\"&&g+1<p?(g++,y+=i[g]):E===c?c="":y+=E:C?E==='"'||E==="'"?c=E:E==="]"?(C=!1,a.push(y),y=""):y+=E:E==="["?(C=!0,y&&(a.push(y),y="")):E==="."?y&&(a.push(y),y=""):y+=E,g++}return y&&a.push(y),a}e.toPath=r})(L_)),L_}var L2;function Rx(){return L2||(L2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=hD(),i=gT(),a=yT(),p=Mx();function g(c,C,E){if(c==null)return E;switch(typeof C){case"string":{if(r.isUnsafeProperty(C))return E;const M=c[C];return M===void 0?i.isDeepKey(C)?g(c,p.toPath(C),E):E:M}case"number":case"symbol":{typeof C=="number"&&(C=a.toKey(C));const M=c[C];return M===void 0?E:M}default:{if(Array.isArray(C))return y(c,C,E);if(Object.is(C?.valueOf(),-0)?C="-0":C=String(C),r.isUnsafeProperty(C))return E;const M=c[C];return M===void 0?E:M}}}function y(c,C,E){if(C.length===0)return E;let M=c;for(let k=0;k<C.length;k++){if(M==null||r.isUnsafeProperty(C[k]))return E;M=M[C[k]]}return M===void 0?E:M}e.get=g})(D_)),D_}var z_,z2;function fD(){return z2||(z2=1,z_=Rx().get),z_}var dD=fD();const Up=au(dD);var N_={exports:{}},Pn={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N2;function pD(){if(N2)return Pn;N2=1;var e=60103,r=60106,i=60107,a=60108,p=60114,g=60109,y=60110,c=60112,C=60113,E=60120,M=60115,k=60116,N=60121,j=60122,q=60117,H=60129,W=60131;if(typeof Symbol=="function"&&Symbol.for){var K=Symbol.for;e=K("react.element"),r=K("react.portal"),i=K("react.fragment"),a=K("react.strict_mode"),p=K("react.profiler"),g=K("react.provider"),y=K("react.context"),c=K("react.forward_ref"),C=K("react.suspense"),E=K("react.suspense_list"),M=K("react.memo"),k=K("react.lazy"),N=K("react.block"),j=K("react.server.block"),q=K("react.fundamental"),H=K("react.debug_trace_mode"),W=K("react.legacy_hidden")}function ee(rt){if(typeof rt=="object"&&rt!==null){var It=rt.$$typeof;switch(It){case e:switch(rt=rt.type,rt){case i:case p:case a:case C:case E:return rt;default:switch(rt=rt&&rt.$$typeof,rt){case y:case c:case k:case M:case g:return rt;default:return It}}case r:return It}}}var ie=g,ve=e,ye=c,Pe=i,Me=k,je=M,ht=r,At=p,ot=a,ft=C;return Pn.ContextConsumer=y,Pn.ContextProvider=ie,Pn.Element=ve,Pn.ForwardRef=ye,Pn.Fragment=Pe,Pn.Lazy=Me,Pn.Memo=je,Pn.Portal=ht,Pn.Profiler=At,Pn.StrictMode=ot,Pn.Suspense=ft,Pn.isAsyncMode=function(){return!1},Pn.isConcurrentMode=function(){return!1},Pn.isContextConsumer=function(rt){return ee(rt)===y},Pn.isContextProvider=function(rt){return ee(rt)===g},Pn.isElement=function(rt){return typeof rt=="object"&&rt!==null&&rt.$$typeof===e},Pn.isForwardRef=function(rt){return ee(rt)===c},Pn.isFragment=function(rt){return ee(rt)===i},Pn.isLazy=function(rt){return ee(rt)===k},Pn.isMemo=function(rt){return ee(rt)===M},Pn.isPortal=function(rt){return ee(rt)===r},Pn.isProfiler=function(rt){return ee(rt)===p},Pn.isStrictMode=function(rt){return ee(rt)===a},Pn.isSuspense=function(rt){return ee(rt)===C},Pn.isValidElementType=function(rt){return typeof rt=="string"||typeof rt=="function"||rt===i||rt===p||rt===H||rt===a||rt===C||rt===E||rt===W||typeof rt=="object"&&rt!==null&&(rt.$$typeof===k||rt.$$typeof===M||rt.$$typeof===g||rt.$$typeof===y||rt.$$typeof===c||rt.$$typeof===q||rt.$$typeof===N||rt[0]===j)},Pn.typeOf=ee,Pn}var j2;function mD(){return j2||(j2=1,N_.exports=pD()),N_.exports}var gD=mD(),Ts=e=>e===0?0:e>0?1:-1,ol=e=>typeof e=="number"&&e!=+e,Cd=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Pr=e=>(typeof e=="number"||e instanceof Number)&&!ol(e),ic=e=>Pr(e)||typeof e=="string",yD=0,jg=e=>{var r=++yD;return"".concat(e||"").concat(r)},iu=function(r,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Pr(r)&&typeof r!="string")return a;var g;if(Cd(r)){if(i==null)return a;var y=r.indexOf("%");g=i*parseFloat(r.slice(0,y))/100}else g=+r;return ol(g)&&(g=a),p&&i!=null&&g>i&&(g=i),g},vT=e=>{if(!Array.isArray(e))return!1;for(var r=e.length,i={},a=0;a<r;a++)if(!i[e[a]])i[e[a]]=!0;else return!0;return!1};function So(e,r,i){return Pr(e)&&Pr(r)?e+i*(r-e):r}function vD(e,r,i){if(!(!e||!e.length))return e.find(a=>a&&(typeof r=="function"?r(a):Up(a,r))===i)}var Sa=e=>e===null||typeof e>"u",Qg=e=>Sa(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),_D=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Dx(e){if(typeof e!="string")return!1;var r=_D;return r.includes(e)}var bD=["viewBox","children"],B2=["points","pathLength"],j_={svg:bD,polygon:B2,polyline:B2},xD=(e,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(X.isValidElement(e)&&(i=e.props),typeof i!="object"&&typeof i!="function")return null;var a={};return Object.keys(i).forEach(p=>{Dx(p)&&(a[p]=(g=>i[p](i,g)))}),a},wD=(e,r,i)=>a=>(e(r,i,a),null),Ix=(e,r,i)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(p=>{var g=e[p];Dx(p)&&typeof g=="function"&&(a||(a={}),a[p]=wD(g,r,i))}),a},SD=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function _T(e){if(typeof e!="string")return!1;var r=SD;return r.includes(e)}function Jg(e){var r=Object.entries(e).filter(i=>{var[a]=i;return _T(a)});return Object.fromEntries(r)}var F2=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",U2=null,B_=null,bT=e=>{if(e===U2&&Array.isArray(B_))return B_;var r=[];return X.Children.forEach(e,i=>{Sa(i)||(gD.isFragment(i)?r=r.concat(bT(i.props.children)):r.push(i))}),B_=r,U2=e,r};function PD(e,r){var i=[],a=[];return Array.isArray(r)?a=r.map(p=>F2(p)):a=[F2(r)],bT(e).forEach(p=>{var g=Up(p,"type.displayName")||Up(p,"type.name");a.indexOf(g)!==-1&&i.push(p)}),i}var AD=(e,r,i,a)=>{var p;if(typeof r=="symbol"||typeof r=="number")return!0;var g=(p=a&&j_?.[a])!==null&&p!==void 0?p:[],y=r.startsWith("data-"),c=typeof e!="function"&&(!!a&&g.includes(r)||_T(r)),C=!!i&&Dx(r);return y||c||C},qa=(e,r,i)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(X.isValidElement(e)&&(a=e.props),typeof a!="object"&&typeof a!="function")return null;var p={};return Object.keys(a).forEach(g=>{var y;AD((y=a)===null||y===void 0?void 0:y[g],g,r,i)&&(p[g]=a[g])}),p},CD=["children","width","height","viewBox","className","style","title","desc"];function wb(){return wb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},wb.apply(null,arguments)}function TD(e,r){if(e==null)return{};var i,a,p=ED(e,r);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],r.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(p[i]=e[i])}return p}function ED(e,r){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var xT=X.forwardRef((e,r)=>{var{children:i,width:a,height:p,viewBox:g,className:y,style:c,title:C,desc:E}=e,M=TD(e,CD),k=g||{width:a,height:p,x:0,y:0},N=In("recharts-surface",y);return X.createElement("svg",wb({},qa(M,!0,"svg"),{className:N,width:a,height:p,style:c,viewBox:"".concat(k.x," ").concat(k.y," ").concat(k.width," ").concat(k.height),ref:r}),X.createElement("title",null,C),X.createElement("desc",null,E),i)}),MD=["children","className"];function Sb(){return Sb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Sb.apply(null,arguments)}function RD(e,r){if(e==null)return{};var i,a,p=DD(e,r);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],r.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(p[i]=e[i])}return p}function DD(e,r){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var ff=X.forwardRef((e,r)=>{var{children:i,className:a}=e,p=RD(e,MD),g=In("recharts-layer",a);return X.createElement("g",Sb({className:g},qa(p,!0),{ref:r}),i)}),ID=X.createContext(null);function jn(e){return function(){return e}}const wT=Math.cos,H0=Math.sin,su=Math.sqrt,q0=Math.PI,kv=2*q0,Pb=Math.PI,Ab=2*Pb,Sd=1e-6,OD=Ab-Sd;function ST(e){this._+=e[0];for(let r=1,i=e.length;r<i;++r)this._+=arguments[r]+e[r]}function kD(e){let r=Math.floor(e);if(!(r>=0))throw new Error(`invalid digits: ${e}`);if(r>15)return ST;const i=10**r;return function(a){this._+=a[0];for(let p=1,g=a.length;p<g;++p)this._+=Math.round(arguments[p]*i)/i+a[p]}}class LD{constructor(r){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=r==null?ST:kD(r)}moveTo(r,i){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(r,i){this._append`L${this._x1=+r},${this._y1=+i}`}quadraticCurveTo(r,i,a,p){this._append`Q${+r},${+i},${this._x1=+a},${this._y1=+p}`}bezierCurveTo(r,i,a,p,g,y){this._append`C${+r},${+i},${+a},${+p},${this._x1=+g},${this._y1=+y}`}arcTo(r,i,a,p,g){if(r=+r,i=+i,a=+a,p=+p,g=+g,g<0)throw new Error(`negative radius: ${g}`);let y=this._x1,c=this._y1,C=a-r,E=p-i,M=y-r,k=c-i,N=M*M+k*k;if(this._x1===null)this._append`M${this._x1=r},${this._y1=i}`;else if(N>Sd)if(!(Math.abs(k*C-E*M)>Sd)||!g)this._append`L${this._x1=r},${this._y1=i}`;else{let j=a-y,q=p-c,H=C*C+E*E,W=j*j+q*q,K=Math.sqrt(H),ee=Math.sqrt(N),ie=g*Math.tan((Pb-Math.acos((H+N-W)/(2*K*ee)))/2),ve=ie/ee,ye=ie/K;Math.abs(ve-1)>Sd&&this._append`L${r+ve*M},${i+ve*k}`,this._append`A${g},${g},0,0,${+(k*j>M*q)},${this._x1=r+ye*C},${this._y1=i+ye*E}`}}arc(r,i,a,p,g,y){if(r=+r,i=+i,a=+a,y=!!y,a<0)throw new Error(`negative radius: ${a}`);let c=a*Math.cos(p),C=a*Math.sin(p),E=r+c,M=i+C,k=1^y,N=y?p-g:g-p;this._x1===null?this._append`M${E},${M}`:(Math.abs(this._x1-E)>Sd||Math.abs(this._y1-M)>Sd)&&this._append`L${E},${M}`,a&&(N<0&&(N=N%Ab+Ab),N>OD?this._append`A${a},${a},0,1,${k},${r-c},${i-C}A${a},${a},0,1,${k},${this._x1=E},${this._y1=M}`:N>Sd&&this._append`A${a},${a},0,${+(N>=Pb)},${k},${this._x1=r+a*Math.cos(g)},${this._y1=i+a*Math.sin(g)}`)}rect(r,i,a,p){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+i}h${a=+a}v${+p}h${-a}Z`}toString(){return this._}}function Ox(e){let r=3;return e.digits=function(i){if(!arguments.length)return r;if(i==null)r=null;else{const a=Math.floor(i);if(!(a>=0))throw new RangeError(`invalid digits: ${i}`);r=a}return e},()=>new LD(r)}function kx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function PT(e){this._context=e}PT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;default:this._context.lineTo(e,r);break}}};function Lv(e){return new PT(e)}function AT(e){return e[0]}function CT(e){return e[1]}function TT(e,r){var i=jn(!0),a=null,p=Lv,g=null,y=Ox(c);e=typeof e=="function"?e:e===void 0?AT:jn(e),r=typeof r=="function"?r:r===void 0?CT:jn(r);function c(C){var E,M=(C=kx(C)).length,k,N=!1,j;for(a==null&&(g=p(j=y())),E=0;E<=M;++E)!(E<M&&i(k=C[E],E,C))===N&&((N=!N)?g.lineStart():g.lineEnd()),N&&g.point(+e(k,E,C),+r(k,E,C));if(j)return g=null,j+""||null}return c.x=function(C){return arguments.length?(e=typeof C=="function"?C:jn(+C),c):e},c.y=function(C){return arguments.length?(r=typeof C=="function"?C:jn(+C),c):r},c.defined=function(C){return arguments.length?(i=typeof C=="function"?C:jn(!!C),c):i},c.curve=function(C){return arguments.length?(p=C,a!=null&&(g=p(a)),c):p},c.context=function(C){return arguments.length?(C==null?a=g=null:g=p(a=C),c):a},c}function m0(e,r,i){var a=null,p=jn(!0),g=null,y=Lv,c=null,C=Ox(E);e=typeof e=="function"?e:e===void 0?AT:jn(+e),r=typeof r=="function"?r:jn(r===void 0?0:+r),i=typeof i=="function"?i:i===void 0?CT:jn(+i);function E(k){var N,j,q,H=(k=kx(k)).length,W,K=!1,ee,ie=new Array(H),ve=new Array(H);for(g==null&&(c=y(ee=C())),N=0;N<=H;++N){if(!(N<H&&p(W=k[N],N,k))===K)if(K=!K)j=N,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),q=N-1;q>=j;--q)c.point(ie[q],ve[q]);c.lineEnd(),c.areaEnd()}K&&(ie[N]=+e(W,N,k),ve[N]=+r(W,N,k),c.point(a?+a(W,N,k):ie[N],i?+i(W,N,k):ve[N]))}if(ee)return c=null,ee+""||null}function M(){return TT().defined(p).curve(y).context(g)}return E.x=function(k){return arguments.length?(e=typeof k=="function"?k:jn(+k),a=null,E):e},E.x0=function(k){return arguments.length?(e=typeof k=="function"?k:jn(+k),E):e},E.x1=function(k){return arguments.length?(a=k==null?null:typeof k=="function"?k:jn(+k),E):a},E.y=function(k){return arguments.length?(r=typeof k=="function"?k:jn(+k),i=null,E):r},E.y0=function(k){return arguments.length?(r=typeof k=="function"?k:jn(+k),E):r},E.y1=function(k){return arguments.length?(i=k==null?null:typeof k=="function"?k:jn(+k),E):i},E.lineX0=E.lineY0=function(){return M().x(e).y(r)},E.lineY1=function(){return M().x(e).y(i)},E.lineX1=function(){return M().x(a).y(r)},E.defined=function(k){return arguments.length?(p=typeof k=="function"?k:jn(!!k),E):p},E.curve=function(k){return arguments.length?(y=k,g!=null&&(c=y(g)),E):y},E.context=function(k){return arguments.length?(k==null?g=c=null:c=y(g=k),E):g},E}class ET{constructor(r,i){this._context=r,this._x=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(r,i){switch(r=+r,i=+i,this._point){case 0:{this._point=1,this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+r)/2,this._y0,this._x0,i,r,i):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+i)/2,r,this._y0,r,i);break}}this._x0=r,this._y0=i}}function zD(e){return new ET(e,!0)}function ND(e){return new ET(e,!1)}const Lx={draw(e,r){const i=su(r/q0);e.moveTo(i,0),e.arc(0,0,i,0,kv)}},jD={draw(e,r){const i=su(r/5)/2;e.moveTo(-3*i,-i),e.lineTo(-i,-i),e.lineTo(-i,-3*i),e.lineTo(i,-3*i),e.lineTo(i,-i),e.lineTo(3*i,-i),e.lineTo(3*i,i),e.lineTo(i,i),e.lineTo(i,3*i),e.lineTo(-i,3*i),e.lineTo(-i,i),e.lineTo(-3*i,i),e.closePath()}},MT=su(1/3),BD=MT*2,FD={draw(e,r){const i=su(r/BD),a=i*MT;e.moveTo(0,-i),e.lineTo(a,0),e.lineTo(0,i),e.lineTo(-a,0),e.closePath()}},UD={draw(e,r){const i=su(r),a=-i/2;e.rect(a,a,i,i)}},$D=.8908130915292852,RT=H0(q0/10)/H0(7*q0/10),VD=H0(kv/10)*RT,HD=-wT(kv/10)*RT,qD={draw(e,r){const i=su(r*$D),a=VD*i,p=HD*i;e.moveTo(0,-i),e.lineTo(a,p);for(let g=1;g<5;++g){const y=kv*g/5,c=wT(y),C=H0(y);e.lineTo(C*i,-c*i),e.lineTo(c*a-C*p,C*a+c*p)}e.closePath()}},F_=su(3),GD={draw(e,r){const i=-su(r/(F_*3));e.moveTo(0,i*2),e.lineTo(-F_*i,-i),e.lineTo(F_*i,-i),e.closePath()}},tl=-.5,rl=su(3)/2,Cb=1/su(12),WD=(Cb/2+1)*3,ZD={draw(e,r){const i=su(r/WD),a=i/2,p=i*Cb,g=a,y=i*Cb+i,c=-g,C=y;e.moveTo(a,p),e.lineTo(g,y),e.lineTo(c,C),e.lineTo(tl*a-rl*p,rl*a+tl*p),e.lineTo(tl*g-rl*y,rl*g+tl*y),e.lineTo(tl*c-rl*C,rl*c+tl*C),e.lineTo(tl*a+rl*p,tl*p-rl*a),e.lineTo(tl*g+rl*y,tl*y-rl*g),e.lineTo(tl*c+rl*C,tl*C-rl*c),e.closePath()}};function XD(e,r){let i=null,a=Ox(p);e=typeof e=="function"?e:jn(e||Lx),r=typeof r=="function"?r:jn(r===void 0?64:+r);function p(){let g;if(i||(i=g=a()),e.apply(this,arguments).draw(i,+r.apply(this,arguments)),g)return i=null,g+""||null}return p.type=function(g){return arguments.length?(e=typeof g=="function"?g:jn(g),p):e},p.size=function(g){return arguments.length?(r=typeof g=="function"?g:jn(+g),p):r},p.context=function(g){return arguments.length?(i=g??null,p):i},p}function G0(){}function W0(e,r,i){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+r)/6,(e._y0+4*e._y1+i)/6)}function DT(e){this._context=e}DT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:W0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:W0(this,e,r);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};function KD(e){return new DT(e)}function IT(e){this._context=e}IT.prototype={areaStart:G0,areaEnd:G0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._x2=e,this._y2=r;break;case 1:this._point=2,this._x3=e,this._y3=r;break;case 2:this._point=3,this._x4=e,this._y4=r,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+r)/6);break;default:W0(this,e,r);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};function YD(e){return new IT(e)}function OT(e){this._context=e}OT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(i,a):this._context.moveTo(i,a);break;case 3:this._point=4;default:W0(this,e,r);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};function QD(e){return new OT(e)}function kT(e){this._context=e}kT.prototype={areaStart:G0,areaEnd:G0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,r){e=+e,r=+r,this._point?this._context.lineTo(e,r):(this._point=1,this._context.moveTo(e,r))}};function JD(e){return new kT(e)}function $2(e){return e<0?-1:1}function V2(e,r,i){var a=e._x1-e._x0,p=r-e._x1,g=(e._y1-e._y0)/(a||p<0&&-0),y=(i-e._y1)/(p||a<0&&-0),c=(g*p+y*a)/(a+p);return($2(g)+$2(y))*Math.min(Math.abs(g),Math.abs(y),.5*Math.abs(c))||0}function H2(e,r){var i=e._x1-e._x0;return i?(3*(e._y1-e._y0)/i-r)/2:r}function U_(e,r,i){var a=e._x0,p=e._y0,g=e._x1,y=e._y1,c=(g-a)/3;e._context.bezierCurveTo(a+c,p+c*r,g-c,y-c*i,g,y)}function Z0(e){this._context=e}Z0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:U_(this,this._t0,H2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){var i=NaN;if(e=+e,r=+r,!(e===this._x1&&r===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;break;case 2:this._point=3,U_(this,H2(this,i=V2(this,e,r)),i);break;default:U_(this,this._t0,i=V2(this,e,r));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r,this._t0=i}}};function LT(e){this._context=new zT(e)}(LT.prototype=Object.create(Z0.prototype)).point=function(e,r){Z0.prototype.point.call(this,r,e)};function zT(e){this._context=e}zT.prototype={moveTo:function(e,r){this._context.moveTo(r,e)},closePath:function(){this._context.closePath()},lineTo:function(e,r){this._context.lineTo(r,e)},bezierCurveTo:function(e,r,i,a,p,g){this._context.bezierCurveTo(r,e,a,i,g,p)}};function e8(e){return new Z0(e)}function t8(e){return new LT(e)}function NT(e){this._context=e}NT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,r=this._y,i=e.length;if(i)if(this._line?this._context.lineTo(e[0],r[0]):this._context.moveTo(e[0],r[0]),i===2)this._context.lineTo(e[1],r[1]);else for(var a=q2(e),p=q2(r),g=0,y=1;y<i;++g,++y)this._context.bezierCurveTo(a[0][g],p[0][g],a[1][g],p[1][g],e[y],r[y]);(this._line||this._line!==0&&i===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,r){this._x.push(+e),this._y.push(+r)}};function q2(e){var r,i=e.length-1,a,p=new Array(i),g=new Array(i),y=new Array(i);for(p[0]=0,g[0]=2,y[0]=e[0]+2*e[1],r=1;r<i-1;++r)p[r]=1,g[r]=4,y[r]=4*e[r]+2*e[r+1];for(p[i-1]=2,g[i-1]=7,y[i-1]=8*e[i-1]+e[i],r=1;r<i;++r)a=p[r]/g[r-1],g[r]-=a,y[r]-=a*y[r-1];for(p[i-1]=y[i-1]/g[i-1],r=i-2;r>=0;--r)p[r]=(y[r]-p[r+1])/g[r];for(g[i-1]=(e[i]+p[i-1])/2,r=0;r<i-1;++r)g[r]=2*e[r+1]-p[r+1];return[p,g]}function r8(e){return new NT(e)}function zv(e,r){this._context=e,this._t=r}zv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(e,r);else{var i=this._x*(1-this._t)+e*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,r)}break}}this._x=e,this._y=r}};function n8(e){return new zv(e,.5)}function i8(e){return new zv(e,0)}function a8(e){return new zv(e,1)}function $p(e,r){if((y=e.length)>1)for(var i=1,a,p,g=e[r[0]],y,c=g.length;i<y;++i)for(p=g,g=e[r[i]],a=0;a<c;++a)g[a][1]+=g[a][0]=isNaN(p[a][1])?p[a][0]:p[a][1]}function Tb(e){for(var r=e.length,i=new Array(r);--r>=0;)i[r]=r;return i}function o8(e,r){return e[r]}function s8(e){const r=[];return r.key=e,r}function l8(){var e=jn([]),r=Tb,i=$p,a=o8;function p(g){var y=Array.from(e.apply(this,arguments),s8),c,C=y.length,E=-1,M;for(const k of g)for(c=0,++E;c<C;++c)(y[c][E]=[0,+a(k,y[c].key,E,g)]).data=k;for(c=0,M=kx(r(y));c<C;++c)y[M[c]].index=c;return i(y,M),y}return p.keys=function(g){return arguments.length?(e=typeof g=="function"?g:jn(Array.from(g)),p):e},p.value=function(g){return arguments.length?(a=typeof g=="function"?g:jn(+g),p):a},p.order=function(g){return arguments.length?(r=g==null?Tb:typeof g=="function"?g:jn(Array.from(g)),p):r},p.offset=function(g){return arguments.length?(i=g??$p,p):i},p}function u8(e,r){if((a=e.length)>0){for(var i,a,p=0,g=e[0].length,y;p<g;++p){for(y=i=0;i<a;++i)y+=e[i][p][1]||0;if(y)for(i=0;i<a;++i)e[i][p][1]/=y}$p(e,r)}}function c8(e,r){if((p=e.length)>0){for(var i=0,a=e[r[0]],p,g=a.length;i<g;++i){for(var y=0,c=0;y<p;++y)c+=e[y][i][1]||0;a[i][1]+=a[i][0]=-c/2}$p(e,r)}}function h8(e,r){if(!(!((y=e.length)>0)||!((g=(p=e[r[0]]).length)>0))){for(var i=0,a=1,p,g,y;a<g;++a){for(var c=0,C=0,E=0;c<y;++c){for(var M=e[r[c]],k=M[a][1]||0,N=M[a-1][1]||0,j=(k-N)/2,q=0;q<c;++q){var H=e[r[q]],W=H[a][1]||0,K=H[a-1][1]||0;j+=W-K}C+=k,E+=j*k}p[a-1][1]+=p[a-1][0]=i,C&&(i-=E/C)}p[a-1][1]+=p[a-1][0]=i,$p(e,r)}}var f8=["type","size","sizeType"];function Eb(){return Eb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Eb.apply(null,arguments)}function G2(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function W2(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?G2(Object(i),!0).forEach(function(a){d8(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):G2(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function d8(e,r,i){return(r=p8(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function p8(e){var r=m8(e,"string");return typeof r=="symbol"?r:r+""}function m8(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function g8(e,r){if(e==null)return{};var i,a,p=y8(e,r);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],r.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(p[i]=e[i])}return p}function y8(e,r){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var jT={symbolCircle:Lx,symbolCross:jD,symbolDiamond:FD,symbolSquare:UD,symbolStar:qD,symbolTriangle:GD,symbolWye:ZD},v8=Math.PI/180,_8=e=>{var r="symbol".concat(Qg(e));return jT[r]||Lx},b8=(e,r,i)=>{if(r==="area")return e;switch(i){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*v8;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},x8=(e,r)=>{jT["symbol".concat(Qg(e))]=r},BT=e=>{var{type:r="circle",size:i=64,sizeType:a="area"}=e,p=g8(e,f8),g=W2(W2({},p),{},{type:r,size:i,sizeType:a}),y="circle";typeof r=="string"&&(y=r);var c=()=>{var N=_8(y),j=XD().type(N).size(b8(i,a,y));return j()},{className:C,cx:E,cy:M}=g,k=qa(g,!0);return E===+E&&M===+M&&i===+i?X.createElement("path",Eb({},k,{className:In("recharts-symbols",C),transform:"translate(".concat(E,", ").concat(M,")"),d:c()})):null};BT.registerSymbol=x8;var $_={},V_={},Z2;function w8(){return Z2||(Z2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(i,a){const p=new Map;for(let g=0;g<i.length;g++){const y=i[g],c=a(y);p.has(c)||p.set(c,y)}return Array.from(p.values())}e.uniqBy=r})(V_)),V_}var H_={},X2;function FT(){return X2||(X2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(i){return i}e.identity=r})(H_)),H_}var q_={},G_={},W_={},K2;function S8(){return K2||(K2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(i){return Number.isSafeInteger(i)&&i>=0}e.isLength=r})(W_)),W_}var Y2;function zx(){return Y2||(Y2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=S8();function i(a){return a!=null&&typeof a!="function"&&r.isLength(a.length)}e.isArrayLike=i})(G_)),G_}var Z_={},Q2;function P8(){return Q2||(Q2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(i){return typeof i=="object"&&i!==null}e.isObjectLike=r})(Z_)),Z_}var J2;function A8(){return J2||(J2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=zx(),i=P8();function a(p){return i.isObjectLike(p)&&r.isArrayLike(p)}e.isArrayLikeObject=a})(q_)),q_}var X_={},K_={},eS;function C8(){return eS||(eS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=Rx();function i(a){return function(p){return r.get(p,a)}}e.property=i})(K_)),K_}var Y_={},Q_={},J_={},e1={},tS;function UT(){return tS||(tS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(i){return i!==null&&(typeof i=="object"||typeof i=="function")}e.isObject=r})(e1)),e1}var t1={},rS;function $T(){return rS||(rS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(i){return i==null||typeof i!="object"&&typeof i!="function"}e.isPrimitive=r})(t1)),t1}var r1={},nS;function VT(){return nS||(nS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(i,a){return i===a||Number.isNaN(i)&&Number.isNaN(a)}e.eq=r})(r1)),r1}var iS;function T8(){return iS||(iS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=Nx(),i=UT(),a=$T(),p=VT();function g(k,N,j){return typeof j!="function"?r.isMatch(k,N):y(k,N,function q(H,W,K,ee,ie,ve){const ye=j(H,W,K,ee,ie,ve);return ye!==void 0?!!ye:y(H,W,q,ve)},new Map)}function y(k,N,j,q){if(N===k)return!0;switch(typeof N){case"object":return c(k,N,j,q);case"function":return Object.keys(N).length>0?y(k,{...N},j,q):p.eq(k,N);default:return i.isObject(k)?typeof N=="string"?N==="":!0:p.eq(k,N)}}function c(k,N,j,q){if(N==null)return!0;if(Array.isArray(N))return E(k,N,j,q);if(N instanceof Map)return C(k,N,j,q);if(N instanceof Set)return M(k,N,j,q);const H=Object.keys(N);if(k==null)return H.length===0;if(H.length===0)return!0;if(q&&q.has(N))return q.get(N)===k;q&&q.set(N,k);try{for(let W=0;W<H.length;W++){const K=H[W];if(!a.isPrimitive(k)&&!(K in k)||N[K]===void 0&&k[K]!==void 0||N[K]===null&&k[K]!==null||!j(k[K],N[K],K,k,N,q))return!1}return!0}finally{q&&q.delete(N)}}function C(k,N,j,q){if(N.size===0)return!0;if(!(k instanceof Map))return!1;for(const[H,W]of N.entries()){const K=k.get(H);if(j(K,W,H,k,N,q)===!1)return!1}return!0}function E(k,N,j,q){if(N.length===0)return!0;if(!Array.isArray(k))return!1;const H=new Set;for(let W=0;W<N.length;W++){const K=N[W];let ee=!1;for(let ie=0;ie<k.length;ie++){if(H.has(ie))continue;const ve=k[ie];let ye=!1;if(j(ve,K,W,k,N,q)&&(ye=!0),ye){H.add(ie),ee=!0;break}}if(!ee)return!1}return!0}function M(k,N,j,q){return N.size===0?!0:k instanceof Set?E([...k],[...N],j,q):!1}e.isMatchWith=g,e.isSetMatch=M})(J_)),J_}var aS;function Nx(){return aS||(aS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=T8();function i(a,p){return r.isMatchWith(a,p,()=>{})}e.isMatch=i})(Q_)),Q_}var n1={},i1={},a1={},oS;function E8(){return oS||(oS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(i){return Object.getOwnPropertySymbols(i).filter(a=>Object.prototype.propertyIsEnumerable.call(i,a))}e.getSymbols=r})(a1)),a1}var o1={},sS;function HT(){return sS||(sS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(i)}e.getTag=r})(o1)),o1}var s1={},lS;function qT(){return lS||(lS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r="[object RegExp]",i="[object String]",a="[object Number]",p="[object Boolean]",g="[object Arguments]",y="[object Symbol]",c="[object Date]",C="[object Map]",E="[object Set]",M="[object Array]",k="[object Function]",N="[object ArrayBuffer]",j="[object Object]",q="[object Error]",H="[object DataView]",W="[object Uint8Array]",K="[object Uint8ClampedArray]",ee="[object Uint16Array]",ie="[object Uint32Array]",ve="[object BigUint64Array]",ye="[object Int8Array]",Pe="[object Int16Array]",Me="[object Int32Array]",je="[object BigInt64Array]",ht="[object Float32Array]",At="[object Float64Array]";e.argumentsTag=g,e.arrayBufferTag=N,e.arrayTag=M,e.bigInt64ArrayTag=je,e.bigUint64ArrayTag=ve,e.booleanTag=p,e.dataViewTag=H,e.dateTag=c,e.errorTag=q,e.float32ArrayTag=ht,e.float64ArrayTag=At,e.functionTag=k,e.int16ArrayTag=Pe,e.int32ArrayTag=Me,e.int8ArrayTag=ye,e.mapTag=C,e.numberTag=a,e.objectTag=j,e.regexpTag=r,e.setTag=E,e.stringTag=i,e.symbolTag=y,e.uint16ArrayTag=ee,e.uint32ArrayTag=ie,e.uint8ArrayTag=W,e.uint8ClampedArrayTag=K})(s1)),s1}var l1={},uS;function M8(){return uS||(uS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}e.isTypedArray=r})(l1)),l1}var cS;function GT(){return cS||(cS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=E8(),i=HT(),a=qT(),p=$T(),g=M8();function y(M,k){return c(M,void 0,M,new Map,k)}function c(M,k,N,j=new Map,q=void 0){const H=q?.(M,k,N,j);if(H!==void 0)return H;if(p.isPrimitive(M))return M;if(j.has(M))return j.get(M);if(Array.isArray(M)){const W=new Array(M.length);j.set(M,W);for(let K=0;K<M.length;K++)W[K]=c(M[K],K,N,j,q);return Object.hasOwn(M,"index")&&(W.index=M.index),Object.hasOwn(M,"input")&&(W.input=M.input),W}if(M instanceof Date)return new Date(M.getTime());if(M instanceof RegExp){const W=new RegExp(M.source,M.flags);return W.lastIndex=M.lastIndex,W}if(M instanceof Map){const W=new Map;j.set(M,W);for(const[K,ee]of M)W.set(K,c(ee,K,N,j,q));return W}if(M instanceof Set){const W=new Set;j.set(M,W);for(const K of M)W.add(c(K,void 0,N,j,q));return W}if(typeof Buffer<"u"&&Buffer.isBuffer(M))return M.subarray();if(g.isTypedArray(M)){const W=new(Object.getPrototypeOf(M)).constructor(M.length);j.set(M,W);for(let K=0;K<M.length;K++)W[K]=c(M[K],K,N,j,q);return W}if(M instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&M instanceof SharedArrayBuffer)return M.slice(0);if(M instanceof DataView){const W=new DataView(M.buffer.slice(0),M.byteOffset,M.byteLength);return j.set(M,W),C(W,M,N,j,q),W}if(typeof File<"u"&&M instanceof File){const W=new File([M],M.name,{type:M.type});return j.set(M,W),C(W,M,N,j,q),W}if(M instanceof Blob){const W=new Blob([M],{type:M.type});return j.set(M,W),C(W,M,N,j,q),W}if(M instanceof Error){const W=new M.constructor;return j.set(M,W),W.message=M.message,W.name=M.name,W.stack=M.stack,W.cause=M.cause,C(W,M,N,j,q),W}if(typeof M=="object"&&E(M)){const W=Object.create(Object.getPrototypeOf(M));return j.set(M,W),C(W,M,N,j,q),W}return M}function C(M,k,N=M,j,q){const H=[...Object.keys(k),...r.getSymbols(k)];for(let W=0;W<H.length;W++){const K=H[W],ee=Object.getOwnPropertyDescriptor(M,K);(ee==null||ee.writable)&&(M[K]=c(k[K],K,N,j,q))}}function E(M){switch(i.getTag(M)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=y,e.cloneDeepWithImpl=c,e.copyProperties=C})(i1)),i1}var hS;function R8(){return hS||(hS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=GT();function i(a){return r.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=i})(n1)),n1}var fS;function D8(){return fS||(fS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=Nx(),i=R8();function a(p){return p=i.cloneDeep(p),g=>r.isMatch(g,p)}e.matches=a})(Y_)),Y_}var u1={},c1={},h1={},dS;function I8(){return dS||(dS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=GT(),i=qT();function a(p,g){return r.cloneDeepWith(p,(y,c,C,E)=>{const M=g?.(y,c,C,E);if(M!==void 0)return M;if(typeof p=="object")switch(Object.prototype.toString.call(p)){case i.numberTag:case i.stringTag:case i.booleanTag:{const k=new p.constructor(p?.valueOf());return r.copyProperties(k,p),k}case i.argumentsTag:{const k={};return r.copyProperties(k,p),k.length=p.length,k[Symbol.iterator]=p[Symbol.iterator],k}default:return}})}e.cloneDeepWith=a})(h1)),h1}var pS;function O8(){return pS||(pS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=I8();function i(a){return r.cloneDeepWith(a)}e.cloneDeep=i})(c1)),c1}var f1={},d1={},mS;function WT(){return mS||(mS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=/^(?:0|[1-9]\d*)$/;function i(a,p=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<p;case"symbol":return!1;case"string":return r.test(a)}}e.isIndex=i})(d1)),d1}var p1={},gS;function k8(){return gS||(gS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=HT();function i(a){return a!==null&&typeof a=="object"&&r.getTag(a)==="[object Arguments]"}e.isArguments=i})(p1)),p1}var yS;function L8(){return yS||(yS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=gT(),i=WT(),a=k8(),p=Mx();function g(y,c){let C;if(Array.isArray(c)?C=c:typeof c=="string"&&r.isDeepKey(c)&&y?.[c]==null?C=p.toPath(c):C=[c],C.length===0)return!1;let E=y;for(let M=0;M<C.length;M++){const k=C[M];if((E==null||!Object.hasOwn(E,k))&&!((Array.isArray(E)||a.isArguments(E))&&i.isIndex(k)&&k<E.length))return!1;E=E[k]}return!0}e.has=g})(f1)),f1}var vS;function z8(){return vS||(vS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=Nx(),i=yT(),a=O8(),p=Rx(),g=L8();function y(c,C){switch(typeof c){case"object":{Object.is(c?.valueOf(),-0)&&(c="-0");break}case"number":{c=i.toKey(c);break}}return C=a.cloneDeep(C),function(E){const M=p.get(E,c);return M===void 0?g.has(E,c):C===void 0?M===void 0:r.isMatch(M,C)}}e.matchesProperty=y})(u1)),u1}var _S;function N8(){return _S||(_S=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=FT(),i=C8(),a=D8(),p=z8();function g(y){if(y==null)return r.identity;switch(typeof y){case"function":return y;case"object":return Array.isArray(y)&&y.length===2?p.matchesProperty(y[0],y[1]):a.matches(y);case"string":case"symbol":case"number":return i.property(y)}}e.iteratee=g})(X_)),X_}var bS;function j8(){return bS||(bS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=w8(),i=FT(),a=A8(),p=N8();function g(y,c=i.identity){return a.isArrayLikeObject(y)?r.uniqBy(Array.from(y),p.iteratee(c)):[]}e.uniqBy=g})($_)),$_}var m1,xS;function B8(){return xS||(xS=1,m1=j8().uniqBy),m1}var F8=B8();const wS=au(F8);function U8(e,r,i){return r===!0?wS(e,i):typeof r=="function"?wS(e,r):e}var g1={exports:{}},y1={},v1={exports:{}},_1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SS;function $8(){if(SS)return _1;SS=1;var e=Qp();function r(k,N){return k===N&&(k!==0||1/k===1/N)||k!==k&&N!==N}var i=typeof Object.is=="function"?Object.is:r,a=e.useState,p=e.useEffect,g=e.useLayoutEffect,y=e.useDebugValue;function c(k,N){var j=N(),q=a({inst:{value:j,getSnapshot:N}}),H=q[0].inst,W=q[1];return g(function(){H.value=j,H.getSnapshot=N,C(H)&&W({inst:H})},[k,j,N]),p(function(){return C(H)&&W({inst:H}),k(function(){C(H)&&W({inst:H})})},[k]),y(j),j}function C(k){var N=k.getSnapshot;k=k.value;try{var j=N();return!i(k,j)}catch{return!0}}function E(k,N){return N()}var M=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?E:c;return _1.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:M,_1}var PS;function V8(){return PS||(PS=1,v1.exports=$8()),v1.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AS;function H8(){if(AS)return y1;AS=1;var e=Qp(),r=V8();function i(E,M){return E===M&&(E!==0||1/E===1/M)||E!==E&&M!==M}var a=typeof Object.is=="function"?Object.is:i,p=r.useSyncExternalStore,g=e.useRef,y=e.useEffect,c=e.useMemo,C=e.useDebugValue;return y1.useSyncExternalStoreWithSelector=function(E,M,k,N,j){var q=g(null);if(q.current===null){var H={hasValue:!1,value:null};q.current=H}else H=q.current;q=c(function(){function K(Pe){if(!ee){if(ee=!0,ie=Pe,Pe=N(Pe),j!==void 0&&H.hasValue){var Me=H.value;if(j(Me,Pe))return ve=Me}return ve=Pe}if(Me=ve,a(ie,Pe))return Me;var je=N(Pe);return j!==void 0&&j(Me,je)?(ie=Pe,Me):(ie=Pe,ve=je)}var ee=!1,ie,ve,ye=k===void 0?null:k;return[function(){return K(M())},ye===null?void 0:function(){return K(ye())}]},[M,k,N,j]);var W=p(E,q[0],q[1]);return y(function(){H.hasValue=!0,H.value=W},[W]),C(W),W},y1}var CS;function q8(){return CS||(CS=1,g1.exports=H8()),g1.exports}var G8=q8(),jx=X.createContext(null),W8=e=>e,Pa=()=>{var e=X.useContext(jx);return e?e.store.dispatch:W8},N0=()=>{},Z8=()=>N0,X8=(e,r)=>e===r;function pr(e){var r=X.useContext(jx);return G8.useSyncExternalStoreWithSelector(r?r.subscription.addNestedSub:Z8,r?r.store.getState:N0,r?r.store.getState:N0,r?e:N0,X8)}function K8(e,r=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(r)}function Y8(e,r=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(r)}function Q8(e,r="expected all items to be functions, instead received the following types: "){if(!e.every(i=>typeof i=="function")){const i=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${r}[${i}]`)}}var TS=e=>Array.isArray(e)?e:[e];function J8(e){const r=Array.isArray(e[0])?e[0]:e;return Q8(r,"createSelector expects all input-selectors to be functions, but received the following types: "),r}function eI(e,r){const i=[],{length:a}=e;for(let p=0;p<a;p++)i.push(e[p].apply(null,r));return i}var tI=class{constructor(e){this.value=e}deref(){return this.value}},rI=typeof WeakRef<"u"?WeakRef:tI,nI=0,ES=1;function g0(){return{s:nI,v:void 0,o:null,p:null}}function ZT(e,r={}){let i=g0();const{resultEqualityCheck:a}=r;let p,g=0;function y(){let c=i;const{length:C}=arguments;for(let k=0,N=C;k<N;k++){const j=arguments[k];if(typeof j=="function"||typeof j=="object"&&j!==null){let q=c.o;q===null&&(c.o=q=new WeakMap);const H=q.get(j);H===void 0?(c=g0(),q.set(j,c)):c=H}else{let q=c.p;q===null&&(c.p=q=new Map);const H=q.get(j);H===void 0?(c=g0(),q.set(j,c)):c=H}}const E=c;let M;if(c.s===ES)M=c.v;else if(M=e.apply(null,arguments),g++,a){const k=p?.deref?.()??p;k!=null&&a(k,M)&&(M=k,g!==0&&g--),p=typeof M=="object"&&M!==null||typeof M=="function"?new rI(M):M}return E.s=ES,E.v=M,M}return y.clearCache=()=>{i=g0(),y.resetResultsCount()},y.resultsCount=()=>g,y.resetResultsCount=()=>{g=0},y}function iI(e,...r){const i=typeof e=="function"?{memoize:e,memoizeOptions:r}:e,a=(...p)=>{let g=0,y=0,c,C={},E=p.pop();typeof E=="object"&&(C=E,E=p.pop()),K8(E,`createSelector expects an output function after the inputs, but received: [${typeof E}]`);const M={...i,...C},{memoize:k,memoizeOptions:N=[],argsMemoize:j=ZT,argsMemoizeOptions:q=[]}=M,H=TS(N),W=TS(q),K=J8(p),ee=k(function(){return g++,E.apply(null,arguments)},...H),ie=j(function(){y++;const ye=eI(K,arguments);return c=ee.apply(null,ye),c},...W);return Object.assign(ie,{resultFunc:E,memoizedResultFunc:ee,dependencies:K,dependencyRecomputations:()=>y,resetDependencyRecomputations:()=>{y=0},lastResult:()=>c,recomputations:()=>g,resetRecomputations:()=>{g=0},memoize:k,argsMemoize:j})};return Object.assign(a,{withTypes:()=>a}),a}var it=iI(ZT),aI=Object.assign((e,r=it)=>{Y8(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const i=Object.keys(e),a=i.map(g=>e[g]);return r(a,(...g)=>g.reduce((y,c,C)=>(y[i[C]]=c,y),{}))},{withTypes:()=>aI}),b1={},x1={},w1={},MS;function oI(){return MS||(MS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const i=(a,p,g)=>{if(a!==p){const y=r(a),c=r(p);if(y===c&&y===0){if(a<p)return g==="desc"?1:-1;if(a>p)return g==="desc"?-1:1}return g==="desc"?c-y:y-c}return 0};e.compareValues=i})(w1)),w1}var S1={},P1={},RS;function XT(){return RS||(RS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(i){return typeof i=="symbol"||i instanceof Symbol}e.isSymbol=r})(P1)),P1}var DS;function sI(){return DS||(DS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=XT(),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function p(g,y){return Array.isArray(g)?!1:typeof g=="number"||typeof g=="boolean"||g==null||r.isSymbol(g)?!0:typeof g=="string"&&(a.test(g)||!i.test(g))||y!=null&&Object.hasOwn(y,g)}e.isKey=p})(S1)),S1}var IS;function lI(){return IS||(IS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=oI(),i=sI(),a=Mx();function p(g,y,c,C){if(g==null)return[];c=C?void 0:c,Array.isArray(g)||(g=Object.values(g)),Array.isArray(y)||(y=y==null?[null]:[y]),y.length===0&&(y=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(j=>String(j));const E=(j,q)=>{let H=j;for(let W=0;W<q.length&&H!=null;++W)H=H[q[W]];return H},M=(j,q)=>q==null||j==null?q:typeof j=="object"&&"key"in j?Object.hasOwn(q,j.key)?q[j.key]:E(q,j.path):typeof j=="function"?j(q):Array.isArray(j)?E(q,j):typeof q=="object"?q[j]:q,k=y.map(j=>(Array.isArray(j)&&j.length===1&&(j=j[0]),j==null||typeof j=="function"||Array.isArray(j)||i.isKey(j)?j:{key:j,path:a.toPath(j)}));return g.map(j=>({original:j,criteria:k.map(q=>M(q,j))})).slice().sort((j,q)=>{for(let H=0;H<k.length;H++){const W=r.compareValues(j.criteria[H],q.criteria[H],c[H]);if(W!==0)return W}return 0}).map(j=>j.original)}e.orderBy=p})(x1)),x1}var A1={},OS;function uI(){return OS||(OS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(i,a=1){const p=[],g=Math.floor(a),y=(c,C)=>{for(let E=0;E<c.length;E++){const M=c[E];Array.isArray(M)&&C<g?y(M,C+1):p.push(M)}};return y(i,0),p}e.flatten=r})(A1)),A1}var C1={},kS;function KT(){return kS||(kS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=WT(),i=zx(),a=UT(),p=VT();function g(y,c,C){return a.isObject(C)&&(typeof c=="number"&&i.isArrayLike(C)&&r.isIndex(c)&&c<C.length||typeof c=="string"&&c in C)?p.eq(C[c],y):!1}e.isIterateeCall=g})(C1)),C1}var LS;function cI(){return LS||(LS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=lI(),i=uI(),a=KT();function p(g,...y){const c=y.length;return c>1&&a.isIterateeCall(g,y[0],y[1])?y=[]:c>2&&a.isIterateeCall(y[0],y[1],y[2])&&(y=[y[0]]),r.orderBy(g,i.flatten(y),["asc"])}e.sortBy=p})(b1)),b1}var T1,zS;function hI(){return zS||(zS=1,T1=cI().sortBy),T1}var fI=hI();const Nv=au(fI);var YT=e=>e.legend.settings,dI=e=>e.legend.size,pI=e=>e.legend.payload;it([pI,YT],(e,r)=>{var{itemSorter:i}=r,a=e.flat(1);return i?Nv(a,i):a});var y0=1;function mI(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[r,i]=X.useState({height:0,left:0,top:0,width:0}),a=X.useCallback(p=>{if(p!=null){var g=p.getBoundingClientRect(),y={height:g.height,left:g.left,top:g.top,width:g.width};(Math.abs(y.height-r.height)>y0||Math.abs(y.left-r.left)>y0||Math.abs(y.top-r.top)>y0||Math.abs(y.width-r.width)>y0)&&i({height:y.height,left:y.left,top:y.top,width:y.width})}},[r.width,r.height,r.top,r.left,...e]);return[r,a]}function $a(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var gI=typeof Symbol=="function"&&Symbol.observable||"@@observable",NS=gI,E1=()=>Math.random().toString(36).substring(7).split("").join("."),yI={INIT:`@@redux/INIT${E1()}`,REPLACE:`@@redux/REPLACE${E1()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${E1()}`},X0=yI;function Bx(e){if(typeof e!="object"||e===null)return!1;let r=e;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r||Object.getPrototypeOf(e)===null}function QT(e,r,i){if(typeof e!="function")throw new Error($a(2));if(typeof r=="function"&&typeof i=="function"||typeof i=="function"&&typeof arguments[3]=="function")throw new Error($a(0));if(typeof r=="function"&&typeof i>"u"&&(i=r,r=void 0),typeof i<"u"){if(typeof i!="function")throw new Error($a(1));return i(QT)(e,r)}let a=e,p=r,g=new Map,y=g,c=0,C=!1;function E(){y===g&&(y=new Map,g.forEach((W,K)=>{y.set(K,W)}))}function M(){if(C)throw new Error($a(3));return p}function k(W){if(typeof W!="function")throw new Error($a(4));if(C)throw new Error($a(5));let K=!0;E();const ee=c++;return y.set(ee,W),function(){if(K){if(C)throw new Error($a(6));K=!1,E(),y.delete(ee),g=null}}}function N(W){if(!Bx(W))throw new Error($a(7));if(typeof W.type>"u")throw new Error($a(8));if(typeof W.type!="string")throw new Error($a(17));if(C)throw new Error($a(9));try{C=!0,p=a(p,W)}finally{C=!1}return(g=y).forEach(ee=>{ee()}),W}function j(W){if(typeof W!="function")throw new Error($a(10));a=W,N({type:X0.REPLACE})}function q(){const W=k;return{subscribe(K){if(typeof K!="object"||K===null)throw new Error($a(11));function ee(){const ve=K;ve.next&&ve.next(M())}return ee(),{unsubscribe:W(ee)}},[NS](){return this}}}return N({type:X0.INIT}),{dispatch:N,subscribe:k,getState:M,replaceReducer:j,[NS]:q}}function vI(e){Object.keys(e).forEach(r=>{const i=e[r];if(typeof i(void 0,{type:X0.INIT})>"u")throw new Error($a(12));if(typeof i(void 0,{type:X0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error($a(13))})}function JT(e){const r=Object.keys(e),i={};for(let g=0;g<r.length;g++){const y=r[g];typeof e[y]=="function"&&(i[y]=e[y])}const a=Object.keys(i);let p;try{vI(i)}catch(g){p=g}return function(y={},c){if(p)throw p;let C=!1;const E={};for(let M=0;M<a.length;M++){const k=a[M],N=i[k],j=y[k],q=N(j,c);if(typeof q>"u")throw c&&c.type,new Error($a(14));E[k]=q,C=C||q!==j}return C=C||a.length!==Object.keys(y).length,C?E:y}}function K0(...e){return e.length===0?r=>r:e.length===1?e[0]:e.reduce((r,i)=>(...a)=>r(i(...a)))}function _I(...e){return r=>(i,a)=>{const p=r(i,a);let g=()=>{throw new Error($a(15))};const y={getState:p.getState,dispatch:(C,...E)=>g(C,...E)},c=e.map(C=>C(y));return g=K0(...c)(p.dispatch),{...p,dispatch:g}}}function e3(e){return Bx(e)&&"type"in e&&typeof e.type=="string"}var t3=Symbol.for("immer-nothing"),jS=Symbol.for("immer-draftable"),Ms=Symbol.for("immer-state");function eu(e,...r){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Vp=Object.getPrototypeOf;function kd(e){return!!e&&!!e[Ms]}function ih(e){return e?r3(e)||Array.isArray(e)||!!e[jS]||!!e.constructor?.[jS]||ey(e)||Bv(e):!1}var bI=Object.prototype.constructor.toString();function r3(e){if(!e||typeof e!="object")return!1;const r=Vp(e);if(r===null)return!0;const i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object?!0:typeof i=="function"&&Function.toString.call(i)===bI}function Y0(e,r){jv(e)===0?Reflect.ownKeys(e).forEach(i=>{r(i,e[i],e)}):e.forEach((i,a)=>r(a,i,e))}function jv(e){const r=e[Ms];return r?r.type_:Array.isArray(e)?1:ey(e)?2:Bv(e)?3:0}function Mb(e,r){return jv(e)===2?e.has(r):Object.prototype.hasOwnProperty.call(e,r)}function n3(e,r,i){const a=jv(e);a===2?e.set(r,i):a===3?e.add(i):e[r]=i}function xI(e,r){return e===r?e!==0||1/e===1/r:e!==e&&r!==r}function ey(e){return e instanceof Map}function Bv(e){return e instanceof Set}function Pd(e){return e.copy_||e.base_}function Rb(e,r){if(ey(e))return new Map(e);if(Bv(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const i=r3(e);if(r===!0||r==="class_only"&&!i){const a=Object.getOwnPropertyDescriptors(e);delete a[Ms];let p=Reflect.ownKeys(a);for(let g=0;g<p.length;g++){const y=p[g],c=a[y];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(a[y]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[y]})}return Object.create(Vp(e),a)}else{const a=Vp(e);if(a!==null&&i)return{...e};const p=Object.create(a);return Object.assign(p,e)}}function Fx(e,r=!1){return Fv(e)||kd(e)||!ih(e)||(jv(e)>1&&Object.defineProperties(e,{set:{value:v0},add:{value:v0},clear:{value:v0},delete:{value:v0}}),Object.freeze(e),r&&Object.values(e).forEach(i=>Fx(i,!0))),e}function v0(){eu(2)}function Fv(e){return Object.isFrozen(e)}var wI={};function Ld(e){const r=wI[e];return r||eu(0,e),r}var Bg;function i3(){return Bg}function SI(e,r){return{drafts_:[],parent_:e,immer_:r,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function BS(e,r){r&&(Ld("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=r)}function Db(e){Ib(e),e.drafts_.forEach(PI),e.drafts_=null}function Ib(e){e===Bg&&(Bg=e.parent_)}function FS(e){return Bg=SI(Bg,e)}function PI(e){const r=e[Ms];r.type_===0||r.type_===1?r.revoke_():r.revoked_=!0}function US(e,r){r.unfinalizedDrafts_=r.drafts_.length;const i=r.drafts_[0];return e!==void 0&&e!==i?(i[Ms].modified_&&(Db(r),eu(4)),ih(e)&&(e=Q0(r,e),r.parent_||J0(r,e)),r.patches_&&Ld("Patches").generateReplacementPatches_(i[Ms].base_,e,r.patches_,r.inversePatches_)):e=Q0(r,i,[]),Db(r),r.patches_&&r.patchListener_(r.patches_,r.inversePatches_),e!==t3?e:void 0}function Q0(e,r,i){if(Fv(r))return r;const a=r[Ms];if(!a)return Y0(r,(p,g)=>$S(e,a,r,p,g,i)),r;if(a.scope_!==e)return r;if(!a.modified_)return J0(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const p=a.copy_;let g=p,y=!1;a.type_===3&&(g=new Set(p),p.clear(),y=!0),Y0(g,(c,C)=>$S(e,a,p,c,C,i,y)),J0(e,p,!1),i&&e.patches_&&Ld("Patches").generatePatches_(a,i,e.patches_,e.inversePatches_)}return a.copy_}function $S(e,r,i,a,p,g,y){if(kd(p)){const c=g&&r&&r.type_!==3&&!Mb(r.assigned_,a)?g.concat(a):void 0,C=Q0(e,p,c);if(n3(i,a,C),kd(C))e.canAutoFreeze_=!1;else return}else y&&i.add(p);if(ih(p)&&!Fv(p)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Q0(e,p),(!r||!r.scope_.parent_)&&typeof a!="symbol"&&(ey(i)?i.has(a):Object.prototype.propertyIsEnumerable.call(i,a))&&J0(e,p)}}function J0(e,r,i=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Fx(r,i)}function AI(e,r){const i=Array.isArray(e),a={type_:i?1:0,scope_:r?r.scope_:i3(),modified_:!1,finalized_:!1,assigned_:{},parent_:r,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let p=a,g=Ux;i&&(p=[a],g=Fg);const{revoke:y,proxy:c}=Proxy.revocable(p,g);return a.draft_=c,a.revoke_=y,c}var Ux={get(e,r){if(r===Ms)return e;const i=Pd(e);if(!Mb(i,r))return CI(e,i,r);const a=i[r];return e.finalized_||!ih(a)?a:a===M1(e.base_,r)?(R1(e),e.copy_[r]=kb(a,e)):a},has(e,r){return r in Pd(e)},ownKeys(e){return Reflect.ownKeys(Pd(e))},set(e,r,i){const a=a3(Pd(e),r);if(a?.set)return a.set.call(e.draft_,i),!0;if(!e.modified_){const p=M1(Pd(e),r),g=p?.[Ms];if(g&&g.base_===i)return e.copy_[r]=i,e.assigned_[r]=!1,!0;if(xI(i,p)&&(i!==void 0||Mb(e.base_,r)))return!0;R1(e),Ob(e)}return e.copy_[r]===i&&(i!==void 0||r in e.copy_)||Number.isNaN(i)&&Number.isNaN(e.copy_[r])||(e.copy_[r]=i,e.assigned_[r]=!0),!0},deleteProperty(e,r){return M1(e.base_,r)!==void 0||r in e.base_?(e.assigned_[r]=!1,R1(e),Ob(e)):delete e.assigned_[r],e.copy_&&delete e.copy_[r],!0},getOwnPropertyDescriptor(e,r){const i=Pd(e),a=Reflect.getOwnPropertyDescriptor(i,r);return a&&{writable:!0,configurable:e.type_!==1||r!=="length",enumerable:a.enumerable,value:i[r]}},defineProperty(){eu(11)},getPrototypeOf(e){return Vp(e.base_)},setPrototypeOf(){eu(12)}},Fg={};Y0(Ux,(e,r)=>{Fg[e]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}});Fg.deleteProperty=function(e,r){return Fg.set.call(this,e,r,void 0)};Fg.set=function(e,r,i){return Ux.set.call(this,e[0],r,i,e[0])};function M1(e,r){const i=e[Ms];return(i?Pd(i):e)[r]}function CI(e,r,i){const a=a3(r,i);return a?"value"in a?a.value:a.get?.call(e.draft_):void 0}function a3(e,r){if(!(r in e))return;let i=Vp(e);for(;i;){const a=Object.getOwnPropertyDescriptor(i,r);if(a)return a;i=Vp(i)}}function Ob(e){e.modified_||(e.modified_=!0,e.parent_&&Ob(e.parent_))}function R1(e){e.copy_||(e.copy_=Rb(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var TI=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(r,i,a)=>{if(typeof r=="function"&&typeof i!="function"){const g=i;i=r;const y=this;return function(C=g,...E){return y.produce(C,M=>i.call(this,M,...E))}}typeof i!="function"&&eu(6),a!==void 0&&typeof a!="function"&&eu(7);let p;if(ih(r)){const g=FS(this),y=kb(r,void 0);let c=!0;try{p=i(y),c=!1}finally{c?Db(g):Ib(g)}return BS(g,a),US(p,g)}else if(!r||typeof r!="object"){if(p=i(r),p===void 0&&(p=r),p===t3&&(p=void 0),this.autoFreeze_&&Fx(p,!0),a){const g=[],y=[];Ld("Patches").generateReplacementPatches_(r,p,g,y),a(g,y)}return p}else eu(1,r)},this.produceWithPatches=(r,i)=>{if(typeof r=="function")return(y,...c)=>this.produceWithPatches(y,C=>r(C,...c));let a,p;return[this.produce(r,i,(y,c)=>{a=y,p=c}),a,p]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ih(e)||eu(8),kd(e)&&(e=rh(e));const r=FS(this),i=kb(e,void 0);return i[Ms].isManual_=!0,Ib(r),i}finishDraft(e,r){const i=e&&e[Ms];(!i||!i.isManual_)&&eu(9);const{scope_:a}=i;return BS(a,r),US(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,r){let i;for(i=r.length-1;i>=0;i--){const p=r[i];if(p.path.length===0&&p.op==="replace"){e=p.value;break}}i>-1&&(r=r.slice(i+1));const a=Ld("Patches").applyPatches_;return kd(e)?a(e,r):this.produce(e,p=>a(p,r))}};function kb(e,r){const i=ey(e)?Ld("MapSet").proxyMap_(e,r):Bv(e)?Ld("MapSet").proxySet_(e,r):AI(e,r);return(r?r.scope_:i3()).drafts_.push(i),i}function rh(e){return kd(e)||eu(10,e),o3(e)}function o3(e){if(!ih(e)||Fv(e))return e;const r=e[Ms];let i;if(r){if(!r.modified_)return r.base_;r.finalized_=!0,i=Rb(e,r.scope_.immer_.useStrictShallowCopy_)}else i=Rb(e,!0);return Y0(i,(a,p)=>{n3(i,a,o3(p))}),r&&(r.finalized_=!1),i}var EI=new TI,s3=EI.produce;function l3(e){return({dispatch:i,getState:a})=>p=>g=>typeof g=="function"?g(i,a,e):p(g)}var MI=l3(),RI=l3,DI=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?K0:K0.apply(null,arguments)};function sl(e,r){function i(...a){if(r){let p=r(...a);if(!p)throw new Error(Es(0));return{type:e,payload:p.payload,..."meta"in p&&{meta:p.meta},..."error"in p&&{error:p.error}}}return{type:e,payload:a[0]}}return i.toString=()=>`${e}`,i.type=e,i.match=a=>e3(a)&&a.type===e,i}var u3=class Mg extends Array{constructor(...r){super(...r),Object.setPrototypeOf(this,Mg.prototype)}static get[Symbol.species](){return Mg}concat(...r){return super.concat.apply(this,r)}prepend(...r){return r.length===1&&Array.isArray(r[0])?new Mg(...r[0].concat(this)):new Mg(...r.concat(this))}};function VS(e){return ih(e)?s3(e,()=>{}):e}function _0(e,r,i){return e.has(r)?e.get(r):e.set(r,i(r)).get(r)}function II(e){return typeof e=="boolean"}var OI=()=>function(r){const{thunk:i=!0,immutableCheck:a=!0,serializableCheck:p=!0,actionCreatorCheck:g=!0}=r??{};let y=new u3;return i&&(II(i)?y.push(MI):y.push(RI(i.extraArgument))),y},kI="RTK_autoBatch",HS=e=>r=>{setTimeout(r,e)},LI=(e={type:"raf"})=>r=>(...i)=>{const a=r(...i);let p=!0,g=!1,y=!1;const c=new Set,C=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:HS(10):e.type==="callback"?e.queueNotification:HS(e.timeout),E=()=>{y=!1,g&&(g=!1,c.forEach(M=>M()))};return Object.assign({},a,{subscribe(M){const k=()=>p&&M(),N=a.subscribe(k);return c.add(M),()=>{N(),c.delete(M)}},dispatch(M){try{return p=!M?.meta?.[kI],g=!p,g&&(y||(y=!0,C(E))),a.dispatch(M)}finally{p=!0}}})},zI=e=>function(i){const{autoBatch:a=!0}=i??{};let p=new u3(e);return a&&p.push(LI(typeof a=="object"?a:void 0)),p};function NI(e){const r=OI(),{reducer:i=void 0,middleware:a,devTools:p=!0,preloadedState:g=void 0,enhancers:y=void 0}=e||{};let c;if(typeof i=="function")c=i;else if(Bx(i))c=JT(i);else throw new Error(Es(1));let C;typeof a=="function"?C=a(r):C=r();let E=K0;p&&(E=DI({trace:!1,...typeof p=="object"&&p}));const M=_I(...C),k=zI(M);let N=typeof y=="function"?y(k):k();const j=E(...N);return QT(c,g,j)}function c3(e){const r={},i=[];let a;const p={addCase(g,y){const c=typeof g=="string"?g:g.type;if(!c)throw new Error(Es(28));if(c in r)throw new Error(Es(29));return r[c]=y,p},addAsyncThunk(g,y){return y.pending&&(r[g.pending.type]=y.pending),y.rejected&&(r[g.rejected.type]=y.rejected),y.fulfilled&&(r[g.fulfilled.type]=y.fulfilled),y.settled&&i.push({matcher:g.settled,reducer:y.settled}),p},addMatcher(g,y){return i.push({matcher:g,reducer:y}),p},addDefaultCase(g){return a=g,p}};return e(p),[r,i,a]}function jI(e){return typeof e=="function"}function BI(e,r){let[i,a,p]=c3(r),g;if(jI(e))g=()=>VS(e());else{const c=VS(e);g=()=>c}function y(c=g(),C){let E=[i[C.type],...a.filter(({matcher:M})=>M(C)).map(({reducer:M})=>M)];return E.filter(M=>!!M).length===0&&(E=[p]),E.reduce((M,k)=>{if(k)if(kd(M)){const j=k(M,C);return j===void 0?M:j}else{if(ih(M))return s3(M,N=>k(N,C));{const N=k(M,C);if(N===void 0){if(M===null)return M;throw Error("A case reducer on a non-draftable value must not return undefined")}return N}}return M},c)}return y.getInitialState=g,y}var FI="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",UI=(e=21)=>{let r="",i=e;for(;i--;)r+=FI[Math.random()*64|0];return r},$I=Symbol.for("rtk-slice-createasyncthunk");function VI(e,r){return`${e}/${r}`}function HI({creators:e}={}){const r=e?.asyncThunk?.[$I];return function(a){const{name:p,reducerPath:g=p}=a;if(!p)throw new Error(Es(11));const y=(typeof a.reducers=="function"?a.reducers(GI()):a.reducers)||{},c=Object.keys(y),C={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},E={addCase(ie,ve){const ye=typeof ie=="string"?ie:ie.type;if(!ye)throw new Error(Es(12));if(ye in C.sliceCaseReducersByType)throw new Error(Es(13));return C.sliceCaseReducersByType[ye]=ve,E},addMatcher(ie,ve){return C.sliceMatchers.push({matcher:ie,reducer:ve}),E},exposeAction(ie,ve){return C.actionCreators[ie]=ve,E},exposeCaseReducer(ie,ve){return C.sliceCaseReducersByName[ie]=ve,E}};c.forEach(ie=>{const ve=y[ie],ye={reducerName:ie,type:VI(p,ie),createNotation:typeof a.reducers=="function"};ZI(ve)?KI(ye,ve,E,r):WI(ye,ve,E)});function M(){const[ie={},ve=[],ye=void 0]=typeof a.extraReducers=="function"?c3(a.extraReducers):[a.extraReducers],Pe={...ie,...C.sliceCaseReducersByType};return BI(a.initialState,Me=>{for(let je in Pe)Me.addCase(je,Pe[je]);for(let je of C.sliceMatchers)Me.addMatcher(je.matcher,je.reducer);for(let je of ve)Me.addMatcher(je.matcher,je.reducer);ye&&Me.addDefaultCase(ye)})}const k=ie=>ie,N=new Map,j=new WeakMap;let q;function H(ie,ve){return q||(q=M()),q(ie,ve)}function W(){return q||(q=M()),q.getInitialState()}function K(ie,ve=!1){function ye(Me){let je=Me[ie];return typeof je>"u"&&ve&&(je=_0(j,ye,W)),je}function Pe(Me=k){const je=_0(N,ve,()=>new WeakMap);return _0(je,Me,()=>{const ht={};for(const[At,ot]of Object.entries(a.selectors??{}))ht[At]=qI(ot,Me,()=>_0(j,Me,W),ve);return ht})}return{reducerPath:ie,getSelectors:Pe,get selectors(){return Pe(ye)},selectSlice:ye}}const ee={name:p,reducer:H,actions:C.actionCreators,caseReducers:C.sliceCaseReducersByName,getInitialState:W,...K(g),injectInto(ie,{reducerPath:ve,...ye}={}){const Pe=ve??g;return ie.inject({reducerPath:Pe,reducer:H},ye),{...ee,...K(Pe,!0)}}};return ee}}function qI(e,r,i,a){function p(g,...y){let c=r(g);return typeof c>"u"&&a&&(c=i()),e(c,...y)}return p.unwrapped=e,p}var Ds=HI();function GI(){function e(r,i){return{_reducerDefinitionType:"asyncThunk",payloadCreator:r,...i}}return e.withTypes=()=>e,{reducer(r){return Object.assign({[r.name](...i){return r(...i)}}[r.name],{_reducerDefinitionType:"reducer"})},preparedReducer(r,i){return{_reducerDefinitionType:"reducerWithPrepare",prepare:r,reducer:i}},asyncThunk:e}}function WI({type:e,reducerName:r,createNotation:i},a,p){let g,y;if("reducer"in a){if(i&&!XI(a))throw new Error(Es(17));g=a.reducer,y=a.prepare}else g=a;p.addCase(e,g).exposeCaseReducer(r,g).exposeAction(r,y?sl(e,y):sl(e))}function ZI(e){return e._reducerDefinitionType==="asyncThunk"}function XI(e){return e._reducerDefinitionType==="reducerWithPrepare"}function KI({type:e,reducerName:r},i,a,p){if(!p)throw new Error(Es(18));const{payloadCreator:g,fulfilled:y,pending:c,rejected:C,settled:E,options:M}=i,k=p(e,g,M);a.exposeAction(r,k),y&&a.addCase(k.fulfilled,y),c&&a.addCase(k.pending,c),C&&a.addCase(k.rejected,C),E&&a.addMatcher(k.settled,E),a.exposeCaseReducer(r,{fulfilled:y||b0,pending:c||b0,rejected:C||b0,settled:E||b0})}function b0(){}var YI="task",h3="listener",f3="completed",$x="cancelled",QI=`task-${$x}`,JI=`task-${f3}`,Lb=`${h3}-${$x}`,eO=`${h3}-${f3}`,Uv=class{constructor(e){this.code=e,this.message=`${YI} ${$x} (reason: ${e})`}name="TaskAbortError";message},Vx=(e,r)=>{if(typeof e!="function")throw new TypeError(Es(32))},ev=()=>{},d3=(e,r=ev)=>(e.catch(r),e),p3=(e,r)=>(e.addEventListener("abort",r,{once:!0}),()=>e.removeEventListener("abort",r)),Md=(e,r)=>{const i=e.signal;i.aborted||("reason"in i||Object.defineProperty(i,"reason",{enumerable:!0,value:r,configurable:!0,writable:!0}),e.abort(r))},Rd=e=>{if(e.aborted){const{reason:r}=e;throw new Uv(r)}};function m3(e,r){let i=ev;return new Promise((a,p)=>{const g=()=>p(new Uv(e.reason));if(e.aborted){g();return}i=p3(e,g),r.finally(()=>i()).then(a,p)}).finally(()=>{i=ev})}var tO=async(e,r)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(i){return{status:i instanceof Uv?"cancelled":"rejected",error:i}}finally{r?.()}},tv=e=>r=>d3(m3(e,r).then(i=>(Rd(e),i))),g3=e=>{const r=tv(e);return i=>r(new Promise(a=>setTimeout(a,i)))},{assign:Np}=Object,qS={},$v="listenerMiddleware",rO=(e,r)=>{const i=a=>p3(e,()=>Md(a,e.reason));return(a,p)=>{Vx(a);const g=new AbortController;i(g);const y=tO(async()=>{Rd(e),Rd(g.signal);const c=await a({pause:tv(g.signal),delay:g3(g.signal),signal:g.signal});return Rd(g.signal),c},()=>Md(g,JI));return p?.autoJoin&&r.push(y.catch(ev)),{result:tv(e)(y),cancel(){Md(g,QI)}}}},nO=(e,r)=>{const i=async(a,p)=>{Rd(r);let g=()=>{};const c=[new Promise((C,E)=>{let M=e({predicate:a,effect:(k,N)=>{N.unsubscribe(),C([k,N.getState(),N.getOriginalState()])}});g=()=>{M(),E()}})];p!=null&&c.push(new Promise(C=>setTimeout(C,p,null)));try{const C=await m3(r,Promise.race(c));return Rd(r),C}finally{g()}};return(a,p)=>d3(i(a,p))},y3=e=>{let{type:r,actionCreator:i,matcher:a,predicate:p,effect:g}=e;if(r)p=sl(r).match;else if(i)r=i.type,p=i.match;else if(a)p=a;else if(!p)throw new Error(Es(21));return Vx(g),{predicate:p,type:r,effect:g}},v3=Np(e=>{const{type:r,predicate:i,effect:a}=y3(e);return{id:UI(),effect:a,type:r,predicate:i,pending:new Set,unsubscribe:()=>{throw new Error(Es(22))}}},{withTypes:()=>v3}),GS=(e,r)=>{const{type:i,effect:a,predicate:p}=y3(r);return Array.from(e.values()).find(g=>(typeof i=="string"?g.type===i:g.predicate===p)&&g.effect===a)},zb=e=>{e.pending.forEach(r=>{Md(r,Lb)})},iO=e=>()=>{e.forEach(zb),e.clear()},WS=(e,r,i)=>{try{e(r,i)}catch(a){setTimeout(()=>{throw a},0)}},_3=Np(sl(`${$v}/add`),{withTypes:()=>_3}),aO=sl(`${$v}/removeAll`),b3=Np(sl(`${$v}/remove`),{withTypes:()=>b3}),oO=(...e)=>{console.error(`${$v}/error`,...e)},ty=(e={})=>{const r=new Map,{extra:i,onError:a=oO}=e;Vx(a);const p=M=>(M.unsubscribe=()=>r.delete(M.id),r.set(M.id,M),k=>{M.unsubscribe(),k?.cancelActive&&zb(M)}),g=M=>{const k=GS(r,M)??v3(M);return p(k)};Np(g,{withTypes:()=>g});const y=M=>{const k=GS(r,M);return k&&(k.unsubscribe(),M.cancelActive&&zb(k)),!!k};Np(y,{withTypes:()=>y});const c=async(M,k,N,j)=>{const q=new AbortController,H=nO(g,q.signal),W=[];try{M.pending.add(q),await Promise.resolve(M.effect(k,Np({},N,{getOriginalState:j,condition:(K,ee)=>H(K,ee).then(Boolean),take:H,delay:g3(q.signal),pause:tv(q.signal),extra:i,signal:q.signal,fork:rO(q.signal,W),unsubscribe:M.unsubscribe,subscribe:()=>{r.set(M.id,M)},cancelActiveListeners:()=>{M.pending.forEach((K,ee,ie)=>{K!==q&&(Md(K,Lb),ie.delete(K))})},cancel:()=>{Md(q,Lb),M.pending.delete(q)},throwIfCancelled:()=>{Rd(q.signal)}})))}catch(K){K instanceof Uv||WS(a,K,{raisedBy:"effect"})}finally{await Promise.all(W),Md(q,eO),M.pending.delete(q)}},C=iO(r);return{middleware:M=>k=>N=>{if(!e3(N))return k(N);if(_3.match(N))return g(N.payload);if(aO.match(N)){C();return}if(b3.match(N))return y(N.payload);let j=M.getState();const q=()=>{if(j===qS)throw new Error(Es(23));return j};let H;try{if(H=k(N),r.size>0){const W=M.getState(),K=Array.from(r.values());for(const ee of K){let ie=!1;try{ie=ee.predicate(N,W,j)}catch(ve){ie=!1,WS(a,ve,{raisedBy:"predicate"})}ie&&c(ee,N,M,q)}}}finally{j=qS}return H},startListening:g,stopListening:y,clearListeners:C}};function Es(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var sO={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},x3=Ds({name:"chartLayout",initialState:sO,reducers:{setLayout(e,r){e.layoutType=r.payload},setChartSize(e,r){e.width=r.payload.width,e.height=r.payload.height},setMargin(e,r){var i,a,p,g;e.margin.top=(i=r.payload.top)!==null&&i!==void 0?i:0,e.margin.right=(a=r.payload.right)!==null&&a!==void 0?a:0,e.margin.bottom=(p=r.payload.bottom)!==null&&p!==void 0?p:0,e.margin.left=(g=r.payload.left)!==null&&g!==void 0?g:0},setScale(e,r){e.scale=r.payload}}}),{setMargin:lO,setLayout:uO,setChartSize:cO,setScale:hO}=x3.actions,fO=x3.reducer;function ZS(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function XS(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?ZS(Object(i),!0).forEach(function(a){dO(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ZS(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function dO(e,r,i){return(r=pO(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function pO(e){var r=mO(e,"string");return typeof r=="symbol"?r:r+""}function mO(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var rv=Math.PI/180,gO=e=>e*180/Math.PI,Ha=(e,r,i,a)=>({x:e+Math.cos(-rv*a)*i,y:r+Math.sin(-rv*a)*i}),yO=function(r,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(r-(a.left||0)-(a.right||0)),Math.abs(i-(a.top||0)-(a.bottom||0)))/2},vO=(e,r)=>{var{x:i,y:a}=e,{x:p,y:g}=r;return Math.sqrt((i-p)**2+(a-g)**2)},_O=(e,r)=>{var{x:i,y:a}=e,{cx:p,cy:g}=r,y=vO({x:i,y:a},{x:p,y:g});if(y<=0)return{radius:y,angle:0};var c=(i-p)/y,C=Math.acos(c);return a>g&&(C=2*Math.PI-C),{radius:y,angle:gO(C),angleInRadian:C}},bO=e=>{var{startAngle:r,endAngle:i}=e,a=Math.floor(r/360),p=Math.floor(i/360),g=Math.min(a,p);return{startAngle:r-g*360,endAngle:i-g*360}},xO=(e,r)=>{var{startAngle:i,endAngle:a}=r,p=Math.floor(i/360),g=Math.floor(a/360),y=Math.min(p,g);return e+y*360},wO=(e,r)=>{var{x:i,y:a}=e,{radius:p,angle:g}=_O({x:i,y:a},r),{innerRadius:y,outerRadius:c}=r;if(p<y||p>c||p===0)return null;var{startAngle:C,endAngle:E}=bO(r),M=g,k;if(C<=E){for(;M>E;)M-=360;for(;M<C;)M+=360;k=M>=C&&M<=E}else{for(;M>C;)M-=360;for(;M<E;)M+=360;k=M>=E&&M<=C}return k?XS(XS({},r),{},{radius:p,angle:xO(M,r)}):null};function w3(e,r,i){return Array.isArray(e)&&e&&r+i!==0?e.slice(r,i+1):e}function KS(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function il(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?KS(Object(i),!0).forEach(function(a){SO(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):KS(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function SO(e,r,i){return(r=PO(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function PO(e){var r=AO(e,"string");return typeof r=="symbol"?r:r+""}function AO(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Co(e,r,i){return Sa(e)||Sa(r)?i:ic(r)?Up(e,r,i):typeof r=="function"?r(e):i}var CO=(e,r,i,a,p)=>{var g,y=-1,c=(g=r?.length)!==null&&g!==void 0?g:0;if(c<=1||e==null)return 0;if(a==="angleAxis"&&p!=null&&Math.abs(Math.abs(p[1]-p[0])-360)<=1e-6)for(var C=0;C<c;C++){var E=C>0?i[C-1].coordinate:i[c-1].coordinate,M=i[C].coordinate,k=C>=c-1?i[0].coordinate:i[C+1].coordinate,N=void 0;if(Ts(M-E)!==Ts(k-M)){var j=[];if(Ts(k-M)===Ts(p[1]-p[0])){N=k;var q=M+p[1]-p[0];j[0]=Math.min(q,(q+E)/2),j[1]=Math.max(q,(q+E)/2)}else{N=E;var H=k+p[1]-p[0];j[0]=Math.min(M,(H+M)/2),j[1]=Math.max(M,(H+M)/2)}var W=[Math.min(M,(N+M)/2),Math.max(M,(N+M)/2)];if(e>W[0]&&e<=W[1]||e>=j[0]&&e<=j[1]){({index:y}=i[C]);break}}else{var K=Math.min(E,k),ee=Math.max(E,k);if(e>(K+M)/2&&e<=(ee+M)/2){({index:y}=i[C]);break}}}else if(r){for(var ie=0;ie<c;ie++)if(ie===0&&e<=(r[ie].coordinate+r[ie+1].coordinate)/2||ie>0&&ie<c-1&&e>(r[ie].coordinate+r[ie-1].coordinate)/2&&e<=(r[ie].coordinate+r[ie+1].coordinate)/2||ie===c-1&&e>(r[ie].coordinate+r[ie-1].coordinate)/2){({index:y}=r[ie]);break}}return y},TO=(e,r,i)=>{if(r&&i){var{width:a,height:p}=i,{align:g,verticalAlign:y,layout:c}=r;if((c==="vertical"||c==="horizontal"&&y==="middle")&&g!=="center"&&Pr(e[g]))return il(il({},e),{},{[g]:e[g]+(a||0)});if((c==="horizontal"||c==="vertical"&&g==="center")&&y!=="middle"&&Pr(e[y]))return il(il({},e),{},{[y]:e[y]+(p||0)})}return e},Bd=(e,r)=>e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis",YS=1e-4,EO=e=>{var r=e.domain();if(!(!r||r.length<=2)){var i=r.length,a=e.range(),p=Math.min(a[0],a[1])-YS,g=Math.max(a[0],a[1])+YS,y=e(r[0]),c=e(r[i-1]);(y<p||y>g||c<p||c>g)&&e.domain([r[0],r[i-1]])}},MO=(e,r)=>{if(!r||r.length!==2||!Pr(r[0])||!Pr(r[1]))return e;var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),p=[e[0],e[1]];return(!Pr(e[0])||e[0]<i)&&(p[0]=i),(!Pr(e[1])||e[1]>a)&&(p[1]=a),p[0]>a&&(p[0]=a),p[1]<i&&(p[1]=i),p},RO=e=>{var r=e.length;if(!(r<=0))for(var i=0,a=e[0].length;i<a;++i)for(var p=0,g=0,y=0;y<r;++y){var c=ol(e[y][i][1])?e[y][i][0]:e[y][i][1];c>=0?(e[y][i][0]=p,e[y][i][1]=p+c,p=e[y][i][1]):(e[y][i][0]=g,e[y][i][1]=g+c,g=e[y][i][1])}},DO=e=>{var r=e.length;if(!(r<=0))for(var i=0,a=e[0].length;i<a;++i)for(var p=0,g=0;g<r;++g){var y=ol(e[g][i][1])?e[g][i][0]:e[g][i][1];y>=0?(e[g][i][0]=p,e[g][i][1]=p+y,p=e[g][i][1]):(e[g][i][0]=0,e[g][i][1]=0)}},IO={sign:RO,expand:u8,none:$p,silhouette:c8,wiggle:h8,positive:DO},OO=(e,r,i)=>{var a=IO[i],p=l8().keys(r).value((g,y)=>+Co(g,y,0)).order(Tb).offset(a);return p(e)};function kO(e){return e==null?void 0:String(e)}var QS=e=>{var{axis:r,ticks:i,offset:a,bandSize:p,entry:g,index:y}=e;if(r.type==="category")return i[y]?i[y].coordinate+a:null;var c=Co(g,r.dataKey,r.scale.domain()[y]);return Sa(c)?null:r.scale(c)-p/2+a},LO=e=>{var{numericAxis:r}=e,i=r.scale.domain();if(r.type==="number"){var a=Math.min(i[0],i[1]),p=Math.max(i[0],i[1]);return a<=0&&p>=0?0:p<0?p:a}return i[0]},zO=e=>{var r=e.flat(2).filter(Pr);return[Math.min(...r),Math.max(...r)]},NO=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],jO=(e,r,i)=>{if(e!=null)return NO(Object.keys(e).reduce((a,p)=>{var g=e[p],{stackedData:y}=g,c=y.reduce((C,E)=>{var M=w3(E,r,i),k=zO(M);return[Math.min(C[0],k[0]),Math.max(C[1],k[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]))},JS=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,eP=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Hx=(e,r,i)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!i||a>0)return a}if(e&&r&&r.length>=2){for(var p=Nv(r,M=>M.coordinate),g=1/0,y=1,c=p.length;y<c;y++){var C=p[y],E=p[y-1];g=Math.min((C.coordinate||0)-(E.coordinate||0),g)}return g===1/0?0:g}return i?void 0:0};function tP(e){var{tooltipEntrySettings:r,dataKey:i,payload:a,value:p,name:g}=e;return il(il({},r),{},{dataKey:i,payload:a,value:p,name:g})}function S3(e,r){if(e)return String(e);if(typeof r=="string")return r}function BO(e,r,i,a,p){if(i==="horizontal"||i==="vertical"){var g=e>=p.left&&e<=p.left+p.width&&r>=p.top&&r<=p.top+p.height;return g?{x:e,y:r}:null}return a?wO({x:e,y:r},a):null}var FO=(e,r,i,a)=>{var p=r.find(E=>E&&E.index===i);if(p){if(e==="horizontal")return{x:p.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:p.coordinate};if(e==="centric"){var g=p.coordinate,{radius:y}=a;return il(il(il({},a),Ha(a.cx,a.cy,y,g)),{},{angle:g,radius:y})}var c=p.coordinate,{angle:C}=a;return il(il(il({},a),Ha(a.cx,a.cy,c,C)),{},{angle:C,radius:c})}return{x:0,y:0}},UO=(e,r)=>r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius,lh=e=>e.layout.width,uh=e=>e.layout.height,$O=e=>e.layout.scale,P3=e=>e.layout.margin,Vv=it(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Hv=it(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),VO="data-recharts-item-index",HO="data-recharts-item-data-key",ry=60;function rP(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function x0(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?rP(Object(i),!0).forEach(function(a){qO(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):rP(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function qO(e,r,i){return(r=GO(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function GO(e){var r=WO(e,"string");return typeof r=="symbol"?r:r+""}function WO(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var ZO=e=>e.brush.height;function XO(e){var r=Hv(e);return r.reduce((i,a)=>{if(a.orientation==="left"&&!a.mirror&&!a.hide){var p=typeof a.width=="number"?a.width:ry;return i+p}return i},0)}function KO(e){var r=Hv(e);return r.reduce((i,a)=>{if(a.orientation==="right"&&!a.mirror&&!a.hide){var p=typeof a.width=="number"?a.width:ry;return i+p}return i},0)}function YO(e){var r=Vv(e);return r.reduce((i,a)=>a.orientation==="top"&&!a.mirror&&!a.hide?i+a.height:i,0)}function QO(e){var r=Vv(e);return r.reduce((i,a)=>a.orientation==="bottom"&&!a.mirror&&!a.hide?i+a.height:i,0)}var Aa=it([lh,uh,P3,ZO,XO,KO,YO,QO,YT,dI],(e,r,i,a,p,g,y,c,C,E)=>{var M={left:(i.left||0)+p,right:(i.right||0)+g},k={top:(i.top||0)+y,bottom:(i.bottom||0)+c},N=x0(x0({},k),M),j=N.bottom;N.bottom+=a,N=TO(N,C,E);var q=e-N.left-N.right,H=r-N.top-N.bottom;return x0(x0({brushBottom:j},N),{},{width:Math.max(q,0),height:Math.max(H,0)})}),JO=it(Aa,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),qx=it(lh,uh,(e,r)=>({x:0,y:0,width:e,height:r})),ek=X.createContext(null),lu=()=>X.useContext(ek)!=null,qv=e=>e.brush,Gv=it([qv,Aa,P3],(e,r,i)=>({height:e.height,x:Pr(e.x)?e.x:r.left,y:Pr(e.y)?e.y:r.top+r.height+r.brushBottom-(i?.bottom||0),width:Pr(e.width)?e.width:r.width})),Gx=()=>{var e,r=lu(),i=pr(JO),a=pr(Gv),p=(e=pr(qv))===null||e===void 0?void 0:e.padding;return!r||!a||!p?i:{width:a.width-p.left-p.right,height:a.height-p.top-p.bottom,x:p.left,y:p.top}},tk={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},rk=()=>{var e;return(e=pr(Aa))!==null&&e!==void 0?e:tk},nk=()=>pr(lh),ik=()=>pr(uh),bn=e=>e.layout.layoutType,Wx=()=>pr(bn),ak={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},A3=Ds({name:"legend",initialState:ak,reducers:{setLegendSize(e,r){e.size.width=r.payload.width,e.size.height=r.payload.height},setLegendSettings(e,r){e.settings.align=r.payload.align,e.settings.layout=r.payload.layout,e.settings.verticalAlign=r.payload.verticalAlign,e.settings.itemSorter=r.payload.itemSorter},addLegendPayload(e,r){e.payload.push(r.payload)},removeLegendPayload(e,r){var i=rh(e).payload.indexOf(r.payload);i>-1&&e.payload.splice(i,1)}}}),{setLegendSize:tG,setLegendSettings:rG,addLegendPayload:ok,removeLegendPayload:sk}=A3.actions,lk=A3.reducer;function Nb(){return Nb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Nb.apply(null,arguments)}function nP(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function D1(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?nP(Object(i),!0).forEach(function(a){uk(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):nP(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function uk(e,r,i){return(r=ck(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function ck(e){var r=hk(e,"string");return typeof r=="symbol"?r:r+""}function hk(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function fk(e){return Array.isArray(e)&&ic(e[0])&&ic(e[1])?e.join(" ~ "):e}var dk=e=>{var{separator:r=" : ",contentStyle:i={},itemStyle:a={},labelStyle:p={},payload:g,formatter:y,itemSorter:c,wrapperClassName:C,labelClassName:E,label:M,labelFormatter:k,accessibilityLayer:N=!1}=e,j=()=>{if(g&&g.length){var ye={padding:0,margin:0},Pe=(c?Nv(g,c):g).map((Me,je)=>{if(Me.type==="none")return null;var ht=Me.formatter||y||fk,{value:At,name:ot}=Me,ft=At,rt=ot;if(ht){var It=ht(At,ot,Me,je,g);if(Array.isArray(It))[ft,rt]=It;else if(It!=null)ft=It;else return null}var kt=D1({display:"block",paddingTop:4,paddingBottom:4,color:Me.color||"#000"},a);return X.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(je),style:kt},ic(rt)?X.createElement("span",{className:"recharts-tooltip-item-name"},rt):null,ic(rt)?X.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,X.createElement("span",{className:"recharts-tooltip-item-value"},ft),X.createElement("span",{className:"recharts-tooltip-item-unit"},Me.unit||""))});return X.createElement("ul",{className:"recharts-tooltip-item-list",style:ye},Pe)}return null},q=D1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),H=D1({margin:0},p),W=!Sa(M),K=W?M:"",ee=In("recharts-default-tooltip",C),ie=In("recharts-tooltip-label",E);W&&k&&g!==void 0&&g!==null&&(K=k(M,g));var ve=N?{role:"status","aria-live":"assertive"}:{};return X.createElement("div",Nb({className:ee,style:q},ve),X.createElement("p",{className:ie,style:H},X.isValidElement(K)?K:"".concat(K)),j())},bg="recharts-tooltip-wrapper",pk={visibility:"hidden"};function mk(e){var{coordinate:r,translateX:i,translateY:a}=e;return In(bg,{["".concat(bg,"-right")]:Pr(i)&&r&&Pr(r.x)&&i>=r.x,["".concat(bg,"-left")]:Pr(i)&&r&&Pr(r.x)&&i<r.x,["".concat(bg,"-bottom")]:Pr(a)&&r&&Pr(r.y)&&a>=r.y,["".concat(bg,"-top")]:Pr(a)&&r&&Pr(r.y)&&a<r.y})}function iP(e){var{allowEscapeViewBox:r,coordinate:i,key:a,offsetTopLeft:p,position:g,reverseDirection:y,tooltipDimension:c,viewBox:C,viewBoxDimension:E}=e;if(g&&Pr(g[a]))return g[a];var M=i[a]-c-(p>0?p:0),k=i[a]+p;if(r[a])return y[a]?M:k;var N=C[a];if(N==null)return 0;if(y[a]){var j=M,q=N;return j<q?Math.max(k,N):Math.max(M,N)}if(E==null)return 0;var H=k+c,W=N+E;return H>W?Math.max(M,N):Math.max(k,N)}function gk(e){var{translateX:r,translateY:i,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(r,"px, ").concat(i,"px, 0)"):"translate(".concat(r,"px, ").concat(i,"px)")}}function yk(e){var{allowEscapeViewBox:r,coordinate:i,offsetTopLeft:a,position:p,reverseDirection:g,tooltipBox:y,useTranslate3d:c,viewBox:C}=e,E,M,k;return y.height>0&&y.width>0&&i?(M=iP({allowEscapeViewBox:r,coordinate:i,key:"x",offsetTopLeft:a,position:p,reverseDirection:g,tooltipDimension:y.width,viewBox:C,viewBoxDimension:C.width}),k=iP({allowEscapeViewBox:r,coordinate:i,key:"y",offsetTopLeft:a,position:p,reverseDirection:g,tooltipDimension:y.height,viewBox:C,viewBoxDimension:C.height}),E=gk({translateX:M,translateY:k,useTranslate3d:c})):E=pk,{cssProperties:E,cssClasses:mk({translateX:M,translateY:k,coordinate:i})}}function aP(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function w0(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?aP(Object(i),!0).forEach(function(a){jb(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):aP(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function jb(e,r,i){return(r=vk(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function vk(e){var r=_k(e,"string");return typeof r=="symbol"?r:r+""}function _k(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}class bk extends X.PureComponent{constructor(){super(...arguments),jb(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),jb(this,"handleKeyDown",r=>{if(r.key==="Escape"){var i,a,p,g;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&i!==void 0?i:0,y:(p=(g=this.props.coordinate)===null||g===void 0?void 0:g.y)!==null&&p!==void 0?p:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var r,i;this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:r,allowEscapeViewBox:i,animationDuration:a,animationEasing:p,children:g,coordinate:y,hasPayload:c,isAnimationActive:C,offset:E,position:M,reverseDirection:k,useTranslate3d:N,viewBox:j,wrapperStyle:q,lastBoundingBox:H,innerRef:W,hasPortalFromProps:K}=this.props,{cssClasses:ee,cssProperties:ie}=yk({allowEscapeViewBox:i,coordinate:y,offsetTopLeft:E,position:M,reverseDirection:k,tooltipBox:{height:H.height,width:H.width},useTranslate3d:N,viewBox:j}),ve=K?{}:w0(w0({transition:C&&r?"transform ".concat(a,"ms ").concat(p):void 0},ie),{},{pointerEvents:"none",visibility:!this.state.dismissed&&r&&c?"visible":"hidden",position:"absolute",top:0,left:0}),ye=w0(w0({},ve),{},{visibility:!this.state.dismissed&&r&&c?"visible":"hidden"},q);return X.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:ee,style:ye,ref:W},g)}}var xk=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),tm={devToolsEnabled:!1,isSsr:xk()},C3=()=>pr(e=>e.rootProps.accessibilityLayer);function Rs(e){return Number.isFinite(e)}function nv(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Bb(){return Bb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Bb.apply(null,arguments)}function oP(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function sP(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?oP(Object(i),!0).forEach(function(a){wk(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):oP(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function wk(e,r,i){return(r=Sk(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function Sk(e){var r=Pk(e,"string");return typeof r=="symbol"?r:r+""}function Pk(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var lP={curveBasisClosed:YD,curveBasisOpen:QD,curveBasis:KD,curveBumpX:zD,curveBumpY:ND,curveLinearClosed:JD,curveLinear:Lv,curveMonotoneX:e8,curveMonotoneY:t8,curveNatural:r8,curveStep:n8,curveStepAfter:a8,curveStepBefore:i8},S0=e=>Rs(e.x)&&Rs(e.y),xg=e=>e.x,wg=e=>e.y,Ak=(e,r)=>{if(typeof e=="function")return e;var i="curve".concat(Qg(e));return(i==="curveMonotone"||i==="curveBump")&&r?lP["".concat(i).concat(r==="vertical"?"Y":"X")]:lP[i]||Lv},Ck=e=>{var{type:r="linear",points:i=[],baseLine:a,layout:p,connectNulls:g=!1}=e,y=Ak(r,p),c=g?i.filter(S0):i,C;if(Array.isArray(a)){var E=g?a.filter(k=>S0(k)):a,M=c.map((k,N)=>sP(sP({},k),{},{base:E[N]}));return p==="vertical"?C=m0().y(wg).x1(xg).x0(k=>k.base.x):C=m0().x(xg).y1(wg).y0(k=>k.base.y),C.defined(S0).curve(y),C(M)}return p==="vertical"&&Pr(a)?C=m0().y(wg).x1(xg).x0(a):Pr(a)?C=m0().x(xg).y1(wg).y0(a):C=TT().x(xg).y(wg),C.defined(S0).curve(y),C(c)},Tk=e=>{var{className:r,points:i,path:a,pathRef:p}=e;if((!i||!i.length)&&!a)return null;var g=i&&i.length?Ck(e):a;return X.createElement("path",Bb({},Jg(e),xD(e),{className:In("recharts-curve",r),d:g===null?void 0:g,ref:p}))},Ek=["x","y","top","left","width","height","className"];function Fb(){return Fb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Fb.apply(null,arguments)}function uP(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function Mk(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?uP(Object(i),!0).forEach(function(a){Rk(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):uP(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Rk(e,r,i){return(r=Dk(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function Dk(e){var r=Ik(e,"string");return typeof r=="symbol"?r:r+""}function Ik(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Ok(e,r){if(e==null)return{};var i,a,p=kk(e,r);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],r.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(p[i]=e[i])}return p}function kk(e,r){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var Lk=(e,r,i,a,p,g)=>"M".concat(e,",").concat(p,"v").concat(a,"M").concat(g,",").concat(r,"h").concat(i),zk=e=>{var{x:r=0,y:i=0,top:a=0,left:p=0,width:g=0,height:y=0,className:c}=e,C=Ok(e,Ek),E=Mk({x:r,y:i,top:a,left:p,width:g,height:y},C);return!Pr(r)||!Pr(i)||!Pr(g)||!Pr(y)||!Pr(a)||!Pr(p)?null:X.createElement("path",Fb({},qa(E,!0),{className:In("recharts-cross",c),d:Lk(r,i,g,y,a,p)}))};function Nk(e,r,i,a){var p=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?r.x-p:i.left+.5,y:e==="horizontal"?i.top+.5:r.y-p,width:e==="horizontal"?a:i.width-1,height:e==="horizontal"?i.height-1:a}}function cP(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function jk(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?cP(Object(i),!0).forEach(function(a){Bk(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):cP(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Bk(e,r,i){return(r=Fk(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function Fk(e){var r=Uk(e,"string");return typeof r=="symbol"?r:r+""}function Uk(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function uu(e,r){var i=jk({},e),a=r,p=Object.keys(r),g=p.reduce((y,c)=>(y[c]===void 0&&a[c]!==void 0&&(y[c]=a[c]),y),i);return g}function $k(){}function hP(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function fP(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?hP(Object(i),!0).forEach(function(a){Vk(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):hP(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Vk(e,r,i){return(r=Hk(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function Hk(e){var r=qk(e,"string");return typeof r=="symbol"?r:r+""}function qk(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Gk=e=>e.replace(/([A-Z])/g,r=>"-".concat(r.toLowerCase())),T3=(e,r,i)=>e.map(a=>"".concat(Gk(a)," ").concat(r,"ms ").concat(i)).join(","),Wk=(e,r)=>[Object.keys(e),Object.keys(r)].reduce((i,a)=>i.filter(p=>a.includes(p))),Ug=(e,r)=>Object.keys(r).reduce((i,a)=>fP(fP({},i),{},{[a]:e(a,r[a])}),{});function dP(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function Va(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?dP(Object(i),!0).forEach(function(a){Zk(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):dP(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Zk(e,r,i){return(r=Xk(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function Xk(e){var r=Kk(e,"string");return typeof r=="symbol"?r:r+""}function Kk(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var iv=(e,r,i)=>e+(r-e)*i,Ub=e=>{var{from:r,to:i}=e;return r!==i},E3=(e,r,i)=>{var a=Ug((p,g)=>{if(Ub(g)){var[y,c]=e(g.from,g.to,g.velocity);return Va(Va({},g),{},{from:y,velocity:c})}return g},r);return i<1?Ug((p,g)=>Ub(g)?Va(Va({},g),{},{velocity:iv(g.velocity,a[p].velocity,i),from:iv(g.from,a[p].from,i)}):g,r):E3(e,a,i-1)};function Yk(e,r,i,a,p,g){var y,c=a.reduce((N,j)=>Va(Va({},N),{},{[j]:{from:e[j],velocity:0,to:r[j]}}),{}),C=()=>Ug((N,j)=>j.from,c),E=()=>!Object.values(c).filter(Ub).length,M=null,k=N=>{y||(y=N);var j=N-y,q=j/i.dt;c=E3(i,c,q),p(Va(Va(Va({},e),r),C())),y=N,E()||(M=g.setTimeout(k))};return()=>(M=g.setTimeout(k),()=>{M()})}function Qk(e,r,i,a,p,g,y){var c=null,C=p.reduce((k,N)=>Va(Va({},k),{},{[N]:[e[N],r[N]]}),{}),E,M=k=>{E||(E=k);var N=(k-E)/a,j=Ug((H,W)=>iv(...W,i(N)),C);if(g(Va(Va(Va({},e),r),j)),N<1)c=y.setTimeout(M);else{var q=Ug((H,W)=>iv(...W,i(1)),C);g(Va(Va(Va({},e),r),q))}};return()=>(c=y.setTimeout(M),()=>{c()})}const Jk=(e,r,i,a,p,g)=>{var y=Wk(e,r);return i.isStepper===!0?Yk(e,r,i,y,p,g):Qk(e,r,i,a,y,p,g)};var av=1e-4,M3=(e,r)=>[0,3*e,3*r-6*e,3*e-3*r+1],R3=(e,r)=>e.map((i,a)=>i*r**a).reduce((i,a)=>i+a),pP=(e,r)=>i=>{var a=M3(e,r);return R3(a,i)},e7=(e,r)=>i=>{var a=M3(e,r),p=[...a.map((g,y)=>g*y).slice(1),0];return R3(p,i)},mP=function(){for(var r,i,a,p,g=arguments.length,y=new Array(g),c=0;c<g;c++)y[c]=arguments[c];if(y.length===1)switch(y[0]){case"linear":[r,a,i,p]=[0,0,1,1];break;case"ease":[r,a,i,p]=[.25,.1,.25,1];break;case"ease-in":[r,a,i,p]=[.42,0,1,1];break;case"ease-out":[r,a,i,p]=[.42,0,.58,1];break;case"ease-in-out":[r,a,i,p]=[0,0,.58,1];break;default:{var C=y[0].split("(");C[0]==="cubic-bezier"&&C[1].split(")")[0].split(",").length===4&&([r,a,i,p]=C[1].split(")")[0].split(",").map(q=>parseFloat(q)))}}else y.length===4&&([r,a,i,p]=y);var E=pP(r,i),M=pP(a,p),k=e7(r,i),N=q=>q>1?1:q<0?0:q,j=q=>{for(var H=q>1?1:q,W=H,K=0;K<8;++K){var ee=E(W)-H,ie=k(W);if(Math.abs(ee-H)<av||ie<av)return M(W);W=N(W-ee/ie)}return M(W)};return j.isStepper=!1,j},t7=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:i=100,damping:a=8,dt:p=17}=r,g=(y,c,C)=>{var E=-(y-c)*i,M=C*a,k=C+(E-M)*p/1e3,N=C*p/1e3+y;return Math.abs(N-c)<av&&Math.abs(k)<av?[c,0]:[N,k]};return g.isStepper=!0,g.dt=p,g},r7=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return mP(e);case"spring":return t7();default:if(e.split("(")[0]==="cubic-bezier")return mP(e)}return typeof e=="function"?e:null};function n7(e){var r,i=()=>null,a=!1,p=null,g=y=>{if(!a){if(Array.isArray(y)){if(!y.length)return;var c=y,[C,...E]=c;if(typeof C=="number"){p=e.setTimeout(g.bind(null,E),C);return}g(C),p=e.setTimeout(g.bind(null,E));return}typeof y=="string"&&(r=y,i(r)),typeof y=="object"&&(r=y,i(r)),typeof y=="function"&&y()}};return{stop:()=>{a=!0},start:y=>{a=!1,p&&(p(),p=null),g(y)},subscribe:y=>(i=y,()=>{i=()=>null}),getTimeoutController:()=>e}}class i7{setTimeout(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),p=null,g=y=>{y-a>=i?r(y):typeof requestAnimationFrame=="function"&&(p=requestAnimationFrame(g))};return p=requestAnimationFrame(g),()=>{cancelAnimationFrame(p)}}}function a7(){return n7(new i7)}var o7=X.createContext(a7);function s7(e,r){var i=X.useContext(o7);return X.useMemo(()=>r??i(e),[e,r,i])}var l7={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},gP={t:0},I1={t:1};function Zx(e){var r=uu(e,l7),{isActive:i,canBegin:a,duration:p,easing:g,begin:y,onAnimationEnd:c,onAnimationStart:C,children:E}=r,M=s7(r.animationId,r.animationManager),[k,N]=X.useState(i?gP:I1),j=X.useRef(null);return X.useEffect(()=>{i||N(I1)},[i]),X.useEffect(()=>{if(!i||!a)return $k;var q=Jk(gP,I1,r7(g),p,N,M.getTimeoutController()),H=()=>{j.current=q()};return M.start([C,y,H,p,c]),()=>{M.stop(),j.current&&j.current(),c()}},[i,a,p,g,y,C,c,M]),E(k.t)}function Xx(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",i=X.useRef(jg(r)),a=X.useRef(e);return a.current!==e&&(i.current=jg(r),a.current=e),i.current}function yP(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function vP(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?yP(Object(i),!0).forEach(function(a){u7(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):yP(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function u7(e,r,i){return(r=c7(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function c7(e){var r=h7(e,"string");return typeof r=="symbol"?r:r+""}function h7(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function ov(){return ov=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},ov.apply(null,arguments)}var _P=(e,r,i,a,p)=>{var g=Math.min(Math.abs(i)/2,Math.abs(a)/2),y=a>=0?1:-1,c=i>=0?1:-1,C=a>=0&&i>=0||a<0&&i<0?1:0,E;if(g>0&&p instanceof Array){for(var M=[0,0,0,0],k=0,N=4;k<N;k++)M[k]=p[k]>g?g:p[k];E="M".concat(e,",").concat(r+y*M[0]),M[0]>0&&(E+="A ".concat(M[0],",").concat(M[0],",0,0,").concat(C,",").concat(e+c*M[0],",").concat(r)),E+="L ".concat(e+i-c*M[1],",").concat(r),M[1]>0&&(E+="A ".concat(M[1],",").concat(M[1],",0,0,").concat(C,`,
        `).concat(e+i,",").concat(r+y*M[1])),E+="L ".concat(e+i,",").concat(r+a-y*M[2]),M[2]>0&&(E+="A ".concat(M[2],",").concat(M[2],",0,0,").concat(C,`,
        `).concat(e+i-c*M[2],",").concat(r+a)),E+="L ".concat(e+c*M[3],",").concat(r+a),M[3]>0&&(E+="A ".concat(M[3],",").concat(M[3],",0,0,").concat(C,`,
        `).concat(e,",").concat(r+a-y*M[3])),E+="Z"}else if(g>0&&p===+p&&p>0){var j=Math.min(g,p);E="M ".concat(e,",").concat(r+y*j,`
            A `).concat(j,",").concat(j,",0,0,").concat(C,",").concat(e+c*j,",").concat(r,`
            L `).concat(e+i-c*j,",").concat(r,`
            A `).concat(j,",").concat(j,",0,0,").concat(C,",").concat(e+i,",").concat(r+y*j,`
            L `).concat(e+i,",").concat(r+a-y*j,`
            A `).concat(j,",").concat(j,",0,0,").concat(C,",").concat(e+i-c*j,",").concat(r+a,`
            L `).concat(e+c*j,",").concat(r+a,`
            A `).concat(j,",").concat(j,",0,0,").concat(C,",").concat(e,",").concat(r+a-y*j," Z")}else E="M ".concat(e,",").concat(r," h ").concat(i," v ").concat(a," h ").concat(-i," Z");return E},f7={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},D3=e=>{var r=uu(e,f7),i=X.useRef(null),[a,p]=X.useState(-1);X.useEffect(()=>{if(i.current&&i.current.getTotalLength)try{var It=i.current.getTotalLength();It&&p(It)}catch{}},[]);var{x:g,y,width:c,height:C,radius:E,className:M}=r,{animationEasing:k,animationDuration:N,animationBegin:j,isAnimationActive:q,isUpdateAnimationActive:H}=r,W=X.useRef(c),K=X.useRef(C),ee=X.useRef(g),ie=X.useRef(y),ve=X.useMemo(()=>({x:g,y,width:c,height:C,radius:E}),[g,y,c,C,E]),ye=Xx(ve,"rectangle-");if(g!==+g||y!==+y||c!==+c||C!==+C||c===0||C===0)return null;var Pe=In("recharts-rectangle",M);if(!H)return X.createElement("path",ov({},qa(r,!0),{className:Pe,d:_P(g,y,c,C,E)}));var Me=W.current,je=K.current,ht=ee.current,At=ie.current,ot="0px ".concat(a===-1?1:a,"px"),ft="".concat(a,"px 0px"),rt=T3(["strokeDasharray"],N,typeof k=="string"?k:void 0);return X.createElement(Zx,{animationId:ye,key:ye,canBegin:a>0,duration:N,easing:k,isActive:H,begin:j},It=>{var kt=So(Me,c,It),Ue=So(je,C,It),ct=So(ht,g,It),nt=So(At,y,It);i.current&&(W.current=kt,K.current=Ue,ee.current=ct,ie.current=nt);var Ct;return q?It>0?Ct={transition:rt,strokeDasharray:ft}:Ct={strokeDasharray:ot}:Ct={strokeDasharray:ft},X.createElement("path",ov({},qa(r,!0),{className:Pe,d:_P(ct,nt,kt,Ue,E),ref:i,style:vP(vP({},Ct),r.style)}))})};function I3(e){var{cx:r,cy:i,radius:a,startAngle:p,endAngle:g}=e,y=Ha(r,i,a,p),c=Ha(r,i,a,g);return{points:[y,c],cx:r,cy:i,radius:a,startAngle:p,endAngle:g}}function $b(){return $b=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},$b.apply(null,arguments)}var d7=(e,r)=>{var i=Ts(r-e),a=Math.min(Math.abs(r-e),359.999);return i*a},P0=e=>{var{cx:r,cy:i,radius:a,angle:p,sign:g,isExternal:y,cornerRadius:c,cornerIsExternal:C}=e,E=c*(y?1:-1)+a,M=Math.asin(c/E)/rv,k=C?p:p+g*M,N=Ha(r,i,E,k),j=Ha(r,i,a,k),q=C?p-g*M:p,H=Ha(r,i,E*Math.cos(M*rv),q);return{center:N,circleTangency:j,lineTangency:H,theta:M}},O3=e=>{var{cx:r,cy:i,innerRadius:a,outerRadius:p,startAngle:g,endAngle:y}=e,c=d7(g,y),C=g+c,E=Ha(r,i,p,g),M=Ha(r,i,p,C),k="M ".concat(E.x,",").concat(E.y,`
    A `).concat(p,",").concat(p,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(g>C),`,
    `).concat(M.x,",").concat(M.y,`
  `);if(a>0){var N=Ha(r,i,a,g),j=Ha(r,i,a,C);k+="L ".concat(j.x,",").concat(j.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(g<=C),`,
            `).concat(N.x,",").concat(N.y," Z")}else k+="L ".concat(r,",").concat(i," Z");return k},p7=e=>{var{cx:r,cy:i,innerRadius:a,outerRadius:p,cornerRadius:g,forceCornerRadius:y,cornerIsExternal:c,startAngle:C,endAngle:E}=e,M=Ts(E-C),{circleTangency:k,lineTangency:N,theta:j}=P0({cx:r,cy:i,radius:p,angle:C,sign:M,cornerRadius:g,cornerIsExternal:c}),{circleTangency:q,lineTangency:H,theta:W}=P0({cx:r,cy:i,radius:p,angle:E,sign:-M,cornerRadius:g,cornerIsExternal:c}),K=c?Math.abs(C-E):Math.abs(C-E)-j-W;if(K<0)return y?"M ".concat(N.x,",").concat(N.y,`
        a`).concat(g,",").concat(g,",0,0,1,").concat(g*2,`,0
        a`).concat(g,",").concat(g,",0,0,1,").concat(-g*2,`,0
      `):O3({cx:r,cy:i,innerRadius:a,outerRadius:p,startAngle:C,endAngle:E});var ee="M ".concat(N.x,",").concat(N.y,`
    A`).concat(g,",").concat(g,",0,0,").concat(+(M<0),",").concat(k.x,",").concat(k.y,`
    A`).concat(p,",").concat(p,",0,").concat(+(K>180),",").concat(+(M<0),",").concat(q.x,",").concat(q.y,`
    A`).concat(g,",").concat(g,",0,0,").concat(+(M<0),",").concat(H.x,",").concat(H.y,`
  `);if(a>0){var{circleTangency:ie,lineTangency:ve,theta:ye}=P0({cx:r,cy:i,radius:a,angle:C,sign:M,isExternal:!0,cornerRadius:g,cornerIsExternal:c}),{circleTangency:Pe,lineTangency:Me,theta:je}=P0({cx:r,cy:i,radius:a,angle:E,sign:-M,isExternal:!0,cornerRadius:g,cornerIsExternal:c}),ht=c?Math.abs(C-E):Math.abs(C-E)-ye-je;if(ht<0&&g===0)return"".concat(ee,"L").concat(r,",").concat(i,"Z");ee+="L".concat(Me.x,",").concat(Me.y,`
      A`).concat(g,",").concat(g,",0,0,").concat(+(M<0),",").concat(Pe.x,",").concat(Pe.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(ht>180),",").concat(+(M>0),",").concat(ie.x,",").concat(ie.y,`
      A`).concat(g,",").concat(g,",0,0,").concat(+(M<0),",").concat(ve.x,",").concat(ve.y,"Z")}else ee+="L".concat(r,",").concat(i,"Z");return ee},m7={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},k3=e=>{var r=uu(e,m7),{cx:i,cy:a,innerRadius:p,outerRadius:g,cornerRadius:y,forceCornerRadius:c,cornerIsExternal:C,startAngle:E,endAngle:M,className:k}=r;if(g<p||E===M)return null;var N=In("recharts-sector",k),j=g-p,q=iu(y,j,0,!0),H;return q>0&&Math.abs(E-M)<360?H=p7({cx:i,cy:a,innerRadius:p,outerRadius:g,cornerRadius:Math.min(q,j/2),forceCornerRadius:c,cornerIsExternal:C,startAngle:E,endAngle:M}):H=O3({cx:i,cy:a,innerRadius:p,outerRadius:g,startAngle:E,endAngle:M}),X.createElement("path",$b({},qa(r,!0),{className:N,d:H}))};function g7(e,r,i){var a,p,g,y;if(e==="horizontal")a=r.x,g=a,p=i.top,y=i.top+i.height;else if(e==="vertical")p=r.y,y=p,a=i.left,g=i.left+i.width;else if(r.cx!=null&&r.cy!=null)if(e==="centric"){var{cx:c,cy:C,innerRadius:E,outerRadius:M,angle:k}=r,N=Ha(c,C,E,k),j=Ha(c,C,M,k);a=N.x,p=N.y,g=j.x,y=j.y}else return I3(r);return[{x:a,y:p},{x:g,y}]}var O1={},k1={},L1={},bP;function y7(){return bP||(bP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=XT();function i(a){return r.isSymbol(a)?NaN:Number(a)}e.toNumber=i})(L1)),L1}var xP;function v7(){return xP||(xP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=y7();function i(a){return a?(a=r.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=i})(k1)),k1}var wP;function _7(){return wP||(wP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=KT(),i=v7();function a(p,g,y){y&&typeof y!="number"&&r.isIterateeCall(p,g,y)&&(g=y=void 0),p=i.toFinite(p),g===void 0?(g=p,p=0):g=i.toFinite(g),y=y===void 0?p<g?1:-1:i.toFinite(y);const c=Math.max(Math.ceil((g-p)/(y||1)),0),C=new Array(c);for(let E=0;E<c;E++)C[E]=p,p+=y;return C}e.range=a})(O1)),O1}var z1,SP;function b7(){return SP||(SP=1,z1=_7().range),z1}var x7=b7();const L3=au(x7);function hf(e,r){return e==null||r==null?NaN:e<r?-1:e>r?1:e>=r?0:NaN}function w7(e,r){return e==null||r==null?NaN:r<e?-1:r>e?1:r>=e?0:NaN}function Kx(e){let r,i,a;e.length!==2?(r=hf,i=(c,C)=>hf(e(c),C),a=(c,C)=>e(c)-C):(r=e===hf||e===w7?e:S7,i=e,a=e);function p(c,C,E=0,M=c.length){if(E<M){if(r(C,C)!==0)return M;do{const k=E+M>>>1;i(c[k],C)<0?E=k+1:M=k}while(E<M)}return E}function g(c,C,E=0,M=c.length){if(E<M){if(r(C,C)!==0)return M;do{const k=E+M>>>1;i(c[k],C)<=0?E=k+1:M=k}while(E<M)}return E}function y(c,C,E=0,M=c.length){const k=p(c,C,E,M-1);return k>E&&a(c[k-1],C)>-a(c[k],C)?k-1:k}return{left:p,center:y,right:g}}function S7(){return 0}function z3(e){return e===null?NaN:+e}function*P7(e,r){for(let i of e)i!=null&&(i=+i)>=i&&(yield i)}const A7=Kx(hf),ny=A7.right;Kx(z3).center;class PP extends Map{constructor(r,i=E7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),r!=null)for(const[a,p]of r)this.set(a,p)}get(r){return super.get(AP(this,r))}has(r){return super.has(AP(this,r))}set(r,i){return super.set(C7(this,r),i)}delete(r){return super.delete(T7(this,r))}}function AP({_intern:e,_key:r},i){const a=r(i);return e.has(a)?e.get(a):i}function C7({_intern:e,_key:r},i){const a=r(i);return e.has(a)?e.get(a):(e.set(a,i),i)}function T7({_intern:e,_key:r},i){const a=r(i);return e.has(a)&&(i=e.get(a),e.delete(a)),i}function E7(e){return e!==null&&typeof e=="object"?e.valueOf():e}function M7(e=hf){if(e===hf)return N3;if(typeof e!="function")throw new TypeError("compare is not a function");return(r,i)=>{const a=e(r,i);return a||a===0?a:(e(i,i)===0)-(e(r,r)===0)}}function N3(e,r){return(e==null||!(e>=e))-(r==null||!(r>=r))||(e<r?-1:e>r?1:0)}const R7=Math.sqrt(50),D7=Math.sqrt(10),I7=Math.sqrt(2);function sv(e,r,i){const a=(r-e)/Math.max(0,i),p=Math.floor(Math.log10(a)),g=a/Math.pow(10,p),y=g>=R7?10:g>=D7?5:g>=I7?2:1;let c,C,E;return p<0?(E=Math.pow(10,-p)/y,c=Math.round(e*E),C=Math.round(r*E),c/E<e&&++c,C/E>r&&--C,E=-E):(E=Math.pow(10,p)*y,c=Math.round(e/E),C=Math.round(r/E),c*E<e&&++c,C*E>r&&--C),C<c&&.5<=i&&i<2?sv(e,r,i*2):[c,C,E]}function Vb(e,r,i){if(r=+r,e=+e,i=+i,!(i>0))return[];if(e===r)return[e];const a=r<e,[p,g,y]=a?sv(r,e,i):sv(e,r,i);if(!(g>=p))return[];const c=g-p+1,C=new Array(c);if(a)if(y<0)for(let E=0;E<c;++E)C[E]=(g-E)/-y;else for(let E=0;E<c;++E)C[E]=(g-E)*y;else if(y<0)for(let E=0;E<c;++E)C[E]=(p+E)/-y;else for(let E=0;E<c;++E)C[E]=(p+E)*y;return C}function Hb(e,r,i){return r=+r,e=+e,i=+i,sv(e,r,i)[2]}function qb(e,r,i){r=+r,e=+e,i=+i;const a=r<e,p=a?Hb(r,e,i):Hb(e,r,i);return(a?-1:1)*(p<0?1/-p:p)}function CP(e,r){let i;for(const a of e)a!=null&&(i<a||i===void 0&&a>=a)&&(i=a);return i}function TP(e,r){let i;for(const a of e)a!=null&&(i>a||i===void 0&&a>=a)&&(i=a);return i}function j3(e,r,i=0,a=1/0,p){if(r=Math.floor(r),i=Math.floor(Math.max(0,i)),a=Math.floor(Math.min(e.length-1,a)),!(i<=r&&r<=a))return e;for(p=p===void 0?N3:M7(p);a>i;){if(a-i>600){const C=a-i+1,E=r-i+1,M=Math.log(C),k=.5*Math.exp(2*M/3),N=.5*Math.sqrt(M*k*(C-k)/C)*(E-C/2<0?-1:1),j=Math.max(i,Math.floor(r-E*k/C+N)),q=Math.min(a,Math.floor(r+(C-E)*k/C+N));j3(e,r,j,q,p)}const g=e[r];let y=i,c=a;for(Sg(e,i,r),p(e[a],g)>0&&Sg(e,i,a);y<c;){for(Sg(e,y,c),++y,--c;p(e[y],g)<0;)++y;for(;p(e[c],g)>0;)--c}p(e[i],g)===0?Sg(e,i,c):(++c,Sg(e,c,a)),c<=r&&(i=c+1),r<=c&&(a=c-1)}return e}function Sg(e,r,i){const a=e[r];e[r]=e[i],e[i]=a}function O7(e,r,i){if(e=Float64Array.from(P7(e)),!(!(a=e.length)||isNaN(r=+r))){if(r<=0||a<2)return TP(e);if(r>=1)return CP(e);var a,p=(a-1)*r,g=Math.floor(p),y=CP(j3(e,g).subarray(0,g+1)),c=TP(e.subarray(g+1));return y+(c-y)*(p-g)}}function k7(e,r,i=z3){if(!(!(a=e.length)||isNaN(r=+r))){if(r<=0||a<2)return+i(e[0],0,e);if(r>=1)return+i(e[a-1],a-1,e);var a,p=(a-1)*r,g=Math.floor(p),y=+i(e[g],g,e),c=+i(e[g+1],g+1,e);return y+(c-y)*(p-g)}}function L7(e,r,i){e=+e,r=+r,i=(p=arguments.length)<2?(r=e,e=0,1):p<3?1:+i;for(var a=-1,p=Math.max(0,Math.ceil((r-e)/i))|0,g=new Array(p);++a<p;)g[a]=e+a*i;return g}function ul(e,r){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(r).domain(e);break}return this}function ch(e,r){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}const Gb=Symbol("implicit");function Yx(){var e=new PP,r=[],i=[],a=Gb;function p(g){let y=e.get(g);if(y===void 0){if(a!==Gb)return a;e.set(g,y=r.push(g)-1)}return i[y%i.length]}return p.domain=function(g){if(!arguments.length)return r.slice();r=[],e=new PP;for(const y of g)e.has(y)||e.set(y,r.push(y)-1);return p},p.range=function(g){return arguments.length?(i=Array.from(g),p):i.slice()},p.unknown=function(g){return arguments.length?(a=g,p):a},p.copy=function(){return Yx(r,i).unknown(a)},ul.apply(p,arguments),p}function Qx(){var e=Yx().unknown(void 0),r=e.domain,i=e.range,a=0,p=1,g,y,c=!1,C=0,E=0,M=.5;delete e.unknown;function k(){var N=r().length,j=p<a,q=j?p:a,H=j?a:p;g=(H-q)/Math.max(1,N-C+E*2),c&&(g=Math.floor(g)),q+=(H-q-g*(N-C))*M,y=g*(1-C),c&&(q=Math.round(q),y=Math.round(y));var W=L7(N).map(function(K){return q+g*K});return i(j?W.reverse():W)}return e.domain=function(N){return arguments.length?(r(N),k()):r()},e.range=function(N){return arguments.length?([a,p]=N,a=+a,p=+p,k()):[a,p]},e.rangeRound=function(N){return[a,p]=N,a=+a,p=+p,c=!0,k()},e.bandwidth=function(){return y},e.step=function(){return g},e.round=function(N){return arguments.length?(c=!!N,k()):c},e.padding=function(N){return arguments.length?(C=Math.min(1,E=+N),k()):C},e.paddingInner=function(N){return arguments.length?(C=Math.min(1,N),k()):C},e.paddingOuter=function(N){return arguments.length?(E=+N,k()):E},e.align=function(N){return arguments.length?(M=Math.max(0,Math.min(1,N)),k()):M},e.copy=function(){return Qx(r(),[a,p]).round(c).paddingInner(C).paddingOuter(E).align(M)},ul.apply(k(),arguments)}function B3(e){var r=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return B3(r())},e}function z7(){return B3(Qx.apply(null,arguments).paddingInner(1))}function Jx(e,r,i){e.prototype=r.prototype=i,i.constructor=e}function F3(e,r){var i=Object.create(e.prototype);for(var a in r)i[a]=r[a];return i}function iy(){}var $g=.7,lv=1/$g,jp="\\s*([+-]?\\d+)\\s*",Vg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",N7=/^#([0-9a-f]{3,8})$/,j7=new RegExp(`^rgb\\(${jp},${jp},${jp}\\)$`),B7=new RegExp(`^rgb\\(${nc},${nc},${nc}\\)$`),F7=new RegExp(`^rgba\\(${jp},${jp},${jp},${Vg}\\)$`),U7=new RegExp(`^rgba\\(${nc},${nc},${nc},${Vg}\\)$`),$7=new RegExp(`^hsl\\(${Vg},${nc},${nc}\\)$`),V7=new RegExp(`^hsla\\(${Vg},${nc},${nc},${Vg}\\)$`),EP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Jx(iy,Hg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:MP,formatHex:MP,formatHex8:H7,formatHsl:q7,formatRgb:RP,toString:RP});function MP(){return this.rgb().formatHex()}function H7(){return this.rgb().formatHex8()}function q7(){return U3(this).formatHsl()}function RP(){return this.rgb().formatRgb()}function Hg(e){var r,i;return e=(e+"").trim().toLowerCase(),(r=N7.exec(e))?(i=r[1].length,r=parseInt(r[1],16),i===6?DP(r):i===3?new Xo(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):i===8?A0(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):i===4?A0(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=j7.exec(e))?new Xo(r[1],r[2],r[3],1):(r=B7.exec(e))?new Xo(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=F7.exec(e))?A0(r[1],r[2],r[3],r[4]):(r=U7.exec(e))?A0(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=$7.exec(e))?kP(r[1],r[2]/100,r[3]/100,1):(r=V7.exec(e))?kP(r[1],r[2]/100,r[3]/100,r[4]):EP.hasOwnProperty(e)?DP(EP[e]):e==="transparent"?new Xo(NaN,NaN,NaN,0):null}function DP(e){return new Xo(e>>16&255,e>>8&255,e&255,1)}function A0(e,r,i,a){return a<=0&&(e=r=i=NaN),new Xo(e,r,i,a)}function G7(e){return e instanceof iy||(e=Hg(e)),e?(e=e.rgb(),new Xo(e.r,e.g,e.b,e.opacity)):new Xo}function Wb(e,r,i,a){return arguments.length===1?G7(e):new Xo(e,r,i,a??1)}function Xo(e,r,i,a){this.r=+e,this.g=+r,this.b=+i,this.opacity=+a}Jx(Xo,Wb,F3(iy,{brighter(e){return e=e==null?lv:Math.pow(lv,e),new Xo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?$g:Math.pow($g,e),new Xo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Xo(Dd(this.r),Dd(this.g),Dd(this.b),uv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:IP,formatHex:IP,formatHex8:W7,formatRgb:OP,toString:OP}));function IP(){return`#${Td(this.r)}${Td(this.g)}${Td(this.b)}`}function W7(){return`#${Td(this.r)}${Td(this.g)}${Td(this.b)}${Td((isNaN(this.opacity)?1:this.opacity)*255)}`}function OP(){const e=uv(this.opacity);return`${e===1?"rgb(":"rgba("}${Dd(this.r)}, ${Dd(this.g)}, ${Dd(this.b)}${e===1?")":`, ${e})`}`}function uv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Dd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Td(e){return e=Dd(e),(e<16?"0":"")+e.toString(16)}function kP(e,r,i,a){return a<=0?e=r=i=NaN:i<=0||i>=1?e=r=NaN:r<=0&&(e=NaN),new tu(e,r,i,a)}function U3(e){if(e instanceof tu)return new tu(e.h,e.s,e.l,e.opacity);if(e instanceof iy||(e=Hg(e)),!e)return new tu;if(e instanceof tu)return e;e=e.rgb();var r=e.r/255,i=e.g/255,a=e.b/255,p=Math.min(r,i,a),g=Math.max(r,i,a),y=NaN,c=g-p,C=(g+p)/2;return c?(r===g?y=(i-a)/c+(i<a)*6:i===g?y=(a-r)/c+2:y=(r-i)/c+4,c/=C<.5?g+p:2-g-p,y*=60):c=C>0&&C<1?0:y,new tu(y,c,C,e.opacity)}function Z7(e,r,i,a){return arguments.length===1?U3(e):new tu(e,r,i,a??1)}function tu(e,r,i,a){this.h=+e,this.s=+r,this.l=+i,this.opacity=+a}Jx(tu,Z7,F3(iy,{brighter(e){return e=e==null?lv:Math.pow(lv,e),new tu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?$g:Math.pow($g,e),new tu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,r=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,a=i+(i<.5?i:1-i)*r,p=2*i-a;return new Xo(N1(e>=240?e-240:e+120,p,a),N1(e,p,a),N1(e<120?e+240:e-120,p,a),this.opacity)},clamp(){return new tu(LP(this.h),C0(this.s),C0(this.l),uv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=uv(this.opacity);return`${e===1?"hsl(":"hsla("}${LP(this.h)}, ${C0(this.s)*100}%, ${C0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function LP(e){return e=(e||0)%360,e<0?e+360:e}function C0(e){return Math.max(0,Math.min(1,e||0))}function N1(e,r,i){return(e<60?r+(i-r)*e/60:e<180?i:e<240?r+(i-r)*(240-e)/60:r)*255}const ew=e=>()=>e;function X7(e,r){return function(i){return e+i*r}}function K7(e,r,i){return e=Math.pow(e,i),r=Math.pow(r,i)-e,i=1/i,function(a){return Math.pow(e+a*r,i)}}function Y7(e){return(e=+e)==1?$3:function(r,i){return i-r?K7(r,i,e):ew(isNaN(r)?i:r)}}function $3(e,r){var i=r-e;return i?X7(e,i):ew(isNaN(e)?r:e)}const zP=(function e(r){var i=Y7(r);function a(p,g){var y=i((p=Wb(p)).r,(g=Wb(g)).r),c=i(p.g,g.g),C=i(p.b,g.b),E=$3(p.opacity,g.opacity);return function(M){return p.r=y(M),p.g=c(M),p.b=C(M),p.opacity=E(M),p+""}}return a.gamma=e,a})(1);function Q7(e,r){r||(r=[]);var i=e?Math.min(r.length,e.length):0,a=r.slice(),p;return function(g){for(p=0;p<i;++p)a[p]=e[p]*(1-g)+r[p]*g;return a}}function J7(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function e9(e,r){var i=r?r.length:0,a=e?Math.min(i,e.length):0,p=new Array(a),g=new Array(i),y;for(y=0;y<a;++y)p[y]=rm(e[y],r[y]);for(;y<i;++y)g[y]=r[y];return function(c){for(y=0;y<a;++y)g[y]=p[y](c);return g}}function t9(e,r){var i=new Date;return e=+e,r=+r,function(a){return i.setTime(e*(1-a)+r*a),i}}function cv(e,r){return e=+e,r=+r,function(i){return e*(1-i)+r*i}}function r9(e,r){var i={},a={},p;(e===null||typeof e!="object")&&(e={}),(r===null||typeof r!="object")&&(r={});for(p in r)p in e?i[p]=rm(e[p],r[p]):a[p]=r[p];return function(g){for(p in i)a[p]=i[p](g);return a}}var Zb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,j1=new RegExp(Zb.source,"g");function n9(e){return function(){return e}}function i9(e){return function(r){return e(r)+""}}function a9(e,r){var i=Zb.lastIndex=j1.lastIndex=0,a,p,g,y=-1,c=[],C=[];for(e=e+"",r=r+"";(a=Zb.exec(e))&&(p=j1.exec(r));)(g=p.index)>i&&(g=r.slice(i,g),c[y]?c[y]+=g:c[++y]=g),(a=a[0])===(p=p[0])?c[y]?c[y]+=p:c[++y]=p:(c[++y]=null,C.push({i:y,x:cv(a,p)})),i=j1.lastIndex;return i<r.length&&(g=r.slice(i),c[y]?c[y]+=g:c[++y]=g),c.length<2?C[0]?i9(C[0].x):n9(r):(r=C.length,function(E){for(var M=0,k;M<r;++M)c[(k=C[M]).i]=k.x(E);return c.join("")})}function rm(e,r){var i=typeof r,a;return r==null||i==="boolean"?ew(r):(i==="number"?cv:i==="string"?(a=Hg(r))?(r=a,zP):a9:r instanceof Hg?zP:r instanceof Date?t9:J7(r)?Q7:Array.isArray(r)?e9:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?r9:cv)(e,r)}function tw(e,r){return e=+e,r=+r,function(i){return Math.round(e*(1-i)+r*i)}}function o9(e,r){r===void 0&&(r=e,e=rm);for(var i=0,a=r.length-1,p=r[0],g=new Array(a<0?0:a);i<a;)g[i]=e(p,p=r[++i]);return function(y){var c=Math.max(0,Math.min(a-1,Math.floor(y*=a)));return g[c](y-c)}}function s9(e){return function(){return e}}function hv(e){return+e}var NP=[0,1];function Ao(e){return e}function Xb(e,r){return(r-=e=+e)?function(i){return(i-e)/r}:s9(isNaN(r)?NaN:.5)}function l9(e,r){var i;return e>r&&(i=e,e=r,r=i),function(a){return Math.max(e,Math.min(r,a))}}function u9(e,r,i){var a=e[0],p=e[1],g=r[0],y=r[1];return p<a?(a=Xb(p,a),g=i(y,g)):(a=Xb(a,p),g=i(g,y)),function(c){return g(a(c))}}function c9(e,r,i){var a=Math.min(e.length,r.length)-1,p=new Array(a),g=new Array(a),y=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),r=r.slice().reverse());++y<a;)p[y]=Xb(e[y],e[y+1]),g[y]=i(r[y],r[y+1]);return function(c){var C=ny(e,c,1,a)-1;return g[C](p[C](c))}}function ay(e,r){return r.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Wv(){var e=NP,r=NP,i=rm,a,p,g,y=Ao,c,C,E;function M(){var N=Math.min(e.length,r.length);return y!==Ao&&(y=l9(e[0],e[N-1])),c=N>2?c9:u9,C=E=null,k}function k(N){return N==null||isNaN(N=+N)?g:(C||(C=c(e.map(a),r,i)))(a(y(N)))}return k.invert=function(N){return y(p((E||(E=c(r,e.map(a),cv)))(N)))},k.domain=function(N){return arguments.length?(e=Array.from(N,hv),M()):e.slice()},k.range=function(N){return arguments.length?(r=Array.from(N),M()):r.slice()},k.rangeRound=function(N){return r=Array.from(N),i=tw,M()},k.clamp=function(N){return arguments.length?(y=N?!0:Ao,M()):y!==Ao},k.interpolate=function(N){return arguments.length?(i=N,M()):i},k.unknown=function(N){return arguments.length?(g=N,k):g},function(N,j){return a=N,p=j,M()}}function rw(){return Wv()(Ao,Ao)}function h9(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function fv(e,r){if((i=(e=r?e.toExponential(r-1):e.toExponential()).indexOf("e"))<0)return null;var i,a=e.slice(0,i);return[a.length>1?a[0]+a.slice(2):a,+e.slice(i+1)]}function Hp(e){return e=fv(Math.abs(e)),e?e[1]:NaN}function f9(e,r){return function(i,a){for(var p=i.length,g=[],y=0,c=e[0],C=0;p>0&&c>0&&(C+c+1>a&&(c=Math.max(1,a-C)),g.push(i.substring(p-=c,p+c)),!((C+=c+1)>a));)c=e[y=(y+1)%e.length];return g.reverse().join(r)}}function d9(e){return function(r){return r.replace(/[0-9]/g,function(i){return e[+i]})}}var p9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function qg(e){if(!(r=p9.exec(e)))throw new Error("invalid format: "+e);var r;return new nw({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}qg.prototype=nw.prototype;function nw(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}nw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function m9(e){e:for(var r=e.length,i=1,a=-1,p;i<r;++i)switch(e[i]){case".":a=p=i;break;case"0":a===0&&(a=i),p=i;break;default:if(!+e[i])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(p+1):e}var V3;function g9(e,r){var i=fv(e,r);if(!i)return e+"";var a=i[0],p=i[1],g=p-(V3=Math.max(-8,Math.min(8,Math.floor(p/3)))*3)+1,y=a.length;return g===y?a:g>y?a+new Array(g-y+1).join("0"):g>0?a.slice(0,g)+"."+a.slice(g):"0."+new Array(1-g).join("0")+fv(e,Math.max(0,r+g-1))[0]}function jP(e,r){var i=fv(e,r);if(!i)return e+"";var a=i[0],p=i[1];return p<0?"0."+new Array(-p).join("0")+a:a.length>p+1?a.slice(0,p+1)+"."+a.slice(p+1):a+new Array(p-a.length+2).join("0")}const BP={"%":(e,r)=>(e*100).toFixed(r),b:e=>Math.round(e).toString(2),c:e=>e+"",d:h9,e:(e,r)=>e.toExponential(r),f:(e,r)=>e.toFixed(r),g:(e,r)=>e.toPrecision(r),o:e=>Math.round(e).toString(8),p:(e,r)=>jP(e*100,r),r:jP,s:g9,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function FP(e){return e}var UP=Array.prototype.map,$P=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function y9(e){var r=e.grouping===void 0||e.thousands===void 0?FP:f9(UP.call(e.grouping,Number),e.thousands+""),i=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",p=e.decimal===void 0?".":e.decimal+"",g=e.numerals===void 0?FP:d9(UP.call(e.numerals,String)),y=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",C=e.nan===void 0?"NaN":e.nan+"";function E(k){k=qg(k);var N=k.fill,j=k.align,q=k.sign,H=k.symbol,W=k.zero,K=k.width,ee=k.comma,ie=k.precision,ve=k.trim,ye=k.type;ye==="n"?(ee=!0,ye="g"):BP[ye]||(ie===void 0&&(ie=12),ve=!0,ye="g"),(W||N==="0"&&j==="=")&&(W=!0,N="0",j="=");var Pe=H==="$"?i:H==="#"&&/[boxX]/.test(ye)?"0"+ye.toLowerCase():"",Me=H==="$"?a:/[%p]/.test(ye)?y:"",je=BP[ye],ht=/[defgprs%]/.test(ye);ie=ie===void 0?6:/[gprs]/.test(ye)?Math.max(1,Math.min(21,ie)):Math.max(0,Math.min(20,ie));function At(ot){var ft=Pe,rt=Me,It,kt,Ue;if(ye==="c")rt=je(ot)+rt,ot="";else{ot=+ot;var ct=ot<0||1/ot<0;if(ot=isNaN(ot)?C:je(Math.abs(ot),ie),ve&&(ot=m9(ot)),ct&&+ot==0&&q!=="+"&&(ct=!1),ft=(ct?q==="("?q:c:q==="-"||q==="("?"":q)+ft,rt=(ye==="s"?$P[8+V3/3]:"")+rt+(ct&&q==="("?")":""),ht){for(It=-1,kt=ot.length;++It<kt;)if(Ue=ot.charCodeAt(It),48>Ue||Ue>57){rt=(Ue===46?p+ot.slice(It+1):ot.slice(It))+rt,ot=ot.slice(0,It);break}}}ee&&!W&&(ot=r(ot,1/0));var nt=ft.length+ot.length+rt.length,Ct=nt<K?new Array(K-nt+1).join(N):"";switch(ee&&W&&(ot=r(Ct+ot,Ct.length?K-rt.length:1/0),Ct=""),j){case"<":ot=ft+ot+rt+Ct;break;case"=":ot=ft+Ct+ot+rt;break;case"^":ot=Ct.slice(0,nt=Ct.length>>1)+ft+ot+rt+Ct.slice(nt);break;default:ot=Ct+ft+ot+rt;break}return g(ot)}return At.toString=function(){return k+""},At}function M(k,N){var j=E((k=qg(k),k.type="f",k)),q=Math.max(-8,Math.min(8,Math.floor(Hp(N)/3)))*3,H=Math.pow(10,-q),W=$P[8+q/3];return function(K){return j(H*K)+W}}return{format:E,formatPrefix:M}}var T0,iw,H3;v9({thousands:",",grouping:[3],currency:["$",""]});function v9(e){return T0=y9(e),iw=T0.format,H3=T0.formatPrefix,T0}function _9(e){return Math.max(0,-Hp(Math.abs(e)))}function b9(e,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Hp(r)/3)))*3-Hp(Math.abs(e)))}function x9(e,r){return e=Math.abs(e),r=Math.abs(r)-e,Math.max(0,Hp(r)-Hp(e))+1}function q3(e,r,i,a){var p=qb(e,r,i),g;switch(a=qg(a??",f"),a.type){case"s":{var y=Math.max(Math.abs(e),Math.abs(r));return a.precision==null&&!isNaN(g=b9(p,y))&&(a.precision=g),H3(a,y)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(g=x9(p,Math.max(Math.abs(e),Math.abs(r))))&&(a.precision=g-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(g=_9(p))&&(a.precision=g-(a.type==="%")*2);break}}return iw(a)}function pf(e){var r=e.domain;return e.ticks=function(i){var a=r();return Vb(a[0],a[a.length-1],i??10)},e.tickFormat=function(i,a){var p=r();return q3(p[0],p[p.length-1],i??10,a)},e.nice=function(i){i==null&&(i=10);var a=r(),p=0,g=a.length-1,y=a[p],c=a[g],C,E,M=10;for(c<y&&(E=y,y=c,c=E,E=p,p=g,g=E);M-- >0;){if(E=Hb(y,c,i),E===C)return a[p]=y,a[g]=c,r(a);if(E>0)y=Math.floor(y/E)*E,c=Math.ceil(c/E)*E;else if(E<0)y=Math.ceil(y*E)/E,c=Math.floor(c*E)/E;else break;C=E}return e},e}function G3(){var e=rw();return e.copy=function(){return ay(e,G3())},ul.apply(e,arguments),pf(e)}function W3(e){var r;function i(a){return a==null||isNaN(a=+a)?r:a}return i.invert=i,i.domain=i.range=function(a){return arguments.length?(e=Array.from(a,hv),i):e.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return W3(e).unknown(r)},e=arguments.length?Array.from(e,hv):[0,1],pf(i)}function Z3(e,r){e=e.slice();var i=0,a=e.length-1,p=e[i],g=e[a],y;return g<p&&(y=i,i=a,a=y,y=p,p=g,g=y),e[i]=r.floor(p),e[a]=r.ceil(g),e}function VP(e){return Math.log(e)}function HP(e){return Math.exp(e)}function w9(e){return-Math.log(-e)}function S9(e){return-Math.exp(-e)}function P9(e){return isFinite(e)?+("1e"+e):e<0?0:e}function A9(e){return e===10?P9:e===Math.E?Math.exp:r=>Math.pow(e,r)}function C9(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),r=>Math.log(r)/e)}function qP(e){return(r,i)=>-e(-r,i)}function aw(e){const r=e(VP,HP),i=r.domain;let a=10,p,g;function y(){return p=C9(a),g=A9(a),i()[0]<0?(p=qP(p),g=qP(g),e(w9,S9)):e(VP,HP),r}return r.base=function(c){return arguments.length?(a=+c,y()):a},r.domain=function(c){return arguments.length?(i(c),y()):i()},r.ticks=c=>{const C=i();let E=C[0],M=C[C.length-1];const k=M<E;k&&([E,M]=[M,E]);let N=p(E),j=p(M),q,H;const W=c==null?10:+c;let K=[];if(!(a%1)&&j-N<W){if(N=Math.floor(N),j=Math.ceil(j),E>0){for(;N<=j;++N)for(q=1;q<a;++q)if(H=N<0?q/g(-N):q*g(N),!(H<E)){if(H>M)break;K.push(H)}}else for(;N<=j;++N)for(q=a-1;q>=1;--q)if(H=N>0?q/g(-N):q*g(N),!(H<E)){if(H>M)break;K.push(H)}K.length*2<W&&(K=Vb(E,M,W))}else K=Vb(N,j,Math.min(j-N,W)).map(g);return k?K.reverse():K},r.tickFormat=(c,C)=>{if(c==null&&(c=10),C==null&&(C=a===10?"s":","),typeof C!="function"&&(!(a%1)&&(C=qg(C)).precision==null&&(C.trim=!0),C=iw(C)),c===1/0)return C;const E=Math.max(1,a*c/r.ticks().length);return M=>{let k=M/g(Math.round(p(M)));return k*a<a-.5&&(k*=a),k<=E?C(M):""}},r.nice=()=>i(Z3(i(),{floor:c=>g(Math.floor(p(c))),ceil:c=>g(Math.ceil(p(c)))})),r}function X3(){const e=aw(Wv()).domain([1,10]);return e.copy=()=>ay(e,X3()).base(e.base()),ul.apply(e,arguments),e}function GP(e){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/e))}}function WP(e){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*e}}function ow(e){var r=1,i=e(GP(r),WP(r));return i.constant=function(a){return arguments.length?e(GP(r=+a),WP(r)):r},pf(i)}function K3(){var e=ow(Wv());return e.copy=function(){return ay(e,K3()).constant(e.constant())},ul.apply(e,arguments)}function ZP(e){return function(r){return r<0?-Math.pow(-r,e):Math.pow(r,e)}}function T9(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function E9(e){return e<0?-e*e:e*e}function sw(e){var r=e(Ao,Ao),i=1;function a(){return i===1?e(Ao,Ao):i===.5?e(T9,E9):e(ZP(i),ZP(1/i))}return r.exponent=function(p){return arguments.length?(i=+p,a()):i},pf(r)}function lw(){var e=sw(Wv());return e.copy=function(){return ay(e,lw()).exponent(e.exponent())},ul.apply(e,arguments),e}function M9(){return lw.apply(null,arguments).exponent(.5)}function XP(e){return Math.sign(e)*e*e}function R9(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Y3(){var e=rw(),r=[0,1],i=!1,a;function p(g){var y=R9(e(g));return isNaN(y)?a:i?Math.round(y):y}return p.invert=function(g){return e.invert(XP(g))},p.domain=function(g){return arguments.length?(e.domain(g),p):e.domain()},p.range=function(g){return arguments.length?(e.range((r=Array.from(g,hv)).map(XP)),p):r.slice()},p.rangeRound=function(g){return p.range(g).round(!0)},p.round=function(g){return arguments.length?(i=!!g,p):i},p.clamp=function(g){return arguments.length?(e.clamp(g),p):e.clamp()},p.unknown=function(g){return arguments.length?(a=g,p):a},p.copy=function(){return Y3(e.domain(),r).round(i).clamp(e.clamp()).unknown(a)},ul.apply(p,arguments),pf(p)}function Q3(){var e=[],r=[],i=[],a;function p(){var y=0,c=Math.max(1,r.length);for(i=new Array(c-1);++y<c;)i[y-1]=k7(e,y/c);return g}function g(y){return y==null||isNaN(y=+y)?a:r[ny(i,y)]}return g.invertExtent=function(y){var c=r.indexOf(y);return c<0?[NaN,NaN]:[c>0?i[c-1]:e[0],c<i.length?i[c]:e[e.length-1]]},g.domain=function(y){if(!arguments.length)return e.slice();e=[];for(let c of y)c!=null&&!isNaN(c=+c)&&e.push(c);return e.sort(hf),p()},g.range=function(y){return arguments.length?(r=Array.from(y),p()):r.slice()},g.unknown=function(y){return arguments.length?(a=y,g):a},g.quantiles=function(){return i.slice()},g.copy=function(){return Q3().domain(e).range(r).unknown(a)},ul.apply(g,arguments)}function J3(){var e=0,r=1,i=1,a=[.5],p=[0,1],g;function y(C){return C!=null&&C<=C?p[ny(a,C,0,i)]:g}function c(){var C=-1;for(a=new Array(i);++C<i;)a[C]=((C+1)*r-(C-i)*e)/(i+1);return y}return y.domain=function(C){return arguments.length?([e,r]=C,e=+e,r=+r,c()):[e,r]},y.range=function(C){return arguments.length?(i=(p=Array.from(C)).length-1,c()):p.slice()},y.invertExtent=function(C){var E=p.indexOf(C);return E<0?[NaN,NaN]:E<1?[e,a[0]]:E>=i?[a[i-1],r]:[a[E-1],a[E]]},y.unknown=function(C){return arguments.length&&(g=C),y},y.thresholds=function(){return a.slice()},y.copy=function(){return J3().domain([e,r]).range(p).unknown(g)},ul.apply(pf(y),arguments)}function eE(){var e=[.5],r=[0,1],i,a=1;function p(g){return g!=null&&g<=g?r[ny(e,g,0,a)]:i}return p.domain=function(g){return arguments.length?(e=Array.from(g),a=Math.min(e.length,r.length-1),p):e.slice()},p.range=function(g){return arguments.length?(r=Array.from(g),a=Math.min(e.length,r.length-1),p):r.slice()},p.invertExtent=function(g){var y=r.indexOf(g);return[e[y-1],e[y]]},p.unknown=function(g){return arguments.length?(i=g,p):i},p.copy=function(){return eE().domain(e).range(r).unknown(i)},ul.apply(p,arguments)}const B1=new Date,F1=new Date;function ca(e,r,i,a){function p(g){return e(g=arguments.length===0?new Date:new Date(+g)),g}return p.floor=g=>(e(g=new Date(+g)),g),p.ceil=g=>(e(g=new Date(g-1)),r(g,1),e(g),g),p.round=g=>{const y=p(g),c=p.ceil(g);return g-y<c-g?y:c},p.offset=(g,y)=>(r(g=new Date(+g),y==null?1:Math.floor(y)),g),p.range=(g,y,c)=>{const C=[];if(g=p.ceil(g),c=c==null?1:Math.floor(c),!(g<y)||!(c>0))return C;let E;do C.push(E=new Date(+g)),r(g,c),e(g);while(E<g&&g<y);return C},p.filter=g=>ca(y=>{if(y>=y)for(;e(y),!g(y);)y.setTime(y-1)},(y,c)=>{if(y>=y)if(c<0)for(;++c<=0;)for(;r(y,-1),!g(y););else for(;--c>=0;)for(;r(y,1),!g(y););}),i&&(p.count=(g,y)=>(B1.setTime(+g),F1.setTime(+y),e(B1),e(F1),Math.floor(i(B1,F1))),p.every=g=>(g=Math.floor(g),!isFinite(g)||!(g>0)?null:g>1?p.filter(a?y=>a(y)%g===0:y=>p.count(0,y)%g===0):p)),p}const dv=ca(()=>{},(e,r)=>{e.setTime(+e+r)},(e,r)=>r-e);dv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ca(r=>{r.setTime(Math.floor(r/e)*e)},(r,i)=>{r.setTime(+r+i*e)},(r,i)=>(i-r)/e):dv);dv.range;const eh=1e3,al=eh*60,th=al*60,ah=th*24,uw=ah*7,KP=ah*30,U1=ah*365,Ed=ca(e=>{e.setTime(e-e.getMilliseconds())},(e,r)=>{e.setTime(+e+r*eh)},(e,r)=>(r-e)/eh,e=>e.getUTCSeconds());Ed.range;const cw=ca(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*eh)},(e,r)=>{e.setTime(+e+r*al)},(e,r)=>(r-e)/al,e=>e.getMinutes());cw.range;const hw=ca(e=>{e.setUTCSeconds(0,0)},(e,r)=>{e.setTime(+e+r*al)},(e,r)=>(r-e)/al,e=>e.getUTCMinutes());hw.range;const fw=ca(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*eh-e.getMinutes()*al)},(e,r)=>{e.setTime(+e+r*th)},(e,r)=>(r-e)/th,e=>e.getHours());fw.range;const dw=ca(e=>{e.setUTCMinutes(0,0,0)},(e,r)=>{e.setTime(+e+r*th)},(e,r)=>(r-e)/th,e=>e.getUTCHours());dw.range;const oy=ca(e=>e.setHours(0,0,0,0),(e,r)=>e.setDate(e.getDate()+r),(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*al)/ah,e=>e.getDate()-1);oy.range;const Zv=ca(e=>{e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r)},(e,r)=>(r-e)/ah,e=>e.getUTCDate()-1);Zv.range;const tE=ca(e=>{e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r)},(e,r)=>(r-e)/ah,e=>Math.floor(e/ah));tE.range;function Fd(e){return ca(r=>{r.setDate(r.getDate()-(r.getDay()+7-e)%7),r.setHours(0,0,0,0)},(r,i)=>{r.setDate(r.getDate()+i*7)},(r,i)=>(i-r-(i.getTimezoneOffset()-r.getTimezoneOffset())*al)/uw)}const Xv=Fd(0),pv=Fd(1),D9=Fd(2),I9=Fd(3),qp=Fd(4),O9=Fd(5),k9=Fd(6);Xv.range;pv.range;D9.range;I9.range;qp.range;O9.range;k9.range;function Ud(e){return ca(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-e)%7),r.setUTCHours(0,0,0,0)},(r,i)=>{r.setUTCDate(r.getUTCDate()+i*7)},(r,i)=>(i-r)/uw)}const Kv=Ud(0),mv=Ud(1),L9=Ud(2),z9=Ud(3),Gp=Ud(4),N9=Ud(5),j9=Ud(6);Kv.range;mv.range;L9.range;z9.range;Gp.range;N9.range;j9.range;const pw=ca(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,r)=>{e.setMonth(e.getMonth()+r)},(e,r)=>r.getMonth()-e.getMonth()+(r.getFullYear()-e.getFullYear())*12,e=>e.getMonth());pw.range;const mw=ca(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCMonth(e.getUTCMonth()+r)},(e,r)=>r.getUTCMonth()-e.getUTCMonth()+(r.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());mw.range;const oh=ca(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r)},(e,r)=>r.getFullYear()-e.getFullYear(),e=>e.getFullYear());oh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ca(r=>{r.setFullYear(Math.floor(r.getFullYear()/e)*e),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,i)=>{r.setFullYear(r.getFullYear()+i*e)});oh.range;const sh=ca(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r)},(e,r)=>r.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());sh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ca(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/e)*e),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,i)=>{r.setUTCFullYear(r.getUTCFullYear()+i*e)});sh.range;function rE(e,r,i,a,p,g){const y=[[Ed,1,eh],[Ed,5,5*eh],[Ed,15,15*eh],[Ed,30,30*eh],[g,1,al],[g,5,5*al],[g,15,15*al],[g,30,30*al],[p,1,th],[p,3,3*th],[p,6,6*th],[p,12,12*th],[a,1,ah],[a,2,2*ah],[i,1,uw],[r,1,KP],[r,3,3*KP],[e,1,U1]];function c(E,M,k){const N=M<E;N&&([E,M]=[M,E]);const j=k&&typeof k.range=="function"?k:C(E,M,k),q=j?j.range(E,+M+1):[];return N?q.reverse():q}function C(E,M,k){const N=Math.abs(M-E)/k,j=Kx(([,,W])=>W).right(y,N);if(j===y.length)return e.every(qb(E/U1,M/U1,k));if(j===0)return dv.every(Math.max(qb(E,M,k),1));const[q,H]=y[N/y[j-1][2]<y[j][2]/N?j-1:j];return q.every(H)}return[c,C]}const[B9,F9]=rE(sh,mw,Kv,tE,dw,hw),[U9,$9]=rE(oh,pw,Xv,oy,fw,cw);function $1(e){if(0<=e.y&&e.y<100){var r=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return r.setFullYear(e.y),r}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function V1(e){if(0<=e.y&&e.y<100){var r=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return r.setUTCFullYear(e.y),r}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Pg(e,r,i){return{y:e,m:r,d:i,H:0,M:0,S:0,L:0}}function V9(e){var r=e.dateTime,i=e.date,a=e.time,p=e.periods,g=e.days,y=e.shortDays,c=e.months,C=e.shortMonths,E=Ag(p),M=Cg(p),k=Ag(g),N=Cg(g),j=Ag(y),q=Cg(y),H=Ag(c),W=Cg(c),K=Ag(C),ee=Cg(C),ie={a:ct,A:nt,b:Ct,B:Te,c:null,d:rA,e:rA,f:fL,g:wL,G:PL,H:uL,I:cL,j:hL,L:nE,m:dL,M:pL,p:et,q:st,Q:aA,s:oA,S:mL,u:gL,U:yL,V:vL,w:_L,W:bL,x:null,X:null,y:xL,Y:SL,Z:AL,"%":iA},ve={a:yt,A:Rt,b:Zt,B:Ft,c:null,d:nA,e:nA,f:ML,g:BL,G:UL,H:CL,I:TL,j:EL,L:aE,m:RL,M:DL,p:ir,q:Jt,Q:aA,s:oA,S:IL,u:OL,U:kL,V:LL,w:zL,W:NL,x:null,X:null,y:jL,Y:FL,Z:$L,"%":iA},ye={a:At,A:ot,b:ft,B:rt,c:It,d:eA,e:eA,f:aL,g:JP,G:QP,H:tA,I:tA,j:tL,L:iL,m:eL,M:rL,p:ht,q:J9,Q:sL,s:lL,S:nL,u:Z9,U:X9,V:K9,w:W9,W:Y9,x:kt,X:Ue,y:JP,Y:QP,Z:Q9,"%":oL};ie.x=Pe(i,ie),ie.X=Pe(a,ie),ie.c=Pe(r,ie),ve.x=Pe(i,ve),ve.X=Pe(a,ve),ve.c=Pe(r,ve);function Pe(St,Gt){return function(Nt){var He=[],Ht=-1,Lt=0,wr=St.length,Dr,zr,Bn;for(Nt instanceof Date||(Nt=new Date(+Nt));++Ht<wr;)St.charCodeAt(Ht)===37&&(He.push(St.slice(Lt,Ht)),(zr=YP[Dr=St.charAt(++Ht)])!=null?Dr=St.charAt(++Ht):zr=Dr==="e"?" ":"0",(Bn=Gt[Dr])&&(Dr=Bn(Nt,zr)),He.push(Dr),Lt=Ht+1);return He.push(St.slice(Lt,Ht)),He.join("")}}function Me(St,Gt){return function(Nt){var He=Pg(1900,void 0,1),Ht=je(He,St,Nt+="",0),Lt,wr;if(Ht!=Nt.length)return null;if("Q"in He)return new Date(He.Q);if("s"in He)return new Date(He.s*1e3+("L"in He?He.L:0));if(Gt&&!("Z"in He)&&(He.Z=0),"p"in He&&(He.H=He.H%12+He.p*12),He.m===void 0&&(He.m="q"in He?He.q:0),"V"in He){if(He.V<1||He.V>53)return null;"w"in He||(He.w=1),"Z"in He?(Lt=V1(Pg(He.y,0,1)),wr=Lt.getUTCDay(),Lt=wr>4||wr===0?mv.ceil(Lt):mv(Lt),Lt=Zv.offset(Lt,(He.V-1)*7),He.y=Lt.getUTCFullYear(),He.m=Lt.getUTCMonth(),He.d=Lt.getUTCDate()+(He.w+6)%7):(Lt=$1(Pg(He.y,0,1)),wr=Lt.getDay(),Lt=wr>4||wr===0?pv.ceil(Lt):pv(Lt),Lt=oy.offset(Lt,(He.V-1)*7),He.y=Lt.getFullYear(),He.m=Lt.getMonth(),He.d=Lt.getDate()+(He.w+6)%7)}else("W"in He||"U"in He)&&("w"in He||(He.w="u"in He?He.u%7:"W"in He?1:0),wr="Z"in He?V1(Pg(He.y,0,1)).getUTCDay():$1(Pg(He.y,0,1)).getDay(),He.m=0,He.d="W"in He?(He.w+6)%7+He.W*7-(wr+5)%7:He.w+He.U*7-(wr+6)%7);return"Z"in He?(He.H+=He.Z/100|0,He.M+=He.Z%100,V1(He)):$1(He)}}function je(St,Gt,Nt,He){for(var Ht=0,Lt=Gt.length,wr=Nt.length,Dr,zr;Ht<Lt;){if(He>=wr)return-1;if(Dr=Gt.charCodeAt(Ht++),Dr===37){if(Dr=Gt.charAt(Ht++),zr=ye[Dr in YP?Gt.charAt(Ht++):Dr],!zr||(He=zr(St,Nt,He))<0)return-1}else if(Dr!=Nt.charCodeAt(He++))return-1}return He}function ht(St,Gt,Nt){var He=E.exec(Gt.slice(Nt));return He?(St.p=M.get(He[0].toLowerCase()),Nt+He[0].length):-1}function At(St,Gt,Nt){var He=j.exec(Gt.slice(Nt));return He?(St.w=q.get(He[0].toLowerCase()),Nt+He[0].length):-1}function ot(St,Gt,Nt){var He=k.exec(Gt.slice(Nt));return He?(St.w=N.get(He[0].toLowerCase()),Nt+He[0].length):-1}function ft(St,Gt,Nt){var He=K.exec(Gt.slice(Nt));return He?(St.m=ee.get(He[0].toLowerCase()),Nt+He[0].length):-1}function rt(St,Gt,Nt){var He=H.exec(Gt.slice(Nt));return He?(St.m=W.get(He[0].toLowerCase()),Nt+He[0].length):-1}function It(St,Gt,Nt){return je(St,r,Gt,Nt)}function kt(St,Gt,Nt){return je(St,i,Gt,Nt)}function Ue(St,Gt,Nt){return je(St,a,Gt,Nt)}function ct(St){return y[St.getDay()]}function nt(St){return g[St.getDay()]}function Ct(St){return C[St.getMonth()]}function Te(St){return c[St.getMonth()]}function et(St){return p[+(St.getHours()>=12)]}function st(St){return 1+~~(St.getMonth()/3)}function yt(St){return y[St.getUTCDay()]}function Rt(St){return g[St.getUTCDay()]}function Zt(St){return C[St.getUTCMonth()]}function Ft(St){return c[St.getUTCMonth()]}function ir(St){return p[+(St.getUTCHours()>=12)]}function Jt(St){return 1+~~(St.getUTCMonth()/3)}return{format:function(St){var Gt=Pe(St+="",ie);return Gt.toString=function(){return St},Gt},parse:function(St){var Gt=Me(St+="",!1);return Gt.toString=function(){return St},Gt},utcFormat:function(St){var Gt=Pe(St+="",ve);return Gt.toString=function(){return St},Gt},utcParse:function(St){var Gt=Me(St+="",!0);return Gt.toString=function(){return St},Gt}}}var YP={"-":"",_:" ",0:"0"},Ca=/^\s*\d+/,H9=/^%/,q9=/[\\^$*+?|[\]().{}]/g;function en(e,r,i){var a=e<0?"-":"",p=(a?-e:e)+"",g=p.length;return a+(g<i?new Array(i-g+1).join(r)+p:p)}function G9(e){return e.replace(q9,"\\$&")}function Ag(e){return new RegExp("^(?:"+e.map(G9).join("|")+")","i")}function Cg(e){return new Map(e.map((r,i)=>[r.toLowerCase(),i]))}function W9(e,r,i){var a=Ca.exec(r.slice(i,i+1));return a?(e.w=+a[0],i+a[0].length):-1}function Z9(e,r,i){var a=Ca.exec(r.slice(i,i+1));return a?(e.u=+a[0],i+a[0].length):-1}function X9(e,r,i){var a=Ca.exec(r.slice(i,i+2));return a?(e.U=+a[0],i+a[0].length):-1}function K9(e,r,i){var a=Ca.exec(r.slice(i,i+2));return a?(e.V=+a[0],i+a[0].length):-1}function Y9(e,r,i){var a=Ca.exec(r.slice(i,i+2));return a?(e.W=+a[0],i+a[0].length):-1}function QP(e,r,i){var a=Ca.exec(r.slice(i,i+4));return a?(e.y=+a[0],i+a[0].length):-1}function JP(e,r,i){var a=Ca.exec(r.slice(i,i+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),i+a[0].length):-1}function Q9(e,r,i){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(i,i+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),i+a[0].length):-1}function J9(e,r,i){var a=Ca.exec(r.slice(i,i+1));return a?(e.q=a[0]*3-3,i+a[0].length):-1}function eL(e,r,i){var a=Ca.exec(r.slice(i,i+2));return a?(e.m=a[0]-1,i+a[0].length):-1}function eA(e,r,i){var a=Ca.exec(r.slice(i,i+2));return a?(e.d=+a[0],i+a[0].length):-1}function tL(e,r,i){var a=Ca.exec(r.slice(i,i+3));return a?(e.m=0,e.d=+a[0],i+a[0].length):-1}function tA(e,r,i){var a=Ca.exec(r.slice(i,i+2));return a?(e.H=+a[0],i+a[0].length):-1}function rL(e,r,i){var a=Ca.exec(r.slice(i,i+2));return a?(e.M=+a[0],i+a[0].length):-1}function nL(e,r,i){var a=Ca.exec(r.slice(i,i+2));return a?(e.S=+a[0],i+a[0].length):-1}function iL(e,r,i){var a=Ca.exec(r.slice(i,i+3));return a?(e.L=+a[0],i+a[0].length):-1}function aL(e,r,i){var a=Ca.exec(r.slice(i,i+6));return a?(e.L=Math.floor(a[0]/1e3),i+a[0].length):-1}function oL(e,r,i){var a=H9.exec(r.slice(i,i+1));return a?i+a[0].length:-1}function sL(e,r,i){var a=Ca.exec(r.slice(i));return a?(e.Q=+a[0],i+a[0].length):-1}function lL(e,r,i){var a=Ca.exec(r.slice(i));return a?(e.s=+a[0],i+a[0].length):-1}function rA(e,r){return en(e.getDate(),r,2)}function uL(e,r){return en(e.getHours(),r,2)}function cL(e,r){return en(e.getHours()%12||12,r,2)}function hL(e,r){return en(1+oy.count(oh(e),e),r,3)}function nE(e,r){return en(e.getMilliseconds(),r,3)}function fL(e,r){return nE(e,r)+"000"}function dL(e,r){return en(e.getMonth()+1,r,2)}function pL(e,r){return en(e.getMinutes(),r,2)}function mL(e,r){return en(e.getSeconds(),r,2)}function gL(e){var r=e.getDay();return r===0?7:r}function yL(e,r){return en(Xv.count(oh(e)-1,e),r,2)}function iE(e){var r=e.getDay();return r>=4||r===0?qp(e):qp.ceil(e)}function vL(e,r){return e=iE(e),en(qp.count(oh(e),e)+(oh(e).getDay()===4),r,2)}function _L(e){return e.getDay()}function bL(e,r){return en(pv.count(oh(e)-1,e),r,2)}function xL(e,r){return en(e.getFullYear()%100,r,2)}function wL(e,r){return e=iE(e),en(e.getFullYear()%100,r,2)}function SL(e,r){return en(e.getFullYear()%1e4,r,4)}function PL(e,r){var i=e.getDay();return e=i>=4||i===0?qp(e):qp.ceil(e),en(e.getFullYear()%1e4,r,4)}function AL(e){var r=e.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+en(r/60|0,"0",2)+en(r%60,"0",2)}function nA(e,r){return en(e.getUTCDate(),r,2)}function CL(e,r){return en(e.getUTCHours(),r,2)}function TL(e,r){return en(e.getUTCHours()%12||12,r,2)}function EL(e,r){return en(1+Zv.count(sh(e),e),r,3)}function aE(e,r){return en(e.getUTCMilliseconds(),r,3)}function ML(e,r){return aE(e,r)+"000"}function RL(e,r){return en(e.getUTCMonth()+1,r,2)}function DL(e,r){return en(e.getUTCMinutes(),r,2)}function IL(e,r){return en(e.getUTCSeconds(),r,2)}function OL(e){var r=e.getUTCDay();return r===0?7:r}function kL(e,r){return en(Kv.count(sh(e)-1,e),r,2)}function oE(e){var r=e.getUTCDay();return r>=4||r===0?Gp(e):Gp.ceil(e)}function LL(e,r){return e=oE(e),en(Gp.count(sh(e),e)+(sh(e).getUTCDay()===4),r,2)}function zL(e){return e.getUTCDay()}function NL(e,r){return en(mv.count(sh(e)-1,e),r,2)}function jL(e,r){return en(e.getUTCFullYear()%100,r,2)}function BL(e,r){return e=oE(e),en(e.getUTCFullYear()%100,r,2)}function FL(e,r){return en(e.getUTCFullYear()%1e4,r,4)}function UL(e,r){var i=e.getUTCDay();return e=i>=4||i===0?Gp(e):Gp.ceil(e),en(e.getUTCFullYear()%1e4,r,4)}function $L(){return"+0000"}function iA(){return"%"}function aA(e){return+e}function oA(e){return Math.floor(+e/1e3)}var Rp,sE,lE;VL({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function VL(e){return Rp=V9(e),sE=Rp.format,Rp.parse,lE=Rp.utcFormat,Rp.utcParse,Rp}function HL(e){return new Date(e)}function qL(e){return e instanceof Date?+e:+new Date(+e)}function gw(e,r,i,a,p,g,y,c,C,E){var M=rw(),k=M.invert,N=M.domain,j=E(".%L"),q=E(":%S"),H=E("%I:%M"),W=E("%I %p"),K=E("%a %d"),ee=E("%b %d"),ie=E("%B"),ve=E("%Y");function ye(Pe){return(C(Pe)<Pe?j:c(Pe)<Pe?q:y(Pe)<Pe?H:g(Pe)<Pe?W:a(Pe)<Pe?p(Pe)<Pe?K:ee:i(Pe)<Pe?ie:ve)(Pe)}return M.invert=function(Pe){return new Date(k(Pe))},M.domain=function(Pe){return arguments.length?N(Array.from(Pe,qL)):N().map(HL)},M.ticks=function(Pe){var Me=N();return e(Me[0],Me[Me.length-1],Pe??10)},M.tickFormat=function(Pe,Me){return Me==null?ye:E(Me)},M.nice=function(Pe){var Me=N();return(!Pe||typeof Pe.range!="function")&&(Pe=r(Me[0],Me[Me.length-1],Pe??10)),Pe?N(Z3(Me,Pe)):M},M.copy=function(){return ay(M,gw(e,r,i,a,p,g,y,c,C,E))},M}function GL(){return ul.apply(gw(U9,$9,oh,pw,Xv,oy,fw,cw,Ed,sE).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function WL(){return ul.apply(gw(B9,F9,sh,mw,Kv,Zv,dw,hw,Ed,lE).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Yv(){var e=0,r=1,i,a,p,g,y=Ao,c=!1,C;function E(k){return k==null||isNaN(k=+k)?C:y(p===0?.5:(k=(g(k)-i)*p,c?Math.max(0,Math.min(1,k)):k))}E.domain=function(k){return arguments.length?([e,r]=k,i=g(e=+e),a=g(r=+r),p=i===a?0:1/(a-i),E):[e,r]},E.clamp=function(k){return arguments.length?(c=!!k,E):c},E.interpolator=function(k){return arguments.length?(y=k,E):y};function M(k){return function(N){var j,q;return arguments.length?([j,q]=N,y=k(j,q),E):[y(0),y(1)]}}return E.range=M(rm),E.rangeRound=M(tw),E.unknown=function(k){return arguments.length?(C=k,E):C},function(k){return g=k,i=k(e),a=k(r),p=i===a?0:1/(a-i),E}}function mf(e,r){return r.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function uE(){var e=pf(Yv()(Ao));return e.copy=function(){return mf(e,uE())},ch.apply(e,arguments)}function cE(){var e=aw(Yv()).domain([1,10]);return e.copy=function(){return mf(e,cE()).base(e.base())},ch.apply(e,arguments)}function hE(){var e=ow(Yv());return e.copy=function(){return mf(e,hE()).constant(e.constant())},ch.apply(e,arguments)}function yw(){var e=sw(Yv());return e.copy=function(){return mf(e,yw()).exponent(e.exponent())},ch.apply(e,arguments)}function ZL(){return yw.apply(null,arguments).exponent(.5)}function fE(){var e=[],r=Ao;function i(a){if(a!=null&&!isNaN(a=+a))return r((ny(e,a,1)-1)/(e.length-1))}return i.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let p of a)p!=null&&!isNaN(p=+p)&&e.push(p);return e.sort(hf),i},i.interpolator=function(a){return arguments.length?(r=a,i):r},i.range=function(){return e.map((a,p)=>r(p/(e.length-1)))},i.quantiles=function(a){return Array.from({length:a+1},(p,g)=>O7(e,g/a))},i.copy=function(){return fE(r).domain(e)},ch.apply(i,arguments)}function Qv(){var e=0,r=.5,i=1,a=1,p,g,y,c,C,E=Ao,M,k=!1,N;function j(H){return isNaN(H=+H)?N:(H=.5+((H=+M(H))-g)*(a*H<a*g?c:C),E(k?Math.max(0,Math.min(1,H)):H))}j.domain=function(H){return arguments.length?([e,r,i]=H,p=M(e=+e),g=M(r=+r),y=M(i=+i),c=p===g?0:.5/(g-p),C=g===y?0:.5/(y-g),a=g<p?-1:1,j):[e,r,i]},j.clamp=function(H){return arguments.length?(k=!!H,j):k},j.interpolator=function(H){return arguments.length?(E=H,j):E};function q(H){return function(W){var K,ee,ie;return arguments.length?([K,ee,ie]=W,E=o9(H,[K,ee,ie]),j):[E(0),E(.5),E(1)]}}return j.range=q(rm),j.rangeRound=q(tw),j.unknown=function(H){return arguments.length?(N=H,j):N},function(H){return M=H,p=H(e),g=H(r),y=H(i),c=p===g?0:.5/(g-p),C=g===y?0:.5/(y-g),a=g<p?-1:1,j}}function dE(){var e=pf(Qv()(Ao));return e.copy=function(){return mf(e,dE())},ch.apply(e,arguments)}function pE(){var e=aw(Qv()).domain([.1,1,10]);return e.copy=function(){return mf(e,pE()).base(e.base())},ch.apply(e,arguments)}function mE(){var e=ow(Qv());return e.copy=function(){return mf(e,mE()).constant(e.constant())},ch.apply(e,arguments)}function vw(){var e=sw(Qv());return e.copy=function(){return mf(e,vw()).exponent(e.exponent())},ch.apply(e,arguments)}function XL(){return vw.apply(null,arguments).exponent(.5)}const Rg=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Qx,scaleDiverging:dE,scaleDivergingLog:pE,scaleDivergingPow:vw,scaleDivergingSqrt:XL,scaleDivergingSymlog:mE,scaleIdentity:W3,scaleImplicit:Gb,scaleLinear:G3,scaleLog:X3,scaleOrdinal:Yx,scalePoint:z7,scalePow:lw,scaleQuantile:Q3,scaleQuantize:J3,scaleRadial:Y3,scaleSequential:uE,scaleSequentialLog:cE,scaleSequentialPow:yw,scaleSequentialQuantile:fE,scaleSequentialSqrt:ZL,scaleSequentialSymlog:hE,scaleSqrt:M9,scaleSymlog:K3,scaleThreshold:eE,scaleTime:GL,scaleUtc:WL,tickFormat:q3},Symbol.toStringTag,{value:"Module"}));var gf=e=>e.chartData,KL=it([gf],e=>{var r=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:r,dataStartIndex:0}}),_w=(e,r,i,a)=>a?KL(e):gf(e);function Wp(e){if(Array.isArray(e)&&e.length===2){var[r,i]=e;if(Rs(r)&&Rs(i))return!0}return!1}function sA(e,r,i){return i?e:[Math.min(e[0],r[0]),Math.max(e[1],r[1])]}function YL(e,r){if(r&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[i,a]=e,p,g;if(Rs(i))p=i;else if(typeof i=="function")return;if(Rs(a))g=a;else if(typeof a=="function")return;var y=[p,g];if(Wp(y))return y}}function QL(e,r,i){if(!(!i&&r==null)){if(typeof e=="function"&&r!=null)try{var a=e(r,i);if(Wp(a))return sA(a,r,i)}catch{}if(Array.isArray(e)&&e.length===2){var[p,g]=e,y,c;if(p==="auto")r!=null&&(y=Math.min(...r));else if(Pr(p))y=p;else if(typeof p=="function")try{r!=null&&(y=p(r?.[0]))}catch{}else if(typeof p=="string"&&JS.test(p)){var C=JS.exec(p);if(C==null||r==null)y=void 0;else{var E=+C[1];y=r[0]-E}}else y=r?.[0];if(g==="auto")r!=null&&(c=Math.max(...r));else if(Pr(g))c=g;else if(typeof g=="function")try{r!=null&&(c=g(r?.[1]))}catch{}else if(typeof g=="string"&&eP.test(g)){var M=eP.exec(g);if(M==null||r==null)c=void 0;else{var k=+M[1];c=r[1]+k}}else c=r?.[1];var N=[y,c];if(Wp(N))return r==null?N:sA(N,r,i)}}}var nm=1e9,JL={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},xw,ti=!0,ll="[DecimalError] ",Id=ll+"Invalid argument: ",bw=ll+"Exponent out of range: ",im=Math.floor,Ad=Math.pow,ez=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Cs,wa=1e7,Xn=7,gE=9007199254740991,gv=im(gE/Xn),Xt={};Xt.absoluteValue=Xt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Xt.comparedTo=Xt.cmp=function(e){var r,i,a,p,g=this;if(e=new g.constructor(e),g.s!==e.s)return g.s||-e.s;if(g.e!==e.e)return g.e>e.e^g.s<0?1:-1;for(a=g.d.length,p=e.d.length,r=0,i=a<p?a:p;r<i;++r)if(g.d[r]!==e.d[r])return g.d[r]>e.d[r]^g.s<0?1:-1;return a===p?0:a>p^g.s<0?1:-1};Xt.decimalPlaces=Xt.dp=function(){var e=this,r=e.d.length-1,i=(r-e.e)*Xn;if(r=e.d[r],r)for(;r%10==0;r/=10)i--;return i<0?0:i};Xt.dividedBy=Xt.div=function(e){return nh(this,new this.constructor(e))};Xt.dividedToIntegerBy=Xt.idiv=function(e){var r=this,i=r.constructor;return Dn(nh(r,new i(e),0,1),i.precision)};Xt.equals=Xt.eq=function(e){return!this.cmp(e)};Xt.exponent=function(){return Vi(this)};Xt.greaterThan=Xt.gt=function(e){return this.cmp(e)>0};Xt.greaterThanOrEqualTo=Xt.gte=function(e){return this.cmp(e)>=0};Xt.isInteger=Xt.isint=function(){return this.e>this.d.length-2};Xt.isNegative=Xt.isneg=function(){return this.s<0};Xt.isPositive=Xt.ispos=function(){return this.s>0};Xt.isZero=function(){return this.s===0};Xt.lessThan=Xt.lt=function(e){return this.cmp(e)<0};Xt.lessThanOrEqualTo=Xt.lte=function(e){return this.cmp(e)<1};Xt.logarithm=Xt.log=function(e){var r,i=this,a=i.constructor,p=a.precision,g=p+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(Cs))throw Error(ll+"NaN");if(i.s<1)throw Error(ll+(i.s?"NaN":"-Infinity"));return i.eq(Cs)?new a(0):(ti=!1,r=nh(Gg(i,g),Gg(e,g),g),ti=!0,Dn(r,p))};Xt.minus=Xt.sub=function(e){var r=this;return e=new r.constructor(e),r.s==e.s?_E(r,e):yE(r,(e.s=-e.s,e))};Xt.modulo=Xt.mod=function(e){var r,i=this,a=i.constructor,p=a.precision;if(e=new a(e),!e.s)throw Error(ll+"NaN");return i.s?(ti=!1,r=nh(i,e,0,1).times(e),ti=!0,i.minus(r)):Dn(new a(i),p)};Xt.naturalExponential=Xt.exp=function(){return vE(this)};Xt.naturalLogarithm=Xt.ln=function(){return Gg(this)};Xt.negated=Xt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Xt.plus=Xt.add=function(e){var r=this;return e=new r.constructor(e),r.s==e.s?yE(r,e):_E(r,(e.s=-e.s,e))};Xt.precision=Xt.sd=function(e){var r,i,a,p=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Id+e);if(r=Vi(p)+1,a=p.d.length-1,i=a*Xn+1,a=p.d[a],a){for(;a%10==0;a/=10)i--;for(a=p.d[0];a>=10;a/=10)i++}return e&&r>i?r:i};Xt.squareRoot=Xt.sqrt=function(){var e,r,i,a,p,g,y,c=this,C=c.constructor;if(c.s<1){if(!c.s)return new C(0);throw Error(ll+"NaN")}for(e=Vi(c),ti=!1,p=Math.sqrt(+c),p==0||p==1/0?(r=tc(c.d),(r.length+e)%2==0&&(r+="0"),p=Math.sqrt(r),e=im((e+1)/2)-(e<0||e%2),p==1/0?r="5e"+e:(r=p.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),a=new C(r)):a=new C(p.toString()),i=C.precision,p=y=i+3;;)if(g=a,a=g.plus(nh(c,g,y+2)).times(.5),tc(g.d).slice(0,y)===(r=tc(a.d)).slice(0,y)){if(r=r.slice(y-3,y+1),p==y&&r=="4999"){if(Dn(g,i+1,0),g.times(g).eq(c)){a=g;break}}else if(r!="9999")break;y+=4}return ti=!0,Dn(a,i)};Xt.times=Xt.mul=function(e){var r,i,a,p,g,y,c,C,E,M=this,k=M.constructor,N=M.d,j=(e=new k(e)).d;if(!M.s||!e.s)return new k(0);for(e.s*=M.s,i=M.e+e.e,C=N.length,E=j.length,C<E&&(g=N,N=j,j=g,y=C,C=E,E=y),g=[],y=C+E,a=y;a--;)g.push(0);for(a=E;--a>=0;){for(r=0,p=C+a;p>a;)c=g[p]+j[a]*N[p-a-1]+r,g[p--]=c%wa|0,r=c/wa|0;g[p]=(g[p]+r)%wa|0}for(;!g[--y];)g.pop();return r?++i:g.shift(),e.d=g,e.e=i,ti?Dn(e,k.precision):e};Xt.toDecimalPlaces=Xt.todp=function(e,r){var i=this,a=i.constructor;return i=new a(i),e===void 0?i:(ac(e,0,nm),r===void 0?r=a.rounding:ac(r,0,8),Dn(i,e+Vi(i)+1,r))};Xt.toExponential=function(e,r){var i,a=this,p=a.constructor;return e===void 0?i=zd(a,!0):(ac(e,0,nm),r===void 0?r=p.rounding:ac(r,0,8),a=Dn(new p(a),e+1,r),i=zd(a,!0,e+1)),i};Xt.toFixed=function(e,r){var i,a,p=this,g=p.constructor;return e===void 0?zd(p):(ac(e,0,nm),r===void 0?r=g.rounding:ac(r,0,8),a=Dn(new g(p),e+Vi(p)+1,r),i=zd(a.abs(),!1,e+Vi(a)+1),p.isneg()&&!p.isZero()?"-"+i:i)};Xt.toInteger=Xt.toint=function(){var e=this,r=e.constructor;return Dn(new r(e),Vi(e)+1,r.rounding)};Xt.toNumber=function(){return+this};Xt.toPower=Xt.pow=function(e){var r,i,a,p,g,y,c=this,C=c.constructor,E=12,M=+(e=new C(e));if(!e.s)return new C(Cs);if(c=new C(c),!c.s){if(e.s<1)throw Error(ll+"Infinity");return c}if(c.eq(Cs))return c;if(a=C.precision,e.eq(Cs))return Dn(c,a);if(r=e.e,i=e.d.length-1,y=r>=i,g=c.s,y){if((i=M<0?-M:M)<=gE){for(p=new C(Cs),r=Math.ceil(a/Xn+4),ti=!1;i%2&&(p=p.times(c),uA(p.d,r)),i=im(i/2),i!==0;)c=c.times(c),uA(c.d,r);return ti=!0,e.s<0?new C(Cs).div(p):Dn(p,a)}}else if(g<0)throw Error(ll+"NaN");return g=g<0&&e.d[Math.max(r,i)]&1?-1:1,c.s=1,ti=!1,p=e.times(Gg(c,a+E)),ti=!0,p=vE(p),p.s=g,p};Xt.toPrecision=function(e,r){var i,a,p=this,g=p.constructor;return e===void 0?(i=Vi(p),a=zd(p,i<=g.toExpNeg||i>=g.toExpPos)):(ac(e,1,nm),r===void 0?r=g.rounding:ac(r,0,8),p=Dn(new g(p),e,r),i=Vi(p),a=zd(p,e<=i||i<=g.toExpNeg,e)),a};Xt.toSignificantDigits=Xt.tosd=function(e,r){var i=this,a=i.constructor;return e===void 0?(e=a.precision,r=a.rounding):(ac(e,1,nm),r===void 0?r=a.rounding:ac(r,0,8)),Dn(new a(i),e,r)};Xt.toString=Xt.valueOf=Xt.val=Xt.toJSON=Xt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,r=Vi(e),i=e.constructor;return zd(e,r<=i.toExpNeg||r>=i.toExpPos)};function yE(e,r){var i,a,p,g,y,c,C,E,M=e.constructor,k=M.precision;if(!e.s||!r.s)return r.s||(r=new M(e)),ti?Dn(r,k):r;if(C=e.d,E=r.d,y=e.e,p=r.e,C=C.slice(),g=y-p,g){for(g<0?(a=C,g=-g,c=E.length):(a=E,p=y,c=C.length),y=Math.ceil(k/Xn),c=y>c?y+1:c+1,g>c&&(g=c,a.length=1),a.reverse();g--;)a.push(0);a.reverse()}for(c=C.length,g=E.length,c-g<0&&(g=c,a=E,E=C,C=a),i=0;g;)i=(C[--g]=C[g]+E[g]+i)/wa|0,C[g]%=wa;for(i&&(C.unshift(i),++p),c=C.length;C[--c]==0;)C.pop();return r.d=C,r.e=p,ti?Dn(r,k):r}function ac(e,r,i){if(e!==~~e||e<r||e>i)throw Error(Id+e)}function tc(e){var r,i,a,p=e.length-1,g="",y=e[0];if(p>0){for(g+=y,r=1;r<p;r++)a=e[r]+"",i=Xn-a.length,i&&(g+=lf(i)),g+=a;y=e[r],a=y+"",i=Xn-a.length,i&&(g+=lf(i))}else if(y===0)return"0";for(;y%10===0;)y/=10;return g+y}var nh=(function(){function e(a,p){var g,y=0,c=a.length;for(a=a.slice();c--;)g=a[c]*p+y,a[c]=g%wa|0,y=g/wa|0;return y&&a.unshift(y),a}function r(a,p,g,y){var c,C;if(g!=y)C=g>y?1:-1;else for(c=C=0;c<g;c++)if(a[c]!=p[c]){C=a[c]>p[c]?1:-1;break}return C}function i(a,p,g){for(var y=0;g--;)a[g]-=y,y=a[g]<p[g]?1:0,a[g]=y*wa+a[g]-p[g];for(;!a[0]&&a.length>1;)a.shift()}return function(a,p,g,y){var c,C,E,M,k,N,j,q,H,W,K,ee,ie,ve,ye,Pe,Me,je,ht=a.constructor,At=a.s==p.s?1:-1,ot=a.d,ft=p.d;if(!a.s)return new ht(a);if(!p.s)throw Error(ll+"Division by zero");for(C=a.e-p.e,Me=ft.length,ye=ot.length,j=new ht(At),q=j.d=[],E=0;ft[E]==(ot[E]||0);)++E;if(ft[E]>(ot[E]||0)&&--C,g==null?ee=g=ht.precision:y?ee=g+(Vi(a)-Vi(p))+1:ee=g,ee<0)return new ht(0);if(ee=ee/Xn+2|0,E=0,Me==1)for(M=0,ft=ft[0],ee++;(E<ye||M)&&ee--;E++)ie=M*wa+(ot[E]||0),q[E]=ie/ft|0,M=ie%ft|0;else{for(M=wa/(ft[0]+1)|0,M>1&&(ft=e(ft,M),ot=e(ot,M),Me=ft.length,ye=ot.length),ve=Me,H=ot.slice(0,Me),W=H.length;W<Me;)H[W++]=0;je=ft.slice(),je.unshift(0),Pe=ft[0],ft[1]>=wa/2&&++Pe;do M=0,c=r(ft,H,Me,W),c<0?(K=H[0],Me!=W&&(K=K*wa+(H[1]||0)),M=K/Pe|0,M>1?(M>=wa&&(M=wa-1),k=e(ft,M),N=k.length,W=H.length,c=r(k,H,N,W),c==1&&(M--,i(k,Me<N?je:ft,N))):(M==0&&(c=M=1),k=ft.slice()),N=k.length,N<W&&k.unshift(0),i(H,k,W),c==-1&&(W=H.length,c=r(ft,H,Me,W),c<1&&(M++,i(H,Me<W?je:ft,W))),W=H.length):c===0&&(M++,H=[0]),q[E++]=M,c&&H[0]?H[W++]=ot[ve]||0:(H=[ot[ve]],W=1);while((ve++<ye||H[0]!==void 0)&&ee--)}return q[0]||q.shift(),j.e=C,Dn(j,y?g+Vi(j)+1:g)}})();function vE(e,r){var i,a,p,g,y,c,C=0,E=0,M=e.constructor,k=M.precision;if(Vi(e)>16)throw Error(bw+Vi(e));if(!e.s)return new M(Cs);for(ti=!1,c=k,y=new M(.03125);e.abs().gte(.1);)e=e.times(y),E+=5;for(a=Math.log(Ad(2,E))/Math.LN10*2+5|0,c+=a,i=p=g=new M(Cs),M.precision=c;;){if(p=Dn(p.times(e),c),i=i.times(++C),y=g.plus(nh(p,i,c)),tc(y.d).slice(0,c)===tc(g.d).slice(0,c)){for(;E--;)g=Dn(g.times(g),c);return M.precision=k,r==null?(ti=!0,Dn(g,k)):g}g=y}}function Vi(e){for(var r=e.e*Xn,i=e.d[0];i>=10;i/=10)r++;return r}function H1(e,r,i){if(r>e.LN10.sd())throw ti=!0,i&&(e.precision=i),Error(ll+"LN10 precision limit exceeded");return Dn(new e(e.LN10),r)}function lf(e){for(var r="";e--;)r+="0";return r}function Gg(e,r){var i,a,p,g,y,c,C,E,M,k=1,N=10,j=e,q=j.d,H=j.constructor,W=H.precision;if(j.s<1)throw Error(ll+(j.s?"NaN":"-Infinity"));if(j.eq(Cs))return new H(0);if(r==null?(ti=!1,E=W):E=r,j.eq(10))return r==null&&(ti=!0),H1(H,E);if(E+=N,H.precision=E,i=tc(q),a=i.charAt(0),g=Vi(j),Math.abs(g)<15e14){for(;a<7&&a!=1||a==1&&i.charAt(1)>3;)j=j.times(e),i=tc(j.d),a=i.charAt(0),k++;g=Vi(j),a>1?(j=new H("0."+i),g++):j=new H(a+"."+i.slice(1))}else return C=H1(H,E+2,W).times(g+""),j=Gg(new H(a+"."+i.slice(1)),E-N).plus(C),H.precision=W,r==null?(ti=!0,Dn(j,W)):j;for(c=y=j=nh(j.minus(Cs),j.plus(Cs),E),M=Dn(j.times(j),E),p=3;;){if(y=Dn(y.times(M),E),C=c.plus(nh(y,new H(p),E)),tc(C.d).slice(0,E)===tc(c.d).slice(0,E))return c=c.times(2),g!==0&&(c=c.plus(H1(H,E+2,W).times(g+""))),c=nh(c,new H(k),E),H.precision=W,r==null?(ti=!0,Dn(c,W)):c;c=C,p+=2}}function lA(e,r){var i,a,p;for((i=r.indexOf("."))>-1&&(r=r.replace(".","")),(a=r.search(/e/i))>0?(i<0&&(i=a),i+=+r.slice(a+1),r=r.substring(0,a)):i<0&&(i=r.length),a=0;r.charCodeAt(a)===48;)++a;for(p=r.length;r.charCodeAt(p-1)===48;)--p;if(r=r.slice(a,p),r){if(p-=a,i=i-a-1,e.e=im(i/Xn),e.d=[],a=(i+1)%Xn,i<0&&(a+=Xn),a<p){for(a&&e.d.push(+r.slice(0,a)),p-=Xn;a<p;)e.d.push(+r.slice(a,a+=Xn));r=r.slice(a),a=Xn-r.length}else a-=p;for(;a--;)r+="0";if(e.d.push(+r),ti&&(e.e>gv||e.e<-gv))throw Error(bw+i)}else e.s=0,e.e=0,e.d=[0];return e}function Dn(e,r,i){var a,p,g,y,c,C,E,M,k=e.d;for(y=1,g=k[0];g>=10;g/=10)y++;if(a=r-y,a<0)a+=Xn,p=r,E=k[M=0];else{if(M=Math.ceil((a+1)/Xn),g=k.length,M>=g)return e;for(E=g=k[M],y=1;g>=10;g/=10)y++;a%=Xn,p=a-Xn+y}if(i!==void 0&&(g=Ad(10,y-p-1),c=E/g%10|0,C=r<0||k[M+1]!==void 0||E%g,C=i<4?(c||C)&&(i==0||i==(e.s<0?3:2)):c>5||c==5&&(i==4||C||i==6&&(a>0?p>0?E/Ad(10,y-p):0:k[M-1])%10&1||i==(e.s<0?8:7))),r<1||!k[0])return C?(g=Vi(e),k.length=1,r=r-g-1,k[0]=Ad(10,(Xn-r%Xn)%Xn),e.e=im(-r/Xn)||0):(k.length=1,k[0]=e.e=e.s=0),e;if(a==0?(k.length=M,g=1,M--):(k.length=M+1,g=Ad(10,Xn-a),k[M]=p>0?(E/Ad(10,y-p)%Ad(10,p)|0)*g:0),C)for(;;)if(M==0){(k[0]+=g)==wa&&(k[0]=1,++e.e);break}else{if(k[M]+=g,k[M]!=wa)break;k[M--]=0,g=1}for(a=k.length;k[--a]===0;)k.pop();if(ti&&(e.e>gv||e.e<-gv))throw Error(bw+Vi(e));return e}function _E(e,r){var i,a,p,g,y,c,C,E,M,k,N=e.constructor,j=N.precision;if(!e.s||!r.s)return r.s?r.s=-r.s:r=new N(e),ti?Dn(r,j):r;if(C=e.d,k=r.d,a=r.e,E=e.e,C=C.slice(),y=E-a,y){for(M=y<0,M?(i=C,y=-y,c=k.length):(i=k,a=E,c=C.length),p=Math.max(Math.ceil(j/Xn),c)+2,y>p&&(y=p,i.length=1),i.reverse(),p=y;p--;)i.push(0);i.reverse()}else{for(p=C.length,c=k.length,M=p<c,M&&(c=p),p=0;p<c;p++)if(C[p]!=k[p]){M=C[p]<k[p];break}y=0}for(M&&(i=C,C=k,k=i,r.s=-r.s),c=C.length,p=k.length-c;p>0;--p)C[c++]=0;for(p=k.length;p>y;){if(C[--p]<k[p]){for(g=p;g&&C[--g]===0;)C[g]=wa-1;--C[g],C[p]+=wa}C[p]-=k[p]}for(;C[--c]===0;)C.pop();for(;C[0]===0;C.shift())--a;return C[0]?(r.d=C,r.e=a,ti?Dn(r,j):r):new N(0)}function zd(e,r,i){var a,p=Vi(e),g=tc(e.d),y=g.length;return r?(i&&(a=i-y)>0?g=g.charAt(0)+"."+g.slice(1)+lf(a):y>1&&(g=g.charAt(0)+"."+g.slice(1)),g=g+(p<0?"e":"e+")+p):p<0?(g="0."+lf(-p-1)+g,i&&(a=i-y)>0&&(g+=lf(a))):p>=y?(g+=lf(p+1-y),i&&(a=i-p-1)>0&&(g=g+"."+lf(a))):((a=p+1)<y&&(g=g.slice(0,a)+"."+g.slice(a)),i&&(a=i-y)>0&&(p+1===y&&(g+="."),g+=lf(a))),e.s<0?"-"+g:g}function uA(e,r){if(e.length>r)return e.length=r,!0}function bE(e){var r,i,a;function p(g){var y=this;if(!(y instanceof p))return new p(g);if(y.constructor=p,g instanceof p){y.s=g.s,y.e=g.e,y.d=(g=g.d)?g.slice():g;return}if(typeof g=="number"){if(g*0!==0)throw Error(Id+g);if(g>0)y.s=1;else if(g<0)g=-g,y.s=-1;else{y.s=0,y.e=0,y.d=[0];return}if(g===~~g&&g<1e7){y.e=0,y.d=[g];return}return lA(y,g.toString())}else if(typeof g!="string")throw Error(Id+g);if(g.charCodeAt(0)===45?(g=g.slice(1),y.s=-1):y.s=1,ez.test(g))lA(y,g);else throw Error(Id+g)}if(p.prototype=Xt,p.ROUND_UP=0,p.ROUND_DOWN=1,p.ROUND_CEIL=2,p.ROUND_FLOOR=3,p.ROUND_HALF_UP=4,p.ROUND_HALF_DOWN=5,p.ROUND_HALF_EVEN=6,p.ROUND_HALF_CEIL=7,p.ROUND_HALF_FLOOR=8,p.clone=bE,p.config=p.set=tz,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<a.length;)e.hasOwnProperty(i=a[r++])||(e[i]=this[i]);return p.config(e),p}function tz(e){if(!e||typeof e!="object")throw Error(ll+"Object expected");var r,i,a,p=["precision",1,nm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(r=0;r<p.length;r+=3)if((a=e[i=p[r]])!==void 0)if(im(a)===a&&a>=p[r+1]&&a<=p[r+2])this[i]=a;else throw Error(Id+i+": "+a);if((a=e[i="LN10"])!==void 0)if(a==Math.LN10)this[i]=new this(a);else throw Error(Id+i+": "+a);return this}var xw=bE(JL);Cs=new xw(1);const _n=xw;var rz=e=>e,xE={},wE=e=>e===xE,cA=e=>function r(){return arguments.length===0||arguments.length===1&&wE(arguments.length<=0?void 0:arguments[0])?r:e(...arguments)},SE=(e,r)=>e===1?r:cA(function(){for(var i=arguments.length,a=new Array(i),p=0;p<i;p++)a[p]=arguments[p];var g=a.filter(y=>y!==xE).length;return g>=e?r(...a):SE(e-g,cA(function(){for(var y=arguments.length,c=new Array(y),C=0;C<y;C++)c[C]=arguments[C];var E=a.map(M=>wE(M)?c.shift():M);return r(...E,...c)}))}),Jv=e=>SE(e.length,e),Kb=(e,r)=>{for(var i=[],a=e;a<r;++a)i[a-e]=a;return i},nz=Jv((e,r)=>Array.isArray(r)?r.map(e):Object.keys(r).map(i=>r[i]).map(e)),iz=function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];if(!i.length)return rz;var p=i.reverse(),g=p[0],y=p.slice(1);return function(){return y.reduce((c,C)=>C(c),g(...arguments))}},Yb=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),PE=e=>{var r=null,i=null;return function(){for(var a=arguments.length,p=new Array(a),g=0;g<a;g++)p[g]=arguments[g];return r&&p.every((y,c)=>{var C;return y===((C=r)===null||C===void 0?void 0:C[c])})||(r=p,i=e(...p)),i}};function AE(e){var r;return e===0?r=1:r=Math.floor(new _n(e).abs().log(10).toNumber())+1,r}function CE(e,r,i){for(var a=new _n(e),p=0,g=[];a.lt(r)&&p<1e5;)g.push(a.toNumber()),a=a.add(i),p++;return g}Jv((e,r,i)=>{var a=+e,p=+r;return a+i*(p-a)});Jv((e,r,i)=>{var a=r-+e;return a=a||1/0,(i-e)/a});Jv((e,r,i)=>{var a=r-+e;return a=a||1/0,Math.max(0,Math.min(1,(i-e)/a))});var TE=e=>{var[r,i]=e,[a,p]=[r,i];return r>i&&([a,p]=[i,r]),[a,p]},EE=(e,r,i)=>{if(e.lte(0))return new _n(0);var a=AE(e.toNumber()),p=new _n(10).pow(a),g=e.div(p),y=a!==1?.05:.1,c=new _n(Math.ceil(g.div(y).toNumber())).add(i).mul(y),C=c.mul(p);return r?new _n(C.toNumber()):new _n(Math.ceil(C.toNumber()))},az=(e,r,i)=>{var a=new _n(1),p=new _n(e);if(!p.isint()&&i){var g=Math.abs(e);g<1?(a=new _n(10).pow(AE(e)-1),p=new _n(Math.floor(p.div(a).toNumber())).mul(a)):g>1&&(p=new _n(Math.floor(e)))}else e===0?p=new _n(Math.floor((r-1)/2)):i||(p=new _n(Math.floor(e)));var y=Math.floor((r-1)/2),c=iz(nz(C=>p.add(new _n(C-y).mul(a)).toNumber()),Kb);return c(0,r)},ME=function(r,i,a,p){var g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((i-r)/(a-1)))return{step:new _n(0),tickMin:new _n(0),tickMax:new _n(0)};var y=EE(new _n(i).sub(r).div(a-1),p,g),c;r<=0&&i>=0?c=new _n(0):(c=new _n(r).add(i).div(2),c=c.sub(new _n(c).mod(y)));var C=Math.ceil(c.sub(r).div(y).toNumber()),E=Math.ceil(new _n(i).sub(c).div(y).toNumber()),M=C+E+1;return M>a?ME(r,i,a,p,g+1):(M<a&&(E=i>0?E+(a-M):E,C=i>0?C:C+(a-M)),{step:y,tickMin:c.sub(new _n(C).mul(y)),tickMax:c.add(new _n(E).mul(y))})};function oz(e){var[r,i]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,g=Math.max(a,2),[y,c]=TE([r,i]);if(y===-1/0||c===1/0){var C=c===1/0?[y,...Kb(0,a-1).map(()=>1/0)]:[...Kb(0,a-1).map(()=>-1/0),c];return r>i?Yb(C):C}if(y===c)return az(y,a,p);var{step:E,tickMin:M,tickMax:k}=ME(y,c,g,p,0),N=CE(M,k.add(new _n(.1).mul(E)),E);return r>i?Yb(N):N}function sz(e,r){var[i,a]=e,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[g,y]=TE([i,a]);if(g===-1/0||y===1/0)return[i,a];if(g===y)return[g];var c=Math.max(r,2),C=EE(new _n(y).sub(g).div(c-1),p,0),E=[...CE(new _n(g),new _n(y),C),y];return p===!1&&(E=E.map(M=>Math.round(M))),i>a?Yb(E):E}var lz=PE(oz),uz=PE(sz),RE=e=>e.rootProps.maxBarSize,cz=e=>e.rootProps.barGap,DE=e=>e.rootProps.barCategoryGap,hz=e=>e.rootProps.barSize,e_=e=>e.rootProps.stackOffset,ww=e=>e.options.chartName,Sw=e=>e.rootProps.syncId,IE=e=>e.rootProps.syncMethod,Pw=e=>e.options.eventEmitter,Qc={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},As={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},t_=(e,r)=>{if(!(!e||!r))return e!=null&&e.reversed?[r[1],r[0]]:r},fz={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Qc.angleAxisId,includeHidden:!1,name:void 0,reversed:Qc.reversed,scale:Qc.scale,tick:Qc.tick,tickCount:void 0,ticks:void 0,type:Qc.type,unit:void 0},dz={allowDataOverflow:As.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:As.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:As.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:As.scale,tick:As.tick,tickCount:As.tickCount,ticks:void 0,type:As.type,unit:void 0},pz={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Qc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Qc.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Qc.scale,tick:Qc.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},mz={allowDataOverflow:As.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:As.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:As.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:As.scale,tick:As.tick,tickCount:As.tickCount,ticks:void 0,type:"category",unit:void 0},Aw=(e,r)=>e.polarAxis.angleAxis[r]!=null?e.polarAxis.angleAxis[r]:e.layout.layoutType==="radial"?pz:fz,Cw=(e,r)=>e.polarAxis.radiusAxis[r]!=null?e.polarAxis.radiusAxis[r]:e.layout.layoutType==="radial"?mz:dz,r_=e=>e.polarOptions,Tw=it([lh,uh,Aa],yO),OE=it([r_,Tw],(e,r)=>{if(e!=null)return iu(e.innerRadius,r,0)}),kE=it([r_,Tw],(e,r)=>{if(e!=null)return iu(e.outerRadius,r,r*.8)}),gz=e=>{if(e==null)return[0,0];var{startAngle:r,endAngle:i}=e;return[r,i]},LE=it([r_],gz);it([Aw,LE],t_);var zE=it([Tw,OE,kE],(e,r,i)=>{if(!(e==null||r==null||i==null))return[r,i]});it([Cw,zE],t_);var NE=it([bn,r_,OE,kE,lh,uh],(e,r,i,a,p,g)=>{if(!(e!=="centric"&&e!=="radial"||r==null||i==null||a==null)){var{cx:y,cy:c,startAngle:C,endAngle:E}=r;return{cx:iu(y,p,p/2),cy:iu(c,g,g/2),innerRadius:i,outerRadius:a,startAngle:C,endAngle:E,clockWise:!1}}}),Hi=(e,r)=>r,n_=(e,r,i)=>i;function Ew(e){return e?.id}var ha=e=>{var r=bn(e);return r==="horizontal"?"xAxis":r==="vertical"?"yAxis":r==="centric"?"angleAxis":"radiusAxis"},am=e=>e.tooltip.settings.axisId,Ta=e=>{var r=ha(e),i=am(e);return sy(e,r,i)},jE=it([Ta],e=>e?.dataKey);function BE(e,r,i){var{chartData:a=[]}=r,{allowDuplicatedCategory:p,dataKey:g}=i,y=new Map;return e.forEach(c=>{var C,E=(C=c.data)!==null&&C!==void 0?C:a;if(!(E==null||E.length===0)){var M=Ew(c);E.forEach((k,N)=>{var j=g==null||p?N:String(Co(k,g,null)),q=Co(k,c.dataKey,0),H;y.has(j)?H=y.get(j):H={},Object.assign(H,{[M]:q}),y.set(j,H)})}}),Array.from(y.values())}function i_(e){return e.stackId!=null&&e.dataKey!=null}function hA(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function yv(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?hA(Object(i),!0).forEach(function(a){yz(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):hA(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function yz(e,r,i){return(r=vz(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function vz(e){var r=_z(e,"string");return typeof r=="symbol"?r:r+""}function _z(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Qb=[0,"auto"],Ss={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},FE=(e,r)=>e.cartesianAxis.xAxis[r],hh=(e,r)=>{var i=FE(e,r);return i??Ss},Ps={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Qb,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:ry},UE=(e,r)=>e.cartesianAxis.yAxis[r],fh=(e,r)=>{var i=UE(e,r);return i??Ps},bz={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Mw=(e,r)=>{var i=e.cartesianAxis.zAxis[r];return i??bz},Ko=(e,r,i)=>{switch(r){case"xAxis":return hh(e,i);case"yAxis":return fh(e,i);case"zAxis":return Mw(e,i);case"angleAxis":return Aw(e,i);case"radiusAxis":return Cw(e,i);default:throw new Error("Unexpected axis type: ".concat(r))}},xz=(e,r,i)=>{switch(r){case"xAxis":return hh(e,i);case"yAxis":return fh(e,i);default:throw new Error("Unexpected axis type: ".concat(r))}},sy=(e,r,i)=>{switch(r){case"xAxis":return hh(e,i);case"yAxis":return fh(e,i);case"angleAxis":return Aw(e,i);case"radiusAxis":return Cw(e,i);default:throw new Error("Unexpected axis type: ".concat(r))}},$E=e=>e.graphicalItems.cartesianItems.some(r=>r.type==="bar")||e.graphicalItems.polarItems.some(r=>r.type==="radialBar");function VE(e,r){return i=>{switch(e){case"xAxis":return"xAxisId"in i&&i.xAxisId===r;case"yAxis":return"yAxisId"in i&&i.yAxisId===r;case"zAxis":return"zAxisId"in i&&i.zAxisId===r;case"angleAxis":return"angleAxisId"in i&&i.angleAxisId===r;case"radiusAxis":return"radiusAxisId"in i&&i.radiusAxisId===r;default:return!1}}}var Rw=e=>e.graphicalItems.cartesianItems,wz=it([Hi,n_],VE),HE=(e,r,i)=>e.filter(i).filter(a=>r?.includeHidden===!0?!0:!a.hide),ly=it([Rw,Ko,wz],HE),qE=it([ly],e=>e.filter(r=>r.type==="area"||r.type==="bar").filter(i_)),GE=e=>e.filter(r=>!("stackId"in r)||r.stackId===void 0),WE=it([ly],GE),ZE=e=>e.map(r=>r.data).filter(Boolean).flat(1),Sz=it([ly],ZE),XE=(e,r)=>{var{chartData:i=[],dataStartIndex:a,dataEndIndex:p}=r;return e.length>0?e:i.slice(a,p+1)},Dw=it([Sz,_w],XE),KE=(e,r,i)=>r?.dataKey!=null?e.map(a=>({value:Co(a,r.dataKey)})):i.length>0?i.map(a=>a.dataKey).flatMap(a=>e.map(p=>({value:Co(p,a)}))):e.map(a=>({value:a})),a_=it([Dw,Ko,ly],KE);function YE(e,r){switch(e){case"xAxis":return r.direction==="x";case"yAxis":return r.direction==="y";default:return!1}}function $d(e){return e.filter(r=>ic(r)||r instanceof Date).map(Number).filter(r=>ol(r)===!1)}function Pz(e,r,i){return!i||typeof r!="number"||ol(r)?[]:i.length?$d(i.flatMap(a=>{var p=Co(e,a.dataKey),g,y;if(Array.isArray(p)?[g,y]=p:g=y=p,!(!Rs(g)||!Rs(y)))return[r-g,r+y]})):[]}var Az=it([qE,_w,Ta],BE),QE=(e,r,i)=>{var a={},p=r.reduce((g,y)=>(y.stackId==null||(g[y.stackId]==null&&(g[y.stackId]=[]),g[y.stackId].push(y)),g),a);return Object.fromEntries(Object.entries(p).map(g=>{var[y,c]=g,C=c.map(Ew);return[y,{stackedData:OO(e,C,i),graphicalItems:c}]}))},Jb=it([Az,qE,e_],QE),JE=(e,r,i)=>{var{dataStartIndex:a,dataEndIndex:p}=r;if(i!=="zAxis"){var g=jO(e,a,p);if(!(g!=null&&g[0]===0&&g[1]===0))return g}},Cz=it([Jb,gf,Hi],JE),eM=(e,r,i,a,p)=>i.length>0?e.flatMap(g=>i.flatMap(y=>{var c,C,E=(c=a[y.id])===null||c===void 0?void 0:c.filter(k=>YE(p,k)),M=Co(g,(C=r.dataKey)!==null&&C!==void 0?C:y.dataKey);return{value:M,errorDomain:Pz(g,M,E)}})).filter(Boolean):r?.dataKey!=null?e.map(g=>({value:Co(g,r.dataKey),errorDomain:[]})):e.map(g=>({value:g,errorDomain:[]})),o_=e=>e.errorBars,tM=(e,r,i)=>e.flatMap(a=>r[a.id]).filter(Boolean).filter(a=>YE(i,a));it([WE,o_,Hi],tM);var Tz=it([Dw,Ko,WE,o_,Hi],eM);function Ez(e){var{value:r}=e;if(ic(r)||r instanceof Date)return r}var fA=e=>{var r=e.flatMap(a=>[a.value,a.errorDomain]).flat(1),i=$d(r);if(i.length!==0)return[Math.min(...i),Math.max(...i)]},Mz=(e,r,i)=>{var a=e.map(Ez).filter(p=>p!=null);return i&&(r.dataKey==null||r.allowDuplicatedCategory&&vT(a))?L3(0,e.length):r.allowDuplicatedCategory?a:Array.from(new Set(a))},Iw=e=>{var r;if(e==null||!("domain"in e))return Qb;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var i=$d(e.ticks);return[Math.min(...i),Math.max(...i)]}if(e.type==="category")return e.ticks.map(String)}return(r=e?.domain)!==null&&r!==void 0?r:Qb},vv=function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var p=i.filter(Boolean);if(p.length!==0){var g=p.flat(),y=Math.min(...g),c=Math.max(...g);return[y,c]}},rM=e=>e.referenceElements.dots,om=(e,r,i)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>r==="xAxis"?a.xAxisId===i:a.yAxisId===i),Rz=it([rM,Hi,n_],om),nM=e=>e.referenceElements.areas,Dz=it([nM,Hi,n_],om),iM=e=>e.referenceElements.lines,Iz=it([iM,Hi,n_],om),aM=(e,r)=>{var i=$d(e.map(a=>r==="xAxis"?a.x:a.y));if(i.length!==0)return[Math.min(...i),Math.max(...i)]},Oz=it(Rz,Hi,aM),oM=(e,r)=>{var i=$d(e.flatMap(a=>[r==="xAxis"?a.x1:a.y1,r==="xAxis"?a.x2:a.y2]));if(i.length!==0)return[Math.min(...i),Math.max(...i)]},kz=it([Dz,Hi],oM),sM=(e,r)=>{var i=$d(e.map(a=>r==="xAxis"?a.x:a.y));if(i.length!==0)return[Math.min(...i),Math.max(...i)]},Lz=it(Iz,Hi,sM),zz=it(Oz,Lz,kz,(e,r,i)=>vv(e,i,r)),Nz=it([Ko],Iw),lM=(e,r,i,a,p,g,y)=>{var c=YL(r,e.allowDataOverflow);if(c!=null)return c;var C=g==="vertical"&&y==="xAxis"||g==="horizontal"&&y==="yAxis",E=C?vv(i,p,fA(a)):vv(p,fA(a));return QL(r,E,e.allowDataOverflow)},jz=it([Ko,Nz,Cz,Tz,zz,bn,Hi],lM),Bz=[0,1],uM=(e,r,i,a,p,g,y)=>{if(!((e==null||i==null||i.length===0)&&y===void 0)){var{dataKey:c,type:C}=e,E=Bd(r,g);return E&&c==null?L3(0,i.length):C==="category"?Mz(a,e,E):p==="expand"?Bz:y}},Ow=it([Ko,bn,Dw,a_,e_,Hi,jz],uM),cM=(e,r,i,a,p)=>{if(e!=null){var{scale:g,type:y}=e;if(g==="auto")return r==="radial"&&p==="radiusAxis"?"band":r==="radial"&&p==="angleAxis"?"linear":y==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!i)?"point":y==="category"?"band":"linear";if(typeof g=="string"){var c="scale".concat(Qg(g));return c in Rg?c:"point"}}},uy=it([Ko,bn,$E,ww,Hi],cM);function Fz(e){if(e!=null){if(e in Rg)return Rg[e]();var r="scale".concat(Qg(e));if(r in Rg)return Rg[r]()}}function kw(e,r,i,a){if(!(i==null||a==null)){if(typeof e.scale=="function")return e.scale.copy().domain(i).range(a);var p=Fz(r);if(p!=null){var g=p.domain(i).range(a);return EO(g),g}}}var hM=(e,r,i)=>{var a=Iw(r);if(!(i!=="auto"&&i!=="linear")){if(r!=null&&r.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&Wp(e))return lz(e,r.tickCount,r.allowDecimals);if(r!=null&&r.tickCount&&r.type==="number"&&Wp(e))return uz(e,r.tickCount,r.allowDecimals)}},Lw=it([Ow,sy,uy],hM),fM=(e,r,i,a)=>{if(a!=="angleAxis"&&e?.type==="number"&&Wp(r)&&Array.isArray(i)&&i.length>0){var p=r[0],g=i[0],y=r[1],c=i[i.length-1];return[Math.min(p,g),Math.max(y,c)]}return r},Uz=it([Ko,Ow,Lw,Hi],fM),$z=it(a_,Ko,(e,r)=>{if(!(!r||r.type!=="number")){var i=1/0,a=Array.from($d(e.map(c=>c.value))).sort((c,C)=>c-C);if(a.length<2)return 1/0;var p=a[a.length-1]-a[0];if(p===0)return 1/0;for(var g=0;g<a.length-1;g++){var y=a[g+1]-a[g];i=Math.min(i,y)}return i/p}}),dM=it($z,bn,DE,Aa,(e,r,i,a)=>a,(e,r,i,a,p)=>{if(!Rs(e))return 0;var g=r==="vertical"?a.height:a.width;if(p==="gap")return e*g/2;if(p==="no-gap"){var y=iu(i,e*g),c=e*g/2;return c-y-(c-y)/g*y}return 0}),Vz=(e,r)=>{var i=hh(e,r);return i==null||typeof i.padding!="string"?0:dM(e,"xAxis",r,i.padding)},Hz=(e,r)=>{var i=fh(e,r);return i==null||typeof i.padding!="string"?0:dM(e,"yAxis",r,i.padding)},qz=it(hh,Vz,(e,r)=>{var i,a;if(e==null)return{left:0,right:0};var{padding:p}=e;return typeof p=="string"?{left:r,right:r}:{left:((i=p.left)!==null&&i!==void 0?i:0)+r,right:((a=p.right)!==null&&a!==void 0?a:0)+r}}),Gz=it(fh,Hz,(e,r)=>{var i,a;if(e==null)return{top:0,bottom:0};var{padding:p}=e;return typeof p=="string"?{top:r,bottom:r}:{top:((i=p.top)!==null&&i!==void 0?i:0)+r,bottom:((a=p.bottom)!==null&&a!==void 0?a:0)+r}}),Wz=it([Aa,qz,Gv,qv,(e,r,i)=>i],(e,r,i,a,p)=>{var{padding:g}=a;return p?[g.left,i.width-g.right]:[e.left+r.left,e.left+e.width-r.right]}),Zz=it([Aa,bn,Gz,Gv,qv,(e,r,i)=>i],(e,r,i,a,p,g)=>{var{padding:y}=p;return g?[a.height-y.bottom,y.top]:r==="horizontal"?[e.top+e.height-i.bottom,e.top+i.top]:[e.top+i.top,e.top+e.height-i.bottom]}),cy=(e,r,i,a)=>{var p;switch(r){case"xAxis":return Wz(e,i,a);case"yAxis":return Zz(e,i,a);case"zAxis":return(p=Mw(e,i))===null||p===void 0?void 0:p.range;case"angleAxis":return LE(e);case"radiusAxis":return zE(e,i);default:return}},pM=it([Ko,cy],t_),sm=it([Ko,uy,Uz,pM],kw);it([ly,o_,Hi],tM);function mM(e,r){return e.id<r.id?-1:e.id>r.id?1:0}var s_=(e,r)=>r,l_=(e,r,i)=>i,Xz=it(Vv,s_,l_,(e,r,i)=>e.filter(a=>a.orientation===r).filter(a=>a.mirror===i).sort(mM)),Kz=it(Hv,s_,l_,(e,r,i)=>e.filter(a=>a.orientation===r).filter(a=>a.mirror===i).sort(mM)),gM=(e,r)=>({width:e.width,height:r.height}),Yz=(e,r)=>{var i=typeof r.width=="number"?r.width:ry;return{width:i,height:e.height}},yM=it(Aa,hh,gM),Qz=(e,r,i)=>{switch(r){case"top":return e.top;case"bottom":return i-e.bottom;default:return 0}},Jz=(e,r,i)=>{switch(r){case"left":return e.left;case"right":return i-e.right;default:return 0}},eN=it(uh,Aa,Xz,s_,l_,(e,r,i,a,p)=>{var g={},y;return i.forEach(c=>{var C=gM(r,c);y==null&&(y=Qz(r,a,e));var E=a==="top"&&!p||a==="bottom"&&p;g[c.id]=y-Number(E)*C.height,y+=(E?-1:1)*C.height}),g}),tN=it(lh,Aa,Kz,s_,l_,(e,r,i,a,p)=>{var g={},y;return i.forEach(c=>{var C=Yz(r,c);y==null&&(y=Jz(r,a,e));var E=a==="left"&&!p||a==="right"&&p;g[c.id]=y-Number(E)*C.width,y+=(E?-1:1)*C.width}),g}),rN=(e,r)=>{var i=hh(e,r);if(i!=null)return eN(e,i.orientation,i.mirror)},nN=it([Aa,hh,rN,(e,r)=>r],(e,r,i,a)=>{if(r!=null){var p=i?.[a];return p==null?{x:e.left,y:0}:{x:e.left,y:p}}}),iN=(e,r)=>{var i=fh(e,r);if(i!=null)return tN(e,i.orientation,i.mirror)},aN=it([Aa,fh,iN,(e,r)=>r],(e,r,i,a)=>{if(r!=null){var p=i?.[a];return p==null?{x:0,y:e.top}:{x:p,y:e.top}}}),vM=it(Aa,fh,(e,r)=>{var i=typeof r.width=="number"?r.width:ry;return{width:i,height:e.height}}),dA=(e,r,i)=>{switch(r){case"xAxis":return yM(e,i).width;case"yAxis":return vM(e,i).height;default:return}},_M=(e,r,i,a)=>{if(i!=null){var{allowDuplicatedCategory:p,type:g,dataKey:y}=i,c=Bd(e,a),C=r.map(E=>E.value);if(y&&c&&g==="category"&&p&&vT(C))return C}},zw=it([bn,a_,Ko,Hi],_M),bM=(e,r,i,a)=>{if(!(i==null||i.dataKey==null)){var{type:p,scale:g}=i,y=Bd(e,a);if(y&&(p==="number"||g!=="auto"))return r.map(c=>c.value)}},Nw=it([bn,a_,sy,Hi],bM);it([bn,xz,uy,sm,zw,Nw,cy,Lw,Hi],(e,r,i,a,p,g,y,c,C)=>{if(r==null)return null;var E=Bd(e,C);return{angle:r.angle,interval:r.interval,minTickGap:r.minTickGap,orientation:r.orientation,tick:r.tick,tickCount:r.tickCount,tickFormatter:r.tickFormatter,ticks:r.ticks,type:r.type,unit:r.unit,axisType:C,categoricalDomain:g,duplicateDomain:p,isCategorical:E,niceTicks:c,range:y,realScaleType:i,scale:a}});var oN=(e,r,i,a,p,g,y,c,C)=>{if(!(r==null||a==null)){var E=Bd(e,C),{type:M,ticks:k,tickCount:N}=r,j=i==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,q=M==="category"&&a.bandwidth?a.bandwidth()/j:0;q=C==="angleAxis"&&g!=null&&g.length>=2?Ts(g[0]-g[1])*2*q:q;var H=k||p;if(H){var W=H.map((K,ee)=>{var ie=y?y.indexOf(K):K;return{index:ee,coordinate:a(ie)+q,value:K,offset:q}});return W.filter(K=>!ol(K.coordinate))}return E&&c?c.map((K,ee)=>({coordinate:a(K)+q,value:K,index:ee,offset:q})):a.ticks?a.ticks(N).map(K=>({coordinate:a(K)+q,value:K,offset:q})):a.domain().map((K,ee)=>({coordinate:a(K)+q,value:y?y[K]:K,index:ee,offset:q}))}},xM=it([bn,sy,uy,sm,Lw,cy,zw,Nw,Hi],oN),sN=(e,r,i,a,p,g,y)=>{if(!(r==null||i==null||a==null||a[0]===a[1])){var c=Bd(e,y),{tickCount:C}=r,E=0;return E=y==="angleAxis"&&a?.length>=2?Ts(a[0]-a[1])*2*E:E,c&&g?g.map((M,k)=>({coordinate:i(M)+E,value:M,index:k,offset:E})):i.ticks?i.ticks(C).map(M=>({coordinate:i(M)+E,value:M,offset:E})):i.domain().map((M,k)=>({coordinate:i(M)+E,value:p?p[M]:M,index:k,offset:E}))}},Zp=it([bn,sy,sm,cy,zw,Nw,Hi],sN),Xp=it(Ko,sm,(e,r)=>{if(!(e==null||r==null))return yv(yv({},e),{},{scale:r})}),lN=it([Ko,uy,Ow,pM],kw);it((e,r,i)=>Mw(e,i),lN,(e,r)=>{if(!(e==null||r==null))return yv(yv({},e),{},{scale:r})});var uN=it([bn,Vv,Hv],(e,r,i)=>{switch(e){case"horizontal":return r.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return i.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),wM=e=>e.options.defaultTooltipEventType,SM=e=>e.options.validateTooltipEventTypes;function PM(e,r,i){if(e==null)return r;var a=e?"axis":"item";return i==null?r:i.includes(a)?a:r}function jw(e,r){var i=wM(e),a=SM(e);return PM(r,i,a)}function cN(e){return pr(r=>jw(r,e))}var AM=(e,r)=>{var i,a=Number(r);if(!(ol(a)||r==null))return a>=0?e==null||(i=e[a])===null||i===void 0?void 0:i.value:void 0},hN=e=>e.tooltip.settings,cf={active:!1,index:null,dataKey:void 0,coordinate:void 0},fN={itemInteraction:{click:cf,hover:cf},axisInteraction:{click:cf,hover:cf},keyboardInteraction:cf,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},CM=Ds({name:"tooltip",initialState:fN,reducers:{addTooltipEntrySettings(e,r){e.tooltipItemPayloads.push(r.payload)},removeTooltipEntrySettings(e,r){var i=rh(e).tooltipItemPayloads.indexOf(r.payload);i>-1&&e.tooltipItemPayloads.splice(i,1)},setTooltipSettingsState(e,r){e.settings=r.payload},setActiveMouseOverItemIndex(e,r){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=r.payload.activeIndex,e.itemInteraction.hover.dataKey=r.payload.activeDataKey,e.itemInteraction.hover.coordinate=r.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,r){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=r.payload.activeIndex,e.itemInteraction.click.dataKey=r.payload.activeDataKey,e.itemInteraction.click.coordinate=r.payload.activeCoordinate},setMouseOverAxisIndex(e,r){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=r.payload.activeIndex,e.axisInteraction.hover.dataKey=r.payload.activeDataKey,e.axisInteraction.hover.coordinate=r.payload.activeCoordinate},setMouseClickAxisIndex(e,r){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=r.payload.activeIndex,e.axisInteraction.click.dataKey=r.payload.activeDataKey,e.axisInteraction.click.coordinate=r.payload.activeCoordinate},setSyncInteraction(e,r){e.syncInteraction=r.payload},setKeyboardInteraction(e,r){e.keyboardInteraction.active=r.payload.active,e.keyboardInteraction.index=r.payload.activeIndex,e.keyboardInteraction.coordinate=r.payload.activeCoordinate,e.keyboardInteraction.dataKey=r.payload.activeDataKey}}}),{addTooltipEntrySettings:dN,removeTooltipEntrySettings:pN,setTooltipSettingsState:mN,setActiveMouseOverItemIndex:TM,mouseLeaveItem:gN,mouseLeaveChart:EM,setActiveClickItemIndex:yN,setMouseOverAxisIndex:MM,setMouseClickAxisIndex:vN,setSyncInteraction:ex,setKeyboardInteraction:tx}=CM.actions,_N=CM.reducer;function pA(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function E0(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?pA(Object(i),!0).forEach(function(a){bN(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):pA(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function bN(e,r,i){return(r=xN(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function xN(e){var r=wN(e,"string");return typeof r=="symbol"?r:r+""}function wN(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function SN(e,r,i){return r==="axis"?i==="click"?e.axisInteraction.click:e.axisInteraction.hover:i==="click"?e.itemInteraction.click:e.itemInteraction.hover}function PN(e){return e.index!=null}var RM=(e,r,i,a)=>{if(r==null)return cf;var p=SN(e,r,i);if(p==null)return cf;if(p.active)return p;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var g=e.settings.active===!0;if(PN(p)){if(g)return E0(E0({},p),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a};return E0(E0({},cf),{},{coordinate:p.coordinate})},Bw=(e,r)=>{var i=e?.index;if(i==null)return null;var a=Number(i);if(!Rs(a))return i;var p=0,g=1/0;return r.length>0&&(g=r.length-1),String(Math.max(p,Math.min(a,g)))},DM=(e,r,i,a,p,g,y,c)=>{if(!(g==null||c==null)){var C=y[0],E=C==null?void 0:c(C.positions,g);if(E!=null)return E;var M=p?.[Number(g)];if(M)switch(i){case"horizontal":return{x:M.coordinate,y:(a.top+r)/2};default:return{x:(a.left+e)/2,y:M.coordinate}}}},IM=(e,r,i,a)=>{if(r==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var p;return i==="hover"?p=e.itemInteraction.hover.dataKey:p=e.itemInteraction.click.dataKey,p==null&&a!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(g=>{var y;return((y=g.settings)===null||y===void 0?void 0:y.dataKey)===p})},hy=e=>e.options.tooltipPayloadSearcher,lm=e=>e.tooltip;function mA(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function gA(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?mA(Object(i),!0).forEach(function(a){AN(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):mA(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function AN(e,r,i){return(r=CN(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function CN(e){var r=TN(e,"string");return typeof r=="symbol"?r:r+""}function TN(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function EN(e,r){return e??r}var OM=(e,r,i,a,p,g,y)=>{if(!(r==null||g==null)){var{chartData:c,computedData:C,dataStartIndex:E,dataEndIndex:M}=i,k=[];return e.reduce((N,j)=>{var q,{dataDefinedOnItem:H,settings:W}=j,K=EN(H,c),ee=Array.isArray(K)?w3(K,E,M):K,ie=(q=W?.dataKey)!==null&&q!==void 0?q:a,ve=W?.nameKey,ye;if(a&&Array.isArray(ee)&&!Array.isArray(ee[0])&&y==="axis"?ye=vD(ee,a,p):ye=g(ee,r,C,ve),Array.isArray(ye))ye.forEach(Me=>{var je=gA(gA({},W),{},{name:Me.name,unit:Me.unit,color:void 0,fill:void 0});N.push(tP({tooltipEntrySettings:je,dataKey:Me.dataKey,payload:Me.payload,value:Co(Me.payload,Me.dataKey),name:Me.name}))});else{var Pe;N.push(tP({tooltipEntrySettings:W,dataKey:ie,payload:ye,value:Co(ye,ie),name:(Pe=Co(ye,ve))!==null&&Pe!==void 0?Pe:W?.name}))}return N},k)}},Fw=it([Ta,bn,$E,ww,ha],cM),MN=it([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,r)=>[...e,...r]),RN=it([ha,am],VE),fy=it([MN,Ta,RN],HE),DN=it([fy],e=>e.filter(i_)),IN=it([fy],ZE),um=it([IN,gf],XE),ON=it([DN,gf,Ta],BE),Uw=it([um,Ta,fy],KE),kN=it([Ta],Iw),LN=it([fy],e=>e.filter(i_)),zN=it([ON,LN,e_],QE),NN=it([zN,gf,ha],JE),jN=it([fy],GE),BN=it([um,Ta,jN,o_,ha],eM),FN=it([rM,ha,am],om),UN=it([FN,ha],aM),$N=it([nM,ha,am],om),VN=it([$N,ha],oM),HN=it([iM,ha,am],om),qN=it([HN,ha],sM),GN=it([UN,qN,VN],vv),WN=it([Ta,kN,NN,BN,GN,bn,ha],lM),kM=it([Ta,bn,um,Uw,e_,ha,WN],uM),ZN=it([kM,Ta,Fw],hM),XN=it([Ta,kM,ZN,ha],fM),LM=e=>{var r=ha(e),i=am(e),a=!1;return cy(e,r,i,a)},zM=it([Ta,LM],t_),NM=it([Ta,Fw,XN,zM],kw),KN=it([bn,Uw,Ta,ha],_M),YN=it([bn,Uw,Ta,ha],bM),QN=(e,r,i,a,p,g,y,c)=>{if(r){var{type:C}=r,E=Bd(e,c);if(a){var M=i==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,k=C==="category"&&a.bandwidth?a.bandwidth()/M:0;return k=c==="angleAxis"&&p!=null&&p?.length>=2?Ts(p[0]-p[1])*2*k:k,E&&y?y.map((N,j)=>({coordinate:a(N)+k,value:N,index:j,offset:k})):a.domain().map((N,j)=>({coordinate:a(N)+k,value:g?g[N]:N,index:j,offset:k}))}}},dh=it([bn,Ta,Fw,NM,LM,KN,YN,ha],QN),$w=it([wM,SM,hN],(e,r,i)=>PM(i.shared,e,r)),jM=e=>e.tooltip.settings.trigger,Vw=e=>e.tooltip.settings.defaultIndex,u_=it([lm,$w,jM,Vw],RM),Kp=it([u_,um],Bw),BM=it([dh,Kp],AM),FM=it([u_],e=>{if(e)return e.dataKey}),UM=it([lm,$w,jM,Vw],IM),JN=it([lh,uh,bn,Aa,dh,Vw,UM,hy],DM),ej=it([u_,JN],(e,r)=>e!=null&&e.coordinate?e.coordinate:r),tj=it([u_],e=>e.active),rj=it([UM,Kp,gf,jE,BM,hy,$w],OM);it([rj],e=>{if(e!=null){var r=e.map(i=>i.payload).filter(i=>i!=null);return Array.from(new Set(r))}});function yA(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function vA(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?yA(Object(i),!0).forEach(function(a){nj(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):yA(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function nj(e,r,i){return(r=ij(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function ij(e){var r=aj(e,"string");return typeof r=="symbol"?r:r+""}function aj(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var oj=()=>pr(Ta),sj=()=>{var e=oj(),r=pr(dh),i=pr(NM);return Hx(vA(vA({},e),{},{scale:i}),r)},lj=()=>pr(ww),Hw=(e,r)=>r,$M=(e,r,i)=>i,qw=(e,r,i,a)=>a,uj=it(dh,e=>Nv(e,r=>r.coordinate)),Gw=it([lm,Hw,$M,qw],RM),VM=it([Gw,um],Bw),cj=(e,r,i)=>{if(r!=null){var a=lm(e);return r==="axis"?i==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:i==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},HM=it([lm,Hw,$M,qw],IM),_v=it([lh,uh,bn,Aa,dh,qw,HM,hy],DM),hj=it([Gw,_v],(e,r)=>{var i;return(i=e.coordinate)!==null&&i!==void 0?i:r}),qM=it(dh,VM,AM),fj=it([HM,VM,gf,jE,qM,hy,Hw],OM),dj=it([Gw],e=>({isActive:e.active,activeIndex:e.index})),pj=(e,r,i,a,p,g,y,c)=>{if(!(!e||!r||!a||!p||!g)){var C=BO(e.chartX,e.chartY,r,i,c);if(C){var E=UO(C,r),M=CO(E,y,g,a,p),k=FO(r,g,M,C);return{activeIndex:String(M),activeCoordinate:k}}}};function rx(){return rx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},rx.apply(null,arguments)}function _A(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function M0(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?_A(Object(i),!0).forEach(function(a){mj(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_A(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function mj(e,r,i){return(r=gj(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function gj(e){var r=yj(e,"string");return typeof r=="symbol"?r:r+""}function yj(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function vj(e){var{coordinate:r,payload:i,index:a,offset:p,tooltipAxisBandSize:g,layout:y,cursor:c,tooltipEventType:C,chartName:E}=e,M=r,k=i,N=a;if(!c||!M||E!=="ScatterChart"&&C!=="axis")return null;var j,q;if(E==="ScatterChart")j=M,q=zk;else if(E==="BarChart")j=Nk(y,M,p,g),q=D3;else if(y==="radial"){var{cx:H,cy:W,radius:K,startAngle:ee,endAngle:ie}=I3(M);j={cx:H,cy:W,startAngle:ee,endAngle:ie,innerRadius:K,outerRadius:K},q=k3}else j={points:g7(y,M,p)},q=Tk;var ve=typeof c=="object"&&"className"in c?c.className:void 0,ye=M0(M0(M0(M0({stroke:"#ccc",pointerEvents:"none"},p),j),qa(c,!1)),{},{payload:k,payloadIndex:N,className:In("recharts-tooltip-cursor",ve)});return X.isValidElement(c)?X.cloneElement(c,ye):X.createElement(q,ye)}function _j(e){var r=sj(),i=rk(),a=Wx(),p=lj();return X.createElement(vj,rx({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:i,layout:a,tooltipAxisBandSize:r,chartName:p}))}var GM=X.createContext(null),bj=()=>X.useContext(GM),q1={exports:{}},bA;function xj(){return bA||(bA=1,(function(e){var r=Object.prototype.hasOwnProperty,i="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(i=!1));function p(C,E,M){this.fn=C,this.context=E,this.once=M||!1}function g(C,E,M,k,N){if(typeof M!="function")throw new TypeError("The listener must be a function");var j=new p(M,k||C,N),q=i?i+E:E;return C._events[q]?C._events[q].fn?C._events[q]=[C._events[q],j]:C._events[q].push(j):(C._events[q]=j,C._eventsCount++),C}function y(C,E){--C._eventsCount===0?C._events=new a:delete C._events[E]}function c(){this._events=new a,this._eventsCount=0}c.prototype.eventNames=function(){var E=[],M,k;if(this._eventsCount===0)return E;for(k in M=this._events)r.call(M,k)&&E.push(i?k.slice(1):k);return Object.getOwnPropertySymbols?E.concat(Object.getOwnPropertySymbols(M)):E},c.prototype.listeners=function(E){var M=i?i+E:E,k=this._events[M];if(!k)return[];if(k.fn)return[k.fn];for(var N=0,j=k.length,q=new Array(j);N<j;N++)q[N]=k[N].fn;return q},c.prototype.listenerCount=function(E){var M=i?i+E:E,k=this._events[M];return k?k.fn?1:k.length:0},c.prototype.emit=function(E,M,k,N,j,q){var H=i?i+E:E;if(!this._events[H])return!1;var W=this._events[H],K=arguments.length,ee,ie;if(W.fn){switch(W.once&&this.removeListener(E,W.fn,void 0,!0),K){case 1:return W.fn.call(W.context),!0;case 2:return W.fn.call(W.context,M),!0;case 3:return W.fn.call(W.context,M,k),!0;case 4:return W.fn.call(W.context,M,k,N),!0;case 5:return W.fn.call(W.context,M,k,N,j),!0;case 6:return W.fn.call(W.context,M,k,N,j,q),!0}for(ie=1,ee=new Array(K-1);ie<K;ie++)ee[ie-1]=arguments[ie];W.fn.apply(W.context,ee)}else{var ve=W.length,ye;for(ie=0;ie<ve;ie++)switch(W[ie].once&&this.removeListener(E,W[ie].fn,void 0,!0),K){case 1:W[ie].fn.call(W[ie].context);break;case 2:W[ie].fn.call(W[ie].context,M);break;case 3:W[ie].fn.call(W[ie].context,M,k);break;case 4:W[ie].fn.call(W[ie].context,M,k,N);break;default:if(!ee)for(ye=1,ee=new Array(K-1);ye<K;ye++)ee[ye-1]=arguments[ye];W[ie].fn.apply(W[ie].context,ee)}}return!0},c.prototype.on=function(E,M,k){return g(this,E,M,k,!1)},c.prototype.once=function(E,M,k){return g(this,E,M,k,!0)},c.prototype.removeListener=function(E,M,k,N){var j=i?i+E:E;if(!this._events[j])return this;if(!M)return y(this,j),this;var q=this._events[j];if(q.fn)q.fn===M&&(!N||q.once)&&(!k||q.context===k)&&y(this,j);else{for(var H=0,W=[],K=q.length;H<K;H++)(q[H].fn!==M||N&&!q[H].once||k&&q[H].context!==k)&&W.push(q[H]);W.length?this._events[j]=W.length===1?W[0]:W:y(this,j)}return this},c.prototype.removeAllListeners=function(E){var M;return E?(M=i?i+E:E,this._events[M]&&y(this,M)):(this._events=new a,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,e.exports=c})(q1)),q1.exports}var wj=xj();const Sj=au(wj);var Wg=new Sj,nx="recharts.syncEvent.tooltip",xA="recharts.syncEvent.brush";function Pj(e,r){if(r){var i=Number.parseInt(r,10);if(!ol(i))return e?.[i]}}var Aj={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},WM=Ds({name:"options",initialState:Aj,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Cj=WM.reducer,{createEventEmitter:Tj}=WM.actions;function Ej(e){return e.tooltip.syncInteraction}var Mj={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},ZM=Ds({name:"chartData",initialState:Mj,reducers:{setChartData(e,r){if(e.chartData=r.payload,r.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}r.payload.length>0&&e.dataEndIndex!==r.payload.length-1&&(e.dataEndIndex=r.payload.length-1)},setComputedData(e,r){e.computedData=r.payload},setDataStartEndIndexes(e,r){var{startIndex:i,endIndex:a}=r.payload;i!=null&&(e.dataStartIndex=i),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:wA,setDataStartEndIndexes:Rj,setComputedData:nG}=ZM.actions,Dj=ZM.reducer,Ij=["x","y"];function SA(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function wd(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?SA(Object(i),!0).forEach(function(a){Oj(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):SA(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Oj(e,r,i){return(r=kj(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function kj(e){var r=Lj(e,"string");return typeof r=="symbol"?r:r+""}function Lj(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function zj(e,r){if(e==null)return{};var i,a,p=Nj(e,r);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],r.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(p[i]=e[i])}return p}function Nj(e,r){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var XM=()=>{};function jj(){var e=pr(Sw),r=pr(Pw),i=Pa(),a=pr(IE),p=pr(dh),g=Wx(),y=Gx(),c=pr(C=>C.rootProps.className);X.useEffect(()=>{if(e==null)return XM;var C=(E,M,k)=>{if(r!==k&&e===E){if(a==="index"){var N;if(y&&M!==null&&M!==void 0&&(N=M.payload)!==null&&N!==void 0&&N.coordinate){var j=M.payload.coordinate,{x:q,y:H}=j,W=zj(j,Ij),K=wd(wd(wd({},W),typeof q=="number"&&{x:Math.max(y.x,Math.min(q,y.x+y.width))}),typeof H=="number"&&{y:Math.max(y.y,Math.min(H,y.y+y.height))}),ee=wd(wd({},M),{},{payload:wd(wd({},M.payload),{},{coordinate:K})});i(ee)}else i(M);return}if(p!=null){var ie;if(typeof a=="function"){var ve={activeTooltipIndex:M.payload.index==null?void 0:Number(M.payload.index),isTooltipActive:M.payload.active,activeIndex:M.payload.index==null?void 0:Number(M.payload.index),activeLabel:M.payload.label,activeDataKey:M.payload.dataKey,activeCoordinate:M.payload.coordinate},ye=a(p,ve);ie=p[ye]}else a==="value"&&(ie=p.find(rt=>String(rt.value)===M.payload.label));var{coordinate:Pe}=M.payload;if(ie==null||M.payload.active===!1||Pe==null||y==null){i(ex({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:Me,y:je}=Pe,ht=Math.min(Me,y.x+y.width),At=Math.min(je,y.y+y.height),ot={x:g==="horizontal"?ie.coordinate:ht,y:g==="horizontal"?At:ie.coordinate},ft=ex({active:M.payload.active,coordinate:ot,dataKey:M.payload.dataKey,index:String(ie.index),label:M.payload.label});i(ft)}}};return Wg.on(nx,C),()=>{Wg.off(nx,C)}},[c,i,r,e,a,p,g,y])}function Bj(){var e=pr(Sw),r=pr(Pw),i=Pa();X.useEffect(()=>{if(e==null)return XM;var a=(p,g,y)=>{r!==y&&e===p&&i(Rj(g))};return Wg.on(xA,a),()=>{Wg.off(xA,a)}},[i,r,e])}function Fj(){var e=Pa();X.useEffect(()=>{e(Tj())},[e]),jj(),Bj()}function Uj(e,r,i,a,p,g){var y=pr(N=>cj(N,e,r)),c=pr(Pw),C=pr(Sw),E=pr(IE),M=pr(Ej),k=M?.active;X.useEffect(()=>{if(!k&&C!=null&&c!=null){var N=ex({active:g,coordinate:i,dataKey:y,index:p,label:typeof a=="number"?String(a):a});Wg.emit(nx,C,N,c)}},[k,i,y,p,a,c,C,E,g])}function PA(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function AA(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?PA(Object(i),!0).forEach(function(a){$j(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):PA(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function $j(e,r,i){return(r=Vj(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function Vj(e){var r=Hj(e,"string");return typeof r=="symbol"?r:r+""}function Hj(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function qj(e){return e.dataKey}function Gj(e,r){return X.isValidElement(e)?X.cloneElement(e,r):typeof e=="function"?X.createElement(e,r):X.createElement(dk,r)}var CA=[],Wj={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!tm.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Zj(e){var r=uu(e,Wj),{active:i,allowEscapeViewBox:a,animationDuration:p,animationEasing:g,content:y,filterNull:c,isAnimationActive:C,offset:E,payloadUniqBy:M,position:k,reverseDirection:N,useTranslate3d:j,wrapperStyle:q,cursor:H,shared:W,trigger:K,defaultIndex:ee,portal:ie,axisId:ve}=r,ye=Pa(),Pe=typeof ee=="number"?String(ee):ee;X.useEffect(()=>{ye(mN({shared:W,trigger:K,axisId:ve,active:i,defaultIndex:Pe}))},[ye,W,K,ve,i,Pe]);var Me=Gx(),je=C3(),ht=cN(W),{activeIndex:At,isActive:ot}=pr(Zt=>dj(Zt,ht,K,Pe)),ft=pr(Zt=>fj(Zt,ht,K,Pe)),rt=pr(Zt=>qM(Zt,ht,K,Pe)),It=pr(Zt=>hj(Zt,ht,K,Pe)),kt=ft,Ue=bj(),ct=i??ot,[nt,Ct]=mI([kt,ct]),Te=ht==="axis"?rt:void 0;Uj(ht,K,It,Te,At,ct);var et=ie??Ue;if(et==null)return null;var st=kt??CA;ct||(st=CA),c&&st.length&&(st=U8(kt.filter(Zt=>Zt.value!=null&&(Zt.hide!==!0||r.includeHidden)),M,qj));var yt=st.length>0,Rt=X.createElement(bk,{allowEscapeViewBox:a,animationDuration:p,animationEasing:g,isAnimationActive:C,active:ct,coordinate:It,hasPayload:yt,offset:E,position:k,reverseDirection:N,useTranslate3d:j,viewBox:Me,wrapperStyle:q,lastBoundingBox:nt,innerRef:Ct,hasPortalFromProps:!!ie},Gj(y,AA(AA({},r),{},{payload:st,label:Te,active:ct,coordinate:It,accessibilityLayer:je})));return X.createElement(X.Fragment,null,px.createPortal(Rt,et),ct&&X.createElement(_j,{cursor:H,tooltipEventType:ht,coordinate:It,payload:kt,index:At}))}var G1={},W1={},Z1={},TA;function Xj(){return TA||(TA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(i,a,{signal:p,edges:g}={}){let y,c=null;const C=g!=null&&g.includes("leading"),E=g==null||g.includes("trailing"),M=()=>{c!==null&&(i.apply(y,c),y=void 0,c=null)},k=()=>{E&&M(),H()};let N=null;const j=()=>{N!=null&&clearTimeout(N),N=setTimeout(()=>{N=null,k()},a)},q=()=>{N!==null&&(clearTimeout(N),N=null)},H=()=>{q(),y=void 0,c=null},W=()=>{M()},K=function(...ee){if(p?.aborted)return;y=this,c=ee;const ie=N==null;j(),C&&ie&&M()};return K.schedule=j,K.cancel=H,K.flush=W,p?.addEventListener("abort",H,{once:!0}),K}e.debounce=r})(Z1)),Z1}var EA;function Kj(){return EA||(EA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=Xj();function i(a,p=0,g={}){typeof g!="object"&&(g={});const{leading:y=!1,trailing:c=!0,maxWait:C}=g,E=Array(2);y&&(E[0]="leading"),c&&(E[1]="trailing");let M,k=null;const N=r.debounce(function(...H){M=a.apply(this,H),k=null},p,{edges:E}),j=function(...H){return C!=null&&(k===null&&(k=Date.now()),Date.now()-k>=C)?(M=a.apply(this,H),k=Date.now(),N.cancel(),N.schedule(),M):(N.apply(this,H),M)},q=()=>(N.flush(),M);return j.cancel=N.cancel,j.flush=q,j}e.debounce=i})(W1)),W1}var MA;function Yj(){return MA||(MA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=Kj();function i(a,p=0,g={}){const{leading:y=!0,trailing:c=!0}=g;return r.debounce(a,p,{leading:y,maxWait:p,trailing:c})}e.throttle=i})(G1)),G1}var X1,RA;function Qj(){return RA||(RA=1,X1=Yj().throttle),X1}var Jj=Qj();const eB=au(Jj);var K1=function(r,i){for(var a=arguments.length,p=new Array(a>2?a-2:0),g=2;g<a;g++)p[g-2]=arguments[g]};function DA(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function Y1(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?DA(Object(i),!0).forEach(function(a){tB(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):DA(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function tB(e,r,i){return(r=rB(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function rB(e){var r=nB(e,"string");return typeof r=="symbol"?r:r+""}function nB(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var iB=X.forwardRef((e,r)=>{var{aspect:i,initialDimension:a={width:-1,height:-1},width:p="100%",height:g="100%",minWidth:y=0,minHeight:c,maxHeight:C,children:E,debounce:M=0,id:k,className:N,onResize:j,style:q={}}=e,H=X.useRef(null),W=X.useRef();W.current=j,X.useImperativeHandle(r,()=>H.current);var[K,ee]=X.useState({containerWidth:a.width,containerHeight:a.height}),ie=X.useCallback((ye,Pe)=>{ee(Me=>{var je=Math.round(ye),ht=Math.round(Pe);return Me.containerWidth===je&&Me.containerHeight===ht?Me:{containerWidth:je,containerHeight:ht}})},[]);X.useEffect(()=>{var ye=ht=>{var At,{width:ot,height:ft}=ht[0].contentRect;ie(ot,ft),(At=W.current)===null||At===void 0||At.call(W,ot,ft)};M>0&&(ye=eB(ye,M,{trailing:!0,leading:!1}));var Pe=new ResizeObserver(ye),{width:Me,height:je}=H.current.getBoundingClientRect();return ie(Me,je),Pe.observe(H.current),()=>{Pe.disconnect()}},[ie,M]);var ve=X.useMemo(()=>{var{containerWidth:ye,containerHeight:Pe}=K;if(ye<0||Pe<0)return null;K1(Cd(p)||Cd(g),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,p,g),K1(!i||i>0,"The aspect(%s) must be greater than zero.",i);var Me=Cd(p)?ye:p,je=Cd(g)?Pe:g;return i&&i>0&&(Me?je=Me/i:je&&(Me=je*i),C&&je>C&&(je=C)),K1(Me>0||je>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Me,je,p,g,y,c,i),X.Children.map(E,ht=>X.cloneElement(ht,{width:Me,height:je,style:Y1({width:Me,height:je},ht.props.style)}))},[i,E,g,C,c,y,K,p]);return X.createElement("div",{id:k?"".concat(k):void 0,className:In("recharts-responsive-container",N),style:Y1(Y1({},q),{},{width:p,height:g,minWidth:y,minHeight:c,maxHeight:C}),ref:H},X.createElement("div",{style:{width:0,height:0,overflow:"visible"}},ve))}),Ww=e=>null;Ww.displayName="Cell";function aB(e,r,i){return(r=oB(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function oB(e){var r=sB(e,"string");return typeof r=="symbol"?r:r+""}function sB(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}class lB{constructor(r){aB(this,"cache",new Map),this.maxSize=r}get(r){var i=this.cache.get(r);return i!==void 0&&(this.cache.delete(r),this.cache.set(r,i)),i}set(r,i){if(this.cache.has(r))this.cache.delete(r);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;this.cache.delete(a)}this.cache.set(r,i)}clear(){this.cache.clear()}size(){return this.cache.size}}function IA(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function uB(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?IA(Object(i),!0).forEach(function(a){cB(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):IA(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function cB(e,r,i){return(r=hB(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function hB(e){var r=fB(e,"string");return typeof r=="symbol"?r:r+""}function fB(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var dB={cacheSize:2e3,enableCache:!0},KM=uB({},dB),OA=new lB(KM.cacheSize),pB={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},kA="recharts_measurement_span";function mB(e,r){var i=r.fontSize||"",a=r.fontFamily||"",p=r.fontWeight||"",g=r.fontStyle||"",y=r.letterSpacing||"",c=r.textTransform||"";return"".concat(e,"|").concat(i,"|").concat(a,"|").concat(p,"|").concat(g,"|").concat(y,"|").concat(c)}var LA=(e,r)=>{try{var i=document.getElementById(kA);i||(i=document.createElement("span"),i.setAttribute("id",kA),i.setAttribute("aria-hidden","true"),document.body.appendChild(i)),Object.assign(i.style,pB,r),i.textContent="".concat(e);var a=i.getBoundingClientRect();return{width:a.width,height:a.height}}catch{return{width:0,height:0}}},Og=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r==null||tm.isSsr)return{width:0,height:0};if(!KM.enableCache)return LA(r,i);var a=mB(r,i),p=OA.get(a);if(p)return p;var g=LA(r,i);return OA.set(a,g),g},zA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,NA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,gB=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,yB=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,YM={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},vB=Object.keys(YM),zp="NaN";function _B(e,r){return e*YM[r]}class Zo{static parse(r){var i,[,a,p]=(i=yB.exec(r))!==null&&i!==void 0?i:[];return new Zo(parseFloat(a),p??"")}constructor(r,i){this.num=r,this.unit=i,this.num=r,this.unit=i,ol(r)&&(this.unit=""),i!==""&&!gB.test(i)&&(this.num=NaN,this.unit=""),vB.includes(i)&&(this.num=_B(r,i),this.unit="px")}add(r){return this.unit!==r.unit?new Zo(NaN,""):new Zo(this.num+r.num,this.unit)}subtract(r){return this.unit!==r.unit?new Zo(NaN,""):new Zo(this.num-r.num,this.unit)}multiply(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new Zo(NaN,""):new Zo(this.num*r.num,this.unit||r.unit)}divide(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new Zo(NaN,""):new Zo(this.num/r.num,this.unit||r.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ol(this.num)}}function QM(e){if(e.includes(zp))return zp;for(var r=e;r.includes("*")||r.includes("/");){var i,[,a,p,g]=(i=zA.exec(r))!==null&&i!==void 0?i:[],y=Zo.parse(a??""),c=Zo.parse(g??""),C=p==="*"?y.multiply(c):y.divide(c);if(C.isNaN())return zp;r=r.replace(zA,C.toString())}for(;r.includes("+")||/.-\d+(?:\.\d+)?/.test(r);){var E,[,M,k,N]=(E=NA.exec(r))!==null&&E!==void 0?E:[],j=Zo.parse(M??""),q=Zo.parse(N??""),H=k==="+"?j.add(q):j.subtract(q);if(H.isNaN())return zp;r=r.replace(NA,H.toString())}return r}var jA=/\(([^()]*)\)/;function bB(e){for(var r=e,i;(i=jA.exec(r))!=null;){var[,a]=i;r=r.replace(jA,QM(a))}return r}function xB(e){var r=e.replace(/\s+/g,"");return r=bB(r),r=QM(r),r}function wB(e){try{return xB(e)}catch{return zp}}function Q1(e){var r=wB(e.slice(5,-1));return r===zp?"":r}var SB=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],PB=["dx","dy","angle","className","breakAll"];function ix(){return ix=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},ix.apply(null,arguments)}function BA(e,r){if(e==null)return{};var i,a,p=AB(e,r);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],r.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(p[i]=e[i])}return p}function AB(e,r){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var JM=/[ \f\n\r\t\v\u2028\u2029]+/,e5=e=>{var{children:r,breakAll:i,style:a}=e;try{var p=[];Sa(r)||(i?p=r.toString().split(""):p=r.toString().split(JM));var g=p.map(c=>({word:c,width:Og(c,a).width})),y=i?0:Og("",a).width;return{wordsWithComputedWidth:g,spaceWidth:y}}catch{return null}},CB=(e,r,i,a,p)=>{var{maxLines:g,children:y,style:c,breakAll:C}=e,E=Pr(g),M=y,k=function(){var ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ot.reduce((ft,rt)=>{var{word:It,width:kt}=rt,Ue=ft[ft.length-1];if(Ue&&(a==null||p||Ue.width+kt+i<Number(a)))Ue.words.push(It),Ue.width+=kt+i;else{var ct={words:[It],width:kt};ft.push(ct)}return ft},[])},N=k(r),j=At=>At.reduce((ot,ft)=>ot.width>ft.width?ot:ft);if(!E||p)return N;var q=N.length>g||j(N).width>Number(a);if(!q)return N;for(var H="",W=At=>{var ot=M.slice(0,At),ft=e5({breakAll:C,style:c,children:ot+H}).wordsWithComputedWidth,rt=k(ft),It=rt.length>g||j(rt).width>Number(a);return[It,rt]},K=0,ee=M.length-1,ie=0,ve;K<=ee&&ie<=M.length-1;){var ye=Math.floor((K+ee)/2),Pe=ye-1,[Me,je]=W(Pe),[ht]=W(ye);if(!Me&&!ht&&(K=ye+1),Me&&ht&&(ee=ye-1),!Me&&ht){ve=je;break}ie++}return ve||N},FA=e=>{var r=Sa(e)?[]:e.toString().split(JM);return[{words:r}]},TB=e=>{var{width:r,scaleToFit:i,children:a,style:p,breakAll:g,maxLines:y}=e;if((r||i)&&!tm.isSsr){var c,C,E=e5({breakAll:g,children:a,style:p});if(E){var{wordsWithComputedWidth:M,spaceWidth:k}=E;c=M,C=k}else return FA(a);return CB({breakAll:g,children:a,maxLines:y,style:p},c,C,r,i)}return FA(a)},UA="#808080",Zw=X.forwardRef((e,r)=>{var{x:i=0,y:a=0,lineHeight:p="1em",capHeight:g="0.71em",scaleToFit:y=!1,textAnchor:c="start",verticalAnchor:C="end",fill:E=UA}=e,M=BA(e,SB),k=X.useMemo(()=>TB({breakAll:M.breakAll,children:M.children,maxLines:M.maxLines,scaleToFit:y,style:M.style,width:M.width}),[M.breakAll,M.children,M.maxLines,y,M.style,M.width]),{dx:N,dy:j,angle:q,className:H,breakAll:W}=M,K=BA(M,PB);if(!ic(i)||!ic(a)||k.length===0)return null;var ee=i+(Pr(N)?N:0),ie=a+(Pr(j)?j:0),ve;switch(C){case"start":ve=Q1("calc(".concat(g,")"));break;case"middle":ve=Q1("calc(".concat((k.length-1)/2," * -").concat(p," + (").concat(g," / 2))"));break;default:ve=Q1("calc(".concat(k.length-1," * -").concat(p,")"));break}var ye=[];if(y){var Pe=k[0].width,{width:Me}=M;ye.push("scale(".concat(Pr(Me)?Me/Pe:1,")"))}return q&&ye.push("rotate(".concat(q,", ").concat(ee,", ").concat(ie,")")),ye.length&&(K.transform=ye.join(" ")),X.createElement("text",ix({},qa(K,!0),{ref:r,x:ee,y:ie,className:In("recharts-text",H),textAnchor:c,fill:E.includes("url")?UA:E}),k.map((je,ht)=>{var At=je.words.join(W?"":" ");return X.createElement("tspan",{x:ee,dy:ht===0?ve:p,key:"".concat(At,"-").concat(ht)},At)}))});Zw.displayName="Text";var EB=["labelRef"];function MB(e,r){if(e==null)return{};var i,a,p=RB(e,r);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],r.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(p[i]=e[i])}return p}function RB(e,r){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function $A(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function Ri(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?$A(Object(i),!0).forEach(function(a){DB(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):$A(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function DB(e,r,i){return(r=IB(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function IB(e){var r=OB(e,"string");return typeof r=="symbol"?r:r+""}function OB(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Jc(){return Jc=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Jc.apply(null,arguments)}var t5=X.createContext(null),kB=e=>{var{x:r,y:i,width:a,height:p,children:g}=e,y=X.useMemo(()=>({x:r,y:i,width:a,height:p}),[r,i,a,p]);return X.createElement(t5.Provider,{value:y},g)},r5=()=>{var e=X.useContext(t5),r=Gx();return e||r},LB=X.createContext(null),zB=()=>{var e=X.useContext(LB),r=pr(NE);return e||r},NB=e=>{var{value:r,formatter:i}=e,a=Sa(e.children)?r:e.children;return typeof i=="function"?i(a):a},Xw=e=>e!=null&&typeof e=="function",jB=(e,r)=>{var i=Ts(r-e),a=Math.min(Math.abs(r-e),360);return i*a},BB=(e,r,i,a,p)=>{var{offset:g,className:y}=e,{cx:c,cy:C,innerRadius:E,outerRadius:M,startAngle:k,endAngle:N,clockWise:j}=p,q=(E+M)/2,H=jB(k,N),W=H>=0?1:-1,K,ee;switch(r){case"insideStart":K=k+W*g,ee=j;break;case"insideEnd":K=N-W*g,ee=!j;break;case"end":K=N+W*g,ee=j;break;default:throw new Error("Unsupported position ".concat(r))}ee=H<=0?ee:!ee;var ie=Ha(c,C,q,K),ve=Ha(c,C,q,K+(ee?1:-1)*359),ye="M".concat(ie.x,",").concat(ie.y,`
    A`).concat(q,",").concat(q,",0,1,").concat(ee?0:1,`,
    `).concat(ve.x,",").concat(ve.y),Pe=Sa(e.id)?jg("recharts-radial-line-"):e.id;return X.createElement("text",Jc({},a,{dominantBaseline:"central",className:In("recharts-radial-bar-label",y)}),X.createElement("defs",null,X.createElement("path",{id:Pe,d:ye})),X.createElement("textPath",{xlinkHref:"#".concat(Pe)},i))},FB=(e,r,i)=>{var{cx:a,cy:p,innerRadius:g,outerRadius:y,startAngle:c,endAngle:C}=e,E=(c+C)/2;if(i==="outside"){var{x:M,y:k}=Ha(a,p,y+r,E);return{x:M,y:k,textAnchor:M>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:p,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:p,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:p,textAnchor:"middle",verticalAnchor:"end"};var N=(g+y)/2,{x:j,y:q}=Ha(a,p,N,E);return{x:j,y:q,textAnchor:"middle",verticalAnchor:"middle"}},n5=e=>"cx"in e&&Pr(e.cx),UB=(e,r)=>{var{parentViewBox:i,offset:a,position:p}=e,g;i!=null&&!n5(i)&&(g=i);var{x:y,y:c,width:C,height:E}=r,M=E>=0?1:-1,k=M*a,N=M>0?"end":"start",j=M>0?"start":"end",q=C>=0?1:-1,H=q*a,W=q>0?"end":"start",K=q>0?"start":"end";if(p==="top"){var ee={x:y+C/2,y:c-M*a,textAnchor:"middle",verticalAnchor:N};return Ri(Ri({},ee),g?{height:Math.max(c-g.y,0),width:C}:{})}if(p==="bottom"){var ie={x:y+C/2,y:c+E+k,textAnchor:"middle",verticalAnchor:j};return Ri(Ri({},ie),g?{height:Math.max(g.y+g.height-(c+E),0),width:C}:{})}if(p==="left"){var ve={x:y-H,y:c+E/2,textAnchor:W,verticalAnchor:"middle"};return Ri(Ri({},ve),g?{width:Math.max(ve.x-g.x,0),height:E}:{})}if(p==="right"){var ye={x:y+C+H,y:c+E/2,textAnchor:K,verticalAnchor:"middle"};return Ri(Ri({},ye),g?{width:Math.max(g.x+g.width-ye.x,0),height:E}:{})}var Pe=g?{width:C,height:E}:{};return p==="insideLeft"?Ri({x:y+H,y:c+E/2,textAnchor:K,verticalAnchor:"middle"},Pe):p==="insideRight"?Ri({x:y+C-H,y:c+E/2,textAnchor:W,verticalAnchor:"middle"},Pe):p==="insideTop"?Ri({x:y+C/2,y:c+k,textAnchor:"middle",verticalAnchor:j},Pe):p==="insideBottom"?Ri({x:y+C/2,y:c+E-k,textAnchor:"middle",verticalAnchor:N},Pe):p==="insideTopLeft"?Ri({x:y+H,y:c+k,textAnchor:K,verticalAnchor:j},Pe):p==="insideTopRight"?Ri({x:y+C-H,y:c+k,textAnchor:W,verticalAnchor:j},Pe):p==="insideBottomLeft"?Ri({x:y+H,y:c+E-k,textAnchor:K,verticalAnchor:N},Pe):p==="insideBottomRight"?Ri({x:y+C-H,y:c+E-k,textAnchor:W,verticalAnchor:N},Pe):p&&typeof p=="object"&&(Pr(p.x)||Cd(p.x))&&(Pr(p.y)||Cd(p.y))?Ri({x:y+iu(p.x,C),y:c+iu(p.y,E),textAnchor:"end",verticalAnchor:"end"},Pe):Ri({x:y+C/2,y:c+E/2,textAnchor:"middle",verticalAnchor:"middle"},Pe)},$B={offset:5};function uf(e){var r=uu(e,$B),{viewBox:i,position:a,value:p,children:g,content:y,className:c="",textBreakAll:C,labelRef:E}=r,M=zB(),k=r5(),N=a==="center"?k:M??k,j=i||N;if(!j||Sa(p)&&Sa(g)&&!X.isValidElement(y)&&typeof y!="function")return null;var q=Ri(Ri({},r),{},{viewBox:j});if(X.isValidElement(y)){var{labelRef:H}=q,W=MB(q,EB);return X.cloneElement(y,W)}var K;if(typeof y=="function"){if(K=X.createElement(y,q),X.isValidElement(K))return K}else K=NB(r);var ee=n5(j),ie=qa(r,!0);if(ee&&(a==="insideStart"||a==="insideEnd"||a==="end"))return BB(r,a,K,ie,j);var ve=ee?FB(j,r.offset,r.position):UB(r,j);return X.createElement(Zw,Jc({ref:E,className:In("recharts-label",c)},ie,ve,{breakAll:C}),K)}uf.displayName="Label";var VB=(e,r,i)=>{if(!e)return null;var a={viewBox:r,labelRef:i};return e===!0?X.createElement(uf,Jc({key:"label-implicit"},a)):ic(e)?X.createElement(uf,Jc({key:"label-implicit",value:e},a)):X.isValidElement(e)?e.type===uf?X.cloneElement(e,Ri({key:"label-implicit"},a)):X.createElement(uf,Jc({key:"label-implicit",content:e},a)):Xw(e)?X.createElement(uf,Jc({key:"label-implicit",content:e},a)):e&&typeof e=="object"?X.createElement(uf,Jc({},e,{key:"label-implicit"},a)):null};function HB(e){var{label:r}=e,i=r5();return VB(r,i)||null}var J1={},eb={},VA;function qB(){return VA||(VA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(i){return i[i.length-1]}e.last=r})(eb)),eb}var tb={},HA;function GB(){return HA||(HA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(i){return Array.isArray(i)?i:Array.from(i)}e.toArray=r})(tb)),tb}var qA;function WB(){return qA||(qA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=qB(),i=GB(),a=zx();function p(g){if(a.isArrayLike(g))return r.last(i.toArray(g))}e.last=p})(J1)),J1}var rb,GA;function ZB(){return GA||(GA=1,rb=WB().last),rb}var XB=ZB();const KB=au(XB);var YB=["valueAccessor"],QB=["dataKey","clockWise","id","textBreakAll"];function bv(){return bv=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},bv.apply(null,arguments)}function WA(e,r){if(e==null)return{};var i,a,p=JB(e,r);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],r.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(p[i]=e[i])}return p}function JB(e,r){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var eF=e=>Array.isArray(e.value)?KB(e.value):e.value,i5=X.createContext(void 0),tF=i5.Provider,a5=X.createContext(void 0);a5.Provider;function rF(){return X.useContext(i5)}function nF(){return X.useContext(a5)}function j0(e){var{valueAccessor:r=eF}=e,i=WA(e,YB),{dataKey:a,clockWise:p,id:g,textBreakAll:y}=i,c=WA(i,QB),C=rF(),E=nF(),M=C||E;return!M||!M.length?null:X.createElement(ff,{className:"recharts-label-list"},M.map((k,N)=>{var j,q=Sa(a)?r(k,N):Co(k&&k.payload,a),H=Sa(g)?{}:{id:"".concat(g,"-").concat(N)};return X.createElement(uf,bv({},qa(k,!0),c,H,{fill:(j=i.fill)!==null&&j!==void 0?j:k.fill,parentViewBox:k.parentViewBox,value:q,textBreakAll:y,viewBox:k.viewBox,key:"label-".concat(N),index:N}))}))}j0.displayName="LabelList";function iF(e){var{label:r}=e;return r?r===!0?X.createElement(j0,{key:"labelList-implicit"}):X.isValidElement(r)||Xw(r)?X.createElement(j0,{key:"labelList-implicit",content:r}):typeof r=="object"?X.createElement(j0,bv({key:"labelList-implicit"},r,{type:String(r.type)})):null:null}var aF={radiusAxis:{},angleAxis:{}},o5=Ds({name:"polarAxis",initialState:aF,reducers:{addRadiusAxis(e,r){e.radiusAxis[r.payload.id]=r.payload},removeRadiusAxis(e,r){delete e.radiusAxis[r.payload.id]},addAngleAxis(e,r){e.angleAxis[r.payload.id]=r.payload},removeAngleAxis(e,r){delete e.angleAxis[r.payload.id]}}}),{addRadiusAxis:iG,removeRadiusAxis:aG,addAngleAxis:oG,removeAngleAxis:sG}=o5.actions,oF=o5.reducer,nb={},ZA;function sF(){return ZA||(ZA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(i){if(typeof i!="object"||i==null)return!1;if(Object.getPrototypeOf(i)===null)return!0;if(Object.prototype.toString.call(i)!=="[object Object]"){const p=i[Symbol.toStringTag];return p==null||!Object.getOwnPropertyDescriptor(i,Symbol.toStringTag)?.writable?!1:i.toString()===`[object ${p}]`}let a=i;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(i)===a}e.isPlainObject=r})(nb)),nb}var ib,XA;function lF(){return XA||(XA=1,ib=sF().isPlainObject),ib}var uF=lF();const cF=au(uF);function KA(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function YA(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?KA(Object(i),!0).forEach(function(a){hF(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):KA(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function hF(e,r,i){return(r=fF(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function fF(e){var r=dF(e,"string");return typeof r=="symbol"?r:r+""}function dF(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function xv(){return xv=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},xv.apply(null,arguments)}var QA=(e,r,i,a,p)=>{var g=i-a,y;return y="M ".concat(e,",").concat(r),y+="L ".concat(e+i,",").concat(r),y+="L ".concat(e+i-g/2,",").concat(r+p),y+="L ".concat(e+i-g/2-a,",").concat(r+p),y+="L ".concat(e,",").concat(r," Z"),y},pF={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},mF=e=>{var r=uu(e,pF),{x:i,y:a,upperWidth:p,lowerWidth:g,height:y,className:c}=r,{animationEasing:C,animationDuration:E,animationBegin:M,isUpdateAnimationActive:k}=r,N=X.useRef(),[j,q]=X.useState(-1),H=X.useRef(p),W=X.useRef(g),K=X.useRef(y),ee=X.useRef(i),ie=X.useRef(a),ve=Xx(e,"trapezoid-");if(X.useEffect(()=>{if(N.current&&N.current.getTotalLength)try{var It=N.current.getTotalLength();It&&q(It)}catch{}},[]),i!==+i||a!==+a||p!==+p||g!==+g||y!==+y||p===0&&g===0||y===0)return null;var ye=In("recharts-trapezoid",c);if(!k)return X.createElement("g",null,X.createElement("path",xv({},qa(r,!0),{className:ye,d:QA(i,a,p,g,y)})));var Pe=H.current,Me=W.current,je=K.current,ht=ee.current,At=ie.current,ot="0px ".concat(j===-1?1:j,"px"),ft="".concat(j,"px 0px"),rt=T3(["strokeDasharray"],E,C);return X.createElement(Zx,{animationId:ve,key:ve,canBegin:j>0,duration:E,easing:C,isActive:k,begin:M},It=>{var kt=So(Pe,p,It),Ue=So(Me,g,It),ct=So(je,y,It),nt=So(ht,i,It),Ct=So(At,a,It);N.current&&(H.current=kt,W.current=Ue,K.current=ct,ee.current=nt,ie.current=Ct);var Te=It>0?{transition:rt,strokeDasharray:ft}:{strokeDasharray:ot};return X.createElement("path",xv({},qa(r,!0),{className:ye,d:QA(nt,Ct,kt,Ue,ct),ref:N,style:YA(YA({},Te),r.style)}))})},gF=["option","shapeType","propTransformer","activeClassName","isActive"];function yF(e,r){if(e==null)return{};var i,a,p=vF(e,r);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],r.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(p[i]=e[i])}return p}function vF(e,r){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function JA(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function wv(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?JA(Object(i),!0).forEach(function(a){_F(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):JA(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function _F(e,r,i){return(r=bF(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function bF(e){var r=xF(e,"string");return typeof r=="symbol"?r:r+""}function xF(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function wF(e,r){return wv(wv({},r),e)}function SF(e,r){return e==="symbols"}function eC(e){var{shapeType:r,elementProps:i}=e;switch(r){case"rectangle":return X.createElement(D3,i);case"trapezoid":return X.createElement(mF,i);case"sector":return X.createElement(k3,i);case"symbols":if(SF(r))return X.createElement(BT,i);break;default:return null}}function PF(e){return X.isValidElement(e)?e.props:e}function AF(e){var{option:r,shapeType:i,propTransformer:a=wF,activeClassName:p="recharts-active-shape",isActive:g}=e,y=yF(e,gF),c;if(X.isValidElement(r))c=X.cloneElement(r,wv(wv({},y),PF(r)));else if(typeof r=="function")c=r(y);else if(cF(r)&&typeof r!="boolean"){var C=a(r,y);c=X.createElement(eC,{shapeType:i,elementProps:C})}else{var E=y;c=X.createElement(eC,{shapeType:i,elementProps:E})}return g?X.createElement(ff,{className:p},c):c}var s5=(e,r)=>{var i=Pa();return(a,p)=>g=>{e?.(a,p,g),i(TM({activeIndex:String(p),activeDataKey:r,activeCoordinate:a.tooltipPosition}))}},l5=e=>{var r=Pa();return(i,a)=>p=>{e?.(i,a,p),r(gN())}},u5=(e,r)=>{var i=Pa();return(a,p)=>g=>{e?.(a,p,g),i(yN({activeIndex:String(p),activeDataKey:r,activeCoordinate:a.tooltipPosition}))}};function CF(e){var{fn:r,args:i}=e,a=Pa(),p=lu();return X.useEffect(()=>{if(!p){var g=r(i);return a(dN(g)),()=>{a(pN(g))}}},[r,i,a,p]),null}var TF=()=>{};function EF(e){var{legendPayload:r}=e,i=Pa(),a=lu();return X.useEffect(()=>a?TF:(i(ok(r)),()=>{i(sk(r))}),[i,a,r]),null}var ab,MF=()=>{var[e]=X.useState(()=>jg("uid-"));return e},RF=(ab=dx.useId)!==null&&ab!==void 0?ab:MF;function DF(e,r){var i=RF();return r||(e?"".concat(e,"-").concat(i):i)}var IF=X.createContext(void 0),OF=e=>{var{id:r,type:i,children:a}=e,p=DF("recharts-".concat(i),r);return X.createElement(IF.Provider,{value:p},a(p))},kF={cartesianItems:[],polarItems:[]},c5=Ds({name:"graphicalItems",initialState:kF,reducers:{addCartesianGraphicalItem(e,r){e.cartesianItems.push(r.payload)},replaceCartesianGraphicalItem(e,r){var{prev:i,next:a}=r.payload,p=rh(e).cartesianItems.indexOf(i);p>-1&&(e.cartesianItems[p]=a)},removeCartesianGraphicalItem(e,r){var i=rh(e).cartesianItems.indexOf(r.payload);i>-1&&e.cartesianItems.splice(i,1)},addPolarGraphicalItem(e,r){e.polarItems.push(r.payload)},removePolarGraphicalItem(e,r){var i=rh(e).polarItems.indexOf(r.payload);i>-1&&e.polarItems.splice(i,1)}}}),{addCartesianGraphicalItem:LF,replaceCartesianGraphicalItem:zF,removeCartesianGraphicalItem:NF,addPolarGraphicalItem:lG,removePolarGraphicalItem:uG}=c5.actions,jF=c5.reducer;function BF(e){var r=Pa(),i=X.useRef(null);return X.useEffect(()=>{i.current===null?r(LF(e)):i.current!==e&&r(zF({prev:i.current,next:e})),i.current=e},[r,e]),X.useEffect(()=>()=>{i.current&&(r(NF(i.current)),i.current=null)},[r]),null}function tC(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function rC(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?tC(Object(i),!0).forEach(function(a){FF(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):tC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function FF(e,r,i){return(r=UF(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function UF(e){var r=$F(e,"string");return typeof r=="symbol"?r:r+""}function $F(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var VF={xAxis:{},yAxis:{},zAxis:{}},h5=Ds({name:"cartesianAxis",initialState:VF,reducers:{addXAxis(e,r){e.xAxis[r.payload.id]=r.payload},removeXAxis(e,r){delete e.xAxis[r.payload.id]},addYAxis(e,r){e.yAxis[r.payload.id]=r.payload},removeYAxis(e,r){delete e.yAxis[r.payload.id]},addZAxis(e,r){e.zAxis[r.payload.id]=r.payload},removeZAxis(e,r){delete e.zAxis[r.payload.id]},updateYAxisWidth(e,r){var{id:i,width:a}=r.payload;e.yAxis[i]&&(e.yAxis[i]=rC(rC({},e.yAxis[i]),{},{width:a}))}}}),{addXAxis:HF,removeXAxis:qF,addYAxis:GF,removeYAxis:WF,addZAxis:cG,removeZAxis:hG,updateYAxisWidth:ZF}=h5.actions,XF=h5.reducer,KF=it([Aa],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),YF=it([KF,lh,uh],(e,r,i)=>{if(!(!e||r==null||i==null))return{x:e.left,y:e.top,width:Math.max(0,r-e.left-e.right),height:Math.max(0,i-e.top-e.bottom)}}),f5=()=>pr(YF),QF="Invariant failed";function JF(e,r){throw new Error(QF)}var eU=["x","y"];function ax(){return ax=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},ax.apply(null,arguments)}function nC(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function Tg(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?nC(Object(i),!0).forEach(function(a){tU(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):nC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function tU(e,r,i){return(r=rU(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function rU(e){var r=nU(e,"string");return typeof r=="symbol"?r:r+""}function nU(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function iU(e,r){if(e==null)return{};var i,a,p=aU(e,r);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],r.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(p[i]=e[i])}return p}function aU(e,r){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function oU(e,r){var{x:i,y:a}=e,p=iU(e,eU),g="".concat(i),y=parseInt(g,10),c="".concat(a),C=parseInt(c,10),E="".concat(r.height||p.height),M=parseInt(E,10),k="".concat(r.width||p.width),N=parseInt(k,10);return Tg(Tg(Tg(Tg(Tg({},r),p),y?{x:y}:{}),C?{y:C}:{}),{},{height:M,width:N,name:r.name,radius:r.radius})}function Kw(e){return X.createElement(AF,ax({shapeType:"rectangle",propTransformer:oU,activeClassName:"recharts-active-bar"},e))}var sU=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a,p)=>{if(Pr(r))return r;var g=Pr(a)||Sa(a);return g?r(a,p):(g||JF(),i)}},lU={},d5=Ds({name:"errorBars",initialState:lU,reducers:{addErrorBar:(e,r)=>{var{itemId:i,errorBar:a}=r.payload;e[i]||(e[i]=[]),e[i].push(a)},replaceErrorBar:(e,r)=>{var{itemId:i,prev:a,next:p}=r.payload;e[i]&&(e[i]=e[i].map(g=>g.dataKey===a.dataKey&&g.direction===a.direction?p:g))},removeErrorBar:(e,r)=>{var{itemId:i,errorBar:a}=r.payload;e[i]&&(e[i]=e[i].filter(p=>p.dataKey!==a.dataKey||p.direction!==a.direction))}}}),{addErrorBar:fG,replaceErrorBar:dG,removeErrorBar:pG}=d5.actions,uU=d5.reducer,cU=["children"];function hU(e,r){if(e==null)return{};var i,a,p=fU(e,r);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],r.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(p[i]=e[i])}return p}function fU(e,r){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var dU={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},pU=X.createContext(dU);function mU(e){var{children:r}=e,i=hU(e,cU);return X.createElement(pU.Provider,{value:i},r)}function p5(e,r){var i,a,p=pr(E=>hh(E,e)),g=pr(E=>fh(E,r)),y=(i=p?.allowDataOverflow)!==null&&i!==void 0?i:Ss.allowDataOverflow,c=(a=g?.allowDataOverflow)!==null&&a!==void 0?a:Ps.allowDataOverflow,C=y||c;return{needClip:C,needClipX:y,needClipY:c}}function gU(e){var{xAxisId:r,yAxisId:i,clipPathId:a}=e,p=f5(),{needClipX:g,needClipY:y,needClip:c}=p5(r,i);if(!c)return null;var{x:C,y:E,width:M,height:k}=p;return X.createElement("clipPath",{id:"clipPath-".concat(a)},X.createElement("rect",{x:g?C:C-M/2,y:y?E:E-k/2,width:g?M:M*2,height:y?k:k*2}))}var yU=["onMouseEnter","onMouseLeave","onClick"],vU=["value","background","tooltipPosition"],_U=["id"],bU=["onMouseEnter","onClick","onMouseLeave"];function df(){return df=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},df.apply(null,arguments)}function iC(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function Po(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?iC(Object(i),!0).forEach(function(a){xU(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):iC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function xU(e,r,i){return(r=wU(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function wU(e){var r=SU(e,"string");return typeof r=="symbol"?r:r+""}function SU(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Sv(e,r){if(e==null)return{};var i,a,p=PU(e,r);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],r.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(p[i]=e[i])}return p}function PU(e,r){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var AU=e=>{var{dataKey:r,name:i,fill:a,legendType:p,hide:g}=e;return[{inactive:g,dataKey:r,type:p,color:a,value:S3(i,r),payload:e}]};function CU(e){var{dataKey:r,stroke:i,strokeWidth:a,fill:p,name:g,hide:y,unit:c}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:i,strokeWidth:a,fill:p,dataKey:r,nameKey:void 0,name:S3(g,r),hide:y,type:e.tooltipType,color:e.fill,unit:c}}}function TU(e){var r=pr(Kp),{data:i,dataKey:a,background:p,allOtherBarProps:g}=e,{onMouseEnter:y,onMouseLeave:c,onClick:C}=g,E=Sv(g,yU),M=s5(y,a),k=l5(c),N=u5(C,a);if(!p||i==null)return null;var j=qa(p,!1);return X.createElement(X.Fragment,null,i.map((q,H)=>{var{value:W,background:K,tooltipPosition:ee}=q,ie=Sv(q,vU);if(!K)return null;var ve=M(q,H),ye=k(q,H),Pe=N(q,H),Me=Po(Po(Po(Po(Po({option:p,isActive:String(H)===r},ie),{},{fill:"#eee"},K),j),Ix(E,q,H)),{},{onMouseEnter:ve,onMouseLeave:ye,onClick:Pe,dataKey:a,index:H,className:"recharts-bar-background-rectangle"});return X.createElement(Kw,df({key:"background-bar-".concat(Me.index)},Me))}))}function EU(e){var{showLabels:r,children:i,rects:a}=e,p=a?.map(g=>{var y={x:g.x,y:g.y,width:g.width,height:g.height};return Po(Po({},y),{},{value:g.value,payload:g.payload,parentViewBox:g.parentViewBox,viewBox:y,fill:g.fill})});return X.createElement(tF,{value:r?p:void 0},i)}function MU(e){var{shape:r,activeBar:i,baseProps:a,entry:p,index:g,dataKey:y}=e,c=pr(Kp),C=pr(FM),E=i&&String(g)===c&&(C==null||y===C),M=E?i:r;return X.createElement(Kw,df({},a,p,{isActive:E,option:M,index:g,dataKey:y}))}function RU(e){var{shape:r,baseProps:i,entry:a,index:p,dataKey:g}=e;return X.createElement(Kw,df({},i,a,{isActive:!1,option:r,index:p,dataKey:g}))}function DU(e){var{data:r,props:i}=e,a=Jg(i),{id:p}=a,g=Sv(a,_U),{shape:y,dataKey:c,activeBar:C}=i,{onMouseEnter:E,onClick:M,onMouseLeave:k}=i,N=Sv(i,bU),j=s5(E,c),q=l5(k),H=u5(M,c);return r?X.createElement(X.Fragment,null,r.map((W,K)=>X.createElement(ff,df({className:"recharts-bar-rectangle"},Ix(N,W,K),{onMouseEnter:j(W,K),onMouseLeave:q(W,K),onClick:H(W,K),key:"rectangle-".concat(W?.x,"-").concat(W?.y,"-").concat(W?.value,"-").concat(K)}),C?X.createElement(MU,{shape:y,activeBar:C,baseProps:g,entry:W,index:K,dataKey:c}):X.createElement(RU,{shape:y,baseProps:g,entry:W,index:K,dataKey:c})))):null}function IU(e){var{props:r,previousRectanglesRef:i}=e,{data:a,layout:p,isAnimationActive:g,animationBegin:y,animationDuration:c,animationEasing:C,onAnimationEnd:E,onAnimationStart:M}=r,k=i.current,N=Xx(r,"recharts-bar-"),[j,q]=X.useState(!1),H=!j,W=X.useCallback(()=>{typeof E=="function"&&E(),q(!1)},[E]),K=X.useCallback(()=>{typeof M=="function"&&M(),q(!0)},[M]);return X.createElement(EU,{showLabels:H,rects:a},X.createElement(Zx,{animationId:N,begin:y,duration:c,isActive:g,easing:C,onAnimationEnd:W,onAnimationStart:K,key:N},ee=>{var ie=ee===1?a:a?.map((ve,ye)=>{var Pe=k&&k[ye];if(Pe)return Po(Po({},ve),{},{x:So(Pe.x,ve.x,ee),y:So(Pe.y,ve.y,ee),width:So(Pe.width,ve.width,ee),height:So(Pe.height,ve.height,ee)});if(p==="horizontal"){var Me=So(0,ve.height,ee);return Po(Po({},ve),{},{y:ve.y+ve.height-Me,height:Me})}var je=So(0,ve.width,ee);return Po(Po({},ve),{},{width:je})});return ee>0&&(i.current=ie??null),ie==null?null:X.createElement(ff,null,X.createElement(DU,{props:r,data:ie}))}),X.createElement(iF,{label:r.label}),r.children)}function OU(e){var r=X.useRef(null);return X.createElement(IU,{previousRectanglesRef:r,props:e})}var m5=0,kU=(e,r)=>{var i=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:i,errorVal:Co(e,r)}};class LU extends X.PureComponent{render(){var{hide:r,data:i,dataKey:a,className:p,xAxisId:g,yAxisId:y,needClip:c,background:C,id:E}=this.props;if(r||i==null)return null;var M=In("recharts-bar",p),k=E;return X.createElement(ff,{className:M,id:E},c&&X.createElement("defs",null,X.createElement(gU,{clipPathId:k,xAxisId:g,yAxisId:y})),X.createElement(ff,{className:"recharts-bar-rectangles",clipPath:c?"url(#clipPath-".concat(k,")"):void 0},X.createElement(TU,{data:i,dataKey:a,background:C,allOtherBarProps:this.props}),X.createElement(OU,this.props)))}}var zU={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!tm.isSsr,legendType:"rect",minPointSize:m5,xAxisId:0,yAxisId:0};function NU(e){var{xAxisId:r,yAxisId:i,hide:a,legendType:p,minPointSize:g,activeBar:y,animationBegin:c,animationDuration:C,animationEasing:E,isAnimationActive:M}=e,{needClip:k}=p5(r,i),N=Wx(),j=lu(),q=PD(e.children,Ww),H=pr(ee=>h$(ee,r,i,j,e.id,q));if(N!=="vertical"&&N!=="horizontal")return null;var W,K=H?.[0];return K==null||K.height==null||K.width==null?W=0:W=N==="vertical"?K.height/2:K.width/2,X.createElement(mU,{xAxisId:r,yAxisId:i,data:H,dataPointFormatter:kU,errorBarOffset:W},X.createElement(LU,df({},e,{layout:N,needClip:k,data:H,xAxisId:r,yAxisId:i,hide:a,legendType:p,minPointSize:g,activeBar:y,animationBegin:c,animationDuration:C,animationEasing:E,isAnimationActive:M})))}function jU(e){var{layout:r,barSettings:{dataKey:i,minPointSize:a},pos:p,bandSize:g,xAxis:y,yAxis:c,xAxisTicks:C,yAxisTicks:E,stackedData:M,displayedData:k,offset:N,cells:j,parentViewBox:q}=e,H=r==="horizontal"?c:y,W=M?H.scale.domain():null,K=LO({numericAxis:H});return k.map((ee,ie)=>{var ve,ye,Pe,Me,je,ht;M?ve=MO(M[ie],W):(ve=Co(ee,i),Array.isArray(ve)||(ve=[K,ve]));var At=sU(a,m5)(ve[1],ie);if(r==="horizontal"){var ot,[ft,rt]=[c.scale(ve[0]),c.scale(ve[1])];ye=QS({axis:y,ticks:C,bandSize:g,offset:p.offset,entry:ee,index:ie}),Pe=(ot=rt??ft)!==null&&ot!==void 0?ot:void 0,Me=p.size;var It=ft-rt;if(je=ol(It)?0:It,ht={x:ye,y:N.top,width:Me,height:N.height},Math.abs(At)>0&&Math.abs(je)<Math.abs(At)){var kt=Ts(je||At)*(Math.abs(At)-Math.abs(je));Pe-=kt,je+=kt}}else{var[Ue,ct]=[y.scale(ve[0]),y.scale(ve[1])];if(ye=Ue,Pe=QS({axis:c,ticks:E,bandSize:g,offset:p.offset,entry:ee,index:ie}),Me=ct-Ue,je=p.size,ht={x:N.left,y:Pe,width:N.width,height:je},Math.abs(At)>0&&Math.abs(Me)<Math.abs(At)){var nt=Ts(Me||At)*(Math.abs(At)-Math.abs(Me));Me+=nt}}if(ye==null||Pe==null||Me==null||je==null)return null;var Ct=Po(Po({},ee),{},{x:ye,y:Pe,width:Me,height:je,value:M?ve:ve[1],payload:ee,background:ht,tooltipPosition:{x:ye+Me/2,y:Pe+je/2},parentViewBox:q},j&&j[ie]&&j[ie].props);return Ct}).filter(Boolean)}function BU(e){var r=uu(e,zU),i=lu();return X.createElement(OF,{id:r.id,type:"bar"},a=>X.createElement(X.Fragment,null,X.createElement(EF,{legendPayload:AU(r)}),X.createElement(CF,{fn:CU,args:r}),X.createElement(BF,{type:"bar",id:a,data:void 0,xAxisId:r.xAxisId,yAxisId:r.yAxisId,zAxisId:0,dataKey:r.dataKey,stackId:kO(r.stackId),hide:r.hide,barSize:r.barSize,minPointSize:r.minPointSize,maxBarSize:r.maxBarSize,isPanorama:i}),X.createElement(NU,df({},r,{id:a}))))}var g5=X.memo(BU);g5.displayName="Bar";function aC(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function R0(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?aC(Object(i),!0).forEach(function(a){FU(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):aC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function FU(e,r,i){return(r=UU(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function UU(e){var r=$U(e,"string");return typeof r=="symbol"?r:r+""}function $U(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var VU=(e,r)=>r,HU=(e,r,i)=>i,qU=(e,r,i,a)=>a,GU=(e,r,i,a,p)=>p,dy=it([Rw,GU],(e,r)=>e.filter(i=>i.type==="bar").find(i=>i.id===r)),WU=it([dy],e=>e?.maxBarSize),ZU=(e,r,i,a,p,g)=>g,oC=(e,r,i)=>{var a=i??e;if(!Sa(a))return iu(a,r,0)},XU=it([bn,Rw,VU,HU,qU],(e,r,i,a,p)=>r.filter(g=>e==="horizontal"?g.xAxisId===i:g.yAxisId===a).filter(g=>g.isPanorama===p).filter(g=>g.hide===!1).filter(g=>g.type==="bar")),KU=(e,r,i,a)=>{var p=bn(e);return p==="horizontal"?Jb(e,"yAxis",i,a):Jb(e,"xAxis",r,a)},YU=(e,r,i)=>{var a=bn(e);return a==="horizontal"?dA(e,"xAxis",r):dA(e,"yAxis",i)},QU=(e,r,i)=>{var a={},p=e.filter(i_),g=e.filter(E=>E.stackId==null),y=p.reduce((E,M)=>(E[M.stackId]||(E[M.stackId]=[]),E[M.stackId].push(M),E),a),c=Object.entries(y).map(E=>{var[M,k]=E,N=k.map(q=>q.dataKey),j=oC(r,i,k[0].barSize);return{stackId:M,dataKeys:N,barSize:j}}),C=g.map(E=>{var M=[E.dataKey].filter(N=>N!=null),k=oC(r,i,E.barSize);return{stackId:void 0,dataKeys:M,barSize:k}});return[...c,...C]},JU=it([XU,hz,YU],QU),e$=(e,r,i,a,p)=>{var g,y,c=dy(e,r,i,a,p);if(c!=null){var C=bn(e),E=RE(e),{maxBarSize:M}=c,k=Sa(M)?E:M,N,j;return C==="horizontal"?(N=Xp(e,"xAxis",r,a),j=Zp(e,"xAxis",r,a)):(N=Xp(e,"yAxis",i,a),j=Zp(e,"yAxis",i,a)),(g=(y=Hx(N,j,!0))!==null&&y!==void 0?y:k)!==null&&g!==void 0?g:0}},y5=(e,r,i,a)=>{var p=bn(e),g,y;return p==="horizontal"?(g=Xp(e,"xAxis",r,a),y=Zp(e,"xAxis",r,a)):(g=Xp(e,"yAxis",i,a),y=Zp(e,"yAxis",i,a)),Hx(g,y)};function t$(e,r,i,a,p){var g=a.length;if(!(g<1)){var y=iu(e,i,0,!0),c,C=[];if(Rs(a[0].barSize)){var E=!1,M=i/g,k=a.reduce((K,ee)=>K+(ee.barSize||0),0);k+=(g-1)*y,k>=i&&(k-=(g-1)*y,y=0),k>=i&&M>0&&(E=!0,M*=.9,k=g*M);var N=(i-k)/2>>0,j={offset:N-y,size:0};c=a.reduce((K,ee)=>{var ie,ve={stackId:ee.stackId,dataKeys:ee.dataKeys,position:{offset:j.offset+j.size+y,size:E?M:(ie=ee.barSize)!==null&&ie!==void 0?ie:0}},ye=[...K,ve];return j=ye[ye.length-1].position,ye},C)}else{var q=iu(r,i,0,!0);i-2*q-(g-1)*y<=0&&(y=0);var H=(i-2*q-(g-1)*y)/g;H>1&&(H>>=0);var W=Rs(p)?Math.min(H,p):H;c=a.reduce((K,ee,ie)=>[...K,{stackId:ee.stackId,dataKeys:ee.dataKeys,position:{offset:q+(H+y)*ie+(H-W)/2,size:W}}],C)}return c}}var r$=(e,r,i,a,p,g,y)=>{var c=Sa(y)?r:y,C=t$(i,a,p!==g?p:g,e,c);return p!==g&&C!=null&&(C=C.map(E=>R0(R0({},E),{},{position:R0(R0({},E.position),{},{offset:E.position.offset-p/2})}))),C},n$=it([JU,RE,cz,DE,e$,y5,WU],r$),i$=(e,r,i,a)=>Xp(e,"xAxis",r,a),a$=(e,r,i,a)=>Xp(e,"yAxis",i,a),o$=(e,r,i,a)=>Zp(e,"xAxis",r,a),s$=(e,r,i,a)=>Zp(e,"yAxis",i,a),l$=it([n$,dy],(e,r)=>{if(!(e==null||r==null)){var i=e.find(a=>a.stackId===r.stackId&&r.dataKey!=null&&a.dataKeys.includes(r.dataKey));if(i!=null)return i.position}}),u$=(e,r)=>{var i=Ew(r);if(!(!e||i==null||r==null)){var{stackId:a}=r;if(a!=null){var p=e[a];if(p){var{stackedData:g}=p;if(g)return g.find(y=>y.key===i)}}}},c$=it([KU,dy],u$),h$=it([Aa,qx,i$,a$,o$,s$,l$,bn,_w,y5,c$,dy,ZU],(e,r,i,a,p,g,y,c,C,E,M,k,N)=>{var{chartData:j,dataStartIndex:q,dataEndIndex:H}=C;if(!(k==null||y==null||r==null||c!=="horizontal"&&c!=="vertical"||i==null||a==null||p==null||g==null||E==null)){var{data:W}=k,K;if(W!=null&&W.length>0?K=W:K=j?.slice(q,H+1),K!=null)return jU({layout:c,barSettings:k,pos:y,parentViewBox:r,bandSize:E,xAxis:i,yAxis:a,xAxisTicks:p,yAxisTicks:g,stackedData:M,displayedData:K,offset:e,cells:N})}}),f$=e=>{var{chartData:r}=e,i=Pa(),a=lu();return X.useEffect(()=>a?()=>{}:(i(wA(r)),()=>{i(wA(void 0))}),[r,i,a]),null},sC={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},v5=Ds({name:"brush",initialState:sC,reducers:{setBrushSettings(e,r){return r.payload==null?sC:r.payload}}}),{setBrushSettings:mG}=v5.actions,d$=v5.reducer;function p$(e,r,i){return(r=m$(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function m$(e){var r=g$(e,"string");return typeof r=="symbol"?r:r+""}function g$(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}class Yw{static create(r){return new Yw(r)}constructor(r){this.scale=r}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(r){var{bandAware:i,position:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r!==void 0){if(a)switch(a){case"start":return this.scale(r);case"middle":{var p=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+p}case"end":{var g=this.bandwidth?this.bandwidth():0;return this.scale(r)+g}default:return this.scale(r)}if(i){var y=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+y}return this.scale(r)}}isInRange(r){var i=this.range(),a=i[0],p=i[i.length-1];return a<=p?r>=a&&r<=p:r>=p&&r<=a}}p$(Yw,"EPS",1e-4);function y$(e){return(e%180+180)%180}var v$=function(r){var{width:i,height:a}=r,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,g=y$(p),y=g*Math.PI/180,c=Math.atan(a/i),C=y>c&&y<Math.PI-c?a/Math.sin(y):i/Math.cos(y);return Math.abs(C)},_$={dots:[],areas:[],lines:[]},_5=Ds({name:"referenceElements",initialState:_$,reducers:{addDot:(e,r)=>{e.dots.push(r.payload)},removeDot:(e,r)=>{var i=rh(e).dots.findIndex(a=>a===r.payload);i!==-1&&e.dots.splice(i,1)},addArea:(e,r)=>{e.areas.push(r.payload)},removeArea:(e,r)=>{var i=rh(e).areas.findIndex(a=>a===r.payload);i!==-1&&e.areas.splice(i,1)},addLine:(e,r)=>{e.lines.push(r.payload)},removeLine:(e,r)=>{var i=rh(e).lines.findIndex(a=>a===r.payload);i!==-1&&e.lines.splice(i,1)}}}),{addDot:gG,removeDot:yG,addArea:vG,removeArea:_G,addLine:bG,removeLine:xG}=_5.actions,b$=_5.reducer,x$=X.createContext(void 0),w$=e=>{var{children:r}=e,[i]=X.useState("".concat(jg("recharts"),"-clip")),a=f5();if(a==null)return null;var{x:p,y:g,width:y,height:c}=a;return X.createElement(x$.Provider,{value:i},X.createElement("defs",null,X.createElement("clipPath",{id:i},X.createElement("rect",{x:p,y:g,height:c,width:y}))),r)};function Yp(e,r){for(var i in e)if({}.hasOwnProperty.call(e,i)&&(!{}.hasOwnProperty.call(r,i)||e[i]!==r[i]))return!1;for(var a in r)if({}.hasOwnProperty.call(r,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function b5(e,r,i){if(r<1)return[];if(r===1&&i===void 0)return e;for(var a=[],p=0;p<e.length;p+=r)a.push(e[p]);return a}function S$(e,r,i){var a={width:e.width+r.width,height:e.height+r.height};return v$(a,i)}function P$(e,r,i){var a=i==="width",{x:p,y:g,width:y,height:c}=e;return r===1?{start:a?p:g,end:a?p+y:g+c}:{start:a?p+y:g+c,end:a?p:g}}function Pv(e,r,i,a,p){if(e*r<e*a||e*r>e*p)return!1;var g=i();return e*(r-e*g/2-a)>=0&&e*(r+e*g/2-p)<=0}function A$(e,r){return b5(e,r+1)}function C$(e,r,i,a,p){for(var g=(a||[]).slice(),{start:y,end:c}=r,C=0,E=1,M=y,k=function(){var q=a?.[C];if(q===void 0)return{v:b5(a,E)};var H=C,W,K=()=>(W===void 0&&(W=i(q,H)),W),ee=q.coordinate,ie=C===0||Pv(e,ee,K,M,c);ie||(C=0,M=y,E+=1),ie&&(M=ee+e*(K()/2+p),C+=E)},N;E<=g.length;)if(N=k(),N)return N.v;return[]}function lC(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function to(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?lC(Object(i),!0).forEach(function(a){T$(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):lC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function T$(e,r,i){return(r=E$(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function E$(e){var r=M$(e,"string");return typeof r=="symbol"?r:r+""}function M$(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function R$(e,r,i,a,p){for(var g=(a||[]).slice(),y=g.length,{start:c}=r,{end:C}=r,E=function(N){var j=g[N],q,H=()=>(q===void 0&&(q=i(j,N)),q);if(N===y-1){var W=e*(j.coordinate+e*H()/2-C);g[N]=j=to(to({},j),{},{tickCoord:W>0?j.coordinate-W*e:j.coordinate})}else g[N]=j=to(to({},j),{},{tickCoord:j.coordinate});var K=Pv(e,j.tickCoord,H,c,C);K&&(C=j.tickCoord-e*(H()/2+p),g[N]=to(to({},j),{},{isShow:!0}))},M=y-1;M>=0;M--)E(M);return g}function D$(e,r,i,a,p,g){var y=(a||[]).slice(),c=y.length,{start:C,end:E}=r;if(g){var M=a[c-1],k=i(M,c-1),N=e*(M.coordinate+e*k/2-E);y[c-1]=M=to(to({},M),{},{tickCoord:N>0?M.coordinate-N*e:M.coordinate});var j=Pv(e,M.tickCoord,()=>k,C,E);j&&(E=M.tickCoord-e*(k/2+p),y[c-1]=to(to({},M),{},{isShow:!0}))}for(var q=g?c-1:c,H=function(ee){var ie=y[ee],ve,ye=()=>(ve===void 0&&(ve=i(ie,ee)),ve);if(ee===0){var Pe=e*(ie.coordinate-e*ye()/2-C);y[ee]=ie=to(to({},ie),{},{tickCoord:Pe<0?ie.coordinate-Pe*e:ie.coordinate})}else y[ee]=ie=to(to({},ie),{},{tickCoord:ie.coordinate});var Me=Pv(e,ie.tickCoord,ye,C,E);Me&&(C=ie.tickCoord+e*(ye()/2+p),y[ee]=to(to({},ie),{},{isShow:!0}))},W=0;W<q;W++)H(W);return y}function I$(e,r,i){var{tick:a,ticks:p,viewBox:g,minTickGap:y,orientation:c,interval:C,tickFormatter:E,unit:M,angle:k}=e;if(!p||!p.length||!a)return[];if(Pr(C)||tm.isSsr){var N;return(N=A$(p,Pr(C)?C:0))!==null&&N!==void 0?N:[]}var j=[],q=c==="top"||c==="bottom"?"width":"height",H=M&&q==="width"?Og(M,{fontSize:r,letterSpacing:i}):{width:0,height:0},W=(ie,ve)=>{var ye=typeof E=="function"?E(ie.value,ve):ie.value;return q==="width"?S$(Og(ye,{fontSize:r,letterSpacing:i}),H,k):Og(ye,{fontSize:r,letterSpacing:i})[q]},K=p.length>=2?Ts(p[1].coordinate-p[0].coordinate):1,ee=P$(g,K,q);return C==="equidistantPreserveStart"?C$(K,ee,W,p,y):(C==="preserveStart"||C==="preserveStartEnd"?j=D$(K,ee,W,p,y,C==="preserveStartEnd"):j=R$(K,ee,W,p,y),j.filter(ie=>ie.isShow))}var O$=e=>{var{ticks:r,label:i,labelGapWithTick:a=5,tickSize:p=0,tickMargin:g=0}=e,y=0;if(r){r.forEach(M=>{if(M){var k=M.getBoundingClientRect();k.width>y&&(y=k.width)}});var c=i?i.getBoundingClientRect().width:0,C=p+g,E=y+C+c+(i?a:0);return Math.round(E)}return 0},k$=["axisLine","width","height","className","hide","ticks"],L$=["viewBox"],z$=["viewBox"];function ox(e,r){if(e==null)return{};var i,a,p=N$(e,r);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],r.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(p[i]=e[i])}return p}function N$(e,r){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function Nd(){return Nd=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Nd.apply(null,arguments)}function uC(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function ua(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?uC(Object(i),!0).forEach(function(a){j$(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):uC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function j$(e,r,i){return(r=B$(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function B$(e){var r=F$(e,"string");return typeof r=="symbol"?r:r+""}function F$(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var U$={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function $$(e){var{x:r,y:i,width:a,height:p,orientation:g,mirror:y,axisLine:c,otherSvgProps:C}=e;if(!c)return null;var E=ua(ua(ua({},C),qa(c,!1)),{},{fill:"none"});if(g==="top"||g==="bottom"){var M=+(g==="top"&&!y||g==="bottom"&&y);E=ua(ua({},E),{},{x1:r,y1:i+M*p,x2:r+a,y2:i+M*p})}else{var k=+(g==="left"&&!y||g==="right"&&y);E=ua(ua({},E),{},{x1:r+k*a,y1:i,x2:r+k*a,y2:i+p})}return X.createElement("line",Nd({},E,{className:In("recharts-cartesian-axis-line",Up(c,"className"))}))}function V$(e,r,i,a,p,g,y,c,C){var E,M,k,N,j,q,H=c?-1:1,W=e.tickSize||y,K=Pr(e.tickCoord)?e.tickCoord:e.coordinate;switch(g){case"top":E=M=e.coordinate,N=i+ +!c*p,k=N-H*W,q=k-H*C,j=K;break;case"left":k=N=e.coordinate,M=r+ +!c*a,E=M-H*W,j=E-H*C,q=K;break;case"right":k=N=e.coordinate,M=r+ +c*a,E=M+H*W,j=E+H*C,q=K;break;default:E=M=e.coordinate,N=i+ +c*p,k=N+H*W,q=k+H*C,j=K;break}return{line:{x1:E,y1:k,x2:M,y2:N},tick:{x:j,y:q}}}function H$(e,r){switch(e){case"left":return r?"start":"end";case"right":return r?"end":"start";default:return"middle"}}function q$(e,r){switch(e){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}function G$(e){var{option:r,tickProps:i,value:a}=e,p,g=In(i.className,"recharts-cartesian-axis-tick-value");if(X.isValidElement(r))p=X.cloneElement(r,ua(ua({},i),{},{className:g}));else if(typeof r=="function")p=r(ua(ua({},i),{},{className:g}));else{var y="recharts-cartesian-axis-tick-value";typeof r!="boolean"&&(y=In(y,r?.className)),p=X.createElement(Zw,Nd({},i,{className:y}),a)}return p}function W$(e){var{ticks:r=[],tick:i,tickLine:a,stroke:p,tickFormatter:g,unit:y,padding:c,tickTextProps:C,orientation:E,mirror:M,x:k,y:N,width:j,height:q,tickSize:H,tickMargin:W,fontSize:K,letterSpacing:ee,getTicksConfig:ie,events:ve}=e,ye=I$(ua(ua({},ie),{},{ticks:r}),K,ee),Pe=H$(E,M),Me=q$(E,M),je=Jg(ie),ht=qa(i,!1),At=ua(ua({},je),{},{fill:"none"},qa(a,!1)),ot=ye.map((ft,rt)=>{var{line:It,tick:kt}=V$(ft,k,N,j,q,E,H,M,W),Ue=ua(ua(ua(ua({textAnchor:Pe,verticalAnchor:Me},je),{},{stroke:"none",fill:p},ht),kt),{},{index:rt,payload:ft,visibleTicksCount:ye.length,tickFormatter:g,padding:c},C);return X.createElement(ff,Nd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(ft.value,"-").concat(ft.coordinate,"-").concat(ft.tickCoord)},Ix(ve,ft,rt)),a&&X.createElement("line",Nd({},At,It,{className:In("recharts-cartesian-axis-tick-line",Up(a,"className"))})),i&&X.createElement(G$,{option:i,tickProps:Ue,value:"".concat(typeof g=="function"?g(ft.value,rt):ft.value).concat(y||"")}))});return ot.length>0?X.createElement("g",{className:"recharts-cartesian-axis-ticks"},ot):null}var Z$=X.forwardRef((e,r)=>{var{axisLine:i,width:a,height:p,className:g,hide:y,ticks:c}=e,C=ox(e,k$),[E,M]=X.useState(""),[k,N]=X.useState(""),j=X.useRef([]);X.useImperativeHandle(r,()=>({getCalculatedWidth:()=>{var H;return O$({ticks:j.current,label:(H=e.labelRef)===null||H===void 0?void 0:H.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var q=X.useCallback(H=>{if(H){var W=H.getElementsByClassName("recharts-cartesian-axis-tick-value");j.current=Array.from(W);var K=W[0];if(K){var ee=window.getComputedStyle(K),ie=ee.fontSize,ve=ee.letterSpacing;(ie!==E||ve!==k)&&(M(ie),N(ve))}}},[E,k]);return y||a!=null&&a<=0||p!=null&&p<=0?null:X.createElement(ff,{className:In("recharts-cartesian-axis",g),ref:q},X.createElement($$,{x:e.x,y:e.y,width:a,height:p,orientation:e.orientation,mirror:e.mirror,axisLine:i,otherSvgProps:Jg(e)}),X.createElement(W$,{ticks:c,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:E,letterSpacing:k,getTicksConfig:e,events:C}),X.createElement(kB,{x:e.x,y:e.y,width:e.width,height:e.height},X.createElement(HB,{label:e.label}),e.children))}),X$=X.memo(Z$,(e,r)=>{var{viewBox:i}=e,a=ox(e,L$),{viewBox:p}=r,g=ox(r,z$);return Yp(i,p)&&Yp(a,g)}),Qw=X.forwardRef((e,r)=>{var i=uu(e,U$);return X.createElement(X$,Nd({},i,{ref:r}))});Qw.displayName="CartesianAxis";var K$=["dangerouslySetInnerHTML","ticks"],Y$=["id"],Q$=["domain"],J$=["domain"];function sx(){return sx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},sx.apply(null,arguments)}function Av(e,r){if(e==null)return{};var i,a,p=eV(e,r);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],r.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(p[i]=e[i])}return p}function eV(e,r){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function tV(e){var r=Pa();return X.useEffect(()=>(r(HF(e)),()=>{r(qF(e))}),[e,r]),null}var rV=e=>{var{xAxisId:r,className:i}=e,a=pr(qx),p=lu(),g="xAxis",y=pr(W=>sm(W,g,r,p)),c=pr(W=>xM(W,g,r,p)),C=pr(W=>yM(W,r)),E=pr(W=>nN(W,r)),M=pr(W=>FE(W,r));if(C==null||E==null||M==null)return null;var{dangerouslySetInnerHTML:k,ticks:N}=e,j=Av(e,K$),{id:q}=M,H=Av(M,Y$);return X.createElement(Qw,sx({},j,H,{scale:y,x:E.x,y:E.y,width:C.width,height:C.height,className:In("recharts-".concat(g," ").concat(g),i),viewBox:a,ticks:c}))},nV={allowDataOverflow:Ss.allowDataOverflow,allowDecimals:Ss.allowDecimals,allowDuplicatedCategory:Ss.allowDuplicatedCategory,height:Ss.height,hide:!1,mirror:Ss.mirror,orientation:Ss.orientation,padding:Ss.padding,reversed:Ss.reversed,scale:Ss.scale,tickCount:Ss.tickCount,type:Ss.type,xAxisId:0},iV=e=>{var r,i,a,p,g,y=uu(e,nV);return X.createElement(X.Fragment,null,X.createElement(tV,{interval:(r=y.interval)!==null&&r!==void 0?r:"preserveEnd",id:y.xAxisId,scale:y.scale,type:y.type,padding:y.padding,allowDataOverflow:y.allowDataOverflow,domain:y.domain,dataKey:y.dataKey,allowDuplicatedCategory:y.allowDuplicatedCategory,allowDecimals:y.allowDecimals,tickCount:y.tickCount,includeHidden:(i=y.includeHidden)!==null&&i!==void 0?i:!1,reversed:y.reversed,ticks:y.ticks,height:y.height,orientation:y.orientation,mirror:y.mirror,hide:y.hide,unit:y.unit,name:y.name,angle:(a=y.angle)!==null&&a!==void 0?a:0,minTickGap:(p=y.minTickGap)!==null&&p!==void 0?p:5,tick:(g=y.tick)!==null&&g!==void 0?g:!0,tickFormatter:y.tickFormatter}),X.createElement(rV,y))},aV=(e,r)=>{var{domain:i}=e,a=Av(e,Q$),{domain:p}=r,g=Av(r,J$);return Yp(a,g)?Array.isArray(i)&&i.length===2&&Array.isArray(p)&&p.length===2?i[0]===p[0]&&i[1]===p[1]:Yp({domain:i},{domain:p}):!1},x5=X.memo(iV,aV);x5.displayName="XAxis";var oV=["dangerouslySetInnerHTML","ticks"],sV=["id"],lV=["domain"],uV=["domain"];function lx(){return lx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},lx.apply(null,arguments)}function Cv(e,r){if(e==null)return{};var i,a,p=cV(e,r);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],r.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(p[i]=e[i])}return p}function cV(e,r){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function hV(e){var r=Pa();return X.useEffect(()=>(r(GF(e)),()=>{r(WF(e))}),[e,r]),null}var fV=e=>{var{yAxisId:r,className:i,width:a,label:p}=e,g=X.useRef(null),y=X.useRef(null),c=pr(qx),C=lu(),E=Pa(),M="yAxis",k=pr(ye=>sm(ye,M,r,C)),N=pr(ye=>vM(ye,r)),j=pr(ye=>aN(ye,r)),q=pr(ye=>xM(ye,M,r,C)),H=pr(ye=>UE(ye,r));if(X.useLayoutEffect(()=>{if(!(a!=="auto"||!N||Xw(p)||X.isValidElement(p)||H==null)){var ye=g.current;if(ye){var Pe=ye.getCalculatedWidth();Math.round(N.width)!==Math.round(Pe)&&E(ZF({id:r,width:Pe}))}}},[q,N,E,p,r,a,H]),N==null||j==null||H==null)return null;var{dangerouslySetInnerHTML:W,ticks:K}=e,ee=Cv(e,oV),{id:ie}=H,ve=Cv(H,sV);return X.createElement(Qw,lx({},ee,ve,{ref:g,labelRef:y,scale:k,x:j.x,y:j.y,tickTextProps:a==="auto"?{width:void 0}:{width:a},width:N.width,height:N.height,className:In("recharts-".concat(M," ").concat(M),i),viewBox:c,ticks:q}))},dV={allowDataOverflow:Ps.allowDataOverflow,allowDecimals:Ps.allowDecimals,allowDuplicatedCategory:Ps.allowDuplicatedCategory,hide:!1,mirror:Ps.mirror,orientation:Ps.orientation,padding:Ps.padding,reversed:Ps.reversed,scale:Ps.scale,tickCount:Ps.tickCount,type:Ps.type,width:Ps.width,yAxisId:0},pV=e=>{var r,i,a,p,g,y=uu(e,dV);return X.createElement(X.Fragment,null,X.createElement(hV,{interval:(r=y.interval)!==null&&r!==void 0?r:"preserveEnd",id:y.yAxisId,scale:y.scale,type:y.type,domain:y.domain,allowDataOverflow:y.allowDataOverflow,dataKey:y.dataKey,allowDuplicatedCategory:y.allowDuplicatedCategory,allowDecimals:y.allowDecimals,tickCount:y.tickCount,padding:y.padding,includeHidden:(i=y.includeHidden)!==null&&i!==void 0?i:!1,reversed:y.reversed,ticks:y.ticks,width:y.width,orientation:y.orientation,mirror:y.mirror,hide:y.hide,unit:y.unit,name:y.name,angle:(a=y.angle)!==null&&a!==void 0?a:0,minTickGap:(p=y.minTickGap)!==null&&p!==void 0?p:5,tick:(g=y.tick)!==null&&g!==void 0?g:!0,tickFormatter:y.tickFormatter}),X.createElement(fV,y))},mV=(e,r)=>{var{domain:i}=e,a=Cv(e,lV),{domain:p}=r,g=Cv(r,uV);return Yp(a,g)?Array.isArray(i)&&i.length===2&&Array.isArray(p)&&p.length===2?i[0]===p[0]&&i[1]===p[1]:Yp({domain:i},{domain:p}):!1},w5=X.memo(pV,mV);w5.displayName="YAxis";var ob={exports:{}},sb={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cC;function gV(){if(cC)return sb;cC=1;var e=Qp();function r(C,E){return C===E&&(C!==0||1/C===1/E)||C!==C&&E!==E}var i=typeof Object.is=="function"?Object.is:r,a=e.useSyncExternalStore,p=e.useRef,g=e.useEffect,y=e.useMemo,c=e.useDebugValue;return sb.useSyncExternalStoreWithSelector=function(C,E,M,k,N){var j=p(null);if(j.current===null){var q={hasValue:!1,value:null};j.current=q}else q=j.current;j=y(function(){function W(ye){if(!K){if(K=!0,ee=ye,ye=k(ye),N!==void 0&&q.hasValue){var Pe=q.value;if(N(Pe,ye))return ie=Pe}return ie=ye}if(Pe=ie,i(ee,ye))return Pe;var Me=k(ye);return N!==void 0&&N(Pe,Me)?(ee=ye,Pe):(ee=ye,ie=Me)}var K=!1,ee,ie,ve=M===void 0?null:M;return[function(){return W(E())},ve===null?void 0:function(){return W(ve())}]},[E,M,k,N]);var H=a(C,j[0],j[1]);return g(function(){q.hasValue=!0,q.value=H},[H]),c(H),H},sb}var hC;function yV(){return hC||(hC=1,ob.exports=gV()),ob.exports}yV();function vV(e){e()}function _V(){let e=null,r=null;return{clear(){e=null,r=null},notify(){vV(()=>{let i=e;for(;i;)i.callback(),i=i.next})},get(){const i=[];let a=e;for(;a;)i.push(a),a=a.next;return i},subscribe(i){let a=!0;const p=r={callback:i,next:null,prev:r};return p.prev?p.prev.next=p:e=p,function(){!a||e===null||(a=!1,p.next?p.next.prev=p.prev:r=p.prev,p.prev?p.prev.next=p.next:e=p.next)}}}}var fC={notify(){},get:()=>[]};function bV(e,r){let i,a=fC,p=0,g=!1;function y(H){M();const W=a.subscribe(H);let K=!1;return()=>{K||(K=!0,W(),k())}}function c(){a.notify()}function C(){q.onStateChange&&q.onStateChange()}function E(){return g}function M(){p++,i||(i=e.subscribe(C),a=_V())}function k(){p--,i&&p===0&&(i(),i=void 0,a.clear(),a=fC)}function N(){g||(g=!0,M())}function j(){g&&(g=!1,k())}const q={addNestedSub:y,notifyNestedSubs:c,handleChangeWrapper:C,isSubscribed:E,trySubscribe:N,tryUnsubscribe:j,getListeners:()=>a};return q}var xV=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wV=xV(),SV=()=>typeof navigator<"u"&&navigator.product==="ReactNative",PV=SV(),AV=()=>wV||PV?X.useLayoutEffect:X.useEffect,CV=AV(),TV=Symbol.for("react-redux-context"),EV=typeof globalThis<"u"?globalThis:{};function MV(){if(!X.createContext)return{};const e=EV[TV]??=new Map;let r=e.get(X.createContext);return r||(r=X.createContext(null),e.set(X.createContext,r)),r}var RV=MV();function DV(e){const{children:r,context:i,serverState:a,store:p}=e,g=X.useMemo(()=>{const C=bV(p);return{store:p,subscription:C,getServerState:a?()=>a:void 0}},[p,a]),y=X.useMemo(()=>p.getState(),[p]);CV(()=>{const{subscription:C}=g;return C.onStateChange=C.notifyNestedSubs,C.trySubscribe(),y!==p.getState()&&C.notifyNestedSubs(),()=>{C.tryUnsubscribe(),C.onStateChange=void 0}},[g,y]);const c=i||RV;return X.createElement(c.Provider,{value:g},r)}var IV=DV,OV=(e,r)=>r,Jw=it([OV,bn,NE,ha,zM,dh,uj,Aa],pj),e2=e=>{var r=e.currentTarget.getBoundingClientRect(),i=r.width/e.currentTarget.offsetWidth,a=r.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-r.left)/i),chartY:Math.round((e.clientY-r.top)/a)}},S5=sl("mouseClick"),P5=ty();P5.startListening({actionCreator:S5,effect:(e,r)=>{var i=e.payload,a=Jw(r.getState(),e2(i));a?.activeIndex!=null&&r.dispatch(vN({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var ux=sl("mouseMove"),A5=ty();A5.startListening({actionCreator:ux,effect:(e,r)=>{var i=e.payload,a=r.getState(),p=jw(a,a.tooltip.settings.shared),g=Jw(a,e2(i));p==="axis"&&(g?.activeIndex!=null?r.dispatch(MM({activeIndex:g.activeIndex,activeDataKey:void 0,activeCoordinate:g.activeCoordinate})):r.dispatch(EM()))}});var dC={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},C5=Ds({name:"rootProps",initialState:dC,reducers:{updateOptions:(e,r)=>{var i;e.accessibilityLayer=r.payload.accessibilityLayer,e.barCategoryGap=r.payload.barCategoryGap,e.barGap=(i=r.payload.barGap)!==null&&i!==void 0?i:dC.barGap,e.barSize=r.payload.barSize,e.maxBarSize=r.payload.maxBarSize,e.stackOffset=r.payload.stackOffset,e.syncId=r.payload.syncId,e.syncMethod=r.payload.syncMethod,e.className=r.payload.className}}}),kV=C5.reducer,{updateOptions:LV}=C5.actions,T5=Ds({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,r)=>r.payload}}),{updatePolarOptions:wG}=T5.actions,zV=T5.reducer,E5=sl("keyDown"),M5=sl("focus"),t2=ty();t2.startListening({actionCreator:E5,effect:(e,r)=>{var i=r.getState(),a=i.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:p}=i.tooltip,g=e.payload;if(!(g!=="ArrowRight"&&g!=="ArrowLeft"&&g!=="Enter")){var y=Number(Bw(p,um(i))),c=dh(i);if(g==="Enter"){var C=_v(i,"axis","hover",String(p.index));r.dispatch(tx({active:!p.active,activeIndex:p.index,activeDataKey:p.dataKey,activeCoordinate:C}));return}var E=uN(i),M=E==="left-to-right"?1:-1,k=g==="ArrowRight"?1:-1,N=y+k*M;if(!(c==null||N>=c.length||N<0)){var j=_v(i,"axis","hover",String(N));r.dispatch(tx({active:!0,activeIndex:N.toString(),activeDataKey:void 0,activeCoordinate:j}))}}}}});t2.startListening({actionCreator:M5,effect:(e,r)=>{var i=r.getState(),a=i.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:p}=i.tooltip;if(!p.active&&p.index==null){var g="0",y=_v(i,"axis","hover",String(g));r.dispatch(tx({activeDataKey:void 0,active:!0,activeIndex:g,activeCoordinate:y}))}}}});var nl=sl("externalEvent"),R5=ty();R5.startListening({actionCreator:nl,effect:(e,r)=>{if(e.payload.handler!=null){var i=r.getState(),a={activeCoordinate:ej(i),activeDataKey:FM(i),activeIndex:Kp(i),activeLabel:BM(i),activeTooltipIndex:Kp(i),isTooltipActive:tj(i)};e.payload.handler(a,e.payload.reactEvent)}}});var NV=it([lm],e=>e.tooltipItemPayloads),jV=it([NV,hy,(e,r,i)=>r,(e,r,i)=>i],(e,r,i,a)=>{var p=e.find(c=>c.settings.dataKey===a);if(p!=null){var{positions:g}=p;if(g!=null){var y=r(g,i);return y}}}),D5=sl("touchMove"),I5=ty();I5.startListening({actionCreator:D5,effect:(e,r)=>{var i=e.payload,a=r.getState(),p=jw(a,a.tooltip.settings.shared);if(p==="axis"){var g=Jw(a,e2({clientX:i.touches[0].clientX,clientY:i.touches[0].clientY,currentTarget:i.currentTarget}));g?.activeIndex!=null&&r.dispatch(MM({activeIndex:g.activeIndex,activeDataKey:void 0,activeCoordinate:g.activeCoordinate}))}else if(p==="item"){var y,c=i.touches[0],C=document.elementFromPoint(c.clientX,c.clientY);if(!C||!C.getAttribute)return;var E=C.getAttribute(VO),M=(y=C.getAttribute(HO))!==null&&y!==void 0?y:void 0,k=jV(r.getState(),E,M);r.dispatch(TM({activeDataKey:M,activeIndex:E,activeCoordinate:k}))}}});var BV=JT({brush:d$,cartesianAxis:XF,chartData:Dj,errorBars:uU,graphicalItems:jF,layout:fO,legend:lk,options:Cj,polarAxis:oF,polarOptions:zV,referenceElements:b$,rootProps:kV,tooltip:_N}),FV=function(r){return NI({reducer:BV,preloadedState:r,middleware:i=>i({serializableCheck:!1}).concat([P5.middleware,A5.middleware,t2.middleware,R5.middleware,I5.middleware]),devTools:tm.devToolsEnabled})};function UV(e){var{preloadedState:r,children:i,reduxStoreName:a}=e,p=lu(),g=X.useRef(null);if(p)return i;g.current==null&&(g.current=FV(r));var y=jx;return X.createElement(IV,{context:y,store:g.current},i)}function $V(e){var{layout:r,width:i,height:a,margin:p}=e,g=Pa(),y=lu();return X.useEffect(()=>{y||(g(uO(r)),g(cO({width:i,height:a})),g(lO(p)))},[g,y,r,i,a,p]),null}function VV(e){var r=Pa();return X.useEffect(()=>{r(LV(e))},[r,e]),null}var HV=["children"];function qV(e,r){if(e==null)return{};var i,a,p=GV(e,r);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],r.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(p[i]=e[i])}return p}function GV(e,r){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function Tv(){return Tv=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Tv.apply(null,arguments)}var WV={width:"100%",height:"100%"},ZV=X.forwardRef((e,r)=>{var i=nk(),a=ik(),p=C3();if(!nv(i)||!nv(a))return null;var{children:g,otherAttributes:y,title:c,desc:C}=e,E,M;return typeof y.tabIndex=="number"?E=y.tabIndex:E=p?0:void 0,typeof y.role=="string"?M=y.role:M=p?"application":void 0,X.createElement(xT,Tv({},y,{title:c,desc:C,role:M,tabIndex:E,width:i,height:a,style:WV,ref:r}),g)}),XV=e=>{var{children:r}=e,i=pr(Gv);if(!i)return null;var{width:a,height:p,y:g,x:y}=i;return X.createElement(xT,{width:a,height:p,x:y,y:g},r)},pC=X.forwardRef((e,r)=>{var{children:i}=e,a=qV(e,HV),p=lu();return p?X.createElement(XV,null,i):X.createElement(ZV,Tv({ref:r},a),i)});function KV(){var e=Pa(),[r,i]=X.useState(null),a=pr($O);return X.useEffect(()=>{if(r!=null){var p=r.getBoundingClientRect(),g=p.width/r.offsetWidth;Rs(g)&&g!==a&&e(hO(g))}},[r,e,a]),i}function mC(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,a)}return i}function YV(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?mC(Object(i),!0).forEach(function(a){QV(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):mC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function QV(e,r,i){return(r=JV(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function JV(e){var r=eH(e,"string");return typeof r=="symbol"?r:r+""}function eH(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var tH=X.forwardRef((e,r)=>{var{children:i,className:a,height:p,onClick:g,onContextMenu:y,onDoubleClick:c,onMouseDown:C,onMouseEnter:E,onMouseLeave:M,onMouseMove:k,onMouseUp:N,onTouchEnd:j,onTouchMove:q,onTouchStart:H,style:W,width:K}=e,ee=Pa(),[ie,ve]=X.useState(null),[ye,Pe]=X.useState(null);Fj();var Me=KV(),je=X.useCallback(st=>{Me(st),typeof r=="function"&&r(st),ve(st),Pe(st)},[Me,r,ve,Pe]),ht=X.useCallback(st=>{ee(S5(st)),ee(nl({handler:g,reactEvent:st}))},[ee,g]),At=X.useCallback(st=>{ee(ux(st)),ee(nl({handler:E,reactEvent:st}))},[ee,E]),ot=X.useCallback(st=>{ee(EM()),ee(nl({handler:M,reactEvent:st}))},[ee,M]),ft=X.useCallback(st=>{ee(ux(st)),ee(nl({handler:k,reactEvent:st}))},[ee,k]),rt=X.useCallback(()=>{ee(M5())},[ee]),It=X.useCallback(st=>{ee(E5(st.key))},[ee]),kt=X.useCallback(st=>{ee(nl({handler:y,reactEvent:st}))},[ee,y]),Ue=X.useCallback(st=>{ee(nl({handler:c,reactEvent:st}))},[ee,c]),ct=X.useCallback(st=>{ee(nl({handler:C,reactEvent:st}))},[ee,C]),nt=X.useCallback(st=>{ee(nl({handler:N,reactEvent:st}))},[ee,N]),Ct=X.useCallback(st=>{ee(nl({handler:H,reactEvent:st}))},[ee,H]),Te=X.useCallback(st=>{ee(D5(st)),ee(nl({handler:q,reactEvent:st}))},[ee,q]),et=X.useCallback(st=>{ee(nl({handler:j,reactEvent:st}))},[ee,j]);return X.createElement(GM.Provider,{value:ie},X.createElement(ID.Provider,{value:ye},X.createElement("div",{className:In("recharts-wrapper",a),style:YV({position:"relative",cursor:"default",width:K,height:p},W),onClick:ht,onContextMenu:kt,onDoubleClick:Ue,onFocus:rt,onKeyDown:It,onMouseDown:ct,onMouseEnter:At,onMouseLeave:ot,onMouseMove:ft,onMouseUp:nt,onTouchEnd:et,onTouchMove:Te,onTouchStart:Ct,ref:je},i)))}),rH=["children","className","width","height","style","compact","title","desc"];function nH(e,r){if(e==null)return{};var i,a,p=iH(e,r);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],r.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(p[i]=e[i])}return p}function iH(e,r){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var aH=X.forwardRef((e,r)=>{var{children:i,className:a,width:p,height:g,style:y,compact:c,title:C,desc:E}=e,M=nH(e,rH),k=Jg(M);return c?X.createElement(pC,{otherAttributes:k,title:C,desc:E},i):X.createElement(tH,{className:a,style:y,width:p,height:g,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},X.createElement(pC,{otherAttributes:k,title:C,desc:E,ref:r},X.createElement(w$,null,i)))}),oH=["width","height"];function cx(){return cx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},cx.apply(null,arguments)}function sH(e,r){if(e==null)return{};var i,a,p=lH(e,r);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],r.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(p[i]=e[i])}return p}function lH(e,r){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var uH={top:5,right:5,bottom:5,left:5},cH={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:uH,reverseStackOrder:!1,syncMethod:"index"},hH=X.forwardRef(function(r,i){var a,p=uu(r.categoricalChartProps,cH),{width:g,height:y}=p,c=sH(p,oH);if(!nv(g)||!nv(y))return null;var{chartName:C,defaultTooltipEventType:E,validateTooltipEventTypes:M,tooltipPayloadSearcher:k,categoricalChartProps:N}=r,j={chartName:C,defaultTooltipEventType:E,validateTooltipEventTypes:M,tooltipPayloadSearcher:k,eventEmitter:void 0};return X.createElement(UV,{preloadedState:{options:j},reduxStoreName:(a=N.id)!==null&&a!==void 0?a:C},X.createElement(f$,{chartData:N.data}),X.createElement($V,{width:g,height:y,layout:p.layout,margin:p.margin}),X.createElement(VV,{accessibilityLayer:p.accessibilityLayer,barCategoryGap:p.barCategoryGap,maxBarSize:p.maxBarSize,stackOffset:p.stackOffset,barGap:p.barGap,barSize:p.barSize,syncId:p.syncId,syncMethod:p.syncMethod,className:p.className}),X.createElement(aH,cx({},c,{width:g,height:y,ref:i})))}),fH=["axis","item"],dH=X.forwardRef((e,r)=>X.createElement(hH,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:fH,tooltipPayloadSearcher:Pj,categoricalChartProps:e,ref:r}));function D0(e){return typeof e=="string"?e.toLowerCase().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "):""}function pH({country:e,metric:r,expected:i,actual:a,average:p,top:g}){const y=[{name:D0(e),value:a},{name:"Expected",value:i},{name:"Average",value:p},{name:`Top: ${D0(g.country)}`,value:g.value}],c=["#8884d8","#006994","#ffc658","#ff7300"];return Ne.jsxs("div",{className:"w-full h-40",children:[Ne.jsx(iB,{children:Ne.jsxs(dH,{data:y,children:[Ne.jsx(x5,{dataKey:"name",tick:{fontSize:10}}),Ne.jsx(w5,{tick:{fontSize:10}}),Ne.jsx(Zj,{}),Ne.jsx(g5,{dataKey:"value",fill:"#8884d8",children:y.map((C,E)=>Ne.jsx(Ww,{fill:c[E%c.length]},`cell-${E} ${C}`))})]})}),a&&i&&g.country&&Ne.jsxs("p",{className:"text-xs mt-2 text-center",children:[D0(e),"'s' ",r," is ",a,", which is"," ",((a-i)/i*100).toFixed(1),"% from expected. Highest is ",D0(g.country)," at ",g.value,"."]})]})}function mH(e){return e.toLowerCase().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}function gH({flash:e=!1,countryName:r,countryMetrics:i,absoluteStatistics:a}){const[p,g]=X.useState(),[y,c]=X.useState(1),[C,E]=X.useState(""),[M,k]=X.useState(0),N=X.useMemo(()=>a.filter(K=>String(K.metricName).toLowerCase()!=="happiness"&&K.currentCountryMetric!==null&&K.currentCountryMetric!==0&&K.currentCountryMetric!==void 0),[a]),j=X.useMemo(()=>{const K=new Map;return cD.forEach(ee=>K.set(ee.metric.toLowerCase(),ee.weight_signed)),K},[]),q=K=>{if(!N||N.length===0){g(void 0),E("");return}const ee=(K%N.length+N.length)%N.length,ie=N[ee];g(ie);const ve=j.get(String(ie.metricName).toLowerCase())??0;E(`${ie.metricName} has the correlation to happiness of ${Math.round(ve*100)}%`)};X.useEffect(()=>{if(!N||N.length===0){c(1),k(0),g(void 0),E("");return}c(N.length);const K=Math.min(M,N.length-1);k(K),q(K)},[N]);const H=()=>{k(K=>{if(!N||N.length===0)return 0;const ee=N.length,ie=(K-1+ee)%ee;return q(ie),ie})},W=()=>{k(K=>{if(!N||N.length===0)return 0;const ee=N.length,ie=(K+1)%ee;return q(ie),ie})};return Ne.jsxs("div",{className:"w-full flex flex-col justify-center items-center",children:[Ne.jsx(nD,{opts:{loop:!0},children:Ne.jsx(iD,{children:Ne.jsx(aD,{children:Ne.jsx("div",{className:"p-1",children:Ne.jsxs(oD,{className:`lg:w-150 h-90 lg:h-80 bg-accent transition-transform-colors duration-300 ${e?"scale-90 bg-primary":""}`,children:[Ne.jsx(sD,{children:Ne.jsx(lD,{children:i?`${p?.metricName} | ${C}`:""})}),Ne.jsx(uD,{className:"flex flex-col items-center justify-center p-4 max-h-60",children:i&&p?Ne.jsx(pH,{country:r,metric:p?.metricName,expected:p?.expectedForHappinessValue,actual:p?.currentCountryMetric,average:p?.averageValue,top:{country:p?.highestCountryName,value:p?.highestValue}}):Ne.jsx("div",{className:"text-center",children:r?Ne.jsxs("p",{children:["No data for ",mH(r)]}):Ne.jsx("p",{children:"Click on the map to see happiness data!"})})})]})})},M)})}),Ne.jsxs("div",{className:"flex gap-2 mt-3 justify-center",children:[Ne.jsx("button",{onClick:H,"aria-label":"Previous metric",className:"px-3 py-1 border rounded",children:""}),Ne.jsx("div",{className:"flex items-center px-2 text-sm",children:i?`${M+1} / ${y}`:""}),Ne.jsx("button",{onClick:W,"aria-label":"Next metric",className:"px-3 py-1 border rounded",children:""})]})]})}function Zg(e){const r=X.useRef(e);return X.useEffect(()=>{r.current=e}),X.useMemo(()=>(...i)=>r.current?.(...i),[])}function yH(e,r=globalThis?.document){const i=Zg(e);X.useEffect(()=>{const a=p=>{p.key==="Escape"&&i(p)};return r.addEventListener("keydown",a,{capture:!0}),()=>r.removeEventListener("keydown",a,{capture:!0})},[i,r])}var vH="DismissableLayer",hx="dismissableLayer.update",_H="dismissableLayer.pointerDownOutside",bH="dismissableLayer.focusOutside",gC,O5=X.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),k5=X.forwardRef((e,r)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:a,onPointerDownOutside:p,onFocusOutside:g,onInteractOutside:y,onDismiss:c,...C}=e,E=X.useContext(O5),[M,k]=X.useState(null),N=M?.ownerDocument??globalThis?.document,[,j]=X.useState({}),q=nu(r,Me=>k(Me)),H=Array.from(E.layers),[W]=[...E.layersWithOutsidePointerEventsDisabled].slice(-1),K=H.indexOf(W),ee=M?H.indexOf(M):-1,ie=E.layersWithOutsidePointerEventsDisabled.size>0,ve=ee>=K,ye=SH(Me=>{const je=Me.target,ht=[...E.branches].some(At=>At.contains(je));!ve||ht||(p?.(Me),y?.(Me),Me.defaultPrevented||c?.())},N),Pe=PH(Me=>{const je=Me.target;[...E.branches].some(At=>At.contains(je))||(g?.(Me),y?.(Me),Me.defaultPrevented||c?.())},N);return yH(Me=>{ee===E.layers.size-1&&(a?.(Me),!Me.defaultPrevented&&c&&(Me.preventDefault(),c()))},N),X.useEffect(()=>{if(M)return i&&(E.layersWithOutsidePointerEventsDisabled.size===0&&(gC=N.body.style.pointerEvents,N.body.style.pointerEvents="none"),E.layersWithOutsidePointerEventsDisabled.add(M)),E.layers.add(M),yC(),()=>{i&&E.layersWithOutsidePointerEventsDisabled.size===1&&(N.body.style.pointerEvents=gC)}},[M,N,i,E]),X.useEffect(()=>()=>{M&&(E.layers.delete(M),E.layersWithOutsidePointerEventsDisabled.delete(M),yC())},[M,E]),X.useEffect(()=>{const Me=()=>j({});return document.addEventListener(hx,Me),()=>document.removeEventListener(hx,Me)},[]),Ne.jsx(ro.div,{...C,ref:q,style:{pointerEvents:ie?ve?"auto":"none":void 0,...e.style},onFocusCapture:rc(e.onFocusCapture,Pe.onFocusCapture),onBlurCapture:rc(e.onBlurCapture,Pe.onBlurCapture),onPointerDownCapture:rc(e.onPointerDownCapture,ye.onPointerDownCapture)})});k5.displayName=vH;var xH="DismissableLayerBranch",wH=X.forwardRef((e,r)=>{const i=X.useContext(O5),a=X.useRef(null),p=nu(r,a);return X.useEffect(()=>{const g=a.current;if(g)return i.branches.add(g),()=>{i.branches.delete(g)}},[i.branches]),Ne.jsx(ro.div,{...e,ref:p})});wH.displayName=xH;function SH(e,r=globalThis?.document){const i=Zg(e),a=X.useRef(!1),p=X.useRef(()=>{});return X.useEffect(()=>{const g=c=>{if(c.target&&!a.current){let C=function(){L5(_H,i,E,{discrete:!0})};const E={originalEvent:c};c.pointerType==="touch"?(r.removeEventListener("click",p.current),p.current=C,r.addEventListener("click",p.current,{once:!0})):C()}else r.removeEventListener("click",p.current);a.current=!1},y=window.setTimeout(()=>{r.addEventListener("pointerdown",g)},0);return()=>{window.clearTimeout(y),r.removeEventListener("pointerdown",g),r.removeEventListener("click",p.current)}},[r,i]),{onPointerDownCapture:()=>a.current=!0}}function PH(e,r=globalThis?.document){const i=Zg(e),a=X.useRef(!1);return X.useEffect(()=>{const p=g=>{g.target&&!a.current&&L5(bH,i,{originalEvent:g},{discrete:!1})};return r.addEventListener("focusin",p),()=>r.removeEventListener("focusin",p)},[r,i]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function yC(){const e=new CustomEvent(hx);document.dispatchEvent(e)}function L5(e,r,i,{discrete:a}){const p=i.originalEvent.target,g=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:i});r&&p.addEventListener(e,r,{once:!0}),a?k4(p,g):p.dispatchEvent(g)}var lb="focusScope.autoFocusOnMount",ub="focusScope.autoFocusOnUnmount",vC={bubbles:!1,cancelable:!0},AH="FocusScope",z5=X.forwardRef((e,r)=>{const{loop:i=!1,trapped:a=!1,onMountAutoFocus:p,onUnmountAutoFocus:g,...y}=e,[c,C]=X.useState(null),E=Zg(p),M=Zg(g),k=X.useRef(null),N=nu(r,H=>C(H)),j=X.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;X.useEffect(()=>{if(a){let H=function(ie){if(j.paused||!c)return;const ve=ie.target;c.contains(ve)?k.current=ve:sf(k.current,{select:!0})},W=function(ie){if(j.paused||!c)return;const ve=ie.relatedTarget;ve!==null&&(c.contains(ve)||sf(k.current,{select:!0}))},K=function(ie){if(document.activeElement===document.body)for(const ye of ie)ye.removedNodes.length>0&&sf(c)};document.addEventListener("focusin",H),document.addEventListener("focusout",W);const ee=new MutationObserver(K);return c&&ee.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",H),document.removeEventListener("focusout",W),ee.disconnect()}}},[a,c,j.paused]),X.useEffect(()=>{if(c){bC.add(j);const H=document.activeElement;if(!c.contains(H)){const K=new CustomEvent(lb,vC);c.addEventListener(lb,E),c.dispatchEvent(K),K.defaultPrevented||(CH(DH(N5(c)),{select:!0}),document.activeElement===H&&sf(c))}return()=>{c.removeEventListener(lb,E),setTimeout(()=>{const K=new CustomEvent(ub,vC);c.addEventListener(ub,M),c.dispatchEvent(K),K.defaultPrevented||sf(H??document.body,{select:!0}),c.removeEventListener(ub,M),bC.remove(j)},0)}}},[c,E,M,j]);const q=X.useCallback(H=>{if(!i&&!a||j.paused)return;const W=H.key==="Tab"&&!H.altKey&&!H.ctrlKey&&!H.metaKey,K=document.activeElement;if(W&&K){const ee=H.currentTarget,[ie,ve]=TH(ee);ie&&ve?!H.shiftKey&&K===ve?(H.preventDefault(),i&&sf(ie,{select:!0})):H.shiftKey&&K===ie&&(H.preventDefault(),i&&sf(ve,{select:!0})):K===ee&&H.preventDefault()}},[i,a,j.paused]);return Ne.jsx(ro.div,{tabIndex:-1,...y,ref:N,onKeyDown:q})});z5.displayName=AH;function CH(e,{select:r=!1}={}){const i=document.activeElement;for(const a of e)if(sf(a,{select:r}),document.activeElement!==i)return}function TH(e){const r=N5(e),i=_C(r,e),a=_C(r.reverse(),e);return[i,a]}function N5(e){const r=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const p=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||p?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)r.push(i.currentNode);return r}function _C(e,r){for(const i of e)if(!EH(i,{upTo:r}))return i}function EH(e,{upTo:r}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(r!==void 0&&e===r)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function MH(e){return e instanceof HTMLInputElement&&"select"in e}function sf(e,{select:r=!1}={}){if(e&&e.focus){const i=document.activeElement;e.focus({preventScroll:!0}),e!==i&&MH(e)&&r&&e.select()}}var bC=RH();function RH(){let e=[];return{add(r){const i=e[0];r!==i&&i?.pause(),e=xC(e,r),e.unshift(r)},remove(r){e=xC(e,r),e[0]?.resume()}}}function xC(e,r){const i=[...e],a=i.indexOf(r);return a!==-1&&i.splice(a,1),i}function DH(e){return e.filter(r=>r.tagName!=="A")}var IH="Portal",j5=X.forwardRef((e,r)=>{const{container:i,...a}=e,[p,g]=X.useState(!1);Fp(()=>g(!0),[]);const y=i||p&&globalThis?.document?.body;return y?C4.createPortal(Ne.jsx(ro.div,{...a,ref:r}),y):null});j5.displayName=IH;var cb=0;function OH(){X.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??wC()),document.body.insertAdjacentElement("beforeend",e[1]??wC()),cb++,()=>{cb===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),cb--}},[])}function wC(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ec=function(){return ec=Object.assign||function(r){for(var i,a=1,p=arguments.length;a<p;a++){i=arguments[a];for(var g in i)Object.prototype.hasOwnProperty.call(i,g)&&(r[g]=i[g])}return r},ec.apply(this,arguments)};function B5(e,r){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&r.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,a=Object.getOwnPropertySymbols(e);p<a.length;p++)r.indexOf(a[p])<0&&Object.prototype.propertyIsEnumerable.call(e,a[p])&&(i[a[p]]=e[a[p]]);return i}function kH(e,r,i){if(i||arguments.length===2)for(var a=0,p=r.length,g;a<p;a++)(g||!(a in r))&&(g||(g=Array.prototype.slice.call(r,0,a)),g[a]=r[a]);return e.concat(g||Array.prototype.slice.call(r))}var B0="right-scroll-bar-position",F0="width-before-scroll-bar",LH="with-scroll-bars-hidden",zH="--removed-body-scroll-bar-size";function hb(e,r){return typeof e=="function"?e(r):e&&(e.current=r),e}function NH(e,r){var i=X.useState(function(){return{value:e,callback:r,facade:{get current(){return i.value},set current(a){var p=i.value;p!==a&&(i.value=a,i.callback(a,p))}}}})[0];return i.callback=r,i.facade}var jH=typeof window<"u"?X.useLayoutEffect:X.useEffect,SC=new WeakMap;function BH(e,r){var i=NH(null,function(a){return e.forEach(function(p){return hb(p,a)})});return jH(function(){var a=SC.get(i);if(a){var p=new Set(a),g=new Set(e),y=i.current;p.forEach(function(c){g.has(c)||hb(c,null)}),g.forEach(function(c){p.has(c)||hb(c,y)})}SC.set(i,e)},[e]),i}function FH(e){return e}function UH(e,r){r===void 0&&(r=FH);var i=[],a=!1,p={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return i.length?i[i.length-1]:e},useMedium:function(g){var y=r(g,a);return i.push(y),function(){i=i.filter(function(c){return c!==y})}},assignSyncMedium:function(g){for(a=!0;i.length;){var y=i;i=[],y.forEach(g)}i={push:function(c){return g(c)},filter:function(){return i}}},assignMedium:function(g){a=!0;var y=[];if(i.length){var c=i;i=[],c.forEach(g),y=i}var C=function(){var M=y;y=[],M.forEach(g)},E=function(){return Promise.resolve().then(C)};E(),i={push:function(M){y.push(M),E()},filter:function(M){return y=y.filter(M),i}}}};return p}function $H(e){e===void 0&&(e={});var r=UH(null);return r.options=ec({async:!0,ssr:!1},e),r}var F5=function(e){var r=e.sideCar,i=B5(e,["sideCar"]);if(!r)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=r.read();if(!a)throw new Error("Sidecar medium not found");return X.createElement(a,ec({},i))};F5.isSideCarExport=!0;function VH(e,r){return e.useMedium(r),F5}var U5=$H(),fb=function(){},c_=X.forwardRef(function(e,r){var i=X.useRef(null),a=X.useState({onScrollCapture:fb,onWheelCapture:fb,onTouchMoveCapture:fb}),p=a[0],g=a[1],y=e.forwardProps,c=e.children,C=e.className,E=e.removeScrollBar,M=e.enabled,k=e.shards,N=e.sideCar,j=e.noRelative,q=e.noIsolation,H=e.inert,W=e.allowPinchZoom,K=e.as,ee=K===void 0?"div":K,ie=e.gapMode,ve=B5(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),ye=N,Pe=BH([i,r]),Me=ec(ec({},ve),p);return X.createElement(X.Fragment,null,M&&X.createElement(ye,{sideCar:U5,removeScrollBar:E,shards:k,noRelative:j,noIsolation:q,inert:H,setCallbacks:g,allowPinchZoom:!!W,lockRef:i,gapMode:ie}),y?X.cloneElement(X.Children.only(c),ec(ec({},Me),{ref:Pe})):X.createElement(ee,ec({},Me,{className:C,ref:Pe}),c))});c_.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};c_.classNames={fullWidth:F0,zeroRight:B0};var HH=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function qH(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var r=HH();return r&&e.setAttribute("nonce",r),e}function GH(e,r){e.styleSheet?e.styleSheet.cssText=r:e.appendChild(document.createTextNode(r))}function WH(e){var r=document.head||document.getElementsByTagName("head")[0];r.appendChild(e)}var ZH=function(){var e=0,r=null;return{add:function(i){e==0&&(r=qH())&&(GH(r,i),WH(r)),e++},remove:function(){e--,!e&&r&&(r.parentNode&&r.parentNode.removeChild(r),r=null)}}},XH=function(){var e=ZH();return function(r,i){X.useEffect(function(){return e.add(r),function(){e.remove()}},[r&&i])}},$5=function(){var e=XH(),r=function(i){var a=i.styles,p=i.dynamic;return e(a,p),null};return r},KH={left:0,top:0,right:0,gap:0},db=function(e){return parseInt(e||"",10)||0},YH=function(e){var r=window.getComputedStyle(document.body),i=r[e==="padding"?"paddingLeft":"marginLeft"],a=r[e==="padding"?"paddingTop":"marginTop"],p=r[e==="padding"?"paddingRight":"marginRight"];return[db(i),db(a),db(p)]},QH=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return KH;var r=YH(e),i=document.documentElement.clientWidth,a=window.innerWidth;return{left:r[0],top:r[1],right:r[2],gap:Math.max(0,a-i+r[2]-r[0])}},JH=$5(),Bp="data-scroll-locked",eq=function(e,r,i,a){var p=e.left,g=e.top,y=e.right,c=e.gap;return i===void 0&&(i="margin"),`
  .`.concat(LH,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(c,"px ").concat(a,`;
  }
  body[`).concat(Bp,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([r&&"position: relative ".concat(a,";"),i==="margin"&&`
    padding-left: `.concat(p,`px;
    padding-top: `).concat(g,`px;
    padding-right: `).concat(y,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(a,`;
    `),i==="padding"&&"padding-right: ".concat(c,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(B0,` {
    right: `).concat(c,"px ").concat(a,`;
  }
  
  .`).concat(F0,` {
    margin-right: `).concat(c,"px ").concat(a,`;
  }
  
  .`).concat(B0," .").concat(B0,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(F0," .").concat(F0,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(Bp,`] {
    `).concat(zH,": ").concat(c,`px;
  }
`)},PC=function(){var e=parseInt(document.body.getAttribute(Bp)||"0",10);return isFinite(e)?e:0},tq=function(){X.useEffect(function(){return document.body.setAttribute(Bp,(PC()+1).toString()),function(){var e=PC()-1;e<=0?document.body.removeAttribute(Bp):document.body.setAttribute(Bp,e.toString())}},[])},rq=function(e){var r=e.noRelative,i=e.noImportant,a=e.gapMode,p=a===void 0?"margin":a;tq();var g=X.useMemo(function(){return QH(p)},[p]);return X.createElement(JH,{styles:eq(g,!r,p,i?"":"!important")})},fx=!1;if(typeof window<"u")try{var I0=Object.defineProperty({},"passive",{get:function(){return fx=!0,!0}});window.addEventListener("test",I0,I0),window.removeEventListener("test",I0,I0)}catch{fx=!1}var Dp=fx?{passive:!1}:!1,nq=function(e){return e.tagName==="TEXTAREA"},V5=function(e,r){if(!(e instanceof Element))return!1;var i=window.getComputedStyle(e);return i[r]!=="hidden"&&!(i.overflowY===i.overflowX&&!nq(e)&&i[r]==="visible")},iq=function(e){return V5(e,"overflowY")},aq=function(e){return V5(e,"overflowX")},AC=function(e,r){var i=r.ownerDocument,a=r;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var p=H5(e,a);if(p){var g=q5(e,a),y=g[1],c=g[2];if(y>c)return!0}a=a.parentNode}while(a&&a!==i.body);return!1},oq=function(e){var r=e.scrollTop,i=e.scrollHeight,a=e.clientHeight;return[r,i,a]},sq=function(e){var r=e.scrollLeft,i=e.scrollWidth,a=e.clientWidth;return[r,i,a]},H5=function(e,r){return e==="v"?iq(r):aq(r)},q5=function(e,r){return e==="v"?oq(r):sq(r)},lq=function(e,r){return e==="h"&&r==="rtl"?-1:1},uq=function(e,r,i,a,p){var g=lq(e,window.getComputedStyle(r).direction),y=g*a,c=i.target,C=r.contains(c),E=!1,M=y>0,k=0,N=0;do{if(!c)break;var j=q5(e,c),q=j[0],H=j[1],W=j[2],K=H-W-g*q;(q||K)&&H5(e,c)&&(k+=K,N+=q);var ee=c.parentNode;c=ee&&ee.nodeType===Node.DOCUMENT_FRAGMENT_NODE?ee.host:ee}while(!C&&c!==document.body||C&&(r.contains(c)||r===c));return(M&&Math.abs(k)<1||!M&&Math.abs(N)<1)&&(E=!0),E},O0=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},CC=function(e){return[e.deltaX,e.deltaY]},TC=function(e){return e&&"current"in e?e.current:e},cq=function(e,r){return e[0]===r[0]&&e[1]===r[1]},hq=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},fq=0,Ip=[];function dq(e){var r=X.useRef([]),i=X.useRef([0,0]),a=X.useRef(),p=X.useState(fq++)[0],g=X.useState($5)[0],y=X.useRef(e);X.useEffect(function(){y.current=e},[e]),X.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(p));var H=kH([e.lockRef.current],(e.shards||[]).map(TC),!0).filter(Boolean);return H.forEach(function(W){return W.classList.add("allow-interactivity-".concat(p))}),function(){document.body.classList.remove("block-interactivity-".concat(p)),H.forEach(function(W){return W.classList.remove("allow-interactivity-".concat(p))})}}},[e.inert,e.lockRef.current,e.shards]);var c=X.useCallback(function(H,W){if("touches"in H&&H.touches.length===2||H.type==="wheel"&&H.ctrlKey)return!y.current.allowPinchZoom;var K=O0(H),ee=i.current,ie="deltaX"in H?H.deltaX:ee[0]-K[0],ve="deltaY"in H?H.deltaY:ee[1]-K[1],ye,Pe=H.target,Me=Math.abs(ie)>Math.abs(ve)?"h":"v";if("touches"in H&&Me==="h"&&Pe.type==="range")return!1;var je=AC(Me,Pe);if(!je)return!0;if(je?ye=Me:(ye=Me==="v"?"h":"v",je=AC(Me,Pe)),!je)return!1;if(!a.current&&"changedTouches"in H&&(ie||ve)&&(a.current=ye),!ye)return!0;var ht=a.current||ye;return uq(ht,W,H,ht==="h"?ie:ve)},[]),C=X.useCallback(function(H){var W=H;if(!(!Ip.length||Ip[Ip.length-1]!==g)){var K="deltaY"in W?CC(W):O0(W),ee=r.current.filter(function(ye){return ye.name===W.type&&(ye.target===W.target||W.target===ye.shadowParent)&&cq(ye.delta,K)})[0];if(ee&&ee.should){W.cancelable&&W.preventDefault();return}if(!ee){var ie=(y.current.shards||[]).map(TC).filter(Boolean).filter(function(ye){return ye.contains(W.target)}),ve=ie.length>0?c(W,ie[0]):!y.current.noIsolation;ve&&W.cancelable&&W.preventDefault()}}},[]),E=X.useCallback(function(H,W,K,ee){var ie={name:H,delta:W,target:K,should:ee,shadowParent:pq(K)};r.current.push(ie),setTimeout(function(){r.current=r.current.filter(function(ve){return ve!==ie})},1)},[]),M=X.useCallback(function(H){i.current=O0(H),a.current=void 0},[]),k=X.useCallback(function(H){E(H.type,CC(H),H.target,c(H,e.lockRef.current))},[]),N=X.useCallback(function(H){E(H.type,O0(H),H.target,c(H,e.lockRef.current))},[]);X.useEffect(function(){return Ip.push(g),e.setCallbacks({onScrollCapture:k,onWheelCapture:k,onTouchMoveCapture:N}),document.addEventListener("wheel",C,Dp),document.addEventListener("touchmove",C,Dp),document.addEventListener("touchstart",M,Dp),function(){Ip=Ip.filter(function(H){return H!==g}),document.removeEventListener("wheel",C,Dp),document.removeEventListener("touchmove",C,Dp),document.removeEventListener("touchstart",M,Dp)}},[]);var j=e.removeScrollBar,q=e.inert;return X.createElement(X.Fragment,null,q?X.createElement(g,{styles:hq(p)}):null,j?X.createElement(rq,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function pq(e){for(var r=null;e!==null;)e instanceof ShadowRoot&&(r=e.host,e=e.host),e=e.parentNode;return r}const mq=VH(U5,dq);var G5=X.forwardRef(function(e,r){return X.createElement(c_,ec({},e,{ref:r,sideCar:mq}))});G5.classNames=c_.classNames;var gq=function(e){if(typeof document>"u")return null;var r=Array.isArray(e)?e[0]:e;return r.ownerDocument.body},Op=new WeakMap,k0=new WeakMap,L0={},pb=0,W5=function(e){return e&&(e.host||W5(e.parentNode))},yq=function(e,r){return r.map(function(i){if(e.contains(i))return i;var a=W5(i);return a&&e.contains(a)?a:(console.error("aria-hidden",i,"in not contained inside",e,". Doing nothing"),null)}).filter(function(i){return!!i})},vq=function(e,r,i,a){var p=yq(r,Array.isArray(e)?e:[e]);L0[i]||(L0[i]=new WeakMap);var g=L0[i],y=[],c=new Set,C=new Set(p),E=function(k){!k||c.has(k)||(c.add(k),E(k.parentNode))};p.forEach(E);var M=function(k){!k||C.has(k)||Array.prototype.forEach.call(k.children,function(N){if(c.has(N))M(N);else try{var j=N.getAttribute(a),q=j!==null&&j!=="false",H=(Op.get(N)||0)+1,W=(g.get(N)||0)+1;Op.set(N,H),g.set(N,W),y.push(N),H===1&&q&&k0.set(N,!0),W===1&&N.setAttribute(i,"true"),q||N.setAttribute(a,"true")}catch(K){console.error("aria-hidden: cannot operate on ",N,K)}})};return M(r),c.clear(),pb++,function(){y.forEach(function(k){var N=Op.get(k)-1,j=g.get(k)-1;Op.set(k,N),g.set(k,j),N||(k0.has(k)||k.removeAttribute(a),k0.delete(k)),j||k.removeAttribute(i)}),pb--,pb||(Op=new WeakMap,Op=new WeakMap,k0=new WeakMap,L0={})}},_q=function(e,r,i){i===void 0&&(i="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),p=gq(e);return p?(a.push.apply(a,Array.from(p.querySelectorAll("[aria-live], script"))),vq(a,p,i,"aria-hidden")):function(){return null}},h_="Dialog",[Z5]=Xg(h_),[bq,cu]=Z5(h_),X5=e=>{const{__scopeDialog:r,children:i,open:a,defaultOpen:p,onOpenChange:g,modal:y=!0}=e,c=X.useRef(null),C=X.useRef(null),[E,M]=Mv({prop:a,defaultProp:p??!1,onChange:g,caller:h_});return Ne.jsx(bq,{scope:r,triggerRef:c,contentRef:C,contentId:Dg(),titleId:Dg(),descriptionId:Dg(),open:E,onOpenChange:M,onOpenToggle:X.useCallback(()=>M(k=>!k),[M]),modal:y,children:i})};X5.displayName=h_;var K5="DialogTrigger",Y5=X.forwardRef((e,r)=>{const{__scopeDialog:i,...a}=e,p=cu(K5,i),g=nu(r,p.triggerRef);return Ne.jsx(ro.button,{type:"button","aria-haspopup":"dialog","aria-expanded":p.open,"aria-controls":p.contentId,"data-state":i2(p.open),...a,ref:g,onClick:rc(e.onClick,p.onOpenToggle)})});Y5.displayName=K5;var r2="DialogPortal",[xq,Q5]=Z5(r2,{forceMount:void 0}),J5=e=>{const{__scopeDialog:r,forceMount:i,children:a,container:p}=e,g=cu(r2,r);return Ne.jsx(xq,{scope:r,forceMount:i,children:X.Children.map(a,y=>Ne.jsx(Kg,{present:i||g.open,children:Ne.jsx(j5,{asChild:!0,container:p,children:y})}))})};J5.displayName=r2;var Ev="DialogOverlay",e4=X.forwardRef((e,r)=>{const i=Q5(Ev,e.__scopeDialog),{forceMount:a=i.forceMount,...p}=e,g=cu(Ev,e.__scopeDialog);return g.modal?Ne.jsx(Kg,{present:a||g.open,children:Ne.jsx(Sq,{...p,ref:r})}):null});e4.displayName=Ev;var wq=kg("DialogOverlay.RemoveScroll"),Sq=X.forwardRef((e,r)=>{const{__scopeDialog:i,...a}=e,p=cu(Ev,i);return Ne.jsx(G5,{as:wq,allowPinchZoom:!0,shards:[p.contentRef],children:Ne.jsx(ro.div,{"data-state":i2(p.open),...a,ref:r,style:{pointerEvents:"auto",...a.style}})})}),jd="DialogContent",t4=X.forwardRef((e,r)=>{const i=Q5(jd,e.__scopeDialog),{forceMount:a=i.forceMount,...p}=e,g=cu(jd,e.__scopeDialog);return Ne.jsx(Kg,{present:a||g.open,children:g.modal?Ne.jsx(Pq,{...p,ref:r}):Ne.jsx(Aq,{...p,ref:r})})});t4.displayName=jd;var Pq=X.forwardRef((e,r)=>{const i=cu(jd,e.__scopeDialog),a=X.useRef(null),p=nu(r,i.contentRef,a);return X.useEffect(()=>{const g=a.current;if(g)return _q(g)},[]),Ne.jsx(r4,{...e,ref:p,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:rc(e.onCloseAutoFocus,g=>{g.preventDefault(),i.triggerRef.current?.focus()}),onPointerDownOutside:rc(e.onPointerDownOutside,g=>{const y=g.detail.originalEvent,c=y.button===0&&y.ctrlKey===!0;(y.button===2||c)&&g.preventDefault()}),onFocusOutside:rc(e.onFocusOutside,g=>g.preventDefault())})}),Aq=X.forwardRef((e,r)=>{const i=cu(jd,e.__scopeDialog),a=X.useRef(!1),p=X.useRef(!1);return Ne.jsx(r4,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:g=>{e.onCloseAutoFocus?.(g),g.defaultPrevented||(a.current||i.triggerRef.current?.focus(),g.preventDefault()),a.current=!1,p.current=!1},onInteractOutside:g=>{e.onInteractOutside?.(g),g.defaultPrevented||(a.current=!0,g.detail.originalEvent.type==="pointerdown"&&(p.current=!0));const y=g.target;i.triggerRef.current?.contains(y)&&g.preventDefault(),g.detail.originalEvent.type==="focusin"&&p.current&&g.preventDefault()}})}),r4=X.forwardRef((e,r)=>{const{__scopeDialog:i,trapFocus:a,onOpenAutoFocus:p,onCloseAutoFocus:g,...y}=e,c=cu(jd,i),C=X.useRef(null),E=nu(r,C);return OH(),Ne.jsxs(Ne.Fragment,{children:[Ne.jsx(z5,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:p,onUnmountAutoFocus:g,children:Ne.jsx(k5,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":i2(c.open),...y,ref:E,onDismiss:()=>c.onOpenChange(!1)})}),Ne.jsxs(Ne.Fragment,{children:[Ne.jsx(Tq,{titleId:c.titleId}),Ne.jsx(Mq,{contentRef:C,descriptionId:c.descriptionId})]})]})}),n2="DialogTitle",Cq=X.forwardRef((e,r)=>{const{__scopeDialog:i,...a}=e,p=cu(n2,i);return Ne.jsx(ro.h2,{id:p.titleId,...a,ref:r})});Cq.displayName=n2;var n4="DialogDescription",i4=X.forwardRef((e,r)=>{const{__scopeDialog:i,...a}=e,p=cu(n4,i);return Ne.jsx(ro.p,{id:p.descriptionId,...a,ref:r})});i4.displayName=n4;var a4="DialogClose",o4=X.forwardRef((e,r)=>{const{__scopeDialog:i,...a}=e,p=cu(a4,i);return Ne.jsx(ro.button,{type:"button",...a,ref:r,onClick:rc(e.onClick,()=>p.onOpenChange(!1))})});o4.displayName=a4;function i2(e){return e?"open":"closed"}var s4="DialogTitleWarning",[SG,l4]=P4(s4,{contentName:jd,titleName:n2,docsSlug:"dialog"}),Tq=({titleId:e})=>{const r=l4(s4),i=`\`${r.contentName}\` requires a \`${r.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${r.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${r.docsSlug}`;return X.useEffect(()=>{e&&(document.getElementById(e)||console.error(i))},[i,e]),null},Eq="DialogDescriptionWarning",Mq=({contentRef:e,descriptionId:r})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${l4(Eq).contentName}}.`;return X.useEffect(()=>{const p=e.current?.getAttribute("aria-describedby");r&&p&&(document.getElementById(r)||console.warn(a))},[a,e,r]),null},Rq=X5,Dq=Y5,Iq=J5,Oq=e4,kq=t4,Lq=i4,zq=o4;function Nq({...e}){return Ne.jsx(Rq,{"data-slot":"dialog",...e})}function jq({...e}){return Ne.jsx(Dq,{"data-slot":"dialog-trigger",...e})}function Bq({...e}){return Ne.jsx(Iq,{"data-slot":"dialog-portal",...e})}function Fq({className:e,...r}){return Ne.jsx(Oq,{"data-slot":"dialog-overlay",className:hi("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...r})}function Uq({className:e,children:r,showCloseButton:i=!0,...a}){return Ne.jsxs(Bq,{"data-slot":"dialog-portal",children:[Ne.jsx(Fq,{}),Ne.jsxs(kq,{"data-slot":"dialog-content",className:hi("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...a,children:[r,i&&Ne.jsxs(zq,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[Ne.jsx(bR,{}),Ne.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function $q({className:e,...r}){return Ne.jsx("div",{"data-slot":"dialog-header",className:hi("flex flex-col gap-2 text-center sm:text-left",e),...r})}function Vq({className:e,...r}){return Ne.jsx(Lq,{"data-slot":"dialog-description",className:hi("text-muted-foreground text-sm",e),...r})}function Hq({className:e,...r}){return Ne.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:Ne.jsx("table",{"data-slot":"table",className:hi("w-full caption-bottom text-sm",e),...r})})}function qq({className:e,...r}){return Ne.jsx("thead",{"data-slot":"table-header",className:hi("[&_tr]:border-b",e),...r})}function Gq({className:e,...r}){return Ne.jsx("tbody",{"data-slot":"table-body",className:hi("[&_tr:last-child]:border-0",e),...r})}function EC({className:e,...r}){return Ne.jsx("tr",{"data-slot":"table-row",className:hi("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...r})}function kp({className:e,...r}){return Ne.jsx("th",{"data-slot":"table-head",className:hi("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}function Lp({className:e,...r}){return Ne.jsx("td",{"data-slot":"table-cell",className:hi("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}function Wq(e){return e.toLowerCase().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}function Zq({country:e,rows:r}){return Ne.jsxs(Hq,{children:[Ne.jsx(qq,{children:Ne.jsxs(EC,{children:[Ne.jsx(kp,{children:"Metric"}),Ne.jsx(kp,{children:Wq(e)}),Ne.jsx(kp,{children:"Average"}),Ne.jsx(kp,{children:"Top"}),Ne.jsx(kp,{children:"Expected"}),Ne.jsx(kp,{children:"Over/Under Expected"})]})}),Ne.jsx(Gq,{children:r.map((i,a)=>Ne.jsxs(EC,{children:[Ne.jsx(Lp,{children:i.metric}),Ne.jsx(Lp,{children:i.actual.toFixed(2)}),Ne.jsx(Lp,{children:i.average.toFixed(2)}),Ne.jsx(Lp,{children:i.top.toFixed(2)}),Ne.jsx(Lp,{children:i.expected.toFixed(2)}),Ne.jsxs(Lp,{children:[((i.actual-i.expected)/i.expected*100).toFixed(1),"%"]})]},a))})]})}function Xq({Country:e,AllCountries:r,disabled:i=!1,flash:a=!1}){const p=X.useMemo(()=>!e||!r||r.length===0?[]:r.filter(g=>String(g.metricName).toLowerCase()!=="happiness").map(g=>{const y=typeof g.currentCountryMetric=="number"?g.currentCountryMetric:NaN,c=typeof g.expectedForHappinessValue=="number"?g.expectedForHappinessValue:NaN,C=typeof g.averageValue=="number"?g.averageValue:NaN,E=typeof g.highestValue=="number"?g.highestValue:NaN,M=typeof g.lowestValue=="number"?g.lowestValue:NaN;return{metric:g.metricName,actual:y,expected:c,average:C,top:E,bottom:M}}),[e,r]);return Ne.jsxs(Nq,{children:[i?Ne.jsx(vb,{className:`w-full ${a?"disabled:!text-primary disabled:!bg-primary":"disabled:!text-accent disabled:!bg-accent"} disabled:opacity-100`,type:"button",disabled:!0,children:"Data Table"}):Ne.jsx(jq,{asChild:!0,children:Ne.jsx(vb,{className:`w-20 ${a?"text-primary":""}`,type:"button",children:"Data Table"})}),Ne.jsx(Uq,{className:"[&>button:last-child]:hidden w-full max-w-6xl md:max-w-4xl sm:max-w-3xl max-h-[80vh] overflow-y-auto",children:Ne.jsx($q,{children:Ne.jsx(Vq,{children:Ne.jsx(Zq,{country:e?e.Country_clean:"",rows:p})})})})]})}function Kq(e,r){const i=e.map(a=>a[r]).filter(a=>typeof a=="number"&&!isNaN(a));return i.length===0?{min:0,max:0}:{min:Math.min(...i),max:Math.max(...i)}}function Yq(e,r,i){const p=e.map(ee=>({h:ee.Happiness,m:ee[i]})).filter(ee=>typeof ee.h=="number"&&typeof ee.m=="number"&&!isNaN(ee.h));if(p.length===0)return NaN;const g=p.length,y=p.map(ee=>ee.h).slice().sort((ee,ie)=>ee-ie),c=new Map,C=Array.from(new Set(y));for(const ee of C){const ie=y.indexOf(ee),ve=y.lastIndexOf(ee),ye=(ie+ve)/2,Pe=g===1?.5:ye/(g-1);c.set(ee,Pe)}const E=p.map(ee=>({r:c.get(ee.h),m:ee.m})),M=E.reduce((ee,ie)=>ee+ie.r,0)/g,k=E.reduce((ee,ie)=>ee+ie.m,0)/g;let N=0,j=0;for(const ee of E){const ie=ee.r-M;N+=ie*(ee.m-k),j+=ie*ie}if(j<1e-6)return k;const q=N/j,H=k-q*M;let W=c.get(r);if(W===void 0)if(g===1)W=.5;else if(r<=y[0])W=0;else if(r>=y[g-1])W=1;else{let ee=y.findIndex(ie=>ie>=r);if(ee===-1&&(ee=g-1),ee===0)W=0;else{const ie=y[ee-1],ve=y[ee],ye=c.get(ie),Pe=c.get(ve),Me=(r-ie)/(ve-ie);W=ye+Me*(Pe-ye)}}return H+q*W}function Qq(e){return e.toLowerCase().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}function Jq(){const[e,r]=X.useState(""),[i,a]=X.useState([]),[p,g]=X.useState(""),[y,c]=X.useState(null),[C,E]=X.useState(!1),M=X.useRef(null),k=X.useRef(null);return X.useEffect(()=>{let N=[];for(const j in Ju[0]){const q=j;typeof Ju[0][q]=="number"&&N.push({metricName:j})}if(N.forEach(j=>{let q=0;Ju.forEach(H=>{const W=H[j.metricName];typeof W=="number"&&(q+=W,(j.highestValue===void 0||W>j.highestValue)&&(j.highestValue=W,j.highestCountryName=H.Country_clean),(j.lowestValue===void 0||W<j.lowestValue)&&(j.lowestValue=W,j.lowestCountryName=H.Country_clean))}),j.averageValue=q/Ju.length}),e){const j=Ju.find(q=>q.Country_clean===e)||null;if(c(j),E(!0),window.clearTimeout(k.current??void 0),k.current=window.setTimeout(()=>E(!1),400),j){for(const q in j){const H=q;typeof j[H]=="number"&&Kq(Ju,H)}N.forEach(q=>{const H=j[q.metricName];typeof H=="number"&&!isNaN(H)&&(q.currentCountryMetric=H,q.expectedForHappinessValue=Yq(Ju,j.Happiness,q.metricName))})}}return console.log(N[12]),a(N),()=>{window.clearTimeout(k.current??void 0)}},[e]),Ne.jsxs("div",{className:"container w-full h-screen bg-primary-foreground font-display",children:[Ne.jsxs("div",{className:"bg-primary text-primary-foreground flex flex-row justify-between items-center gap-4 p-3 w-full h-15",children:[Ne.jsxs("div",{className:"flex flex-row justify-start items-center gap-4",children:[Ne.jsx("a",{href:"",target:"_blank",children:Ne.jsx("img",{src:S4,className:"logo h-10",alt:"Vite logo"})}),Ne.jsx("h1",{children:"Happiness Report"})]}),Ne.jsxs("div",{className:"flex w-full max-w-sm items-center gap-2",children:[Ne.jsx(C6,{type:"email",placeholder:"Find a country",value:p,onChange:N=>g(N.target.value),onKeyDown:N=>{if(N.key==="Enter"){const j=Ju.find(q=>q.Country_clean.toLowerCase()===p.toLowerCase());r(j?j.Country_clean:p),g("")}},className:"placeholder:text-white placeholder:opacity-100"}),Ne.jsx(vb,{type:"button",variant:"outline",className:"bg-primary",onClick:()=>{const N=Ju.find(j=>j.Country_clean.toLowerCase()===p.toLowerCase());N&&(r(N.Country_clean),g(""))},children:"Search"})]})]}),Ne.jsx("div",{className:"card m-5 p-4 flex flex-col justify-center items-center gap-4 relative rounded-full h-1/4",ref:M,children:Ne.jsx(k6,{mapContainerRef:M,callback:r,countryStats:Ju})}),Ne.jsxs("div",{className:"flex flex-col md:flex-row justify-center items-center gap-15 p-5",children:[Ne.jsxs("div",{className:"flex-1 flex flex-col items-start max-w-200",children:[y?Ne.jsxs("div",{className:"flex flex-row justify-center items-center gap-3 w-full h-20 lg:h-12",children:[Ne.jsxs("div",{className:"flex-1 flex flex-col",children:[Ne.jsxs("div",{children:[Qq(e)," has the happiness rate of"," ",Ne.jsx("span",{className:"font-bold text-primary",children:y?.Happiness})]}),Ne.jsx(S6,{value:y?.Happiness*10,className:"mb-5"})]}),Ne.jsx("div",{className:"mb-5",children:Ne.jsx(Xq,{Country:y,AllCountries:i,disabled:!y,flash:C})})]}):Ne.jsx("div",{className:"h-12"}),Ne.jsx(gH,{flash:C,countryName:e,countryMetrics:y,absoluteStatistics:i})]}),Ne.jsxs("div",{className:"flex-1 max-w-100",children:[Ne.jsx("h2",{children:"About"}),Ne.jsx(wR,{})]})]})]})}function eG(){return Ne.jsx(Jq,{})}w4.createRoot(document.getElementById("root")).render(Ne.jsx(X.StrictMode,{children:Ne.jsx(eG,{})}));
